(function(){"use strict";var so=document.createElement("style");so.textContent=`table[data-v-69f095b4]{width:100%;border-collapse:collapse;font-size:13px}thead th[data-v-69f095b4]{text-align:left;padding:6px 8px;font-weight:600;color:var(--muted);border-bottom:1px solid var(--line)}thead th.num[data-v-69f095b4]{text-align:right}tbody td[data-v-69f095b4]{padding:6px 8px;border-top:1px solid var(--line);vertical-align:top}.col-w-42[data-v-69f095b4]{width:42%}.col-w-12[data-v-69f095b4]{width:12%}.col-w-14[data-v-69f095b4]{width:14%}.col-w-18[data-v-69f095b4]{width:18%}.group-row td[data-v-69f095b4]{padding-top:12px;padding-bottom:8px;background:color-mix(in srgb,var(--muted) 6%,transparent)}.group-header[data-v-69f095b4]{display:flex;justify-content:space-between;align-items:center;gap:12px;font-size:12px}.group-label[data-v-69f095b4]{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--fg)}.group-label .dot[data-v-69f095b4]{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 12%,transparent)}.group-meta[data-v-69f095b4]{display:flex;align-items:center;gap:8px;flex-wrap:wrap;color:var(--muted)}.group-meta .summary[data-v-69f095b4]{font-size:12px}.group-meta .summary-percent[data-v-69f095b4]{font-variant-numeric:tabular-nums;color:var(--fg);font-weight:600}.badge[data-v-69f095b4]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-69f095b4]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-69f095b4]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-69f095b4]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-69f095b4]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-69f095b4]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.cell[data-v-69f095b4]{display:flex;flex-direction:column;gap:4px}.row-name[data-v-69f095b4]{font-weight:600;color:var(--fg)}.progress[data-v-69f095b4]{position:relative;height:6px;background:color-mix(in srgb,var(--muted) 22%,transparent);border-radius:999px;overflow:hidden}.progress-bar[data-v-69f095b4]{height:100%;border-radius:999px;background:var(--brand);transition:width .2s ease}.num[data-v-69f095b4]{text-align:right;font-variant-numeric:tabular-nums;color:var(--fg)}.hint[data-v-69f095b4]{color:var(--muted);font-size:11px}.delta[data-v-69f095b4]{font-weight:600}.delta.pos[data-v-69f095b4]{color:var(--pos)}.delta.neg[data-v-69f095b4]{color:var(--neg)}.empty-row td.empty[data-v-69f095b4]{font-style:italic;color:var(--muted);text-align:center}.card.time-summary[data-v-c358573a]{display:flex;flex-direction:column;gap:6px;font-size:13px;color:var(--muted);padding:14px}.time-summary-firstline[data-v-c358573a]{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:12px;color:var(--fg);font-weight:600}.time-summary-firstline em[data-v-c358573a]{font-style:italic;color:var(--fg)}.mode-pill[data-v-c358573a]{display:inline-flex;align-items:center;padding:2px 8px;font-size:11px;font-weight:600;border-radius:999px;background:color-mix(in srgb,var(--brand) 18%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.time-summary-metrics[data-v-c358573a]{display:grid;gap:4px;margin:0;padding:0;list-style:none}.time-summary-metrics li[data-v-c358573a]{display:flex;flex-wrap:wrap;gap:4px;color:var(--muted)}.time-summary-metrics strong[data-v-c358573a]{color:var(--fg);font-size:14px}.time-summary-row[data-v-c358573a]{display:flex;flex-wrap:wrap;gap:4px;line-height:1.4;color:var(--muted)}.time-summary-row .label[data-v-c358573a]{color:var(--fg);font-weight:600}.time-summary-row.calendars[data-v-c358573a]{word-break:break-word}.time-summary-row .sep[data-v-c358573a],.time-summary-row .hint[data-v-c358573a],.time-summary-row .share[data-v-c358573a]{color:var(--muted)}.time-summary-row.top-category[data-v-c358573a]{align-items:center;gap:6px}.summary-badge[data-v-c358573a]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-c358573a]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-c358573a]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-c358573a]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-c358573a]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-c358573a]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.targets-card[data-v-bcb82b9a]{display:flex;flex-direction:column;gap:8px}.targets-header[data-v-bcb82b9a]{display:flex;justify-content:space-between;align-items:center}.targets-header strong[data-v-bcb82b9a]{font-size:14px}.targets-main[data-v-bcb82b9a]{display:flex;flex-direction:column;gap:4px;font-size:13px}.targets-main .line[data-v-bcb82b9a]{display:flex;flex-wrap:wrap;gap:6px}.targets-main .line.forecast[data-v-bcb82b9a]{flex-direction:column;gap:2px}.targets-main .line .value[data-v-bcb82b9a]{display:flex;gap:6px;align-items:center}.targets-badges[data-v-bcb82b9a]{display:flex;flex-wrap:wrap;gap:6px}.targets-categories[data-v-bcb82b9a]{display:flex;flex-direction:column;gap:10px;padding-top:6px;border-top:1px solid var(--line)}.category[data-v-bcb82b9a]{display:flex;flex-direction:column;gap:6px;font-size:12px;padding:4px 0}.category .cat-top[data-v-bcb82b9a]{display:flex;align-items:center;justify-content:space-between;gap:8px}.category .cat-label[data-v-bcb82b9a]{display:flex;align-items:center;gap:6px;font-weight:600;color:var(--fg)}.category .cat-label .dot[data-v-bcb82b9a]{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 10%,transparent)}.category .cat-label .name[data-v-bcb82b9a]{color:var(--fg)}.category .cat-meta[data-v-bcb82b9a]{display:flex;align-items:center;gap:6px;font-weight:600;color:var(--muted)}.category .cat-meta .percent[data-v-bcb82b9a]{font-variant-numeric:tabular-nums;color:var(--fg)}.cat-progress .bar[data-v-bcb82b9a]{position:relative;width:100%;height:8px;border-radius:999px;background:color-mix(in srgb,var(--muted) 20%,transparent)}.cat-progress .bar .fill[data-v-bcb82b9a]{height:100%;border-radius:999px;transition:width .2s ease}.category .cat-metrics[data-v-bcb82b9a]{display:flex;flex-wrap:wrap;gap:6px;align-items:center;color:var(--fg)}.cat-footer[data-v-bcb82b9a]{display:flex;justify-content:space-between;align-items:center}.hint[data-v-bcb82b9a]{color:var(--muted);font-size:12px}.badge[data-v-bcb82b9a]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-label[data-v-bcb82b9a]{font-weight:600}.status-on[data-v-bcb82b9a]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-bcb82b9a]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-bcb82b9a]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-bcb82b9a]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-bcb82b9a]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.delta[data-v-bcb82b9a]{font-weight:600}.delta.pos[data-v-bcb82b9a]{color:var(--pos)}.delta.neg[data-v-bcb82b9a]{color:var(--neg)}.cat-metrics .hint[data-v-bcb82b9a],.cat-footer .hint[data-v-bcb82b9a]{font-size:11px}.cat-progress[data-v-bcb82b9a]{padding:2px 0}.cat-meta .badge[data-v-bcb82b9a]{font-size:10px}.activity-card[data-v-054cbd84]{display:flex;flex-direction:column;gap:8px;padding:14px;font-size:13px;color:var(--muted)}.activity-card__header[data-v-054cbd84]{display:flex;justify-content:space-between;align-items:center;font-weight:600;color:var(--fg);font-size:12px}.activity-card__hero[data-v-054cbd84]{font-weight:600;color:var(--fg)}.activity-card__subline[data-v-054cbd84]{font-size:12px}.activity-card__meta[data-v-054cbd84],.activity-card__extra[data-v-054cbd84]{display:flex;flex-wrap:wrap;gap:8px 14px;font-size:12px}.activity-card__meta strong[data-v-054cbd84],.activity-card__extra strong[data-v-054cbd84]{font-weight:600;color:var(--fg)}.activity-card__hint[data-v-054cbd84]{font-size:11px;color:var(--muted);opacity:.8}.pill[data-v-054cbd84]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;font-size:11px;border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.balance-card[data-v-37915280]{display:flex;flex-direction:column;gap:8px;padding:14px;font-size:13px;color:var(--muted)}.balance-card__header[data-v-37915280]{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fg);font-size:12px}.balance-card__hero[data-v-37915280]{font-weight:600;color:var(--fg)}.balance-card__relations[data-v-37915280],.balance-card__trend[data-v-37915280]{font-size:12px}.balance-card__trend strong[data-v-37915280]{color:var(--fg)}.balance-card__insights[data-v-37915280],.balance-card__warnings[data-v-37915280]{margin:0;padding-left:16px;font-size:12px;display:flex;flex-direction:column;gap:4px}.balance-card__warnings[data-v-37915280]{color:var(--danger, #b91c1c)}.balance-card__note[data-v-37915280]{font-size:12px;color:var(--fg);background:color-mix(in oklab,var(--brand),transparent 88%);border-radius:6px;padding:6px 8px;white-space:pre-line}.badge[data-v-37915280]{display:inline-flex;align-items:center;padding:2px 8px;border-radius:999px;font-size:11px;background:color-mix(in srgb,var(--brand) 12%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.forecast-block[data-v-4d86aa83]{margin-top:16px;display:flex;flex-direction:column;gap:8px}.forecast-block .field[data-v-4d86aa83]{max-width:100%}.forecast-block select[data-v-4d86aa83]{width:100%}.forecast-hint[data-v-4d86aa83]{margin:0}.notes-section[data-v-f84bfd89]{display:flex;flex-direction:column;gap:8px}.notes-textarea[data-v-f84bfd89]{width:100%;min-height:120px;padding:8px 10px;border-radius:8px;border:1px solid var(--line);background:color-mix(in oklab,var(--card),transparent 5%);color:var(--fg);resize:vertical;box-sizing:border-box;font:13px/1.4 ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.notes-textarea[data-v-f84bfd89]:focus{outline:2px solid color-mix(in oklab,var(--brand),transparent 60%);outline-offset:1px}.notes-textarea[data-v-f84bfd89]:read-only{background:color-mix(in oklab,var(--card),transparent 15%);color:var(--muted)}.notes-actions[data-v-f84bfd89]{display:flex;justify-content:flex-end;margin-top:4px}.sb-description[data-v-cf80ad6c]{font-size:12px;color:var(--text-color-tertiary);margin:0 0 10px}.notes-config[data-v-cf80ad6c]{display:flex;justify-content:flex-start;margin-bottom:12px}.notes-toggle[data-v-cf80ad6c]{display:inline-flex;align-items:center;gap:8px;font-size:12px;color:var(--fg)}.notes-toggle input[data-v-cf80ad6c]{width:16px;height:16px}.sb-title[data-v-757fe817]{font-weight:600;margin-bottom:6px}.sb-description[data-v-757fe817]{font-size:12px;color:var(--text-color-tertiary);margin:0 0 10px}.preset-form[data-v-757fe817]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.setup-actions[data-v-757fe817]{display:flex;justify-content:flex-start;margin-bottom:12px}.rerun-btn[data-v-757fe817]{font-size:12px}.preset-label[data-v-757fe817]{font-size:12px;font-weight:600}.preset-form input[data-v-757fe817]{width:100%;padding:6px 8px;border-radius:4px;border:1px solid var(--color-border);background:var(--color-main-background);color:var(--color-main-text)}.preset-save[data-v-757fe817]{align-self:flex-start}.preset-error[data-v-757fe817]{color:var(--color-error);font-size:12px}.preset-warnings[data-v-757fe817]{border:1px solid var(--color-warning);background:color-mix(in srgb,var(--color-warning) 10%,transparent);border-radius:6px;padding:8px;margin-bottom:12px}.warnings-title[data-v-757fe817]{font-weight:600;margin-bottom:4px}.preset-warnings ul[data-v-757fe817]{padding-left:18px;margin:0 0 6px}.preset-clear[data-v-757fe817]{padding:2px 6px}.preset-header[data-v-757fe817]{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.preset-header h3[data-v-757fe817]{margin:0;font-size:13px;font-weight:600}.preset-empty[data-v-757fe817]{font-size:12px;color:var(--text-color-tertiary)}.preset-list[data-v-757fe817]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}.preset-item[data-v-757fe817]{border:1px solid var(--color-border);border-radius:6px;padding:8px;display:flex;flex-direction:column;gap:6px;background:var(--color-main-background)}.preset-meta[data-v-757fe817]{display:flex;flex-direction:column;gap:2px}.preset-name[data-v-757fe817]{font-weight:600}.preset-info[data-v-757fe817]{display:flex;flex-wrap:wrap;gap:8px;font-size:11px;color:var(--text-color-tertiary)}.preset-actions[data-v-757fe817]{display:flex;gap:6px}.theme-section[data-v-757fe817]{border:1px solid color-mix(in oklab,var(--line),transparent 30%);border-radius:10px;padding:12px;margin-bottom:16px;background:color-mix(in oklab,var(--card),transparent 6%);display:flex;flex-direction:column;gap:12px}.theme-header[data-v-757fe817]{display:flex;flex-direction:column;gap:2px}.theme-title[data-v-757fe817]{font-weight:600;font-size:13px;color:var(--fg)}.theme-hint[data-v-757fe817]{font-size:11px;color:var(--muted)}.theme-options[data-v-757fe817]{display:flex;flex-direction:column;gap:8px}.theme-option[data-v-757fe817]{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,var(--line),transparent 40%);background:color-mix(in oklab,var(--card),transparent 8%)}.theme-option input[type=radio][data-v-757fe817]{margin-top:4px}.theme-copy[data-v-757fe817]{display:flex;flex-direction:column;gap:2px;font-size:12px}.theme-option__title[data-v-757fe817]{font-weight:600;color:var(--fg)}.theme-option__desc[data-v-757fe817]{color:var(--muted)}.input-message[data-v-20b385e6]{font-size:11px;margin-top:4px;color:var(--muted)}.input-message.error[data-v-20b385e6]{color:var(--neg)}.input-message.warning[data-v-20b385e6]{color:var(--warning)}.onboarding-fade-enter-active[data-v-3fc1be8b],.onboarding-fade-leave-active[data-v-3fc1be8b]{transition:opacity .2s ease}.onboarding-fade-enter-from[data-v-3fc1be8b],.onboarding-fade-leave-to[data-v-3fc1be8b]{opacity:0}.onboarding-overlay[data-v-3fc1be8b]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2000;display:flex;align-items:center;justify-content:center;padding:24px}.onboarding-backdrop[data-v-3fc1be8b]{position:absolute;top:0;right:0;bottom:0;left:0;background:#0f172a73}.onboarding-panel[data-v-3fc1be8b]{position:relative;z-index:1;width:min(960px,100%);max-height:calc(100vh - 48px);background:var(--color-main-background, #fff);border-radius:12px;box-shadow:0 18px 48px #0f172a59;display:flex;flex-direction:column;padding:24px 28px}.onboarding-header[data-v-3fc1be8b]{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:16px}.onboarding-actions[data-v-3fc1be8b]{display:flex;align-items:center;gap:12px}.onboarding-title h2[data-v-3fc1be8b]{margin:0;font-size:1.6rem}.onboarding-title .subtitle[data-v-3fc1be8b]{margin:4px 0 0;color:var(--color-text-light)}.skip-link[data-v-3fc1be8b]{background:none;border:none;color:var(--color-primary);cursor:pointer;font-size:.95rem}.close-btn[data-v-3fc1be8b]{background:none;border:none;font-size:1.4rem;line-height:1;cursor:pointer;color:var(--color-text-light)}.close-btn[data-v-3fc1be8b]:hover{color:var(--color-primary)}.onboarding-body[data-v-3fc1be8b]{flex:1;overflow-y:auto;padding-right:8px;margin-right:-8px}.onboarding-step h3[data-v-3fc1be8b]{margin-top:0}.highlights[data-v-3fc1be8b]{padding-left:18px}.config-warning[data-v-3fc1be8b]{border:1px solid color-mix(in srgb,var(--color-warning, #f97316) 35%,transparent);background:color-mix(in srgb,var(--color-warning, #f97316) 12%,transparent);border-radius:8px;padding:12px;margin:12px 0;display:flex;flex-direction:column;gap:8px}.config-warning p[data-v-3fc1be8b]{margin:0;font-size:.95rem;color:var(--color-text)}.hint[data-v-3fc1be8b]{color:var(--color-text-light);margin-top:12px}.strategy-grid[data-v-3fc1be8b]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.strategy-card[data-v-3fc1be8b]{border:1px solid var(--color-border);border-radius:8px;padding:16px;cursor:pointer;display:flex;flex-direction:column;gap:8px;transition:border-color .15s ease,box-shadow .15s ease}.strategy-card.active[data-v-3fc1be8b]{border-color:var(--color-primary);box-shadow:0 0 0 2px #3b82f633}.strategy-card h4[data-v-3fc1be8b]{margin:0}.strategy-card .subtitle[data-v-3fc1be8b]{color:var(--color-text-light);margin:0}.strategy-card footer[data-v-3fc1be8b]{margin-top:auto;font-size:.85rem;color:var(--color-text-light)}.calendar-list[data-v-3fc1be8b]{display:grid;gap:8px;margin-top:8px}.calendar-item[data-v-3fc1be8b]{display:grid;grid-template-columns:auto auto 1fr;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--color-border);border-radius:6px}.calendar-item.checked[data-v-3fc1be8b]{border-color:var(--color-primary)}.calendar-item input[data-v-3fc1be8b]{margin:0}.calendar-item .dot[data-v-3fc1be8b]{width:12px;height:12px;border-radius:50%}.warning[data-v-3fc1be8b]{color:var(--color-error);margin-top:12px}.review-grid[data-v-3fc1be8b]{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.review-grid h5[data-v-3fc1be8b]{margin:0 0 8px;font-size:.95rem;color:var(--color-text-light)}.categories-editor[data-v-3fc1be8b]{display:grid;gap:16px}.category-card[data-v-3fc1be8b]{border:1px solid var(--color-border);border-radius:8px;padding:16px;background:var(--color-main-background, #fff);display:flex;flex-direction:column;gap:12px}.category-card__header[data-v-3fc1be8b]{display:flex;gap:12px;align-items:center}.category-name[data-v-3fc1be8b]{flex:1;padding:6px 8px;border:1px solid var(--color-border);border-radius:4px}.category-actions[data-v-3fc1be8b]{display:flex;gap:8px}.remove-category[data-v-3fc1be8b]{background:none;border:none;color:var(--color-text-light);cursor:pointer;font-size:1.1rem}.remove-category[data-v-3fc1be8b]:disabled{opacity:.4;cursor:default}.remove-category[data-v-3fc1be8b]:not(:disabled):hover{color:var(--color-error)}.category-card__fields[data-v-3fc1be8b]{display:flex;flex-wrap:wrap;gap:16px}.color-field[data-v-3fc1be8b]{display:flex;flex-direction:column;gap:6px}.color-chip-wrapper[data-v-3fc1be8b]{position:relative;display:inline-flex;align-items:center}.color-chip[data-v-3fc1be8b]{width:22px;height:22px;border-radius:50%;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:var(--brand, #2563eb);padding:0;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}.chip-outline[data-v-3fc1be8b]{width:14px;height:14px;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 90%)}.color-chip[data-v-3fc1be8b]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.color-popover[data-v-3fc1be8b]{position:absolute;top:calc(100% + 6px);left:0;z-index:30;min-width:160px;padding:10px;border-radius:10px;border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);background:var(--color-main-background, #fff);box-shadow:0 12px 32px #0f172a40;display:flex;flex-direction:column;gap:8px}.color-popover[data-v-3fc1be8b]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.swatch-grid[data-v-3fc1be8b]{display:grid;grid-template-columns:repeat(auto-fill,minmax(20px,1fr));gap:6px}.color-swatch[data-v-3fc1be8b]{width:20px;height:20px;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0;cursor:pointer}.color-swatch.active[data-v-3fc1be8b]{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 55%)}.color-swatch[data-v-3fc1be8b]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:1px}.custom-color[data-v-3fc1be8b]{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:.85rem;color:var(--color-text-light)}.color-input[data-v-3fc1be8b]{width:44px;height:26px;padding:0;border-radius:6px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:transparent}.add-category[data-v-3fc1be8b]{justify-self:flex-start}.category-total[data-v-3fc1be8b]{font-size:.9rem;color:var(--color-text-light)}.calendar-assignments[data-v-3fc1be8b]{margin-top:24px;display:grid;gap:12px}.assignment-row[data-v-3fc1be8b]{display:grid;grid-template-columns:1fr minmax(160px,220px);gap:12px;align-items:center}.assignment-row select[data-v-3fc1be8b]{padding:6px 8px}.cal-name[data-v-3fc1be8b]{font-size:.95rem}.onboarding-footer[data-v-3fc1be8b]{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.preferences-grid[data-v-3fc1be8b]{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}.pref-card[data-v-3fc1be8b]{border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);border-radius:10px;padding:12px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:12px}.pref-card h4[data-v-3fc1be8b]{margin:0}.pref-desc[data-v-3fc1be8b]{margin:0;font-size:.9rem;color:var(--color-text-light)}.pref-hint[data-v-3fc1be8b]{margin:0;font-size:.85rem;color:var(--color-text-light)}.theme-options[data-v-3fc1be8b]{display:flex;flex-direction:column;gap:8px}.theme-option[data-v-3fc1be8b]{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:color-mix(in oklab,var(--color-main-background, #fff),transparent 8%)}.theme-option input[type=radio][data-v-3fc1be8b]{margin-top:4px}.theme-copy[data-v-3fc1be8b]{display:flex;flex-direction:column;gap:2px;font-size:.9rem}.theme-option__title[data-v-3fc1be8b]{font-weight:600;color:var(--color-text)}.theme-option__desc[data-v-3fc1be8b]{color:var(--color-text-light);font-size:.85rem}.theme-preview[data-v-3fc1be8b]{font-size:.85rem;color:var(--color-text-light)}body.opsdash-onboarding-lock{overflow:hidden}
/*$vite$:1*/`,document.head.appendChild(so);/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Gs(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Oe={},un=[],Ct=()=>{},ao=()=>!1,os=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Js=e=>e.startsWith("onUpdate:"),qe=Object.assign,Ys=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Ai=Object.prototype.hasOwnProperty,Ee=(e,t)=>Ai.call(e,t),ve=Array.isArray,dn=e=>rs(e)==="[object Map]",oo=e=>rs(e)==="[object Set]",_e=e=>typeof e=="function",je=e=>typeof e=="string",It=e=>typeof e=="symbol",Re=e=>e!==null&&typeof e=="object",ro=e=>(Re(e)||_e(e))&&_e(e.then)&&_e(e.catch),io=Object.prototype.toString,rs=e=>io.call(e),Ei=e=>rs(e).slice(8,-1),lo=e=>rs(e)==="[object Object]",Zs=e=>je(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Mn=Gs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),is=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Di=/-(\w)/g,mt=is(e=>e.replace(Di,(t,n)=>n?n.toUpperCase():"")),Ni=/\B([A-Z])/g,zt=is(e=>e.replace(Ni,"-$1").toLowerCase()),ls=is(e=>e.charAt(0).toUpperCase()+e.slice(1)),Xs=is(e=>e?`on${ls(e)}`:""),Vt=(e,t)=>!Object.is(e,t),cs=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},co=(e,t,n,s=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:s,value:n})},Qs=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Ii=e=>{const t=je(e)?Number(e):NaN;return isNaN(t)?e:t};let uo;const us=()=>uo||(uo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ct(e){if(ve(e)){const t={};for(let n=0;n<e.length;n++){const s=e[n],a=je(s)?Fi(s):ct(s);if(a)for(const o in a)t[o]=a[o]}return t}else if(je(e)||Re(e))return e}const Pi=/;(?![^(]*\))/g,Li=/:([^]+)/,Oi=/\/\*[^]*?\*\//g;function Fi(e){const t={};return e.replace(Oi,"").split(Pi).forEach(n=>{if(n){const s=n.split(Li);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function ke(e){let t="";if(je(e))t=e;else if(ve(e))for(let n=0;n<e.length;n++){const s=ke(e[n]);s&&(t+=s+" ")}else if(Re(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Hi=Gs("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function fo(e){return!!e||e===""}const po=e=>!!(e&&e.__v_isRef===!0),P=e=>je(e)?e:e==null?"":ve(e)||Re(e)&&(e.toString===io||!_e(e.toString))?po(e)?P(e.value):JSON.stringify(e,go,2):String(e),go=(e,t)=>po(t)?go(e,t.value):dn(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[s,a],o)=>(n[ea(s,o)+" =>"]=a,n),{})}:oo(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>ea(n))}:It(t)?ea(t):Re(t)&&!ve(t)&&!lo(t)?String(t):t,ea=(e,t="")=>{var n;return It(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ut;class Bi{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ut,!t&&ut&&(this.index=(ut.scopes||(ut.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ut;try{return ut=this,t()}finally{ut=n}}}on(){++this._on===1&&(this.prevScope=ut,ut=this)}off(){this._on>0&&--this._on===0&&(ut=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,s;for(n=0,s=this.effects.length;n<s;n++)this.effects[n].stop();for(this.effects.length=0,n=0,s=this.cleanups.length;n<s;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,s=this.scopes.length;n<s;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function Ri(){return ut}let Be;const ta=new WeakSet;class ho{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ut&&ut.active&&ut.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ta.has(this)&&(ta.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||vo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xo(this),bo(this);const t=Be,n=wt;Be=this,wt=!0;try{return this.fn()}finally{yo(this),Be=t,wt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)oa(t);this.deps=this.depsTail=void 0,xo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ta.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){aa(this)&&this.run()}get dirty(){return aa(this)}}let mo=0,An,En;function vo(e,t=!1){if(e.flags|=8,t){e.next=En,En=e;return}e.next=An,An=e}function na(){mo++}function sa(){if(--mo>0)return;if(En){let t=En;for(En=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;An;){let t=An;for(An=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){e||(e=s)}t=n}}if(e)throw e}function bo(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function yo(e){let t,n=e.depsTail,s=n;for(;s;){const a=s.prevDep;s.version===-1?(s===n&&(n=a),oa(s),Wi(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=a}e.deps=t,e.depsTail=n}function aa(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(wo(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function wo(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Dn)||(e.globalVersion=Dn,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!aa(e))))return;e.flags|=2;const t=e.dep,n=Be,s=wt;Be=e,wt=!0;try{bo(e);const a=e.fn(e._value);(t.version===0||Vt(a,e._value))&&(e.flags|=128,e._value=a,t.version++)}catch(a){throw t.version++,a}finally{Be=n,wt=s,yo(e),e.flags&=-3}}function oa(e,t=!1){const{dep:n,prevSub:s,nextSub:a}=e;if(s&&(s.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=s,e.nextSub=void 0),n.subs===e&&(n.subs=s,!s&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)oa(o,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Wi(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let wt=!0;const _o=[];function St(){_o.push(wt),wt=!1}function $t(){const e=_o.pop();wt=e===void 0?!0:e}function xo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Be;Be=void 0;try{t()}finally{Be=n}}}let Dn=0;class ji{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ra{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Be||!wt||Be===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Be)n=this.activeLink=new ji(Be,this),Be.deps?(n.prevDep=Be.depsTail,Be.depsTail.nextDep=n,Be.depsTail=n):Be.deps=Be.depsTail=n,ko(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const s=n.nextDep;s.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=s),n.prevDep=Be.depsTail,n.nextDep=void 0,Be.depsTail.nextDep=n,Be.depsTail=n,Be.deps===n&&(Be.deps=s)}return n}trigger(t){this.version++,Dn++,this.notify(t)}notify(t){na();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{sa()}}}function ko(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)ko(s)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const ds=new WeakMap,en=Symbol(""),ia=Symbol(""),Nn=Symbol("");function et(e,t,n){if(wt&&Be){let s=ds.get(e);s||ds.set(e,s=new Map);let a=s.get(n);a||(s.set(n,a=new ra),a.map=s,a.key=n),a.track()}}function Pt(e,t,n,s,a,o){const r=ds.get(e);if(!r){Dn++;return}const l=c=>{c&&c.trigger()};if(na(),t==="clear")r.forEach(l);else{const c=ve(e),p=c&&Zs(n);if(c&&n==="length"){const f=Number(s);r.forEach((d,g)=>{(g==="length"||g===Nn||!It(g)&&g>=f)&&l(d)})}else switch((n!==void 0||r.has(void 0))&&l(r.get(n)),p&&l(r.get(Nn)),t){case"add":c?p&&l(r.get("length")):(l(r.get(en)),dn(e)&&l(r.get(ia)));break;case"delete":c||(l(r.get(en)),dn(e)&&l(r.get(ia)));break;case"set":dn(e)&&l(r.get(en));break}}sa()}function Ui(e,t){const n=ds.get(e);return n&&n.get(t)}function fn(e){const t=Te(e);return t===e?t:(et(t,"iterate",Nn),vt(e)?t:t.map(Je))}function fs(e){return et(e=Te(e),"iterate",Nn),e}const zi={__proto__:null,[Symbol.iterator](){return la(this,Symbol.iterator,Je)},concat(...e){return fn(this).concat(...e.map(t=>ve(t)?fn(t):t))},entries(){return la(this,"entries",e=>(e[1]=Je(e[1]),e))},every(e,t){return Lt(this,"every",e,t,void 0,arguments)},filter(e,t){return Lt(this,"filter",e,t,n=>n.map(Je),arguments)},find(e,t){return Lt(this,"find",e,t,Je,arguments)},findIndex(e,t){return Lt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Lt(this,"findLast",e,t,Je,arguments)},findLastIndex(e,t){return Lt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Lt(this,"forEach",e,t,void 0,arguments)},includes(...e){return ca(this,"includes",e)},indexOf(...e){return ca(this,"indexOf",e)},join(e){return fn(this).join(e)},lastIndexOf(...e){return ca(this,"lastIndexOf",e)},map(e,t){return Lt(this,"map",e,t,void 0,arguments)},pop(){return In(this,"pop")},push(...e){return In(this,"push",e)},reduce(e,...t){return Co(this,"reduce",e,t)},reduceRight(e,...t){return Co(this,"reduceRight",e,t)},shift(){return In(this,"shift")},some(e,t){return Lt(this,"some",e,t,void 0,arguments)},splice(...e){return In(this,"splice",e)},toReversed(){return fn(this).toReversed()},toSorted(e){return fn(this).toSorted(e)},toSpliced(...e){return fn(this).toSpliced(...e)},unshift(...e){return In(this,"unshift",e)},values(){return la(this,"values",Je)}};function la(e,t,n){const s=fs(e),a=s[t]();return s!==e&&!vt(e)&&(a._next=a.next,a.next=()=>{const o=a._next();return o.value&&(o.value=n(o.value)),o}),a}const Vi=Array.prototype;function Lt(e,t,n,s,a,o){const r=fs(e),l=r!==e&&!vt(e),c=r[t];if(c!==Vi[t]){const d=c.apply(e,o);return l?Je(d):d}let p=n;r!==e&&(l?p=function(d,g){return n.call(this,Je(d),g,e)}:n.length>2&&(p=function(d,g){return n.call(this,d,g,e)}));const f=c.call(r,p,s);return l&&a?a(f):f}function Co(e,t,n,s){const a=fs(e);let o=n;return a!==e&&(vt(e)?n.length>3&&(o=function(r,l,c){return n.call(this,r,l,c,e)}):o=function(r,l,c){return n.call(this,r,Je(l),c,e)}),a[t](o,...s)}function ca(e,t,n){const s=Te(e);et(s,"iterate",Nn);const a=s[t](...n);return(a===-1||a===!1)&&da(n[0])?(n[0]=Te(n[0]),s[t](...n)):a}function In(e,t,n=[]){St(),na();const s=Te(e)[t].apply(e,n);return sa(),$t(),s}const Ki=Gs("__proto__,__v_isRef,__isVue"),So=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(It));function qi(e){It(e)||(e=String(e));const t=Te(this);return et(t,"has",e),t.hasOwnProperty(e)}class $o{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,s){if(n==="__v_skip")return t.__v_skip;const a=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!a;if(n==="__v_isReadonly")return a;if(n==="__v_isShallow")return o;if(n==="__v_raw")return s===(a?o?No:Do:o?Eo:Ao).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const r=ve(t);if(!a){let c;if(r&&(c=zi[n]))return c;if(n==="hasOwnProperty")return qi}const l=Reflect.get(t,n,Ge(t)?t:s);return(It(n)?So.has(n):Ki(n))||(a||et(t,"get",n),o)?l:Ge(l)?r&&Zs(n)?l:l.value:Re(l)?a?Io(l):Tt(l):l}}class To extends $o{constructor(t=!1){super(!1,t)}set(t,n,s,a){let o=t[n];if(!this._isShallow){const c=Kt(o);if(!vt(s)&&!Kt(s)&&(o=Te(o),s=Te(s)),!ve(t)&&Ge(o)&&!Ge(s))return c||(o.value=s),!0}const r=ve(t)&&Zs(n)?Number(n)<t.length:Ee(t,n),l=Reflect.set(t,n,s,Ge(t)?t:a);return t===Te(a)&&(r?Vt(s,o)&&Pt(t,"set",n,s):Pt(t,"add",n,s)),l}deleteProperty(t,n){const s=Ee(t,n);t[n];const a=Reflect.deleteProperty(t,n);return a&&s&&Pt(t,"delete",n,void 0),a}has(t,n){const s=Reflect.has(t,n);return(!It(n)||!So.has(n))&&et(t,"has",n),s}ownKeys(t){return et(t,"iterate",ve(t)?"length":en),Reflect.ownKeys(t)}}class Mo extends $o{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const Gi=new To,Ji=new Mo,Yi=new To(!0),Zi=new Mo(!0),ua=e=>e,ps=e=>Reflect.getPrototypeOf(e);function Xi(e,t,n){return function(...s){const a=this.__v_raw,o=Te(a),r=dn(o),l=e==="entries"||e===Symbol.iterator&&r,c=e==="keys"&&r,p=a[e](...s),f=n?ua:t?vs:Je;return!t&&et(o,"iterate",c?ia:en),{next(){const{value:d,done:g}=p.next();return g?{value:d,done:g}:{value:l?[f(d[0]),f(d[1])]:f(d),done:g}},[Symbol.iterator](){return this}}}}function gs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Qi(e,t){const n={get(a){const o=this.__v_raw,r=Te(o),l=Te(a);e||(Vt(a,l)&&et(r,"get",a),et(r,"get",l));const{has:c}=ps(r),p=t?ua:e?vs:Je;if(c.call(r,a))return p(o.get(a));if(c.call(r,l))return p(o.get(l));o!==r&&o.get(a)},get size(){const a=this.__v_raw;return!e&&et(Te(a),"iterate",en),a.size},has(a){const o=this.__v_raw,r=Te(o),l=Te(a);return e||(Vt(a,l)&&et(r,"has",a),et(r,"has",l)),a===l?o.has(a):o.has(a)||o.has(l)},forEach(a,o){const r=this,l=r.__v_raw,c=Te(l),p=t?ua:e?vs:Je;return!e&&et(c,"iterate",en),l.forEach((f,d)=>a.call(o,p(f),p(d),r))}};return qe(n,e?{add:gs("add"),set:gs("set"),delete:gs("delete"),clear:gs("clear")}:{add(a){!t&&!vt(a)&&!Kt(a)&&(a=Te(a));const o=Te(this);return ps(o).has.call(o,a)||(o.add(a),Pt(o,"add",a,a)),this},set(a,o){!t&&!vt(o)&&!Kt(o)&&(o=Te(o));const r=Te(this),{has:l,get:c}=ps(r);let p=l.call(r,a);p||(a=Te(a),p=l.call(r,a));const f=c.call(r,a);return r.set(a,o),p?Vt(o,f)&&Pt(r,"set",a,o):Pt(r,"add",a,o),this},delete(a){const o=Te(this),{has:r,get:l}=ps(o);let c=r.call(o,a);c||(a=Te(a),c=r.call(o,a)),l&&l.call(o,a);const p=o.delete(a);return c&&Pt(o,"delete",a,void 0),p},clear(){const a=Te(this),o=a.size!==0,r=a.clear();return o&&Pt(a,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(a=>{n[a]=Xi(a,e,t)}),n}function hs(e,t){const n=Qi(e,t);return(s,a,o)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?s:Reflect.get(Ee(n,a)&&a in s?n:s,a,o)}const el={get:hs(!1,!1)},tl={get:hs(!1,!0)},nl={get:hs(!0,!1)},sl={get:hs(!0,!0)},Ao=new WeakMap,Eo=new WeakMap,Do=new WeakMap,No=new WeakMap;function al(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ol(e){return e.__v_skip||!Object.isExtensible(e)?0:al(Ei(e))}function Tt(e){return Kt(e)?e:ms(e,!1,Gi,el,Ao)}function rl(e){return ms(e,!1,Yi,tl,Eo)}function Io(e){return ms(e,!0,Ji,nl,Do)}function gy(e){return ms(e,!0,Zi,sl,No)}function ms(e,t,n,s,a){if(!Re(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=ol(e);if(o===0)return e;const r=a.get(e);if(r)return r;const l=new Proxy(e,o===2?s:n);return a.set(e,l),l}function pn(e){return Kt(e)?pn(e.__v_raw):!!(e&&e.__v_isReactive)}function Kt(e){return!!(e&&e.__v_isReadonly)}function vt(e){return!!(e&&e.__v_isShallow)}function da(e){return e?!!e.__v_raw:!1}function Te(e){const t=e&&e.__v_raw;return t?Te(t):e}function il(e){return!Ee(e,"__v_skip")&&Object.isExtensible(e)&&co(e,"__v_skip",!0),e}const Je=e=>Re(e)?Tt(e):e,vs=e=>Re(e)?Io(e):e;function Ge(e){return e?e.__v_isRef===!0:!1}function ie(e){return ll(e,!1)}function ll(e,t){return Ge(e)?e:new cl(e,t)}class cl{constructor(t,n){this.dep=new ra,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Te(t),this._value=n?t:Je(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,s=this.__v_isShallow||vt(t)||Kt(t);t=s?t:Te(t),Vt(t,n)&&(this._rawValue=t,this._value=s?t:Je(t),this.dep.trigger())}}function m(e){return Ge(e)?e.value:e}const ul={get:(e,t,n)=>t==="__v_raw"?e:m(Reflect.get(e,t,n)),set:(e,t,n,s)=>{const a=e[t];return Ge(a)&&!Ge(n)?(a.value=n,!0):Reflect.set(e,t,n,s)}};function Po(e){return pn(e)?e:new Proxy(e,ul)}function Pn(e){const t=ve(e)?new Array(e.length):{};for(const n in e)t[n]=fl(e,n);return t}class dl{constructor(t,n,s){this._object=t,this._key=n,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Ui(Te(this._object),this._key)}}function fl(e,t,n){const s=e[t];return Ge(s)?s:new dl(e,t,n)}class pl{constructor(t,n,s){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ra(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Dn-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Be!==this)return vo(this,!0),!0}get value(){const t=this.dep.track();return wo(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function gl(e,t,n=!1){let s,a;return _e(e)?s=e:(s=e.get,a=e.set),new pl(s,a,n)}const bs={},ys=new WeakMap;let tn;function hl(e,t=!1,n=tn){if(n){let s=ys.get(n);s||ys.set(n,s=[]),s.push(e)}}function ml(e,t,n=Oe){const{immediate:s,deep:a,once:o,scheduler:r,augmentJob:l,call:c}=n,p=E=>a?E:vt(E)||a===!1||a===0?Ot(E,1):Ot(E);let f,d,g,u,b=!1,h=!1;if(Ge(e)?(d=()=>e.value,b=vt(e)):pn(e)?(d=()=>p(e),b=!0):ve(e)?(h=!0,b=e.some(E=>pn(E)||vt(E)),d=()=>e.map(E=>{if(Ge(E))return E.value;if(pn(E))return p(E);if(_e(E))return c?c(E,2):E()})):_e(e)?t?d=c?()=>c(e,2):e:d=()=>{if(g){St();try{g()}finally{$t()}}const E=tn;tn=f;try{return c?c(e,3,[u]):e(u)}finally{tn=E}}:d=Ct,t&&a){const E=d,F=a===!0?1/0:a;d=()=>Ot(E(),F)}const y=Ri(),k=()=>{f.stop(),y&&y.active&&Ys(y.effects,f)};if(o&&t){const E=t;t=(...F)=>{E(...F),k()}}let _=h?new Array(e.length).fill(bs):bs;const w=E=>{if(!(!(f.flags&1)||!f.dirty&&!E))if(t){const F=f.run();if(a||b||(h?F.some((X,B)=>Vt(X,_[B])):Vt(F,_))){g&&g();const X=tn;tn=f;try{const B=[F,_===bs?void 0:h&&_[0]===bs?[]:_,u];_=F,c?c(t,3,B):t(...B)}finally{tn=X}}}else f.run()};return l&&l(w),f=new ho(d),f.scheduler=r?()=>r(w,!1):w,u=E=>hl(E,!1,f),g=f.onStop=()=>{const E=ys.get(f);if(E){if(c)c(E,4);else for(const F of E)F();ys.delete(f)}},t?s?w(!0):_=f.run():r?r(w.bind(null,!0),!0):f.run(),k.pause=f.pause.bind(f),k.resume=f.resume.bind(f),k.stop=k,k}function Ot(e,t=1/0,n){if(t<=0||!Re(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,Ge(e))Ot(e.value,t,n);else if(ve(e))for(let s=0;s<e.length;s++)Ot(e[s],t,n);else if(oo(e)||dn(e))e.forEach(s=>{Ot(s,t,n)});else if(lo(e)){for(const s in e)Ot(e[s],t,n);for(const s of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,s)&&Ot(e[s],t,n)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Ln=[];let fa=!1;function hy(e,...t){if(fa)return;fa=!0,St();const n=Ln.length?Ln[Ln.length-1].component:null,s=n&&n.appContext.config.warnHandler,a=vl();if(s)gn(s,n,11,[e+t.map(o=>{var r,l;return(l=(r=o.toString)==null?void 0:r.call(o))!=null?l:JSON.stringify(o)}).join(""),n&&n.proxy,a.map(({vnode:o})=>`at <${Ir(n,o.type)}>`).join(`
`),a]);else{const o=[`[Vue warn]: ${e}`,...t];a.length&&o.push(`
`,...bl(a)),console.warn(...o)}$t(),fa=!1}function vl(){let e=Ln[Ln.length-1];if(!e)return[];const t=[];for(;e;){const n=t[0];n&&n.vnode===e?n.recurseCount++:t.push({vnode:e,recurseCount:0});const s=e.component&&e.component.parent;e=s&&s.vnode}return t}function bl(e){const t=[];return e.forEach((n,s)=>{t.push(...s===0?[]:[`
`],...yl(n))}),t}function yl({vnode:e,recurseCount:t}){const n=t>0?`... (${t} recursive calls)`:"",s=e.component?e.component.parent==null:!1,a=` at <${Ir(e.component,e.type,s)}`,o=">"+n;return e.props?[a,...wl(e.props),o]:[a+o]}function wl(e){const t=[],n=Object.keys(e);return n.slice(0,3).forEach(s=>{t.push(...Lo(s,e[s]))}),n.length>3&&t.push(" ..."),t}function Lo(e,t,n){return je(t)?(t=JSON.stringify(t),n?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?n?t:[`${e}=${t}`]:Ge(t)?(t=Lo(e,Te(t.value),!0),n?t:[`${e}=Ref<`,t,">"]):_e(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Te(t),n?t:[`${e}=`,t])}function gn(e,t,n,s){try{return s?e(...s):e()}catch(a){ws(a,t,n)}}function _t(e,t,n,s){if(_e(e)){const a=gn(e,t,n,s);return a&&ro(a)&&a.catch(o=>{ws(o,t,n)}),a}if(ve(e)){const a=[];for(let o=0;o<e.length;o++)a.push(_t(e[o],t,n,s));return a}}function ws(e,t,n,s=!0){const a=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=t&&t.appContext.config||Oe;if(t){let l=t.parent;const c=t.proxy,p=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const f=l.ec;if(f){for(let d=0;d<f.length;d++)if(f[d](e,c,p)===!1)return}l=l.parent}if(o){St(),gn(o,null,10,[e,c,p]),$t();return}}_l(e,n,a,s,r)}function _l(e,t,n,s=!0,a=!1){if(a)throw e;console.error(e)}const at=[];let Mt=-1;const hn=[];let qt=null,mn=0;const Oo=Promise.resolve();let _s=null;function nn(e){const t=_s||Oo;return e?t.then(this?e.bind(this):e):t}function xl(e){let t=Mt+1,n=at.length;for(;t<n;){const s=t+n>>>1,a=at[s],o=On(a);o<e||o===e&&a.flags&2?t=s+1:n=s}return t}function pa(e){if(!(e.flags&1)){const t=On(e),n=at[at.length-1];!n||!(e.flags&2)&&t>=On(n)?at.push(e):at.splice(xl(t),0,e),e.flags|=1,Fo()}}function Fo(){_s||(_s=Oo.then(Ro))}function kl(e){ve(e)?hn.push(...e):qt&&e.id===-1?qt.splice(mn+1,0,e):e.flags&1||(hn.push(e),e.flags|=1),Fo()}function Ho(e,t,n=Mt+1){for(;n<at.length;n++){const s=at[n];if(s&&s.flags&2){if(e&&s.id!==e.uid)continue;at.splice(n,1),n--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function Bo(e){if(hn.length){const t=[...new Set(hn)].sort((n,s)=>On(n)-On(s));if(hn.length=0,qt){qt.push(...t);return}for(qt=t,mn=0;mn<qt.length;mn++){const n=qt[mn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}qt=null,mn=0}}const On=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ro(e){try{for(Mt=0;Mt<at.length;Mt++){const t=at[Mt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),gn(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Mt<at.length;Mt++){const t=at[Mt];t&&(t.flags&=-2)}Mt=-1,at.length=0,Bo(),_s=null,(at.length||hn.length)&&Ro()}}let Ye=null,Wo=null;function xs(e){const t=Ye;return Ye=e,Wo=e&&e.type.__scopeId||null,t}function Fe(e,t=Ye,n){if(!t||e._n)return e;const s=(...a)=>{s._d&&Cr(-1);const o=xs(t);let r;try{r=e(...a)}finally{xs(o),s._d&&Cr(1)}return r};return s._n=!0,s._c=!0,s._d=!0,s}function Fn(e,t){if(Ye===null)return e;const n=Ns(Ye),s=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[o,r,l,c=Oe]=t[a];o&&(_e(o)&&(o={mounted:o,updated:o}),o.deep&&Ot(r),s.push({dir:o,instance:n,value:r,oldValue:void 0,arg:l,modifiers:c}))}return e}function sn(e,t,n,s){const a=e.dirs,o=t&&t.dirs;for(let r=0;r<a.length;r++){const l=a[r];o&&(l.oldValue=o[r].value);let c=l.dir[s];c&&(St(),_t(c,n,8,[e.el,l,e,t]),$t())}}const Cl=Symbol("_vte"),jo=e=>e.__isTeleport,Ft=Symbol("_leaveCb"),ks=Symbol("_enterCb");function Sl(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return At(()=>{e.isMounted=!0}),bn(()=>{e.isUnmounting=!0}),e}const bt=[Function,Array],Uo={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:bt,onEnter:bt,onAfterEnter:bt,onEnterCancelled:bt,onBeforeLeave:bt,onLeave:bt,onAfterLeave:bt,onLeaveCancelled:bt,onBeforeAppear:bt,onAppear:bt,onAfterAppear:bt,onAppearCancelled:bt},zo=e=>{const t=e.subTree;return t.component?zo(t.component):t},$l={name:"BaseTransition",props:Uo,setup(e,{slots:t}){const n=Tr(),s=Sl();return()=>{const a=t.default&&Go(t.default(),!0);if(!a||!a.length)return;const o=Vo(a),r=Te(e),{mode:l}=r;if(s.isLeaving)return ha(o);const c=qo(o);if(!c)return ha(o);let p=ga(c,r,s,n,d=>p=d);c.type!==tt&&Hn(c,p);let f=n.subTree&&qo(n.subTree);if(f&&f.type!==tt&&!on(c,f)&&zo(n).type!==tt){let d=ga(f,r,s,n);if(Hn(f,d),l==="out-in"&&c.type!==tt)return s.isLeaving=!0,d.afterLeave=()=>{s.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,f=void 0},ha(o);l==="in-out"&&c.type!==tt?d.delayLeave=(g,u,b)=>{const h=Ko(s,f);h[String(f.key)]=f,g[Ft]=()=>{u(),g[Ft]=void 0,delete p.delayedLeave,f=void 0},p.delayedLeave=()=>{b(),delete p.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return o}}};function Vo(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==tt){t=n;break}}return t}const Tl=$l;function Ko(e,t){const{leavingVNodes:n}=e;let s=n.get(t.type);return s||(s=Object.create(null),n.set(t.type,s)),s}function ga(e,t,n,s,a){const{appear:o,mode:r,persisted:l=!1,onBeforeEnter:c,onEnter:p,onAfterEnter:f,onEnterCancelled:d,onBeforeLeave:g,onLeave:u,onAfterLeave:b,onLeaveCancelled:h,onBeforeAppear:y,onAppear:k,onAfterAppear:_,onAppearCancelled:w}=t,E=String(e.key),F=Ko(n,e),X=(q,K)=>{q&&_t(q,s,9,K)},B=(q,K)=>{const re=K[1];X(q,K),ve(q)?q.every(J=>J.length<=1)&&re():q.length<=1&&re()},C={mode:r,persisted:l,beforeEnter(q){let K=c;if(!n.isMounted)if(o)K=y||c;else return;q[Ft]&&q[Ft](!0);const re=F[E];re&&on(e,re)&&re.el[Ft]&&re.el[Ft](),X(K,[q])},enter(q){let K=p,re=f,J=d;if(!n.isMounted)if(o)K=k||p,re=_||f,J=w||d;else return;let le=!1;const ye=q[ks]=Q=>{le||(le=!0,Q?X(J,[q]):X(re,[q]),C.delayedLeave&&C.delayedLeave(),q[ks]=void 0)};K?B(K,[q,ye]):ye()},leave(q,K){const re=String(e.key);if(q[ks]&&q[ks](!0),n.isUnmounting)return K();X(g,[q]);let J=!1;const le=q[Ft]=ye=>{J||(J=!0,K(),ye?X(h,[q]):X(b,[q]),q[Ft]=void 0,F[re]===e&&delete F[re])};F[re]=e,u?B(u,[q,le]):le()},clone(q){const K=ga(q,t,n,s,a);return a&&a(K),K}};return C}function ha(e){if(Cs(e))return e=Gt(e),e.children=null,e}function qo(e){if(!Cs(e))return jo(e.type)&&e.children?Vo(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&_e(n.default))return n.default()}}function Hn(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Hn(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Go(e,t=!1,n){let s=[],a=0;for(let o=0;o<e.length;o++){let r=e[o];const l=n==null?r.key:String(n)+String(r.key!=null?r.key:o);r.type===de?(r.patchFlag&128&&a++,s=s.concat(Go(r.children,t,l))):(t||r.type!==tt)&&s.push(l!=null?Gt(r,{key:l}):r)}if(a>1)for(let o=0;o<s.length;o++)s[o].patchFlag=-2;return s}/*! #__NO_SIDE_EFFECTS__ */function He(e,t){return _e(e)?qe({name:e.name},t,{setup:e}):e}function Jo(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Bn(e,t,n,s,a=!1){if(ve(e)){e.forEach((b,h)=>Bn(b,t&&(ve(t)?t[h]:t),n,s,a));return}if(vn(s)&&!a){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&Bn(e,t,n,s.component.subTree);return}const o=s.shapeFlag&4?Ns(s.component):s.el,r=a?null:o,{i:l,r:c}=e,p=t&&t.r,f=l.refs===Oe?l.refs={}:l.refs,d=l.setupState,g=Te(d),u=d===Oe?ao:b=>Ee(g,b);if(p!=null&&p!==c){if(je(p))f[p]=null,u(p)&&(d[p]=null);else if(Ge(p)){p.value=null;const b=t;b.k&&(f[b.k]=null)}}if(_e(c))gn(c,l,12,[r,f]);else{const b=je(c),h=Ge(c);if(b||h){const y=()=>{if(e.f){const k=b?u(c)?d[c]:f[c]:c.value;if(a)ve(k)&&Ys(k,o);else if(ve(k))k.includes(o)||k.push(o);else if(b)f[c]=[o],u(c)&&(d[c]=f[c]);else{const _=[o];c.value=_,e.k&&(f[e.k]=_)}}else b?(f[c]=r,u(c)&&(d[c]=r)):h&&(c.value=r,e.k&&(f[e.k]=r))};r?(y.id=-1,gt(y,n)):y()}}}us().requestIdleCallback,us().cancelIdleCallback;const vn=e=>!!e.type.__asyncLoader,Cs=e=>e.type.__isKeepAlive;function Ml(e,t){Yo(e,"a",t)}function Al(e,t){Yo(e,"da",t)}function Yo(e,t,n=nt){const s=e.__wdc||(e.__wdc=()=>{let a=n;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(Ss(t,s,n),n){let a=n.parent;for(;a&&a.parent;)Cs(a.parent.vnode)&&El(s,t,n,a),a=a.parent}}function El(e,t,n,s){const a=Ss(t,e,s,!0);ma(()=>{Ys(s[t],a)},n)}function Ss(e,t,n=nt,s=!1){if(n){const a=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{St();const l=Vn(n),c=_t(t,n,e,r);return l(),$t(),c});return s?a.unshift(o):a.push(o),o}}const Ht=e=>(t,n=nt)=>{(!Kn||e==="sp")&&Ss(e,(...s)=>t(...s),n)},Dl=Ht("bm"),At=Ht("m"),Nl=Ht("bu"),Il=Ht("u"),bn=Ht("bum"),ma=Ht("um"),Pl=Ht("sp"),Ll=Ht("rtg"),Ol=Ht("rtc");function Fl(e,t=nt){Ss("ec",e,t)}const Hl="components";function Bl(e,t){return Wl(Hl,e,!0,t)||e}const Rl=Symbol.for("v-ndc");function Wl(e,t,n=!0,s=!1){const a=Ye||nt;if(a){const o=a.type;{const l=Nr(o,!1);if(l&&(l===t||l===mt(t)||l===ls(mt(t))))return o}const r=Zo(a[e]||o[e],t)||Zo(a.appContext[e],t);return!r&&s?o:r}}function Zo(e,t){return e&&(e[t]||e[mt(t)]||e[ls(mt(t))])}function De(e,t,n,s){let a;const o=n,r=ve(e);if(r||je(e)){const l=r&&pn(e);let c=!1,p=!1;l&&(c=!vt(e),p=Kt(e),e=fs(e)),a=new Array(e.length);for(let f=0,d=e.length;f<d;f++)a[f]=t(c?p?vs(Je(e[f])):Je(e[f]):e[f],f,void 0,o)}else if(typeof e=="number"){a=new Array(e);for(let l=0;l<e;l++)a[l]=t(l+1,l,void 0,o)}else if(Re(e))if(e[Symbol.iterator])a=Array.from(e,(l,c)=>t(l,c,void 0,o));else{const l=Object.keys(e);a=new Array(l.length);for(let c=0,p=l.length;c<p;c++){const f=l[c];a[c]=t(e[f],f,c,o)}}else a=[];return a}function jl(e,t,n={},s,a){if(Ye.ce||Ye.parent&&vn(Ye.parent)&&Ye.parent.ce)return n.name=t,S(),We(de,null,[we("slot",n,s)],64);let o=e[t];o&&o._c&&(o._d=!1),S();const r=o&&Xo(o(n)),l=n.key||r&&r.key,c=We(de,{key:(l&&!It(l)?l:`_${t}`)+(!r&&s?"_fb":"")},r||[],r&&e._===1?64:-2);return o&&o._c&&(o._d=!0),c}function Xo(e){return e.some(t=>zn(t)?!(t.type===tt||t.type===de&&!Xo(t.children)):!0)?e:null}const va=e=>e?Ar(e)?Ns(e):va(e.parent):null,Rn=qe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>va(e.parent),$root:e=>va(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>nr(e),$forceUpdate:e=>e.f||(e.f=()=>{pa(e.update)}),$nextTick:e=>e.n||(e.n=nn.bind(e.proxy)),$watch:e=>uc.bind(e)}),ba=(e,t)=>e!==Oe&&!e.__isScriptSetup&&Ee(e,t),Ul={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:s,data:a,props:o,accessCache:r,type:l,appContext:c}=e;let p;if(t[0]!=="$"){const u=r[t];if(u!==void 0)switch(u){case 1:return s[t];case 2:return a[t];case 4:return n[t];case 3:return o[t]}else{if(ba(s,t))return r[t]=1,s[t];if(a!==Oe&&Ee(a,t))return r[t]=2,a[t];if((p=e.propsOptions[0])&&Ee(p,t))return r[t]=3,o[t];if(n!==Oe&&Ee(n,t))return r[t]=4,n[t];ya&&(r[t]=0)}}const f=Rn[t];let d,g;if(f)return t==="$attrs"&&et(e.attrs,"get",""),f(e);if((d=l.__cssModules)&&(d=d[t]))return d;if(n!==Oe&&Ee(n,t))return r[t]=4,n[t];if(g=c.config.globalProperties,Ee(g,t))return g[t]},set({_:e},t,n){const{data:s,setupState:a,ctx:o}=e;return ba(a,t)?(a[t]=n,!0):s!==Oe&&Ee(s,t)?(s[t]=n,!0):Ee(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:s,appContext:a,propsOptions:o,type:r}},l){let c,p;return!!(n[l]||e!==Oe&&l[0]!=="$"&&Ee(e,l)||ba(t,l)||(c=o[0])&&Ee(c,l)||Ee(s,l)||Ee(Rn,l)||Ee(a.config.globalProperties,l)||(p=r.__cssModules)&&p[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Ee(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Qo(e){return ve(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let ya=!0;function zl(e){const t=nr(e),n=e.proxy,s=e.ctx;ya=!1,t.beforeCreate&&er(t.beforeCreate,e,"bc");const{data:a,computed:o,methods:r,watch:l,provide:c,inject:p,created:f,beforeMount:d,mounted:g,beforeUpdate:u,updated:b,activated:h,deactivated:y,beforeDestroy:k,beforeUnmount:_,destroyed:w,unmounted:E,render:F,renderTracked:X,renderTriggered:B,errorCaptured:C,serverPrefetch:q,expose:K,inheritAttrs:re,components:J,directives:le,filters:ye}=t;if(p&&Vl(p,s,null),r)for(const ce in r){const pe=r[ce];_e(pe)&&(s[ce]=pe.bind(n))}if(a){const ce=a.call(n,n);Re(ce)&&(e.data=Tt(ce))}if(ya=!0,o)for(const ce in o){const pe=o[ce],Se=_e(pe)?pe.bind(n,n):_e(pe.get)?pe.get.bind(n,n):Ct,Ie=!_e(pe)&&_e(pe.set)?pe.set.bind(n):Ct,ee=V({get:Se,set:Ie});Object.defineProperty(s,ce,{enumerable:!0,configurable:!0,get:()=>ee.value,set:xe=>ee.value=xe})}if(l)for(const ce in l)tr(l[ce],s,n,ce);if(c){const ce=_e(c)?c.call(n):c;Reflect.ownKeys(ce).forEach(pe=>{Zl(pe,ce[pe])})}f&&er(f,e,"c");function he(ce,pe){ve(pe)?pe.forEach(Se=>ce(Se.bind(n))):pe&&ce(pe.bind(n))}if(he(Dl,d),he(At,g),he(Nl,u),he(Il,b),he(Ml,h),he(Al,y),he(Fl,C),he(Ol,X),he(Ll,B),he(bn,_),he(ma,E),he(Pl,q),ve(K))if(K.length){const ce=e.exposed||(e.exposed={});K.forEach(pe=>{Object.defineProperty(ce,pe,{get:()=>n[pe],set:Se=>n[pe]=Se,enumerable:!0})})}else e.exposed||(e.exposed={});F&&e.render===Ct&&(e.render=F),re!=null&&(e.inheritAttrs=re),J&&(e.components=J),le&&(e.directives=le),q&&Jo(e)}function Vl(e,t,n=Ct){ve(e)&&(e=wa(e));for(const s in e){const a=e[s];let o;Re(a)?"default"in a?o=Ts(a.from||s,a.default,!0):o=Ts(a.from||s):o=Ts(a),Ge(o)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):t[s]=o}}function er(e,t,n){_t(ve(e)?e.map(s=>s.bind(t.proxy)):e.bind(t.proxy),t,n)}function tr(e,t,n,s){let a=s.includes(".")?yr(n,s):()=>n[s];if(je(e)){const o=t[e];_e(o)&&Ue(a,o)}else if(_e(e))Ue(a,e.bind(n));else if(Re(e))if(ve(e))e.forEach(o=>tr(o,t,n,s));else{const o=_e(e.handler)?e.handler.bind(n):t[e.handler];_e(o)&&Ue(a,o,e)}}function nr(e){const t=e.type,{mixins:n,extends:s}=t,{mixins:a,optionsCache:o,config:{optionMergeStrategies:r}}=e.appContext,l=o.get(t);let c;return l?c=l:!a.length&&!n&&!s?c=t:(c={},a.length&&a.forEach(p=>$s(c,p,r,!0)),$s(c,t,r)),Re(t)&&o.set(t,c),c}function $s(e,t,n,s=!1){const{mixins:a,extends:o}=t;o&&$s(e,o,n,!0),a&&a.forEach(r=>$s(e,r,n,!0));for(const r in t)if(!(s&&r==="expose")){const l=Kl[r]||n&&n[r];e[r]=l?l(e[r],t[r]):t[r]}return e}const Kl={data:sr,props:ar,emits:ar,methods:Wn,computed:Wn,beforeCreate:ot,created:ot,beforeMount:ot,mounted:ot,beforeUpdate:ot,updated:ot,beforeDestroy:ot,beforeUnmount:ot,destroyed:ot,unmounted:ot,activated:ot,deactivated:ot,errorCaptured:ot,serverPrefetch:ot,components:Wn,directives:Wn,watch:Gl,provide:sr,inject:ql};function sr(e,t){return t?e?function(){return qe(_e(e)?e.call(this,this):e,_e(t)?t.call(this,this):t)}:t:e}function ql(e,t){return Wn(wa(e),wa(t))}function wa(e){if(ve(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ot(e,t){return e?[...new Set([].concat(e,t))]:t}function Wn(e,t){return e?qe(Object.create(null),e,t):t}function ar(e,t){return e?ve(e)&&ve(t)?[...new Set([...e,...t])]:qe(Object.create(null),Qo(e),Qo(t??{})):t}function Gl(e,t){if(!e)return t;if(!t)return e;const n=qe(Object.create(null),e);for(const s in t)n[s]=ot(e[s],t[s]);return n}function or(){return{app:null,config:{isNativeTag:ao,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Jl=0;function Yl(e,t){return function(s,a=null){_e(s)||(s=qe({},s)),a!=null&&!Re(a)&&(a=null);const o=or(),r=new WeakSet,l=[];let c=!1;const p=o.app={_uid:Jl++,_component:s,_props:a,_container:null,_context:o,_instance:null,version:Nc,get config(){return o.config},set config(f){},use(f,...d){return r.has(f)||(f&&_e(f.install)?(r.add(f),f.install(p,...d)):_e(f)&&(r.add(f),f(p,...d))),p},mixin(f){return o.mixins.includes(f)||o.mixins.push(f),p},component(f,d){return d?(o.components[f]=d,p):o.components[f]},directive(f,d){return d?(o.directives[f]=d,p):o.directives[f]},mount(f,d,g){if(!c){const u=p._ceVNode||we(s,a);return u.appContext=o,g===!0?g="svg":g===!1&&(g=void 0),e(u,f,g),c=!0,p._container=f,f.__vue_app__=p,Ns(u.component)}},onUnmount(f){l.push(f)},unmount(){c&&(_t(l,p._instance,16),e(null,p._container),delete p._container.__vue_app__)},provide(f,d){return o.provides[f]=d,p},runWithContext(f){const d=yn;yn=p;try{return f()}finally{yn=d}}};return p}}let yn=null;function Zl(e,t){if(nt){let n=nt.provides;const s=nt.parent&&nt.parent.provides;s===n&&(n=nt.provides=Object.create(s)),n[e]=t}}function Ts(e,t,n=!1){const s=Tr();if(s||yn){let a=yn?yn._context.provides:s?s.parent==null||s.ce?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return n&&_e(t)?t.call(s&&s.proxy):t}}const rr={},ir=()=>Object.create(rr),lr=e=>Object.getPrototypeOf(e)===rr;function Xl(e,t,n,s=!1){const a={},o=ir();e.propsDefaults=Object.create(null),cr(e,t,a,o);for(const r in e.propsOptions[0])r in a||(a[r]=void 0);n?e.props=s?a:rl(a):e.type.props?e.props=a:e.props=o,e.attrs=o}function Ql(e,t,n,s){const{props:a,attrs:o,vnode:{patchFlag:r}}=e,l=Te(a),[c]=e.propsOptions;let p=!1;if((s||r>0)&&!(r&16)){if(r&8){const f=e.vnode.dynamicProps;for(let d=0;d<f.length;d++){let g=f[d];if(Ms(e.emitsOptions,g))continue;const u=t[g];if(c)if(Ee(o,g))u!==o[g]&&(o[g]=u,p=!0);else{const b=mt(g);a[b]=_a(c,l,b,u,e,!1)}else u!==o[g]&&(o[g]=u,p=!0)}}}else{cr(e,t,a,o)&&(p=!0);let f;for(const d in l)(!t||!Ee(t,d)&&((f=zt(d))===d||!Ee(t,f)))&&(c?n&&(n[d]!==void 0||n[f]!==void 0)&&(a[d]=_a(c,l,d,void 0,e,!0)):delete a[d]);if(o!==l)for(const d in o)(!t||!Ee(t,d))&&(delete o[d],p=!0)}p&&Pt(e.attrs,"set","")}function cr(e,t,n,s){const[a,o]=e.propsOptions;let r=!1,l;if(t)for(let c in t){if(Mn(c))continue;const p=t[c];let f;a&&Ee(a,f=mt(c))?!o||!o.includes(f)?n[f]=p:(l||(l={}))[f]=p:Ms(e.emitsOptions,c)||(!(c in s)||p!==s[c])&&(s[c]=p,r=!0)}if(o){const c=Te(n),p=l||Oe;for(let f=0;f<o.length;f++){const d=o[f];n[d]=_a(a,c,d,p[d],e,!Ee(p,d))}}return r}function _a(e,t,n,s,a,o){const r=e[n];if(r!=null){const l=Ee(r,"default");if(l&&s===void 0){const c=r.default;if(r.type!==Function&&!r.skipFactory&&_e(c)){const{propsDefaults:p}=a;if(n in p)s=p[n];else{const f=Vn(a);s=p[n]=c.call(null,t),f()}}else s=c;a.ce&&a.ce._setProp(n,s)}r[0]&&(o&&!l?s=!1:r[1]&&(s===""||s===zt(n))&&(s=!0))}return s}const ec=new WeakMap;function ur(e,t,n=!1){const s=n?ec:t.propsCache,a=s.get(e);if(a)return a;const o=e.props,r={},l=[];let c=!1;if(!_e(e)){const f=d=>{c=!0;const[g,u]=ur(d,t,!0);qe(r,g),u&&l.push(...u)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!o&&!c)return Re(e)&&s.set(e,un),un;if(ve(o))for(let f=0;f<o.length;f++){const d=mt(o[f]);dr(d)&&(r[d]=Oe)}else if(o)for(const f in o){const d=mt(f);if(dr(d)){const g=o[f],u=r[d]=ve(g)||_e(g)?{type:g}:qe({},g),b=u.type;let h=!1,y=!0;if(ve(b))for(let k=0;k<b.length;++k){const _=b[k],w=_e(_)&&_.name;if(w==="Boolean"){h=!0;break}else w==="String"&&(y=!1)}else h=_e(b)&&b.name==="Boolean";u[0]=h,u[1]=y,(h||Ee(u,"default"))&&l.push(d)}}const p=[r,l];return Re(e)&&s.set(e,p),p}function dr(e){return e[0]!=="$"&&!Mn(e)}const xa=e=>e==="_"||e==="_ctx"||e==="$stable",ka=e=>ve(e)?e.map(Et):[Et(e)],tc=(e,t,n)=>{if(t._n)return t;const s=Fe((...a)=>ka(t(...a)),n);return s._c=!1,s},fr=(e,t,n)=>{const s=e._ctx;for(const a in e){if(xa(a))continue;const o=e[a];if(_e(o))t[a]=tc(a,o,s);else if(o!=null){const r=ka(o);t[a]=()=>r}}},pr=(e,t)=>{const n=ka(t);e.slots.default=()=>n},gr=(e,t,n)=>{for(const s in t)(n||!xa(s))&&(e[s]=t[s])},nc=(e,t,n)=>{const s=e.slots=ir();if(e.vnode.shapeFlag&32){const a=t._;a?(gr(s,t,n),n&&co(s,"_",a,!0)):fr(t,s)}else t&&pr(e,t)},sc=(e,t,n)=>{const{vnode:s,slots:a}=e;let o=!0,r=Oe;if(s.shapeFlag&32){const l=t._;l?n&&l===1?o=!1:gr(a,t,n):(o=!t.$stable,fr(t,a)),r=t}else t&&(pr(e,t),r={default:1});if(o)for(const l in a)!xa(l)&&r[l]==null&&delete a[l]},gt=vc;function ac(e){return oc(e)}function oc(e,t){const n=us();n.__VUE__=!0;const{insert:s,remove:a,patchProp:o,createElement:r,createText:l,createComment:c,setText:p,setElementText:f,parentNode:d,nextSibling:g,setScopeId:u=Ct,insertStaticContent:b}=e,h=(v,$,L,U=null,z=null,W=null,G=void 0,R=null,O=!!$.dynamicChildren)=>{if(v===$)return;v&&!on(v,$)&&(U=Me(v),xe(v,z,W,!0),v=null),$.patchFlag===-2&&(O=!1,$.dynamicChildren=null);const{type:H,ref:ne,shapeFlag:Y}=$;switch(H){case As:y(v,$,L,U);break;case tt:k(v,$,L,U);break;case Sa:v==null&&_($,L,U,G);break;case de:J(v,$,L,U,z,W,G,R,O);break;default:Y&1?F(v,$,L,U,z,W,G,R,O):Y&6?le(v,$,L,U,z,W,G,R,O):(Y&64||Y&128)&&H.process(v,$,L,U,z,W,G,R,O,Ke)}ne!=null&&z?Bn(ne,v&&v.ref,W,$||v,!$):ne==null&&v&&v.ref!=null&&Bn(v.ref,null,W,v,!0)},y=(v,$,L,U)=>{if(v==null)s($.el=l($.children),L,U);else{const z=$.el=v.el;$.children!==v.children&&p(z,$.children)}},k=(v,$,L,U)=>{v==null?s($.el=c($.children||""),L,U):$.el=v.el},_=(v,$,L,U)=>{[v.el,v.anchor]=b(v.children,$,L,U,v.el,v.anchor)},w=({el:v,anchor:$},L,U)=>{let z;for(;v&&v!==$;)z=g(v),s(v,L,U),v=z;s($,L,U)},E=({el:v,anchor:$})=>{let L;for(;v&&v!==$;)L=g(v),a(v),v=L;a($)},F=(v,$,L,U,z,W,G,R,O)=>{$.type==="svg"?G="svg":$.type==="math"&&(G="mathml"),v==null?X($,L,U,z,W,G,R,O):q(v,$,z,W,G,R,O)},X=(v,$,L,U,z,W,G,R)=>{let O,H;const{props:ne,shapeFlag:Y,transition:te,dirs:oe}=v;if(O=v.el=r(v.type,W,ne&&ne.is,ne),Y&8?f(O,v.children):Y&16&&C(v.children,O,null,U,z,Ca(v,W),G,R),oe&&sn(v,null,U,"created"),B(O,v,v.scopeId,G,U),ne){for(const x in ne)x!=="value"&&!Mn(x)&&o(O,x,null,ne[x],W,U);"value"in ne&&o(O,"value",null,ne.value,W),(H=ne.onVnodeBeforeMount)&&Dt(H,U,v)}oe&&sn(v,null,U,"beforeMount");const D=rc(z,te);D&&te.beforeEnter(O),s(O,$,L),((H=ne&&ne.onVnodeMounted)||D||oe)&&gt(()=>{H&&Dt(H,U,v),D&&te.enter(O),oe&&sn(v,null,U,"mounted")},z)},B=(v,$,L,U,z)=>{if(L&&u(v,L),U)for(let W=0;W<U.length;W++)u(v,U[W]);if(z){let W=z.subTree;if($===W||kr(W.type)&&(W.ssContent===$||W.ssFallback===$)){const G=z.vnode;B(v,G,G.scopeId,G.slotScopeIds,z.parent)}}},C=(v,$,L,U,z,W,G,R,O=0)=>{for(let H=O;H<v.length;H++){const ne=v[H]=R?Jt(v[H]):Et(v[H]);h(null,ne,$,L,U,z,W,G,R)}},q=(v,$,L,U,z,W,G)=>{const R=$.el=v.el;let{patchFlag:O,dynamicChildren:H,dirs:ne}=$;O|=v.patchFlag&16;const Y=v.props||Oe,te=$.props||Oe;let oe;if(L&&an(L,!1),(oe=te.onVnodeBeforeUpdate)&&Dt(oe,L,$,v),ne&&sn($,v,L,"beforeUpdate"),L&&an(L,!0),(Y.innerHTML&&te.innerHTML==null||Y.textContent&&te.textContent==null)&&f(R,""),H?K(v.dynamicChildren,H,R,L,U,Ca($,z),W):G||pe(v,$,R,null,L,U,Ca($,z),W,!1),O>0){if(O&16)re(R,Y,te,L,z);else if(O&2&&Y.class!==te.class&&o(R,"class",null,te.class,z),O&4&&o(R,"style",Y.style,te.style,z),O&8){const D=$.dynamicProps;for(let x=0;x<D.length;x++){const N=D[x],ae=Y[N],me=te[N];(me!==ae||N==="value")&&o(R,N,ae,me,z,L)}}O&1&&v.children!==$.children&&f(R,$.children)}else!G&&H==null&&re(R,Y,te,L,z);((oe=te.onVnodeUpdated)||ne)&&gt(()=>{oe&&Dt(oe,L,$,v),ne&&sn($,v,L,"updated")},U)},K=(v,$,L,U,z,W,G)=>{for(let R=0;R<$.length;R++){const O=v[R],H=$[R],ne=O.el&&(O.type===de||!on(O,H)||O.shapeFlag&198)?d(O.el):L;h(O,H,ne,null,U,z,W,G,!0)}},re=(v,$,L,U,z)=>{if($!==L){if($!==Oe)for(const W in $)!Mn(W)&&!(W in L)&&o(v,W,$[W],null,z,U);for(const W in L){if(Mn(W))continue;const G=L[W],R=$[W];G!==R&&W!=="value"&&o(v,W,R,G,z,U)}"value"in L&&o(v,"value",$.value,L.value,z)}},J=(v,$,L,U,z,W,G,R,O)=>{const H=$.el=v?v.el:l(""),ne=$.anchor=v?v.anchor:l("");let{patchFlag:Y,dynamicChildren:te,slotScopeIds:oe}=$;oe&&(R=R?R.concat(oe):oe),v==null?(s(H,L,U),s(ne,L,U),C($.children||[],L,ne,z,W,G,R,O)):Y>0&&Y&64&&te&&v.dynamicChildren?(K(v.dynamicChildren,te,L,z,W,G,R),($.key!=null||z&&$===z.subTree)&&hr(v,$,!0)):pe(v,$,L,ne,z,W,G,R,O)},le=(v,$,L,U,z,W,G,R,O)=>{$.slotScopeIds=R,v==null?$.shapeFlag&512?z.ctx.activate($,L,U,G,O):ye($,L,U,z,W,G,O):Q(v,$,O)},ye=(v,$,L,U,z,W,G)=>{const R=v.component=Cc(v,U,z);if(Cs(v)&&(R.ctx.renderer=Ke),Sc(R,!1,G),R.asyncDep){if(z&&z.registerDep(R,he,G),!v.el){const O=R.subTree=we(tt);k(null,O,$,L),v.placeholder=O.el}}else he(R,v,$,L,z,W,G)},Q=(v,$,L)=>{const U=$.component=v.component;if(hc(v,$,L))if(U.asyncDep&&!U.asyncResolved){ce(U,$,L);return}else U.next=$,U.update();else $.el=v.el,U.vnode=$},he=(v,$,L,U,z,W,G)=>{const R=()=>{if(v.isMounted){let{next:Y,bu:te,u:oe,parent:D,vnode:x}=v;{const Qe=mr(v);if(Qe){Y&&(Y.el=x.el,ce(v,Y,G)),Qe.asyncDep.then(()=>{v.isUnmounted||R()});return}}let N=Y,ae;an(v,!1),Y?(Y.el=x.el,ce(v,Y,G)):Y=x,te&&cs(te),(ae=Y.props&&Y.props.onVnodeBeforeUpdate)&&Dt(ae,D,Y,x),an(v,!0);const me=_r(v),ze=v.subTree;v.subTree=me,h(ze,me,d(ze.el),Me(ze),v,z,W),Y.el=me.el,N===null&&mc(v,me.el),oe&&gt(oe,z),(ae=Y.props&&Y.props.onVnodeUpdated)&&gt(()=>Dt(ae,D,Y,x),z)}else{let Y;const{el:te,props:oe}=$,{bm:D,m:x,parent:N,root:ae,type:me}=v,ze=vn($);an(v,!1),D&&cs(D),!ze&&(Y=oe&&oe.onVnodeBeforeMount)&&Dt(Y,N,$),an(v,!0);{ae.ce&&ae.ce._def.shadowRoot!==!1&&ae.ce._injectChildStyle(me);const Qe=v.subTree=_r(v);h(null,Qe,L,U,v,z,W),$.el=Qe.el}if(x&&gt(x,z),!ze&&(Y=oe&&oe.onVnodeMounted)){const Qe=$;gt(()=>Dt(Y,N,Qe),z)}($.shapeFlag&256||N&&vn(N.vnode)&&N.vnode.shapeFlag&256)&&v.a&&gt(v.a,z),v.isMounted=!0,$=L=U=null}};v.scope.on();const O=v.effect=new ho(R);v.scope.off();const H=v.update=O.run.bind(O),ne=v.job=O.runIfDirty.bind(O);ne.i=v,ne.id=v.uid,O.scheduler=()=>pa(ne),an(v,!0),H()},ce=(v,$,L)=>{$.component=v;const U=v.vnode.props;v.vnode=$,v.next=null,Ql(v,$.props,U,L),sc(v,$.children,L),St(),Ho(v),$t()},pe=(v,$,L,U,z,W,G,R,O=!1)=>{const H=v&&v.children,ne=v?v.shapeFlag:0,Y=$.children,{patchFlag:te,shapeFlag:oe}=$;if(te>0){if(te&128){Ie(H,Y,L,U,z,W,G,R,O);return}else if(te&256){Se(H,Y,L,U,z,W,G,R,O);return}}oe&8?(ne&16&&Ae(H,z,W),Y!==H&&f(L,Y)):ne&16?oe&16?Ie(H,Y,L,U,z,W,G,R,O):Ae(H,z,W,!0):(ne&8&&f(L,""),oe&16&&C(Y,L,U,z,W,G,R,O))},Se=(v,$,L,U,z,W,G,R,O)=>{v=v||un,$=$||un;const H=v.length,ne=$.length,Y=Math.min(H,ne);let te;for(te=0;te<Y;te++){const oe=$[te]=O?Jt($[te]):Et($[te]);h(v[te],oe,L,null,z,W,G,R,O)}H>ne?Ae(v,z,W,!0,!1,Y):C($,L,U,z,W,G,R,O,Y)},Ie=(v,$,L,U,z,W,G,R,O)=>{let H=0;const ne=$.length;let Y=v.length-1,te=ne-1;for(;H<=Y&&H<=te;){const oe=v[H],D=$[H]=O?Jt($[H]):Et($[H]);if(on(oe,D))h(oe,D,L,null,z,W,G,R,O);else break;H++}for(;H<=Y&&H<=te;){const oe=v[Y],D=$[te]=O?Jt($[te]):Et($[te]);if(on(oe,D))h(oe,D,L,null,z,W,G,R,O);else break;Y--,te--}if(H>Y){if(H<=te){const oe=te+1,D=oe<ne?$[oe].el:U;for(;H<=te;)h(null,$[H]=O?Jt($[H]):Et($[H]),L,D,z,W,G,R,O),H++}}else if(H>te)for(;H<=Y;)xe(v[H],z,W,!0),H++;else{const oe=H,D=H,x=new Map;for(H=D;H<=te;H++){const Le=$[H]=O?Jt($[H]):Et($[H]);Le.key!=null&&x.set(Le.key,H)}let N,ae=0;const me=te-D+1;let ze=!1,Qe=0;const kt=new Array(me);for(H=0;H<me;H++)kt[H]=0;for(H=oe;H<=Y;H++){const Le=v[H];if(ae>=me){xe(Le,z,W,!0);continue}let it;if(Le.key!=null)it=x.get(Le.key);else for(N=D;N<=te;N++)if(kt[N-D]===0&&on(Le,$[N])){it=N;break}it===void 0?xe(Le,z,W,!0):(kt[it-D]=H+1,it>=Qe?Qe=it:ze=!0,h(Le,$[it],L,null,z,W,G,R,O),ae++)}const Cn=ze?ic(kt):un;for(N=Cn.length-1,H=me-1;H>=0;H--){const Le=D+H,it=$[Le],Sn=$[Le+1],$n=Le+1<ne?Sn.el||Sn.placeholder:U;kt[H]===0?h(null,it,L,$n,z,W,G,R,O):ze&&(N<0||H!==Cn[N]?ee(it,L,$n,2):N--)}}},ee=(v,$,L,U,z=null)=>{const{el:W,type:G,transition:R,children:O,shapeFlag:H}=v;if(H&6){ee(v.component.subTree,$,L,U);return}if(H&128){v.suspense.move($,L,U);return}if(H&64){G.move(v,$,L,Ke);return}if(G===de){s(W,$,L);for(let Y=0;Y<O.length;Y++)ee(O[Y],$,L,U);s(v.anchor,$,L);return}if(G===Sa){w(v,$,L);return}if(U!==2&&H&1&&R)if(U===0)R.beforeEnter(W),s(W,$,L),gt(()=>R.enter(W),z);else{const{leave:Y,delayLeave:te,afterLeave:oe}=R,D=()=>{v.ctx.isUnmounted?a(W):s(W,$,L)},x=()=>{W._isLeaving&&W[Ft](!0),Y(W,()=>{D(),oe&&oe()})};te?te(W,D,x):x()}else s(W,$,L)},xe=(v,$,L,U=!1,z=!1)=>{const{type:W,props:G,ref:R,children:O,dynamicChildren:H,shapeFlag:ne,patchFlag:Y,dirs:te,cacheIndex:oe}=v;if(Y===-2&&(z=!1),R!=null&&(St(),Bn(R,null,L,v,!0),$t()),oe!=null&&($.renderCache[oe]=void 0),ne&256){$.ctx.deactivate(v);return}const D=ne&1&&te,x=!vn(v);let N;if(x&&(N=G&&G.onVnodeBeforeUnmount)&&Dt(N,$,v),ne&6)Pe(v.component,L,U);else{if(ne&128){v.suspense.unmount(L,U);return}D&&sn(v,null,$,"beforeUnmount"),ne&64?v.type.remove(v,$,L,Ke,U):H&&!H.hasOnce&&(W!==de||Y>0&&Y&64)?Ae(H,$,L,!1,!0):(W===de&&Y&384||!z&&ne&16)&&Ae(O,$,L),U&&be(v)}(x&&(N=G&&G.onVnodeUnmounted)||D)&&gt(()=>{N&&Dt(N,$,v),D&&sn(v,null,$,"unmounted")},L)},be=v=>{const{type:$,el:L,anchor:U,transition:z}=v;if($===de){ge(L,U);return}if($===Sa){E(v);return}const W=()=>{a(L),z&&!z.persisted&&z.afterLeave&&z.afterLeave()};if(v.shapeFlag&1&&z&&!z.persisted){const{leave:G,delayLeave:R}=z,O=()=>G(L,W);R?R(v.el,W,O):O()}else W()},ge=(v,$)=>{let L;for(;v!==$;)L=g(v),a(v),v=L;a($)},Pe=(v,$,L)=>{const{bum:U,scope:z,job:W,subTree:G,um:R,m:O,a:H}=v;vr(O),vr(H),U&&cs(U),z.stop(),W&&(W.flags|=8,xe(G,v,$,L)),R&&gt(R,$),gt(()=>{v.isUnmounted=!0},$)},Ae=(v,$,L,U=!1,z=!1,W=0)=>{for(let G=W;G<v.length;G++)xe(v[G],$,L,U,z)},Me=v=>{if(v.shapeFlag&6)return Me(v.component.subTree);if(v.shapeFlag&128)return v.suspense.next();const $=g(v.anchor||v.el),L=$&&$[Cl];return L?g(L):$};let ue=!1;const Ne=(v,$,L)=>{v==null?$._vnode&&xe($._vnode,null,null,!0):h($._vnode||null,v,$,null,null,null,L),$._vnode=v,ue||(ue=!0,Ho(),Bo(),ue=!1)},Ke={p:h,um:xe,m:ee,r:be,mt:ye,mc:C,pc:pe,pbc:K,n:Me,o:e};return{render:Ne,hydrate:void 0,createApp:Yl(Ne)}}function Ca({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function an({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function rc(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function hr(e,t,n=!1){const s=e.children,a=t.children;if(ve(s)&&ve(a))for(let o=0;o<s.length;o++){const r=s[o];let l=a[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=a[o]=Jt(a[o]),l.el=r.el),!n&&l.patchFlag!==-2&&hr(r,l)),l.type===As&&l.patchFlag!==-1&&(l.el=r.el),l.type===tt&&!l.el&&(l.el=r.el)}}function ic(e){const t=e.slice(),n=[0];let s,a,o,r,l;const c=e.length;for(s=0;s<c;s++){const p=e[s];if(p!==0){if(a=n[n.length-1],e[a]<p){t[s]=a,n.push(s);continue}for(o=0,r=n.length-1;o<r;)l=o+r>>1,e[n[l]]<p?o=l+1:r=l;p<e[n[o]]&&(o>0&&(t[s]=n[o-1]),n[o]=s)}}for(o=n.length,r=n[o-1];o-- >0;)n[o]=r,r=t[r];return n}function mr(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:mr(t)}function vr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const lc=Symbol.for("v-scx"),cc=()=>Ts(lc);function Ue(e,t,n){return br(e,t,n)}function br(e,t,n=Oe){const{immediate:s,deep:a,flush:o,once:r}=n,l=qe({},n),c=t&&s||!t&&o!=="post";let p;if(Kn){if(o==="sync"){const u=cc();p=u.__watcherHandles||(u.__watcherHandles=[])}else if(!c){const u=()=>{};return u.stop=Ct,u.resume=Ct,u.pause=Ct,u}}const f=nt;l.call=(u,b,h)=>_t(u,f,b,h);let d=!1;o==="post"?l.scheduler=u=>{gt(u,f&&f.suspense)}:o!=="sync"&&(d=!0,l.scheduler=(u,b)=>{b?u():pa(u)}),l.augmentJob=u=>{t&&(u.flags|=4),d&&(u.flags|=2,f&&(u.id=f.uid,u.i=f))};const g=ml(e,t,l);return Kn&&(p?p.push(g):c&&g()),g}function uc(e,t,n){const s=this.proxy,a=je(e)?e.includes(".")?yr(s,e):()=>s[e]:e.bind(s,s);let o;_e(t)?o=t:(o=t.handler,n=t);const r=Vn(this),l=br(a,o.bind(s),n);return r(),l}function yr(e,t){const n=t.split(".");return()=>{let s=e;for(let a=0;a<n.length&&s;a++)s=s[n[a]];return s}}const dc=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${mt(t)}Modifiers`]||e[`${zt(t)}Modifiers`];function fc(e,t,...n){if(e.isUnmounted)return;const s=e.vnode.props||Oe;let a=n;const o=t.startsWith("update:"),r=o&&dc(s,t.slice(7));r&&(r.trim&&(a=n.map(f=>je(f)?f.trim():f)),r.number&&(a=n.map(Qs)));let l,c=s[l=Xs(t)]||s[l=Xs(mt(t))];!c&&o&&(c=s[l=Xs(zt(t))]),c&&_t(c,e,6,a);const p=s[l+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,_t(p,e,6,a)}}function wr(e,t,n=!1){const s=t.emitsCache,a=s.get(e);if(a!==void 0)return a;const o=e.emits;let r={},l=!1;if(!_e(e)){const c=p=>{const f=wr(p,t,!0);f&&(l=!0,qe(r,f))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!o&&!l?(Re(e)&&s.set(e,null),null):(ve(o)?o.forEach(c=>r[c]=null):qe(r,o),Re(e)&&s.set(e,r),r)}function Ms(e,t){return!e||!os(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ee(e,t[0].toLowerCase()+t.slice(1))||Ee(e,zt(t))||Ee(e,t))}function my(){}function _r(e){const{type:t,vnode:n,proxy:s,withProxy:a,propsOptions:[o],slots:r,attrs:l,emit:c,render:p,renderCache:f,props:d,data:g,setupState:u,ctx:b,inheritAttrs:h}=e,y=xs(e);let k,_;try{if(n.shapeFlag&4){const E=a||s,F=E;k=Et(p.call(F,E,f,d,u,g,b)),_=l}else{const E=t;k=Et(E.length>1?E(d,{attrs:l,slots:r,emit:c}):E(d,null)),_=t.props?l:pc(l)}}catch(E){jn.length=0,ws(E,e,1),k=we(tt)}let w=k;if(_&&h!==!1){const E=Object.keys(_),{shapeFlag:F}=w;E.length&&F&7&&(o&&E.some(Js)&&(_=gc(_,o)),w=Gt(w,_,!1,!0))}return n.dirs&&(w=Gt(w,null,!1,!0),w.dirs=w.dirs?w.dirs.concat(n.dirs):n.dirs),n.transition&&Hn(w,n.transition),k=w,xs(y),k}const pc=e=>{let t;for(const n in e)(n==="class"||n==="style"||os(n))&&((t||(t={}))[n]=e[n]);return t},gc=(e,t)=>{const n={};for(const s in e)(!Js(s)||!(s.slice(9)in t))&&(n[s]=e[s]);return n};function hc(e,t,n){const{props:s,children:a,component:o}=e,{props:r,children:l,patchFlag:c}=t,p=o.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return s?xr(s,r,p):!!r;if(c&8){const f=t.dynamicProps;for(let d=0;d<f.length;d++){const g=f[d];if(r[g]!==s[g]&&!Ms(p,g))return!0}}}else return(a||l)&&(!l||!l.$stable)?!0:s===r?!1:s?r?xr(s,r,p):!0:!!r;return!1}function xr(e,t,n){const s=Object.keys(t);if(s.length!==Object.keys(e).length)return!0;for(let a=0;a<s.length;a++){const o=s[a];if(t[o]!==e[o]&&!Ms(n,o))return!0}return!1}function mc({vnode:e,parent:t},n){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===e&&(s.el=e.el),s===e)(e=t.vnode).el=n,t=t.parent;else break}}const kr=e=>e.__isSuspense;function vc(e,t){t&&t.pendingBranch?ve(e)?t.effects.push(...e):t.effects.push(e):kl(e)}const de=Symbol.for("v-fgt"),As=Symbol.for("v-txt"),tt=Symbol.for("v-cmt"),Sa=Symbol.for("v-stc"),jn=[];let ht=null;function S(e=!1){jn.push(ht=e?null:[])}function bc(){jn.pop(),ht=jn[jn.length-1]||null}let Un=1;function Cr(e,t=!1){Un+=e,e<0&&ht&&t&&(ht.hasOnce=!0)}function Sr(e){return e.dynamicChildren=Un>0?ht||un:null,bc(),Un>0&&ht&&ht.push(e),e}function A(e,t,n,s,a,o){return Sr(i(e,t,n,s,a,o,!0))}function We(e,t,n,s,a){return Sr(we(e,t,n,s,a,!0))}function zn(e){return e?e.__v_isVNode===!0:!1}function on(e,t){return e.type===t.type&&e.key===t.key}const $r=({key:e})=>e??null,Es=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?je(e)||Ge(e)||_e(e)?{i:Ye,r:e,k:t,f:!!n}:e:null);function i(e,t=null,n=null,s=0,a=null,o=e===de?0:1,r=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&$r(t),ref:t&&Es(t),scopeId:Wo,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:s,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:Ye};return l?($a(c,n),o&128&&e.normalize(c)):n&&(c.shapeFlag|=je(n)?8:16),Un>0&&!r&&ht&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&ht.push(c),c}const we=yc;function yc(e,t=null,n=null,s=0,a=null,o=!1){if((!e||e===Rl)&&(e=tt),zn(e)){const l=Gt(e,t,!0);return n&&$a(l,n),Un>0&&!o&&ht&&(l.shapeFlag&6?ht[ht.indexOf(e)]=l:ht.push(l)),l.patchFlag=-2,l}if(Dc(e)&&(e=e.__vccOpts),t){t=wc(t);let{class:l,style:c}=t;l&&!je(l)&&(t.class=ke(l)),Re(c)&&(da(c)&&!ve(c)&&(c=qe({},c)),t.style=ct(c))}const r=je(e)?1:kr(e)?128:jo(e)?64:Re(e)?4:_e(e)?2:0;return i(e,t,n,s,a,r,o,!0)}function wc(e){return e?da(e)||lr(e)?qe({},e):e:null}function Gt(e,t,n=!1,s=!1){const{props:a,ref:o,patchFlag:r,children:l,transition:c}=e,p=t?_c(a||{},t):a,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:p,key:p&&$r(p),ref:t&&t.ref?n&&o?ve(o)?o.concat(Es(t)):[o,Es(t)]:Es(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==de?r===-1?16:r|16:r,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Gt(e.ssContent),ssFallback:e.ssFallback&&Gt(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&s&&Hn(f,c.clone(f)),f}function Ce(e=" ",t=0){return we(As,null,e,t)}function se(e="",t=!1){return t?(S(),We(tt,null,e)):we(tt,null,e)}function Et(e){return e==null||typeof e=="boolean"?we(tt):ve(e)?we(de,null,e.slice()):zn(e)?Jt(e):we(As,null,String(e))}function Jt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Gt(e)}function $a(e,t){let n=0;const{shapeFlag:s}=e;if(t==null)t=null;else if(ve(t))n=16;else if(typeof t=="object")if(s&65){const a=t.default;a&&(a._c&&(a._d=!1),$a(e,a()),a._c&&(a._d=!0));return}else{n=32;const a=t._;!a&&!lr(t)?t._ctx=Ye:a===3&&Ye&&(Ye.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _e(t)?(t={default:t,_ctx:Ye},n=32):(t=String(t),s&64?(n=16,t=[Ce(t)]):n=8);e.children=t,e.shapeFlag|=n}function _c(...e){const t={};for(let n=0;n<e.length;n++){const s=e[n];for(const a in s)if(a==="class")t.class!==s.class&&(t.class=ke([t.class,s.class]));else if(a==="style")t.style=ct([t.style,s.style]);else if(os(a)){const o=t[a],r=s[a];r&&o!==r&&!(ve(o)&&o.includes(r))&&(t[a]=o?[].concat(o,r):r)}else a!==""&&(t[a]=s[a])}return t}function Dt(e,t,n,s=null){_t(e,t,7,[n,s])}const xc=or();let kc=0;function Cc(e,t,n){const s=e.type,a=(t?t.appContext:e.appContext)||xc,o={uid:kc++,vnode:e,type:s,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Bi(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ur(s,a),emitsOptions:wr(s,a),emit:null,emitted:null,propsDefaults:Oe,inheritAttrs:s.inheritAttrs,ctx:Oe,data:Oe,props:Oe,attrs:Oe,slots:Oe,refs:Oe,setupState:Oe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=fc.bind(null,o),e.ce&&e.ce(o),o}let nt=null;const Tr=()=>nt||Ye;let Ds,Ta;{const e=us(),t=(n,s)=>{let a;return(a=e[n])||(a=e[n]=[]),a.push(s),o=>{a.length>1?a.forEach(r=>r(o)):a[0](o)}};Ds=t("__VUE_INSTANCE_SETTERS__",n=>nt=n),Ta=t("__VUE_SSR_SETTERS__",n=>Kn=n)}const Vn=e=>{const t=nt;return Ds(e),e.scope.on(),()=>{e.scope.off(),Ds(t)}},Mr=()=>{nt&&nt.scope.off(),Ds(null)};function Ar(e){return e.vnode.shapeFlag&4}let Kn=!1;function Sc(e,t=!1,n=!1){t&&Ta(t);const{props:s,children:a}=e.vnode,o=Ar(e);Xl(e,s,o,t),nc(e,a,n||t);const r=o?$c(e,t):void 0;return t&&Ta(!1),r}function $c(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Ul);const{setup:s}=n;if(s){St();const a=e.setupContext=s.length>1?Mc(e):null,o=Vn(e),r=gn(s,e,0,[e.props,a]),l=ro(r);if($t(),o(),(l||e.sp)&&!vn(e)&&Jo(e),l){if(r.then(Mr,Mr),t)return r.then(c=>{Er(e,c)}).catch(c=>{ws(c,e,0)});e.asyncDep=r}else Er(e,r)}else Dr(e)}function Er(e,t,n){_e(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Re(t)&&(e.setupState=Po(t)),Dr(e)}function Dr(e,t,n){const s=e.type;e.render||(e.render=s.render||Ct);{const a=Vn(e);St();try{zl(e)}finally{$t(),a()}}}const Tc={get(e,t){return et(e,"get",""),e[t]}};function Mc(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Tc),slots:e.slots,emit:e.emit,expose:t}}function Ns(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Po(il(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Rn)return Rn[n](e)},has(t,n){return n in t||n in Rn}})):e.proxy}const Ac=/(?:^|[-_])(\w)/g,Ec=e=>e.replace(Ac,t=>t.toUpperCase()).replace(/[-_]/g,"");function Nr(e,t=!0){return _e(e)?e.displayName||e.name:e.name||t&&e.__name}function Ir(e,t,n=!1){let s=Nr(t);if(!s&&t.__file){const a=t.__file.match(/([^/\\]+)\.\w+$/);a&&(s=a[1])}if(!s&&e&&e.parent){const a=o=>{for(const r in o)if(o[r]===t)return r};s=a(e.components||e.parent.type.components)||a(e.appContext.components)}return s?Ec(s):n?"App":"Anonymous"}function Dc(e){return _e(e)&&"__vccOpts"in e}const V=(e,t)=>gl(e,t,Kn);function dt(e,t,n){const s=arguments.length;return s===2?Re(t)&&!ve(t)?zn(t)?we(e,null,[t]):we(e,t):we(e,null,t):(s>3?n=Array.prototype.slice.call(arguments,2):s===3&&zn(n)&&(n=[n]),we(e,t,n))}const Nc="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ma;const Pr=typeof window<"u"&&window.trustedTypes;if(Pr)try{Ma=Pr.createPolicy("vue",{createHTML:e=>e})}catch{}const Lr=Ma?e=>Ma.createHTML(e):e=>e,Ic="http://www.w3.org/2000/svg",Pc="http://www.w3.org/1998/Math/MathML",Bt=typeof document<"u"?document:null,Or=Bt&&Bt.createElement("template"),Lc={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,s)=>{const a=t==="svg"?Bt.createElementNS(Ic,e):t==="mathml"?Bt.createElementNS(Pc,e):n?Bt.createElement(e,{is:n}):Bt.createElement(e);return e==="select"&&s&&s.multiple!=null&&a.setAttribute("multiple",s.multiple),a},createText:e=>Bt.createTextNode(e),createComment:e=>Bt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Bt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,s,a,o){const r=n?n.previousSibling:t.lastChild;if(a&&(a===o||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),n),!(a===o||!(a=a.nextSibling)););else{Or.innerHTML=Lr(s==="svg"?`<svg>${e}</svg>`:s==="mathml"?`<math>${e}</math>`:e);const l=Or.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[r?r.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Yt="transition",qn="animation",Gn=Symbol("_vtc"),Fr={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Oc=qe({},Uo,Fr),Fc=(e=>(e.displayName="Transition",e.props=Oc,e))((e,{slots:t})=>dt(Tl,Hc(e),t)),rn=(e,t=[])=>{ve(e)?e.forEach(n=>n(...t)):e&&e(...t)},Hr=e=>e?ve(e)?e.some(t=>t.length>1):e.length>1:!1;function Hc(e){const t={};for(const J in e)J in Fr||(t[J]=e[J]);if(e.css===!1)return t;const{name:n="v",type:s,duration:a,enterFromClass:o=`${n}-enter-from`,enterActiveClass:r=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=o,appearActiveClass:p=r,appearToClass:f=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:g=`${n}-leave-active`,leaveToClass:u=`${n}-leave-to`}=e,b=Bc(a),h=b&&b[0],y=b&&b[1],{onBeforeEnter:k,onEnter:_,onEnterCancelled:w,onLeave:E,onLeaveCancelled:F,onBeforeAppear:X=k,onAppear:B=_,onAppearCancelled:C=w}=t,q=(J,le,ye,Q)=>{J._enterCancelled=Q,ln(J,le?f:l),ln(J,le?p:r),ye&&ye()},K=(J,le)=>{J._isLeaving=!1,ln(J,d),ln(J,u),ln(J,g),le&&le()},re=J=>(le,ye)=>{const Q=J?B:_,he=()=>q(le,J,ye);rn(Q,[le,he]),Br(()=>{ln(le,J?c:o),Rt(le,J?f:l),Hr(Q)||Rr(le,s,h,he)})};return qe(t,{onBeforeEnter(J){rn(k,[J]),Rt(J,o),Rt(J,r)},onBeforeAppear(J){rn(X,[J]),Rt(J,c),Rt(J,p)},onEnter:re(!1),onAppear:re(!0),onLeave(J,le){J._isLeaving=!0;const ye=()=>K(J,le);Rt(J,d),J._enterCancelled?(Rt(J,g),Ur()):(Ur(),Rt(J,g)),Br(()=>{J._isLeaving&&(ln(J,d),Rt(J,u),Hr(E)||Rr(J,s,y,ye))}),rn(E,[J,ye])},onEnterCancelled(J){q(J,!1,void 0,!0),rn(w,[J])},onAppearCancelled(J){q(J,!0,void 0,!0),rn(C,[J])},onLeaveCancelled(J){K(J),rn(F,[J])}})}function Bc(e){if(e==null)return null;if(Re(e))return[Aa(e.enter),Aa(e.leave)];{const t=Aa(e);return[t,t]}}function Aa(e){return Ii(e)}function Rt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Gn]||(e[Gn]=new Set)).add(t)}function ln(e,t){t.split(/\s+/).forEach(s=>s&&e.classList.remove(s));const n=e[Gn];n&&(n.delete(t),n.size||(e[Gn]=void 0))}function Br(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Rc=0;function Rr(e,t,n,s){const a=e._endId=++Rc,o=()=>{a===e._endId&&s()};if(n!=null)return setTimeout(o,n);const{type:r,timeout:l,propCount:c}=Wc(e,t);if(!r)return s();const p=r+"end";let f=0;const d=()=>{e.removeEventListener(p,g),o()},g=u=>{u.target===e&&++f>=c&&d()};setTimeout(()=>{f<c&&d()},l+1),e.addEventListener(p,g)}function Wc(e,t){const n=window.getComputedStyle(e),s=b=>(n[b]||"").split(", "),a=s(`${Yt}Delay`),o=s(`${Yt}Duration`),r=Wr(a,o),l=s(`${qn}Delay`),c=s(`${qn}Duration`),p=Wr(l,c);let f=null,d=0,g=0;t===Yt?r>0&&(f=Yt,d=r,g=o.length):t===qn?p>0&&(f=qn,d=p,g=c.length):(d=Math.max(r,p),f=d>0?r>p?Yt:qn:null,g=f?f===Yt?o.length:c.length:0);const u=f===Yt&&/\b(transform|all)(,|$)/.test(s(`${Yt}Property`).toString());return{type:f,timeout:d,propCount:g,hasTransform:u}}function Wr(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,s)=>jr(n)+jr(e[s])))}function jr(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ur(){return document.body.offsetHeight}function jc(e,t,n){const s=e[Gn];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Is=Symbol("_vod"),zr=Symbol("_vsh"),Ps={name:"show",beforeMount(e,{value:t},{transition:n}){e[Is]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Jn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:s}){!t!=!n&&(s?t?(s.beforeEnter(e),Jn(e,!0),s.enter(e)):s.leave(e,()=>{Jn(e,!1)}):Jn(e,t))},beforeUnmount(e,{value:t}){Jn(e,t)}};function Jn(e,t){e.style.display=t?e[Is]:"none",e[zr]=!t}const Uc=Symbol(""),zc=/(^|;)\s*display\s*:/;function Vc(e,t,n){const s=e.style,a=je(n);let o=!1;if(n&&!a){if(t)if(je(t))for(const r of t.split(";")){const l=r.slice(0,r.indexOf(":")).trim();n[l]==null&&Ls(s,l,"")}else for(const r in t)n[r]==null&&Ls(s,r,"");for(const r in n)r==="display"&&(o=!0),Ls(s,r,n[r])}else if(a){if(t!==n){const r=s[Uc];r&&(n+=";"+r),s.cssText=n,o=zc.test(n)}}else t&&e.removeAttribute("style");Is in e&&(e[Is]=o?s.display:"",e[zr]&&(s.display="none"))}const Vr=/\s*!important$/;function Ls(e,t,n){if(ve(n))n.forEach(s=>Ls(e,t,s));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const s=Kc(e,t);Vr.test(n)?e.setProperty(zt(s),n.replace(Vr,""),"important"):e[s]=n}}const Kr=["Webkit","Moz","ms"],Ea={};function Kc(e,t){const n=Ea[t];if(n)return n;let s=mt(t);if(s!=="filter"&&s in e)return Ea[t]=s;s=ls(s);for(let a=0;a<Kr.length;a++){const o=Kr[a]+s;if(o in e)return Ea[t]=o}return t}const qr="http://www.w3.org/1999/xlink";function Gr(e,t,n,s,a,o=Hi(t)){s&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(qr,t.slice(6,t.length)):e.setAttributeNS(qr,t,n):n==null||o&&!fo(n)?e.removeAttribute(t):e.setAttribute(t,o?"":It(n)?String(n):n)}function Jr(e,t,n,s,a){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Lr(n):n);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const l=o==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let r=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=fo(n):n==null&&l==="string"?(n="",r=!0):l==="number"&&(n=0,r=!0)}try{e[t]=n}catch{}r&&e.removeAttribute(a||t)}function wn(e,t,n,s){e.addEventListener(t,n,s)}function qc(e,t,n,s){e.removeEventListener(t,n,s)}const Yr=Symbol("_vei");function Gc(e,t,n,s,a=null){const o=e[Yr]||(e[Yr]={}),r=o[t];if(s&&r)r.value=s;else{const[l,c]=Jc(t);if(s){const p=o[t]=Xc(s,a);wn(e,l,p,c)}else r&&(qc(e,l,r,c),o[t]=void 0)}}const Zr=/(?:Once|Passive|Capture)$/;function Jc(e){let t;if(Zr.test(e)){t={};let s;for(;s=e.match(Zr);)e=e.slice(0,e.length-s[0].length),t[s[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):zt(e.slice(2)),t]}let Da=0;const Yc=Promise.resolve(),Zc=()=>Da||(Yc.then(()=>Da=0),Da=Date.now());function Xc(e,t){const n=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=n.attached)return;_t(Qc(s,n.value),t,5,[s])};return n.value=e,n.attached=Zc(),n}function Qc(e,t){if(ve(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(s=>a=>!a._stopped&&s&&s(a))}else return t}const Xr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,eu=(e,t,n,s,a,o)=>{const r=a==="svg";t==="class"?jc(e,s,r):t==="style"?Vc(e,n,s):os(t)?Js(t)||Gc(e,t,n,s,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):tu(e,t,s,r))?(Jr(e,t,s),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Gr(e,t,s,r,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!je(s))?Jr(e,mt(t),s,o,t):(t==="true-value"?e._trueValue=s:t==="false-value"&&(e._falseValue=s),Gr(e,t,s,r))};function tu(e,t,n,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in e&&Xr(t)&&_e(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return Xr(t)&&je(n)?!1:t in e}const Qr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ve(t)?n=>cs(t,n):t};function nu(e){e.target.composing=!0}function ei(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Na=Symbol("_assign"),su={created(e,{modifiers:{lazy:t,trim:n,number:s}},a){e[Na]=Qr(a);const o=s||a.props&&a.props.type==="number";wn(e,t?"change":"input",r=>{if(r.target.composing)return;let l=e.value;n&&(l=l.trim()),o&&(l=Qs(l)),e[Na](l)}),n&&wn(e,"change",()=>{e.value=e.value.trim()}),t||(wn(e,"compositionstart",nu),wn(e,"compositionend",ei),wn(e,"change",ei))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:s,trim:a,number:o}},r){if(e[Na]=Qr(r),e.composing)return;const l=(o||e.type==="number")&&!/^0\d/.test(e.value)?Qs(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(s&&t===n||a&&e.value.trim()===c)||(e.value=c))}},au=["ctrl","shift","alt","meta"],ou={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>au.some(n=>e[`${n}Key`]&&!t.includes(n))},Wt=(e,t)=>{const n=e._withMods||(e._withMods={}),s=t.join(".");return n[s]||(n[s]=(a,...o)=>{for(let r=0;r<t.length;r++){const l=ou[t[r]];if(l&&l(a,t))return}return e(a,...o)})},ru={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Ia=(e,t)=>{const n=e._withKeys||(e._withKeys={}),s=t.join(".");return n[s]||(n[s]=a=>{if(!("key"in a))return;const o=zt(a.key);if(t.some(r=>r===o||ru[r]===o))return e(a)})},iu=qe({patchProp:eu},Lc);let ti;function lu(){return ti||(ti=ac(iu))}const cu=(...e)=>{const t=lu().createApp(...e),{mount:n}=t;return t.mount=s=>{const a=du(s);if(!a)return;const o=t._component;!_e(o)&&!o.render&&!o.template&&(o.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const r=n(a,!1,uu(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),r},t};function uu(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function du(e){return je(e)?document.querySelector(e):e}const fu=He({name:"NcAppContent",props:{appName:{type:String,default:""},showNavigation:{type:Boolean,default:!0}},setup(e,{slots:t,attrs:n}){return()=>{const s=e.showNavigation!==!1,a={...n,class:[n.class,"app-content",s?null:"app-content--navigation-hidden"]},o={class:"app-content__navigation","aria-label":e.appName||"App navigation","aria-hidden":s?"false":"true"};return dt("div",a,[dt("aside",o,t.navigation?t.navigation():[]),dt("section",{class:"app-content__main",role:"main"},t.default?t.default():[])])}}}),pu=He({name:"NcAppNavigation",setup(e,{slots:t,attrs:n}){return()=>{const s={...n,class:[n.class,"app-navigation"]};"role"in s||(s.role="navigation");const a=[];return t.actions&&a.push(dt("div",{class:"app-navigation__actions"},t.actions())),t.default&&a.push(...t.default()),dt("nav",s,a)}}}),Ze=He({name:"NcButton",props:{type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t,slots:n,attrs:s}){return()=>{const a={...s,class:[s.class,"btn",e.type],disabled:e.disabled,onClick:()=>t("click")};return"type"in a||(a.type="button"),dt("button",a,n.default?n.default():[])}}}),Os=He({name:"NcEmptyContent",props:{name:{type:String,default:""},description:{type:String,default:""}},setup(e,{attrs:t}){return()=>dt("div",{...t,class:[t.class,"card empty"]},[dt("div",{class:"value"},e.name),dt("div",{class:"hint"},e.description)])}}),Fs=He({name:"NcCheckboxRadioSwitch",props:{type:{type:String,default:"checkbox"},name:{type:String,default:""},checked:{type:Boolean,default:!1}},emits:["update:checked"],setup(e,{emit:t,slots:n,attrs:s}){const a=r=>{var l;return t("update:checked",!!((l=r==null?void 0:r.target)!=null&&l.checked))},o={...s,class:[s.class,"nc-checkbox-radio-switch"]};return()=>dt("label",o,[dt("input",{type:e.type,name:e.name,checked:e.checked,onInput:a}),dt("span",{},n.default?n.default():[])])}}),gu=He({name:"NcLoadingIcon",props:{size:{type:[String,Number],default:16}},setup(e,{attrs:t}){return()=>dt("span",{...t,class:[t.class,"nc-loading-icon"],style:`width:${e.size}px;height:${e.size}px;border:2px solid var(--line);border-top-color:var(--brand);border-radius:50%;display:inline-block;animation:spin 1s linear infinite`})}});function Pa(e){if(!e)return null;const t=window.devicePixelRatio||1,n=e.getBoundingClientRect();if(n.width<2||n.height<2)return null;const s=Math.floor(n.width*t),a=Math.floor(n.height*t);e.width!==s&&(e.width=s),e.height!==a&&(e.height=a);const o=e.getContext("2d");return o?(o.setTransform(t,0,0,t,0,0),o):null}function ni(e){const t=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(e||"");return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function hu(e){const n=Math.pow((p=>p<0?0:p>1?1:p)(e),.6),s=ni("#e0f2fe"),a=ni("#7c3aed");if(!s||!a)return"#7c3aed";const o=(p,f,d)=>Math.round(p+(f-p)*d),r=o(s.r,a.r,n),l=o(s.g,a.g,n),c=o(s.b,a.b,n);return`rgb(${r}, ${l}, ${c})`}const si=He({__name:"PieChart",props:{data:{},colorsById:{},colorsByName:{}},setup(e){const t=e,n=ie(null);function s(){const a=t.data,o=n.value;if(!o||!a)return;const r=Pa(o);if(!r)return;const l=o.clientWidth,c=o.clientHeight,p=l/2,f=c/2,d=Math.min(l,c)*.35,g=a.data||[],u=a.labels||[],b=a.ids||[],h=a.colors||[],y=[];for(let C=0;C<g.length;C++)(Number(g[C])||0)>0&&y.push(C);if(r.clearRect(0,0,l,c),y.length===0)return;const k=y.map(C=>Number(g[C])||0),_=y.map(C=>String(u[C]||"")),w=y.map(C=>String(b[C]||"")),E=y.map(C=>h[C]),F=k.reduce((C,q)=>C+Math.max(0,q),0)||1;let X=-Math.PI/2;r.lineWidth=1,r.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--line").trim()||"#e5e7eb";const B=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"];k.forEach((C,q)=>{var be,ge;const K=Math.max(0,C)/F,re=X+K*2*Math.PI,J=String((_==null?void 0:_[q])||""),le=String((w==null?void 0:w[q])||""),ye=E[q],Q=(be=t.colorsById)==null?void 0:be[le],he=(ge=t.colorsByName)==null?void 0:ge[J];let ce=Q||he||ye||B[q%B.length];r.beginPath(),r.moveTo(p,f),r.arc(p,f,d,X,re),r.closePath(),r.fillStyle=ce,r.fill(),r.stroke();const pe=(X+re)/2,Se=p+Math.cos(pe)*(d+12),Ie=f+Math.sin(pe)*(d+12);r.save(),r.font="12px ui-sans-serif,system-ui",r.fillStyle="#ffffff",r.strokeStyle="rgba(0,0,0,0.55)",r.lineWidth=3,r.textAlign="center",r.textBaseline="middle";const ee=Math.max(0,Number(C)||0)/F*100,xe=`${_!=null&&_[q]?_[q]+" ":""}${Number(C).toFixed(2)}h  ${ee.toFixed(1)}%`;r.strokeText(xe,Se,Ie),r.fillText(xe,Se,Ie),r.restore(),X=re})}return At(()=>{s(),window.addEventListener("resize",s)}),Ue(()=>t.data,()=>s(),{deep:!0}),Ue(()=>t.colorsById,()=>s(),{deep:!0}),(a,o)=>(S(),A("canvas",{ref_key:"cv",ref:n,class:"chart"},null,512))}}),ai=He({__name:"StackedBars",props:{stacked:{},legacy:{},colorsById:{}},setup(e){const t=e,n=ie(null);function s(h,y,k,_,w){h.save(),w!=null&&w.font&&(h.font=w.font),w!=null&&w.align&&(h.textAlign=w.align),w!=null&&w.baseline&&(h.textBaseline=w.baseline),h.lineWidth=3,h.strokeStyle="rgba(0,0,0,0.55)",h.strokeText(y,k,_),h.fillStyle="#ffffff",h.fillText(y,k,_),h.restore()}function a(h){const y=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(h||"");return y?{r:parseInt(y[1],16),g:parseInt(y[2],16),b:parseInt(y[3],16)}:null}function o(h,y){const k=a(h);return k&&(.2126*k.r+.7152*k.g+.0722*k.b)/255<.55?"#ffffff":y}function r(h){const y=Math.max(0,Number(h)||0);return(Math.round(y*10)/10).toFixed(1)}function l(h,y=.5){const k=a(h);if(!k)return h;const _=Math.max(0,Math.min(1,y)),w=Math.round(k.r+(255-k.r)*_),E=Math.round(k.g+(255-k.g)*_),F=Math.round(k.b+(255-k.b)*_);return`rgb(${w},${E},${F})`}function c(h,y=.5){const k=a(h);if(!k)return h;const _=Math.max(0,Math.min(1,y)),w=Math.round(k.r*(1-_)),E=Math.round(k.g*(1-_)),F=Math.round(k.b*(1-_));return`rgb(${w},${E},${F})`}function p(h,y){const{x:k,y:_,width:w,height:E,baseColor:F,variant:X}=y,B=X==="mixed",C=Math.min(w*(B?.35:.22),6),q=Math.max(2,B?w*.45:w-C*2),K=B?k+w-q-C:k+(w-q)/2,re=l(F,B?.6:.45),J=c(F,B?.4:.35);h.save(),h.fillStyle=re,h.globalAlpha=B?.12:.16,h.fillRect(K,_,q,E),h.restore(),h.save(),h.strokeStyle=J,h.lineWidth=B?1.25:1.5,h.globalAlpha=B?.6:.75,h.setLineDash([4,4]),h.strokeRect(K,_,q,E),h.restore(),h.save(),h.strokeStyle=J,h.globalAlpha=B?.35:.45,h.lineWidth=1,h.beginPath(),h.moveTo(K,_),h.lineTo(K+q,_),h.stroke(),h.restore()}function f(){var ee,xe;const h=n.value;if(!h)return;const y=Pa(h);if(!y)return;const k=h.clientWidth,_=h.clientHeight,w=28,E=w*1.4,F=_-w,X=k-w,B=getComputedStyle(document.documentElement).getPropertyValue("--line").trim()||"#e5e7eb",C=getComputedStyle(document.documentElement).getPropertyValue("--fg").trim()||"#0f172a";y.clearRect(0,0,k,_),y.strokeStyle=B,y.lineWidth=1,y.beginPath(),y.moveTo(E,F),y.lineTo(X,F),y.moveTo(E,F),y.lineTo(E,w),y.stroke();const q=t.stacked;if(q&&q.labels&&q.series){let be=q.labels||[],ge=q.series||[];const Pe=g(be,ge);be=Pe.labels,ge=Pe.series;const Ae=be.map((W,G)=>ge.reduce((R,O)=>{var H;return R+Math.max(0,Number(((H=O.data)==null?void 0:H[G])||0))},0)),Me=be.map((W,G)=>ge.reduce((R,O)=>{var H;return R+Math.max(0,Number(((H=O.forecast)==null?void 0:H[G])||0))},0)),ue=Ae.map((W,G)=>W+Me[G]),Ne=Math.max(1,...ue),Ke=be.length||1,Xe=8,v=Math.max(6,(X-E-Xe*(Ke+1))/Ke),$=(F-w)/Ne;let L=0,U=0;be.forEach((W,G)=>{const R=E+Xe+G*(v+Xe);let O=F,H=0;ge.forEach(x=>{var ze;const N=Math.max(0,Number(((ze=x.data)==null?void 0:ze[G])||0)),ae=N*$;O-=ae;const me=t.colorsById[x.id]||x.color||"#93c5fd";if(ae>.5&&(y.fillStyle=me,y.fillRect(R,O,v,ae),ae>14&&v>22&&N>.01)){const Qe=r(N);y.fillStyle=o(me,C),y.font="11px ui-sans-serif,system-ui";const kt=y.measureText(Qe).width;y.fillText(Qe,R+v/2-kt/2,O+ae/2+4)}H+=N});let Y=O,te=0;ge.forEach(x=>{var ze;const N=Math.max(0,Number(((ze=x.forecast)==null?void 0:ze[G])||0));if(N<=0)return;const ae=N*$;if(Y-=ae,te+=N,ae<=.5)return;const me=t.colorsById[x.id]||x.color||"#93c5fd";p(y,{x:R,y:Y,width:v,height:ae,baseColor:me,variant:H>.01?"mixed":"future"})}),L+=H,U+=te,y.fillStyle=C,y.font="12px ui-sans-serif,system-ui";const oe=d(String(be[G]||""));if(v>26){const x=y.measureText(oe).width;y.fillText(oe,R+v/2-x/2,F+14)}const D=te>.01?`~${r(H+te)}h`:H>.01?`${r(H)}h`:"";D&&s(y,D,R+v/2,Math.max(w+4,Y-2),{align:"center",baseline:"bottom",font:"11px ui-sans-serif,system-ui"})});const z=U>.01?`~${r(L+U)}h expected`:`${r(L)}h total`;s(y,z,X-4,w+4,{align:"right",baseline:"top",font:"12px ui-sans-serif,system-ui"});return}const K=t.legacy;if(!K)return;let re=K.data||[],J=K.labels||[];const le=g(J,[{id:"__legacy__",data:re}]);J=le.labels,re=((xe=(ee=le.series)==null?void 0:ee[0])==null?void 0:xe.data)||re;const ye=Math.max(1,...re.map(be=>Math.max(0,be))),Q=re.length||1,he=8,ce=Math.max(6,(X-E-he*(Q+1))/Q),pe=(F-w)/ye;y.fillStyle="#93c5fd",re.forEach((be,ge)=>{const Pe=Math.max(0,be*pe),Ae=E+he+ge*(ce+he),Me=F-Pe;if(y.fillRect(Ae,Me,ce,Pe),Pe>14&&ce>22&&be>.01){const Ne=String((Math.round(be*100)/100).toFixed(1));y.fillStyle=o("#93c5fd",C),y.font="11px ui-sans-serif,system-ui";const Ke=y.measureText(Ne).width;y.fillText(Ne,Ae+ce/2-Ke/2,Me+Pe/2+4)}y.fillStyle=C,y.font="12px ui-sans-serif,system-ui";const ue=d(String(J[ge]||""));if(ce>26){const Ne=y.measureText(ue).width;y.fillText(ue,Ae+ce/2-Ne/2,F+14)}if(be>.01){const Ne=`${(Math.round(be*100)/100).toFixed(1)}h`;s(y,Ne,Ae+ce/2,Math.max(w+4,Me-2),{align:"center",baseline:"bottom",font:"11px ui-sans-serif,system-ui"})}});const Se=re.reduce((be,ge)=>be+Math.max(0,Number(ge)||0),0),Ie=`${(Math.round(Se*100)/100).toFixed(1)}h total`;s(y,Ie,X-4,w+4,{align:"right",baseline:"top",font:"12px ui-sans-serif,system-ui"})}At(()=>{f(),window.addEventListener("resize",f)}),Ue(()=>t.stacked,()=>f(),{deep:!0}),Ue(()=>t.legacy,()=>f(),{deep:!0}),Ue(()=>t.colorsById,()=>f(),{deep:!0});function d(h){const y=/^(\d{4})-(\d{2})-(\d{2})$/.exec(h);if(!y)return h;const k=new Date(`${y[1]}-${y[2]}-${y[3]}T00:00:00`);return["So","Mo","Di","Mi","Do","Fr","Sa"][k.getDay()]||h}function g(h,y){if(!Array.isArray(h)||h.length!==7)return{labels:h,series:y};const k=h.map(C=>u(C));if(k.some(C=>!C))return{labels:h,series:y};const _=k.map(C=>b(C)),w=[1,2,3,4,5,6,7];if(_.join(",")===w.join(","))return{labels:h,series:y};const E={};if(_.forEach((C,q)=>{E[C]=q}),!w.every(C=>C in E))return{labels:h,series:y};const F=w.map(C=>E[C]),X=F.map(C=>h[C]),B=(y||[]).map(C=>{const q=Array.isArray(C.data)?C.data:[],K=Array.isArray(C.forecast)?C.forecast:null,re=F.map(ye=>q[ye]??0),J=K?F.map(ye=>K[ye]??0):void 0,le={...C,data:re};return J&&(le.forecast=J),le});return{labels:X,series:B}}function u(h){const y=/^(\d{4})-(\d{2})-(\d{2})$/.exec(h);if(!y)return null;const k=new Date(`${y[1]}-${y[2]}-${y[3]}T00:00:00`);return isNaN(k.getTime())?null:k}function b(h){const y=h.getDay();return y===0?7:y}return(h,y)=>(S(),A("canvas",{ref_key:"cv",ref:n,class:"chart"},null,512))}}),mu=He({__name:"HeatmapCanvas",props:{hod:{}},setup(e){const t=e,n=ie(null);let s=null;function a(){var F;const o=n.value,r=t.hod;if(!o)return;if(!r){console.info("[opsdash] heatmap: no data provided");return}const l=Pa(o);if(!l)return;const c=o.clientWidth,p=o.clientHeight,f=r.dows||[],d=r.hours||[],g=r.matrix||[];l.clearRect(0,0,c,p);const u=36,b=u,h=u,y=c-u,k=p-u,_=(y-b)/Math.max(1,d.length),w=(k-h)/Math.max(1,f.length),E=Math.max(0,...g.flat())||1;f.length&&d.length&&console.info("[opsdash] heatmap draw",{rows:f.length,cols:d.length,vmax:E});for(let X=0;X<f.length;X++)for(let B=0;B<d.length;B++){const q=(((F=g[X])==null?void 0:F[B])||0)/E,K=b+B*_,re=h+X*w;l.fillStyle=hu(q),l.fillRect(K,re,_-1,w-1)}l.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--fg").trim()||"#0f172a",l.font="12px ui-sans-serif,system-ui",f.forEach((X,B)=>l.fillText(X,8,h+B*w+12)),d.forEach((X,B)=>{B%2===0&&l.fillText(String(X),b+B*_+2,h-6)})}return At(async()=>{await nn(),a();try{s=new ResizeObserver(()=>a()),n.value&&s.observe(n.value)}catch{}window.addEventListener("resize",a)}),bn(()=>{try{window.removeEventListener("resize",a)}catch{}try{s&&n.value&&s.unobserve(n.value)}catch{}s=null}),Ue(()=>t.hod,()=>a(),{deep:!0}),(o,r)=>(S(),A("canvas",{ref_key:"cv",ref:n,class:"chart"},null,512))}}),vu={class:"group-row"},bu={colspan:"5"},yu={class:"group-header"},wu={class:"group-label"},_u={class:"name"},xu={key:0,class:"group-meta"},ku={class:"summary"},Cu={key:0,class:"summary-percent"},Su={key:1,class:"group-meta"},$u={class:"summary"},Tu={key:0},Mu=["title"],Au={class:"row-name"},Eu={key:0,class:"progress"},Du={class:"num"},Nu={class:"num"},Iu={class:"num"},Pu={class:"num"},Lu={key:0,class:"hint"},Ou={key:0,class:"empty-row"},Fu=He({__name:"ByCalendarTable",props:{rows:{},n2:{type:Function},targets:{},groups:{}},setup(e){const t=e,n=V(()=>Array.isArray(t.groups)&&t.groups.length?t.groups.map(_=>({id:_.id,label:_.label,summary:_.summary??null,color:_.color,rows:(_.rows||[]).map(s)})):[{id:"__all__",label:"Calendars",summary:null,color:void 0,rows:(t.rows||[]).map(s)}]);function s(_){const w=a(_);return{..._,calendarId:w}}function a(_){return _?_.calendarId?String(_.calendarId):_.id?String(_.id):_.calendar_id?String(_.calendar_id):_.calendar?String(_.calendar):"":""}function o(_){return String(_.calendar||_.displayname||_.name||_.calendarId||"")}function r(_){return a(_)||o(_)}function l(_){const w=b(_);if(!w)return!1;const E=t.targets||{},F=Number(E[w]);return isFinite(F)&&F>0}function c(_){const w=b(_);if(!w)return 0;const E=t.targets||{},F=Number(E[w]);return isFinite(F)?F:0}function p(_){const w=c(_);return w>0?(Math.round(w*100)/100).toFixed(2):""}function f(_,w){return _-w>=0?"delta pos":"delta neg"}function d(_,w){const E=_-w,F=Math.abs(Math.round(E*100)/100).toFixed(2);return(E>=0?"+":"-")+F+"h"}function g(_,w){return Math.max(0,Math.min(100,w>0?_/w*100:0)).toFixed(0)+"%"}function u(_,w){return Math.max(0,Math.min(100,w>0?_/w*100:0))}function b(_){return _==null?"":String(_)}function h(_){const w=_.summary;if(!w)return`${_.rows.length} calendar${_.rows.length===1?"":"s"}`;const E=t.n2(w.actualHours);return w.targetHours>0?`${E} h / ${t.n2(w.targetHours)} h`:`${E} h`}function y(_){const w=_.summary;return!w||w.targetHours<=0?"":`${Math.round(w.percent)}%`}function k(_){switch(_){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}return(_,w)=>(S(),A("table",null,[w[1]||(w[1]=i("colgroup",null,[i("col",{class:"col-w-42"}),i("col",{class:"col-w-12"}),i("col",{class:"col-w-14"}),i("col",{class:"col-w-14"}),i("col",{class:"col-w-18"})],-1)),w[2]||(w[2]=i("thead",null,[i("tr",null,[i("th",{class:"nowrap"},"Calendar"),i("th",{class:"num"},"Events"),i("th",{class:"num"},"Hours"),i("th",{class:"num"},"Target"),i("th",{class:"num"}," / %")])],-1)),i("tbody",null,[(S(!0),A(de,null,De(n.value,E=>(S(),A(de,{key:E.id},[i("tr",vu,[i("td",bu,[i("div",yu,[i("div",wu,[i("span",{class:"dot",style:ct({background:E.color||"var(--brand)"})},null,4),i("span",_u,P(E.label),1)]),E.summary?(S(),A("div",xu,[i("span",ku,P(h(E)),1),y(E)?(S(),A("span",Cu,P(y(E)),1)):se("",!0),E.summary.statusLabel?(S(),A("span",{key:1,class:ke(["badge",k(E.summary.status)])},P(E.summary.statusLabel),3)):se("",!0)])):(S(),A("div",Su,[i("span",$u,[Ce(P(E.rows.length)+" calendar",1),E.rows.length!==1?(S(),A("span",Tu,"s")):se("",!0)])]))])])]),(S(!0),A(de,null,De(E.rows,F=>(S(),A("tr",{key:r(F)},[i("td",null,[i("div",{class:"cell",title:o(F)},[i("div",Au,P(o(F)),1),l(a(F))&&c(a(F))>0?(S(),A("div",Eu,[i("div",{class:"progress-bar",style:ct({width:u(F.total_hours,c(a(F)))+"%",background:E.color||void 0})},null,4)])):se("",!0)],8,Mu)]),i("td",Du,P(F.events_count),1),i("td",Nu,P(_.n2(F.total_hours)),1),i("td",Iu,P(p(a(F))),1),i("td",Pu,[l(a(F))?(S(),A(de,{key:0},[i("span",{class:ke(f(F.total_hours,c(a(F))))},P(d(F.total_hours,c(a(F)))),3),c(a(F))>0?(S(),A("span",Lu," ("+P(g(F.total_hours,c(a(F))))+")",1)):se("",!0)],64)):(S(),A(de,{key:1},[Ce("")],64))])]))),128)),E.rows.length?se("",!0):(S(),A("tr",Ou,[...w[0]||(w[0]=[i("td",{colspan:"5",class:"empty"},"No calendars assigned",-1)])]))],64))),128))])]))}}),xt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,a]of t)n[s]=a;return n},Hu=xt(Fu,[["__scopeId","data-v-69f095b4"]]),Bu={class:"mono nowrap"},Ru=["href"],Wu={class:"hint"},ju={class:"num"},Uu={class:"num"},zu=He({__name:"ByDayTable",props:{rows:{},n2:{type:Function},link:{type:Function}},setup(e){function t(n){const s=/^(\d{4})-(\d{2})-(\d{2})$/.exec(String(n)||"");if(!s)return"";const a=new Date(`${s[1]}-${s[2]}-${s[3]}T00:00:00Z`);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a.getUTCDay()]||""}return(n,s)=>(S(),A("table",null,[s[0]||(s[0]=i("colgroup",null,[i("col",{class:"col-w-40"}),i("col",{class:"col-w-30"}),i("col",{class:"col-w-30"})],-1)),s[1]||(s[1]=i("thead",null,[i("tr",null,[i("th",{class:"nowrap"},"Date"),i("th",{class:"num"},"Events"),i("th",{class:"num"},"Hours")])],-1)),i("tbody",null,[(S(!0),A(de,null,De(n.rows,a=>(S(),A("tr",{key:a.date},[i("td",Bu,[i("a",{href:n.link(a.date),target:"_blank"},P(a.date),9,Ru),i("span",Wu," ("+P(t(a.date))+")",1)]),i("td",ju,P(a.events_count),1),i("td",Uu,P(n.n2(a.total_hours)),1)]))),128))])]))}}),Vu=["onClick"],Ku=["title"],qu={class:"num"},Gu={class:"mono nowrap"},Ju={class:"mono nowrap"},Yu={key:0},Zu={colspan:"5",class:"mono cell-details"},Xu={key:0},Qu={key:1,class:"hint"},ed=He({__name:"TopEventsTable",props:{rows:{},n2:{type:Function},detailsIndex:{}},emits:["toggle"],setup(e){return(t,n)=>(S(),A("table",null,[n[1]||(n[1]=i("colgroup",null,[i("col",{class:"col-w-22"}),i("col"),i("col",{class:"col-w-12"}),i("col",{class:"col-w-18"}),i("col",{class:"col-w-16"})],-1)),n[2]||(n[2]=i("thead",null,[i("tr",null,[i("th",null,"Calendar"),i("th",null,"Summary"),i("th",{class:"num"},"Hours"),i("th",{class:"nowrap"},"Start date"),i("th",{class:"nowrap"},"Start time")])],-1)),i("tbody",null,[(S(!0),A(de,null,De(t.rows,(s,a)=>{var o;return S(),A(de,{key:a},[i("tr",{onClick:r=>t.$emit("toggle",a),class:"cursor-pointer"},[i("td",null,P(s.calendar),1),i("td",null,[i("span",{class:"cell",title:s.summary},P(s.summary),9,Ku)]),i("td",qu,P(t.n2(s.duration_h)),1),i("td",Gu,P((s.start||"").split(" ")[0]),1),i("td",Ju,P((o=(s.start||"").split(" ")[1])==null?void 0:o.slice(0,5)),1)],8,Vu),t.detailsIndex===a?(S(),A("tr",Yu,[i("td",Zu,[n[0]||(n[0]=i("div",null,[i("strong",null,"Details")],-1)),s.desc?(S(),A("div",Xu,P(s.desc),1)):(S(),A("div",Qu,"No description"))])])):se("",!0)],64)}),128))])]))}}),td={class:"card time-summary compact"},nd={class:"time-summary-firstline"},sd={class:"time-summary-metrics"},ad={key:0},od={key:1},rd={key:2},id={key:3},ld={key:4},cd={key:0,class:"time-summary-row"},ud={key:1,class:"time-summary-row"},dd={key:0,class:"share"},fd={key:2,class:"time-summary-row calendars"},pd={class:"label"},gd={class:"text"},hd={key:3,class:"time-summary-row top-category"},md={class:"text"},vd={key:4,class:"time-summary-row"},bd=xt(He({__name:"TimeSummaryCard",props:{summary:{},mode:{},config:{}},setup(e){const t={showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},n=e,s=V(()=>Object.assign({},t,n.config??{})),a=V(()=>n.mode==="active"?"active days":"all days"),o=V(()=>{if(!s.value.showWeekendShare)return"";const d=n.summary.weekendShare;return d==null?"":`${c(d)}%`}),r=V(()=>{if(!s.value.showTopCategory)return null;const d=n.summary.topCategory;if(!d)return null;const g=p(d.actualHours),u=Number(d.percent??0).toFixed(0),b=d.targetHours>0?` (${u}% of ${p(d.targetHours)} h)`:"";return{text:`${d.label}  ${g} h${b}`,badge:d.statusLabel||"",badgeClass:f(d.status)}}),l=V(()=>{if(!s.value.showBusiest)return"";const d=n.summary.busiest;if(!d||!d.date)return"";const g=Number(d.hours??0);return`Busiest ${d.date}  ${p(g)} h`});function c(d){return Number(d??0).toFixed(1)}function p(d){return Number(d??0).toFixed(2)}function f(d){switch(d){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}return(d,g)=>(S(),A("div",td,[i("div",nd,[i("em",null,"Time Summary  "+P(d.summary.rangeLabel),1)]),i("ul",sd,[s.value.showTotal?(S(),A("li",ad,[i("strong",null,P(p(d.summary.totalHours))+" h",1),g[0]||(g[0]=Ce(" total",-1))])):se("",!0),s.value.showAverage?(S(),A("li",od,P(p(d.summary.avgDay))+" h/day ("+P(a.value)+")",1)):se("",!0),s.value.showAverage?(S(),A("li",rd,P(p(d.summary.avgEvent))+" h/event",1)):se("",!0),s.value.showMedian?(S(),A("li",id,P(p(d.summary.medianDay))+" h median/day",1)):se("",!0),s.value.showBusiest&&l.value?(S(),A("li",ld,P(l.value),1)):se("",!0)]),s.value.showWorkday?(S(),A("div",cd,[g[1]||(g[1]=i("span",{class:"label"},"Workdays",-1)),Ce(" "+P(p(d.summary.workdayAvg))+" h avg  "+P(p(d.summary.workdayMedian))+" h median ",1)])):se("",!0),s.value.showWeekend?(S(),A("div",ud,[g[2]||(g[2]=i("span",{class:"label"},"Weekend",-1)),Ce(" "+P(p(d.summary.weekendAvg))+" h avg  "+P(p(d.summary.weekendMedian))+" h median ",1),s.value.showWeekendShare&&o.value?(S(),A("span",dd,"("+P(o.value)+")",1)):se("",!0)])):se("",!0),s.value.showCalendarSummary?(S(),A("div",fd,[i("span",pd,P(d.summary.activeCalendars)+" calendars",1),d.summary.calendarSummary?(S(),A(de,{key:0},[g[3]||(g[3]=i("span",{class:"sep"},"",-1)),i("span",gd,P(d.summary.calendarSummary),1)],64)):se("",!0)])):se("",!0),s.value.showTopCategory&&r.value?(S(),A("div",hd,[g[4]||(g[4]=i("span",{class:"label"},"Top category",-1)),i("span",md,P(r.value.text),1),r.value.badge?(S(),A("span",{key:0,class:ke(["summary-badge",r.value.badgeClass])},P(r.value.badge),3)):se("",!0)])):se("",!0),s.value.showBalance&&d.summary.balanceIndex!=null?(S(),A("div",vd,[g[5]||(g[5]=i("span",{class:"label"},"Balance",-1)),Ce(" "+P(p(d.summary.balanceIndex))+" ",1),g[6]||(g[6]=i("span",{class:"hint"},"(1 = perfekt)",-1))])):se("",!0)]))}}),[["__scopeId","data-v-c358573a"]]),yd={class:"card targets-card"},wd={class:"targets-header"},_d={key:0,class:"hint"},xd={class:"targets-main"},kd={class:"line total-line"},Cd={class:"value"},Sd={key:0,class:"line"},$d={key:1,class:"line"},Td={class:"line forecast"},Md={class:"hint"},Ad={key:0,class:"targets-badges"},Ed={key:1,class:"targets-categories"},Dd={class:"cat-top"},Nd={class:"cat-label"},Id={class:"name"},Pd={class:"cat-meta"},Ld={class:"percent"},Od={class:"cat-progress"},Fd={class:"bar"},Hd={class:"cat-metrics"},Bd={class:"hint"},Rd={key:1,class:"hint"},Wd={key:0,class:"cat-footer"},jd={class:"hint"},Ud=xt(He({__name:"TimeTargetsCard",props:{summary:{},config:{},groups:{}},setup(e){const t=e,n=V(()=>{var d;return((d=t.summary)==null?void 0:d.total)??c("total","Total")}),s=V(()=>{var g;return Array.isArray(t.groups)&&t.groups.length?t.groups.map(u=>({id:u.id,label:u.label,summary:u.summary??c(u.id,u.label),color:u.color,rows:u.rows})):(((g=t.summary)==null?void 0:g.categories)??[]).map(u=>({id:u.id,label:u.label,summary:u,color:void 0,rows:[]}))}),a=V(()=>s.value.map(d=>{const g=d.summary??c(d.id,d.label);return{id:d.id,label:d.label||g.label,actualHours:g.actualHours,targetHours:g.targetHours,percent:g.percent,deltaHours:g.deltaHours,needPerDay:g.needPerDay,daysLeft:g.daysLeft,calendarPercent:g.calendarPercent,gap:g.gap,status:g.status,statusLabel:g.statusLabel,color:d.color,calendarCount:Array.isArray(d.rows)?d.rows.length:0,progress:p(g.percent,0,140),calendarLabel:Array.isArray(d.rows)&&d.rows.length===1?"calendar":"calendars"}}).filter(d=>d.targetHours>0||d.actualHours>0||d.calendarCount>0));function o(d){if(!isFinite(d))return"0";const g=Math.round(d*10)/10;return Math.abs(g-Math.round(g))<.05?String(Math.round(g)):g.toFixed(1)}function r(d){return!isFinite(d)||Math.abs(d)<.005?"0.0":(d>=0?"+":"")+o(Math.abs(d))}function l(d){switch(d){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function c(d,g){return{id:d,label:g,actualHours:0,targetHours:0,percent:0,deltaHours:0,remainingHours:0,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"}}function p(d,g,u){return!isFinite(d)||d<g?g:d>u?u:d}function f(d){return d==="momentum"?"Momentum":"Linear"}return(d,g)=>(S(),A("div",yd,[i("div",wd,[g[0]||(g[0]=i("strong",null,"Targets",-1)),n.value.targetHours>0?(S(),A("span",_d,P(n.value.percent.toFixed(0))+"%",1)):se("",!0)]),i("div",xd,[i("div",kd,[i("span",Cd,[i("strong",null,P(o(n.value.actualHours)),1),Ce(" / "+P(o(n.value.targetHours))+" h",1)]),d.config.ui.showTotalDelta&&n.value.targetHours>0?(S(),A("span",{key:0,class:ke(["delta",n.value.deltaHours>=0?"pos":"neg"])},"  "+P(r(n.value.deltaHours))+"h ",3)):se("",!0)]),d.config.ui.showNeedPerDay&&n.value.targetHours>0?(S(),A("div",Sd," Days left "+P(n.value.daysLeft)+"  Need "+P(o(n.value.needPerDay))+" h/day ",1)):se("",!0),n.value.targetHours>0?(S(),A("div",$d,[Ce(" Pace: "+P(n.value.percent.toFixed(0))+"% vs "+P(n.value.calendarPercent.toFixed(0))+"%  ",1),i("span",{class:ke(["status-label",l(n.value.status)])},P(n.value.statusLabel),3)])):se("",!0),i("div",Td,[Ce(" Forecast: "+P(d.summary.forecast.text)+" ",1),i("span",Md," Linear "+P(o(d.summary.forecast.linear))+"h  Momentum "+P(o(d.summary.forecast.momentum))+"h  Primary: "+P(f(d.summary.forecast.primaryMethod)),1)])]),d.config.ui.badges&&n.value.targetHours>0?(S(),A("div",Ad,[i("span",{class:ke(["badge",l(n.value.status)])},P(n.value.statusLabel),3)])):se("",!0),d.config.ui.showCategoryBlocks&&a.value.length?(S(),A("div",Ed,[(S(!0),A(de,null,De(a.value,u=>(S(),A("div",{class:"category",key:u.id},[i("div",Dd,[i("div",Nd,[i("span",{class:"dot",style:ct({background:u.color||"var(--brand)"})},null,4),i("span",Id,P(u.label),1)]),i("div",Pd,[i("span",Ld,P(u.percent.toFixed(0))+"%",1),d.config.ui.badges&&u.targetHours>0?(S(),A("span",{key:0,class:ke(["badge",l(u.status)])},P(u.statusLabel),3)):se("",!0)])]),i("div",Od,[i("div",Fd,[i("div",{class:"fill",style:ct({width:u.progress+"%",background:u.color||"var(--brand)"})},null,4)])]),i("div",Hd,[i("strong",null,P(o(u.actualHours))+"h",1),i("span",Bd,"/ "+P(o(u.targetHours))+"h",1),u.targetHours>0?(S(),A("span",{key:0,class:ke(["delta",u.deltaHours>=0?"pos":"neg"])},"  "+P(r(u.deltaHours))+"h ",3)):se("",!0),d.config.ui.showNeedPerDay&&u.targetHours>0?(S(),A("span",Rd," Need "+P(o(u.needPerDay))+"h/day  "+P(u.daysLeft)+" days left ",1)):se("",!0)]),u.calendarCount>0?(S(),A("div",Wd,[i("span",jd,P(u.calendarCount)+" "+P(u.calendarLabel),1)])):se("",!0)]))),128))])):se("",!0)]))}}),[["__scopeId","data-v-bcb82b9a"]]);function zd(e){const t=e?rt(e):xn(),n={id:"total",label:"Total",actualHours:0,targetHours:t.totalHours,percent:0,deltaHours:0,remainingHours:t.totalHours,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"};return{total:n,categories:(t.categories||[]).map(s=>({...n,id:s.id,label:s.label,targetHours:s.targetHours,remainingHours:s.targetHours})),forecast:{linear:0,momentum:0,low:0,high:0,text:"~00 h",primaryMethod:t.forecast.methodPrimary,primary:0,bandLow:0,bandHigh:0}}}function La(){return{categories:["work","hobby","sport"],useCategoryMapping:!0,index:{method:"simple_range"},thresholds:{noticeMaxShare:.65,warnMaxShare:.75,warnIndex:.6},relations:{displayMode:"ratio"},trend:{lookbackWeeks:4},dayparts:{enabled:!1},ui:{roundPercent:1,roundRatio:1,showDailyStacks:!1,showInsights:!0,showNotes:!1}}}function _n(){return{showWeekendShare:!0,showEveningShare:!0,showEarliestLatest:!0,showOverlaps:!0,showLongestSession:!0,showLastDayOff:!0,showHint:!0,forecastMode:"total"}}const Oa=24*60*60*1e3;function Vd(e){const t=Number(e);if(!Number.isFinite(t))return 0;const n=Math.min(1e4,Math.max(0,t));return Number(n.toFixed(2))}function Fa(e){return Vd(Number(e)*4)}function xn(){return{totalHours:48,categories:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",color:"#2563EB",groupIds:[1]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#F97316",groupIds:[2]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#10B981",groupIds:[3]}],pace:{includeWeekendTotal:!0,mode:"days_only",thresholds:{onTrack:-2,atRisk:-10}},forecast:{methodPrimary:"linear",momentumLastNDays:2,padding:1.5},ui:{showTotalDelta:!0,showNeedPerDay:!0,showCategoryBlocks:!0,badges:!0,includeWeekendToggle:!0,showCalendarCharts:!0,showCategoryCharts:!0},allDayHours:8,timeSummary:{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},activityCard:_n(),balance:La(),includeZeroDaysInStats:!1}}function Yn(e){return JSON.parse(JSON.stringify(rt(e)))}function Kd(e){const t=rt(e.config),n=ii(e.from),s=ii(e.to),a=nf(e.byDay),o=(e.byCal||[]).reduce((d,g)=>{const u=Number((g==null?void 0:g.total_hours)??(g==null?void 0:g.hours)??0);return Number.isFinite(u)?d+u:d},0),r=t.totalHours||0,l=ri({includeWeekend:t.pace.includeWeekendTotal,mode:t.pace.mode,includeZeroDays:t.includeZeroDaysInStats,start:n,end:s,dailyHours:a}),c=oi({id:"total",label:"Total",actual:o,target:r,pace:l,thresholds:t.pace.thresholds,includeWeekend:t.pace.includeWeekendTotal,paceMode:t.pace.mode}),p=t.categories.map(d=>{const g=Zd(d,e.byCal,e.groupsById),u=d.paceMode||t.pace.mode,b=ri({includeWeekend:d.includeWeekend,mode:u,includeZeroDays:t.includeZeroDaysInStats,start:n,end:s,dailyHours:a});return oi({id:d.id,label:d.label,actual:g,target:d.targetHours,pace:b,thresholds:t.pace.thresholds,includeWeekend:d.includeWeekend,paceMode:u})}),f=ef({config:t,totalProgress:c,dailyHours:a,pace:l});return{total:c,categories:p,forecast:f}}function rt(e){var r,l,c,p,f,d,g,u,b,h,y,k,_,w,E,F,X,B,C,q,K,re,J,le,ye;if(typeof e=="string")try{const Q=JSON.parse(e);return rt(Q)}catch{return rt(void 0)}const t=xn(),n=JSON.parse(JSON.stringify(e??{}));if(typeof n!="object"||n===null||Array.isArray(n))return t;Array.isArray(n.categories)||(n.categories=[]);const s=n.categories.map(Q=>{const he=(Q!=null&&Q.id&&typeof Q.id=="string"?Q.id:"")||of(String((Q==null?void 0:Q.label)??"cat")),ce=typeof(Q==null?void 0:Q.label)=="string"&&Q.label.trim()!==""?Q.label.trim():qd(he),pe=jt(Q==null?void 0:Q.targetHours,0,1e4),Se=!!(Q!=null&&Q.includeWeekend),Ie=(Q==null?void 0:Q.paceMode)==="time_aware"?"time_aware":"days_only",ee=Gd(Q==null?void 0:Q.color),xe=Array.isArray(Q==null?void 0:Q.groupIds)?Q.groupIds.map(be=>Number(be)).filter(be=>Number.isFinite(be)&&be>=0&&be<=9):[];return{id:he,label:ce,targetHours:pe,includeWeekend:Se,paceMode:Ie,color:ee,groupIds:xe}}),a=s.length?s:t.categories;return{totalHours:jt(n.totalHours,0,1e4),categories:a,pace:{includeWeekendTotal:!!(((r=n.pace)==null?void 0:r.includeWeekendTotal)??t.pace.includeWeekendTotal),mode:((l=n.pace)==null?void 0:l.mode)==="time_aware"?"time_aware":t.pace.mode,thresholds:{onTrack:jt(((p=(c=n.pace)==null?void 0:c.thresholds)==null?void 0:p.onTrack)??t.pace.thresholds.onTrack,-100,100),atRisk:jt(((d=(f=n.pace)==null?void 0:f.thresholds)==null?void 0:d.atRisk)??t.pace.thresholds.atRisk,-100,100)}},forecast:{methodPrimary:((g=n.forecast)==null?void 0:g.methodPrimary)==="momentum"?"momentum":"linear",momentumLastNDays:(()=>{var he;const Q=Math.round(((he=n.forecast)==null?void 0:he.momentumLastNDays)??t.forecast.momentumLastNDays);return Math.min(14,Math.max(1,Number.isFinite(Q)?Q:t.forecast.momentumLastNDays))})(),padding:jt(((u=n.forecast)==null?void 0:u.padding)??t.forecast.padding,0,100)},ui:{showTotalDelta:!!(((b=n.ui)==null?void 0:b.showTotalDelta)??t.ui.showTotalDelta),showNeedPerDay:!!(((h=n.ui)==null?void 0:h.showNeedPerDay)??t.ui.showNeedPerDay),showCategoryBlocks:!!(((y=n.ui)==null?void 0:y.showCategoryBlocks)??t.ui.showCategoryBlocks),badges:!!(((k=n.ui)==null?void 0:k.badges)??t.ui.badges),includeWeekendToggle:!!(((_=n.ui)==null?void 0:_.includeWeekendToggle)??t.ui.includeWeekendToggle),showCalendarCharts:((w=n.ui)==null?void 0:w.showCalendarCharts)===void 0?t.ui.showCalendarCharts:!!n.ui.showCalendarCharts,showCategoryCharts:((E=n.ui)==null?void 0:E.showCategoryCharts)===void 0?t.ui.showCategoryCharts:!!n.ui.showCategoryCharts},allDayHours:jt(n.allDayHours??t.allDayHours,0,24),timeSummary:{showTotal:((F=n.timeSummary)==null?void 0:F.showTotal)===void 0?t.timeSummary.showTotal:!!n.timeSummary.showTotal,showAverage:((X=n.timeSummary)==null?void 0:X.showAverage)===void 0?t.timeSummary.showAverage:!!n.timeSummary.showAverage,showMedian:((B=n.timeSummary)==null?void 0:B.showMedian)===void 0?t.timeSummary.showMedian:!!n.timeSummary.showMedian,showBusiest:((C=n.timeSummary)==null?void 0:C.showBusiest)===void 0?t.timeSummary.showBusiest:!!n.timeSummary.showBusiest,showWorkday:((q=n.timeSummary)==null?void 0:q.showWorkday)===void 0?t.timeSummary.showWorkday:!!n.timeSummary.showWorkday,showWeekend:((K=n.timeSummary)==null?void 0:K.showWeekend)===void 0?t.timeSummary.showWeekend:!!n.timeSummary.showWeekend,showWeekendShare:((re=n.timeSummary)==null?void 0:re.showWeekendShare)===void 0?t.timeSummary.showWeekendShare:!!n.timeSummary.showWeekendShare,showCalendarSummary:((J=n.timeSummary)==null?void 0:J.showCalendarSummary)===void 0?t.timeSummary.showCalendarSummary:!!n.timeSummary.showCalendarSummary,showTopCategory:((le=n.timeSummary)==null?void 0:le.showTopCategory)===void 0?t.timeSummary.showTopCategory:!!n.timeSummary.showTopCategory,showBalance:((ye=n.timeSummary)==null?void 0:ye.showBalance)===void 0?t.timeSummary.showBalance:!!n.timeSummary.showBalance},activityCard:Jd(n.activityCard,t.activityCard),balance:Yd(n.balance,a,t.balance),includeZeroDaysInStats:!!(n.includeZeroDaysInStats??t.includeZeroDaysInStats)}}function qd(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function jt(e,t,n){const s=Number(e);return Number.isFinite(s)?Math.min(n,Math.max(t,Math.round(s*100)/100)):t}function Ha(e,t,n){const s=Number(e);if(!Number.isFinite(s))return t;const a=Math.round(s);return a<t?t:a>n?n:a}function Gd(e){if(typeof e!="string")return;const t=e.trim();if(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t)){if(t.length===4){const[,n,s,a]=t;return`#${n}${n}${s}${s}${a}${a}`.toUpperCase()}return t.toUpperCase()}}function Jd(e,t){const n={...t};if(!e||typeof e!="object")return n;["showWeekendShare","showEveningShare","showEarliestLatest","showOverlaps","showLongestSession","showLastDayOff","showHint"].forEach(o=>{Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=!!e[o])});const a=e==null?void 0:e.forecastMode;if(typeof a=="string"){const o=a.toLowerCase();(o==="off"||o==="total"||o==="calendar"||o==="category")&&(n.forecastMode=o)}return n}function Yd(e,t,n){var p,f,d,g;const s=t.map(u=>u.id),a=new Set([...s,"__uncategorized__"]),o=Array.isArray(e==null?void 0:e.categories)?e.categories:n.categories,r=[];for(const u of o){const b=typeof u=="string"?u.trim():String(u??"").trim();b&&(a.size&&!a.has(b)||r.includes(b)||r.push(b))}r.length||(s.length?r.push(...s.slice(0,n.categories.length)):r.push(...n.categories));const l=(e==null?void 0:e.thresholds)??{},c=(e==null?void 0:e.ui)??{};return{categories:r,useCategoryMapping:!!((e==null?void 0:e.useCategoryMapping)??n.useCategoryMapping),index:{method:((p=e==null?void 0:e.index)==null?void 0:p.method)==="shannon_evenness"?"shannon_evenness":n.index.method},thresholds:{noticeMaxShare:jt(l.noticeMaxShare??n.thresholds.noticeMaxShare,0,1),warnMaxShare:jt(l.warnMaxShare??n.thresholds.warnMaxShare,0,1),warnIndex:jt(l.warnIndex??n.thresholds.warnIndex,0,1)},relations:{displayMode:((f=e==null?void 0:e.relations)==null?void 0:f.displayMode)==="factor"?"factor":n.relations.displayMode},trend:{lookbackWeeks:Ha(((d=e==null?void 0:e.trend)==null?void 0:d.lookbackWeeks)??n.trend.lookbackWeeks,1,12)},dayparts:{enabled:!!(((g=e==null?void 0:e.dayparts)==null?void 0:g.enabled)??n.dayparts.enabled)},ui:{roundPercent:Ha(c.roundPercent??n.ui.roundPercent,0,3),roundRatio:Ha(c.roundRatio??n.ui.roundRatio,0,3),showDailyStacks:!!(c.showDailyStacks??n.ui.showDailyStacks),showInsights:!!(c.showInsights??n.ui.showInsights),showNotes:!!(c.showNotes??n.ui.showNotes)}}}function Zd(e,t,n){if(!Array.isArray(t))return 0;const s=Array.isArray(e.groupIds)&&e.groupIds.length?new Set(e.groupIds):null;let a=0;for(const o of t){const r=Number((o==null?void 0:o.total_hours)??(o==null?void 0:o.hours)??0);if(!isFinite(r)||r<=0)continue;const l=String((o==null?void 0:o.id)??(o==null?void 0:o.calendar)??""),c=Number((o==null?void 0:o.group)??(o==null?void 0:o.group_id)??(n==null?void 0:n[l])??0);s&&!s.has(c)||(a+=r)}return a}function oi(e){const t=Math.max(0,e.target||0),n=Math.max(0,e.actual||0),s=t>0?Ba(n/t*100):0,a=t-n,o=n-t,r=e.pace.daysLeft>0?Math.max(0,a)/e.pace.daysLeft:0,l=s-e.pace.calendarPercent,c=Xd({percent:s,target:t,gap:l,thresholds:e.thresholds});return{id:e.id,label:e.label,actualHours:ft(n),targetHours:ft(t),percent:s,deltaHours:ft(o),remainingHours:ft(Math.max(0,a)),needPerDay:ft(r),daysLeft:Math.max(0,Math.ceil(e.pace.daysLeft)),calendarPercent:Ba(e.pace.calendarPercent),gap:ft(l),status:c,statusLabel:Qd(c),includeWeekend:e.includeWeekend,paceMode:e.paceMode}}function Xd(e){return e.target<=0?"none":e.percent>=100?"done":e.gap>=e.thresholds.onTrack?"on_track":e.gap>=e.thresholds.atRisk?"at_risk":"behind"}function Qd(e){switch(e){case"on_track":return"On Track";case"at_risk":return"At Risk";case"behind":return"Behind";case"done":return"Done";default:return""}}function ri(e){const{start:t,end:n}=e;if(!t||!n)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};const s=Hs(new Date),a=Zt(t),o=Zt(n),r=sf(t,n).filter(d=>e.includeWeekend||!af(d)),l=r.length;if(l===0)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};if(Zt(s)>o)return{totalEligible:l,elapsedEligible:l,daysLeft:0,calendarPercent:100};if(Zt(s)<a)return{totalEligible:l,elapsedEligible:0,daysLeft:l,calendarPercent:0};let c=0;for(const d of r){const g=Zt(d),u=e.dailyHours.get(g)??0;if(!(!e.includeZeroDays&&u<=0&&g!==Zt(s))){if(g<Zt(s))c+=1;else if(g===Zt(s))if(e.mode==="time_aware"){const h=Math.min(new Date().getTime(),d.getTime()+Oa)-d.getTime(),y=Math.max(0,Math.min(1,h/Oa));(e.includeZeroDays||u>0||y>0)&&(c+=y)}else(e.includeZeroDays||u>0)&&(c+=1)}}const p=Ba(c/l*100),f=Math.max(0,l-c);return{totalEligible:l,elapsedEligible:c,daysLeft:f,calendarPercent:p}}function ef(e){const t=e.pace.totalEligible>0?e.pace.elapsedEligible/e.pace.totalEligible:0,n=t>0?e.totalProgress.actualHours/t:e.totalProgress.actualHours,s=Math.max(0,Math.ceil(e.pace.daysLeft)),a=tf(e.dailyHours,e.config.forecast.momentumLastNDays),o=e.totalProgress.actualHours+a*s,r=Math.max(0,Math.min(n,o)-e.config.forecast.padding),l=Math.max(n,o)+e.config.forecast.padding,c=e.config.forecast.methodPrimary==="momentum"?"momentum":"linear",p=c==="momentum"?o:n,f=Math.max(0,p-e.config.forecast.padding),d=Math.max(0,p+e.config.forecast.padding),g=c==="momentum"?"Momentum":"Linear";return{linear:ft(n),momentum:ft(o),low:ft(Math.max(0,r)),high:ft(Math.max(0,l)),text:`${g} ${Ra(e.config.forecast.padding)}h  ${Ra(f)}${Ra(d)} h`,primaryMethod:c,primary:ft(p),bandLow:ft(f),bandHigh:ft(d)}}function tf(e,t){if(t<=0)return 0;const n=Array.from(e.entries());if(!n.length)return 0;n.sort((o,r)=>o[0].localeCompare(r[0]));const s=n.slice(-t),a=s.reduce((o,[,r])=>o+Math.max(0,r||0),0);return s.length?a/s.length:0}function nf(e){const t=new Map;if(!Array.isArray(e))return t;for(const n of e){const s=String((n==null?void 0:n.date)??(n==null?void 0:n.day)??"");if(!s)continue;const a=Number((n==null?void 0:n.total_hours)??(n==null?void 0:n.hours)??0);isFinite(a)&&t.set(s,a)}return t}function sf(e,t){const n=[];let s=Hs(e);const a=Hs(t).getTime();for(;s.getTime()<=a;)n.push(new Date(s)),s=new Date(s.getTime()+Oa);return n}function ii(e){if(!e)return null;const t=e.split("-").map(s=>Number(s));if(t.length!==3||t.some(s=>!Number.isInteger(s)))return null;const n=new Date(Date.UTC(t[0],t[1]-1,t[2]));return Number.isNaN(n.getTime())?null:Hs(n)}function Hs(e){const t=new Date(e);return t.setUTCHours(0,0,0,0),t}function Zt(e){return e.toISOString().slice(0,10)}function af(e){const t=e.getUTCDay();return t===0||t===6}function Ba(e){return isFinite(e)?Math.max(0,Math.min(999,Number(e.toFixed(2)))):0}function ft(e){return isFinite(e)?Number(e.toFixed(2)):0}function Ra(e){if(!isFinite(e))return"0";const t=ft(Math.max(0,e));return Math.abs(t-Math.round(t))<.05?Math.round(t).toString():t.toFixed(1)}function of(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return`cat-${Math.abs(t)}`}const rf={class:"card activity-card"},lf={class:"activity-card__header"},cf={key:0,class:"pill"},uf={key:0,class:"activity-card__hero"},df={key:1,class:"activity-card__subline"},ff={key:2,class:"activity-card__meta"},pf={key:3,class:"activity-card__extra"},gf={key:4,class:"activity-card__hint"},hf=xt(He({__name:"ActivityScheduleCard",props:{summary:{},rangeLabel:{},categoryHint:{},config:{}},setup(e){const t=_n(),n=e,s=V(()=>Object.assign({},t,n.config??{})),a=V(()=>{const g=[];g.push(`Events ${n.summary.events}`),n.summary.activeDays!=null&&g.push(`Active Days ${n.summary.activeDays}`);const u=c(n.summary.typicalStart,n.summary.typicalEnd);return u&&g.push(`Typical ${u}`),g.join("  ")}),o=V(()=>{const g=[];return s.value.showWeekendShare&&n.summary.weekendShare!=null&&g.push(`Weekend ${p(n.summary.weekendShare)}`),s.value.showEveningShare&&n.summary.eveningShare!=null&&g.push(`Evening ${p(n.summary.eveningShare)}`),g.join("  ")}),r=V(()=>{const g=[];if(s.value.showEarliestLatest){const u=f(n.summary.earliestStart),b=f(n.summary.latestEnd);(u||b)&&g.push({label:"Earliest/Late",value:`${u||""} / ${b||""}`})}return s.value.showOverlaps&&n.summary.overlapEvents!=null&&g.push({label:"Overlaps",value:n.summary.overlapEvents.toString()}),g}),l=V(()=>{const g=[];return s.value.showLongestSession&&n.summary.longestSession!=null&&n.summary.longestSession>0&&g.push({label:"Longest Session",value:`${Number(n.summary.longestSession).toFixed(1)} h`}),s.value.showLastDayOff&&n.summary.lastDayOff&&g.push({label:"Last day off",value:d(n.summary.lastDayOff)}),s.value.showLastDayOff&&n.summary.lastHalfDayOff&&g.push({label:"Last half day",value:d(n.summary.lastHalfDayOff)}),g});function c(g,u){return g&&u?`${g}${u}`:g?`${g}`:u?`${u}`:""}function p(g){return`${Number(g||0).toFixed(1)}%`}function f(g){return g?g.length>=16?g.slice(11,16):g.length>=5?g.slice(0,5):null:null}function d(g){const u=g.trim();if(!u)return"";if(u.split("-").length>=2){const h=new Date(u.length===10?`${u}T00:00:00`:u);if(!Number.isNaN(h.getTime()))return new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}).format(h)}return u}return(g,u)=>(S(),A("div",rf,[i("div",lf,[i("span",null,"Activity & Schedule ("+P(g.rangeLabel)+")",1),g.summary.rangeLabel?(S(),A("span",cf,P(g.summary.rangeLabel),1)):se("",!0)]),a.value?(S(),A("div",uf,[i("span",null,P(a.value),1)])):se("",!0),o.value?(S(),A("div",df,[i("span",null,P(o.value),1)])):se("",!0),r.value.length?(S(),A("div",ff,[(S(!0),A(de,null,De(r.value,b=>(S(),A("span",{key:b.label},[i("strong",null,P(b.label),1),Ce(" "+P(b.value),1)]))),128))])):se("",!0),l.value.length?(S(),A("div",pf,[(S(!0),A(de,null,De(l.value,b=>(S(),A("span",{key:b.label},[i("strong",null,P(b.label),1),Ce(" "+P(b.value),1)]))),128))])):se("",!0),s.value.showHint&&g.categoryHint?(S(),A("div",gf,P(g.categoryHint),1)):se("",!0)]))}}),[["__scopeId","data-v-054cbd84"]]),mf={class:"card balance-card"},vf={class:"balance-card__header"},bf={key:0,class:"balance-card__hero"},yf={key:1,class:"balance-card__relations"},wf={key:2,class:"balance-card__trend"},_f={key:3,class:"balance-card__insights"},xf={key:4,class:"balance-card__warnings"},kf={key:5,class:"balance-card__note"},Cf=xt(He({__name:"BalanceOverviewCard",props:{overview:{},rangeLabel:{},config:{},note:{}},setup(e){const t={showInsights:!0,showDailyStacks:!1},n=e,s=V(()=>Object.assign({},t,n.config??{})),a=V(()=>(n.note??"").trim()),o=V(()=>{if(!n.overview)return"";const f=n.overview.index??0,d=n.overview.categories.filter(u=>u.share>.1).slice(0,4).map(u=>`${u.label} ${u.share.toFixed(0)}%`),g=d.length?`  ${d.join(" | ")}`:"";return`Balance Index ${f.toFixed(2)}${g}`}),r=V(()=>{var f;return!n.overview||!((f=n.overview.relations)!=null&&f.length)?"":n.overview.relations.map(d=>`${d.label} ${d.value}`).join("  ")}),l=V(()=>{var d;if(!n.overview)return"";const f=((d=n.overview.trend)==null?void 0:d.delta)??[];return f.length?f.map(g=>{const u=g.delta>0?"+":g.delta<0?"":"";return`${g.label} ${u}${Math.abs(g.delta).toFixed(1)} pp`}).join(", "):""}),c=V(()=>{var f;return s.value.showInsights?((f=n.overview)==null?void 0:f.insights)??[]:[]}),p=V(()=>{var f;return((f=n.overview)==null?void 0:f.warnings)??[]});return(f,d)=>(S(),A("div",mf,[i("div",vf,[i("span",null,"Balance Overview ("+P(f.rangeLabel)+")",1)]),o.value?(S(),A("div",bf,[i("span",null,P(o.value),1)])):se("",!0),r.value?(S(),A("div",yf,P(r.value),1)):se("",!0),l.value?(S(),A("div",wf,[d[0]||(d[0]=i("strong",null,"WoW-:",-1)),Ce(" "+P(l.value),1)])):se("",!0),c.value.length?(S(),A("ul",_f,[(S(!0),A(de,null,De(c.value,g=>(S(),A("li",{key:g}," "+P(g),1))),128))])):se("",!0),p.value.length?(S(),A("ul",xf,[(S(!0),A(de,null,De(p.value,g=>(S(),A("li",{key:g}," "+P(g),1))),128))])):se("",!0),a.value?(S(),A("div",kf,"  "+P(a.value),1)):se("",!0)]))}}),[["__scopeId","data-v-37915280"]]),Sf={id:"opsdash-sidebar-pane-calendars",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-calendars"},$f={class:"sb-actions"},Tf={class:"sb-list"},Mf=["aria-pressed","onClick"],Af={class:"cal-name"},Ef={class:"cal-fields"},Df={class:"field"},Nf=["value","onChange"],If=["value"],Pf={class:"field"},Lf=["value","title","aria-invalid","onInput"],Of=He({__name:"SidebarCalendarsPane",props:{calendars:{},selected:{},range:{},isLoading:{type:Boolean},categoryOptions:{},calendarTargetMessages:{},calendarCategoryId:{type:Function},getTarget:{type:Function}},emits:["select-all","toggle-calendar","set-category","target-input"],setup(e){const t=e,{calendars:n,selected:s,range:a,isLoading:o,categoryOptions:r,calendarTargetMessages:l}=Pn(t),c=f=>t.calendarCategoryId(f),p=f=>t.getTarget(f);return(f,d)=>(S(),A("div",Sf,[i("div",$f,[we(m(Ze),{type:"tertiary",disabled:m(o),onClick:d[0]||(d[0]=g=>f.$emit("select-all",!0))},{default:Fe(()=>[...d[2]||(d[2]=[Ce("All",-1)])]),_:1},8,["disabled"]),we(m(Ze),{type:"tertiary",disabled:m(o),onClick:d[1]||(d[1]=g=>f.$emit("select-all",!1))},{default:Fe(()=>[...d[3]||(d[3]=[Ce("None",-1)])]),_:1},8,["disabled"])]),d[7]||(d[7]=i("div",{class:"sb-context"},[i("div",{class:"sb-title"},"PerCalendar Settings"),i("p",{class:"sb-description"}," Choose which calendars feed dashboards, then map them to categories so Balance and Targets stay in sync. "),i("p",{class:"sb-description"},[Ce(" Use "),i("strong",null,"Category"),Ce(" to group calendars and "),i("strong",null,"Target (h)"),Ce(" to define weekly/monthly goalsthe values convert automatically when you switch ranges. ")])],-1)),i("div",Tf,[(S(!0),A(de,null,De(m(n),g=>{var u,b;return S(),A("div",{key:g.id,class:"cal-card"},[i("div",{class:"cal-card-head",role:"button",tabindex:"0","aria-pressed":m(s).includes(g.id),onClick:h=>f.$emit("toggle-calendar",g.id)},[i("span",{class:"color-dot",style:ct({background:g.color||"var(--brand)"})},null,4),i("span",Af,P(g.displayname||g.id),1),i("span",{class:ke(["cal-state",{on:m(s).includes(g.id)}])},P(m(s).includes(g.id)?"Selected":"Hidden"),3)],8,Mf),i("div",Ef,[i("label",Df,[d[5]||(d[5]=i("span",{class:"label"},"Category",-1)),i("select",{value:c(g.id),onChange:h=>f.$emit("set-category",{id:g.id,category:h.target.value})},[d[4]||(d[4]=i("option",{value:""},"Unassigned",-1)),(S(!0),A(de,null,De(m(r),h=>(S(),A("option",{key:h.id,value:h.id},P(h.label),9,If))),128))],40,Nf)]),i("label",Pf,[d[6]||(d[6]=i("span",{class:"label"},"Target (h)",-1)),i("input",{type:"number",value:p(g.id),min:"0",max:"10000",step:"0.25","aria-label":"Target hours",title:`Target (${m(a)==="week"?"week":"month"}) in hours`,"aria-invalid":!!m(l)[g.id],class:"target-input",onInput:h=>f.$emit("target-input",{id:g.id,value:h.target.value})},null,40,Lf),m(l)[g.id]?(S(),A("div",{key:0,class:ke(["input-message",(u=m(l)[g.id])==null?void 0:u.tone])},P((b=m(l)[g.id])==null?void 0:b.text),3)):se("",!0)])])])}),128))])]))}}),Ff={id:"opsdash-sidebar-pane-targets",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-targets"},Hf={class:"target-config"},Bf={class:"field"},Rf=["value","aria-invalid"],Wf={class:"field"},jf=["value","aria-invalid"],Uf={class:"cat-header"},zf=["value","onInput"],Vf=["disabled","onClick"],Kf={class:"cat-fields"},qf={class:"field"},Gf=["value","aria-invalid","onInput"],Jf={class:"field"},Yf=["value","onChange"],Zf={class:"field checkbox"},Xf=["checked","onChange"],Qf={class:"field color-field"},ep=["aria-expanded","aria-label","onClick"],tp=["id"],np={class:"swatch-grid",role:"group","aria-label":"Preset colours"},sp=["aria-label","onClick"],ap={class:"custom-color"},op=["value","onInput"],rp={class:"target-section"},ip={class:"field checkbox"},lp=["checked"],cp={class:"field"},up=["value"],dp={class:"field"},fp=["value","aria-invalid"],pp={class:"field"},gp=["value","aria-invalid"],hp={class:"target-section"},mp={class:"field"},vp=["value"],bp={class:"field"},yp=["value","aria-invalid"],wp={class:"field"},_p=["value","aria-invalid"],xp={class:"target-section"},kp={class:"field checkbox"},Cp=["checked"],Sp={class:"field checkbox"},$p=["checked"],Tp={class:"field checkbox"},Mp=["checked"],Ap={class:"field checkbox"},Ep=["checked"],Dp={class:"field checkbox"},Np=["checked"],Ip={class:"field checkbox"},Pp=["checked"],Lp={class:"field checkbox"},Op=["checked"],Fp={class:"field checkbox"},Hp=["checked"],Bp=He({__name:"SidebarTargetsPane",props:{targets:{},categoryOptions:{},totalTargetMessage:{},allDayHoursMessage:{},categoryTargetMessages:{},paceThresholdMessages:{},forecastMomentumMessage:{},forecastPaddingMessage:{},canAddCategory:{type:Boolean},colorPalette:{}},emits:["total-target-input","set-all-day-hours","set-category-label","remove-category","set-category-target","set-category-pace","set-category-weekend","set-category-color","add-category","set-include-weekend-total","set-pace-mode","set-threshold","set-forecast-method","set-forecast-momentum","set-forecast-padding","set-ui-option","set-include-zero-days"],setup(e,{emit:t}){const n=e,{targets:s,categoryOptions:a,totalTargetMessage:o,allDayHoursMessage:r,categoryTargetMessages:l,paceThresholdMessages:c,forecastMomentumMessage:p,forecastPaddingMessage:f,canAddCategory:d,colorPalette:g}=Pn(n),u=t,b=V(()=>{var B;return w((B=g.value)==null?void 0:B[0])??"#2563EB"}),h=ie(null);function y(B){const C=B.target;C!=null&&C.closest("[data-color-popover]")||_()}At(()=>{document.addEventListener("click",y)}),bn(()=>{document.removeEventListener("click",y)});function k(B){if(h.value===B){_();return}h.value=B,nn(()=>{const C=document.getElementById(`opsdash-color-popover-${B}`);C==null||C.focus()})}function _(){h.value=null}function w(B){if(typeof B!="string")return null;const C=B.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(C))return null;if(C.length===4){const[,q,K,re]=C;return`#${q}${q}${K}${K}${re}${re}`.toUpperCase()}return C.toUpperCase()}function E(B){return w(B==null?void 0:B.color)??b.value}function F(B,C){const q=w(C)??b.value;u("set-category-color",{id:B,color:q})}function X(B,C){const q=w(C)??b.value;u("set-category-color",{id:B,color:q}),_()}return(B,C)=>{var q,K,re,J,le,ye,Q,he,ce,pe,Se,Ie;return S(),A("div",Ff,[C[50]||(C[50]=i("div",{class:"sb-title"},"Target Settings",-1)),i("div",Hf,[i("div",Bf,[C[20]||(C[20]=i("span",{class:"label"},"Total target (h)",-1)),i("input",{type:"number",value:m(s).totalHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!m(o),onInput:C[0]||(C[0]=ee=>B.$emit("total-target-input",ee.target.value))},null,40,Rf),m(o)?(S(),A("div",{key:0,class:ke(["input-message",(q=m(o))==null?void 0:q.tone])},P((K=m(o))==null?void 0:K.text),3)):se("",!0)]),i("div",Wf,[C[21]||(C[21]=i("span",{class:"label"},"All-day event (h per day)",-1)),i("input",{type:"number",value:m(s).allDayHours,min:"0",max:"24",step:"0.25","aria-invalid":!!m(r),onInput:C[1]||(C[1]=ee=>B.$emit("set-all-day-hours",ee.target.value))},null,40,jf),m(r)?(S(),A("div",{key:0,class:ke(["input-message",(re=m(r))==null?void 0:re.tone])},P((J=m(r))==null?void 0:J.text),3)):se("",!0)]),(S(!0),A(de,null,De(m(a),ee=>{var xe,be;return S(),A("div",{class:"target-category",key:ee.id},[i("div",Uf,[i("input",{class:"cat-name",type:"text",value:ee.label,placeholder:"Category name",onInput:ge=>B.$emit("set-category-label",{id:ee.id,label:ge.target.value})},null,40,zf),i("button",{class:"remove-cat",type:"button",disabled:m(a).length<=1,title:"Remove category",onClick:ge=>B.$emit("remove-category",ee.id)},"  ",8,Vf)]),i("div",Kf,[i("label",qf,[C[22]||(C[22]=i("span",{class:"label"},"Target (h)",-1)),i("input",{type:"number",value:ee.targetHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!m(l)[ee.id],onInput:ge=>B.$emit("set-category-target",{id:ee.id,value:ge.target.value})},null,40,Gf),m(l)[ee.id]?(S(),A("div",{key:0,class:ke(["input-message",(xe=m(l)[ee.id])==null?void 0:xe.tone])},P((be=m(l)[ee.id])==null?void 0:be.text),3)):se("",!0)]),i("label",Jf,[C[24]||(C[24]=i("span",{class:"label"},"Pace mode",-1)),i("select",{value:ee.paceMode||m(s).pace.mode,onChange:ge=>B.$emit("set-category-pace",{id:ee.id,mode:ge.target.value})},[...C[23]||(C[23]=[i("option",{value:"days_only"},"Days only",-1),i("option",{value:"time_aware"},"Time aware",-1)])],40,Yf)]),i("label",Zf,[i("input",{type:"checkbox",checked:ee.includeWeekend,onChange:ge=>B.$emit("set-category-weekend",{id:ee.id,value:ge.target.checked})},null,40,Xf),C[25]||(C[25]=i("span",null,"Weekend",-1))]),i("div",Qf,[C[28]||(C[28]=i("span",{class:"label"},"Colour",-1)),i("div",{class:"color-chip-wrapper","data-color-popover":"",onClick:C[3]||(C[3]=Wt(()=>{},["stop"]))},[i("button",{type:"button",class:"color-chip",style:ct({backgroundColor:E(ee)}),"aria-expanded":h.value===ee.id,"aria-label":`Choose colour for ${ee.label}`,onClick:ge=>k(ee.id)},[...C[26]||(C[26]=[i("span",{class:"chip-outline"},null,-1)])],12,ep),h.value===ee.id?(S(),A("div",{key:0,class:"color-popover",id:`opsdash-color-popover-${ee.id}`,tabindex:"-1",onKeydown:C[2]||(C[2]=Ia(Wt(ge=>_(),["prevent"]),["esc"]))},[i("div",np,[(S(!0),A(de,null,De(m(g),ge=>(S(),A("button",{key:`${ee.id}-swatch-${ge}`,type:"button",class:ke(["color-swatch",{active:E(ee)===ge}]),style:ct({backgroundColor:ge}),"aria-label":`Use colour ${ge}`,onClick:Pe=>X(ee.id,ge)},null,14,sp))),128))]),i("label",ap,[C[27]||(C[27]=i("span",null,"Custom",-1)),i("input",{class:"color-input",type:"color",value:E(ee),"aria-label":"Pick custom colour",onInput:ge=>F(ee.id,ge.target.value)},null,40,op)])],40,tp)):se("",!0)])])])])}),128)),we(m(Ze),{type:"tertiary",class:"add-category",disabled:!m(d),onClick:C[4]||(C[4]=ee=>B.$emit("add-category"))},{default:Fe(()=>[...C[29]||(C[29]=[Ce(" Add category ",-1)])]),_:1},8,["disabled"]),i("div",rp,[C[35]||(C[35]=i("div",{class:"section-title"},"Pace",-1)),i("label",ip,[i("input",{type:"checkbox",checked:m(s).pace.includeWeekendTotal,onChange:C[5]||(C[5]=ee=>B.$emit("set-include-weekend-total",ee.target.checked))},null,40,lp),C[30]||(C[30]=i("span",null,"Count weekend in total pace",-1))]),i("label",cp,[C[32]||(C[32]=i("span",{class:"label"},"Mode",-1)),i("select",{value:m(s).pace.mode,onChange:C[6]||(C[6]=ee=>B.$emit("set-pace-mode",ee.target.value))},[...C[31]||(C[31]=[i("option",{value:"days_only"},"Days only",-1),i("option",{value:"time_aware"},"Time aware",-1)])],40,up)]),i("label",dp,[C[33]||(C[33]=i("span",{class:"label"},"On track  gap (%)",-1)),i("input",{type:"number",value:m(s).pace.thresholds.onTrack,step:"0.1","aria-invalid":!!m(c).onTrack,onInput:C[7]||(C[7]=ee=>B.$emit("set-threshold",{key:"onTrack",value:ee.target.value}))},null,40,fp),m(c).onTrack?(S(),A("div",{key:0,class:ke(["input-message",(le=m(c).onTrack)==null?void 0:le.tone])},P((ye=m(c).onTrack)==null?void 0:ye.text),3)):se("",!0)]),i("label",pp,[C[34]||(C[34]=i("span",{class:"label"},"At risk  gap (%)",-1)),i("input",{type:"number",value:m(s).pace.thresholds.atRisk,step:"0.1","aria-invalid":!!m(c).atRisk,onInput:C[8]||(C[8]=ee=>B.$emit("set-threshold",{key:"atRisk",value:ee.target.value}))},null,40,gp),m(c).atRisk?(S(),A("div",{key:0,class:ke(["input-message",(Q=m(c).atRisk)==null?void 0:Q.tone])},P((he=m(c).atRisk)==null?void 0:he.text),3)):se("",!0)])]),i("div",hp,[C[40]||(C[40]=i("div",{class:"section-title"},"Forecast",-1)),i("label",mp,[C[37]||(C[37]=i("span",{class:"label"},"Primary method",-1)),i("select",{value:m(s).forecast.methodPrimary,onChange:C[9]||(C[9]=ee=>B.$emit("set-forecast-method",ee.target.value))},[...C[36]||(C[36]=[i("option",{value:"linear"},"Linear",-1),i("option",{value:"momentum"},"Momentum",-1)])],40,vp)]),i("label",bp,[C[38]||(C[38]=i("span",{class:"label"},"Momentum window (days)",-1)),i("input",{type:"number",value:m(s).forecast.momentumLastNDays,min:"1",max:"14",step:"1","aria-invalid":!!m(p),onInput:C[10]||(C[10]=ee=>B.$emit("set-forecast-momentum",ee.target.value))},null,40,yp),m(p)?(S(),A("div",{key:0,class:ke(["input-message",(ce=m(p))==null?void 0:ce.tone])},P((pe=m(p))==null?void 0:pe.text),3)):se("",!0)]),i("label",wp,[C[39]||(C[39]=i("span",{class:"label"},"Padding (h)",-1)),i("input",{type:"number",value:m(s).forecast.padding,min:"0",step:"0.1","aria-invalid":!!m(f),onInput:C[11]||(C[11]=ee=>B.$emit("set-forecast-padding",ee.target.value))},null,40,_p),m(f)?(S(),A("div",{key:0,class:ke(["input-message",(Se=m(f))==null?void 0:Se.tone])},P((Ie=m(f))==null?void 0:Ie.text),3)):se("",!0)])]),i("div",xp,[C[49]||(C[49]=i("div",{class:"section-title"},"Display",-1)),i("label",kp,[i("input",{type:"checkbox",checked:m(s).ui.showCalendarCharts,onChange:C[12]||(C[12]=ee=>B.$emit("set-ui-option",{key:"showCalendarCharts",value:ee.target.checked}))},null,40,Cp),C[41]||(C[41]=i("span",null,"Show calendar charts",-1))]),i("label",Sp,[i("input",{type:"checkbox",checked:m(s).ui.showCategoryCharts,onChange:C[13]||(C[13]=ee=>B.$emit("set-ui-option",{key:"showCategoryCharts",value:ee.target.checked}))},null,40,$p),C[42]||(C[42]=i("span",null,"Show category charts",-1))]),i("label",Tp,[i("input",{type:"checkbox",checked:m(s).ui.showTotalDelta,onChange:C[14]||(C[14]=ee=>B.$emit("set-ui-option",{key:"showTotalDelta",value:ee.target.checked}))},null,40,Mp),C[43]||(C[43]=i("span",null,"Show total delta",-1))]),i("label",Ap,[i("input",{type:"checkbox",checked:m(s).ui.showNeedPerDay,onChange:C[15]||(C[15]=ee=>B.$emit("set-ui-option",{key:"showNeedPerDay",value:ee.target.checked}))},null,40,Ep),C[44]||(C[44]=i("span",null,"Show need per day",-1))]),i("label",Dp,[i("input",{type:"checkbox",checked:m(s).ui.showCategoryBlocks,onChange:C[16]||(C[16]=ee=>B.$emit("set-ui-option",{key:"showCategoryBlocks",value:ee.target.checked}))},null,40,Np),C[45]||(C[45]=i("span",null,"Show categories",-1))]),i("label",Ip,[i("input",{type:"checkbox",checked:m(s).ui.badges,onChange:C[17]||(C[17]=ee=>B.$emit("set-ui-option",{key:"badges",value:ee.target.checked}))},null,40,Pp),C[46]||(C[46]=i("span",null,"Status badges",-1))]),i("label",Lp,[i("input",{type:"checkbox",checked:m(s).ui.includeWeekendToggle,onChange:C[18]||(C[18]=ee=>B.$emit("set-ui-option",{key:"includeWeekendToggle",value:ee.target.checked}))},null,40,Op),C[47]||(C[47]=i("span",null,"Weekend toggle",-1))]),i("label",Fp,[i("input",{type:"checkbox",checked:m(s).includeZeroDaysInStats,onChange:C[19]||(C[19]=ee=>B.$emit("set-include-zero-days",ee.target.checked))},null,40,Hp),C[48]||(C[48]=i("span",null,"Include zero days in pace",-1))])])])])}}}),Rp={id:"opsdash-sidebar-pane-summary",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-summary"},Wp={class:"target-config"},jp={class:"field"},Up={class:"summary-mode-toggle"},zp={class:"target-section"},Vp=["checked","onChange"],Kp=He({__name:"SidebarSummaryPane",props:{summaryOptions:{},activeDayMode:{}},emits:["update:activeMode","toggle-option"],setup(e,{emit:t}){const n=e,s=t,a={showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},o=V(()=>({...a,...n.summaryOptions??{}})),r=[{key:"showTotal",label:"Total hours"},{key:"showAverage",label:"Average per day"},{key:"showMedian",label:"Median per day"},{key:"showBusiest",label:"Busiest day"},{key:"showWorkday",label:"Workdays row"},{key:"showWeekend",label:"Weekend row"},{key:"showWeekendShare",label:"Weekend share"},{key:"showCalendarSummary",label:"Top calendars"},{key:"showTopCategory",label:"Top category"},{key:"showBalance",label:"Balance index"}];return(l,c)=>(S(),A("div",Rp,[c[6]||(c[6]=i("div",{class:"sb-title"},"Time Summary",-1)),i("div",Wp,[i("div",jp,[c[4]||(c[4]=i("span",{class:"label"},"Average mode",-1)),i("div",Up,[we(m(Fs),{type:"radio",name:"summary-mode-active",checked:l.activeDayMode==="active","onUpdate:checked":c[0]||(c[0]=p=>{p&&s("update:activeMode","active")})},{default:Fe(()=>[...c[2]||(c[2]=[Ce(" Active days ",-1)])]),_:1},8,["checked"]),we(m(Fs),{type:"radio",name:"summary-mode-all",checked:l.activeDayMode==="all","onUpdate:checked":c[1]||(c[1]=p=>{p&&s("update:activeMode","all")})},{default:Fe(()=>[...c[3]||(c[3]=[Ce(" All days ",-1)])]),_:1},8,["checked"])])]),i("div",zp,[c[5]||(c[5]=i("div",{class:"section-title"},"Display",-1)),(S(),A(de,null,De(r,p=>i("label",{key:p.key,class:"field checkbox"},[i("input",{type:"checkbox",checked:o.value[p.key],onChange:f=>s("toggle-option",{key:p.key,value:f.target.checked})},null,40,Vp),i("span",null,P(p.label),1)])),64))])])]))}}),qp={id:"opsdash-sidebar-pane-activity",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-activity"},Gp={class:"section-title-row"},Jp=["aria-expanded"],Yp={key:0,class:"section-hint"},Zp={class:"target-section toggle-grid"},Xp=["checked","onChange"],Qp={class:"forecast-block"},eg={class:"field"},tg=["value"],ng=["value"],sg={key:0,class:"section-hint forecast-hint"},ag=xt(He({__name:"SidebarActivityPane",props:{activitySettings:{},activityToggles:{},forecastMode:{},forecastOptions:{},helpOpen:{type:Boolean}},emits:["toggle-help","toggle-option","update-forecast-mode"],setup(e,{emit:t}){const n=e,s=t,{activitySettings:a,activityToggles:o,forecastMode:r,forecastOptions:l,helpOpen:c}=Pn(n),p=V(()=>{var g;const d=(g=l.value)==null?void 0:g.find(u=>u.value===r.value);return(d==null?void 0:d.description)??""});function f(d){(d==="off"||d==="total"||d==="calendar"||d==="category")&&s("update-forecast-mode",d)}return(d,g)=>(S(),A("div",qp,[i("div",Gp,[g[3]||(g[3]=i("div",{class:"section-title"},"Activity & Schedule",-1)),i("button",{type:"button",class:"info-button","aria-expanded":m(c),"aria-label":"Activity & Schedule help",onClick:g[0]||(g[0]=u=>s("toggle-help"))},[...g[2]||(g[2]=[i("span",null,"?",-1)])],8,Jp)]),m(c)?(S(),A("p",Yp,"Choose which metrics appear on the Activity & Schedule card.")):se("",!0),i("div",Zp,[(S(!0),A(de,null,De(m(o),([u,b])=>(S(),A("label",{key:u,class:"field checkbox toggle-field"},[i("input",{type:"checkbox",checked:m(a)[u],onChange:h=>s("toggle-option",{key:u,value:h.target.checked})},null,40,Xp),i("span",null,P(b),1)]))),128))]),i("div",Qp,[g[5]||(g[5]=i("div",{class:"section-title"},"Bar chart projection",-1)),i("label",eg,[g[4]||(g[4]=i("span",{class:"label"},"Projection mode",-1)),i("select",{value:m(r),onChange:g[1]||(g[1]=u=>f(u.target.value))},[(S(!0),A(de,null,De(m(l),u=>(S(),A("option",{key:u.value,value:u.value},P(u.label),9,ng))),128))],40,tg)]),p.value?(S(),A("p",sg,P(p.value),1)):se("",!0)])]))}}),[["__scopeId","data-v-4d86aa83"]]),og={id:"opsdash-sidebar-pane-balance",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-balance"},rg={class:"section-title-row"},ig=["aria-expanded"],lg={class:"target-section"},cg={class:"section-title-row"},ug=["aria-expanded"],dg={key:0,class:"section-hint"},fg={class:"field-grid"},pg={class:"field"},gg=["value","aria-invalid"],hg={class:"field"},mg=["value","aria-invalid"],vg={class:"field"},bg=["value","aria-invalid"],yg={class:"target-section"},wg={class:"section-title-row"},_g=["aria-expanded"],xg={key:0,class:"section-hint"},kg={class:"field-grid"},Cg={class:"field"},Sg=["value"],$g={class:"field"},Tg=["value","aria-invalid"],Mg={class:"target-section"},Ag={class:"section-title-row"},Eg=["aria-expanded"],Dg={key:0,class:"section-hint"},Ng={class:"toggle-grid"},Ig={class:"field checkbox toggle-field"},Pg=["checked"],Lg={class:"field checkbox toggle-field"},Og=["checked"],Fg={class:"field checkbox toggle-field"},Hg=["checked"],Bg={class:"field checkbox toggle-field"},Rg=["checked"],Wg={class:"field-grid mt-8"},jg={class:"field"},Ug=["value","aria-invalid"],zg=["value"],Vg={class:"field"},Kg=["value","aria-invalid"],qg=["value"],Gg=He({__name:"SidebarBalancePane",props:{balanceSettings:{},balanceThresholdMessages:{},balanceLookbackMessage:{},balanceUiPrecisionMessages:{},roundingOptions:{},helpThresholds:{type:Boolean},helpTrend:{type:Boolean},helpDisplay:{type:Boolean}},emits:["toggle-help","set-threshold","set-relation","set-lookback","set-ui-toggle","set-ui-precision"],setup(e,{emit:t}){const n=e,s=t,{balanceSettings:a,balanceThresholdMessages:o,balanceLookbackMessage:r,balanceUiPrecisionMessages:l,roundingOptions:c,helpThresholds:p,helpTrend:f,helpDisplay:d}=Pn(n);return(g,u)=>{var b,h,y,k,_,w,E,F,X,B,C,q;return S(),A("div",og,[i("div",rg,[u[16]||(u[16]=i("div",{class:"section-title subtitle"},"Balance Overview",-1)),i("button",{type:"button",class:"info-button","aria-expanded":m(p)||m(f)||m(d),"aria-label":"Balance Overview help",onClick:u[0]||(u[0]=K=>s("toggle-help","all"))},[...u[15]||(u[15]=[i("span",null,"?",-1)])],8,ig)]),i("div",lg,[i("div",cg,[u[18]||(u[18]=i("div",{class:"section-subtitle subtitle"},"Thresholds",-1)),i("button",{type:"button",class:"info-button","aria-expanded":m(p),"aria-label":"Thresholds help",onClick:u[1]||(u[1]=K=>s("toggle-help","thresholds"))},[...u[17]||(u[17]=[i("span",null,"?",-1)])],8,ug)]),m(p)?(S(),A("p",dg,"Set the share/index limits that trigger balance warnings.")):se("",!0),i("div",fg,[i("label",pg,[u[19]||(u[19]=i("span",{class:"label"},"Notice max share",-1)),i("input",{type:"number",min:"0",max:"1",step:"0.01",value:m(a).thresholds.noticeMaxShare,"aria-invalid":!!m(o).noticeMaxShare,onInput:u[2]||(u[2]=K=>s("set-threshold",{key:"noticeMaxShare",value:K.target.value}))},null,40,gg),m(o).noticeMaxShare?(S(),A("div",{key:0,class:ke(["input-message",(b=m(o).noticeMaxShare)==null?void 0:b.tone])},P((h=m(o).noticeMaxShare)==null?void 0:h.text),3)):se("",!0)]),i("label",hg,[u[20]||(u[20]=i("span",{class:"label"},"Warn max share",-1)),i("input",{type:"number",min:"0",max:"1",step:"0.01",value:m(a).thresholds.warnMaxShare,"aria-invalid":!!m(o).warnMaxShare,onInput:u[3]||(u[3]=K=>s("set-threshold",{key:"warnMaxShare",value:K.target.value}))},null,40,mg),m(o).warnMaxShare?(S(),A("div",{key:0,class:ke(["input-message",(y=m(o).warnMaxShare)==null?void 0:y.tone])},P((k=m(o).warnMaxShare)==null?void 0:k.text),3)):se("",!0)]),i("label",vg,[u[21]||(u[21]=i("span",{class:"label"},"Warn index",-1)),i("input",{type:"number",min:"0",max:"1",step:"0.01",value:m(a).thresholds.warnIndex,"aria-invalid":!!m(o).warnIndex,onInput:u[4]||(u[4]=K=>s("set-threshold",{key:"warnIndex",value:K.target.value}))},null,40,bg),m(o).warnIndex?(S(),A("div",{key:0,class:ke(["input-message",(_=m(o).warnIndex)==null?void 0:_.tone])},P((w=m(o).warnIndex)==null?void 0:w.text),3)):se("",!0)])])]),i("div",yg,[i("div",wg,[u[23]||(u[23]=i("div",{class:"section-subtitle subtitle"},"Trend & Relations",-1)),i("button",{type:"button",class:"info-button","aria-expanded":m(f),"aria-label":"Trend help",onClick:u[5]||(u[5]=K=>s("toggle-help","trend"))},[...u[22]||(u[22]=[i("span",null,"?",-1)])],8,_g)]),m(f)?(S(),A("p",xg," Control the comparison window and how ratios are expressed. Day on/off never looks ahead; it scans the past using this lookback (default 4 weeks). ")):se("",!0),i("div",kg,[i("label",Cg,[u[25]||(u[25]=i("span",{class:"label"},"Relation display",-1)),i("select",{value:m(a).relations.displayMode,onChange:u[6]||(u[6]=K=>s("set-relation",K.target.value))},[...u[24]||(u[24]=[i("option",{value:"ratio"},"Ratio (A : B)",-1),i("option",{value:"factor"},"Factor (A)",-1)])],40,Sg)]),i("label",$g,[u[26]||(u[26]=i("span",{class:"label"},"Trend lookback (weeks)",-1)),i("input",{type:"number",min:"1",max:"12",step:"1",value:m(a).trend.lookbackWeeks,"aria-invalid":!!m(r),onInput:u[7]||(u[7]=K=>s("set-lookback",K.target.value))},null,40,Tg),m(r)?(S(),A("div",{key:0,class:ke(["input-message",(E=m(r))==null?void 0:E.tone])},P((F=m(r))==null?void 0:F.text),3)):se("",!0)])])]),i("div",Mg,[i("div",Ag,[u[28]||(u[28]=i("div",{class:"section-subtitle subtitle"},"Display",-1)),i("button",{type:"button",class:"info-button","aria-expanded":m(d),"aria-label":"Display help",onClick:u[8]||(u[8]=K=>s("toggle-help","display"))},[...u[27]||(u[27]=[i("span",null,"?",-1)])],8,Eg)]),m(d)?(S(),A("p",Dg," Choose which extras appear on the Balance card and how values are rounded. ")):se("",!0),i("div",Ng,[i("label",Ig,[i("input",{type:"checkbox",checked:m(a).ui.showInsights,onChange:u[9]||(u[9]=K=>s("set-ui-toggle",{key:"showInsights",value:K.target.checked}))},null,40,Pg),u[29]||(u[29]=i("div",{class:"toggle-copy"},[i("span",{class:"toggle-title"},"Insights"),i("span",{class:"toggle-desc"},"Surface highlights for the active range.")],-1))]),i("label",Lg,[i("input",{type:"checkbox",checked:m(a).ui.showDailyStacks,onChange:u[10]||(u[10]=K=>s("set-ui-toggle",{key:"showDailyStacks",value:K.target.checked}))},null,40,Og),u[30]||(u[30]=i("div",{class:"toggle-copy"},[i("span",{class:"toggle-title"},"Daily mix (experimental)"),i("span",{class:"toggle-desc"},"Add stacked category share for each day.")],-1))]),i("label",Fg,[i("input",{type:"checkbox",checked:m(a).dayparts.enabled,onChange:u[11]||(u[11]=K=>s("set-ui-toggle",{key:"dayparts",value:K.target.checked}))},null,40,Hg),u[31]||(u[31]=i("div",{class:"toggle-copy"},[i("span",{class:"toggle-title"},"Dayparts"),i("span",{class:"toggle-desc"},"Break down time into morning / afternoon / evening bands.")],-1))]),i("label",Bg,[i("input",{type:"checkbox",checked:m(a).ui.showNotes,onChange:u[12]||(u[12]=K=>s("set-ui-toggle",{key:"showNotes",value:K.target.checked}))},null,40,Rg),u[32]||(u[32]=i("div",{class:"toggle-copy"},[i("span",{class:"toggle-title"},"Notes snippet"),i("span",{class:"toggle-desc"},"Pin the current note beneath the Balance summary.")],-1))])]),i("div",Wg,[i("label",jg,[u[33]||(u[33]=i("span",{class:"label"},"Percent precision",-1)),i("select",{value:m(a).ui.roundPercent,"aria-invalid":!!m(l).roundPercent,onChange:u[13]||(u[13]=K=>s("set-ui-precision",{key:"roundPercent",value:K.target.value}))},[(S(!0),A(de,null,De(m(c),K=>(S(),A("option",{key:`round-percent-${K}`,value:K},P(K),9,zg))),128))],40,Ug),m(l).roundPercent?(S(),A("div",{key:0,class:ke(["input-message",(X=m(l).roundPercent)==null?void 0:X.tone])},P((B=m(l).roundPercent)==null?void 0:B.text),3)):se("",!0)]),i("label",Vg,[u[34]||(u[34]=i("span",{class:"label"},"Ratio precision",-1)),i("select",{value:m(a).ui.roundRatio,"aria-invalid":!!m(l).roundRatio,onChange:u[14]||(u[14]=K=>s("set-ui-precision",{key:"roundRatio",value:K.target.value}))},[(S(!0),A(de,null,De(m(c),K=>(S(),A("option",{key:`round-ratio-${K}`,value:K},P(K),9,qg))),128))],40,Kg),m(l).roundRatio?(S(),A("div",{key:0,class:ke(["input-message",(C=m(l).roundRatio)==null?void 0:C.tone])},P((q=m(l).roundRatio)==null?void 0:q.text),3)):se("",!0)])])])])}}}),Jg={class:"notes-section"},Yg=["title"],Zg=["value"],Xg=["title"],Qg=["value"],eh={class:"notes-actions"},th=xt(He({__name:"NotesPanel",props:{previous:{},modelValue:{},prevLabel:{},currLabel:{},prevTitle:{},currTitle:{},saving:{type:Boolean}},emits:["update:modelValue","save"],setup(e){return(t,n)=>(S(),A("div",Jg,[i("div",{class:"hint",title:t.prevTitle},P(t.prevLabel),9,Yg),i("textarea",{value:t.previous,readonly:"",rows:"5",class:"notes-textarea","aria-label":"Previous notes"},null,8,Zg),i("div",{class:"hint",title:t.currTitle},P(t.currLabel),9,Xg),i("textarea",{value:t.modelValue,onInput:n[0]||(n[0]=s=>t.$emit("update:modelValue",s.target.value)),rows:"5",class:"notes-textarea notes-textarea--editable",placeholder:"Write your notes","aria-label":"Current notes"},null,40,Qg),i("div",eh,[we(m(Ze),{type:"tertiary",disabled:t.saving,onClick:n[1]||(n[1]=s=>t.$emit("save"))},{default:Fe(()=>[...n[2]||(n[2]=[Ce("Save",-1)])]),_:1},8,["disabled"])])]))}}),[["__scopeId","data-v-f84bfd89"]]),nh={id:"opsdash-sidebar-pane-notes",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-notes"},sh={class:"notes-config"},ah={class:"notes-toggle"},oh=["checked"],rh=xt(He({__name:"SidebarNotesPane",props:{previous:{},modelValue:{},prevLabel:{},currLabel:{},prevTitle:{},currTitle:{},saving:{type:Boolean},showNotesInBalance:{type:Boolean}},emits:["update:modelValue","save","toggle-balance-note"],setup(e,{emit:t}){const n=e,s=t,{previous:a,modelValue:o,prevLabel:r,currLabel:l,prevTitle:c,currTitle:p,saving:f,showNotesInBalance:d}=n;return(g,u)=>(S(),A("div",nh,[u[4]||(u[4]=i("div",{class:"sb-title"},"Notes",-1)),u[5]||(u[5]=i("p",{class:"sb-description"}," Keep quick context for the active week or month. Notes save with each range so you can revisit highlights later. ",-1)),i("div",sh,[i("label",ah,[i("input",{type:"checkbox",checked:m(d),onChange:u[0]||(u[0]=b=>s("toggle-balance-note",b.target.checked))},null,40,oh),u[3]||(u[3]=i("span",null,"Show this note on the Balance card",-1))])]),we(th,{previous:m(a),"model-value":m(o),"prev-label":m(r),"curr-label":m(l),"prev-title":m(c),"curr-title":m(p),saving:m(f),"onUpdate:modelValue":u[1]||(u[1]=b=>s("update:modelValue",b)),onSave:u[2]||(u[2]=b=>s("save"))},null,8,["previous","model-value","prev-label","curr-label","prev-title","curr-title","saving"])]))}}),[["__scopeId","data-v-cf80ad6c"]]),ih={id:"opsdash-sidebar-pane-config",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-config"},lh={class:"theme-section"},ch={class:"theme-header"},uh={class:"theme-hint"},dh={class:"theme-options",role:"radiogroup","aria-label":"Theme preference"},fh={class:"theme-option"},ph=["checked"],gh={class:"theme-copy"},hh={class:"theme-option__desc"},mh={class:"theme-option"},vh=["checked"],bh={class:"theme-option"},yh=["checked"],wh={class:"setup-actions"},_h={class:"preset-form"},xh=["disabled"],kh={key:0,class:"preset-error"},Ch={key:0,class:"preset-warnings"},Sh={class:"preset-header"},$h={key:1,class:"preset-empty"},Th={key:2,class:"preset-list"},Mh={class:"preset-meta"},Ah={class:"preset-name"},Eh={class:"preset-info"},Dh={key:0},Nh={class:"preset-actions"},Ih=xt(He({__name:"SidebarConfigPane",props:{presets:{},isLoading:{type:Boolean},isSaving:{type:Boolean},isApplying:{type:Boolean},warnings:{},themePreference:{},effectiveTheme:{},systemTheme:{}},emits:["save","load","delete","refresh","clear-warnings","rerun-onboarding","set-theme-preference"],setup(e,{emit:t}){const n=e,{themePreference:s,effectiveTheme:a,systemTheme:o}=Pn(n),r=t,l=ie(""),c=ie(null),p=V(()=>o.value==="dark"?"dark":"light"),f=V(()=>a.value==="dark"?"Dark":"Light");function d(y){r("set-theme-preference",y)}function g(){const y=l.value.trim();if(!y){c.value="Enter a profile name";return}c.value=null,r("save",y),l.value=""}function u(y){r("load",y)}function b(y){window.confirm(`Delete profile "${y}"?`)&&r("delete",y)}function h(y){if(!y)return"";const k=new Date(y);if(Number.isNaN(k.getTime()))return y;const w=new Date().getTime()-k.getTime(),E=Math.round(w/6e4);if(E<1)return"just now";if(E<60)return`${E} min ago`;const F=Math.round(E/60);if(F<24)return`${F} h ago`;const X=Math.round(F/24);return X<7?`${X} d ago`:k.toLocaleDateString()}return At(()=>{r("refresh")}),(y,k)=>(S(),A("div",ih,[k[17]||(k[17]=i("div",{class:"sb-title"},"Configuration Profiles",-1)),k[18]||(k[18]=i("p",{class:"sb-description"}," Save and restore complete sidebar configurations (calendars, groups, targets, settings). ",-1)),i("div",lh,[i("div",ch,[k[7]||(k[7]=i("div",{class:"theme-title"},"Theme & appearance",-1)),i("div",uh,"Currently showing "+P(f.value),1)]),i("div",dh,[i("label",fh,[i("input",{type:"radio",name:"opsdash-theme-preference",value:"auto",checked:m(s)==="auto",onChange:k[0]||(k[0]=_=>d("auto"))},null,40,ph),i("div",gh,[k[8]||(k[8]=i("div",{class:"theme-option__title"},"Follow Nextcloud",-1)),i("div",hh,"Match account theme (currently "+P(p.value)+").",1)])]),i("label",mh,[i("input",{type:"radio",name:"opsdash-theme-preference",value:"light",checked:m(s)==="light",onChange:k[1]||(k[1]=_=>d("light"))},null,40,vh),k[9]||(k[9]=i("div",{class:"theme-copy"},[i("div",{class:"theme-option__title"},"Force light"),i("div",{class:"theme-option__desc"},"Use the light palette even when Nextcloud switches to dark.")],-1))]),i("label",bh,[i("input",{type:"radio",name:"opsdash-theme-preference",value:"dark",checked:m(s)==="dark",onChange:k[2]||(k[2]=_=>d("dark"))},null,40,yh),k[10]||(k[10]=i("div",{class:"theme-copy"},[i("div",{class:"theme-option__title"},"Force dark"),i("div",{class:"theme-option__desc"},"Keep Opsdash in dark mode, even if Nextcloud stays light.")],-1))])])]),i("div",wh,[we(m(Ze),{type:"primary",size:"small",class:"rerun-btn",title:"Open the onboarding setup again",onClick:k[3]||(k[3]=_=>r("rerun-onboarding"))},{default:Fe(()=>[...k[11]||(k[11]=[Ce(" Re-run onboarding ",-1)])]),_:1})]),i("div",_h,[k[12]||(k[12]=i("label",{class:"preset-label",for:"preset-name"},"Profile name",-1)),Fn(i("input",{id:"preset-name","onUpdate:modelValue":k[4]||(k[4]=_=>l.value=_),type:"text",placeholder:"e.g. Focus week",disabled:y.isSaving,onKeyup:Ia(g,["enter"])},null,40,xh),[[su,l.value]]),c.value?(S(),A("div",kh,P(c.value),1)):se("",!0),we(m(Ze),{class:"preset-save",type:"primary",disabled:y.isSaving||!l.value.trim(),onClick:g},{default:Fe(()=>[Ce(P(y.isSaving?"Saving":"Save current configuration"),1)]),_:1},8,["disabled"])]),y.warnings.length?(S(),A("div",Ch,[k[14]||(k[14]=i("div",{class:"warnings-title"},"Warnings",-1)),i("ul",null,[(S(!0),A(de,null,De(y.warnings,(_,w)=>(S(),A("li",{key:w},P(_),1))),128))]),we(m(Ze),{type:"tertiary",class:"preset-clear",onClick:k[5]||(k[5]=_=>r("clear-warnings"))},{default:Fe(()=>[...k[13]||(k[13]=[Ce(" Clear warnings ",-1)])]),_:1})])):se("",!0),i("div",Sh,[k[15]||(k[15]=i("h3",null,"Saved profiles",-1)),we(m(Ze),{type:"tertiary",disabled:y.isLoading,onClick:k[6]||(k[6]=_=>r("refresh"))},{default:Fe(()=>[Ce(P(y.isLoading?"Refreshing":"Refresh list"),1)]),_:1},8,["disabled"])]),!y.presets.length&&!y.isLoading?(S(),A("div",$h," No profiles yet. Save one above to get started. ")):(S(),A("ul",Th,[(S(!0),A(de,null,De(y.presets,_=>(S(),A("li",{key:_.name,class:"preset-item"},[i("div",Mh,[i("div",Ah,P(_.name),1),i("div",Eh,[i("span",null,P(_.selectedCount)+" calendars",1),i("span",null,P(_.calendarCount)+" groups",1),_.updatedAt?(S(),A("span",Dh,"Updated "+P(h(_.updatedAt)),1)):se("",!0)])]),i("div",Nh,[we(m(Ze),{type:"primary",disabled:y.isApplying,onClick:w=>u(_.name)},{default:Fe(()=>[Ce(P(y.isApplying?"Applying":"Load"),1)]),_:2},1032,["disabled","onClick"]),we(m(Ze),{type:"tertiary",disabled:y.isApplying,onClick:w=>b(_.name)},{default:Fe(()=>[...k[16]||(k[16]=[Ce(" Delete ",-1)])]),_:2},1032,["disabled","onClick"])])]))),128))]))]))}}),[["__scopeId","data-v-757fe817"]]);function Ph(e,t){const{allowEmpty:n=!1}=t;if(e===""||e===null||e===void 0)return n?{value:null}:{value:null,error:"Enter a number"};const s=Number(e);if(!Number.isFinite(s))return{value:null,error:"Enter a valid number"};let a=s,o;if(typeof t.min=="number"&&a<t.min&&(a=t.min,o=Wa(t)),typeof t.max=="number"&&a>t.max&&(a=t.max,o=Wa(t)),typeof t.step=="number"&&t.step>0){const l=Oh(a,t.step);l!==a&&(a=l,o=Wa(t))}const r=li(t);return typeof r=="number"&&(a=Number(a.toFixed(r))),{value:a,warning:o}}function Lh(e,t){const n=Ph(e,t),s=[];return n.error&&s.push({severity:"error",message:n.error}),n.warning&&s.push({severity:"warning",message:n.warning}),{value:n.value,issues:s}}function Oh(e,t){const n=li({step:t}),s=Math.round(e/t)*t;return typeof n=="number"?Number(s.toFixed(n)):s}function li(e){if(typeof e.decimals=="number")return e.decimals;if(typeof e.step=="number")return Fh(e.step)}function Fh(e){const t=e.toString();if(t.includes("e-")){const[,s]=t.split("e-");return Number(s)}const[,n=""]=t.split(".");return n.length}function Wa(e){const t=[];return typeof e.min=="number"&&typeof e.max=="number"?t.push(`Allowed range ${e.min}  ${e.max}`):typeof e.min=="number"?t.push(`Minimum ${e.min}`):typeof e.max=="number"&&t.push(`Maximum ${e.max}`),typeof e.step=="number"&&e.step>0&&t.push(`step ${e.step}`),`Adjusted to allowed value (${t.join(", ")})`}function Hh(e,t,n="Enter a valid number"){const s=Lh(e,t),a=s.issues.find(l=>l.severity==="error"),o=s.issues.find(l=>l.severity==="warning");let r=null;return a||s.value===null?r={text:(a==null?void 0:a.message)??n,tone:"error"}:o&&(r={text:o.message,tone:"warning"}),{ok:!a&&s.value!==null,value:s.value,message:r}}function Nt(e,t,n,s,a){const{ok:o,value:r,message:l}=Hh(e,t,a);return n(l),!o||r===null?!1:(s(r),!0)}const Bh={class:"rangebar",title:"Time range"},Rh={class:"range-actions"},Wh=["disabled"],jh=["aria-label"],Uh={class:"range-toggle"},zh={class:"range-nav"},Vh={class:"range-dates"},Kh={class:"sb-tabs sb-tabs--primary",role:"tablist","aria-label":"Sidebar sections"},qh=["aria-selected"],Gh=["aria-selected"],Jh=["aria-selected"],Yh={class:"sb-tabs sb-tabs--secondary",role:"tablist","aria-label":"Detail settings"},Zh=["aria-selected"],Xh=["aria-selected"],Qh=["aria-selected"],em={class:"sb-tabs sb-tabs--secondary",role:"tablist","aria-label":"Advanced configuration"},tm=["aria-selected"],nm=xt(He({__name:"Sidebar",props:{calendars:{},selected:{},groupsById:{},isLoading:{type:Boolean},range:{},offset:{},from:{},to:{},targetsWeek:{},targetsMonth:{},notesPrev:{},notesCurrDraft:{},notesLabelPrev:{},notesLabelCurr:{},notesLabelPrevTitle:{},notesLabelCurrTitle:{},isSavingNote:{type:Boolean},targetsConfig:{},activeDayMode:{},navToggleLabel:{},navToggleIcon:{},presets:{},presetsLoading:{type:Boolean},presetSaving:{type:Boolean},presetApplying:{type:Boolean},presetWarnings:{},themePreference:{},effectiveTheme:{},systemTheme:{}},emits:["load","update:range","update:offset","select-all","toggle-calendar","set-group","set-target","update:notes","save-notes","update:targets-config","update:active-mode","toggle-nav","save-preset","load-preset","delete-preset","refresh-presets","clear-preset-warnings","rerun-onboarding","set-theme-preference"],setup(e,{emit:t}){const n=e,s=t,a=ie("calendars"),o=V(()=>n.targetsConfig),r=V(()=>{var M;return((M=o.value)==null?void 0:M.categories)??[]}),l=V(()=>n.presets??[]),c=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],p=V(()=>{const M=new Set,T=I=>{const fe=ts(I);fe&&M.add(fe)};return(n.calendars||[]).forEach(I=>T(I==null?void 0:I.color)),r.value.forEach(I=>T(I==null?void 0:I.color)),c.forEach(I=>M.add(I)),Array.from(M)});function f(M){const T=rt(JSON.parse(JSON.stringify(n.targetsConfig||{})));M(T),s("update:targets-config",T)}const d=V(()=>ye()!==null),g=V(()=>{var M;return((M=o.value)==null?void 0:M.timeSummary)??{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0}}),u=V(()=>{var M;return{..._n(),...((M=o.value)==null?void 0:M.activityCard)??{}}}),b={showWeekendShare:"Weekend share",showEveningShare:"Evening share",showEarliestLatest:"Earliest/Late times",showOverlaps:"Overlaps",showLongestSession:"Longest session",showLastDayOff:"Last day off",showHint:"Show mapping hint"},h=V(()=>Object.entries(b)),y=[{value:"off",label:"Do not project future days",description:"Keep charts empty until events occur."},{value:"total",label:"Distribute remaining total target",description:"Split leftover total target hours evenly across future days using current calendar mix."},{value:"calendar",label:"Respect calendar targets",description:"Use per-calendar targets for the current range and spread remaining hours across future days."},{value:"category",label:"Respect category targets",description:"Allocate remaining category targets across future days according to current mappings."}],k=V(()=>{var I;const M=La(),T=((I=o.value)==null?void 0:I.balance)??M;return{...M,...T,thresholds:{...M.thresholds,...T.thresholds??{}},relations:{...M.relations,...T.relations??{}},trend:{...M.trend,...T.trend??{}},dayparts:{...M.dayparts,...T.dayparts??{}},ui:{...M.ui,...T.ui??{}}}}),_=[0,1,2,3],w=Tt({activity:!1,balanceThresholds:!1,balanceTrend:!1,balanceDisplay:!1}),E=Tt({}),F=Tt({}),X=ie(null),B=ie(null),C=Tt({onTrack:null,atRisk:null}),q=Tt({noticeMaxShare:null,warnMaxShare:null,warnIndex:null}),K=ie(null),re=ie(null),J=ie(null),le=Tt({roundPercent:null,roundRatio:null});function ye(){const M=new Set;for(const T of r.value)(T.groupIds||[]).forEach(I=>M.add(Number(I)));Object.values(n.groupsById||{}).forEach(T=>M.add(Number(T)));for(let T=1;T<=9;T++)if(!M.has(T))return T;return null}function Q(){return`cat-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`}function he(M){const T=Ie(M),I=r.value.find(fe=>Array.isArray(fe.groupIds)&&fe.groupIds.includes(T));return I?I.id:""}function ce(M,T){if(!T){s("set-group",{id:M,n:0});return}const I=r.value.find(st=>st.id===T);if(!I){s("set-group",{id:M,n:0});return}const fe=pe(I.id);s("set-group",{id:M,n:fe})}function pe(M){const T=r.value.find(st=>st.id===M);if(!T)return 0;const I=Array.isArray(T.groupIds)&&T.groupIds.length?Number(T.groupIds[0]):null;if(I&&Number.isFinite(I))return I;const fe=ye()??0;return f(st=>{const ns=st.categories.find(zs=>zs.id===M);ns&&(ns.groupIds=fe?[fe]:[])}),fe}function Se(M,T){f(I=>{const fe=I.categories.find(st=>st.id===M);fe&&T(fe)})}function Ie(M){const T=Number((n.groupsById||{})[M]??0);return isFinite(T)?Math.max(0,Math.min(9,Math.trunc(T))):0}function ee(M){const T=n.range==="month"?n.targetsMonth||{}:n.targetsWeek||{},I=Number(T[M]??"");return isFinite(I)?I:""}function xe(M){s("select-all",M)}function be(M){s("toggle-calendar",M)}function ge(M){ce(M.id,M.category)}function Pe(M){L(M.id,M.value)}function Ae(M){ne(M.key,M.value)}function Me(M){Y(M.key,M.value)}function ue(M){M!=="off"&&M!=="total"&&M!=="calendar"&&M!=="category"||f(T=>{T.activityCard||(T.activityCard=_n()),T.activityCard.forecastMode=M})}function Ne(){w.activity=!w.activity}function Ke(M){if(M==="all"){const T=!(w.balanceThresholds&&w.balanceTrend&&w.balanceDisplay);w.balanceThresholds=T,w.balanceTrend=T,w.balanceDisplay=T;return}M==="thresholds"?w.balanceThresholds=!w.balanceThresholds:M==="trend"?w.balanceTrend=!w.balanceTrend:M==="display"&&(w.balanceDisplay=!w.balanceDisplay)}function Xe(M){N(M.key,M.value)}function v(M){if(M.key==="dayparts"){f(T=>{T.balance.dayparts.enabled=M.value});return}ze(M.key,M.value)}function $(M){Qe(M.key,M.value)}function L(M,T){Nt(T,{min:0,max:1e4,step:.25,decimals:2},I=>{E[M]=I},I=>s("set-target",{id:M,h:I}))}function U(M){Nt(M,{min:0,max:1e3,step:.5,decimals:2},T=>{X.value=T},T=>f(I=>{I.totalHours=T}))}function z(M){Nt(M,{min:0,max:24,step:.25,decimals:2},T=>{B.value=T},T=>f(I=>{I.allDayHours=T}),"024 hours per day")}function W(M,T){Nt(T,{min:0,max:1e3,step:.5,decimals:2},I=>{F[M]=I},I=>Se(M,fe=>{fe.targetHours=I}))}function G(M,T){Se(M,I=>{I.label=T.trim()||I.label})}function R(M,T){Se(M,I=>{I.includeWeekend=T})}function O(M,T){const I=ts(T);Se(M,fe=>{fe.color=I??null})}function H(M){n.activeDayMode!==M&&s("update:active-mode",M)}function ne(M,T){f(I=>{I.timeSummary||(I.timeSummary=JSON.parse(JSON.stringify(g.value))),I.timeSummary[M]=T})}function Y(M,T){f(I=>{I.activityCard||(I.activityCard=_n()),I.activityCard[M]=T})}function te(M,T){T!=="days_only"&&T!=="time_aware"||Se(M,I=>{I.paceMode=T})}function oe(M){f(T=>{T.pace.includeWeekendTotal=M})}function D(M){M!=="days_only"&&M!=="time_aware"||f(T=>{T.pace.mode=M})}function x(M,T){Nt(T,{min:-100,max:100,step:.1,decimals:1},I=>{C[M]=I},I=>f(fe=>{fe.pace.thresholds[M]=I}))}function N(M,T){Nt(T,{min:0,max:1,step:.01,decimals:2},I=>{q[M]=I},I=>f(fe=>{fe.balance.thresholds[M]=Number(I.toFixed(2))}))}function ae(M){const T=M==="factor"?"factor":"ratio";f(I=>{I.balance.relations.displayMode=T})}function me(M){Nt(M,{min:1,max:12,step:1,decimals:0},T=>{J.value=T},T=>f(I=>{I.balance.trend.lookbackWeeks=T}))}function ze(M,T){f(I=>{I.balance.ui[M]=T})}function Qe(M,T){Nt(T,{min:0,max:3,step:1,decimals:0},I=>{le[M]=I},I=>f(fe=>{fe.balance.ui[M]=I}))}function kt(M){const T=M==="momentum"?"momentum":"linear";f(I=>{I.forecast.methodPrimary=T})}function Cn(M){Nt(M,{min:1,max:14,step:1,decimals:0},T=>{K.value=T},T=>f(I=>{I.forecast.momentumLastNDays=T}))}function Le(M){Nt(M,{min:0,max:100,step:.1,decimals:1},T=>{re.value=T},T=>f(I=>{I.forecast.padding=T}))}function it(M,T){f(I=>{I.ui[M]=T})}function Sn(M){f(T=>{T.includeZeroDaysInStats=M})}function $n(){var T;const M=ye();if(M===null){(T=window.alert)==null||T.call(window,"All category slots are currently in use (max 9).");return}f(I=>{const fe=Ja(I.categories);I.categories=[...I.categories,{id:Q(),label:`Category ${I.categories.length+1}`,targetHours:0,includeWeekend:!0,paceMode:"days_only",color:fe,groupIds:[M]}]})}function Ga(M){if(r.value.length<=1)return;const T=r.value.find(fe=>fe.id===M);if(!T)return;const I=Array.isArray(T.groupIds)&&T.groupIds.length?Number(T.groupIds[0]):null;f(fe=>{fe.categories=fe.categories.filter(st=>st.id!==M)}),I!==null&&Object.entries(n.groupsById||{}).forEach(([fe,st])=>{Number(st)===I&&s("set-group",{id:fe,n:0})})}function ts(M){if(typeof M!="string")return null;const T=M.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(T))return null;if(T.length===4){const[,I,fe,st]=T;return`#${I}${I}${fe}${fe}${st}${st}`.toUpperCase()}return T.toUpperCase()}function Ja(M){const T=new Set;M.forEach(I=>{const fe=ts((I==null?void 0:I.color)??null);fe&&T.add(fe)});for(const I of c)if(!T.has(I))return I;return c[0]??null}return(M,T)=>(S(),We(m(pu),null,{default:Fe(()=>[jl(M.$slots,"actions",{},void 0,!0),T[34]||(T[34]=i("div",{class:"sb-title",title:"Kalender filtern und gruppieren"},"Filter Calendars",-1)),i("div",Bh,[i("div",Rh,[i("button",{class:"sidebar-action-btn",type:"button",disabled:M.isLoading,onClick:T[0]||(T[0]=I=>M.$emit("load"))}," Refresh ",8,Wh),i("button",{class:"sidebar-action-btn sidebar-action-btn--icon",type:"button",onClick:T[1]||(T[1]=I=>M.$emit("toggle-nav")),"aria-label":M.navToggleLabel},P(M.navToggleIcon),9,jh)]),i("div",Uh,[we(m(Fs),{type:"radio",name:"range-week",checked:M.range==="week","onUpdate:checked":T[2]||(T[2]=I=>{I&&M.$emit("update:range","week")})},{default:Fe(()=>[...T[30]||(T[30]=[Ce("Week",-1)])]),_:1},8,["checked"]),we(m(Fs),{type:"radio",name:"range-month",checked:M.range==="month","onUpdate:checked":T[3]||(T[3]=I=>{I&&M.$emit("update:range","month")})},{default:Fe(()=>[...T[31]||(T[31]=[Ce("Month",-1)])]),_:1},8,["checked"])]),i("div",zh,[we(m(Ze),{class:"nav-btn",type:"tertiary",disabled:M.isLoading,onClick:T[4]||(T[4]=I=>M.$emit("update:offset",M.offset-1)),title:"Previous"},{default:Fe(()=>[...T[32]||(T[32]=[Ce("",-1)])]),_:1},8,["disabled"]),i("span",Vh,P(M.from)+"  "+P(M.to),1),we(m(Ze),{class:"nav-btn",type:"tertiary",disabled:M.isLoading,onClick:T[5]||(T[5]=I=>M.$emit("update:offset",M.offset+1)),title:"Next"},{default:Fe(()=>[...T[33]||(T[33]=[Ce("",-1)])]),_:1},8,["disabled"])])]),i("div",Kh,[i("button",{id:"opsdash-sidebar-tab-calendars",type:"button",class:ke(["sb-tab",{active:a.value==="calendars"}]),role:"tab","aria-selected":a.value==="calendars","aria-controls":"opsdash-sidebar-pane-calendars",onClick:T[6]||(T[6]=I=>a.value="calendars")}," Calendars ",10,qh),i("button",{id:"opsdash-sidebar-tab-targets",type:"button",class:ke(["sb-tab",{active:a.value==="targets"}]),role:"tab","aria-selected":a.value==="targets","aria-controls":"opsdash-sidebar-pane-targets",onClick:T[7]||(T[7]=I=>a.value="targets")}," Targets ",10,Gh),i("button",{id:"opsdash-sidebar-tab-summary",type:"button",class:ke(["sb-tab",{active:a.value==="summary"}]),role:"tab","aria-selected":a.value==="summary","aria-controls":"opsdash-sidebar-pane-summary",onClick:T[8]||(T[8]=I=>a.value="summary")}," Summary ",10,Jh)]),i("div",Yh,[i("button",{id:"opsdash-sidebar-tab-activity",type:"button",class:ke(["sb-tab",{active:a.value==="activity"}]),role:"tab","aria-selected":a.value==="activity","aria-controls":"opsdash-sidebar-pane-activity",onClick:T[9]||(T[9]=I=>a.value="activity")}," Activity & Schedule ",10,Zh),i("button",{id:"opsdash-sidebar-tab-balance",type:"button",class:ke(["sb-tab",{active:a.value==="balance"}]),role:"tab","aria-selected":a.value==="balance","aria-controls":"opsdash-sidebar-pane-balance",onClick:T[10]||(T[10]=I=>a.value="balance")}," Balance ",10,Xh),i("button",{id:"opsdash-sidebar-tab-notes",type:"button",class:ke(["sb-tab",{active:a.value==="notes"}]),role:"tab","aria-selected":a.value==="notes","aria-controls":"opsdash-sidebar-pane-notes",onClick:T[11]||(T[11]=I=>a.value="notes")}," Notes ",10,Qh)]),i("div",em,[i("button",{id:"opsdash-sidebar-tab-config",type:"button",class:ke(["sb-tab",{active:a.value==="config"}]),role:"tab","aria-selected":a.value==="config","aria-controls":"opsdash-sidebar-pane-config",onClick:T[12]||(T[12]=I=>a.value="config")}," Config & Setup ",10,tm)]),a.value==="calendars"?(S(),We(Of,{key:0,calendars:M.calendars,selected:M.selected,range:M.range,"is-loading":M.isLoading,"category-options":r.value,"calendar-target-messages":E,"calendar-category-id":he,"get-target":ee,onSelectAll:xe,onToggleCalendar:be,onSetCategory:ge,onTargetInput:Pe},null,8,["calendars","selected","range","is-loading","category-options","calendar-target-messages"])):a.value==="targets"?(S(),We(Bp,{key:1,targets:o.value,"category-options":r.value,"total-target-message":X.value,"all-day-hours-message":B.value,"category-target-messages":F,"pace-threshold-messages":C,"forecast-momentum-message":K.value,"forecast-padding-message":re.value,"can-add-category":d.value,"color-palette":p.value,onTotalTargetInput:U,onSetAllDayHours:z,onSetCategoryLabel:T[13]||(T[13]=({id:I,label:fe})=>G(I,fe)),onRemoveCategory:Ga,onSetCategoryTarget:T[14]||(T[14]=({id:I,value:fe})=>W(I,fe)),onSetCategoryPace:T[15]||(T[15]=({id:I,mode:fe})=>te(I,fe)),onSetCategoryWeekend:T[16]||(T[16]=({id:I,value:fe})=>R(I,fe)),onSetCategoryColor:T[17]||(T[17]=({id:I,color:fe})=>O(I,fe)),onAddCategory:$n,onSetIncludeWeekendTotal:oe,onSetPaceMode:D,onSetThreshold:T[18]||(T[18]=({key:I,value:fe})=>x(I,fe)),onSetForecastMethod:kt,onSetForecastMomentum:Cn,onSetForecastPadding:Le,onSetUiOption:T[19]||(T[19]=({key:I,value:fe})=>it(I,fe)),onSetIncludeZeroDays:Sn},null,8,["targets","category-options","total-target-message","all-day-hours-message","category-target-messages","pace-threshold-messages","forecast-momentum-message","forecast-padding-message","can-add-category","color-palette"])):a.value==="summary"?(S(),We(Kp,{key:2,"summary-options":g.value,"active-day-mode":M.activeDayMode,"onUpdate:activeMode":H,onToggleOption:Ae},null,8,["summary-options","active-day-mode"])):a.value==="config"?(S(),We(Ih,{key:3,presets:l.value,"is-loading":n.presetsLoading,"is-saving":n.presetSaving,"is-applying":n.presetApplying,warnings:n.presetWarnings,"theme-preference":n.themePreference,"effective-theme":n.effectiveTheme,"system-theme":n.systemTheme,onSave:T[20]||(T[20]=I=>s("save-preset",I)),onLoad:T[21]||(T[21]=I=>s("load-preset",I)),onDelete:T[22]||(T[22]=I=>s("delete-preset",I)),onRefresh:T[23]||(T[23]=()=>s("refresh-presets")),onClearWarnings:T[24]||(T[24]=()=>s("clear-preset-warnings")),onRerunOnboarding:T[25]||(T[25]=()=>s("rerun-onboarding")),onSetThemePreference:T[26]||(T[26]=I=>s("set-theme-preference",I))},null,8,["presets","is-loading","is-saving","is-applying","warnings","theme-preference","effective-theme","system-theme"])):a.value==="activity"?(S(),We(ag,{key:4,"activity-settings":u.value,"activity-toggles":h.value,"forecast-mode":u.value.forecastMode,"forecast-options":y,"help-open":w.activity,onToggleHelp:Ne,onToggleOption:Me,onUpdateForecastMode:ue},null,8,["activity-settings","activity-toggles","forecast-mode","help-open"])):a.value==="balance"?(S(),We(Gg,{key:5,"balance-settings":k.value,"balance-threshold-messages":q,"balance-lookback-message":J.value,"balance-ui-precision-messages":le,"rounding-options":_,"help-thresholds":w.balanceThresholds,"help-trend":w.balanceTrend,"help-display":w.balanceDisplay,onToggleHelp:Ke,onSetThreshold:Xe,onSetRelation:ae,onSetLookback:me,onSetUiToggle:v,onSetUiPrecision:$},null,8,["balance-settings","balance-threshold-messages","balance-lookback-message","balance-ui-precision-messages","help-thresholds","help-trend","help-display"])):a.value==="notes"?(S(),We(rh,{key:6,previous:M.notesPrev,"model-value":M.notesCurrDraft,"prev-label":M.notesLabelPrev,"curr-label":M.notesLabelCurr,"prev-title":M.notesLabelPrevTitle,"curr-title":M.notesLabelCurrTitle,saving:M.isSavingNote,"show-notes-in-balance":k.value.ui.showNotes,"onUpdate:modelValue":T[27]||(T[27]=I=>M.$emit("update:notes",I)),onSave:T[28]||(T[28]=I=>M.$emit("save-notes")),onToggleBalanceNote:T[29]||(T[29]=I=>ze("showNotes",I))},null,8,["previous","model-value","prev-label","curr-label","prev-title","curr-title","saving","show-notes-in-balance"])):se("",!0)]),_:3}))}}),[["__scopeId","data-v-20b385e6"]]),Bs=1,sm=[{id:"total_only",title:"Focused",subtitle:"Keep it simple with one total goal",highlights:["Single weekly/monthly target","Great for personal overview","Upgradable later"],layers:{total:!0,categories:!1,calendars:!1},recommendedFor:"Individuals tracking a single workload"},{id:"total_plus_categories",title:"Balanced",subtitle:"Track balance across a few life areas",highlights:["Total goal plus key categories","Automatic category summaries","Calendar grouping suggestions"],layers:{total:!0,categories:!0,calendars:!1},recommendedFor:"Work/life blend with a handful of focus areas"},{id:"full_granular",title:"Power",subtitle:"Targets per category and calendar",highlights:["Detailed per-calendar goals","Category dashboards & pacing","Best for multi-project oversight"],layers:{total:!0,categories:!0,calendars:!0},recommendedFor:"Power users managing several project calendars"}],am={work:["work","focus","deep","project"],personal:["personal","home","family","life"],recovery:["recovery","wellness","rest","health"],hobby:["hobby","learn","study","growth"],sport:["sport","fitness","gym","run","ride"]},Xt=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1"];function om(e,t,n,s){const a=e.toLowerCase();for(const o of t)if((n[o]||[]).some(l=>a.includes(l)))return o;return t[s%t.length]}function rm(e){const t={};return Object.entries(e).forEach(([n,s])=>{t[n]=Number((s*4).toFixed(2))}),t}function Zn(e){if(typeof e!="string")return null;const t=e.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t))return null;if(t.length===4){const[,n,s,a]=t;return`#${n}${n}${s}${s}${a}${a}`.toUpperCase()}return t.toUpperCase()}function im(e){const t=new Set,n=[];return e.forEach((s,a)=>{const o=((s==null?void 0:s.id)||`cat_${a}`).trim()||`cat_${a}`;t.has(o)||(t.add(o),n.push({id:o,label:((s==null?void 0:s.label)||o).trim()||`Category ${a+1}`,targetHours:Number.isFinite(s==null?void 0:s.targetHours)?Number(s.targetHours):0,includeWeekend:!!(s!=null&&s.includeWeekend),paceMode:(s==null?void 0:s.paceMode)==="time_aware"?"time_aware":"days_only",color:Zn(s==null?void 0:s.color)??null}))}),n}function lm(e,t,n){const s={};if(!t.length)return s;const a=new Set(t.map(r=>r.id)),o=t[0].id;return e.forEach(r=>{const l=n[r];s[r]=a.has(l)?l:o}),s}function cm(){return sm}function ci(e,t,n){const s=n.length?[...new Set(n.filter(p=>t.some(f=>f.id===p)))]:t.map(p=>p.id);if(e==="total_only")return{categories:[],assignments:{}};const a=e==="total_plus_categories"?["work","personal","recovery"]:["work","hobby","sport"],o=e==="total_plus_categories"?[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,color:Xt[0]},{id:"personal",label:"Personal",targetHours:8,includeWeekend:!0,color:Xt[1]},{id:"recovery",label:"Recovery",targetHours:4,includeWeekend:!0,color:Xt[2]}]:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,color:Xt[0]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,color:Xt[1]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,color:Xt[2]}],r={};let l=0;return t.filter(p=>s.includes(p.id)).forEach(p=>{r[p.id]=om(p.displayname,a,am,l),l+=1}),{categories:o.map(p=>({id:p.id,label:p.label,targetHours:p.targetHours,includeWeekend:p.includeWeekend,paceMode:"days_only",color:Zn(p.color)??null})),assignments:r}}function ui(e,t,n,s){var y;const a=n.length?[...new Set(n.filter(k=>t.some(_=>_.id===k)))]:t.map(k=>k.id),o=rt(xn()),r={},l={};if(e==="total_only"){const k=Yn(o);return k.totalHours=k.totalHours||40,k.categories=[],k.ui.showCategoryBlocks=!1,k.ui.showCategoryCharts=!1,k.ui.showCalendarCharts=!1,{selected:a,targetsConfig:rt(k),groups:r,targetsWeek:l,targetsMonth:{}}}const c=ci(e,t,a),p=im((y=s==null?void 0:s.categories)!=null&&y.length?s.categories:c.categories),f=lm(a,p.length?p:c.categories,(s==null?void 0:s.assignments)??c.assignments),d=Yn(o),g=new Map;let u=0;const b=k=>{const _=Zn(k.color);if(_)return _;const w=t.find(F=>f[F.id]===k.id&&Zn(F.color));if(w)return Zn(w.color)??null;const E=Xt[u%Xt.length];return u+=1,E??null};d.categories=p.map((k,_)=>{const w=_+1;return g.set(k.id,w),{id:k.id,label:k.label,targetHours:Number(k.targetHours.toFixed(2)),includeWeekend:k.includeWeekend,paceMode:k.paceMode,color:b(k),groupIds:[w]}}),d.totalHours=d.categories.reduce((k,_)=>k+_.targetHours,0),d.totalHours<=0&&(d.totalHours=40),d.ui.showCategoryBlocks=d.categories.length>0,d.ui.showCategoryCharts=d.categories.length>0,d.ui.showCalendarCharts=e==="full_granular",d.includeZeroDaysInStats=!1,d.balance.categories=d.categories.map(k=>k.id),d.balance.useCategoryMapping=!0;const h={};return Object.values(f).forEach(k=>{h[k]=(h[k]??0)+1}),Object.entries(f).forEach(([k,_])=>{const w=g.get(_);if(w&&(r[k]=w,e==="full_granular")){const E=d.categories.find(B=>B.id===_);if(!E)return;const F=h[_]||1,X=Number((E.targetHours/F).toFixed(2));l[k]=X}}),{selected:a,targetsConfig:rt(d),groups:r,targetsWeek:l,targetsMonth:rm(l)}}const um={key:0,class:"onboarding-overlay",role:"dialog","aria-modal":"true"},dm={class:"onboarding-header"},fm={class:"onboarding-title"},pm={class:"subtitle"},gm={class:"onboarding-actions"},hm=["disabled"],mm=["disabled"],vm={class:"onboarding-body"},bm={key:0,class:"onboarding-step"},ym={key:0,class:"config-warning"},wm={key:1,class:"onboarding-step"},_m={class:"preferences-grid"},xm={class:"pref-card"},km={class:"theme-options",role:"radiogroup","aria-label":"Theme preference"},Cm={class:"theme-option"},Sm=["checked"],$m={class:"theme-copy"},Tm={class:"theme-option__desc"},Mm={class:"theme-option"},Am=["checked"],Em={class:"theme-option"},Dm=["checked"],Nm={class:"theme-preview"},Im={class:"pref-card"},Pm={class:"field"},Lm=["value","disabled"],Om={key:0,class:"pref-hint"},Fm={class:"pref-card"},Hm={class:"field"},Bm=["value"],Rm={key:2,class:"onboarding-step"},Wm={class:"strategy-grid"},jm=["onClick"],Um={class:"subtitle"},zm={key:3,class:"onboarding-step"},Vm={class:"calendar-list"},Km=["value","checked","onChange"],qm={key:0,class:"warning"},Gm={key:4,class:"onboarding-step"},Jm={key:0,class:"hint"},Ym={class:"categories-editor"},Zm={class:"category-card__header"},Xm=["value","onInput"],Qm={class:"category-actions"},ev=["disabled","onClick"],tv={class:"category-card__fields"},nv={class:"field"},sv=["value","onInput"],av={class:"field checkbox"},ov=["checked","onChange"],rv={class:"field color-field"},iv=["aria-expanded","aria-label","onClick"],lv=["id"],cv={class:"swatch-grid",role:"group","aria-label":"Preset colours"},uv=["aria-label","onClick"],dv={class:"custom-color"},fv=["value","onInput"],pv={class:"category-total"},gv={key:0,class:"calendar-assignments"},hv={class:"cal-name"},mv=["value","onChange"],vv=["value"],bv={key:1,class:"hint"},yv={key:5,class:"onboarding-step"},wv={class:"review-grid"},_v={class:"hint"},xv={key:1},kv={class:"onboarding-footer"},di="opsdash-onboarding-lock",Cv=xt(He({__name:"OnboardingWizard",props:{visible:{type:Boolean},calendars:{},initialSelection:{},initialStrategy:{},onboardingVersion:{},saving:{type:Boolean},closable:{type:Boolean},initialThemePreference:{},systemTheme:{},initialAllDayHours:{},initialTotalHours:{},hasExistingConfig:{type:Boolean}},emits:["close","skip","complete","save-current-config"],setup(e,{emit:t}){const n=e,s=t,a=["intro","strategy","calendars","categories","preferences","review"],o=ie(0),r=ie("total_only"),l=ie([]),c=ie([]),p=ie({}),f=ie("auto"),d=ie(8),g=ie(null),u=V(()=>f.value==="auto"?n.systemTheme==="dark"?"dark":"light":f.value),b=V(()=>n.systemTheme==="dark"?"dark":"light"),h=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],y=V(()=>{const D=new Set,x=N=>{const ae=ge(N);ae&&D.add(ae)};return n.calendars.forEach(N=>x(N.color)),c.value.forEach(N=>x(N.color)),h.forEach(N=>D.add(N)),Array.from(D)}),k=cm(),_=V(()=>k.find(D=>D.id===r.value)??k[0]),w=V(()=>_.value.layers.categories),E=V(()=>n.closable!==!1),F=V(()=>a.filter(D=>D==="categories"?w.value:!0)),X=V(()=>F.value[Math.min(o.value,F.value.length-1)]),B=V(()=>o.value+1),C=V(()=>F.value.length),q=V(()=>n.saving===!0);function K(D){if(typeof document>"u")return;const x=document.body;x&&(D?(x.classList.add(di),x.dataset.opsdashOnboarding="1"):(x.classList.remove(di),delete x.dataset.opsdashOnboarding))}Ue(()=>n.visible,D=>{D&&(re(),xe()),K(D)},{immediate:!0}),At(()=>{typeof document<"u"&&document.addEventListener("click",be)}),ma(()=>{typeof document<"u"&&document.removeEventListener("click",be),K(!1)});function re(){var x;o.value=0,r.value=n.initialStrategy??"total_only";const D=(x=n.initialSelection)!=null&&x.length?[...n.initialSelection]:n.calendars.map(N=>N.id);l.value=Array.from(new Set(D.filter(N=>n.calendars.some(ae=>ae.id===N)))),f.value=n.initialThemePreference??"auto",d.value=ue(n.initialAllDayHours??8),g.value=Ne(n.initialTotalHours??null),J(),w.value?g.value=Ne($.value):g.value===null&&(g.value=40)}function J(){const D=ci(r.value,n.calendars,l.value);c.value=D.categories.map(x=>({...x})),p.value={...D.assignments},le(),ye()}function le(){if(!w.value||!c.value.length){p.value={};return}const D=new Set(c.value.map(ae=>ae.id)),x=c.value[0].id,N={};l.value.forEach(ae=>{const me=p.value[ae];N[ae]=D.has(me)?me:x}),p.value=N}function ye(){if(w.value)g.value=Ne($.value);else{const D=Ne(n.initialTotalHours??g.value??40);g.value=D??40}}Ue(r,()=>{J(),o.value=Math.min(o.value,F.value.length-1)}),Ue(F,D=>{o.value>=D.length&&(o.value=Math.max(D.length-1,0))}),Ue(w,()=>{ye()}),Ue($,D=>{w.value&&(g.value=Ne(D))}),Ue(X,D=>{D!=="categories"&&xe()}),Ue(()=>n.visible,D=>{D||xe()}),Ue(l,()=>{le()},{deep:!0}),Ue(c,()=>{le()},{deep:!0});function Q(){const D=`cat_${Date.now().toString(36)}_${c.value.length}`;c.value=[...c.value,{id:D,label:`Category ${c.value.length+1}`,targetHours:8,includeWeekend:!1,paceMode:"days_only"}],le()}function he(D){c.value.length<=1||(c.value=c.value.filter(x=>x.id!==D),le())}function ce(D,x){c.value=c.value.map(N=>N.id===D?{...N,label:x}:N)}function pe(D,x){const N=Number(x),ae=Number.isFinite(N)?Math.max(0,Math.min(1e3,N)):void 0;c.value=c.value.map(me=>me.id===D?{...me,targetHours:ae??me.targetHours}:me)}function Se(D,x){c.value=c.value.map(N=>N.id===D?{...N,includeWeekend:x}:N)}function Ie(D,x){p.value={...p.value,[D]:x}}function ee(D){if(openColorId.value===D){xe();return}openColorId.value=D,nn(()=>{const x=document.getElementById(`onboarding-color-popover-${D}`);x==null||x.focus()})}function xe(){openColorId.value=null}function be(D){const x=D.target;x!=null&&x.closest("[data-color-popover]")||xe()}function ge(D){if(typeof D!="string")return null;const x=D.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(x))return null;if(x.length===4){const[,N,ae,me]=x;return`#${N}${N}${ae}${ae}${me}${me}`.toUpperCase()}return x.toUpperCase()}function Pe(D){return ge(D==null?void 0:D.color)??defaultColor.value}function Ae(D,x){const N=ge(x);Ke(D,N??defaultColor.value)}function Me(D,x){const N=ge(x);Ke(D,N??defaultColor.value),xe()}function ue(D){if(!Number.isFinite(D))return 8;const x=Math.max(0,Math.min(24,D));return Math.round(x*100)/100}function Ne(D){if(!Number.isFinite(D))return null;const x=Math.max(0,Math.min(1e3,Number(D)));return Math.round(x*100)/100}function Ke(D,x){c.value=c.value.map(N=>N.id===D?{...N,color:x}:N)}function Xe(D){if(w.value)return;const x=Number(D.value);if(!Number.isFinite(x)){g.value=null;return}g.value=Ne(x)}function v(D){const x=Number(D.value);d.value=ue(Number.isFinite(x)?x:d.value)}const $=V(()=>c.value.reduce((D,x)=>D+(Number.isFinite(x.targetHours)?x.targetHours:0),0)),L=V(()=>n.calendars.filter(D=>l.value.includes(D.id))),U=V(()=>ui(r.value,n.calendars,l.value,w.value?{categories:c.value,assignments:p.value}:void 0)),z=V(()=>_.value.title),W=V(()=>o.value>0),G=V(()=>o.value<F.value.length-1),R=V(()=>{if(X.value==="strategy")return!r.value;if(X.value==="calendars")return l.value.length===0;if(X.value==="categories"&&w.value){if(!l.value.length||!c.value.length)return!0;const D=new Set(c.value.map(x=>x.id));if(l.value.some(x=>!D.has(p.value[x])))return!0}return X.value==="preferences"&&(!w.value&&(g.value===null||g.value<0)||d.value<0||d.value>24)});function O(){G.value&&!R.value&&(o.value+=1)}function H(){W.value&&(o.value-=1)}function ne(){s("skip")}function Y(){E.value&&s("close")}function te(){const D=ui(r.value,n.calendars,l.value,w.value?{categories:c.value.map(N=>({...N})),assignments:{...p.value}}:void 0),x={...D.targetsConfig};if(x.allDayHours=ue(d.value),w.value){const N=Ne($.value);N!=null&&(x.totalHours=N)}else if(g.value!=null){const N=Ne(g.value);N!=null&&(x.totalHours=N)}D.targetsConfig=x,s("complete",{strategy:r.value,selected:D.selected,targetsConfig:D.targetsConfig,groups:D.groups,targetsWeek:D.targetsWeek,targetsMonth:D.targetsMonth,themePreference:f.value})}function oe(D,x){x.checked?l.value.includes(D)||(l.value=[...l.value,D]):l.value=l.value.filter(ae=>ae!==D)}return(D,x)=>(S(),We(Fc,{name:"onboarding-fade"},{default:Fe(()=>[D.visible?(S(),A("div",um,[i("div",{class:"onboarding-backdrop",onClick:Y}),i("div",{class:"onboarding-panel",onClick:x[8]||(x[8]=Wt(()=>{},["stop"]))},[i("header",dm,[i("div",fm,[x[9]||(x[9]=i("h2",null,"Welcome to Opsdash",-1)),i("p",pm,"Step "+P(B.value)+" of "+P(C.value),1)]),i("div",gm,[i("button",{type:"button",class:"skip-link",onClick:ne,disabled:q.value},"Maybe later",8,hm),E.value?(S(),A("button",{key:0,type:"button",class:"close-btn",disabled:q.value,onClick:Y,"aria-label":"Close onboarding"},"  ",8,mm)):se("",!0)])]),i("main",vm,[X.value==="intro"?(S(),A("section",bm,[x[12]||(x[12]=i("h3",null,"Opsdash visualises your calendar time and keeps goals on track.",-1)),x[13]||(x[13]=i("ul",{class:"highlights"},[i("li",null,"Targets  stay aligned with your weekly/monthly goals."),i("li",null,"Balance  ensure your focus areas get the right attention."),i("li",null,"Notes  capture insights and the story behind the numbers.")],-1)),n.hasExistingConfig?(S(),A("div",ym,[x[11]||(x[11]=i("p",null," You already have a dashboard configuration. Saving a preset now keeps a backup before onboarding applies new values. ",-1)),we(m(Ze),{type:"tertiary",size:"small",onClick:x[0]||(x[0]=N=>s("save-current-config"))},{default:Fe(()=>[...x[10]||(x[10]=[Ce("Save current setup as preset",-1)])]),_:1})])):se("",!0),x[14]||(x[14]=i("p",{class:"hint"},"You can change configuration later from the Sidebar.",-1))])):X.value==="preferences"?(S(),A("section",wm,[x[27]||(x[27]=i("h3",null,"Final tweaks",-1)),x[28]||(x[28]=i("p",{class:"hint"},"You can change these options later from Config & Setup.",-1)),i("div",_m,[i("article",xm,[x[18]||(x[18]=i("h4",null,"Theme & appearance",-1)),x[19]||(x[19]=i("p",{class:"pref-desc"},"Choose how Opsdash reacts to your Nextcloud theme. Charts keep their calendar colours.",-1)),i("div",km,[i("label",Cm,[i("input",{type:"radio",name:"onboarding-theme",value:"auto",checked:f.value==="auto",onChange:x[1]||(x[1]=N=>f.value="auto")},null,40,Sm),i("div",$m,[x[15]||(x[15]=i("div",{class:"theme-option__title"},"Follow Nextcloud",-1)),i("div",Tm,"Matches your account theme (currently "+P(b.value)+").",1)])]),i("label",Mm,[i("input",{type:"radio",name:"onboarding-theme",value:"light",checked:f.value==="light",onChange:x[2]||(x[2]=N=>f.value="light")},null,40,Am),x[16]||(x[16]=i("div",{class:"theme-copy"},[i("div",{class:"theme-option__title"},"Force light"),i("div",{class:"theme-option__desc"},"Always use the light palette, even if Nextcloud switches to dark.")],-1))]),i("label",Em,[i("input",{type:"radio",name:"onboarding-theme",value:"dark",checked:f.value==="dark",onChange:x[3]||(x[3]=N=>f.value="dark")},null,40,Dm),x[17]||(x[17]=i("div",{class:"theme-copy"},[i("div",{class:"theme-option__title"},"Force dark"),i("div",{class:"theme-option__desc"},"Keep Opsdash dark, even when Nextcloud stays light.")],-1))])]),i("div",Nm,"Preview: "+P(u.value==="dark"?"Dark":"Light")+" mode",1)]),i("article",Im,[x[21]||(x[21]=i("h4",null,"Total weekly target",-1)),x[22]||(x[22]=i("p",{class:"pref-desc"},"Set your overall weekly goal. You can fine-tune per-category targets later.",-1)),i("label",Pm,[x[20]||(x[20]=i("span",{class:"label"},"Total target (h / week)",-1)),i("input",{type:"number",value:g.value??$.value,disabled:w.value,min:"0",max:"1000",step:"0.5",onInput:x[4]||(x[4]=N=>Xe(N.target))},null,40,Lm)]),w.value?(S(),A("p",Om,"Using categories  total derives from category targets ("+P($.value.toFixed(1))+" h).",1)):se("",!0)]),i("article",Fm,[x[24]||(x[24]=i("h4",null,"All-day events",-1)),x[25]||(x[25]=i("p",{class:"pref-desc"},"Tell Opsdash how many hours an all-day calendar event should contribute per day.",-1)),i("label",Hm,[x[23]||(x[23]=i("span",{class:"label"},"All-day hours per day",-1)),i("input",{type:"number",value:d.value,min:"0",max:"24",step:"0.25",onInput:x[5]||(x[5]=N=>v(N.target))},null,40,Bm)]),x[26]||(x[26]=i("p",{class:"pref-hint"},"Default is 8 h  adjust if your organisation tracks different durations.",-1))])])])):X.value==="strategy"?(S(),A("section",Rm,[x[29]||(x[29]=i("h3",null,"Select a starting strategy",-1)),i("div",Wm,[(S(!0),A(de,null,De(m(k),N=>(S(),A("article",{key:N.id,class:ke(["strategy-card",{active:r.value===N.id}]),onClick:ae=>r.value=N.id},[i("h4",null,P(N.title),1),i("p",Um,P(N.subtitle),1),i("ul",null,[(S(!0),A(de,null,De(N.highlights,ae=>(S(),A("li",{key:ae},P(ae),1))),128))]),i("footer",null,"Best for: "+P(N.recommendedFor),1)],10,jm))),128))])])):X.value==="calendars"?(S(),A("section",zm,[x[30]||(x[30]=i("h3",null,"Choose calendars to include",-1)),x[31]||(x[31]=i("p",null,"Select the calendars you want to track. You can adjust later at any time.",-1)),i("div",Vm,[(S(!0),A(de,null,De(D.calendars,N=>(S(),A("label",{key:N.id,class:ke(["calendar-item",{checked:l.value.includes(N.id)}])},[i("input",{type:"checkbox",value:N.id,checked:l.value.includes(N.id),onChange:ae=>oe(N.id,ae.target)},null,40,Km),i("span",{class:"dot",style:ct({backgroundColor:N.color||"#3B82F6"})},null,4),i("span",null,P(N.displayname),1)],2))),128))]),l.value.length?se("",!0):(S(),A("div",qm,"Select at least one calendar to continue."))])):X.value==="categories"?(S(),A("section",Gm,[x[39]||(x[39]=i("h3",null,"Configure categories & targets",-1)),w.value?(S(),A(de,{key:1},[i("div",Ym,[(S(!0),A(de,null,De(c.value,N=>(S(),A("article",{key:N.id,class:"category-card"},[i("header",Zm,[i("input",{class:"category-name",type:"text",value:N.label,placeholder:"Category name",onInput:ae=>ce(N.id,ae.target.value)},null,40,Xm),i("div",Qm,[i("button",{class:"remove-category",type:"button",disabled:c.value.length<=1,title:"Remove category",onClick:ae=>he(N.id)},"  ",8,ev)])]),i("div",tv,[i("label",nv,[x[32]||(x[32]=i("span",{class:"label"},"Target (h / week)",-1)),i("input",{type:"number",value:N.targetHours,min:"0",step:"0.5",onInput:ae=>pe(N.id,ae.target.value)},null,40,sv)]),i("label",av,[i("input",{type:"checkbox",checked:N.includeWeekend,onChange:ae=>Se(N.id,ae.target.checked)},null,40,ov),x[33]||(x[33]=i("span",null,"Include weekend",-1))]),i("div",rv,[x[36]||(x[36]=i("span",{class:"label"},"Colour",-1)),i("div",{class:"color-chip-wrapper","data-color-popover":"",onClick:x[7]||(x[7]=Wt(()=>{},["stop"]))},[i("button",{type:"button",class:"color-chip",style:ct({backgroundColor:Pe(N)}),"aria-expanded":D.openColorId===N.id,"aria-label":`Choose colour for ${N.label}`,onClick:ae=>ee(N.id)},[...x[34]||(x[34]=[i("span",{class:"chip-outline"},null,-1)])],12,iv),D.openColorId===N.id?(S(),A("div",{key:0,class:"color-popover",id:`onboarding-color-popover-${N.id}`,tabindex:"-1",onKeydown:x[6]||(x[6]=Ia(Wt(ae=>xe(),["prevent"]),["esc"]))},[i("div",cv,[(S(!0),A(de,null,De(y.value,ae=>(S(),A("button",{key:`${N.id}-swatch-${ae}`,type:"button",class:ke(["color-swatch",{active:Pe(N)===ae}]),style:ct({backgroundColor:ae}),"aria-label":`Use colour ${ae}`,onClick:me=>Me(N.id,ae)},null,14,uv))),128))]),i("label",dv,[x[35]||(x[35]=i("span",null,"Custom",-1)),i("input",{class:"color-input",type:"color",value:Pe(N),"aria-label":"Pick custom colour",onInput:ae=>Ae(N.id,ae.target.value)},null,40,fv)])],40,lv)):se("",!0)])])])]))),128)),we(m(Ze),{type:"tertiary",class:"add-category",onClick:Q},{default:Fe(()=>[...x[37]||(x[37]=[Ce("Add category",-1)])]),_:1}),i("div",pv,"Total weekly target: "+P($.value.toFixed(1))+" h",1)]),L.value.length?(S(),A("div",gv,[x[38]||(x[38]=i("h4",null,"Assign calendars",-1)),(S(!0),A(de,null,De(L.value,N=>(S(),A("div",{key:N.id,class:"assignment-row"},[i("span",hv,P(N.displayname),1),i("select",{value:p.value[N.id],onChange:ae=>Ie(N.id,ae.target.value)},[(S(!0),A(de,null,De(c.value,ae=>(S(),A("option",{key:ae.id,value:ae.id},P(ae.label),9,vv))),128))],40,mv)]))),128))])):(S(),A("p",bv,"Select at least one calendar to continue."))],64)):(S(),A("p",Jm,"This strategy does not require categories."))])):X.value==="review"?(S(),A("section",yv,[x[43]||(x[43]=i("h3",null,"Review your setup",-1)),i("div",wv,[i("div",null,[x[40]||(x[40]=i("h5",null,"Strategy",-1)),i("p",null,P(z.value),1)]),i("div",null,[x[41]||(x[41]=i("h5",null,"Calendars",-1)),i("ul",null,[(S(!0),A(de,null,De(L.value,N=>(S(),A("li",{key:N.id},P(N.displayname),1))),128))])]),i("div",null,[x[42]||(x[42]=i("h5",null,"Targets preview",-1)),U.value.targetsConfig.categories.length?(S(),A(de,{key:0},[i("ul",null,[(S(!0),A(de,null,De(U.value.targetsConfig.categories,N=>(S(),A("li",{key:N.id},P(N.label)+"  "+P(N.targetHours)+" h ",1))),128))]),i("p",_v,"Total weekly target: "+P($.value.toFixed(1))+" h",1)],64)):(S(),A("p",xv,"Total target: "+P(U.value.targetsConfig.totalHours)+" h per week",1))])]),x[44]||(x[44]=i("p",{class:"hint"},"You can fine-tune categories, goals, and pacing once the dashboard loads.",-1))])):se("",!0)]),i("footer",kv,[W.value?(S(),We(m(Ze),{key:0,type:"tertiary",disabled:q.value,onClick:H},{default:Fe(()=>[...x[45]||(x[45]=[Ce("Back",-1)])]),_:1},8,["disabled"])):se("",!0),G.value?(S(),We(m(Ze),{key:1,type:"primary",disabled:R.value||q.value,onClick:O},{default:Fe(()=>[...x[46]||(x[46]=[Ce("Continue",-1)])]),_:1},8,["disabled"])):(S(),We(m(Ze),{key:2,type:"primary",disabled:q.value,onClick:te},{default:Fe(()=>[...x[47]||(x[47]=[Ce(" Start dashboard ",-1)])]),_:1},8,["disabled"]))])])])):se("",!0)]),_:1}))}}),[["__scopeId","data-v-3fc1be8b"]]);function Sv(e){const t=ie(""),n=ie(""),s=ie(!1);async function a(){var l,c;const r=await e.getJson(e.route("notes"),{range:e.range.value,offset:e.offset.value|0});t.value=String(((l=r==null?void 0:r.notes)==null?void 0:l.previous)??""),n.value=String(((c=r==null?void 0:r.notes)==null?void 0:c.current)??"")}async function o(){try{s.value=!0,await e.postJson(e.route("notesSave"),{range:e.range.value,offset:e.offset.value|0,content:n.value??""}),e.notifySuccess("Notes saved"),await a()}catch(r){console.error(r),e.notifyError("Failed to save notes")}finally{s.value=!1}}return{notesPrev:t,notesCurrDraft:n,isSavingNote:s,fetchNotes:a,saveNotes:o}}function $v(e){const t=ie([]),n=ie({}),s=ie({}),a=ie({}),o=ie([]),r=ie(!1),l=ie(!1),c=ie(null),p=ie(""),f=ie(""),d=ie(""),g=Tt({}),u=ie([]),b=ie([]),h=ie([]),y=ie({}),k=ie({}),_=ie({}),w=ie(rt(xn())),E=ie(null);let F=0;async function X(){var re,J,le,ye,Q,he,ce,pe,Se,Ie,ee,xe,be,ge,Pe,Ae;const B=++F;r.value=!0;const C={...s.value},q={...n.value};let K=!1;try{const Me={range:e.range.value,offset:e.offset.value|0,save:!1},ue=await e.getJson(e.route("load"),Me);if(B!==F){(re=e.isDebug)!=null&&re.call(e)&&console.warn("discarding stale load response",{currentSeq:B,loadSeq:F});return}p.value=String(((J=ue.meta)==null?void 0:J.uid)??""),f.value=String(((le=ue.meta)==null?void 0:le.from)??""),d.value=String(((ye=ue.meta)==null?void 0:ye.to)??""),l.value=!!((Q=ue.meta)!=null&&Q.truncated),c.value=((he=ue.meta)==null?void 0:he.limits)??null;const Ne=R=>{const O={};return R&&typeof R=="object"&&Object.entries(R).forEach(([H,ne])=>{typeof ne=="string"&&ne.trim()!==""&&(O[String(H)]=ne)}),O},Ke=Array.isArray(ue.calendars)?ue.calendars:[],Xe=Ne((ce=ue.colors)==null?void 0:ce.byId),v=Ne((pe=ue.colors)==null?void 0:pe.byName),$=Ke.map(R=>{if(!R||typeof R!="object")return R;const O={...R},H=String(O.id??""),ne=String(O.displayname??O.name??O.calendar??H),Y=typeof O.color=="string"?O.color:"",te=typeof O.color_src=="string"?O.color_src:"",oe=H?Xe[H]:"",D=ne?v[ne]:"",x=H?C[H]:"",N=ne?q[ne]:"",ae=x||N;let me=Y;return!me&&oe&&(me=oe),!me&&D&&(me=D),(!me||te==="fallback")&&ae&&(me=ae),!me&&ae&&(me=ae),me&&(me!==Y&&(K=!0),O.color=me,H&&(Xe[H]=me),ne&&(v[ne]=me)),O});t.value=$,n.value=v,s.value=Xe,E.value=ue.onboarding?{...ue.onboarding}:null;const L=()=>{var O,H,ne,Y;let R=!1;try{const te=((O=y.value)==null?void 0:O.pie)||{},oe=Array.isArray(te.ids)?te.ids.map(D=>String(D??"")):[];if(oe.length){const D=Array.isArray(te.colors)?te.colors:[],x=oe.map((N,ae)=>s.value[N]||D[ae]||"#60a5fa");y.value={...y.value||{},pie:{...te,colors:x}},R=!0}}catch(te){(H=e.isDebug)!=null&&H.call(e)&&console.warn("recompute pie colors failed",te)}try{const te=(ne=y.value)==null?void 0:ne.perDaySeries;if(te&&Array.isArray(te.series)){const oe=te.series.map(D=>{const x=String((D==null?void 0:D.id)??""),N=s.value[x]||D.color||"#60a5fa";return{...D,color:N}});y.value={...y.value||{},perDaySeries:{labels:te.labels,series:oe}},R=!0}}catch(te){(Y=e.isDebug)!=null&&Y.call(e)&&console.warn("recompute stacked colors failed",te)}return R},U=((Se=ue.groups)==null?void 0:Se.byId)??((Ie=ue.groups)==null?void 0:Ie.byID)??((ee=ue.groups)==null?void 0:ee.ids)??{},z={};t.value.forEach(R=>{const O=String((R==null?void 0:R.id)??""),H=Number((U==null?void 0:U[O])??0);z[O]=Number.isFinite(H)?Math.max(0,Math.min(9,Math.trunc(H))):0}),a.value=z;const W=((xe=ue.targets)==null?void 0:xe.week)??{},G=((be=ue.targets)==null?void 0:be.month)??{};if(k.value=W&&typeof W=="object"?W:{},_.value=G&&typeof G=="object"?G:{},w.value=rt(ue.targetsConfig??xn()),(ge=e.isDebug)!=null&&ge.call(e)&&(console.group("[opsdash] calendars/colors"),console.table((t.value||[]).map(R=>({id:R.id,name:R.displayname,color:R.color,raw:R.color_raw,src:R.color_src}))),console.log("colors.byId",s.value),console.log("colors.byName",n.value),ue.calDebug&&console.log("server calDebug",ue.calDebug),ue.debug&&(console.group("[opsdash] server query debug"),console.log(ue.debug),console.groupEnd()),console.groupEnd()),t.value.length&&e.fetchDavColors&&t.value.filter(O=>!O.color||O.color_src==="fallback").length)try{const O=await e.fetchDavColors(p.value,t.value.map(ne=>String(ne.id)));let H=!1;t.value=t.value.map(ne=>{const Y=O[ne.id];return Y&&Y!==ne.color&&(ne.color_src="dav"(ne).color_raw=Y,ne.color=Y,H=!0),ne}),Object.entries(O).forEach(([ne,Y])=>{if(Y){const te=String(Y);s.value[ne]=te;const oe=t.value.find(x=>String((x==null?void 0:x.id)??"")===ne);oe&&(oe.color=te);const D=oe?String(oe.displayname??oe.name??""):"";D&&(n.value[D]=te)}}),H&&((Pe=e.isDebug)!=null&&Pe.call(e)&&console.log("[opsdash] dav colors applied",O),K=!0)}catch(O){(Ae=e.isDebug)!=null&&Ae.call(e)&&console.warn("dav colors failed",O)}o.value=Array.isArray(ue.selected)?ue.selected.map(R=>String(R)):Array.isArray(ue.saved)?ue.saved.map(R=>String(R)):[],e.userChangedSelection.value=!1,Object.assign(g,ue.stats??{}),u.value=Array.isArray(ue.byCal)?ue.byCal:[],b.value=Array.isArray(ue.byDay)?ue.byDay:[],h.value=Array.isArray(ue.longest)?ue.longest:[],y.value=ue.charts??{},K&&L(),await nn(),e.scheduleDraw(),await e.fetchNotes().catch(()=>{})}catch(Me){console.error(Me),e.notifyError("Failed to load data")}finally{r.value=!1}}return{calendars:t,colorsByName:n,colorsById:s,groupsById:a,selected:o,isLoading:r,isTruncated:l,truncLimits:c,uid:p,from:f,to:d,stats:g,byCal:u,byDay:b,longest:h,charts:y,targetsWeek:k,targetsMonth:_,targetsConfig:w,onboarding:E,load:X}}function Tv(e){const t=ie(!1);let n=null;function s(a=!0){n&&clearTimeout(n),n=setTimeout(async()=>{n=null;try{t.value=!0;const o=await e.postJson(e.route("persist"),{cals:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:Yn(e.targetsConfig.value)});Array.isArray(o.read)?e.selected.value=o.read.map(c=>String(c)):Array.isArray(o.saved)&&(e.selected.value=o.saved.map(c=>String(c)));const r=o.targets_config_read,l=o.targets_config_saved;r?e.targetsConfig.value=rt(r):l&&(e.targetsConfig.value=rt(l)),a&&e.onReload&&await e.onReload(),e.notifySuccess("Selection saved")}catch(o){console.error(o),e.notifyError("Failed to save selection")}finally{t.value=!1}},250)}return{queueSave:s,isSaving:t}}const Mv=1e4;function Av(e){function t(p){return e.selected.value.includes(p)}function n(p,f){const d=new Set(e.selected.value);f?d.add(p):d.delete(p),e.selected.value=Array.from(d)}function s(p){n(p,!t(p)),e.userChangedSelection.value=!0,e.queueSave()}function a(p){e.selected.value=p?e.calendars.value.map(f=>String(f.id)):[]}function o(p,f){const d=Math.max(0,Math.min(9,Math.trunc(Number(f)||0))),g=e.groupsById.value??{};e.groupsById.value={...g,[p]:d},e.queueSave(!1)}function r(p){const f=Math.round(p*100)/100;return Math.min(Mv,Math.max(0,f))}function l(p,f){const d=Number(f);if(!Number.isFinite(d)||d<0)return;const g=r(d);if(e.range.value==="month"){const u=r(g/4);e.targetsMonth.value={...e.targetsMonth.value||{},[p]:g},e.targetsWeek.value={...e.targetsWeek.value||{},[p]:u}}else{const u=r(g*4);e.targetsWeek.value={...e.targetsWeek.value||{},[p]:g},e.targetsMonth.value={...e.targetsMonth.value||{},[p]:u}}e.queueSave(!1)}function c(p){e.targetsConfig.value=rt(p),e.queueSave(!1)}return{isSelected:t,toggleCalendar:s,setGroup:o,setTarget:l,updateTargetsConfig:c,selectAll:a}}function Ev(e){const t=ie([]),n=ie(!1),s=ie(!1),a=ie(!1),o=ie([]),r=ie(null);async function l(){n.value=!0;try{const u=await e.getJson(e.route("presetsList"),{});t.value=Array.isArray(u==null?void 0:u.presets)?u.presets:[]}catch(u){console.error(u),e.notifyError("Failed to load presets")}finally{n.value=!1}}async function c(u){const b=u.trim();if(b===""){e.notifyError("Enter a preset name.");return}s.value=!0;try{const h={name:b,selected:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:e.targetsConfig.value},y=await e.postJson(e.route("presetsSave"),h);t.value=Array.isArray(y==null?void 0:y.presets)?y.presets:t.value;const k=Array.isArray(y==null?void 0:y.warnings)?y.warnings:[];o.value=k,r.value=b,e.notifySuccess(`Profile "${b}" saved`)}catch(h){console.error(h),e.notifyError("Failed to save preset")}finally{s.value=!1}}function p(u){const b=Array.isArray(u==null?void 0:u.selected)?u.selected.map(k=>String(k)):[];e.selected.value=b;const h=u!=null&&u.groups&&typeof u.groups=="object"?u.groups:{};e.groupsById.value={...h},e.targetsWeek.value=u!=null&&u.targets_week&&typeof u.targets_week=="object"?u.targets_week:{},e.targetsMonth.value=u!=null&&u.targets_month&&typeof u.targets_month=="object"?u.targets_month:{};const y=u!=null&&u.targets_config&&typeof u.targets_config=="object"?rt(u.targets_config):Yn(e.targetsConfig.value);e.targetsConfig.value=y,e.userChangedSelection.value=!1}async function f(u){const b=u.trim();if(b!==""){a.value=!0;try{const h=await e.getJson(e.route("presetsLoad",b),{}),y=(h==null?void 0:h.preset)??{},k=Array.isArray(y==null?void 0:y.warnings)?y.warnings:Array.isArray(h==null?void 0:h.warnings)?h.warnings:[];if(k.length){const _=`Some items in the saved profile are no longer available:

${k.map(w=>` ${w}`).join(`
`)}

Apply the remaining values?`;if(!window.confirm(_)){o.value=k,a.value=!1;return}}p(y),o.value=k,r.value=b,e.notifySuccess(`Profile "${b}" applied`),e.queueSave(!0),l().catch(_=>console.warn("[opsdash] refresh presets after load failed",_))}catch(h){console.error(h),e.notifyError("Failed to load preset")}finally{a.value=!1}}}async function d(u){const b=u.trim();if(b!=="")try{const h=await e.deleteJson(e.route("presetsDelete",b));t.value=Array.isArray(h==null?void 0:h.presets)?h.presets:t.value,e.notifySuccess(`Profile "${b}" deleted`),r.value===b&&(r.value=null)}catch(h){console.error(h),e.notifyError("Failed to delete preset")}}function g(){o.value=[]}return{presets:t,presetsLoading:n,presetSaving:s,presetApplying:a,presetWarnings:o,lastLoadedPreset:r,refreshPresets:l,savePreset:c,loadPreset:f,deletePreset:d,clearPresetWarnings:g}}function Dv(){let e=null;function t(){typeof window>"u"||typeof window.requestAnimationFrame!="function"||(e!==null&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(()=>{e=null,window.dispatchEvent(new Event("resize"))}))}return bn(()=>{e!==null&&typeof window<"u"&&typeof window.cancelAnimationFrame=="function"&&(window.cancelAnimationFrame(e),e=null)}),{scheduleDraw:t}}const Nv={load:"/apps/opsdash/overview/load",persist:"/apps/opsdash/overview/persist",notes:"/apps/opsdash/overview/notes",notesSave:"/apps/opsdash/overview/notes",presetsList:"/apps/opsdash/overview/presets",presetsSave:"/apps/opsdash/overview/presets",presetsLoad:"/apps/opsdash/overview/presets",presetsDelete:"/apps/opsdash/overview/presets",ping:"/apps/opsdash/overview/ping"};function Iv(){var t,n;const e=typeof window<"u"?window:{};return e.OC&&(e.OC.webroot||((n=(t=e.OC).getRootPath)==null?void 0:n.call(t)))||e._oc_webroot||""}function Pv(){const e=V(()=>Iv());function t(r,l){const c=typeof window<"u"?window:{},p=Nv[r];if(r==="presetsLoad"||r==="presetsDelete"){const f=`${p}/${encodeURIComponent(String(l??""))}`;return c.OC&&typeof c.OC.generateUrl=="function"?c.OC.generateUrl(f):`${e.value}${f}`}return c.OC&&typeof c.OC.generateUrl=="function"?c.OC.generateUrl(p):`${e.value}${p}`}function n(r){const l=new URLSearchParams;return Object.entries(r||{}).forEach(([c,p])=>{Array.isArray(p)?p.forEach(f=>l.append(c,String(f))):p!=null&&l.set(c,String(p))}),l.toString()}async function s(r,l){const c=n(l),p=c?`${r}${r.includes("?")?"&":"?"}${c}`:r,f=await fetch(p,{method:"GET",credentials:"same-origin"});if(!f.ok)throw new Error(`HTTP ${f.status}`);return await f.json()}async function a(r,l){var g;const c=typeof window<"u"?window:{},p=((g=c.OC)==null?void 0:g.requestToken)||c.oc_requesttoken||"",f={"Content-Type":"application/json"};p&&(f.requesttoken=p);const d=await fetch(r,{method:"POST",credentials:"same-origin",headers:f,body:JSON.stringify(l||{})});if(!d.ok)throw new Error(`HTTP ${d.status}`);return await d.json()}async function o(r){var g;const l=typeof window<"u"?window:{},c=((g=l.OC)==null?void 0:g.requestToken)||l.oc_requesttoken||"",p={};c&&(p.requesttoken=c);const f=await fetch(r,{method:"DELETE",credentials:"same-origin",headers:p});if(!f.ok)throw new Error(`HTTP ${f.status}`);const d=await f.text();return d?JSON.parse(d):{}}return{route:t,getJson:s,postJson:a,deleteJson:o,root:e}}function fi(e){const t=typeof document<"u"?document.getElementById("app"):null;if(!t||!t.dataset)return"";const n=t.dataset;return n?String(n[e]??""):""}function Lv(e){const t=ie(0),n=V(()=>{var d;const c=[],p=typeof window<"u"?window:{};try{if((d=p.OC)!=null&&d.imagePath){const g=p.OC.imagePath("opsdash","app.svg");g&&c.push(g)}}catch{}const f=e.root.value;return c.push(`${f}/apps/opsdash/img/app.svg`),c.push(`${f}/apps-extra/opsdash/img/app.svg`),c.push(`${f}/apps-writable/opsdash/img/app.svg`),c}),s=V(()=>n.value[Math.min(t.value,n.value.length-1)]||"");function a(){t.value+1<n.value.length&&t.value++}const o=ie(fi("opsdashVersion")||(e.pkgVersion?String(e.pkgVersion):"")),r=ie(fi("opsdashChangelog"));async function l(){if(!(o.value&&r.value))try{const c=await e.getJson(e.pingUrl(),{});!o.value&&typeof(c==null?void 0:c.version)=="string"&&(o.value=c.version),!r.value&&typeof(c==null?void 0:c.changelog)=="string"&&(r.value=c.changelog)}catch{}}return l(),{iconSrc:s,onIconError:a,appVersion:o,changelogUrl:r}}function Ov(e){function t(s){const a=typeof window<"u"?window:{};return a.OC&&typeof a.OC.generateUrl=="function"?a.OC.generateUrl(`/apps/calendar/timeGridDay/${s}`):`${e.root.value}/index.php/apps/calendar/timeGridDay/${s}`}async function n(s,a){var c,p,f;const o={};if(!s)return o;const r=((c=window.OC)==null?void 0:c.requestToken)||window.oc_requesttoken||"",l=e.root.value;for(const d of a)try{const g=`${l}/remote.php/dav/calendars/${encodeURIComponent(s)}/${encodeURIComponent(d)}/`,u=`<?xml version="1.0" encoding="UTF-8"?>
<d:propfind xmlns:d="DAV:" xmlns:ical="http://apple.com/ns/ical/">
  <d:prop><ical:calendar-color/></d:prop>
</d:propfind>`;(p=e.isDebug)!=null&&p.call(e)&&console.log("[opsdash] PROPFIND",{url:g,id:d});const b=await fetch(g,{method:"PROPFIND",credentials:"same-origin",headers:{Depth:"0","Content-Type":"application/xml",requesttoken:r},body:u});if(!b.ok)continue;const h=await b.text();(f=e.isDebug)!=null&&f.call(e)&&console.log("[opsdash] PROPFIND response",{id:d,status:b.status,length:h.length,sample:h.slice(0,400)});const y=h.match(/<[^>]*calendar-color[^>]*>(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{8}|rgb\([^<]+\))<\/[^>]*calendar-color>/i);y&&(o[d]=y[1])}catch{}return o}return{calendarDayLink:t,fetchDavColors:n}}function Fv(e){const t=V(()=>{var a,o;return Rv({perDaySeries:(a=e.charts.value)==null?void 0:a.perDaySeries,forecastMode:((o=e.activityCardConfig.value)==null?void 0:o.forecastMode)??"total",targetsConfig:e.targetsConfig.value,currentTargets:e.currentTargets.value,calendarCategoryMap:e.calendarCategoryMap.value})}),n=V(()=>{var a;return{pie:((a=e.charts.value)==null?void 0:a.pie)||null,stacked:t.value}}),s=V(()=>{var y,k;const a={},o=(y=e.charts.value)==null?void 0:y.pie,r=(k=e.charts.value)==null?void 0:k.perDaySeries,l=t.value||r,c=o&&Array.isArray(o.data)&&Array.isArray(o.ids),p=l&&Array.isArray(l.series)&&Array.isArray(l.labels),f=e.calendarCategoryMap.value,d=c?(o.ids||[]).map(_=>String(_??"")):[],g=c?(o.labels||[]).map(_=>String(_??"")):[],u=c?(o.data||[]).map(_=>Number(_)||0):[],b=c?o.colors||[]:[],h=p?l.series:[];return e.calendarGroups.value.forEach(_=>{const w=[];c&&d.forEach((B,C)=>{f[B]===_.id&&w.push(C)});const E=w.length?{ids:w.map(B=>d[B]),labels:w.map(B=>g[B]),data:w.map(B=>u[B]),colors:w.map(B=>{var C;return b[B]||((C=e.colorsById.value)==null?void 0:C[d[B]])||"#60a5fa"})}:null,F=p?h.filter(B=>f[String((B==null?void 0:B.id)??"")]===_.id):[],X=F.length?{labels:l.labels,series:F}:null;a[_.id]={pie:E,stacked:X}}),a});return{calendarChartData:n,categoryChartsById:s}}const Hv=/^\d{4}-\d{2}-\d{2}$/,Bv="__uncategorized__";function Rv(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const n=t.labels.map(h=>String(h??"")),s=t.series.map(h=>{const y=String((h==null?void 0:h.id)??"");return{...h,id:y,name:String((h==null?void 0:h.name)??(h==null?void 0:h.label)??y),color:String((h==null?void 0:h.color)??""),data:n.map((k,_)=>{var E;const w=Number(((E=h==null?void 0:h.data)==null?void 0:E[_])??0);return Number.isFinite(w)?Math.max(0,w):0})}}),a=Wv(e.forecastMode),o=jv(new Date),r=n.map(h=>Hv.test(h)&&h>o),l=[];if(r.forEach((h,y)=>{h&&l.push(y)}),!l.length||a==="off")return{labels:n,series:s};const c=e.targetsConfig??xn(),p=zv(e.currentTargets),f=e.calendarCategoryMap??{},d=l.length,g=new Map;s.forEach(h=>{let y=0;h.data.forEach((k,_)=>{r[_]||(y+=Math.max(0,k))}),g.set(h.id,y)});const u=Array.from(g.values()).reduce((h,y)=>h+y,0),b=new Map;if(s.forEach(h=>{b.set(h.id,Uv(n.length))}),a==="total"){const h=Math.max(0,Number(c.totalHours??0)),y=Math.max(0,h-u);if(y>1e-4){const k=y/d,_=s.map(E=>E.id),w=pi(_,g,p);_.forEach(E=>{const F=w[E]??0;if(F<=0)return;const X=b.get(E);X&&l.forEach(B=>{X[B]=Rs(k*F)})})}}else if(a==="calendar")s.forEach(h=>{const y=p[h.id]??0;if(y<=0)return;const k=Math.max(0,g.get(h.id)??0),_=Math.max(0,y-k);if(_<=1e-4)return;const w=_/d,E=b.get(h.id);E&&l.forEach(F=>{E[F]=Rs(w)})});else if(a==="category"){const h=new Set,y=Array.isArray(c.categories)?c.categories:[],k=new Map;y.forEach(w=>{k.set(String(w.id),Math.max(0,Number(w.targetHours??0)))});const _=new Map;s.forEach(w=>{const E=f==null?void 0:f[w.id],F=E?String(E):Bv;_.has(F)||_.set(F,[]),_.get(F).push(w.id)}),_.forEach((w,E)=>{if(!w.length)return;const F=k.get(E)??0;if(F<=0)return;const X=w.reduce((re,J)=>re+Math.max(0,g.get(J)??0),0),B=Math.max(0,F-X);if(B<=1e-4)return;const C=B/d,q={};w.forEach(re=>{q[re]=p[re]??0});const K=pi(w,g,q);w.forEach(re=>{const J=K[re]??0;if(J<=0)return;const le=b.get(re);le&&(l.forEach(ye=>{le[ye]=Rs(C*J)}),h.add(re))})}),s.forEach(w=>{if(h.has(w.id))return;const E=p[w.id]??0;if(E<=0)return;const F=Math.max(0,g.get(w.id)??0),X=Math.max(0,E-F);if(X<=1e-4)return;const B=X/d,C=b.get(w.id);C&&l.forEach(q=>{C[q]=Rs(B)})})}return s.forEach(h=>{const y=b.get(h.id);y&&y.some(k=>k>1e-4)&&(h.forecast=y)}),{labels:n,series:s}}function Wv(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function jv(e){const t=e.getFullYear(),n=`${e.getMonth()+1}`.padStart(2,"0"),s=`${e.getDate()}`.padStart(2,"0");return`${t}-${n}-${s}`}function Uv(e){return Array.from({length:e},()=>0)}function Rs(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function zv(e){const t={};return e&&Object.entries(e).forEach(([n,s])=>{const a=Number(s);Number.isFinite(a)&&a>0&&(t[String(n)]=a)}),t}function pi(e,t,n){const s={},a=e.reduce((l,c)=>l+Math.max(0,t.get(c)??0),0);if(a>1e-4)return e.forEach(l=>{const c=Math.max(0,t.get(l)??0);s[l]=c/a}),s;const o=e.reduce((l,c)=>l+Math.max(0,(n==null?void 0:n[c])??0),0);if(o>1e-4)return e.forEach(l=>{const c=Math.max(0,(n==null?void 0:n[l])??0);s[l]=c/o}),s;const r=e.length?1/e.length:0;return e.forEach(l=>{s[l]=r}),s}const Ut="__uncategorized__",gi="Unassigned";function Vv(e){const t=V(()=>{var f;const p=(f=e.targetsConfig.value)==null?void 0:f.categories;return Array.isArray(p)?p:[]}),n=V(()=>{const p={};return t.value.forEach(f=>{p[String(f.id)]=f.label||String(f.id)}),p}),s=V(()=>{var d;const p=new Map;return(((d=e.targetsSummary.value)==null?void 0:d.categories)||[]).forEach(g=>p.set(String(g.id),g)),p}),a=V(()=>{const p=new Map;return t.value.forEach(f=>{(Array.isArray(f.groupIds)?f.groupIds:[]).forEach(g=>{const u=Math.max(0,Math.min(9,Math.trunc(Number(g)||0)));p.set(u,String(f.id))})}),p}),o=V(()=>{var d;const p=e.calendars.value;if(!Array.isArray(p))return(d=e.isDebug)!=null&&d.call(e)&&console.warn("[opsdash] calendars not array",p),{};const f={};return p.forEach(g=>{var h;const u=String((g==null?void 0:g.id)??"");if(!u)return;const b=((h=e.colorsById.value)==null?void 0:h[u])||String((g==null?void 0:g.color)||"");f[u]={name:String((g==null?void 0:g.displayname)||(g==null?void 0:g.name)||(g==null?void 0:g.calendar)||u),color:b||void 0}}),f}),r=V(()=>{var b;const p={},f=a.value,d=e.groupsById.value||{},g=h=>{const y=d==null?void 0:d[h],k=Math.max(0,Math.min(9,Math.trunc(Number(y)||0))),_=f.get(k);p[h]=_||Ut},u=e.calendars.value;return Array.isArray(u)?(u.forEach(h=>{const y=String((h==null?void 0:h.id)??"");y&&g(y)}),(e.selected.value||[]).forEach(h=>{const y=String(h??"");y&&(p[y]||g(y))}),p):((b=e.isDebug)!=null&&b.call(e)&&console.warn("[opsdash] calendarCategoryMap: calendars not array",u),p)}),l=V(()=>{const p=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"],f={};let d=0;const g=u=>{const b=String((u==null?void 0:u.id)??"");if(!b)return;if(f[b])return f[b];const h=typeof(u==null?void 0:u.color)=="string"&&u.color?u.color:void 0;if(h)return f[b]=h,h;const y=Object.entries(r.value).filter(([,_])=>_===b).map(([_])=>_);for(const _ of y){const w=o.value[_];if(w!=null&&w.color)return f[b]=w.color,w.color}const k=p[d%p.length];return d+=1,f[b]=k,k};return t.value.forEach(u=>g(u)),Object.values(r.value||{}).some(u=>u===Ut)&&g({id:Ut}),f}),c=V(()=>{var F,X,B,C,q,K,re,J,le,ye;const p=[],f=r.value,d=s.value,g=e.byCal.value;if(!Array.isArray(g))return(F=e.isDebug)!=null&&F.call(e)&&console.warn("[opsdash] aggregateCategoryRows: byCal not array",g),p;const u=new Map;g.forEach(Q=>{const he=String((Q==null?void 0:Q.id)??(Q==null?void 0:Q.calendar_id)??(Q==null?void 0:Q.calendar)??"");if(!he)return;const ce=f[he]||Ut;u.has(ce)||u.set(ce,[]),u.get(ce).push({...Q,calendarId:he})}),(X=e.isDebug)!=null&&X.call(e)&&console.log("[opsdash] aggregateCategoryRows",{rowsSourceIsArray:Array.isArray(g),rowsSourceLength:g.length,byCat:u,assignments:f});const b=((C=(B=e.targetsSummary.value)==null?void 0:B.total)==null?void 0:C.daysLeft)??0,h=((K=(q=e.targetsSummary.value)==null?void 0:q.total)==null?void 0:K.calendarPercent)??0,y=((J=(re=e.targetsSummary.value)==null?void 0:re.total)==null?void 0:J.paceMode)??((ye=(le=e.targetsConfig.value)==null?void 0:le.pace)==null?void 0:ye.mode)??"days_only",k=Q=>Math.round(Q*100)/100,_=e.currentTargets.value||{},w=(Q,he,ce)=>{const pe=ce.reduce((Ae,Me)=>{const ue=Number(_[Me.calendarId]??0);return Number.isFinite(ue)?Ae+Math.max(0,ue):Ae},0),Se=ce.reduce((Ae,Me)=>{const ue=Number((Me==null?void 0:Me.total_hours)??(Me==null?void 0:Me.hours)??0);return Number.isFinite(ue)?Ae+Math.max(0,ue):Ae},0),Ie=pe>0?Math.max(0,Math.min(100,Se/pe*100)):0,ee=Se-pe,xe=Math.max(0,pe-Se),be=pe<=0?"none":Ie>=100?"done":ee>=0?"on_track":"behind",ge=be==="done"?"Done":be==="on_track"?"On Track":be==="behind"?"Behind":"",Pe=b>0?xe/b:0;return{id:Q,label:he,actualHours:k(Se),targetHours:k(pe),percent:Ie,deltaHours:k(ee),remainingHours:k(xe),needPerDay:k(Pe),daysLeft:b,calendarPercent:Math.max(0,Math.min(100,h)),gap:k(Ie-h),status:be,statusLabel:ge,includeWeekend:!0,paceMode:y}};if(t.value.map(Q=>String(Q.id)).forEach(Q=>{const he=n.value[Q]||Q,ce=u.get(Q)||[],pe=d.get(Q)||w(Q,he,ce);p.push({id:Q,label:he,rows:ce,summary:pe,color:l.value[Q]})}),u.has(Ut)){const Q=u.get(Ut)||[];p.push({id:Ut,label:gi,rows:Q,summary:w(Ut,gi,Q),color:l.value[Ut]})}return p});return{categoryConfigList:t,categoryLabelById:n,categoryColorMap:l,calendarCategoryMap:r,calendarGroups:c}}function Kv(e){const t=Number(e);return Number.isFinite(t)?Math.round(t):0}function pt(e){const t=Number(e);return Number.isFinite(t)?t:null}function kn(e){if(e==null)return null;const t=String(e).trim();return t===""?null:t}function qv(e){const t=V(()=>{var _;const u=(_=e.charts.value)==null?void 0:_.pie;if(!u||!Array.isArray(u.data)||!Array.isArray(u.labels))return[];const b=u.data.map(w=>Number(w)||0),h=u.labels.map(w=>String(w||"")),y=b.reduce((w,E)=>w+Math.max(0,E),0);if(y<=0)return[];const k=b.map((w,E)=>({name:h[E]||"",value:Math.max(0,w)}));return k.sort((w,E)=>E.value-w.value),k.slice(0,3).map(w=>({name:w.name,share:w.value/y*100}))}),n=V(()=>{var b;if(t.value.length)return t.value.map(h=>`${h.name} ${mi(h.share)}`).join(", ");const u=(b=e.stats)==null?void 0:b.top_calendar;if(u&&u.calendar){const h=Number(u.share??0);return`${u.calendar} ${mi(h)}`}return""}),s=V(()=>{var u;return e.selected.value.length||(((u=e.calendars.value)==null?void 0:u.length)??0)}),a=V(()=>(e.byDay.value||[]).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),o=V(()=>{const u=a.value.map(b=>Number(b)||0);return e.activeDayMode.value==="active"?u.filter(b=>b>0):u}),r=V(()=>(e.byDay.value||[]).filter(u=>{const b=hi(String(u==null?void 0:u.date));return b>=1&&b<=5}).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),l=V(()=>(e.byDay.value||[]).filter(u=>{const b=hi(String(u==null?void 0:u.date));return b===0||b===6}).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),c=V(()=>e.activeDayMode.value==="active"?r.value.filter(u=>u>0):r.value),p=V(()=>e.activeDayMode.value==="active"?l.value.filter(u=>u>0):l.value),f=V(()=>{var h,y,k,_;const u=((h=e.stats)==null?void 0:h.balance_index)??((y=e.stats)==null?void 0:y.balanceIndex)??((_=(k=e.stats)==null?void 0:k.balance_overview)==null?void 0:_.index),b=Number(u);return Number.isFinite(b)?b:null}),d=V(()=>{var u,b,h,y;return{rangeLabel:e.rangeLabel.value,totalHours:Number(((u=e.stats)==null?void 0:u.total_hours)??0),avgDay:ja(o.value),avgEvent:Number(((b=e.stats)==null?void 0:b.avg_per_event)??0),medianDay:Ua(o.value),busiest:((h=e.stats)==null?void 0:h.busiest_day)??null,workdayAvg:ja(c.value),workdayMedian:Ua(c.value),weekendAvg:ja(p.value),weekendMedian:Ua(p.value),weekendShare:((y=e.stats)==null?void 0:y.weekend_share)??null,activeCalendars:s.value,calendarSummary:n.value,balanceIndex:f.value,topCategory:e.topCategory.value?{label:e.topCategory.value.label,actualHours:e.topCategory.value.summary.actualHours,targetHours:e.topCategory.value.summary.targetHours,percent:e.topCategory.value.summary.percent,statusLabel:e.topCategory.value.summary.statusLabel,status:e.topCategory.value.summary.status,color:e.topCategory.value.color}:null}}),g=V(()=>{const u=e.stats;return{rangeLabel:e.rangeLabel.value,events:Kv(u.events),activeDays:pt(u.active_days),typicalStart:kn(u.typical_start),typicalEnd:kn(u.typical_end),weekendShare:pt(u.weekend_share),eveningShare:pt(u.evening_share),earliestStart:kn(u.earliest_start),latestEnd:kn(u.latest_end),overlapEvents:pt(u.overlap_events),longestSession:pt(u.longest_session),lastDayOff:kn(u.last_day_off),lastHalfDayOff:kn(u.last_half_day_off)}});return{topThree:t,topCalendarsSummary:n,timeSummary:d,activitySummary:g}}function ja(e){return e.length?e.reduce((n,s)=>n+s,0)/e.length:0}function Ua(e){if(!e.length)return 0;const t=[...e].sort((s,a)=>s-a),n=Math.floor(t.length/2);return t.length%2?t[n]:(t[n-1]+t[n])/2}function hi(e){return new Date(`${e}T00:00:00Z`).getUTCDay()}function mi(e){return`${Number(e||0).toFixed(1)}%`}function Gv(e){return{balanceOverview:V(()=>{var d,g,u;const n=(d=e.stats)==null?void 0:d.balance_overview;if(!n||typeof n!="object")return null;const s=Array.isArray(n.categories)?n.categories.map(b=>({id:String((b==null?void 0:b.id)??""),label:String((b==null?void 0:b.label)??""),hours:pt(b==null?void 0:b.hours)??0,share:pt(b==null?void 0:b.share)??0,prevShare:pt(b==null?void 0:b.prev_share)??0,delta:pt(b==null?void 0:b.delta)??0,color:e.categoryColorMap.value[String((b==null?void 0:b.id)??"")]})):[],a=Array.isArray(n.relations)?n.relations.map(b=>({label:String((b==null?void 0:b.label)??""),value:String((b==null?void 0:b.value)??"")})):[],o={delta:Array.isArray((g=n.trend)==null?void 0:g.delta)?n.trend.delta.map(b=>({id:String((b==null?void 0:b.id)??""),label:String((b==null?void 0:b.label)??""),delta:pt(b==null?void 0:b.delta)??0})):[],badge:String(((u=n.trend)==null?void 0:u.badge)??"")},r=Array.isArray(n.daily)?n.daily.map(b=>({date:String((b==null?void 0:b.date)??""),weekday:String((b==null?void 0:b.weekday)??""),total_hours:pt(b==null?void 0:b.total_hours)??0,categories:Array.isArray(b==null?void 0:b.categories)?b.categories.map(h=>({id:String((h==null?void 0:h.id)??""),label:String((h==null?void 0:h.label)??""),hours:pt(h==null?void 0:h.hours)??0,share:pt(h==null?void 0:h.share)??0})):[]})):[],l=Array.isArray(n.insights)?n.insights.map(b=>String(b)):[],c=Array.isArray(n.warnings)?n.warnings.map(b=>String(b)):[],p=pt(n.index)??0,f=e.balanceCardConfig.value.showInsights?l:[];return{index:p,categories:s,relations:a,trend:o,daily:r,insights:f,warnings:c}})}}let Xn=null,za=null,vi=!1;function Jv(){if(!(typeof window>"u"))try{Ws(),Yv()}catch(e){Qv()&&console.warn("[opsdash] theme boot install failed",e)}}function Yv(){if(Xn||za||vi)return;const e=[];if(document.documentElement&&e.push(document.documentElement),document.body&&document.body!==document.documentElement&&e.push(document.body),e.length&&(Xn=new MutationObserver(()=>Ws()),e.forEach(t=>{Xn==null||Xn.observe(t,{attributes:!0,attributeFilter:["data-theme","class"]})})),window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>Ws();typeof t.addEventListener=="function"?(t.addEventListener("change",n),za=()=>t.removeEventListener("change",n)):typeof t.addListener=="function"&&(t.addListener(n),za=()=>{t.removeListener(n)})}window.addEventListener("oc:theme:changed",Ws),vi=!0}function Ws(){const e=Zv();if(!e)return;["icon","shortcut icon"].forEach(n=>{let s=document.querySelector(`link[rel="${n}"]`);s||(s=document.createElement("link"),s.rel=n,document.head.appendChild(s)),s.type="image/svg+xml",s.href=e})}function Zv(){const e=Va()==="dark",t=Xv(),n=t("favicon.svg");if(n)return n;if(e){const a=t("app-dark.svg");if(a)return a}const s=t(e?"app-dark.svg":"app.svg");return s||"/apps-extra/opsdash/img/favicon.svg"}function Va(){var s,a,o,r,l;const e=(s=document.documentElement)==null?void 0:s.getAttribute("data-theme");if(e==="dark"||e==="light")return e;const t=(a=document.body)==null?void 0:a.getAttribute("data-theme");if(t==="dark"||t==="light")return t;if((o=document.body)!=null&&o.classList.contains("theme--dark"))return"dark";if((r=document.body)!=null&&r.classList.contains("theme--light"))return"light";const n=(l=window.matchMedia)==null?void 0:l.call(window,"(prefers-color-scheme: dark)");return n!=null&&n.matches?"dark":"light"}function Xv(){const e=window;return t=>{var n;return typeof((n=e.OC)==null?void 0:n.imagePath)=="function"?e.OC.imagePath("opsdash",t):""}}function Qv(){var t;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}const bi="opsdash:theme-preference",Qn=ie("auto"),js=ie("light"),yi=ie(!1),es=V(()=>Qn.value==="auto"?js.value:Qn.value);function eb(){if(typeof window>"u")return"auto";try{const e=window.localStorage.getItem(bi);if(e==="light"||e==="dark"||e==="auto")return e}catch(e){console.warn("[opsdash] theme preference read failed",e)}return"auto"}function tb(e){if(!(typeof window>"u"))try{window.localStorage.setItem(bi,e)}catch(t){console.warn("[opsdash] theme preference write failed",t)}}function Us(e){if(typeof document>"u")return;const t=document.getElementById("opsdash");t&&(t.classList.remove("opsdash-theme-light","opsdash-theme-dark"),e==="dark"?t.classList.add("opsdash-theme-dark"):t.classList.add("opsdash-theme-light"))}function Ka(){js.value=Va()}let yt=null,cn=null;function nb(){typeof window>"u"||yt||(yt=window.matchMedia("(prefers-color-scheme: dark)"),cn=()=>Ka(),typeof yt.addEventListener=="function"?yt.addEventListener("change",cn):typeof yt.addListener=="function"&&yt.addListener(cn))}function sb(){yt&&(cn&&(typeof yt.removeEventListener=="function"?yt.removeEventListener("change",cn):typeof yt.removeListener=="function"&&yt.removeListener(cn)),yt=null,cn=null)}function ab(){yi.value||(Qn.value=eb(),js.value=Va(),Us(es.value),yi.value=!0),At(()=>{typeof window<"u"&&window.addEventListener("oc:theme:changed",Ka),nb(),Us(es.value)}),bn(()=>{typeof window<"u"&&window.removeEventListener("oc:theme:changed",Ka),sb()}),Ue(es,t=>{Us(t)});function e(t){Qn.value=t,tb(t),Us(es.value)}return{preference:Qn,effectiveTheme:es,systemTheme:js,setThemePreference:e}}const ob={version:"0.4.3"},rb={class:"app-shell"},ib={class:"app-main"},lb={class:"app-container"},cb={key:0,class:"range-toolbar",role:"toolbar","aria-label":"Collapsed range controls"},ub=["aria-expanded","aria-label"],db=["disabled"],fb=["disabled","aria-pressed"],pb={class:"range-toolbar__group",role:"group","aria-label":"Navigate periods"},gb=["disabled"],hb=["title"],mb=["disabled"],vb={class:"appbar"},bb={class:"title"},yb=["src"],wb=["textContent"],_b={class:"hint appbar-meta"},xb=["textContent"],kb={key:1,title:"Results truncated for performance"},Cb=["title"],Sb={class:"cards"},$b={class:"tabs"},Tb={class:"card full tab-panel"},Mb={key:0,class:"chart-section"},Ab={class:"grid2 mt-12"},Eb={class:"card chart-card"},Db={class:"card chart-card"},Nb={key:1,class:"chart-section"},Ib={key:0,class:"category-chart-block"},Pb={class:"category-chart-header"},Lb={class:"name"},Ob={class:"grid2 mt-8"},Fb={class:"card chart-card"},Hb={class:"card chart-card"},Bb={class:"card full tab-panel"},Rb={class:"card full tab-panel"},Wb={class:"card full tab-panel"},jb={class:"hint footer"},wi="opsdash.sidebarOpen",Ub=He({__name:"App",setup(e){function t(j){var Ve,lt;const Z=window;(lt=(Ve=Z.OC)==null?void 0:Ve.Notification)!=null&&lt.showTemporary?Z.OC.Notification.showTemporary(j):console.log("SUCCESS:",j)}function n(j){var Ve,lt;const Z=window;(lt=(Ve=Z.OC)==null?void 0:Ve.Notification)!=null&&lt.showTemporary?Z.OC.Notification.showTemporary(j):(console.error("ERROR:",j),alert(j))}const s=ie((()=>{if(typeof window>"u")return!0;const j=window.localStorage.getItem(wi);return j==null?!0:j==="1"})()),a=()=>{s.value=!s.value},o=V(()=>s.value?"Hide sidebar":"Show sidebar"),r=V(()=>s.value?"":"");Ue(s,j=>{typeof window<"u"&&(window.localStorage.setItem(wi,j?"1":"0"),nn(()=>{window.dispatchEvent(new Event("resize"))}))});const l=ie("cal"),c=ie("week"),p=ie(0),f=V(()=>!s.value),d=V(()=>c.value==="week"?"Switch to month":"Switch to week"),g=V(()=>!Xe.value||!v.value?"":`${Xe.value}  ${v.value}`);function u(){Le().catch(console.error)}function b(){c.value=c.value==="week"?"month":"week",p.value=0,Le().catch(console.error)}function h(){p.value=(p.value||0)-1,Le().catch(console.error)}function y(){p.value=(p.value||0)+1,Le().catch(console.error)}const k=V(()=>{const j=Ne.value;if(!j)return"Partial data due to caps";const Z=[];return j.maxPerCal!=null&&Z.push(`cap per calendar: ${j.maxPerCal}`),j.maxTotal!=null&&Z.push(`cap total: ${j.maxTotal}`),j.totalProcessed!=null&&Z.push(`processed: ${j.totalProcessed}`),Z.join("  ")}),_=ie(!1),{scheduleDraw:w}=Dv(),{route:E,getJson:F,postJson:X,deleteJson:B,root:C}=Pv(),{calendarDayLink:q,fetchDavColors:K}=Ov({root:C,isDebug:to}),re=Sv({range:c,offset:p,route:j=>E(j),getJson:F,postJson:X,notifySuccess:t,notifyError:n}),{notesPrev:J,notesCurrDraft:le,isSavingNote:ye,fetchNotes:Q,saveNotes:he}=re,{preference:ce,effectiveTheme:pe,systemTheme:Se,setThemePreference:Ie}=ab(),ee=V(()=>{var j;return!!((j=H.value)!=null&&j.completed)}),{calendars:xe,colorsByName:be,colorsById:ge,groupsById:Pe,selected:Ae,isLoading:Me,isTruncated:ue,truncLimits:Ne,uid:Ke,from:Xe,to:v,stats:$,byCal:L,byDay:U,longest:z,charts:W,targetsWeek:G,targetsMonth:R,targetsConfig:O,onboarding:H,load:ne}=$v({range:c,offset:p,userChangedSelection:_,route:j=>E(j),getJson:F,notifyError:n,scheduleDraw:w,fetchNotes:Q,isDebug:to,fetchDavColors:K}),Y=H,te=ie(!1),oe=ie(!1),D=ie(!1),x=ie(!1),N=ie(0);function ae(j){if(!j)return!0;const Z=j.version_required??Bs;return!j.completed||(j.version??0)<Z}function me(j){const Z=j??Y.value;if(!te.value&&!Z)return;const Ve=ae(Z);oe.value=Ve||!!(Z!=null&&Z.resetRequested),Z!=null&&Z.resetRequested&&(D.value=!0)}const ze=V(()=>(xe.value||[]).map(j=>({id:String((j==null?void 0:j.id)??""),displayname:String((j==null?void 0:j.displayname)??(j==null?void 0:j.name)??(j==null?void 0:j.id)??""),color:typeof(j==null?void 0:j.color)=="string"?j.color:""})).filter(j=>j.id)),Qe=V(()=>[...Ae.value]),kt=V(()=>{var j;return((j=Y.value)==null?void 0:j.strategy)??"total_only"}),Cn=V(()=>oe.value||D.value),Le=async()=>{await ne(),te.value=!0,me()},{queueSave:it}=Tv({route:j=>E(j),postJson:X,notifyError:n,notifySuccess:t,onReload:()=>Le(),selected:Ae,groupsById:Pe,targetsWeek:G,targetsMonth:R,targetsConfig:O}),{toggleCalendar:Sn,setGroup:$n,setTarget:Ga,updateTargetsConfig:ts,selectAll:Ja}=Av({calendars:xe,selected:Ae,groupsById:Pe,targetsWeek:G,targetsMonth:R,targetsConfig:O,range:c,queueSave:it,userChangedSelection:_}),{presets:M,presetsLoading:T,presetSaving:I,presetApplying:fe,presetWarnings:st,refreshPresets:ns,savePreset:zs,loadPreset:zb,deletePreset:Vb,clearPresetWarnings:Kb}=Ev({route:(j,Z)=>E(j,Z),getJson:F,postJson:X,deleteJson:B,notifyError:n,notifySuccess:t,queueSave:it,selected:Ae,groupsById:Pe,targetsWeek:G,targetsMonth:R,targetsConfig:O,userChangedSelection:_}),ss=ie("active"),Ya=V(()=>c.value==="month"?"Month":"Week"),Za=V(()=>{const j=Yn(O.value);return c.value==="month"&&(j.totalHours=Fa(j.totalHours),j.categories=j.categories.map(Z=>({...Z,targetHours:Fa(Z.targetHours)}))),j}),_i=V(()=>{const j=Za.value;try{return Kd({config:j,stats:$,byDay:U.value||[],byCal:L.value||[],groupsById:Pe.value||{},range:c.value,from:Xe.value,to:v.value})}catch(Z){return console.error("[opsdash] targets summary failed",Z),zd(j)}}),Xa=V(()=>{if(c.value==="month"){const j=R.value||{};if(j&&Object.keys(j).length>0)return j;const Z=G.value||{},Ve={};return Object.entries(Z).forEach(([lt,Qt])=>{const $e=Number(Qt);Number.isFinite($e)&&(Ve[lt]=Fa($e))}),Ve}return G.value||{}}),Qa=V(()=>{var j;return{..._n(),...((j=O.value)==null?void 0:j.activityCard)??{}}}),Vs=V(()=>{var Ve;const j=La(),Z=((Ve=O.value)==null?void 0:Ve.balance)??j;return{...j,...Z,thresholds:{...j.thresholds,...Z.thresholds??{}},relations:{...j.relations,...Z.relations??{}},trend:{...j.trend,...Z.trend??{}},dayparts:{...j.dayparts,...Z.dayparts??{}},ui:{...j.ui,...Z.ui??{}}}}),xi=V(()=>({showInsights:!!Vs.value.ui.showInsights,showDailyStacks:!!Vs.value.ui.showDailyStacks,showNotes:!!Vs.value.ui.showNotes})),qb=V(()=>{if(!Vs.value.ui.showNotes)return"";const j=(le.value??"").trim();return j||(J.value??"").trim()}),{categoryLabelById:Gb,categoryColorMap:ki,calendarCategoryMap:Jb,calendarGroups:Tn}=Vv({calendars:xe,selected:Ae,groupsById:Pe,colorsById:ge,targetsConfig:Za,targetsSummary:_i,byCal:L,currentTargets:Xa,isDebug:to}),{balanceOverview:Yb}=Gv({stats:$,categoryColorMap:ki,balanceCardConfig:xi}),Zb=V(()=>{var Ve,lt;if(!Qa.value.showHint)return"";const Z=(Array.isArray((lt=(Ve=O.value)==null?void 0:Ve.balance)==null?void 0:lt.categories)?O.value.balance.categories:[]).map(Qt=>{const $e=String(Qt??"").trim();if(!$e)return"";const as=Gb.value[$e];return as||$e.toUpperCase()}).filter(Qt=>Qt);return Z.length?`Mapping via Sidebar  ${Z.join(" / ")}`:""}),{calendarChartData:Ks,categoryChartsById:qs}=Fv({charts:W,colorsById:ge,calendarGroups:Tn,calendarCategoryMap:Jb,targetsConfig:Za,currentTargets:Xa,activityCardConfig:Qa}),Xb=V(()=>{const j=Tn.value||[];return j.length&&[...j].sort((Ve,lt)=>(lt.summary.actualHours||0)-(Ve.summary.actualHours||0))[0]||null}),{timeSummary:Qb,activitySummary:ey}=qv({stats:$,byDay:U,charts:W,calendars:xe,selected:Ae,rangeLabel:Ya,activeDayMode:ss,topCategory:Xb}),eo=ie(null);function ty(j){eo.value=eo.value===j?null:j}function to(){return!1}const{iconSrc:ny,onIconError:Ci,appVersion:Si}=Lv({pingUrl:()=>E("ping"),getJson:F,pkgVersion:String(ob.version),root:C}),sy=V(()=>c.value==="month"?"Last month":"Last week"),ay=V(()=>c.value==="month"?"This month":"This week"),oy=V(()=>c.value==="month"?"Notes for previous month":"Notes for previous week"),ry=V(()=>c.value==="month"?"Notes for current month":"Notes for current week");function no(j){return Number(j??0).toFixed(2)}function iy(j){ss.value!==j&&(ss.value=j)}Ue(Y,j=>{te.value&&me(j)});async function ly(j){try{x.value=!0,Ie(j.themePreference),await X(E("persist"),{cals:j.selected,groups:j.groups,targets_week:j.targetsWeek,targets_month:j.targetsMonth,targets_config:j.targetsConfig,onboarding:{completed:!0,version:Bs,strategy:j.strategy,completed_at:new Date().toISOString()}}),D.value=!1,await Le(),t("Onboarding saved")}catch(Z){console.error(Z),n("Failed to save onboarding")}finally{x.value=!1}}async function cy(){try{const Z=`Before onboarding ${new Date().toISOString().slice(0,16).replace("T"," ")}`;await zs(Z)}catch(j){console.error("[opsdash] preset backup failed",j)}}async function uy(){var j;try{x.value=!0,await X(E("persist"),{onboarding:{completed:!0,version:Bs,strategy:((j=Y.value)==null?void 0:j.strategy)??"total_only",completed_at:new Date().toISOString()}}),D.value=!1,oe.value=!1,await Le(),t("You can revisit onboarding from the Targets tab any time.")}catch(Z){console.error(Z),n("Failed to update onboarding state")}finally{x.value=!1}}function dy(){oe.value||(D.value=!1)}function fy(){oe.value=!1,D.value=!1,nn(()=>{N.value+=1,D.value=!0})}return At(async()=>{console.info("[opsdash] start");try{await Le()}catch(j){console.error(j),alert("Initial load failed")}ns().catch(j=>console.warn("[opsdash] presets fetch failed",j))}),Ue(c,()=>{p.value=0,Le().catch(console.error)}),(j,Z)=>{var lt,Qt;const Ve=Bl("NcAppSidebarToggle");return S(),A("div",{id:"opsdash",class:ke(["opsdash",{"is-nav-collapsed":!s.value}])},[(S(),We(Cv,{key:N.value,visible:Cn.value,calendars:ze.value,"initial-selection":Qe.value,"initial-strategy":kt.value,"onboarding-version":m(Bs),closable:!oe.value,"initial-theme-preference":m(ce),"system-theme":m(Se),"initial-all-day-hours":((lt=m(O).value)==null?void 0:lt.allDayHours)??8,"initial-total-hours":((Qt=m(O).value)==null?void 0:Qt.totalHours)??40,"has-existing-config":ee.value,saving:x.value,onClose:dy,onSkip:uy,onComplete:ly,onSaveCurrentConfig:cy},null,8,["visible","calendars","initial-selection","initial-strategy","onboarding-version","closable","initial-theme-preference","system-theme","initial-all-day-hours","initial-total-hours","has-existing-config","saving"])),we(m(fu),{"app-name":"Operational Dashboard","show-navigation":s.value},{navigation:Fe(()=>[we(nm,{id:"opsdash-sidebar",calendars:m(xe),selected:m(Ae),"groups-by-id":m(Pe),"is-loading":m(Me),range:c.value,offset:p.value,from:m(Xe),to:m(v),"targets-week":m(G),"targets-month":m(R),"targets-config":m(O),"notes-prev":m(J),"notes-curr-draft":m(le),"notes-label-prev":sy.value,"notes-label-curr":ay.value,"notes-label-prev-title":oy.value,"notes-label-curr-title":ry.value,"is-saving-note":m(ye),"active-day-mode":ss.value,"nav-toggle-label":o.value,"nav-toggle-icon":r.value,presets:m(M),"presets-loading":m(T),"preset-saving":m(I),"preset-applying":m(fe),"preset-warnings":m(st),"theme-preference":m(ce),"effective-theme":m(pe),"system-theme":m(Se),onLoad:Le,"onUpdate:range":Z[0]||(Z[0]=$e=>{c.value=$e,p.value=0,Le()}),"onUpdate:offset":Z[1]||(Z[1]=$e=>{p.value=$e,Le()}),onSelectAll:Z[2]||(Z[2]=$e=>m(Ja)($e)),onToggleCalendar:Z[3]||(Z[3]=$e=>m(Sn)($e)),onSetGroup:Z[4]||(Z[4]=$e=>m($n)($e.id,$e.n)),onSetTarget:Z[5]||(Z[5]=$e=>m(Ga)($e.id,$e.h)),"onUpdate:notes":Z[6]||(Z[6]=$e=>le.value=$e),onSaveNotes:m(he),"onUpdate:targetsConfig":m(ts),"onUpdate:activeMode":iy,onToggleNav:a,onSavePreset:m(zs),onLoadPreset:m(zb),onDeletePreset:m(Vb),onRefreshPresets:m(ns),onClearPresetWarnings:m(Kb),onRerunOnboarding:fy,onSetThemePreference:m(Ie)},null,8,["calendars","selected","groups-by-id","is-loading","range","offset","from","to","targets-week","targets-month","targets-config","notes-prev","notes-curr-draft","notes-label-prev","notes-label-curr","notes-label-prev-title","notes-label-curr-title","is-saving-note","active-day-mode","nav-toggle-label","nav-toggle-icon","presets","presets-loading","preset-saving","preset-applying","preset-warnings","theme-preference","effective-theme","system-theme","onSaveNotes","onUpdate:targetsConfig","onSavePreset","onLoadPreset","onDeletePreset","onRefreshPresets","onClearPresetWarnings","onSetThemePreference"])]),"sidebar-toggle":Fe(()=>[we(Ve,{open:s.value,onToggle:a},null,8,["open"])]),default:Fe(()=>[i("div",rb,[i("div",ib,[i("div",lb,[f.value?(S(),A("div",cb,[i("button",{class:"range-toolbar__btn",type:"button",onClick:a,"aria-expanded":s.value,"aria-controls":"opsdash-sidebar","aria-label":o.value},P(r.value),9,ub),i("button",{class:"range-toolbar__btn",type:"button",disabled:m(Me),onClick:u}," Refresh ",8,db),Z[12]||(Z[12]=i("div",{class:"range-toolbar__divider","aria-hidden":"true"},null,-1)),i("button",{class:"range-toolbar__btn",type:"button",disabled:m(Me),onClick:b,"aria-pressed":c.value==="month"},P(d.value),9,fb),i("div",pb,[i("button",{class:"range-toolbar__btn",type:"button",disabled:m(Me),onClick:h},"  ",8,gb),i("span",{class:"range-toolbar__label",title:g.value},P(g.value),9,hb),i("button",{class:"range-toolbar__btn",type:"button",disabled:m(Me),onClick:y},"  ",8,mb)])])):se("",!0),i("div",vb,[i("div",bb,[i("img",{src:m(ny),onError:Z[7]||(Z[7]=(...$e)=>m(Ci)&&m(Ci)(...$e)),class:"app-icon",alt:"","aria-hidden":"true"},null,40,yb),Z[13]||(Z[13]=i("span",null,"Operational Dashboard",-1)),i("span",{class:"chip",textContent:P(c.value.toUpperCase())},null,8,wb)]),i("div",_b,[m(Me)?(S(),We(m(gu),{key:0,size:16})):se("",!0),i("span",{textContent:P(m(Ke))},null,8,xb),m(ue)?(S(),A("span",kb," Partial data")):se("",!0)])]),m(ue)?(S(),A("div",{key:1,class:"banner warn",title:k.value},[Z[14]||(Z[14]=Ce(" Showing partial data to keep things fast. ",-1)),m(Ne)&&m(Ne).totalProcessed!=null?(S(),A(de,{key:0},[Ce(" Processed "+P(m(Ne).totalProcessed)+" items. ",1)],64)):se("",!0)],8,Cb)):se("",!0),i("div",Sb,[we(bd,{summary:m(Qb),mode:ss.value,config:m(O).timeSummary},null,8,["summary","mode","config"]),we(Ud,{summary:_i.value,config:m(O),groups:m(Tn)},null,8,["summary","config","groups"]),we(hf,{summary:m(ey),"range-label":Ya.value,"category-hint":Zb.value,config:Qa.value},null,8,["summary","range-label","category-hint","config"]),we(Cf,{overview:m(Yb),"range-label":Ya.value,config:xi.value,note:qb.value},null,8,["overview","range-label","config","note"])]),i("div",$b,[i("a",{href:"#",class:ke({active:l.value==="cal"}),onClick:Z[8]||(Z[8]=Wt($e=>l.value="cal",["prevent"]))},"By Calendar",2),i("a",{href:"#",class:ke({active:l.value==="day"}),onClick:Z[9]||(Z[9]=Wt($e=>l.value="day",["prevent"]))},"By Day",2),i("a",{href:"#",class:ke({active:l.value==="top"}),onClick:Z[10]||(Z[10]=Wt($e=>l.value="top",["prevent"]))},"Longest Tasks",2),i("a",{href:"#",class:ke({active:l.value==="heat"}),onClick:Z[11]||(Z[11]=Wt($e=>l.value="heat",["prevent"]))},"Heatmap",2)]),Fn(i("div",Tb,[m(L).length===0?(S(),We(m(Os),{key:0,name:"No data",description:"Try changing the range or calendars"})):(S(),A(de,{key:1},[we(Hu,{rows:m(L),n2:no,targets:Xa.value,groups:m(Tn)},null,8,["rows","targets","groups"]),m(O).ui.showCalendarCharts&&(m(Ks).pie||m(Ks).stacked)?(S(),A("div",Mb,[Z[17]||(Z[17]=i("h3",{class:"section-title"},"Calendars (all)",-1)),i("div",Ab,[i("div",Eb,[Z[15]||(Z[15]=i("div",{class:"chart-card__title"},"Distribution by calendar",-1)),we(si,{data:m(Ks).pie,"colors-by-id":m(ge),"colors-by-name":m(be)},null,8,["data","colors-by-id","colors-by-name"])]),i("div",Db,[Z[16]||(Z[16]=i("div",{class:"chart-card__title"},"Hours per day",-1)),we(ai,{stacked:m(Ks).stacked,legacy:m(W).perDay,"colors-by-id":m(ge)},null,8,["stacked","legacy","colors-by-id"])])])])):se("",!0),m(O).ui.showCategoryCharts&&m(Tn).length?(S(),A("div",Nb,[Z[20]||(Z[20]=i("h3",{class:"section-title"},"Categories",-1)),(S(!0),A(de,null,De(m(Tn),$e=>{var as,$i,Ti,Mi;return S(),A(de,{key:"cat-charts-"+$e.id},[(as=m(qs)[$e.id])!=null&&as.pie||($i=m(qs)[$e.id])!=null&&$i.stacked?(S(),A("div",Ib,[i("div",Pb,[i("span",{class:"dot",style:ct({background:m(ki)[$e.id]||"var(--brand)"})},null,4),i("span",Lb,P($e.label),1)]),i("div",Ob,[i("div",Fb,[Z[18]||(Z[18]=i("div",{class:"chart-card__title"},"Calendar share",-1)),we(si,{data:(Ti=m(qs)[$e.id])==null?void 0:Ti.pie,"colors-by-id":m(ge),"colors-by-name":m(be)},null,8,["data","colors-by-id","colors-by-name"])]),i("div",Hb,[Z[19]||(Z[19]=i("div",{class:"chart-card__title"},"Hours per day",-1)),we(ai,{stacked:(Mi=m(qs)[$e.id])==null?void 0:Mi.stacked,legacy:null,"colors-by-id":m(ge)},null,8,["stacked","colors-by-id"])])])])):se("",!0)],64)}),128))])):se("",!0)],64))],512),[[Ps,l.value==="cal"]]),Fn(i("div",Bb,[m(U).length===0?(S(),We(m(Os),{key:0,name:"No data",description:"Try changing the range or calendars"})):(S(),We(zu,{key:1,rows:m(U),n2:no,link:m(q)},null,8,["rows","link"]))],512),[[Ps,l.value==="day"]]),Fn(i("div",Rb,[m(z).length===0?(S(),We(m(Os),{key:0,name:"No data",description:"Try changing the range or calendars"})):(S(),We(ed,{key:1,rows:m(z),n2:no,"details-index":eo.value,onToggle:ty},null,8,["rows","details-index"]))],512),[[Ps,l.value==="top"]]),Fn(i("div",Wb,[!m(W).hod||!m(W).hod.matrix||m(W).hod.matrix.length===0?(S(),We(m(Os),{key:0,name:"No data",description:"Try changing the range or calendars"})):(S(),A(de,{key:1},[we(mu,{hod:m(W).hod},null,8,["hod"]),Z[21]||(Z[21]=i("div",{class:"hint"},"247 Heatmap: cumulated hours by weekday (rows) and hour (columns).",-1))],64))],512),[[Ps,l.value==="heat"]]),i("div",jb,[m(Si)?(S(),A(de,{key:0},[Ce(" Operational Dashboard  v"+P(m(Si))+"  Built by Blade34242 @ Gellert Innovation ",1)],64)):(S(),A(de,{key:1},[Ce(" Operational Dashboard  v0.4.3  Built by Blade34242 @ Gellert Innovation ")],64))])])])])]),_:1},8,["show-navigation"])],2)}}});function qa(){const e=document.getElementById("app");if(e){try{console.log("[opsdash] booting");const t=cu(Ub);t.config.errorHandler=(a,o,r)=>{const l=o!=null&&o.type&&o.type.name?o.type.name:"",c={err:a,info:r,name:l,stack:a instanceof Error?a.stack:void 0},p=window;Array.isArray(p.__opsdashErrors)||(p.__opsdashErrors=[]),p.__opsdashErrors.push(c),console.error("[opsdash] Vue error",c)};const n=t.mount(e),s=window;s.__opsdashApp=t,s.__opsdashRoot=n,Jv(),console.log("[opsdash] mounted")}catch(t){console.error("Mount failed",t)}return}document.readyState==="complete"||document.readyState==="interactive"?setTimeout(qa,50):window.addEventListener("DOMContentLoaded",qa,{once:!0})}qa()})();
