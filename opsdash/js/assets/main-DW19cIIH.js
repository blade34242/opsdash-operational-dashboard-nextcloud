(function(){"use strict";var ps=document.createElement("style");ps.textContent=`table[data-v-2efa83d5]{width:100%;border-collapse:collapse;font-size:13px}thead th[data-v-2efa83d5]{text-align:left;padding:6px 8px;font-weight:600;color:var(--muted);border-bottom:1px solid var(--line)}thead th.num[data-v-2efa83d5]{text-align:right}tbody td[data-v-2efa83d5]{padding:6px 8px;border-top:1px solid var(--line);vertical-align:top}.col-w-42[data-v-2efa83d5]{width:42%}.col-w-12[data-v-2efa83d5]{width:12%}.col-w-14[data-v-2efa83d5]{width:14%}.col-w-18[data-v-2efa83d5]{width:18%}.group-row td[data-v-2efa83d5]{padding-top:12px;padding-bottom:8px;background:color-mix(in srgb,var(--muted) 6%,transparent)}.group-header[data-v-2efa83d5]{display:flex;justify-content:space-between;align-items:center;gap:12px;font-size:12px}.group-label[data-v-2efa83d5]{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--fg)}.group-label .dot[data-v-2efa83d5]{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 12%,transparent)}.group-meta[data-v-2efa83d5]{display:flex;align-items:center;gap:8px;flex-wrap:wrap;color:var(--muted)}.group-meta .summary[data-v-2efa83d5]{font-size:12px}.group-meta .summary-percent[data-v-2efa83d5]{font-variant-numeric:tabular-nums;color:var(--fg);font-weight:600}.badge[data-v-2efa83d5]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-2efa83d5]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-2efa83d5]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-2efa83d5]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-2efa83d5]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-2efa83d5]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.cell[data-v-2efa83d5]{display:flex;flex-direction:column;gap:4px}.row-name[data-v-2efa83d5]{font-weight:600;color:var(--fg)}.progress[data-v-2efa83d5]{position:relative;height:6px;background:color-mix(in srgb,var(--muted) 22%,transparent);border-radius:999px;overflow:hidden}.progress-bar[data-v-2efa83d5]{height:100%;border-radius:999px;background:var(--brand);transition:width .2s ease}.progress-today[data-v-2efa83d5]{position:absolute;top:-2px;height:10px;border-radius:8px;opacity:.9;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 4px #0000001f}.progress-chip[data-v-2efa83d5]{font-size:10px;font-weight:700;color:#fff;padding:0 6px;white-space:nowrap;text-shadow:0 1px 3px rgba(0,0,0,.25)}.num[data-v-2efa83d5]{text-align:right;font-variant-numeric:tabular-nums;color:var(--fg)}.hint[data-v-2efa83d5]{color:var(--muted);font-size:11px}.delta[data-v-2efa83d5]{font-weight:600}.delta.pos[data-v-2efa83d5]{color:var(--pos)}.delta.neg[data-v-2efa83d5]{color:var(--neg)}.empty-row td.empty[data-v-2efa83d5]{font-style:italic;color:var(--muted);text-align:center}.shortcuts-box[data-v-4f8c8947]{margin:8px 0 12px;background:color-mix(in oklab,#111827,#1f2937 60%);border:1px solid color-mix(in oklab,#4b5563,transparent 20%);border-radius:10px;box-shadow:0 10px 18px #0000002e;padding:10px}.shortcuts-box__header[data-v-4f8c8947]{display:flex;align-items:center;justify-content:space-between;font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.04em;color:#cbd5f5;margin-bottom:8px}.shortcuts-box__body[data-v-4f8c8947]{display:flex;flex-direction:column;gap:10px}.shortcuts-box__title[data-v-4f8c8947]{font-size:11px;font-weight:700;color:#9ca3af;text-transform:uppercase;letter-spacing:.04em;margin-bottom:4px}.shortcuts-box__group ul[data-v-4f8c8947]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:6px}.shortcuts-box__group li[data-v-4f8c8947]{display:grid;grid-template-columns:1fr auto;gap:6px 10px;align-items:center;color:#e5e7eb;font-size:12px}.shortcuts-box__group .combo[data-v-4f8c8947]{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:11px;background:#0f172acc;border-radius:6px;padding:2px 6px;color:#f8fafc}.shortcuts-box__group .desc[data-v-4f8c8947]{grid-column:1 / -1;color:#94a3b8;font-size:11px}.forecast-block select[data-v-4f8c8947]{width:100%}.section-hint[data-v-4f8c8947]{background:var(--color-background-hover, rgba(0, 0, 0, .05));border:1px solid var(--color-border, #d1d5db);border-left:4px solid var(--color-primary-element, #2563eb);border-radius:8px;padding:10px 12px;margin:6px 0 10px;color:var(--color-text-maxcontrast, inherit);box-shadow:0 1px 2px var(--color-box-shadow, rgba(0, 0, 0, .08))}.section-hint.compact[data-v-4f8c8947]{margin:4px 0 6px;padding:8px 10px}.hint-title[data-v-4f8c8947]{display:block;font-weight:600;margin-bottom:2px}.hint-body[data-v-4f8c8947]{display:block;line-height:1.4}.field .label[data-v-4f8c8947]{font-weight:600;color:var(--color-text-maxcontrast, inherit)}.field input[type=number][data-v-4f8c8947],.field select[data-v-4f8c8947]{border-radius:6px;padding:6px 8px;border:1px solid var(--color-border, #d1d5db);background:var(--color-main-background, #fff);color:var(--color-text-maxcontrast, inherit)}.field input[disabled][data-v-4f8c8947],.field select[disabled][data-v-4f8c8947]{opacity:.6;cursor:not-allowed}.input-message.warning[data-v-4f8c8947]{color:var(--warning, #f97316)}.input-message.error[data-v-4f8c8947]{color:var(--neg, #dc2626)}.field-grid[data-v-4f8c8947]{align-items:start}.sb-actions--secondary[data-v-4f8c8947]{margin-top:8px;flex-wrap:wrap;gap:6px}.sb-title[data-v-1c577e0e]{font-weight:600;margin-bottom:6px}.sb-description[data-v-1c577e0e]{font-size:12px;color:var(--text-color-tertiary);margin:0 0 10px}.theme-section[data-v-1c577e0e]{border:1px solid color-mix(in oklab,var(--line),transparent 30%);border-radius:10px;padding:12px;margin-bottom:16px;background:color-mix(in oklab,var(--card),transparent 6%);display:flex;flex-direction:column;gap:12px}.theme-header[data-v-1c577e0e]{display:flex;flex-direction:column;gap:2px}.theme-title[data-v-1c577e0e]{font-weight:600;font-size:13px;color:var(--fg)}.theme-hint[data-v-1c577e0e]{font-size:11px;color:var(--muted)}.theme-options[data-v-1c577e0e]{display:flex;flex-direction:column;gap:8px}.theme-option[data-v-1c577e0e]{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,var(--line),transparent 40%);background:color-mix(in oklab,var(--card),transparent 8%)}.theme-option input[type=radio][data-v-1c577e0e]{margin-top:4px}.theme-copy[data-v-1c577e0e]{display:flex;flex-direction:column;gap:2px;font-size:12px}.theme-option__title[data-v-1c577e0e]{font-weight:600;color:var(--fg)}.theme-option__desc[data-v-1c577e0e]{color:var(--muted)}.sb-title[data-v-32d12bd1]{font-weight:600;margin-bottom:6px}.sb-description[data-v-32d12bd1]{font-size:12px;color:var(--text-color-tertiary);margin:0 0 10px}.setup-actions[data-v-32d12bd1]{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:12px}.setup-actions .import-input[data-v-32d12bd1]{display:none}.preset-form[data-v-32d12bd1]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.preset-label[data-v-32d12bd1]{font-size:12px;font-weight:600}.preset-form input[data-v-32d12bd1]{width:100%;padding:6px 8px;border-radius:4px;border:1px solid var(--color-border);background:var(--color-main-background);color:var(--color-main-text)}.preset-save[data-v-32d12bd1]{align-self:flex-start}.preset-error[data-v-32d12bd1]{color:var(--color-error);font-size:12px}.preset-warnings[data-v-32d12bd1]{border:1px solid var(--color-warning);background:color-mix(in srgb,var(--color-warning) 10%,transparent);border-radius:6px;padding:8px;margin-bottom:12px}.warnings-title[data-v-32d12bd1]{font-weight:600;margin-bottom:4px}.preset-warnings ul[data-v-32d12bd1]{padding-left:18px;margin:0 0 6px}.preset-clear[data-v-32d12bd1]{padding:2px 6px}.preset-header[data-v-32d12bd1]{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.preset-header h3[data-v-32d12bd1]{margin:0;font-size:13px;font-weight:600}.preset-empty[data-v-32d12bd1]{font-size:12px;color:var(--text-color-tertiary)}.preset-list[data-v-32d12bd1]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}.preset-item[data-v-32d12bd1]{border:1px solid var(--color-border);border-radius:6px;padding:8px;display:flex;flex-direction:column;gap:6px;background:var(--color-main-background)}.preset-meta[data-v-32d12bd1]{display:flex;flex-direction:column;gap:2px}.preset-name[data-v-32d12bd1]{font-weight:600}.preset-info[data-v-32d12bd1]{display:flex;flex-wrap:wrap;gap:8px;font-size:11px;color:var(--text-color-tertiary)}.preset-actions[data-v-32d12bd1]{display:flex;gap:6px}.report-card[data-v-3badd082]{border:1px solid var(--color-border-maxcontrast);border-radius:12px;padding:1rem;margin-bottom:1rem;background:var(--color-main-background)}.report-card__header[data-v-3badd082]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.report-card__title[data-v-3badd082]{font-weight:600;font-size:1rem}.report-card__subtitle[data-v-3badd082]{font-size:.85rem;color:var(--color-text-maxcontrast)}.report-form[data-v-3badd082]{display:flex;flex-direction:column;gap:.75rem}.report-form--disabled[data-v-3badd082]{opacity:.6}.report-field[data-v-3badd082]{display:flex;flex-direction:column;gap:.35rem;font-size:.85rem}.report-field select[data-v-3badd082]{border-radius:8px;padding:.35rem .45rem;border:1px solid var(--color-border)}.report-field--checkbox[data-v-3badd082]{flex-direction:row;align-items:center;gap:.5rem}.report-risk[data-v-3badd082]{display:flex;flex-direction:column;gap:.25rem}.report-risk__header[data-v-3badd082]{display:flex;justify-content:space-between;font-size:.85rem;align-items:center}.report-notify[data-v-3badd082]{border:1px dashed var(--color-border);border-radius:8px;padding:.5rem;display:flex;gap:1rem;flex-wrap:wrap}.report-notify legend[data-v-3badd082]{font-size:.85rem;font-weight:600}.report-actions[data-v-3badd082]{display:flex;justify-content:flex-end;margin-top:.5rem}.report-save[data-v-3badd082]{border-radius:999px;border:1px solid var(--color-border-maxcontrast);padding:.35rem .9rem;background:var(--color-main-background);cursor:pointer}.report-save[data-v-3badd082]:disabled{opacity:.6;cursor:not-allowed}.switch[data-v-3badd082]{position:relative;display:inline-block;width:38px;height:20px}.switch input[data-v-3badd082]{opacity:0;width:0;height:0}.switch span[data-v-3badd082]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--color-border);transition:.2s;border-radius:999px}.switch span[data-v-3badd082]:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:#fff;transition:.2s;border-radius:50%}.switch input:checked+span[data-v-3badd082]{background-color:var(--color-primary)}.switch input:checked+span[data-v-3badd082]:before{transform:translate(18px)}.report-saving[data-v-3badd082]{font-size:.85rem;color:var(--color-text-maxcontrast)}.input-message[data-v-a318502d]{font-size:11px;margin-top:4px;color:var(--muted)}.input-message.error[data-v-a318502d]{color:var(--neg)}.input-message.warning[data-v-a318502d]{color:var(--warning)}.onboarding-fade-enter-active,.onboarding-fade-leave-active{transition:opacity .2s ease}.onboarding-fade-enter-from,.onboarding-fade-leave-to{opacity:0}.onboarding-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2000;display:flex;align-items:center;justify-content:center;padding:24px}.onboarding-backdrop{position:absolute;top:0;right:0;bottom:0;left:0;background:#0f172a73}.onboarding-panel{position:relative;z-index:1;width:min(960px,100%);max-height:calc(100vh - 48px);background:var(--color-main-background, #fff);border-radius:12px;box-shadow:0 18px 48px #0f172a59;display:flex;flex-direction:column;padding:24px 28px}.onboarding-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:16px}.onboarding-actions{display:flex;align-items:center;gap:12px}.onboarding-title h2{margin:0;font-size:1.6rem}.onboarding-title .subtitle{margin:4px 0 0;color:var(--color-text-light)}.onboarding-overlay .skip-link{background:none;border:none;color:var(--color-primary);cursor:pointer;font-size:.95rem}.onboarding-overlay .close-btn{background:none;border:none;font-size:1.4rem;line-height:1;cursor:pointer;color:var(--color-text-light)}.onboarding-overlay .close-btn:hover{color:var(--color-primary)}.onboarding-step-nav{display:flex;flex-wrap:wrap;gap:8px;margin:0 0 12px}.onboarding-overlay .step-pill{border:1px solid var(--color-border);background:var(--color-background-contrast);padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer;color:var(--color-text)}.onboarding-overlay .step-pill.active{border-color:var(--color-primary);color:var(--color-primary);background:#2563eb14}.onboarding-overlay .step-pill:disabled{opacity:.6;cursor:default}.onboarding-body{flex:1;overflow-y:auto;padding-right:8px;margin-right:-8px}.onboarding-step h3{margin-top:0}.onboarding-overlay .highlights{padding-left:18px}.onboarding-overlay .config-warning{border:1px solid color-mix(in srgb,var(--color-warning, #f97316) 35%,transparent);background:color-mix(in srgb,var(--color-warning, #f97316) 12%,transparent);border-radius:8px;padding:12px;margin:12px 0;display:flex;flex-direction:column;gap:8px}.onboarding-overlay .config-warning p{margin:0;font-size:.95rem;color:var(--color-text)}.onboarding-overlay .hint{color:var(--color-text-light);margin-top:12px}.onboarding-overlay .snapshot-notice{margin-top:12px;padding:10px 12px;border-radius:8px;font-size:.9rem}.onboarding-overlay .snapshot-notice--success{background:color-mix(in srgb,#22c55e 15%,transparent);color:#14532d}.onboarding-overlay .snapshot-notice--error{background:color-mix(in srgb,#ef4444 15%,transparent);color:#7f1d1d}.onboarding-overlay .strategy-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.onboarding-overlay .strategy-card{border:1px solid var(--color-border);border-radius:8px;padding:16px;cursor:pointer;display:flex;flex-direction:column;gap:8px;transition:border-color .15s ease,box-shadow .15s ease}.onboarding-overlay .strategy-card.active{border-color:var(--color-primary);box-shadow:0 0 0 2px #3b82f633}.onboarding-overlay .strategy-card h4{margin:0}.onboarding-overlay .strategy-card .subtitle{color:var(--color-text-light);margin:0}.onboarding-overlay .strategy-card footer{margin-top:auto;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .calendar-list{display:grid;gap:8px;margin-top:8px}.onboarding-overlay .calendar-item{display:grid;grid-template-columns:auto auto 1fr;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--color-border);border-radius:6px}.onboarding-overlay .calendar-item.checked{border-color:var(--color-primary)}.onboarding-overlay .calendar-item input{margin:0}.onboarding-overlay .calendar-item .dot{width:12px;height:12px;border-radius:50%}.onboarding-overlay .warning{color:var(--color-error);margin-top:12px}.onboarding-overlay .review-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .review-grid h5{margin:0 0 8px;font-size:.95rem;color:var(--color-text-light)}.onboarding-overlay .categories-editor{display:grid;gap:16px}.onboarding-overlay .category-card{border:1px solid var(--color-border);border-radius:8px;padding:16px;background:var(--color-main-background, #fff);display:flex;flex-direction:column;gap:12px}.onboarding-overlay .category-card__header{display:flex;gap:12px;align-items:center}.onboarding-overlay .category-color-indicator{width:14px;height:14px;border-radius:50%;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);flex-shrink:0}.onboarding-overlay .category-name{flex:1;padding:6px 8px;border:1px solid var(--color-border);border-radius:4px}.onboarding-overlay .category-actions{display:flex;gap:8px}.onboarding-overlay .remove-category{background:none;border:none;color:var(--color-text-light);cursor:pointer;font-size:1.1rem}.onboarding-overlay .remove-category:disabled{opacity:.4;cursor:default}.onboarding-overlay .remove-category:not(:disabled):hover{color:var(--color-error)}.onboarding-overlay .category-card__fields{display:flex;flex-wrap:wrap;gap:16px}.onboarding-overlay .color-field{display:flex;flex-direction:column;gap:6px;position:relative}.onboarding-overlay .color-link{align-self:flex-start;border:none;background:transparent;padding:0;font-size:12px;color:var(--brand, #2563eb);text-decoration:underline;cursor:pointer}.onboarding-overlay .color-link:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .color-popover{position:absolute;top:calc(100% + 6px);left:0;z-index:30;min-width:160px;padding:10px;border-radius:10px;border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);background:var(--color-main-background, #fff);box-shadow:0 12px 32px #0f172a40;display:flex;flex-direction:column;gap:8px}.onboarding-overlay .color-popover:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .swatch-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,20px));justify-content:flex-start;gap:6px}.onboarding-overlay .color-swatch{width:18px;height:18px;aspect-ratio:1 / 1;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.onboarding-overlay .color-swatch.active{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 55%)}.onboarding-overlay .color-swatch:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:1px}.onboarding-overlay .custom-color{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .color-input{width:44px;height:26px;padding:0;border-radius:6px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:transparent}.onboarding-overlay .add-category{justify-self:flex-start}.onboarding-overlay .category-total{font-size:.9rem;color:var(--color-text-light)}.onboarding-overlay .calendar-assignments{margin-top:24px;display:grid;gap:12px}.onboarding-overlay .assignment-row{display:grid;grid-template-columns:1fr minmax(160px,220px);gap:12px;align-items:center}.onboarding-overlay .assignment-row select{padding:6px 8px}.onboarding-overlay .cal-name{font-size:.95rem}.onboarding-footer{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.onboarding-overlay .preferences-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}.onboarding-overlay .pref-card{border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);border-radius:10px;padding:12px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:12px}.onboarding-overlay .pref-card h4{margin:0}.onboarding-overlay .pref-card--deck .toggle-row{display:flex;gap:10px;align-items:center;font-size:.95rem}.onboarding-overlay .pref-card--deck input[type=checkbox]{transform:scale(1.05)}.onboarding-overlay .deck-board-list{border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);border-radius:8px;padding:10px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:8px}.onboarding-overlay .deck-board-options{display:flex;flex-direction:column;gap:6px}.onboarding-overlay .deck-board-option{display:flex;gap:8px;align-items:center;font-size:.9rem}.onboarding-overlay .deck-status{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .deck-status--error{color:var(--color-error)}.onboarding-overlay .pref-desc{margin:0;font-size:.9rem;color:var(--color-text-light)}.onboarding-overlay .pref-hint{margin:0;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .theme-options{display:flex;flex-direction:column;gap:8px}.onboarding-overlay .theme-option{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:color-mix(in oklab,var(--color-main-background, #fff),transparent 8%)}.onboarding-overlay .theme-option input[type=radio]{margin-top:4px}.onboarding-overlay .theme-copy{display:flex;flex-direction:column;gap:2px;font-size:.9rem}.onboarding-overlay .theme-option__title{font-weight:600;color:var(--color-text)}.onboarding-overlay .theme-option__desc{color:var(--color-text-light);font-size:.85rem}.onboarding-overlay .theme-preview{font-size:.85rem;color:var(--color-text-light)}:global(body.opsdash-onboarding-lock){overflow:hidden}.shortcuts-overlay[data-v-f8126e32]{position:fixed;top:0;right:0;bottom:0;left:0;background:color-mix(in srgb,var(--color-background-dark-default, rgba(0, 0, 0, .85)) 90%,transparent);display:flex;align-items:center;justify-content:center;padding:24px;z-index:9999}.shortcuts-panel[data-v-f8126e32]{width:min(720px,100%);max-height:90vh;overflow:auto;background:var(--color-main-background, #fff);border-radius:16px;box-shadow:0 12px 48px #00000059;padding:20px;display:flex;flex-direction:column;gap:16px;outline:none}.shortcuts-header[data-v-f8126e32]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}.shortcuts-title h2[data-v-f8126e32]{margin:0;font-size:20px}.shortcuts-hint[data-v-f8126e32]{margin:4px 0 0;font-size:13px;color:var(--text-color-tertiary)}.shortcuts-close[data-v-f8126e32]{border:none;background:transparent;font-size:24px;line-height:1;cursor:pointer;color:var(--text-color-primary, #111)}.shortcuts-body[data-v-f8126e32]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}.shortcuts-group h3[data-v-f8126e32]{margin:0 0 8px;font-size:14px;text-transform:uppercase;color:var(--text-color-tertiary);letter-spacing:.06em}.shortcuts-group ul[data-v-f8126e32]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}.shortcuts-group li[data-v-f8126e32]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 0;border-bottom:1px solid color-mix(in srgb,var(--color-border, rgba(0, 0, 0, .1)) 60%,transparent)}.shortcuts-group li[data-v-f8126e32]:last-child{border-bottom:none}.shortcut-label[data-v-f8126e32]{font-weight:600;display:flex;flex-direction:column;gap:2px}.shortcut-label small[data-v-f8126e32]{font-weight:400;font-size:12px;color:var(--text-color-tertiary)}.shortcut-combo[data-v-f8126e32]{display:inline-flex;gap:6px}kbd[data-v-f8126e32]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;padding:4px 8px;border-radius:6px;border:1px solid color-mix(in srgb,var(--color-border, rgba(0, 0, 0, .2)) 80%,transparent);background:color-mix(in srgb,var(--color-main-background, #fff) 80%,rgba(0,0,0,.05));color:var(--text-color-primary, #111);box-shadow:inset 0 -1px #fff9}.shortcuts-footer[data-v-f8126e32]{display:flex;justify-content:flex-end}@media (max-width: 600px){.shortcuts-panel[data-v-f8126e32]{padding:16px}.shortcuts-body[data-v-f8126e32]{grid-template-columns:1fr}}.deck-panel[data-v-f53d016f]{display:flex;flex-direction:column;gap:calc(16px * var(--widget-space, 1));height:100%;min-height:0;font-size:var(--widget-font, 14px)}.deck-panel__header[data-v-f53d016f]{display:flex;align-items:center;justify-content:space-between}.deck-panel__title[data-v-f53d016f]{font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)));font-weight:600}.deck-panel__subtitle[data-v-f53d016f]{font-size:calc(14px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-panel__actions[data-v-f53d016f]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1))}.deck-panel__count[data-v-f53d016f]{font-size:calc(14px * var(--widget-scale, 1));background:var(--color-background-darker);border:1px solid var(--color-border-dark);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(12px * var(--widget-space, 1))}.deck-panel__refresh[data-v-f53d016f]{border:1px solid var(--color-primary);background:transparent;color:var(--color-primary);border-radius:999px;padding:calc(4px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));font-size:calc(14px * var(--widget-scale, 1));cursor:pointer}.deck-panel__refresh[data-v-f53d016f]:disabled{opacity:.6;cursor:default}.deck-panel__link[data-v-f53d016f]{font-size:calc(14px * var(--widget-scale, 1));text-decoration:none;color:var(--color-text-maxcontrast)}.deck-panel__loading[data-v-f53d016f]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));color:var(--color-text-maxcontrast)}.deck-panel__filters[data-v-f53d016f]{display:flex;gap:calc(8px * var(--widget-space, 1));flex-wrap:wrap}.deck-panel__body[data-v-f53d016f]{flex:1;min-height:0;overflow:auto;padding-right:calc(4px * var(--widget-space, 1))}.deck-filter-btn[data-v-f53d016f]{border:1px solid var(--color-border-maxcontrast);background:var(--color-main-background);border-radius:999px;padding:calc(3px * var(--widget-space, 1)) calc(14px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1));cursor:pointer;display:inline-flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.deck-filter-btn.is-draggable[data-v-f53d016f]{cursor:grab}.deck-filter-btn.is-draggable[data-v-f53d016f]:active{cursor:grabbing}.deck-filter-btn.active[data-v-f53d016f]{border-color:var(--color-primary);color:var(--color-primary)}.deck-filter-count[data-v-f53d016f]{font-size:calc(11px * var(--widget-scale, 1));opacity:.7}.deck-filter-btn[data-v-f53d016f]:disabled{opacity:.5;cursor:not-allowed}.deck-panel__error[data-v-f53d016f]{padding:calc(12px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));background:var(--color-error-hover);color:var(--color-error-text)}.deck-card-list[data-v-f53d016f]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:calc(16px * var(--widget-space, 1))}.deck-card[data-v-f53d016f]{border:1px solid var(--color-border);border-radius:calc(12px * var(--widget-space, 1));padding:calc(14px * var(--widget-space, 1));background:var(--color-main-background);display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1))}.deck-card__status-row[data-v-f53d016f]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));font-size:calc(14px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-card__status[data-v-f53d016f]{font-weight:600;text-transform:uppercase;font-size:calc(12px * var(--widget-scale, 1));letter-spacing:.05em}.deck-card__status.done[data-v-f53d016f]{color:var(--color-success)}.deck-card__status.archived[data-v-f53d016f]{color:var(--color-text-maxcontrast)}.deck-card__title[data-v-f53d016f]{font-size:calc(16px * var(--widget-scale, 1));font-weight:600;color:var(--color-text)}.deck-card__meta[data-v-f53d016f]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1))}.deck-card__board[data-v-f53d016f]{border:2px solid var(--color-border);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;text-transform:uppercase;font-size:calc(11px * var(--widget-scale, 1))}.deck-card__stack[data-v-f53d016f]{color:var(--color-text-maxcontrast)}.deck-card__labels[data-v-f53d016f]{display:flex;gap:calc(6px * var(--widget-space, 1));flex-wrap:wrap}.deck-card__label[data-v-f53d016f]{color:#fff;font-size:calc(11px * var(--widget-scale, 1));padding:calc(2px * var(--widget-space, 1)) calc(7px * var(--widget-space, 1));border-radius:999px}.deck-card__assignees[data-v-f53d016f]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.deck-card__assignees-label[data-v-f53d016f]{color:var(--color-text-maxcontrast)}.deck-card__assignee[data-v-f53d016f]{font-weight:500}.add-menu[data-v-022ff937]{position:fixed;transform:translate(-4px,-4px);background:var(--card,#fff);border:1px solid var(--color-border,#e5e7eb);border-radius:10px;padding:10px 10px 12px;box-shadow:0 12px 32px #00000026;z-index:60;min-width:200px}.add-menu__header[data-v-022ff937]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px}.add-menu__title[data-v-022ff937]{font-weight:600}.add-menu__hint[data-v-022ff937]{font-size:11px;color:var(--muted)}.add-menu__list[data-v-022ff937]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:6px}.add-btn[data-v-022ff937]{border:1px solid var(--color-border,#d1d5db);background:color-mix(in oklab,var(--card,#fff),var(--color-primary,#2563EB) 8%);color:var(--fg,#0f172a);padding:8px 10px;border-radius:8px;font-weight:600;text-align:left;transition:background .12s ease,transform .12s ease,border-color .12s ease}.add-btn[data-v-022ff937]:hover{background:color-mix(in oklab,var(--card,#fff),var(--color-primary,#2563EB) 16%);border-color:color-mix(in oklab,var(--color-primary,#2563EB),#d1d5db 50%);transform:translateY(-1px)}.add-btn[data-v-022ff937]:active{transform:translateY(0)}.ghost[data-v-022ff937]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.layout-grid[data-v-efb6134a]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:100%;position:relative;--grid-row: 24px;grid-auto-rows:var(--grid-row);grid-auto-flow:row}.layout-grid.show-guides[data-v-efb6134a]{background-image:linear-gradient(to right,rgba(148,163,184,.15) 1px,transparent 1px),linear-gradient(to bottom,rgba(148,163,184,.12) 1px,transparent 1px);background-size:calc((100% - 36px)/4) 100%,100% var(--grid-row);background-position:0 0,0 0}.layout-grid.show-guides[data-v-efb6134a]:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.layout-item[data-v-efb6134a]{min-width:0;position:relative;display:flex;padding:0;cursor:grab;align-self:stretch;overflow:hidden;--widget-scale:1;--widget-space:1;--widget-density:1;--widget-text-scale: var(--widget-scale);--widget-pad: calc(12px * var(--widget-space));--widget-gap: calc(8px * var(--widget-space));--widget-gap-tight: calc(6px * var(--widget-space));--widget-font: calc(14px * var(--widget-scale))}.layout-item[data-v-efb6134a]>*{flex:1 1 auto;min-width:0;min-height:0;height:100%;overflow:auto}.w-quarter[data-v-efb6134a]{grid-column:span 1}.w-half[data-v-efb6134a]{grid-column:span 2}.w-full[data-v-efb6134a]{grid-column:span 4}.h-s[data-v-efb6134a]{grid-row-end:span 4}.h-m[data-v-efb6134a]{grid-row-end:span 8}.h-l[data-v-efb6134a]{grid-row-end:span 13}.h-xl[data-v-efb6134a]{grid-row-end:span 22}.is-editable[data-v-efb6134a]{outline:1px dashed rgba(107,114,128,.5);border-radius:10px}.is-selected[data-v-efb6134a]{outline:2px solid var(--color-primary,#2563EB)}.is-dragging[data-v-efb6134a]{opacity:.6}.scale-sm[data-v-efb6134a]{--widget-scale:.85}.scale-md[data-v-efb6134a]{--widget-scale:1}.scale-lg[data-v-efb6134a]{--widget-scale:1.2}.scale-xl[data-v-efb6134a]{--widget-scale:1.4}@media (max-width: 1024px){.w-quarter[data-v-efb6134a],.w-half[data-v-efb6134a]{grid-column:span 2}.w-full[data-v-efb6134a]{grid-column:span 4}}@media (max-width: 768px){.w-quarter[data-v-efb6134a],.w-half[data-v-efb6134a],.w-full[data-v-efb6134a]{grid-column:span 4}}.options-wrapper[data-v-fdb4e08b]{position:relative}.options-pop[data-v-fdb4e08b]{position:absolute;bottom:calc(100% + 6px);right:0;top:auto;background:color-mix(in oklab,#111827,#1f2937 60%);border:1px solid color-mix(in oklab,#4b5563,transparent 20%);border-radius:8px;box-shadow:0 10px 22px #00000038;padding:8px;width:33vw;z-index:30;max-height:360px;overflow:auto;overflow-x:hidden}.opt-row[data-v-fdb4e08b]{display:grid;grid-template-columns:minmax(120px,1fr) minmax(140px,1fr);align-items:center;gap:10px;margin-bottom:6px}.opt-row[data-v-fdb4e08b]:last-child{margin-bottom:0}.opt-row--footer[data-v-fdb4e08b]{grid-template-columns:1fr;justify-items:end}.opt-row--footer[data-v-fdb4e08b]{justify-content:flex-end}.link-btn[data-v-fdb4e08b]{border:none;background:transparent;color:var(--brand,#2563eb);cursor:pointer;font-size:12px;text-decoration:underline}.opt-row label[data-v-fdb4e08b]{font-size:17px;color:#e5e7eb}.opt-row input[type='"number"'][data-v-fdb4e08b],.opt-row select[data-v-fdb4e08b],.opt-row input[type='"text"'][data-v-fdb4e08b]{width:100%;background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:6px 8px;font-size:15px}.opt-row input[type='"checkbox"'][data-v-fdb4e08b]{width:12px;height:12px;transform:scale(.85);transform-origin:center;align-self:center}.opt-row textarea[data-v-fdb4e08b]{width:100%;background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:7px}.opt-section[data-v-fdb4e08b]{margin-bottom:10px;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);background:color-mix(in oklab,#0f172a,#111827 75%)}.opt-section[data-v-fdb4e08b]:last-child{margin-bottom:0}.opt-section__title[data-v-fdb4e08b]{font-size:15px;text-transform:uppercase;letter-spacing:.04em;color:#9ca3af;margin-bottom:8px;font-weight:700}.colorlist[data-v-fdb4e08b]{display:flex;align-items:center;gap:6px;flex-wrap:wrap}.colorlist__item input[type=color][data-v-fdb4e08b]{width:38px;height:28px;padding:0;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);background:#0f172a}.multi[data-v-fdb4e08b]{display:grid;gap:6px;grid-template-columns:repeat(2,minmax(0,1fr))}.multi__item[data-v-fdb4e08b]{display:flex;align-items:center;gap:6px;font-size:16px}.multi__item input[type='"checkbox"'][data-v-fdb4e08b]{width:12px;height:12px;transform:scale(.85);transform-origin:center}.multi__item span[data-v-fdb4e08b]{color:#e5e7eb}.filter-builder[data-v-fdb4e08b]{display:flex;flex-direction:column;gap:8px;width:100%}.filter-builder__row[data-v-fdb4e08b]{display:grid;grid-template-columns:minmax(120px,1fr) minmax(140px,1fr) minmax(140px,1fr) auto;gap:6px;align-items:center}.filter-builder__hint[data-v-fdb4e08b]{font-size:12px;color:#9ca3af;line-height:1.35}.filter-builder__hint code[data-v-fdb4e08b]{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:10px;color:#e5e7eb;background:#0f172acc;padding:1px 4px;border-radius:4px}.filter-builder__label[data-v-fdb4e08b],.filter-builder__input[data-v-fdb4e08b]{background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:4px 6px;font-size:13px}@media (max-width: 720px){.filter-builder__row[data-v-fdb4e08b]{grid-template-columns:1fr;align-items:stretch}.filter-builder__row .ghost[data-v-fdb4e08b]{justify-self:end}}.ghost[data-v-99b1320b]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.ghost.danger[data-v-99b1320b]{color:#b91c1c;border-color:#fca5a5}.widget-toolbar-layer[data-v-99b1320b]{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:2147480000;display:flex;align-items:flex-end;justify-content:stretch;padding:0 12px 10px calc(16px + var(--opsdash-nav-offset, 0px));background:none}.widget-toolbar[data-v-99b1320b]{pointer-events:auto;position:relative;margin-top:0;padding:5px 7px;border:1px solid rgba(59,130,246,.55);background:#0b1222;border:1px solid color-mix(in oklab,var(--color-primary,#2563eb),transparent 20%);background:linear-gradient(180deg,#0f172afa,#020617fa);border-radius:8px;display:flex;align-items:center;justify-content:space-between;gap:4px;box-shadow:0 8px 20px #0f172a8c,0 0 0 1px #3b82f62e;max-width:none;width:calc(100% - 12px);opacity:1;z-index:2147480001;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);transition:background .14s ease,box-shadow .14s ease,transform .14s ease}.widget-toolbar[data-v-99b1320b]:hover{background:linear-gradient(180deg,#1e293bfa,#0f172afa);box-shadow:0 10px 24px #0f172a99,0 0 0 1px #3b82f640}.toolbar-title[data-v-99b1320b]{font-weight:600;color:#e5e7eb}.toolbar-actions[data-v-99b1320b],.toolbar-quick[data-v-99b1320b]{display:flex;gap:4px;flex-wrap:wrap;align-items:center}.toolbar-field[data-v-99b1320b]{display:flex;align-items:center;gap:4px;font-size:10px;color:#e5e7eb}.toolbar-field span[data-v-99b1320b]{opacity:.75}.toolbar-field input[type=text][data-v-99b1320b],.toolbar-field select[data-v-99b1320b]{border-radius:6px;border:1px solid color-mix(in oklab,#4b5563,transparent 35%);background:color-mix(in oklab,#0f172a,#111827 70%);color:#e2e8f0;padding:2px 5px;font-size:10px;min-width:72px}.toolbar-field input[type=color][data-v-99b1320b]{width:22px;height:18px;padding:0;border:1px solid color-mix(in oklab,#4b5563,transparent 35%);border-radius:6px;background:transparent}.toolbar-field--toggle[data-v-99b1320b]{gap:4px}.widget-toolbar .ghost[data-v-99b1320b]{padding:3px 5px;font-size:11px;background:#0f172a;border-color:#4b5563;background:color-mix(in oklab,#111827,#1f2937 80%);border-color:color-mix(in oklab,#4b5563,transparent 35%);color:#f1f5f9}.widget-toolbar .ghost[data-v-99b1320b]:hover{background:#1e3a8a;border-color:#2563eb;background:color-mix(in oklab,#2563EB,#111827 85%);border-color:color-mix(in oklab,#2563EB,transparent 50%)}.cat-header[data-v-1e606590]{display:flex;align-items:center;gap:8px}.cat-color-indicator[data-v-1e606590]{width:12px;height:12px;border-radius:50%;border:1px solid color-mix(in oklab,var(--fg),transparent 80%);flex-shrink:0}.cat-header .cat-name[data-v-1e606590]{flex:1;padding:6px 8px;border:1px solid var(--line);border-radius:6px;background:color-mix(in oklab,var(--card),transparent 5%);color:var(--fg)}.color-trigger-wrapper[data-v-1e606590]{position:relative;display:inline-flex;align-items:center}.color-link[data-v-1e606590]{border:none;background:transparent;padding:0;font-size:12px;color:var(--brand, #2563eb);text-decoration:underline;cursor:pointer}.color-link[data-v-1e606590]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 40%);outline-offset:2px}.swatch-grid[data-v-1e606590]{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,20px));justify-content:flex-start;gap:6px}.color-swatch[data-v-1e606590]{width:18px!important;height:18px!important;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0!important;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}.color-swatch.active[data-v-1e606590]{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 60%)}.color-swatch[data-v-1e606590]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 40%);outline-offset:1px}.ghost[data-v-539a10f9]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.ghost.primary[data-v-539a10f9]{border-color:var(--color-primary, #2563EB);color:var(--color-primary, #2563EB)}.advanced-overlay[data-v-539a10f9]{position:fixed;top:0;right:0;bottom:0;left:0;background:#0006;display:flex;align-items:flex-start;justify-content:center;padding:48px 16px;z-index:50}.advanced-panel[data-v-539a10f9]{background:var(--color-main-background, #fff);color:var(--color-main-text, #0f172a);width:min(960px,100%);max-height:calc(100vh - 96px);border-radius:12px;box-shadow:0 20px 60px #00000040;overflow:hidden;display:flex;flex-direction:column;border:1px solid var(--color-border, #e5e7eb)}.advanced-panel>.sb-pane[data-v-539a10f9]{flex:1 1 auto;overflow:auto;padding:16px}.overlay-header[data-v-539a10f9]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--color-border, #e5e7eb);background:var(--color-background-hover, #f8fafc)}.overlay-title[data-v-539a10f9]{font-weight:600;font-size:16px}.overlay-subtitle[data-v-539a10f9]{font-size:12px;color:var(--muted, #6b7280);margin-top:2px}.overlay-actions[data-v-539a10f9]{display:flex;justify-content:space-between;align-items:center;gap:8px;padding:12px 16px;border-top:1px solid var(--color-border, #e5e7eb);background:var(--color-background-hover, #f8fafc)}.overlay-actions__left[data-v-539a10f9],.overlay-actions__right[data-v-539a10f9]{display:flex;gap:8px;flex-wrap:wrap}@media (max-width: 640px){.advanced-overlay[data-v-539a10f9]{padding:16px;align-items:flex-start}}.layout-wrapper[data-v-0bb4f135]{position:relative}.layout-wrapper.editable-mode[data-v-0bb4f135]{padding-bottom:120px;overflow:visible}:root{--widget-scale:1;--widget-space:1;--widget-density:1;--widget-text-scale:1}.activity-card[data-v-5d73a7ec]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px);padding:var(--widget-pad, 14px);font-size:var(--widget-font, 13px);color:var(--muted)}.activity-card__header[data-v-5d73a7ec]{display:flex;justify-content:space-between;align-items:center;font-weight:600;color:var(--fg);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.activity-card__hero[data-v-5d73a7ec]{font-weight:600;color:var(--fg)}.activity-card__subline[data-v-5d73a7ec]{font-size:calc(12px * var(--widget-scale, 1))}.activity-card__meta[data-v-5d73a7ec],.activity-card__extra[data-v-5d73a7ec]{display:flex;flex-wrap:wrap;gap:calc(8px * var(--widget-space, 1)) calc(14px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.activity-card__meta strong[data-v-5d73a7ec],.activity-card__extra strong[data-v-5d73a7ec]{font-weight:600;color:var(--fg)}.activity-card__hint[data-v-5d73a7ec]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted);opacity:.8}.activity-card__trend[data-v-5d73a7ec]{border-top:1px solid var(--color-border-maxcontrast, rgba(125, 125, 125, .2));padding-top:calc(10px * var(--widget-space, 1));display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.dayoff-header[data-v-5d73a7ec]{display:flex;justify-content:space-between;font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.dayoff-meta[data-v-5d73a7ec]{opacity:.85}.dayoff-heatmap[data-v-5d73a7ec]{display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(110px * var(--widget-scale, 1)),1fr));gap:var(--widget-gap, 8px)}.dayoff-tile[data-v-5d73a7ec]{border-radius:calc(10px * var(--widget-space, 1));padding:calc(10px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1));text-align:center;background:color-mix(in oklab,var(--muted),transparent 85%);color:var(--fg);transition:transform .2s ease,background .2s ease}.dayoff-tile--current[data-v-5d73a7ec]{outline:1px solid color-mix(in oklab,var(--brand),transparent 30%);outline-offset:1px}.dayoff-tile--low[data-v-5d73a7ec]{background:color-mix(in oklab,#dc2626,white 70%);color:#7f1d1d}.dayoff-tile--mid[data-v-5d73a7ec]{background:color-mix(in oklab,#f97316,white 68%);color:#7c2d12}.dayoff-tile--high[data-v-5d73a7ec]{background:color-mix(in oklab,#16a34a,white 65%);color:#14532d}.dayoff-tile__label[data-v-5d73a7ec]{font-size:calc(11px * var(--widget-scale, 1));font-weight:600}.dayoff-tile__value[data-v-5d73a7ec]{font-size:calc(14px * var(--widget-scale, 1));font-weight:700;font-variant-numeric:tabular-nums}.dayoff-tile__meta[data-v-5d73a7ec]{font-size:calc(10px * var(--widget-scale, 1));color:color-mix(in oklab,currentColor,transparent 55%);font-variant-numeric:tabular-nums}.pill[data-v-5d73a7ec]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.balance-card[data-v-cdc30eb8]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px);--widget-pad: calc(14px * var(--widget-space, 1));padding:var(--widget-pad, 14px);font-size:var(--widget-font, 13px);color:var(--muted)}.balance-card__header[data-v-cdc30eb8]{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fg);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.balance-card__activity[data-v-cdc30eb8]{display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1));padding:calc(6px * var(--widget-space, 1)) 0;border-bottom:1px solid var(--border, rgba(125, 125, 125, .2))}.activity-hero__title[data-v-cdc30eb8]{font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)));font-weight:600;color:var(--fg)}.activity-hero__line[data-v-cdc30eb8]{font-weight:600;color:var(--fg)}.activity-subline[data-v-cdc30eb8]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.activity-meta[data-v-cdc30eb8]{display:flex;flex-wrap:wrap;gap:calc(8px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.activity-meta strong[data-v-cdc30eb8]{font-weight:600;color:var(--fg)}.activity-meta--extra[data-v-cdc30eb8]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.activity-dayoff[data-v-cdc30eb8]{display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1))}.dayoff-header[data-v-cdc30eb8]{display:flex;align-items:center;justify-content:space-between;font-weight:600;font-size:calc(12px * var(--widget-scale, 1));color:var(--fg)}.dayoff-meta[data-v-cdc30eb8]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.dayoff-heatmap[data-v-cdc30eb8]{display:grid;gap:calc(2px * var(--widget-space, 1));grid-template-columns:repeat(auto-fit,minmax(calc(90px * var(--widget-scale, 1)),1fr))}.dayoff-tile[data-v-cdc30eb8]{border:1px solid var(--color-border, rgba(125, 125, 125, .2));border-radius:calc(6px * var(--widget-space, 1));padding:calc(3px * var(--widget-space, 1));display:grid;gap:calc(1px * var(--widget-space, 1));background:var(--color-main-background)}.dayoff-tile--current[data-v-cdc30eb8]{border-color:var(--color-primary)}.dayoff-tile--low[data-v-cdc30eb8]{background:color-mix(in srgb,#10b981 12%,var(--color-main-background))}.dayoff-tile--mid[data-v-cdc30eb8]{background:color-mix(in srgb,#f59e0b 12%,var(--color-main-background))}.dayoff-tile--high[data-v-cdc30eb8]{background:color-mix(in srgb,#ef4444 12%,var(--color-main-background))}.dayoff-tile__label[data-v-cdc30eb8]{font-weight:600;color:var(--fg);font-size:calc(11px * var(--widget-scale, 1))}.dayoff-tile__value[data-v-cdc30eb8]{font-size:calc(11px * var(--widget-scale, 1));color:var(--fg)}.dayoff-tile__meta[data-v-cdc30eb8]{font-size:calc(9.5px * var(--widget-scale, 1));color:var(--muted)}.balance-card__warnings[data-v-cdc30eb8]{margin:0;padding-left:calc(16px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1))}.balance-card__warnings[data-v-cdc30eb8]{color:var(--danger, #b91c1c)}.balance-card__note[data-v-cdc30eb8]{font-size:calc(12px * var(--widget-scale, 1));color:var(--fg);background:color-mix(in oklab,var(--brand),transparent 88%);border-radius:calc(6px * var(--widget-space, 1));padding:calc(6px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));white-space:pre-line}.badge[data-v-cdc30eb8]{display:inline-flex;align-items:center;padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(11px * var(--widget-scale, 1));background:color-mix(in srgb,var(--brand) 12%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.balance-card__mix[data-v-cdc30eb8]{border-top:1px solid var(--border, rgba(125, 125, 125, .2));padding-top:calc(8px * var(--widget-space, 1))}.mix-header[data-v-cdc30eb8]{display:flex;justify-content:space-between;align-items:flex-start;gap:calc(6px * var(--widget-space, 1));margin-bottom:calc(6px * var(--widget-space, 1))}.mix-title[data-v-cdc30eb8]{font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)));font-weight:600;color:var(--fg)}.mix-subtitle[data-v-cdc30eb8]{font-size:calc(9px * var(--widget-scale, 1));color:var(--muted)}.mix-badge[data-v-cdc30eb8]{font-size:calc(8px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.05em;padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;background:color-mix(in oklab,var(--brand),transparent 80%);color:var(--brand);border:1px solid color-mix(in oklab,var(--brand),transparent 60%)}.mix-list[data-v-cdc30eb8]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1))}.mix-row[data-v-cdc30eb8]{display:grid;grid-template-columns:calc(52px * var(--widget-scale, 1)) repeat(auto-fit,minmax(calc(32px * var(--widget-scale, 1)),1fr));gap:calc(1px * var(--widget-space, 1));align-items:stretch}.mix-label[data-v-cdc30eb8]{padding:calc(2px * var(--widget-space, 1)) calc(4px * var(--widget-space, 1));font-weight:600;color:var(--fg);font-size:calc(9px * var(--widget-scale, 1));text-align:left}.mix-columns[data-v-cdc30eb8]{display:grid;align-items:center}.mix-column-label[data-v-cdc30eb8]{text-align:center;font-size:calc(8px * var(--widget-scale, 1));color:var(--muted);text-transform:uppercase;padding:calc(1px * var(--widget-space, 1)) 0}.mix-column-label--current[data-v-cdc30eb8]{color:var(--brand)}.mix-cells[data-v-cdc30eb8]{display:contents}.mix-cell[data-v-cdc30eb8]{border-radius:calc(4px * var(--widget-space, 1));padding:calc(1px * var(--widget-space, 1)) calc(.25px * var(--widget-space, 1));text-align:center;font-size:calc(9px * var(--widget-scale, 1));font-weight:700;color:var(--fg);background:color-mix(in oklab,var(--muted),transparent 85%);transition:background .2s ease}.mix-cell--current[data-v-cdc30eb8]{outline:1px solid color-mix(in oklab,var(--brand),transparent 35%);outline-offset:1px}.mix-cell--trend-up[data-v-cdc30eb8]{background:color-mix(in oklab,#16a34a,white 65%);color:#14532d}.mix-cell--trend-down[data-v-cdc30eb8]{background:color-mix(in oklab,#dc2626,white 65%);color:#7f1d1d}.mix-cell--trend-flat[data-v-cdc30eb8]{background:color-mix(in oklab,#f97316,white 70%);color:#7c2d12}.mix-cell__value[data-v-cdc30eb8]{font-variant-numeric:tabular-nums}.balance-card[data-v-96453698]{background:var(--card,#fff);border:1px solid var(--color-border,#e5e7eb);border-radius:calc(12px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg,#0f172a);display:flex;flex-direction:column;gap:var(--widget-gap, 10px);font-size:calc(14px * var(--widget-scale, 1))}.header[data-v-96453698]{display:flex;align-items:center;justify-content:space-between;gap:var(--widget-gap, 10px)}.header.compact[data-v-96453698]{justify-content:center}.title-row[data-v-96453698]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1))}.title[data-v-96453698]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.index[data-v-96453698]{text-align:right}.index.centered[data-v-96453698]{text-align:center;width:100%}.trend[data-v-96453698]{display:flex;align-items:center;gap:var(--widget-gap, 10px)}.trend-line[data-v-96453698]{flex:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(92px * var(--widget-scale, 1)),1fr));gap:calc(6px * var(--widget-space, 1));justify-content:flex-start}.trend-block[data-v-96453698]{min-width:0;background:color-mix(in oklab,var(--color-primary,#2563eb),#e5e7eb 50%);border-radius:calc(8px * var(--widget-space, 1));padding:calc(4px * var(--widget-space, 1)) calc(5px * var(--widget-space, 1));display:flex;align-items:center;justify-content:center;position:relative;color:#fff;font-size:calc(11px * var(--widget-scale, 1));border:none;cursor:default}.trend-block.no-range[data-v-96453698]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1)) calc(5px * var(--widget-space, 1))}.trend-block.no-range.no-offset[data-v-96453698]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1))}.trend-block.no-offset[data-v-96453698]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.trend-block.current[data-v-96453698]{background:var(--color-primary,#2563eb);box-shadow:0 0 0 2px color-mix(in oklab,var(--color-primary,#2563eb),#ffffff 60%)}.trend-line-row[data-v-96453698]{display:flex;align-items:center;justify-content:space-between;gap:calc(4px * var(--widget-space, 1));width:100%}.trend-value[data-v-96453698]{font-weight:700;font-size:calc(13px * var(--widget-scale, 1));text-align:left;white-space:nowrap}.trend-range[data-v-96453698]{flex:1;text-align:center;font-size:calc(10px * var(--widget-scale, 1));color:#e5e7eb;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.trend-offset[data-v-96453698]{min-width:calc(52px * var(--widget-scale, 1));text-align:right;font-size:calc(10px * var(--widget-scale, 1));color:#cbd5f5;white-space:nowrap}.trend-delta[data-v-96453698]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted);display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.trend-left[data-v-96453698]{font-weight:700;color:var(--fg,#0f172a)}.trend-center[data-v-96453698]{flex:1;text-align:center;font-size:calc(11px * var(--widget-scale, 1))}.trend-right[data-v-96453698]{min-width:calc(56px * var(--widget-scale, 1));text-align:right;font-size:calc(11px * var(--widget-scale, 1))}.section-title[data-v-96453698]{font-weight:600;font-size:calc(13px * var(--widget-scale, 1));margin-bottom:calc(4px * var(--widget-space, 1))}.messages ul[data-v-96453698]{margin:0;padding-left:calc(18px * var(--widget-space, 1));color:var(--muted);font-size:calc(13px * var(--widget-scale, 1))}.messages li[data-v-96453698]{margin-bottom:calc(2px * var(--widget-space, 1))}.messages li[data-v-96453698]:last-child{margin-bottom:0}.config[data-v-96453698]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted);display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(140px * var(--widget-scale, 1)),1fr));gap:calc(6px * var(--widget-space, 1))}.empty[data-v-96453698]{text-align:center;color:var(--muted);font-size:calc(13px * var(--widget-scale, 1))}.mix-card[data-v-9b471bde]{display:flex;flex-direction:column;gap:var(--widget-gap, 10px);--mix-label-width: clamp(34px, calc(52px * var(--widget-scale, 1)), 64px);--mix-gap: clamp(2px, calc(6px * var(--widget-space, 1)), 8px);--mix-row-gap: clamp(4px, calc(8px * var(--widget-space, 1)), 12px);--mix-cell-padding: clamp(2px, calc(6px * var(--widget-space, 1)), 8px);--mix-cell-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 14px);--mix-label-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 13px);--mix-column-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 12px);--mix-cell-min: clamp(18px, calc(30px * var(--widget-scale, 1)), 36px);--mix-radius: clamp(4px, calc(8px * var(--widget-space, 1)), 10px)}.mix-card--dense[data-v-9b471bde]{gap:calc(6px * var(--widget-space, 1));--mix-label-width: clamp(28px, calc(40px * var(--widget-scale, 1)), 52px);--mix-gap: clamp(1px, calc(3px * var(--widget-space, 1)), 6px);--mix-row-gap: clamp(3px, calc(5px * var(--widget-space, 1)), 8px);--mix-cell-padding: clamp(1px, calc(3px * var(--widget-space, 1)), 5px);--mix-cell-font: clamp(8px, calc(10px * var(--widget-scale, 1)), 12px);--mix-label-font: clamp(8px, calc(10px * var(--widget-scale, 1)), 11px);--mix-column-font: clamp(8px, calc(9px * var(--widget-scale, 1)), 10px);--mix-cell-min: clamp(16px, calc(22px * var(--widget-scale, 1)), 30px);--mix-radius: clamp(3px, calc(5px * var(--widget-space, 1)), 8px)}.mix-card--no-header[data-v-9b471bde]{gap:calc(6px * var(--widget-space, 1))}.mix-header[data-v-9b471bde]{display:flex;justify-content:space-between;align-items:center}.mix-title[data-v-9b471bde]{font-weight:700;color:var(--fg);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.mix-subtitle[data-v-9b471bde]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.mix-badge[data-v-9b471bde]{padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));font-weight:600;background:color-mix(in oklab,var(--brand),transparent 80%);border:1px solid color-mix(in oklab,var(--brand),transparent 60%);color:var(--brand)}.mix-list[data-v-9b471bde]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:var(--mix-row-gap)}.mix-row[data-v-9b471bde]{display:grid;grid-template-columns:var(--mix-label-width) 1fr;gap:var(--mix-gap);align-items:center}.mix-label[data-v-9b471bde]{font-weight:600;color:var(--fg);font-size:var(--mix-label-font);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mix-columns[data-v-9b471bde]{display:grid;gap:var(--mix-gap);align-items:center;justify-content:start;font-size:var(--mix-column-font);color:var(--muted)}.mix-column-label[data-v-9b471bde]{text-align:center;white-space:nowrap;font-variant-numeric:tabular-nums;line-height:1.1;overflow:hidden;text-overflow:ellipsis}.mix-column-label--label[data-v-9b471bde]{text-align:left}.mix-column-label--current[data-v-9b471bde]{font-weight:700;color:var(--fg)}.mix-cells[data-v-9b471bde]{display:grid;gap:var(--mix-gap);align-items:stretch;justify-content:start;width:100%;min-width:0}.mix-cell[data-v-9b471bde]{position:relative;border-radius:var(--mix-radius);padding:var(--mix-cell-padding);background:linear-gradient(135deg,color-mix(in oklab,var(--mix-bg),white 12%),var(--mix-bg));color:var(--mix-fg, var(--fg));text-align:center;font-size:var(--mix-cell-font);border:1px solid color-mix(in oklab,var(--mix-bg),var(--fg) 12%);box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--mix-bg),transparent 60%);min-height:var(--mix-cell-min);display:flex;align-items:center;justify-content:center}.mix-cell--current[data-v-9b471bde]{outline:1px solid color-mix(in oklab,var(--brand),transparent 35%);outline-offset:1px}.mix-cell--mode-hybrid[data-v-9b471bde]{box-shadow:inset 0 -3px color-mix(in oklab,var(--mix-accent),transparent 30%)}.mix-cell--mode-share[data-v-9b471bde]{box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--mix-bg),transparent 40%)}.mix-card--square .mix-cell[data-v-9b471bde]{aspect-ratio:1 / 1;min-height:0}.mix-cell__value[data-v-9b471bde]{font-weight:700;font-variant-numeric:tabular-nums;white-space:nowrap}.pill[data-v-9b471bde]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;font-size:11px;border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.hint[data-v-9b471bde]{font-size:12px;color:var(--muted)}.chart-widget[data-v-debbf435]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-debbf435]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-debbf435]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-debbf435]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-debbf435]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget[data-v-1c648f65]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-1c648f65]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-1c648f65]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-1c648f65]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-1c648f65]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__hint[data-v-1c648f65]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.chart-widget[data-v-af12c79b]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-af12c79b]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-af12c79b]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-af12c79b]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-af12c79b]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget[data-v-b9796562]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-b9796562]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-b9796562]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-b9796562]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-b9796562]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-b9796562]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-b9796562]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.chart-widget__legend .dot[data-v-b9796562]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.chart-widget__legend .val[data-v-b9796562]{margin-left:auto;color:var(--muted)}.chart-widget[data-v-93cdb211]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-93cdb211]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-93cdb211]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-93cdb211]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-93cdb211]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-93cdb211]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-93cdb211]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.chart-widget__legend .dot[data-v-93cdb211]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.table-widget[data-v-e75cc444]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.table-widget__header[data-v-e75cc444]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.table-widget__title[data-v-e75cc444]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.table-widget__subtitle[data-v-e75cc444]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.table-widget__empty[data-v-e75cc444]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.dayoff-card[data-v-5119adef]{display:flex;flex-direction:column;gap:var(--widget-gap, 10px)}.dayoff-card__header[data-v-5119adef]{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fg);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.dayoff-heatmap[data-v-5119adef]{display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(110px * var(--widget-scale, 1)),1fr));gap:var(--widget-gap, 8px)}.dayoff-tile[data-v-5119adef]{border-radius:calc(10px * var(--widget-space, 1));padding:calc(10px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1));text-align:center;background:var(--tile-bg, color-mix(in oklab, var(--muted), transparent 85%));color:var(--tile-fg, var(--fg));transition:transform .2s ease,background .2s ease}.dayoff-tile--current[data-v-5119adef]{outline:1px solid color-mix(in oklab,var(--brand),transparent 30%);outline-offset:1px}.dayoff-tile--low[data-v-5119adef]{background:var(--tile-bg, color-mix(in oklab, #dc2626, white 70%));color:var(--tile-fg, #7f1d1d)}.dayoff-tile--mid[data-v-5119adef]{background:var(--tile-bg, color-mix(in oklab, #f97316, white 68%));color:var(--tile-fg, #7c2d12)}.dayoff-tile--high[data-v-5119adef]{background:var(--tile-bg, color-mix(in oklab, #16a34a, white 65%));color:var(--tile-fg, #14532d)}.dayoff-tile__label[data-v-5119adef]{font-size:calc(11px * var(--widget-scale, 1));font-weight:600}.dayoff-tile__value[data-v-5119adef]{font-size:calc(14px * var(--widget-scale, 1));font-weight:700;font-variant-numeric:tabular-nums}.dayoff-tile__meta[data-v-5119adef]{font-size:calc(10px * var(--widget-scale, 1));color:color-mix(in oklab,currentColor,transparent 55%);font-variant-numeric:tabular-nums}.pill[data-v-5119adef]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.hint[data-v-5119adef]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.deck-summary-card[data-v-7d6316aa]{display:flex;flex-direction:column;gap:calc(12px * var(--widget-space, 1));font-size:var(--widget-font, 14px)}.deck-summary-card__header[data-v-7d6316aa]{display:flex;justify-content:space-between;align-items:center}.deck-summary-card__title[data-v-7d6316aa]{font-weight:700;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.deck-summary-card__subtitle[data-v-7d6316aa],.deck-summary-card__meta[data-v-7d6316aa]{color:var(--color-text-maxcontrast);font-size:calc(14px * var(--widget-scale, 1))}.deck-summary-card__loading[data-v-7d6316aa],.deck-summary-card__error[data-v-7d6316aa],.deck-summary-card__empty[data-v-7d6316aa]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));color:var(--color-text-maxcontrast)}.deck-summary-card__error[data-v-7d6316aa]{background:var(--color-error-hover);color:var(--color-error-text);border-radius:calc(8px * var(--widget-space, 1));padding:calc(8px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1))}.deck-summary-card__rows[data-v-7d6316aa]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:calc(8px * var(--widget-space, 1))}.deck-summary-card__row[data-v-7d6316aa]{border:1px solid var(--color-border);border-radius:calc(10px * var(--widget-space, 1));padding:calc(10px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1));background:var(--color-main-background)}.deck-summary-card__row--clickable[data-v-7d6316aa]{cursor:pointer}.deck-summary-card__row--active[data-v-7d6316aa]{border-color:var(--color-primary);box-shadow:inset 0 0 0 1px var(--color-primary)}.deck-summary-card__row-head[data-v-7d6316aa]{display:flex;align-items:center;justify-content:space-between;font-weight:600}.bucket-label[data-v-7d6316aa]{font-size:calc(14px * var(--widget-scale, 1))}.bucket-count[data-v-7d6316aa]{font-size:calc(13px * var(--widget-scale, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(9px * var(--widget-space, 1));background:var(--color-background-darker)}.deck-summary-card__row-body[data-v-7d6316aa]{display:flex;flex-wrap:wrap;gap:calc(8px * var(--widget-space, 1));align-items:center}.bucket-board[data-v-7d6316aa]{border:2px solid var(--color-border);padding:calc(3px * var(--widget-space, 1)) calc(10px * var(--widget-space, 1));border-radius:999px;font-size:calc(12px * var(--widget-scale, 1));text-transform:uppercase}.bucket-titles[data-v-7d6316aa]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.bucket-title[data-v-7d6316aa]{padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));background:var(--color-background-darker);border-radius:999px;font-size:calc(13px * var(--widget-scale, 1))}.bucket-title--muted[data-v-7d6316aa]{color:var(--color-text-maxcontrast)}.note-card[data-v-5e293970]{background:var(--card,#fff);border:1px solid var(--color-border,#d1d5db);border-radius:calc(10px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg,#0f172a);display:flex;flex-direction:column;gap:var(--widget-gap, 10px);font-size:var(--widget-font, 14px)}.note-header[data-v-5e293970]{display:flex;align-items:center;justify-content:space-between}.title[data-v-5e293970]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.btn[data-v-5e293970]{padding:calc(6px * var(--widget-space, 1)) calc(10px * var(--widget-space, 1));border-radius:calc(6px * var(--widget-space, 1));border:1px solid var(--color-border,#d1d5db);background:var(--card,#fff);cursor:pointer;font-size:calc(12px * var(--widget-scale, 1))}.field[data-v-5e293970]{display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1))}.field-head[data-v-5e293970]{display:flex;align-items:center;justify-content:space-between;gap:calc(6px * var(--widget-space, 1))}.label[data-v-5e293970]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.note[data-v-5e293970]{width:100%;min-height:calc(80px * var(--widget-scale, 1));border:1px solid var(--color-border,#d1d5db);border-radius:calc(6px * var(--widget-space, 1));padding:calc(8px * var(--widget-space, 1));resize:vertical;font-size:calc(13px * var(--widget-scale, 1))}.note--compact[data-v-5e293970]{min-height:calc(60px * var(--widget-scale, 1));font-size:calc(12px * var(--widget-scale, 1))}.note-select[data-v-5e293970]{max-width:55%;padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(6px * var(--widget-space, 1));border:1px solid var(--color-border,#d1d5db);background:var(--card,#fff);color:var(--fg,#0f172a);font-size:calc(12px * var(--widget-scale, 1))}.text-card[data-v-01eb6d28]{background:var(--card, #fff);border:1px solid var(--color-border, #d1d5db);border-radius:calc(10px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg, #0f172a);line-height:calc(1.4 * var(--widget-density, 1));font-size:var(--widget-font, 14px)}.text-card h3[data-v-01eb6d28]{margin:0 0 calc(6px * var(--widget-space, 1)) 0;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.text-card .body[data-v-01eb6d28]{margin:0;white-space:pre-wrap;font-size:calc(.95em * var(--widget-scale, 1))}.text-card .body.empty[data-v-01eb6d28]{color:var(--muted)}.notes-section[data-v-91e76a62]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px);font-size:var(--widget-font, 14px)}.notes-header[data-v-91e76a62]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.notes-textarea[data-v-91e76a62]{width:100%;min-height:calc(120px * var(--widget-scale, 1));padding:calc(8px * var(--widget-space, 1)) calc(10px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));border:1px solid var(--line);background:color-mix(in oklab,var(--card),transparent 5%);color:var(--fg);resize:vertical;box-sizing:border-box;font:calc(13px * var(--widget-scale, 1))/1.4 ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif}.notes-textarea--compact[data-v-91e76a62]{min-height:calc(70px * var(--widget-scale, 1));font-size:calc(12px * var(--widget-scale, 1))}.notes-textarea[data-v-91e76a62]:focus{outline:2px solid color-mix(in oklab,var(--brand),transparent 60%);outline-offset:1px}.notes-textarea[data-v-91e76a62]:read-only{background:color-mix(in oklab,var(--card),transparent 15%);color:var(--muted)}.notes-actions[data-v-91e76a62]{display:flex;justify-content:flex-end;margin-top:calc(4px * var(--widget-space, 1))}.notes-history[data-v-91e76a62]{display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1))}.notes-history__head[data-v-91e76a62]{display:flex;align-items:center;justify-content:space-between;gap:calc(6px * var(--widget-space, 1))}.notes-select[data-v-91e76a62]{max-width:55%;padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(6px * var(--widget-space, 1));border:1px solid var(--line);background:var(--card);color:var(--fg);font-size:calc(12px * var(--widget-scale, 1))}.targets-card[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px);font-size:var(--widget-font, 14px)}.targets-header[data-v-9ee23cb0]{display:flex;justify-content:space-between;align-items:center}.targets-header strong[data-v-9ee23cb0]{font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.targets-main[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1))}.targets-main .line[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.targets-main .line.forecast[data-v-9ee23cb0]{flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.targets-main .line .value[data-v-9ee23cb0]{display:flex;gap:calc(6px * var(--widget-space, 1));align-items:center}.targets-badges[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.targets-categories[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(10px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px solid var(--line)}.category[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));padding:calc(4px * var(--widget-space, 1)) 0}.category .cat-top[data-v-9ee23cb0]{display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.category .cat-label[data-v-9ee23cb0]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-weight:600;color:var(--fg)}.category .cat-label .dot[data-v-9ee23cb0]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 10%,transparent)}.category .cat-label .name[data-v-9ee23cb0]{color:var(--fg)}.category .cat-meta[data-v-9ee23cb0]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-weight:600;color:var(--muted)}.category .cat-meta .percent[data-v-9ee23cb0]{font-variant-numeric:tabular-nums;color:var(--fg)}.cat-progress .bar[data-v-9ee23cb0]{position:relative;width:100%;height:calc(8px * var(--widget-space, 1));border-radius:999px;background:color-mix(in srgb,var(--muted) 20%,transparent);overflow:hidden}.cat-progress .bar .fill[data-v-9ee23cb0]{height:100%;border-radius:999px;transition:width .2s ease;max-width:100%}.cat-progress .bar .today-overlay[data-v-9ee23cb0]{position:absolute;top:calc(-2px * var(--widget-space, 1));height:calc(12px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));opacity:.85;border:1px solid transparent;pointer-events:none}.today-chip[data-v-9ee23cb0]{position:absolute;top:calc(-22px * var(--widget-space, 1));transform:translate(-50%);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(10px * var(--widget-scale, 1));font-weight:700;color:#fff;border:1px solid transparent;white-space:nowrap;box-shadow:0 2px 6px #0000001f}.today-label[data-v-9ee23cb0]{font-size:calc(10px * var(--widget-scale, 1));line-height:1.2}.category .cat-metrics[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1));align-items:center;color:var(--fg)}.cat-footer[data-v-9ee23cb0]{display:flex;justify-content:space-between;align-items:center}.hint[data-v-9ee23cb0]{color:var(--muted);font-size:calc(12px * var(--widget-scale, 1))}.badge[data-v-9ee23cb0]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(11px * var(--widget-scale, 1));font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-label[data-v-9ee23cb0]{font-weight:600}.status-on[data-v-9ee23cb0]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-9ee23cb0]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-9ee23cb0]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-9ee23cb0]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-9ee23cb0]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.delta[data-v-9ee23cb0]{font-weight:600}.delta.pos[data-v-9ee23cb0]{color:var(--pos)}.delta.neg[data-v-9ee23cb0]{color:var(--neg)}.cat-metrics .hint[data-v-9ee23cb0],.cat-footer .hint[data-v-9ee23cb0]{font-size:calc(11px * var(--widget-scale, 1))}.cat-progress[data-v-9ee23cb0]{padding:calc(2px * var(--widget-space, 1)) 0}.cat-meta .badge[data-v-9ee23cb0]{font-size:calc(10px * var(--widget-scale, 1))}.text-card[data-v-f5a0bc50]{background:var(--card, #fff);border:1px solid var(--color-border, #d1d5db);border-radius:calc(10px * var(--widget-space, 1));padding:var(--widget-pad, 14px);color:var(--fg, #0f172a);line-height:calc(1.4 * var(--widget-density, 1));font-size:var(--widget-font, 14px)}.text-card h3[data-v-f5a0bc50]{margin:0 0 calc(6px * var(--widget-space, 1)) 0;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.text-card .body[data-v-f5a0bc50]{margin:0;white-space:pre-wrap}.line[data-v-f5a0bc50]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));font-size:inherit;line-height:calc(1.3 * var(--widget-density, 1))}.line+.line[data-v-f5a0bc50]{margin-top:calc(4px * var(--widget-space, 1))}.line .label[data-v-f5a0bc50]{flex:1;color:var(--muted)}.line .value[data-v-f5a0bc50]{text-align:right;font-variant-numeric:tabular-nums;font-weight:600;font-size:inherit}.card.time-summary[data-v-30983ce4]{display:flex;flex-direction:column;gap:var(--widget-gap, 6px);font-size:var(--widget-font, 13px);color:var(--muted);--widget-pad: calc(14px * var(--widget-space, 1));padding:var(--widget-pad, 14px)}.today-highlight[data-v-30983ce4]{display:flex;align-items:center;justify-content:space-between;padding:calc(10px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));border-radius:calc(10px * var(--widget-space, 1));background:color-mix(in oklab,var(--brand, #2563eb) 14%,transparent);border:1px solid color-mix(in oklab,var(--brand, #2563eb),transparent 70%);color:var(--fg)}.today-label[data-v-30983ce4]{font-size:calc(12px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.04em;color:color-mix(in oklab,var(--fg),transparent 35%)}.today-value[data-v-30983ce4]{font-size:calc(18px * var(--widget-scale, 1));font-weight:700;letter-spacing:-.02em}.today-cats[data-v-30983ce4]{display:flex;flex-wrap:wrap;gap:calc(8px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--fg)}.today-cat[data-v-30983ce4]{display:inline-flex;align-items:center;gap:calc(6px * var(--widget-space, 1));padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));background:color-mix(in oklab,var(--card, #fff),transparent 6%);border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 30%)}.today-cat .dot[data-v-30983ce4]{width:calc(9px * var(--widget-space, 1));height:calc(9px * var(--widget-space, 1));border-radius:50%;box-shadow:0 0 0 1px color-mix(in oklab,var(--fg) 10%,transparent)}.today-cat .name[data-v-30983ce4]{font-weight:600}.today-cat .value[data-v-30983ce4]{color:var(--muted)}.time-summary-firstline[data-v-30983ce4]{display:flex;align-items:center;justify-content:space-between;gap:var(--widget-gap, 8px);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)));color:var(--fg);font-weight:600}.time-summary-firstline em[data-v-30983ce4]{font-style:italic;color:var(--fg)}.mode-pill[data-v-30983ce4]{display:inline-flex;align-items:center;padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));font-weight:600;border-radius:999px;background:color-mix(in srgb,var(--brand) 18%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.time-summary-metrics[data-v-30983ce4]{display:grid;gap:calc(4px * var(--widget-space, 1));margin:0;padding:0;list-style:none}.time-summary-metrics li[data-v-30983ce4]{display:flex;flex-wrap:wrap;gap:calc(4px * var(--widget-space, 1));color:var(--muted)}.time-summary-metrics strong[data-v-30983ce4]{color:var(--fg);font-size:calc(14px * var(--widget-scale, 1))}.time-summary-inline[data-v-30983ce4]{font-size:calc(13px * var(--widget-scale, 1));color:var(--fg)}.time-summary-row[data-v-30983ce4]{display:flex;flex-wrap:wrap;gap:calc(4px * var(--widget-space, 1));line-height:1.4;color:var(--muted)}.time-summary-row .label[data-v-30983ce4]{color:var(--fg);font-weight:600}.time-summary-row.calendars[data-v-30983ce4]{word-break:break-word}.time-summary-row .sep[data-v-30983ce4],.time-summary-row .hint[data-v-30983ce4],.time-summary-row .share[data-v-30983ce4]{color:var(--muted)}.time-summary-row.top-category[data-v-30983ce4]{align-items:center;gap:calc(6px * var(--widget-space, 1))}.time-summary-activity[data-v-30983ce4]{margin-top:calc(6px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px solid var(--line);display:grid;gap:calc(2px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.time-summary-activity__title[data-v-30983ce4]{font-weight:600;color:var(--fg)}.time-summary-activity__line[data-v-30983ce4]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.time-summary-activity__delta[data-v-30983ce4]{color:var(--muted)}.time-summary-delta[data-v-30983ce4]{margin-top:calc(6px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px dashed color-mix(in oklab,var(--muted),transparent 70%);font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.summary-badge[data-v-30983ce4]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(11px * var(--widget-scale, 1));font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-30983ce4]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-30983ce4]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-30983ce4]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-30983ce4]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-30983ce4]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}
/*$vite$:1*/`,document.head.appendChild(ps);/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Or(e){const t=Object.create(null);for(const a of e.split(","))t[a]=1;return a=>a in t}const Ke={},La=[],zt=()=>{},hs=()=>!1,Do=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Br=e=>e.startsWith("onUpdate:"),dt=Object.assign,Nr=(e,t)=>{const a=e.indexOf(t);a>-1&&e.splice(a,1)},zc=Object.prototype.hasOwnProperty,je=(e,t)=>zc.call(e,t),Ae=Array.isArray,Oa=e=>Ja(e)==="[object Map]",Ao=e=>Ja(e)==="[object Set]",ms=e=>Ja(e)==="[object Date]",Ne=e=>typeof e=="function",Ze=e=>typeof e=="string",Lt=e=>typeof e=="symbol",qe=e=>e!==null&&typeof e=="object",vs=e=>(qe(e)||Ne(e))&&Ne(e.then)&&Ne(e.catch),bs=Object.prototype.toString,Ja=e=>bs.call(e),Rc=e=>Ja(e).slice(8,-1),ys=e=>Ja(e)==="[object Object]",Ir=e=>Ze(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ya=Or(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Eo=e=>{const t=Object.create(null);return a=>t[a]||(t[a]=e(a))},jc=/-(\w)/g,Tt=Eo(e=>e.replace(jc,(t,a)=>a?a.toUpperCase():"")),Uc=/\B([A-Z])/g,sa=Eo(e=>e.replace(Uc,"-$1").toLowerCase()),Lo=Eo(e=>e.charAt(0).toUpperCase()+e.slice(1)),Pr=Eo(e=>e?`on${Lo(e)}`:""),la=(e,t)=>!Object.is(e,t),Oo=(e,...t)=>{for(let a=0;a<e.length;a++)e[a](...t)},ws=(e,t,a,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:a})},Bo=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Vc=e=>{const t=Ze(e)?Number(e):NaN;return isNaN(t)?e:t};let ks;const No=()=>ks||(ks=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Le(e){if(Ae(e)){const t={};for(let a=0;a<e.length;a++){const o=e[a],r=Ze(o)?Jc(o):Le(o);if(r)for(const n in r)t[n]=r[n]}return t}else if(Ze(e)||qe(e))return e}const Kc=/;(?![^(]*\))/g,qc=/:([^]+)/,Gc=/\/\*[^]*?\*\//g;function Jc(e){const t={};return e.replace(Gc,"").split(Kc).forEach(a=>{if(a){const o=a.split(qc);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Ee(e){let t="";if(Ze(e))t=e;else if(Ae(e))for(let a=0;a<e.length;a++){const o=Ee(e[a]);o&&(t+=o+" ")}else if(qe(e))for(const a in e)e[a]&&(t+=a+" ");return t.trim()}const Yc=Or("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function _s(e){return!!e||e===""}function Zc(e,t){if(e.length!==t.length)return!1;let a=!0;for(let o=0;a&&o<e.length;o++)a=Io(e[o],t[o]);return a}function Io(e,t){if(e===t)return!0;let a=ms(e),o=ms(t);if(a||o)return a&&o?e.getTime()===t.getTime():!1;if(a=Lt(e),o=Lt(t),a||o)return e===t;if(a=Ae(e),o=Ae(t),a||o)return a&&o?Zc(e,t):!1;if(a=qe(e),o=qe(t),a||o){if(!a||!o)return!1;const r=Object.keys(e).length,n=Object.keys(t).length;if(r!==n)return!1;for(const s in e){const l=e.hasOwnProperty(s),i=t.hasOwnProperty(s);if(l&&!i||!l&&i||!Io(e[s],t[s]))return!1}}return String(e)===String(t)}function Xc(e,t){return e.findIndex(a=>Io(a,t))}const xs=e=>!!(e&&e.__v_isRef===!0),N=e=>Ze(e)?e:e==null?"":Ae(e)||qe(e)&&(e.toString===bs||!Ne(e.toString))?xs(e)?N(e.value):JSON.stringify(e,Cs,2):String(e),Cs=(e,t)=>xs(t)?Cs(e,t.value):Oa(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((a,[o,r],n)=>(a[Fr(o,n)+" =>"]=r,a),{})}:Ao(t)?{[`Set(${t.size})`]:[...t.values()].map(a=>Fr(a))}:Lt(t)?Fr(t):qe(t)&&!Ae(t)&&!ys(t)?String(t):t,Fr=(e,t="")=>{var a;return Lt(e)?`Symbol(${(a=e.description)!=null?a:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _t;class Qc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_t,!t&&_t&&(this.index=(_t.scopes||(_t.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].pause();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].resume();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].resume()}}run(t){if(this._active){const a=_t;try{return _t=this,t()}finally{_t=a}}}on(){++this._on===1&&(this.prevScope=_t,_t=this)}off(){this._on>0&&--this._on===0&&(_t=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let a,o;for(a=0,o=this.effects.length;a<o;a++)this.effects[a].stop();for(this.effects.length=0,a=0,o=this.cleanups.length;a<o;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,o=this.scopes.length;a<o;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function ed(){return _t}let Ge;const Hr=new WeakSet;class Ss{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_t&&_t.active&&_t.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Hr.has(this)&&(Hr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ts(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ls(this),Ms(this);const t=Ge,a=Ot;Ge=this,Ot=!0;try{return this.fn()}finally{Ds(this),Ge=t,Ot=a,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)jr(t);this.deps=this.depsTail=void 0,Ls(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Hr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Rr(this)&&this.run()}get dirty(){return Rr(this)}}let $s=0,Za,Xa;function Ts(e,t=!1){if(e.flags|=8,t){e.next=Xa,Xa=e;return}e.next=Za,Za=e}function Wr(){$s++}function zr(){if(--$s>0)return;if(Xa){let t=Xa;for(Xa=void 0;t;){const a=t.next;t.next=void 0,t.flags&=-9,t=a}}let e;for(;Za;){let t=Za;for(Za=void 0;t;){const a=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=a}}if(e)throw e}function Ms(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Ds(e){let t,a=e.depsTail,o=a;for(;o;){const r=o.prevDep;o.version===-1?(o===a&&(a=r),jr(o),td(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=r}e.deps=t,e.depsTail=a}function Rr(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(As(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function As(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Qa)||(e.globalVersion=Qa,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Rr(e))))return;e.flags|=2;const t=e.dep,a=Ge,o=Ot;Ge=e,Ot=!0;try{Ms(e);const r=e.fn(e._value);(t.version===0||la(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Ge=a,Ot=o,Ds(e),e.flags&=-3}}function jr(e,t=!1){const{dep:a,prevSub:o,nextSub:r}=e;if(o&&(o.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=o,e.nextSub=void 0),a.subs===e&&(a.subs=o,!o&&a.computed)){a.computed.flags&=-5;for(let n=a.computed.deps;n;n=n.nextDep)jr(n,!0)}!t&&!--a.sc&&a.map&&a.map.delete(a.key)}function td(e){const{prevDep:t,nextDep:a}=e;t&&(t.nextDep=a,e.prevDep=void 0),a&&(a.prevDep=t,e.nextDep=void 0)}let Ot=!0;const Es=[];function Rt(){Es.push(Ot),Ot=!1}function jt(){const e=Es.pop();Ot=e===void 0?!0:e}function Ls(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const a=Ge;Ge=void 0;try{t()}finally{Ge=a}}}let Qa=0;class ad{constructor(t,a){this.sub=t,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ur{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ge||!Ot||Ge===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==Ge)a=this.activeLink=new ad(Ge,this),Ge.deps?(a.prevDep=Ge.depsTail,Ge.depsTail.nextDep=a,Ge.depsTail=a):Ge.deps=Ge.depsTail=a,Os(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const o=a.nextDep;o.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=o),a.prevDep=Ge.depsTail,a.nextDep=void 0,Ge.depsTail.nextDep=a,Ge.depsTail=a,Ge.deps===a&&(Ge.deps=o)}return a}trigger(t){this.version++,Qa++,this.notify(t)}notify(t){Wr();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{zr()}}}function Os(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)Os(o)}const a=e.dep.subs;a!==e&&(e.prevSub=a,a&&(a.nextSub=e)),e.dep.subs=e}}const Po=new WeakMap,wa=Symbol(""),Vr=Symbol(""),eo=Symbol("");function vt(e,t,a){if(Ot&&Ge){let o=Po.get(e);o||Po.set(e,o=new Map);let r=o.get(a);r||(o.set(a,r=new Ur),r.map=o,r.key=a),r.track()}}function Yt(e,t,a,o,r,n){const s=Po.get(e);if(!s){Qa++;return}const l=i=>{i&&i.trigger()};if(Wr(),t==="clear")s.forEach(l);else{const i=Ae(e),c=i&&Ir(a);if(i&&a==="length"){const u=Number(o);s.forEach((p,w)=>{(w==="length"||w===eo||!Lt(w)&&w>=u)&&l(p)})}else switch((a!==void 0||s.has(void 0))&&l(s.get(a)),c&&l(s.get(eo)),t){case"add":i?c&&l(s.get("length")):(l(s.get(wa)),Oa(e)&&l(s.get(Vr)));break;case"delete":i||(l(s.get(wa)),Oa(e)&&l(s.get(Vr)));break;case"set":Oa(e)&&l(s.get(wa));break}}zr()}function od(e,t){const a=Po.get(e);return a&&a.get(t)}function Ba(e){const t=We(e);return t===e?t:(vt(t,"iterate",eo),Mt(e)?t:t.map(ft))}function Fo(e){return vt(e=We(e),"iterate",eo),e}const rd={__proto__:null,[Symbol.iterator](){return Kr(this,Symbol.iterator,ft)},concat(...e){return Ba(this).concat(...e.map(t=>Ae(t)?Ba(t):t))},entries(){return Kr(this,"entries",e=>(e[1]=ft(e[1]),e))},every(e,t){return Zt(this,"every",e,t,void 0,arguments)},filter(e,t){return Zt(this,"filter",e,t,a=>a.map(ft),arguments)},find(e,t){return Zt(this,"find",e,t,ft,arguments)},findIndex(e,t){return Zt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Zt(this,"findLast",e,t,ft,arguments)},findLastIndex(e,t){return Zt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Zt(this,"forEach",e,t,void 0,arguments)},includes(...e){return qr(this,"includes",e)},indexOf(...e){return qr(this,"indexOf",e)},join(e){return Ba(this).join(e)},lastIndexOf(...e){return qr(this,"lastIndexOf",e)},map(e,t){return Zt(this,"map",e,t,void 0,arguments)},pop(){return to(this,"pop")},push(...e){return to(this,"push",e)},reduce(e,...t){return Bs(this,"reduce",e,t)},reduceRight(e,...t){return Bs(this,"reduceRight",e,t)},shift(){return to(this,"shift")},some(e,t){return Zt(this,"some",e,t,void 0,arguments)},splice(...e){return to(this,"splice",e)},toReversed(){return Ba(this).toReversed()},toSorted(e){return Ba(this).toSorted(e)},toSpliced(...e){return Ba(this).toSpliced(...e)},unshift(...e){return to(this,"unshift",e)},values(){return Kr(this,"values",ft)}};function Kr(e,t,a){const o=Fo(e),r=o[t]();return o!==e&&!Mt(e)&&(r._next=r.next,r.next=()=>{const n=r._next();return n.value&&(n.value=a(n.value)),n}),r}const nd=Array.prototype;function Zt(e,t,a,o,r,n){const s=Fo(e),l=s!==e&&!Mt(e),i=s[t];if(i!==nd[t]){const p=i.apply(e,n);return l?ft(p):p}let c=a;s!==e&&(l?c=function(p,w){return a.call(this,ft(p),w,e)}:a.length>2&&(c=function(p,w){return a.call(this,p,w,e)}));const u=i.call(s,c,o);return l&&r?r(u):u}function Bs(e,t,a,o){const r=Fo(e);let n=a;return r!==e&&(Mt(e)?a.length>3&&(n=function(s,l,i){return a.call(this,s,l,i,e)}):n=function(s,l,i){return a.call(this,s,ft(l),i,e)}),r[t](n,...o)}function qr(e,t,a){const o=We(e);vt(o,"iterate",eo);const r=o[t](...a);return(r===-1||r===!1)&&Jr(a[0])?(a[0]=We(a[0]),o[t](...a)):r}function to(e,t,a=[]){Rt(),Wr();const o=We(e)[t].apply(e,a);return zr(),jt(),o}const sd=Or("__proto__,__v_isRef,__isVue"),Ns=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Lt));function ld(e){Lt(e)||(e=String(e));const t=We(this);return vt(t,"has",e),t.hasOwnProperty(e)}class Is{constructor(t=!1,a=!1){this._isReadonly=t,this._isShallow=a}get(t,a,o){if(a==="__v_skip")return t.__v_skip;const r=this._isReadonly,n=this._isShallow;if(a==="__v_isReactive")return!r;if(a==="__v_isReadonly")return r;if(a==="__v_isShallow")return n;if(a==="__v_raw")return o===(r?n?Rs:zs:n?Ws:Hs).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const s=Ae(t);if(!r){let i;if(s&&(i=rd[a]))return i;if(a==="hasOwnProperty")return ld}const l=Reflect.get(t,a,lt(t)?t:o);return(Lt(a)?Ns.has(a):sd(a))||(r||vt(t,"get",a),n)?l:lt(l)?s&&Ir(a)?l:l.value:qe(l)?r?js(l):Ut(l):l}}class Ps extends Is{constructor(t=!1){super(!1,t)}set(t,a,o,r){let n=t[a];if(!this._isShallow){const i=ia(n);if(!Mt(o)&&!ia(o)&&(n=We(n),o=We(o)),!Ae(t)&&lt(n)&&!lt(o))return i||(n.value=o),!0}const s=Ae(t)&&Ir(a)?Number(a)<t.length:je(t,a),l=Reflect.set(t,a,o,lt(t)?t:r);return t===We(r)&&(s?la(o,n)&&Yt(t,"set",a,o):Yt(t,"add",a,o)),l}deleteProperty(t,a){const o=je(t,a);t[a];const r=Reflect.deleteProperty(t,a);return r&&o&&Yt(t,"delete",a,void 0),r}has(t,a){const o=Reflect.has(t,a);return(!Lt(a)||!Ns.has(a))&&vt(t,"has",a),o}ownKeys(t){return vt(t,"iterate",Ae(t)?"length":wa),Reflect.ownKeys(t)}}class Fs extends Is{constructor(t=!1){super(!0,t)}set(t,a){return!0}deleteProperty(t,a){return!0}}const id=new Ps,cd=new Fs,dd=new Ps(!0),ud=new Fs(!0),Gr=e=>e,Ho=e=>Reflect.getPrototypeOf(e);function fd(e,t,a){return function(...o){const r=this.__v_raw,n=We(r),s=Oa(n),l=e==="entries"||e===Symbol.iterator&&s,i=e==="keys"&&s,c=r[e](...o),u=a?Gr:t?jo:ft;return!t&&vt(n,"iterate",i?Vr:wa),{next(){const{value:p,done:w}=c.next();return w?{value:p,done:w}:{value:l?[u(p[0]),u(p[1])]:u(p),done:w}},[Symbol.iterator](){return this}}}}function Wo(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function gd(e,t){const a={get(r){const n=this.__v_raw,s=We(n),l=We(r);e||(la(r,l)&&vt(s,"get",r),vt(s,"get",l));const{has:i}=Ho(s),c=t?Gr:e?jo:ft;if(i.call(s,r))return c(n.get(r));if(i.call(s,l))return c(n.get(l));n!==s&&n.get(r)},get size(){const r=this.__v_raw;return!e&&vt(We(r),"iterate",wa),r.size},has(r){const n=this.__v_raw,s=We(n),l=We(r);return e||(la(r,l)&&vt(s,"has",r),vt(s,"has",l)),r===l?n.has(r):n.has(r)||n.has(l)},forEach(r,n){const s=this,l=s.__v_raw,i=We(l),c=t?Gr:e?jo:ft;return!e&&vt(i,"iterate",wa),l.forEach((u,p)=>r.call(n,c(u),c(p),s))}};return dt(a,e?{add:Wo("add"),set:Wo("set"),delete:Wo("delete"),clear:Wo("clear")}:{add(r){!t&&!Mt(r)&&!ia(r)&&(r=We(r));const n=We(this);return Ho(n).has.call(n,r)||(n.add(r),Yt(n,"add",r,r)),this},set(r,n){!t&&!Mt(n)&&!ia(n)&&(n=We(n));const s=We(this),{has:l,get:i}=Ho(s);let c=l.call(s,r);c||(r=We(r),c=l.call(s,r));const u=i.call(s,r);return s.set(r,n),c?la(n,u)&&Yt(s,"set",r,n):Yt(s,"add",r,n),this},delete(r){const n=We(this),{has:s,get:l}=Ho(n);let i=s.call(n,r);i||(r=We(r),i=s.call(n,r)),l&&l.call(n,r);const c=n.delete(r);return i&&Yt(n,"delete",r,void 0),c},clear(){const r=We(this),n=r.size!==0,s=r.clear();return n&&Yt(r,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(r=>{a[r]=fd(r,e,t)}),a}function zo(e,t){const a=gd(e,t);return(o,r,n)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?o:Reflect.get(je(a,r)&&r in o?a:o,r,n)}const pd={get:zo(!1,!1)},hd={get:zo(!1,!0)},md={get:zo(!0,!1)},vd={get:zo(!0,!0)},Hs=new WeakMap,Ws=new WeakMap,zs=new WeakMap,Rs=new WeakMap;function bd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function yd(e){return e.__v_skip||!Object.isExtensible(e)?0:bd(Rc(e))}function Ut(e){return ia(e)?e:Ro(e,!1,id,pd,Hs)}function wd(e){return Ro(e,!1,dd,hd,Ws)}function js(e){return Ro(e,!0,cd,md,zs)}function jS(e){return Ro(e,!0,ud,vd,Rs)}function Ro(e,t,a,o,r){if(!qe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=yd(e);if(n===0)return e;const s=r.get(e);if(s)return s;const l=new Proxy(e,n===2?o:a);return r.set(e,l),l}function Na(e){return ia(e)?Na(e.__v_raw):!!(e&&e.__v_isReactive)}function ia(e){return!!(e&&e.__v_isReadonly)}function Mt(e){return!!(e&&e.__v_isShallow)}function Jr(e){return e?!!e.__v_raw:!1}function We(e){const t=e&&e.__v_raw;return t?We(t):e}function kd(e){return!je(e,"__v_skip")&&Object.isExtensible(e)&&ws(e,"__v_skip",!0),e}const ft=e=>qe(e)?Ut(e):e,jo=e=>qe(e)?js(e):e;function lt(e){return e?e.__v_isRef===!0:!1}function Q(e){return _d(e,!1)}function _d(e,t){return lt(e)?e:new xd(e,t)}class xd{constructor(t,a){this.dep=new Ur,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?t:We(t),this._value=a?t:ft(t),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(t){const a=this._rawValue,o=this.__v_isShallow||Mt(t)||ia(t);t=o?t:We(t),la(t,a)&&(this._rawValue=t,this._value=o?t:ft(t),this.dep.trigger())}}function A(e){return lt(e)?e.value:e}const Cd={get:(e,t,a)=>t==="__v_raw"?e:A(Reflect.get(e,t,a)),set:(e,t,a,o)=>{const r=e[t];return lt(r)&&!lt(a)?(r.value=a,!0):Reflect.set(e,t,a,o)}};function Us(e){return Na(e)?e:new Proxy(e,Cd)}function Yr(e){const t=Ae(e)?new Array(e.length):{};for(const a in e)t[a]=$d(e,a);return t}class Sd{constructor(t,a,o){this._object=t,this._key=a,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return od(We(this._object),this._key)}}function $d(e,t,a){const o=e[t];return lt(o)?o:new Sd(e,t,a)}class Td{constructor(t,a,o){this.fn=t,this.setter=a,this._value=void 0,this.dep=new Ur(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qa-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&Ge!==this)return Ts(this,!0),!0}get value(){const t=this.dep.track();return As(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Md(e,t,a=!1){let o,r;return Ne(e)?o=e:(o=e.get,r=e.set),new Td(o,r,a)}const Uo={},Vo=new WeakMap;let ka;function Dd(e,t=!1,a=ka){if(a){let o=Vo.get(a);o||Vo.set(a,o=[]),o.push(e)}}function Ad(e,t,a=Ke){const{immediate:o,deep:r,once:n,scheduler:s,augmentJob:l,call:i}=a,c=_=>r?_:Mt(_)||r===!1||r===0?Xt(_,1):Xt(_);let u,p,w,v,g=!1,f=!1;if(lt(e)?(p=()=>e.value,g=Mt(e)):Na(e)?(p=()=>c(e),g=!0):Ae(e)?(f=!0,g=e.some(_=>Na(_)||Mt(_)),p=()=>e.map(_=>{if(lt(_))return _.value;if(Na(_))return c(_);if(Ne(_))return i?i(_,2):_()})):Ne(e)?t?p=i?()=>i(e,2):e:p=()=>{if(w){Rt();try{w()}finally{jt()}}const _=ka;ka=u;try{return i?i(e,3,[v]):e(v)}finally{ka=_}}:p=zt,t&&r){const _=p,$=r===!0?1/0:r;p=()=>Xt(_(),$)}const m=ed(),D=()=>{u.stop(),m&&m.active&&Nr(m.effects,u)};if(n&&t){const _=t;t=(...$)=>{_(...$),D()}}let T=f?new Array(e.length).fill(Uo):Uo;const M=_=>{if(!(!(u.flags&1)||!u.dirty&&!_))if(t){const $=u.run();if(r||g||(f?$.some((I,C)=>la(I,T[C])):la($,T))){w&&w();const I=ka;ka=u;try{const C=[$,T===Uo?void 0:f&&T[0]===Uo?[]:T,v];T=$,i?i(t,3,C):t(...C)}finally{ka=I}}}else u.run()};return l&&l(M),u=new Ss(p),u.scheduler=s?()=>s(M,!1):M,v=_=>Dd(_,!1,u),w=u.onStop=()=>{const _=Vo.get(u);if(_){if(i)i(_,4);else for(const $ of _)$();Vo.delete(u)}},t?o?M(!0):T=u.run():s?s(M.bind(null,!0),!0):u.run(),D.pause=u.pause.bind(u),D.resume=u.resume.bind(u),D.stop=D,D}function Xt(e,t=1/0,a){if(t<=0||!qe(e)||e.__v_skip||(a=a||new Set,a.has(e)))return e;if(a.add(e),t--,lt(e))Xt(e.value,t,a);else if(Ae(e))for(let o=0;o<e.length;o++)Xt(e[o],t,a);else if(Ao(e)||Oa(e))e.forEach(o=>{Xt(o,t,a)});else if(ys(e)){for(const o in e)Xt(e[o],t,a);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&Xt(e[o],t,a)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ao=[];let Zr=!1;function US(e,...t){if(Zr)return;Zr=!0,Rt();const a=ao.length?ao[ao.length-1].component:null,o=a&&a.appContext.config.warnHandler,r=Ed();if(o)Ia(o,a,11,[e+t.map(n=>{var s,l;return(l=(s=n.toString)==null?void 0:s.call(n))!=null?l:JSON.stringify(n)}).join(""),a&&a.proxy,r.map(({vnode:n})=>`at <${Zl(a,n.type)}>`).join(`
`),r]);else{const n=[`[Vue warn]: ${e}`,...t];r.length&&n.push(`
`,...Ld(r)),console.warn(...n)}jt(),Zr=!1}function Ed(){let e=ao[ao.length-1];if(!e)return[];const t=[];for(;e;){const a=t[0];a&&a.vnode===e?a.recurseCount++:t.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return t}function Ld(e){const t=[];return e.forEach((a,o)=>{t.push(...o===0?[]:[`
`],...Od(a))}),t}function Od({vnode:e,recurseCount:t}){const a=t>0?`... (${t} recursive calls)`:"",o=e.component?e.component.parent==null:!1,r=` at <${Zl(e.component,e.type,o)}`,n=">"+a;return e.props?[r,...Bd(e.props),n]:[r+n]}function Bd(e){const t=[],a=Object.keys(e);return a.slice(0,3).forEach(o=>{t.push(...Vs(o,e[o]))}),a.length>3&&t.push(" ..."),t}function Vs(e,t,a){return Ze(t)?(t=JSON.stringify(t),a?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?a?t:[`${e}=${t}`]:lt(t)?(t=Vs(e,We(t.value),!0),a?t:[`${e}=Ref<`,t,">"]):Ne(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=We(t),a?t:[`${e}=`,t])}function Ia(e,t,a,o){try{return o?e(...o):e()}catch(r){oo(r,t,a)}}function Bt(e,t,a,o){if(Ne(e)){const r=Ia(e,t,a,o);return r&&vs(r)&&r.catch(n=>{oo(n,t,a)}),r}if(Ae(e)){const r=[];for(let n=0;n<e.length;n++)r.push(Bt(e[n],t,a,o));return r}}function oo(e,t,a,o=!0){const r=t?t.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||Ke;if(t){let l=t.parent;const i=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${a}`;for(;l;){const u=l.ec;if(u){for(let p=0;p<u.length;p++)if(u[p](e,i,c)===!1)return}l=l.parent}if(n){Rt(),Ia(n,null,10,[e,i,c]),jt();return}}Nd(e,a,r,o,s)}function Nd(e,t,a,o=!0,r=!1){if(r)throw e;console.error(e)}const yt=[];let Vt=-1;const Pa=[];let ca=null,Fa=0;const Ks=Promise.resolve();let Ko=null;function Qt(e){const t=Ko||Ks;return e?t.then(this?e.bind(this):e):t}function Id(e){let t=Vt+1,a=yt.length;for(;t<a;){const o=t+a>>>1,r=yt[o],n=ro(r);n<e||n===e&&r.flags&2?t=o+1:a=o}return t}function Xr(e){if(!(e.flags&1)){const t=ro(e),a=yt[yt.length-1];!a||!(e.flags&2)&&t>=ro(a)?yt.push(e):yt.splice(Id(t),0,e),e.flags|=1,qs()}}function qs(){Ko||(Ko=Ks.then(Ys))}function Pd(e){Ae(e)?Pa.push(...e):ca&&e.id===-1?ca.splice(Fa+1,0,e):e.flags&1||(Pa.push(e),e.flags|=1),qs()}function Gs(e,t,a=Vt+1){for(;a<yt.length;a++){const o=yt[a];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;yt.splice(a,1),a--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Js(e){if(Pa.length){const t=[...new Set(Pa)].sort((a,o)=>ro(a)-ro(o));if(Pa.length=0,ca){ca.push(...t);return}for(ca=t,Fa=0;Fa<ca.length;Fa++){const a=ca[Fa];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}ca=null,Fa=0}}const ro=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ys(e){try{for(Vt=0;Vt<yt.length;Vt++){const t=yt[Vt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ia(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Vt<yt.length;Vt++){const t=yt[Vt];t&&(t.flags&=-2)}Vt=-1,yt.length=0,Js(),Ko=null,(yt.length||Pa.length)&&Ys()}}let gt=null,Zs=null;function qo(e){const t=gt;return gt=e,Zs=e&&e.type.__scopeId||null,t}function Ue(e,t=gt,a){if(!t||e._n)return e;const o=(...r)=>{o._d&&Rl(-1);const n=qo(t);let s;try{s=e(...r)}finally{qo(n),o._d&&Rl(1)}return s};return o._n=!0,o._c=!0,o._d=!0,o}function da(e,t){if(gt===null)return e;const a=nr(gt),o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[n,s,l,i=Ke]=t[r];n&&(Ne(n)&&(n={mounted:n,updated:n}),n.deep&&Xt(s),o.push({dir:n,instance:a,value:s,oldValue:void 0,arg:l,modifiers:i}))}return e}function _a(e,t,a,o){const r=e.dirs,n=t&&t.dirs;for(let s=0;s<r.length;s++){const l=r[s];n&&(l.oldValue=n[s].value);let i=l.dir[o];i&&(Rt(),Bt(i,a,8,[e.el,l,e,t]),jt())}}const Xs=Symbol("_vte"),Qs=e=>e.__isTeleport,no=e=>e&&(e.disabled||e.disabled===""),el=e=>e&&(e.defer||e.defer===""),tl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,al=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Qr=(e,t)=>{const a=e&&e.to;return Ze(a)?t?t(a):null:a},ol={name:"Teleport",__isTeleport:!0,process(e,t,a,o,r,n,s,l,i,c){const{mc:u,pc:p,pbc:w,o:{insert:v,querySelector:g,createText:f,createComment:m}}=c,D=no(t.props);let{shapeFlag:T,children:M,dynamicChildren:_}=t;if(e==null){const $=t.el=f(""),I=t.anchor=f("");v($,a,o),v(I,a,o);const C=(b,h)=>{T&16&&(r&&r.isCE&&(r.ce._teleportTarget=b),u(M,b,h,r,n,s,l,i))},S=()=>{const b=t.target=Qr(t.props,g),h=rl(b,t,f,v);b&&(s!=="svg"&&tl(b)?s="svg":s!=="mathml"&&al(b)&&(s="mathml"),D||(C(b,h),Jo(t,!1)))};D&&(C(a,I),Jo(t,!0)),el(t.props)?(t.el.__isMounted=!1,kt(()=>{S(),delete t.el.__isMounted},n)):S()}else{if(el(t.props)&&e.el.__isMounted===!1){kt(()=>{ol.process(e,t,a,o,r,n,s,l,i,c)},n);return}t.el=e.el,t.targetStart=e.targetStart;const $=t.anchor=e.anchor,I=t.target=e.target,C=t.targetAnchor=e.targetAnchor,S=no(e.props),b=S?a:I,h=S?$:C;if(s==="svg"||tl(I)?s="svg":(s==="mathml"||al(I))&&(s="mathml"),_?(w(e.dynamicChildren,_,b,r,n,s,l),pn(e,t,!0)):i||p(e,t,b,h,r,n,s,l,!1),D)S?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Go(t,a,$,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const x=t.target=Qr(t.props,g);x&&Go(t,x,null,c,0)}else S&&Go(t,I,C,c,1);Jo(t,D)}},remove(e,t,a,{um:o,o:{remove:r}},n){const{shapeFlag:s,children:l,anchor:i,targetStart:c,targetAnchor:u,target:p,props:w}=e;if(p&&(r(c),r(u)),n&&r(i),s&16){const v=n||!no(w);for(let g=0;g<l.length;g++){const f=l[g];o(f,t,a,v,!!f.dynamicChildren)}}},move:Go,hydrate:Fd};function Go(e,t,a,{o:{insert:o},m:r},n=2){n===0&&o(e.targetAnchor,t,a);const{el:s,anchor:l,shapeFlag:i,children:c,props:u}=e,p=n===2;if(p&&o(s,t,a),(!p||no(u))&&i&16)for(let w=0;w<c.length;w++)r(c[w],t,a,2);p&&o(l,t,a)}function Fd(e,t,a,o,r,n,{o:{nextSibling:s,parentNode:l,querySelector:i,insert:c,createText:u}},p){const w=t.target=Qr(t.props,i);if(w){const v=no(t.props),g=w._lpa||w.firstChild;if(t.shapeFlag&16)if(v)t.anchor=p(s(e),t,l(e),a,o,r,n),t.targetStart=g,t.targetAnchor=g&&s(g);else{t.anchor=s(e);let f=g;for(;f;){if(f&&f.nodeType===8){if(f.data==="teleport start anchor")t.targetStart=f;else if(f.data==="teleport anchor"){t.targetAnchor=f,w._lpa=t.targetAnchor&&s(t.targetAnchor);break}}f=s(f)}t.targetAnchor||rl(w,t,u,c),p(g&&s(g),t,w,a,o,r,n)}Jo(t,v)}return t.anchor&&s(t.anchor)}const Hd=ol;function Jo(e,t){const a=e.ctx;if(a&&a.ut){let o,r;for(t?(o=e.el,r=e.anchor):(o=e.targetStart,r=e.targetAnchor);o&&o!==r;)o.nodeType===1&&o.setAttribute("data-v-owner",a.uid),o=o.nextSibling;a.ut()}}function rl(e,t,a,o){const r=t.targetStart=a(""),n=t.targetAnchor=a("");return r[Xs]=n,e&&(o(r,e),o(n,e)),n}const ea=Symbol("_leaveCb"),Yo=Symbol("_enterCb");function Wd(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return At(()=>{e.isMounted=!0}),Nt(()=>{e.isUnmounting=!0}),e}const Dt=[Function,Array],nl={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Dt,onEnter:Dt,onAfterEnter:Dt,onEnterCancelled:Dt,onBeforeLeave:Dt,onLeave:Dt,onAfterLeave:Dt,onLeaveCancelled:Dt,onBeforeAppear:Dt,onAppear:Dt,onAfterAppear:Dt,onAppearCancelled:Dt},sl=e=>{const t=e.subTree;return t.component?sl(t.component):t},zd={name:"BaseTransition",props:nl,setup(e,{slots:t}){const a=or(),o=Wd();return()=>{const r=t.default&&dl(t.default(),!0);if(!r||!r.length)return;const n=ll(r),s=We(e),{mode:l}=s;if(o.isLeaving)return tn(n);const i=cl(n);if(!i)return tn(n);let c=en(i,s,o,a,p=>c=p);i.type!==bt&&so(i,c);let u=a.subTree&&cl(a.subTree);if(u&&u.type!==bt&&!Ca(i,u)&&sl(a).type!==bt){let p=en(u,s,o,a);if(so(u,p),l==="out-in"&&i.type!==bt)return o.isLeaving=!0,p.afterLeave=()=>{o.isLeaving=!1,a.job.flags&8||a.update(),delete p.afterLeave,u=void 0},tn(n);l==="in-out"&&i.type!==bt?p.delayLeave=(w,v,g)=>{const f=il(o,u);f[String(u.key)]=u,w[ea]=()=>{v(),w[ea]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{g(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return n}}};function ll(e){let t=e[0];if(e.length>1){for(const a of e)if(a.type!==bt){t=a;break}}return t}const Rd=zd;function il(e,t){const{leavingVNodes:a}=e;let o=a.get(t.type);return o||(o=Object.create(null),a.set(t.type,o)),o}function en(e,t,a,o,r){const{appear:n,mode:s,persisted:l=!1,onBeforeEnter:i,onEnter:c,onAfterEnter:u,onEnterCancelled:p,onBeforeLeave:w,onLeave:v,onAfterLeave:g,onLeaveCancelled:f,onBeforeAppear:m,onAppear:D,onAfterAppear:T,onAppearCancelled:M}=t,_=String(e.key),$=il(a,e),I=(b,h)=>{b&&Bt(b,o,9,h)},C=(b,h)=>{const x=h[1];I(b,h),Ae(b)?b.every(E=>E.length<=1)&&x():b.length<=1&&x()},S={mode:s,persisted:l,beforeEnter(b){let h=i;if(!a.isMounted)if(n)h=m||i;else return;b[ea]&&b[ea](!0);const x=$[_];x&&Ca(e,x)&&x.el[ea]&&x.el[ea](),I(h,[b])},enter(b){let h=c,x=u,E=p;if(!a.isMounted)if(n)h=D||c,x=T||u,E=M||p;else return;let P=!1;const q=b[Yo]=O=>{P||(P=!0,O?I(E,[b]):I(x,[b]),S.delayedLeave&&S.delayedLeave(),b[Yo]=void 0)};h?C(h,[b,q]):q()},leave(b,h){const x=String(e.key);if(b[Yo]&&b[Yo](!0),a.isUnmounting)return h();I(w,[b]);let E=!1;const P=b[ea]=q=>{E||(E=!0,h(),q?I(f,[b]):I(g,[b]),b[ea]=void 0,$[x]===e&&delete $[x])};$[x]=e,v?C(v,[b,P]):P()},clone(b){const h=en(b,t,a,o,r);return r&&r(h),h}};return S}function tn(e){if(io(e))return e=ua(e),e.children=null,e}function cl(e){if(!io(e))return Qs(e.type)&&e.children?ll(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:a}=e;if(a){if(t&16)return a[0];if(t&32&&Ne(a.default))return a.default()}}function so(e,t){e.shapeFlag&6&&e.component?(e.transition=t,so(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function dl(e,t=!1,a){let o=[],r=0;for(let n=0;n<e.length;n++){let s=e[n];const l=a==null?s.key:String(a)+String(s.key!=null?s.key:n);s.type===le?(s.patchFlag&128&&r++,o=o.concat(dl(s.children,t,l))):(t||s.type!==bt)&&o.push(l!=null?ua(s,{key:l}):s)}if(r>1)for(let n=0;n<o.length;n++)o[n].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function Me(e,t){return Ne(e)?dt({name:e.name},t,{setup:e}):e}function an(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function lo(e,t,a,o,r=!1){if(Ae(e)){e.forEach((g,f)=>lo(g,t&&(Ae(t)?t[f]:t),a,o,r));return}if(Ha(o)&&!r){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&lo(e,t,a,o.component.subTree);return}const n=o.shapeFlag&4?nr(o.component):o.el,s=r?null:n,{i:l,r:i}=e,c=t&&t.r,u=l.refs===Ke?l.refs={}:l.refs,p=l.setupState,w=We(p),v=p===Ke?hs:g=>je(w,g);if(c!=null&&c!==i){if(Ze(c))u[c]=null,v(c)&&(p[c]=null);else if(lt(c)){c.value=null;const g=t;g.k&&(u[g.k]=null)}}if(Ne(i))Ia(i,l,12,[s,u]);else{const g=Ze(i),f=lt(i);if(g||f){const m=()=>{if(e.f){const D=g?v(i)?p[i]:u[i]:i.value;if(r)Ae(D)&&Nr(D,n);else if(Ae(D))D.includes(n)||D.push(n);else if(g)u[i]=[n],v(i)&&(p[i]=u[i]);else{const T=[n];i.value=T,e.k&&(u[e.k]=T)}}else g?(u[i]=s,v(i)&&(p[i]=s)):f&&(i.value=s,e.k&&(u[e.k]=s))};s?(m.id=-1,kt(m,a)):m()}}}const ul=e=>e.nodeType===8;No().requestIdleCallback,No().cancelIdleCallback;function jd(e,t){if(ul(e)&&e.data==="["){let a=1,o=e.nextSibling;for(;o;){if(o.nodeType===1){if(t(o)===!1)break}else if(ul(o))if(o.data==="]"){if(--a===0)break}else o.data==="["&&a++;o=o.nextSibling}}else t(e)}const Ha=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function et(e){Ne(e)&&(e={loader:e});const{loader:t,loadingComponent:a,errorComponent:o,delay:r=200,hydrate:n,timeout:s,suspensible:l=!0,onError:i}=e;let c=null,u,p=0;const w=()=>(p++,c=null,v()),v=()=>{let g;return c||(g=c=t().catch(f=>{if(f=f instanceof Error?f:new Error(String(f)),i)return new Promise((m,D)=>{i(f,()=>m(w()),()=>D(f),p+1)});throw f}).then(f=>g!==c&&c?c:(f&&(f.__esModule||f[Symbol.toStringTag]==="Module")&&(f=f.default),u=f,f)))};return Me({name:"AsyncComponentWrapper",__asyncLoader:v,__asyncHydrate(g,f,m){let D=!1;(f.bu||(f.bu=[])).push(()=>D=!0);const T=()=>{D||m()},M=n?()=>{const _=n(T,$=>jd(g,$));_&&(f.bum||(f.bum=[])).push(_)}:T;u?M():v().then(()=>!f.isUnmounted&&M())},get __asyncResolved(){return u},setup(){const g=pt;if(an(g),u)return()=>on(u,g);const f=M=>{c=null,oo(M,g,13,!o)};if(l&&g.suspense||za)return v().then(M=>()=>on(M,g)).catch(M=>(f(M),()=>o?$e(o,{error:M}):null));const m=Q(!1),D=Q(),T=Q(!!r);return r&&setTimeout(()=>{T.value=!1},r),s!=null&&setTimeout(()=>{if(!m.value&&!D.value){const M=new Error(`Async component timed out after ${s}ms.`);f(M),D.value=M}},s),v().then(()=>{m.value=!0,g.parent&&io(g.parent.vnode)&&g.parent.update()}).catch(M=>{f(M),D.value=M}),()=>{if(m.value&&u)return on(u,g);if(D.value&&o)return $e(o,{error:D.value});if(a&&!T.value)return $e(a)}}})}function on(e,t){const{ref:a,props:o,children:r,ce:n}=t.vnode,s=$e(e,o,r);return s.ref=a,s.ce=n,delete t.vnode.ce,s}const io=e=>e.type.__isKeepAlive;function Ud(e,t){fl(e,"a",t)}function Vd(e,t){fl(e,"da",t)}function fl(e,t,a=pt){const o=e.__wdc||(e.__wdc=()=>{let r=a;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Zo(t,o,a),a){let r=a.parent;for(;r&&r.parent;)io(r.parent.vnode)&&Kd(o,t,a,r),r=r.parent}}function Kd(e,t,a,o){const r=Zo(t,e,o,!0);rn(()=>{Nr(o[t],r)},a)}function Zo(e,t,a=pt,o=!1){if(a){const r=a[e]||(a[e]=[]),n=t.__weh||(t.__weh=(...s)=>{Rt();const l=ho(a),i=Bt(t,a,e,s);return l(),jt(),i});return o?r.unshift(n):r.push(n),n}}const ta=e=>(t,a=pt)=>{(!za||e==="sp")&&Zo(e,(...o)=>t(...o),a)},qd=ta("bm"),At=ta("m"),Gd=ta("bu"),Jd=ta("u"),Nt=ta("bum"),rn=ta("um"),Yd=ta("sp"),Zd=ta("rtg"),Xd=ta("rtc");function Qd(e,t=pt){Zo("ec",e,t)}const gl="components";function eu(e,t){return hl(gl,e,!0,t)||e}const pl=Symbol.for("v-ndc");function tu(e){return Ze(e)?hl(gl,e,!1)||e:e||pl}function hl(e,t,a=!0,o=!1){const r=gt||pt;if(r){const n=r.type;{const l=Yl(n,!1);if(l&&(l===t||l===Tt(t)||l===Lo(Tt(t))))return n}const s=ml(r[e]||n[e],t)||ml(r.appContext[e],t);return!s&&o?n:s}}function ml(e,t){return e&&(e[t]||e[Tt(t)]||e[Lo(Tt(t))])}function we(e,t,a,o){let r;const n=a,s=Ae(e);if(s||Ze(e)){const l=s&&Na(e);let i=!1,c=!1;l&&(i=!Mt(e),c=ia(e),e=Fo(e)),r=new Array(e.length);for(let u=0,p=e.length;u<p;u++)r[u]=t(i?c?jo(ft(e[u])):ft(e[u]):e[u],u,void 0,n)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,n)}else if(qe(e))if(e[Symbol.iterator])r=Array.from(e,(l,i)=>t(l,i,void 0,n));else{const l=Object.keys(e);r=new Array(l.length);for(let i=0,c=l.length;i<c;i++){const u=l[i];r[i]=t(e[u],u,i,n)}}else r=[];return r}function au(e,t,a={},o,r){if(gt.ce||gt.parent&&Ha(gt.parent)&&gt.parent.ce)return a.name=t,y(),Re(le,null,[$e("slot",a,o)],64);let n=e[t];n&&n._c&&(n._d=!1),y();const s=n&&vl(n(a)),l=a.key||s&&s.key,i=Re(le,{key:(l&&!Lt(l)?l:`_${t}`)+(!s&&o?"_fb":"")},s||[],s&&e._===1?64:-2);return n&&n._c&&(n._d=!0),i}function vl(e){return e.some(t=>po(t)?!(t.type===bt||t.type===le&&!vl(t.children)):!0)?e:null}const nn=e=>e?ql(e)?nr(e):nn(e.parent):null,co=dt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>nn(e.parent),$root:e=>nn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>kl(e),$forceUpdate:e=>e.f||(e.f=()=>{Xr(e.update)}),$nextTick:e=>e.n||(e.n=Qt.bind(e.proxy)),$watch:e=>Cu.bind(e)}),sn=(e,t)=>e!==Ke&&!e.__isScriptSetup&&je(e,t),ou={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:a,setupState:o,data:r,props:n,accessCache:s,type:l,appContext:i}=e;let c;if(t[0]!=="$"){const v=s[t];if(v!==void 0)switch(v){case 1:return o[t];case 2:return r[t];case 4:return a[t];case 3:return n[t]}else{if(sn(o,t))return s[t]=1,o[t];if(r!==Ke&&je(r,t))return s[t]=2,r[t];if((c=e.propsOptions[0])&&je(c,t))return s[t]=3,n[t];if(a!==Ke&&je(a,t))return s[t]=4,a[t];ln&&(s[t]=0)}}const u=co[t];let p,w;if(u)return t==="$attrs"&&vt(e.attrs,"get",""),u(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(a!==Ke&&je(a,t))return s[t]=4,a[t];if(w=i.config.globalProperties,je(w,t))return w[t]},set({_:e},t,a){const{data:o,setupState:r,ctx:n}=e;return sn(r,t)?(r[t]=a,!0):o!==Ke&&je(o,t)?(o[t]=a,!0):je(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=a,!0)},has({_:{data:e,setupState:t,accessCache:a,ctx:o,appContext:r,propsOptions:n,type:s}},l){let i,c;return!!(a[l]||e!==Ke&&l[0]!=="$"&&je(e,l)||sn(t,l)||(i=n[0])&&je(i,l)||je(o,l)||je(co,l)||je(r.config.globalProperties,l)||(c=s.__cssModules)&&c[l])},defineProperty(e,t,a){return a.get!=null?e._.accessCache[t]=0:je(a,"value")&&this.set(e,t,a.value,null),Reflect.defineProperty(e,t,a)}};function bl(e){return Ae(e)?e.reduce((t,a)=>(t[a]=null,t),{}):e}let ln=!0;function ru(e){const t=kl(e),a=e.proxy,o=e.ctx;ln=!1,t.beforeCreate&&yl(t.beforeCreate,e,"bc");const{data:r,computed:n,methods:s,watch:l,provide:i,inject:c,created:u,beforeMount:p,mounted:w,beforeUpdate:v,updated:g,activated:f,deactivated:m,beforeDestroy:D,beforeUnmount:T,destroyed:M,unmounted:_,render:$,renderTracked:I,renderTriggered:C,errorCaptured:S,serverPrefetch:b,expose:h,inheritAttrs:x,components:E,directives:P,filters:q}=t;if(c&&nu(c,o,null),s)for(const K in s){const J=s[K];Ne(J)&&(o[K]=J.bind(a))}if(r){const K=r.call(a,a);qe(K)&&(e.data=Ut(K))}if(ln=!0,n)for(const K in n){const J=n[K],pe=Ne(J)?J.bind(a,a):Ne(J.get)?J.get.bind(a,a):zt,Y=!Ne(J)&&Ne(J.set)?J.set.bind(a):zt,R=B({get:pe,set:Y});Object.defineProperty(o,K,{enumerable:!0,configurable:!0,get:()=>R.value,set:ae=>R.value=ae})}if(l)for(const K in l)wl(l[K],o,a,K);if(i){const K=Ne(i)?i.call(a):i;Reflect.ownKeys(K).forEach(J=>{uu(J,K[J])})}u&&yl(u,e,"c");function j(K,J){Ae(J)?J.forEach(pe=>K(pe.bind(a))):J&&K(J.bind(a))}if(j(qd,p),j(At,w),j(Gd,v),j(Jd,g),j(Ud,f),j(Vd,m),j(Qd,S),j(Xd,I),j(Zd,C),j(Nt,T),j(rn,_),j(Yd,b),Ae(h))if(h.length){const K=e.exposed||(e.exposed={});h.forEach(J=>{Object.defineProperty(K,J,{get:()=>a[J],set:pe=>a[J]=pe,enumerable:!0})})}else e.exposed||(e.exposed={});$&&e.render===zt&&(e.render=$),x!=null&&(e.inheritAttrs=x),E&&(e.components=E),P&&(e.directives=P),b&&an(e)}function nu(e,t,a=zt){Ae(e)&&(e=cn(e));for(const o in e){const r=e[o];let n;qe(r)?"default"in r?n=Qo(r.from||o,r.default,!0):n=Qo(r.from||o):n=Qo(r),lt(n)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>n.value,set:s=>n.value=s}):t[o]=n}}function yl(e,t,a){Bt(Ae(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,a)}function wl(e,t,a,o){let r=o.includes(".")?Pl(a,o):()=>a[o];if(Ze(e)){const n=t[e];Ne(n)&&Be(r,n)}else if(Ne(e))Be(r,e.bind(a));else if(qe(e))if(Ae(e))e.forEach(n=>wl(n,t,a,o));else{const n=Ne(e.handler)?e.handler.bind(a):t[e.handler];Ne(n)&&Be(r,n,e)}}function kl(e){const t=e.type,{mixins:a,extends:o}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:s}}=e.appContext,l=n.get(t);let i;return l?i=l:!r.length&&!a&&!o?i=t:(i={},r.length&&r.forEach(c=>Xo(i,c,s,!0)),Xo(i,t,s)),qe(t)&&n.set(t,i),i}function Xo(e,t,a,o=!1){const{mixins:r,extends:n}=t;n&&Xo(e,n,a,!0),r&&r.forEach(s=>Xo(e,s,a,!0));for(const s in t)if(!(o&&s==="expose")){const l=su[s]||a&&a[s];e[s]=l?l(e[s],t[s]):t[s]}return e}const su={data:_l,props:xl,emits:xl,methods:uo,computed:uo,beforeCreate:wt,created:wt,beforeMount:wt,mounted:wt,beforeUpdate:wt,updated:wt,beforeDestroy:wt,beforeUnmount:wt,destroyed:wt,unmounted:wt,activated:wt,deactivated:wt,errorCaptured:wt,serverPrefetch:wt,components:uo,directives:uo,watch:iu,provide:_l,inject:lu};function _l(e,t){return t?e?function(){return dt(Ne(e)?e.call(this,this):e,Ne(t)?t.call(this,this):t)}:t:e}function lu(e,t){return uo(cn(e),cn(t))}function cn(e){if(Ae(e)){const t={};for(let a=0;a<e.length;a++)t[e[a]]=e[a];return t}return e}function wt(e,t){return e?[...new Set([].concat(e,t))]:t}function uo(e,t){return e?dt(Object.create(null),e,t):t}function xl(e,t){return e?Ae(e)&&Ae(t)?[...new Set([...e,...t])]:dt(Object.create(null),bl(e),bl(t??{})):t}function iu(e,t){if(!e)return t;if(!t)return e;const a=dt(Object.create(null),e);for(const o in t)a[o]=wt(e[o],t[o]);return a}function Cl(){return{app:null,config:{isNativeTag:hs,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let cu=0;function du(e,t){return function(o,r=null){Ne(o)||(o=dt({},o)),r!=null&&!qe(r)&&(r=null);const n=Cl(),s=new WeakSet,l=[];let i=!1;const c=n.app={_uid:cu++,_component:o,_props:r,_container:null,_context:n,_instance:null,version:Vu,get config(){return n.config},set config(u){},use(u,...p){return s.has(u)||(u&&Ne(u.install)?(s.add(u),u.install(c,...p)):Ne(u)&&(s.add(u),u(c,...p))),c},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),c},component(u,p){return p?(n.components[u]=p,c):n.components[u]},directive(u,p){return p?(n.directives[u]=p,c):n.directives[u]},mount(u,p,w){if(!i){const v=c._ceVNode||$e(o,r);return v.appContext=n,w===!0?w="svg":w===!1&&(w=void 0),e(v,u,w),i=!0,c._container=u,u.__vue_app__=c,nr(v.component)}},onUnmount(u){l.push(u)},unmount(){i&&(Bt(l,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,p){return n.provides[u]=p,c},runWithContext(u){const p=Wa;Wa=c;try{return u()}finally{Wa=p}}};return c}}let Wa=null;function uu(e,t){if(pt){let a=pt.provides;const o=pt.parent&&pt.parent.provides;o===a&&(a=pt.provides=Object.create(o)),a[e]=t}}function Qo(e,t,a=!1){const o=or();if(o||Wa){let r=Wa?Wa._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return a&&Ne(t)?t.call(o&&o.proxy):t}}const Sl={},$l=()=>Object.create(Sl),Tl=e=>Object.getPrototypeOf(e)===Sl;function fu(e,t,a,o=!1){const r={},n=$l();e.propsDefaults=Object.create(null),Ml(e,t,r,n);for(const s in e.propsOptions[0])s in r||(r[s]=void 0);a?e.props=o?r:wd(r):e.type.props?e.props=r:e.props=n,e.attrs=n}function gu(e,t,a,o){const{props:r,attrs:n,vnode:{patchFlag:s}}=e,l=We(r),[i]=e.propsOptions;let c=!1;if((o||s>0)&&!(s&16)){if(s&8){const u=e.vnode.dynamicProps;for(let p=0;p<u.length;p++){let w=u[p];if(er(e.emitsOptions,w))continue;const v=t[w];if(i)if(je(n,w))v!==n[w]&&(n[w]=v,c=!0);else{const g=Tt(w);r[g]=dn(i,l,g,v,e,!1)}else v!==n[w]&&(n[w]=v,c=!0)}}}else{Ml(e,t,r,n)&&(c=!0);let u;for(const p in l)(!t||!je(t,p)&&((u=sa(p))===p||!je(t,u)))&&(i?a&&(a[p]!==void 0||a[u]!==void 0)&&(r[p]=dn(i,l,p,void 0,e,!0)):delete r[p]);if(n!==l)for(const p in n)(!t||!je(t,p))&&(delete n[p],c=!0)}c&&Yt(e.attrs,"set","")}function Ml(e,t,a,o){const[r,n]=e.propsOptions;let s=!1,l;if(t)for(let i in t){if(Ya(i))continue;const c=t[i];let u;r&&je(r,u=Tt(i))?!n||!n.includes(u)?a[u]=c:(l||(l={}))[u]=c:er(e.emitsOptions,i)||(!(i in o)||c!==o[i])&&(o[i]=c,s=!0)}if(n){const i=We(a),c=l||Ke;for(let u=0;u<n.length;u++){const p=n[u];a[p]=dn(r,i,p,c[p],e,!je(c,p))}}return s}function dn(e,t,a,o,r,n){const s=e[a];if(s!=null){const l=je(s,"default");if(l&&o===void 0){const i=s.default;if(s.type!==Function&&!s.skipFactory&&Ne(i)){const{propsDefaults:c}=r;if(a in c)o=c[a];else{const u=ho(r);o=c[a]=i.call(null,t),u()}}else o=i;r.ce&&r.ce._setProp(a,o)}s[0]&&(n&&!l?o=!1:s[1]&&(o===""||o===sa(a))&&(o=!0))}return o}const pu=new WeakMap;function Dl(e,t,a=!1){const o=a?pu:t.propsCache,r=o.get(e);if(r)return r;const n=e.props,s={},l=[];let i=!1;if(!Ne(e)){const u=p=>{i=!0;const[w,v]=Dl(p,t,!0);dt(s,w),v&&l.push(...v)};!a&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!n&&!i)return qe(e)&&o.set(e,La),La;if(Ae(n))for(let u=0;u<n.length;u++){const p=Tt(n[u]);Al(p)&&(s[p]=Ke)}else if(n)for(const u in n){const p=Tt(u);if(Al(p)){const w=n[u],v=s[p]=Ae(w)||Ne(w)?{type:w}:dt({},w),g=v.type;let f=!1,m=!0;if(Ae(g))for(let D=0;D<g.length;++D){const T=g[D],M=Ne(T)&&T.name;if(M==="Boolean"){f=!0;break}else M==="String"&&(m=!1)}else f=Ne(g)&&g.name==="Boolean";v[0]=f,v[1]=m,(f||je(v,"default"))&&l.push(p)}}const c=[s,l];return qe(e)&&o.set(e,c),c}function Al(e){return e[0]!=="$"&&!Ya(e)}const un=e=>e==="_"||e==="_ctx"||e==="$stable",fn=e=>Ae(e)?e.map(Kt):[Kt(e)],hu=(e,t,a)=>{if(t._n)return t;const o=Ue((...r)=>fn(t(...r)),a);return o._c=!1,o},El=(e,t,a)=>{const o=e._ctx;for(const r in e){if(un(r))continue;const n=e[r];if(Ne(n))t[r]=hu(r,n,o);else if(n!=null){const s=fn(n);t[r]=()=>s}}},Ll=(e,t)=>{const a=fn(t);e.slots.default=()=>a},Ol=(e,t,a)=>{for(const o in t)(a||!un(o))&&(e[o]=t[o])},mu=(e,t,a)=>{const o=e.slots=$l();if(e.vnode.shapeFlag&32){const r=t._;r?(Ol(o,t,a),a&&ws(o,"_",r,!0)):El(t,o)}else t&&Ll(e,t)},vu=(e,t,a)=>{const{vnode:o,slots:r}=e;let n=!0,s=Ke;if(o.shapeFlag&32){const l=t._;l?a&&l===1?n=!1:Ol(r,t,a):(n=!t.$stable,El(t,r)),s=t}else t&&(Ll(e,t),s={default:1});if(n)for(const l in r)!un(l)&&s[l]==null&&delete r[l]},kt=Eu;function bu(e){return yu(e)}function yu(e,t){const a=No();a.__VUE__=!0;const{insert:o,remove:r,patchProp:n,createElement:s,createText:l,createComment:i,setText:c,setElementText:u,parentNode:p,nextSibling:w,setScopeId:v=zt,insertStaticContent:g}=e,f=(L,W,G,te=null,ee=null,oe=null,fe=void 0,de=null,ue=!!W.dynamicChildren)=>{if(L===W)return;L&&!Ca(L,W)&&(te=F(L),ae(L,ee,oe,!0),L=null),W.patchFlag===-2&&(ue=!1,W.dynamicChildren=null);const{type:se,ref:_e,shapeFlag:he}=W;switch(se){case tr:m(L,W,G,te);break;case bt:D(L,W,G,te);break;case hn:L==null&&T(W,G,te,fe);break;case le:E(L,W,G,te,ee,oe,fe,de,ue);break;default:he&1?$(L,W,G,te,ee,oe,fe,de,ue):he&6?P(L,W,G,te,ee,oe,fe,de,ue):(he&64||he&128)&&se.process(L,W,G,te,ee,oe,fe,de,ue,ne)}_e!=null&&ee?lo(_e,L&&L.ref,oe,W||L,!W):_e==null&&L&&L.ref!=null&&lo(L.ref,null,oe,L,!0)},m=(L,W,G,te)=>{if(L==null)o(W.el=l(W.children),G,te);else{const ee=W.el=L.el;W.children!==L.children&&c(ee,W.children)}},D=(L,W,G,te)=>{L==null?o(W.el=i(W.children||""),G,te):W.el=L.el},T=(L,W,G,te)=>{[L.el,L.anchor]=g(L.children,W,G,te,L.el,L.anchor)},M=({el:L,anchor:W},G,te)=>{let ee;for(;L&&L!==W;)ee=w(L),o(L,G,te),L=ee;o(W,G,te)},_=({el:L,anchor:W})=>{let G;for(;L&&L!==W;)G=w(L),r(L),L=G;r(W)},$=(L,W,G,te,ee,oe,fe,de,ue)=>{W.type==="svg"?fe="svg":W.type==="math"&&(fe="mathml"),L==null?I(W,G,te,ee,oe,fe,de,ue):b(L,W,ee,oe,fe,de,ue)},I=(L,W,G,te,ee,oe,fe,de)=>{let ue,se;const{props:_e,shapeFlag:he,transition:ge,dirs:me}=L;if(ue=L.el=s(L.type,oe,_e&&_e.is,_e),he&8?u(ue,L.children):he&16&&S(L.children,ue,null,te,ee,gn(L,oe),fe,de),me&&_a(L,null,te,"created"),C(ue,L,L.scopeId,fe,te),_e){for(const Ce in _e)Ce!=="value"&&!Ya(Ce)&&n(ue,Ce,null,_e[Ce],oe,te);"value"in _e&&n(ue,"value",null,_e.value,oe),(se=_e.onVnodeBeforeMount)&&qt(se,te,L)}me&&_a(L,null,te,"beforeMount");const Se=wu(ee,ge);Se&&ge.beforeEnter(ue),o(ue,W,G),((se=_e&&_e.onVnodeMounted)||Se||me)&&kt(()=>{se&&qt(se,te,L),Se&&ge.enter(ue),me&&_a(L,null,te,"mounted")},ee)},C=(L,W,G,te,ee)=>{if(G&&v(L,G),te)for(let oe=0;oe<te.length;oe++)v(L,te[oe]);if(ee){let oe=ee.subTree;if(W===oe||zl(oe.type)&&(oe.ssContent===W||oe.ssFallback===W)){const fe=ee.vnode;C(L,fe,fe.scopeId,fe.slotScopeIds,ee.parent)}}},S=(L,W,G,te,ee,oe,fe,de,ue=0)=>{for(let se=ue;se<L.length;se++){const _e=L[se]=de?fa(L[se]):Kt(L[se]);f(null,_e,W,G,te,ee,oe,fe,de)}},b=(L,W,G,te,ee,oe,fe)=>{const de=W.el=L.el;let{patchFlag:ue,dynamicChildren:se,dirs:_e}=W;ue|=L.patchFlag&16;const he=L.props||Ke,ge=W.props||Ke;let me;if(G&&xa(G,!1),(me=ge.onVnodeBeforeUpdate)&&qt(me,G,W,L),_e&&_a(W,L,G,"beforeUpdate"),G&&xa(G,!0),(he.innerHTML&&ge.innerHTML==null||he.textContent&&ge.textContent==null)&&u(de,""),se?h(L.dynamicChildren,se,de,G,te,gn(W,ee),oe):fe||J(L,W,de,null,G,te,gn(W,ee),oe,!1),ue>0){if(ue&16)x(de,he,ge,G,ee);else if(ue&2&&he.class!==ge.class&&n(de,"class",null,ge.class,ee),ue&4&&n(de,"style",he.style,ge.style,ee),ue&8){const Se=W.dynamicProps;for(let Ce=0;Ce<Se.length;Ce++){const Te=Se[Ce],Oe=he[Te],Ie=ge[Te];(Ie!==Oe||Te==="value")&&n(de,Te,Oe,Ie,ee,G)}}ue&1&&L.children!==W.children&&u(de,W.children)}else!fe&&se==null&&x(de,he,ge,G,ee);((me=ge.onVnodeUpdated)||_e)&&kt(()=>{me&&qt(me,G,W,L),_e&&_a(W,L,G,"updated")},te)},h=(L,W,G,te,ee,oe,fe)=>{for(let de=0;de<W.length;de++){const ue=L[de],se=W[de],_e=ue.el&&(ue.type===le||!Ca(ue,se)||ue.shapeFlag&198)?p(ue.el):G;f(ue,se,_e,null,te,ee,oe,fe,!0)}},x=(L,W,G,te,ee)=>{if(W!==G){if(W!==Ke)for(const oe in W)!Ya(oe)&&!(oe in G)&&n(L,oe,W[oe],null,ee,te);for(const oe in G){if(Ya(oe))continue;const fe=G[oe],de=W[oe];fe!==de&&oe!=="value"&&n(L,oe,de,fe,ee,te)}"value"in G&&n(L,"value",W.value,G.value,ee)}},E=(L,W,G,te,ee,oe,fe,de,ue)=>{const se=W.el=L?L.el:l(""),_e=W.anchor=L?L.anchor:l("");let{patchFlag:he,dynamicChildren:ge,slotScopeIds:me}=W;me&&(de=de?de.concat(me):me),L==null?(o(se,G,te),o(_e,G,te),S(W.children||[],G,_e,ee,oe,fe,de,ue)):he>0&&he&64&&ge&&L.dynamicChildren?(h(L.dynamicChildren,ge,G,ee,oe,fe,de),(W.key!=null||ee&&W===ee.subTree)&&pn(L,W,!0)):J(L,W,G,_e,ee,oe,fe,de,ue)},P=(L,W,G,te,ee,oe,fe,de,ue)=>{W.slotScopeIds=de,L==null?W.shapeFlag&512?ee.ctx.activate(W,G,te,fe,ue):q(W,G,te,ee,oe,fe,ue):O(L,W,ue)},q=(L,W,G,te,ee,oe,fe)=>{const de=L.component=Pu(L,te,ee);if(io(L)&&(de.ctx.renderer=ne),Fu(de,!1,fe),de.asyncDep){if(ee&&ee.registerDep(de,j,fe),!L.el){const ue=de.subTree=$e(bt);D(null,ue,W,G),L.placeholder=ue.el}}else j(de,L,W,G,ee,oe,fe)},O=(L,W,G)=>{const te=W.component=L.component;if(Du(L,W,G))if(te.asyncDep&&!te.asyncResolved){K(te,W,G);return}else te.next=W,te.update();else W.el=L.el,te.vnode=W},j=(L,W,G,te,ee,oe,fe)=>{const de=()=>{if(L.isMounted){let{next:he,bu:ge,u:me,parent:Se,vnode:Ce}=L;{const He=Bl(L);if(He){he&&(he.el=Ce.el,K(L,he,fe)),He.asyncDep.then(()=>{L.isUnmounted||de()});return}}let Te=he,Oe;xa(L,!1),he?(he.el=Ce.el,K(L,he,fe)):he=Ce,ge&&Oo(ge),(Oe=he.props&&he.props.onVnodeBeforeUpdate)&&qt(Oe,Se,he,Ce),xa(L,!0);const Ie=Hl(L),Fe=L.subTree;L.subTree=Ie,f(Fe,Ie,p(Fe.el),F(Fe),L,ee,oe),he.el=Ie.el,Te===null&&Au(L,Ie.el),me&&kt(me,ee),(Oe=he.props&&he.props.onVnodeUpdated)&&kt(()=>qt(Oe,Se,he,Ce),ee)}else{let he;const{el:ge,props:me}=W,{bm:Se,m:Ce,parent:Te,root:Oe,type:Ie}=L,Fe=Ha(W);xa(L,!1),Se&&Oo(Se),!Fe&&(he=me&&me.onVnodeBeforeMount)&&qt(he,Te,W),xa(L,!0);{Oe.ce&&Oe.ce._def.shadowRoot!==!1&&Oe.ce._injectChildStyle(Ie);const He=L.subTree=Hl(L);f(null,He,G,te,L,ee,oe),W.el=He.el}if(Ce&&kt(Ce,ee),!Fe&&(he=me&&me.onVnodeMounted)){const He=W;kt(()=>qt(he,Te,He),ee)}(W.shapeFlag&256||Te&&Ha(Te.vnode)&&Te.vnode.shapeFlag&256)&&L.a&&kt(L.a,ee),L.isMounted=!0,W=G=te=null}};L.scope.on();const ue=L.effect=new Ss(de);L.scope.off();const se=L.update=ue.run.bind(ue),_e=L.job=ue.runIfDirty.bind(ue);_e.i=L,_e.id=L.uid,ue.scheduler=()=>Xr(_e),xa(L,!0),se()},K=(L,W,G)=>{W.component=L;const te=L.vnode.props;L.vnode=W,L.next=null,gu(L,W.props,te,G),vu(L,W.children,G),Rt(),Gs(L),jt()},J=(L,W,G,te,ee,oe,fe,de,ue=!1)=>{const se=L&&L.children,_e=L?L.shapeFlag:0,he=W.children,{patchFlag:ge,shapeFlag:me}=W;if(ge>0){if(ge&128){Y(se,he,G,te,ee,oe,fe,de,ue);return}else if(ge&256){pe(se,he,G,te,ee,oe,fe,de,ue);return}}me&8?(_e&16&&be(se,ee,oe),he!==se&&u(G,he)):_e&16?me&16?Y(se,he,G,te,ee,oe,fe,de,ue):be(se,ee,oe,!0):(_e&8&&u(G,""),me&16&&S(he,G,te,ee,oe,fe,de,ue))},pe=(L,W,G,te,ee,oe,fe,de,ue)=>{L=L||La,W=W||La;const se=L.length,_e=W.length,he=Math.min(se,_e);let ge;for(ge=0;ge<he;ge++){const me=W[ge]=ue?fa(W[ge]):Kt(W[ge]);f(L[ge],me,G,null,ee,oe,fe,de,ue)}se>_e?be(L,ee,oe,!0,!1,he):S(W,G,te,ee,oe,fe,de,ue,he)},Y=(L,W,G,te,ee,oe,fe,de,ue)=>{let se=0;const _e=W.length;let he=L.length-1,ge=_e-1;for(;se<=he&&se<=ge;){const me=L[se],Se=W[se]=ue?fa(W[se]):Kt(W[se]);if(Ca(me,Se))f(me,Se,G,null,ee,oe,fe,de,ue);else break;se++}for(;se<=he&&se<=ge;){const me=L[he],Se=W[ge]=ue?fa(W[ge]):Kt(W[ge]);if(Ca(me,Se))f(me,Se,G,null,ee,oe,fe,de,ue);else break;he--,ge--}if(se>he){if(se<=ge){const me=ge+1,Se=me<_e?W[me].el:te;for(;se<=ge;)f(null,W[se]=ue?fa(W[se]):Kt(W[se]),G,Se,ee,oe,fe,de,ue),se++}}else if(se>ge)for(;se<=he;)ae(L[se],ee,oe,!0),se++;else{const me=se,Se=se,Ce=new Map;for(se=Se;se<=ge;se++){const Pe=W[se]=ue?fa(W[se]):Kt(W[se]);Pe.key!=null&&Ce.set(Pe.key,se)}let Te,Oe=0;const Ie=ge-Se+1;let Fe=!1,He=0;const ot=new Array(Ie);for(se=0;se<Ie;se++)ot[se]=0;for(se=me;se<=he;se++){const Pe=L[se];if(Oe>=Ie){ae(Pe,ee,oe,!0);continue}let mt;if(Pe.key!=null)mt=Ce.get(Pe.key);else for(Te=Se;Te<=ge;Te++)if(ot[Te-Se]===0&&Ca(Pe,W[Te])){mt=Te;break}mt===void 0?ae(Pe,ee,oe,!0):(ot[mt-Se]=se+1,mt>=He?He=mt:Fe=!0,f(Pe,W[mt],G,null,ee,oe,fe,de,ue),Oe++)}const st=Fe?ku(ot):La;for(Te=st.length-1,se=Ie-1;se>=0;se--){const Pe=Se+se,mt=W[Pe],Ye=W[Pe+1],Xe=Pe+1<_e?Ye.el||Ye.placeholder:te;ot[se]===0?f(null,mt,G,Xe,ee,oe,fe,de,ue):Fe&&(Te<0||se!==st[Te]?R(mt,G,Xe,2):Te--)}}},R=(L,W,G,te,ee=null)=>{const{el:oe,type:fe,transition:de,children:ue,shapeFlag:se}=L;if(se&6){R(L.component.subTree,W,G,te);return}if(se&128){L.suspense.move(W,G,te);return}if(se&64){fe.move(L,W,G,ne);return}if(fe===le){o(oe,W,G);for(let he=0;he<ue.length;he++)R(ue[he],W,G,te);o(L.anchor,W,G);return}if(fe===hn){M(L,W,G);return}if(te!==2&&se&1&&de)if(te===0)de.beforeEnter(oe),o(oe,W,G),kt(()=>de.enter(oe),ee);else{const{leave:he,delayLeave:ge,afterLeave:me}=de,Se=()=>{L.ctx.isUnmounted?r(oe):o(oe,W,G)},Ce=()=>{oe._isLeaving&&oe[ea](!0),he(oe,()=>{Se(),me&&me()})};ge?ge(oe,Se,Ce):Ce()}else o(oe,W,G)},ae=(L,W,G,te=!1,ee=!1)=>{const{type:oe,props:fe,ref:de,children:ue,dynamicChildren:se,shapeFlag:_e,patchFlag:he,dirs:ge,cacheIndex:me}=L;if(he===-2&&(ee=!1),de!=null&&(Rt(),lo(de,null,G,L,!0),jt()),me!=null&&(W.renderCache[me]=void 0),_e&256){W.ctx.deactivate(L);return}const Se=_e&1&&ge,Ce=!Ha(L);let Te;if(Ce&&(Te=fe&&fe.onVnodeBeforeUnmount)&&qt(Te,W,L),_e&6)re(L.component,G,te);else{if(_e&128){L.suspense.unmount(G,te);return}Se&&_a(L,null,W,"beforeUnmount"),_e&64?L.type.remove(L,W,G,ne,te):se&&!se.hasOnce&&(oe!==le||he>0&&he&64)?be(se,W,G,!1,!0):(oe===le&&he&384||!ee&&_e&16)&&be(ue,W,G),te&&ve(L)}(Ce&&(Te=fe&&fe.onVnodeUnmounted)||Se)&&kt(()=>{Te&&qt(Te,W,L),Se&&_a(L,null,W,"unmounted")},G)},ve=L=>{const{type:W,el:G,anchor:te,transition:ee}=L;if(W===le){H(G,te);return}if(W===hn){_(L);return}const oe=()=>{r(G),ee&&!ee.persisted&&ee.afterLeave&&ee.afterLeave()};if(L.shapeFlag&1&&ee&&!ee.persisted){const{leave:fe,delayLeave:de}=ee,ue=()=>fe(G,oe);de?de(L.el,oe,ue):ue()}else oe()},H=(L,W)=>{let G;for(;L!==W;)G=w(L),r(L),L=G;r(W)},re=(L,W,G)=>{const{bum:te,scope:ee,job:oe,subTree:fe,um:de,m:ue,a:se}=L;Nl(ue),Nl(se),te&&Oo(te),ee.stop(),oe&&(oe.flags|=8,ae(fe,L,W,G)),de&&kt(de,W),kt(()=>{L.isUnmounted=!0},W)},be=(L,W,G,te=!1,ee=!1,oe=0)=>{for(let fe=oe;fe<L.length;fe++)ae(L[fe],W,G,te,ee)},F=L=>{if(L.shapeFlag&6)return F(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const W=w(L.anchor||L.el),G=W&&W[Xs];return G?w(G):W};let z=!1;const U=(L,W,G)=>{L==null?W._vnode&&ae(W._vnode,null,null,!0):f(W._vnode||null,L,W,null,null,null,G),W._vnode=L,z||(z=!0,Gs(),Js(),z=!1)},ne={p:f,um:ae,m:R,r:ve,mt:q,mc:S,pc:J,pbc:h,n:F,o:e};return{render:U,hydrate:void 0,createApp:du(U)}}function gn({type:e,props:t},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:a}function xa({effect:e,job:t},a){a?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function wu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function pn(e,t,a=!1){const o=e.children,r=t.children;if(Ae(o)&&Ae(r))for(let n=0;n<o.length;n++){const s=o[n];let l=r[n];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[n]=fa(r[n]),l.el=s.el),!a&&l.patchFlag!==-2&&pn(s,l)),l.type===tr&&l.patchFlag!==-1&&(l.el=s.el),l.type===bt&&!l.el&&(l.el=s.el)}}function ku(e){const t=e.slice(),a=[0];let o,r,n,s,l;const i=e.length;for(o=0;o<i;o++){const c=e[o];if(c!==0){if(r=a[a.length-1],e[r]<c){t[o]=r,a.push(o);continue}for(n=0,s=a.length-1;n<s;)l=n+s>>1,e[a[l]]<c?n=l+1:s=l;c<e[a[n]]&&(n>0&&(t[o]=a[n-1]),a[n]=o)}}for(n=a.length,s=a[n-1];n-- >0;)a[n]=s,s=t[s];return a}function Bl(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Bl(t)}function Nl(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const _u=Symbol.for("v-scx"),xu=()=>Qo(_u);function Be(e,t,a){return Il(e,t,a)}function Il(e,t,a=Ke){const{immediate:o,deep:r,flush:n,once:s}=a,l=dt({},a),i=t&&o||!t&&n!=="post";let c;if(za){if(n==="sync"){const v=xu();c=v.__watcherHandles||(v.__watcherHandles=[])}else if(!i){const v=()=>{};return v.stop=zt,v.resume=zt,v.pause=zt,v}}const u=pt;l.call=(v,g,f)=>Bt(v,u,g,f);let p=!1;n==="post"?l.scheduler=v=>{kt(v,u&&u.suspense)}:n!=="sync"&&(p=!0,l.scheduler=(v,g)=>{g?v():Xr(v)}),l.augmentJob=v=>{t&&(v.flags|=4),p&&(v.flags|=2,u&&(v.id=u.uid,v.i=u))};const w=Ad(e,t,l);return za&&(c?c.push(w):i&&w()),w}function Cu(e,t,a){const o=this.proxy,r=Ze(e)?e.includes(".")?Pl(o,e):()=>o[e]:e.bind(o,o);let n;Ne(t)?n=t:(n=t.handler,a=t);const s=ho(this),l=Il(r,n.bind(o),a);return s(),l}function Pl(e,t){const a=t.split(".");return()=>{let o=e;for(let r=0;r<a.length&&o;r++)o=o[a[r]];return o}}const Su=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Tt(t)}Modifiers`]||e[`${sa(t)}Modifiers`];function $u(e,t,...a){if(e.isUnmounted)return;const o=e.vnode.props||Ke;let r=a;const n=t.startsWith("update:"),s=n&&Su(o,t.slice(7));s&&(s.trim&&(r=a.map(u=>Ze(u)?u.trim():u)),s.number&&(r=a.map(Bo)));let l,i=o[l=Pr(t)]||o[l=Pr(Tt(t))];!i&&n&&(i=o[l=Pr(sa(t))]),i&&Bt(i,e,6,r);const c=o[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Bt(c,e,6,r)}}function Fl(e,t,a=!1){const o=t.emitsCache,r=o.get(e);if(r!==void 0)return r;const n=e.emits;let s={},l=!1;if(!Ne(e)){const i=c=>{const u=Fl(c,t,!0);u&&(l=!0,dt(s,u))};!a&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return!n&&!l?(qe(e)&&o.set(e,null),null):(Ae(n)?n.forEach(i=>s[i]=null):dt(s,n),qe(e)&&o.set(e,s),s)}function er(e,t){return!e||!Do(t)?!1:(t=t.slice(2).replace(/Once$/,""),je(e,t[0].toLowerCase()+t.slice(1))||je(e,sa(t))||je(e,t))}function VS(){}function Hl(e){const{type:t,vnode:a,proxy:o,withProxy:r,propsOptions:[n],slots:s,attrs:l,emit:i,render:c,renderCache:u,props:p,data:w,setupState:v,ctx:g,inheritAttrs:f}=e,m=qo(e);let D,T;try{if(a.shapeFlag&4){const _=r||o,$=_;D=Kt(c.call($,_,u,p,v,w,g)),T=l}else{const _=t;D=Kt(_.length>1?_(p,{attrs:l,slots:s,emit:i}):_(p,null)),T=t.props?l:Tu(l)}}catch(_){fo.length=0,oo(_,e,1),D=$e(bt)}let M=D;if(T&&f!==!1){const _=Object.keys(T),{shapeFlag:$}=M;_.length&&$&7&&(n&&_.some(Br)&&(T=Mu(T,n)),M=ua(M,T,!1,!0))}return a.dirs&&(M=ua(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(a.dirs):a.dirs),a.transition&&so(M,a.transition),D=M,qo(m),D}const Tu=e=>{let t;for(const a in e)(a==="class"||a==="style"||Do(a))&&((t||(t={}))[a]=e[a]);return t},Mu=(e,t)=>{const a={};for(const o in e)(!Br(o)||!(o.slice(9)in t))&&(a[o]=e[o]);return a};function Du(e,t,a){const{props:o,children:r,component:n}=e,{props:s,children:l,patchFlag:i}=t,c=n.emitsOptions;if(t.dirs||t.transition)return!0;if(a&&i>=0){if(i&1024)return!0;if(i&16)return o?Wl(o,s,c):!!s;if(i&8){const u=t.dynamicProps;for(let p=0;p<u.length;p++){const w=u[p];if(s[w]!==o[w]&&!er(c,w))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:o===s?!1:o?s?Wl(o,s,c):!0:!!s;return!1}function Wl(e,t,a){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const n=o[r];if(t[n]!==e[n]&&!er(a,n))return!0}return!1}function Au({vnode:e,parent:t},a){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=a,t=t.parent;else break}}const zl=e=>e.__isSuspense;function Eu(e,t){t&&t.pendingBranch?Ae(e)?t.effects.push(...e):t.effects.push(e):Pd(e)}const le=Symbol.for("v-fgt"),tr=Symbol.for("v-txt"),bt=Symbol.for("v-cmt"),hn=Symbol.for("v-stc"),fo=[];let $t=null;function y(e=!1){fo.push($t=e?null:[])}function Lu(){fo.pop(),$t=fo[fo.length-1]||null}let go=1;function Rl(e,t=!1){go+=e,e<0&&$t&&t&&($t.hasOnce=!0)}function jl(e){return e.dynamicChildren=go>0?$t||La:null,Lu(),go>0&&$t&&$t.push(e),e}function k(e,t,a,o,r,n){return jl(d(e,t,a,o,r,n,!0))}function Re(e,t,a,o,r){return jl($e(e,t,a,o,r,!0))}function po(e){return e?e.__v_isVNode===!0:!1}function Ca(e,t){return e.type===t.type&&e.key===t.key}const Ul=({key:e})=>e??null,ar=({ref:e,ref_key:t,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?Ze(e)||lt(e)||Ne(e)?{i:gt,r:e,k:t,f:!!a}:e:null);function d(e,t=null,a=null,o=0,r=null,n=e===le?0:1,s=!1,l=!1){const i={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ul(t),ref:t&&ar(t),scopeId:Zs,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:gt};return l?(mn(i,a),n&128&&e.normalize(i)):a&&(i.shapeFlag|=Ze(a)?8:16),go>0&&!s&&$t&&(i.patchFlag>0||n&6)&&i.patchFlag!==32&&$t.push(i),i}const $e=Ou;function Ou(e,t=null,a=null,o=0,r=null,n=!1){if((!e||e===pl)&&(e=bt),po(e)){const l=ua(e,t,!0);return a&&mn(l,a),go>0&&!n&&$t&&(l.shapeFlag&6?$t[$t.indexOf(e)]=l:$t.push(l)),l.patchFlag=-2,l}if(Uu(e)&&(e=e.__vccOpts),t){t=Bu(t);let{class:l,style:i}=t;l&&!Ze(l)&&(t.class=Ee(l)),qe(i)&&(Jr(i)&&!Ae(i)&&(i=dt({},i)),t.style=Le(i))}const s=Ze(e)?1:zl(e)?128:Qs(e)?64:qe(e)?4:Ne(e)?2:0;return d(e,t,a,o,r,s,n,!0)}function Bu(e){return e?Jr(e)||Tl(e)?dt({},e):e:null}function ua(e,t,a=!1,o=!1){const{props:r,ref:n,patchFlag:s,children:l,transition:i}=e,c=t?Vl(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Ul(c),ref:t&&t.ref?a&&n?Ae(n)?n.concat(ar(t)):[n,ar(t)]:ar(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==le?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:i,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ua(e.ssContent),ssFallback:e.ssFallback&&ua(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return i&&o&&so(u,i.clone(u)),u}function De(e=" ",t=0){return $e(tr,null,e,t)}function V(e="",t=!1){return t?(y(),Re(bt,null,e)):$e(bt,null,e)}function Kt(e){return e==null||typeof e=="boolean"?$e(bt):Ae(e)?$e(le,null,e.slice()):po(e)?fa(e):$e(tr,null,String(e))}function fa(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ua(e)}function mn(e,t){let a=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(Ae(t))a=16;else if(typeof t=="object")if(o&65){const r=t.default;r&&(r._c&&(r._d=!1),mn(e,r()),r._c&&(r._d=!0));return}else{a=32;const r=t._;!r&&!Tl(t)?t._ctx=gt:r===3&&gt&&(gt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ne(t)?(t={default:t,_ctx:gt},a=32):(t=String(t),o&64?(a=16,t=[De(t)]):a=8);e.children=t,e.shapeFlag|=a}function Vl(...e){const t={};for(let a=0;a<e.length;a++){const o=e[a];for(const r in o)if(r==="class")t.class!==o.class&&(t.class=Ee([t.class,o.class]));else if(r==="style")t.style=Le([t.style,o.style]);else if(Do(r)){const n=t[r],s=o[r];s&&n!==s&&!(Ae(n)&&n.includes(s))&&(t[r]=n?[].concat(n,s):s)}else r!==""&&(t[r]=o[r])}return t}function qt(e,t,a,o=null){Bt(e,t,7,[a,o])}const Nu=Cl();let Iu=0;function Pu(e,t,a){const o=e.type,r=(t?t.appContext:e.appContext)||Nu,n={uid:Iu++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Qc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Dl(o,r),emitsOptions:Fl(o,r),emit:null,emitted:null,propsDefaults:Ke,inheritAttrs:o.inheritAttrs,ctx:Ke,data:Ke,props:Ke,attrs:Ke,slots:Ke,refs:Ke,setupState:Ke,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=$u.bind(null,n),e.ce&&e.ce(n),n}let pt=null;const or=()=>pt||gt;let rr,vn;{const e=No(),t=(a,o)=>{let r;return(r=e[a])||(r=e[a]=[]),r.push(o),n=>{r.length>1?r.forEach(s=>s(n)):r[0](n)}};rr=t("__VUE_INSTANCE_SETTERS__",a=>pt=a),vn=t("__VUE_SSR_SETTERS__",a=>za=a)}const ho=e=>{const t=pt;return rr(e),e.scope.on(),()=>{e.scope.off(),rr(t)}},Kl=()=>{pt&&pt.scope.off(),rr(null)};function ql(e){return e.vnode.shapeFlag&4}let za=!1;function Fu(e,t=!1,a=!1){t&&vn(t);const{props:o,children:r}=e.vnode,n=ql(e);fu(e,o,n,t),mu(e,r,a||t);const s=n?Hu(e,t):void 0;return t&&vn(!1),s}function Hu(e,t){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ou);const{setup:o}=a;if(o){Rt();const r=e.setupContext=o.length>1?zu(e):null,n=ho(e),s=Ia(o,e,0,[e.props,r]),l=vs(s);if(jt(),n(),(l||e.sp)&&!Ha(e)&&an(e),l){if(s.then(Kl,Kl),t)return s.then(i=>{Gl(e,i)}).catch(i=>{oo(i,e,0)});e.asyncDep=s}else Gl(e,s)}else Jl(e)}function Gl(e,t,a){Ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:qe(t)&&(e.setupState=Us(t)),Jl(e)}function Jl(e,t,a){const o=e.type;e.render||(e.render=o.render||zt);{const r=ho(e);Rt();try{ru(e)}finally{jt(),r()}}}const Wu={get(e,t){return vt(e,"get",""),e[t]}};function zu(e){const t=a=>{e.exposed=a||{}};return{attrs:new Proxy(e.attrs,Wu),slots:e.slots,emit:e.emit,expose:t}}function nr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Us(kd(e.exposed)),{get(t,a){if(a in t)return t[a];if(a in co)return co[a](e)},has(t,a){return a in t||a in co}})):e.proxy}const Ru=/(?:^|[-_])(\w)/g,ju=e=>e.replace(Ru,t=>t.toUpperCase()).replace(/[-_]/g,"");function Yl(e,t=!0){return Ne(e)?e.displayName||e.name:e.name||t&&e.__name}function Zl(e,t,a=!1){let o=Yl(t);if(!o&&t.__file){const r=t.__file.match(/([^/\\]+)\.\w+$/);r&&(o=r[1])}if(!o&&e&&e.parent){const r=n=>{for(const s in n)if(n[s]===t)return s};o=r(e.components||e.parent.type.components)||r(e.appContext.components)}return o?ju(o):a?"App":"Anonymous"}function Uu(e){return Ne(e)&&"__vccOpts"in e}const B=(e,t)=>Md(e,t,za);function xt(e,t,a){const o=arguments.length;return o===2?qe(t)&&!Ae(t)?po(t)?$e(e,null,[t]):$e(e,t):$e(e,null,t):(o>3?a=Array.prototype.slice.call(arguments,2):o===3&&po(a)&&(a=[a]),$e(e,t,a))}const Vu="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let bn;const Xl=typeof window<"u"&&window.trustedTypes;if(Xl)try{bn=Xl.createPolicy("vue",{createHTML:e=>e})}catch{}const Ql=bn?e=>bn.createHTML(e):e=>e,Ku="http://www.w3.org/2000/svg",qu="http://www.w3.org/1998/Math/MathML",aa=typeof document<"u"?document:null,ei=aa&&aa.createElement("template"),Gu={insert:(e,t,a)=>{t.insertBefore(e,a||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,a,o)=>{const r=t==="svg"?aa.createElementNS(Ku,e):t==="mathml"?aa.createElementNS(qu,e):a?aa.createElement(e,{is:a}):aa.createElement(e);return e==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:e=>aa.createTextNode(e),createComment:e=>aa.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>aa.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,a,o,r,n){const s=a?a.previousSibling:t.lastChild;if(r&&(r===n||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),a),!(r===n||!(r=r.nextSibling)););else{ei.innerHTML=Ql(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const l=ei.content;if(o==="svg"||o==="mathml"){const i=l.firstChild;for(;i.firstChild;)l.appendChild(i.firstChild);l.removeChild(i)}t.insertBefore(l,a)}return[s?s.nextSibling:t.firstChild,a?a.previousSibling:t.lastChild]}},ga="transition",mo="animation",vo=Symbol("_vtc"),ti={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ju=dt({},nl,ti),Yu=(e=>(e.displayName="Transition",e.props=Ju,e))((e,{slots:t})=>xt(Rd,Zu(e),t)),Sa=(e,t=[])=>{Ae(e)?e.forEach(a=>a(...t)):e&&e(...t)},ai=e=>e?Ae(e)?e.some(t=>t.length>1):e.length>1:!1;function Zu(e){const t={};for(const E in e)E in ti||(t[E]=e[E]);if(e.css===!1)return t;const{name:a="v",type:o,duration:r,enterFromClass:n=`${a}-enter-from`,enterActiveClass:s=`${a}-enter-active`,enterToClass:l=`${a}-enter-to`,appearFromClass:i=n,appearActiveClass:c=s,appearToClass:u=l,leaveFromClass:p=`${a}-leave-from`,leaveActiveClass:w=`${a}-leave-active`,leaveToClass:v=`${a}-leave-to`}=e,g=Xu(r),f=g&&g[0],m=g&&g[1],{onBeforeEnter:D,onEnter:T,onEnterCancelled:M,onLeave:_,onLeaveCancelled:$,onBeforeAppear:I=D,onAppear:C=T,onAppearCancelled:S=M}=t,b=(E,P,q,O)=>{E._enterCancelled=O,$a(E,P?u:l),$a(E,P?c:s),q&&q()},h=(E,P)=>{E._isLeaving=!1,$a(E,p),$a(E,v),$a(E,w),P&&P()},x=E=>(P,q)=>{const O=E?C:T,j=()=>b(P,E,q);Sa(O,[P,j]),oi(()=>{$a(P,E?i:n),oa(P,E?u:l),ai(O)||ri(P,o,f,j)})};return dt(t,{onBeforeEnter(E){Sa(D,[E]),oa(E,n),oa(E,s)},onBeforeAppear(E){Sa(I,[E]),oa(E,i),oa(E,c)},onEnter:x(!1),onAppear:x(!0),onLeave(E,P){E._isLeaving=!0;const q=()=>h(E,P);oa(E,p),E._enterCancelled?(oa(E,w),li()):(li(),oa(E,w)),oi(()=>{E._isLeaving&&($a(E,p),oa(E,v),ai(_)||ri(E,o,m,q))}),Sa(_,[E,q])},onEnterCancelled(E){b(E,!1,void 0,!0),Sa(M,[E])},onAppearCancelled(E){b(E,!0,void 0,!0),Sa(S,[E])},onLeaveCancelled(E){h(E),Sa($,[E])}})}function Xu(e){if(e==null)return null;if(qe(e))return[yn(e.enter),yn(e.leave)];{const t=yn(e);return[t,t]}}function yn(e){return Vc(e)}function oa(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.add(a)),(e[vo]||(e[vo]=new Set)).add(t)}function $a(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const a=e[vo];a&&(a.delete(t),a.size||(e[vo]=void 0))}function oi(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Qu=0;function ri(e,t,a,o){const r=e._endId=++Qu,n=()=>{r===e._endId&&o()};if(a!=null)return setTimeout(n,a);const{type:s,timeout:l,propCount:i}=ef(e,t);if(!s)return o();const c=s+"end";let u=0;const p=()=>{e.removeEventListener(c,w),n()},w=v=>{v.target===e&&++u>=i&&p()};setTimeout(()=>{u<i&&p()},l+1),e.addEventListener(c,w)}function ef(e,t){const a=window.getComputedStyle(e),o=g=>(a[g]||"").split(", "),r=o(`${ga}Delay`),n=o(`${ga}Duration`),s=ni(r,n),l=o(`${mo}Delay`),i=o(`${mo}Duration`),c=ni(l,i);let u=null,p=0,w=0;t===ga?s>0&&(u=ga,p=s,w=n.length):t===mo?c>0&&(u=mo,p=c,w=i.length):(p=Math.max(s,c),u=p>0?s>c?ga:mo:null,w=u?u===ga?n.length:i.length:0);const v=u===ga&&/\b(transform|all)(,|$)/.test(o(`${ga}Property`).toString());return{type:u,timeout:p,propCount:w,hasTransform:v}}function ni(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((a,o)=>si(a)+si(e[o])))}function si(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function li(){return document.body.offsetHeight}function tf(e,t,a){const o=e[vo];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):a?e.setAttribute("class",t):e.className=t}const sr=Symbol("_vod"),ii=Symbol("_vsh"),lr={name:"show",beforeMount(e,{value:t},{transition:a}){e[sr]=e.style.display==="none"?"":e.style.display,a&&t?a.beforeEnter(e):bo(e,t)},mounted(e,{value:t},{transition:a}){a&&t&&a.enter(e)},updated(e,{value:t,oldValue:a},{transition:o}){!t!=!a&&(o?t?(o.beforeEnter(e),bo(e,!0),o.enter(e)):o.leave(e,()=>{bo(e,!1)}):bo(e,t))},beforeUnmount(e,{value:t}){bo(e,t)}};function bo(e,t){e.style.display=t?e[sr]:"none",e[ii]=!t}const af=Symbol(""),of=/(^|;)\s*display\s*:/;function rf(e,t,a){const o=e.style,r=Ze(a);let n=!1;if(a&&!r){if(t)if(Ze(t))for(const s of t.split(";")){const l=s.slice(0,s.indexOf(":")).trim();a[l]==null&&ir(o,l,"")}else for(const s in t)a[s]==null&&ir(o,s,"");for(const s in a)s==="display"&&(n=!0),ir(o,s,a[s])}else if(r){if(t!==a){const s=o[af];s&&(a+=";"+s),o.cssText=a,n=of.test(a)}}else t&&e.removeAttribute("style");sr in e&&(e[sr]=n?o.display:"",e[ii]&&(o.display="none"))}const ci=/\s*!important$/;function ir(e,t,a){if(Ae(a))a.forEach(o=>ir(e,t,o));else if(a==null&&(a=""),t.startsWith("--"))e.setProperty(t,a);else{const o=nf(e,t);ci.test(a)?e.setProperty(sa(o),a.replace(ci,""),"important"):e[o]=a}}const di=["Webkit","Moz","ms"],wn={};function nf(e,t){const a=wn[t];if(a)return a;let o=Tt(t);if(o!=="filter"&&o in e)return wn[t]=o;o=Lo(o);for(let r=0;r<di.length;r++){const n=di[r]+o;if(n in e)return wn[t]=n}return t}const ui="http://www.w3.org/1999/xlink";function fi(e,t,a,o,r,n=Yc(t)){o&&t.startsWith("xlink:")?a==null?e.removeAttributeNS(ui,t.slice(6,t.length)):e.setAttributeNS(ui,t,a):a==null||n&&!_s(a)?e.removeAttribute(t):e.setAttribute(t,n?"":Lt(a)?String(a):a)}function gi(e,t,a,o,r){if(t==="innerHTML"||t==="textContent"){a!=null&&(e[t]=t==="innerHTML"?Ql(a):a);return}const n=e.tagName;if(t==="value"&&n!=="PROGRESS"&&!n.includes("-")){const l=n==="OPTION"?e.getAttribute("value")||"":e.value,i=a==null?e.type==="checkbox"?"on":"":String(a);(l!==i||!("_value"in e))&&(e.value=i),a==null&&e.removeAttribute(t),e._value=a;return}let s=!1;if(a===""||a==null){const l=typeof e[t];l==="boolean"?a=_s(a):a==null&&l==="string"?(a="",s=!0):l==="number"&&(a=0,s=!0)}try{e[t]=a}catch{}s&&e.removeAttribute(r||t)}function Ta(e,t,a,o){e.addEventListener(t,a,o)}function sf(e,t,a,o){e.removeEventListener(t,a,o)}const pi=Symbol("_vei");function lf(e,t,a,o,r=null){const n=e[pi]||(e[pi]={}),s=n[t];if(o&&s)s.value=o;else{const[l,i]=cf(t);if(o){const c=n[t]=ff(o,r);Ta(e,l,c,i)}else s&&(sf(e,l,s,i),n[t]=void 0)}}const hi=/(?:Once|Passive|Capture)$/;function cf(e){let t;if(hi.test(e)){t={};let o;for(;o=e.match(hi);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):sa(e.slice(2)),t]}let kn=0;const df=Promise.resolve(),uf=()=>kn||(df.then(()=>kn=0),kn=Date.now());function ff(e,t){const a=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=a.attached)return;Bt(gf(o,a.value),t,5,[o])};return a.value=e,a.attached=uf(),a}function gf(e,t){if(Ae(t)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},t.map(o=>r=>!r._stopped&&o&&o(r))}else return t}const mi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,pf=(e,t,a,o,r,n)=>{const s=r==="svg";t==="class"?tf(e,o,s):t==="style"?rf(e,a,o):Do(t)?Br(t)||lf(e,t,a,o,n):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):hf(e,t,o,s))?(gi(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&fi(e,t,o,s,n,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ze(o))?gi(e,Tt(t),o,n,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),fi(e,t,o,s))};function hf(e,t,a,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&mi(t)&&Ne(a));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return mi(t)&&Ze(a)?!1:t in e}const cr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ae(t)?a=>Oo(t,a):t};function mf(e){e.target.composing=!0}function vi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ra=Symbol("_assign"),vf={created(e,{modifiers:{lazy:t,trim:a,number:o}},r){e[Ra]=cr(r);const n=o||r.props&&r.props.type==="number";Ta(e,t?"change":"input",s=>{if(s.target.composing)return;let l=e.value;a&&(l=l.trim()),n&&(l=Bo(l)),e[Ra](l)}),a&&Ta(e,"change",()=>{e.value=e.value.trim()}),t||(Ta(e,"compositionstart",mf),Ta(e,"compositionend",vi),Ta(e,"change",vi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:a,modifiers:{lazy:o,trim:r,number:n}},s){if(e[Ra]=cr(s),e.composing)return;const l=(n||e.type==="number")&&!/^0\d/.test(e.value)?Bo(e.value):e.value,i=t??"";l!==i&&(document.activeElement===e&&e.type!=="range"&&(o&&t===a||r&&e.value.trim()===i)||(e.value=i))}},_n={deep:!0,created(e,{value:t,modifiers:{number:a}},o){const r=Ao(t);Ta(e,"change",()=>{const n=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>a?Bo(dr(s)):dr(s));e[Ra](e.multiple?r?new Set(n):n:n[0]),e._assigning=!0,Qt(()=>{e._assigning=!1})}),e[Ra]=cr(o)},mounted(e,{value:t}){bi(e,t)},beforeUpdate(e,t,a){e[Ra]=cr(a)},updated(e,{value:t}){e._assigning||bi(e,t)}};function bi(e,t){const a=e.multiple,o=Ae(t);if(!(a&&!o&&!Ao(t))){for(let r=0,n=e.options.length;r<n;r++){const s=e.options[r],l=dr(s);if(a)if(o){const i=typeof l;i==="string"||i==="number"?s.selected=t.some(c=>String(c)===String(l)):s.selected=Xc(t,l)>-1}else s.selected=t.has(l);else if(Io(dr(s),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!a&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function dr(e){return"_value"in e?e._value:e.value}const bf=["ctrl","shift","alt","meta"],yf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>bf.some(a=>e[`${a}Key`]&&!t.includes(a))},Qe=(e,t)=>{const a=e._withMods||(e._withMods={}),o=t.join(".");return a[o]||(a[o]=(r,...n)=>{for(let s=0;s<t.length;s++){const l=yf[t[s]];if(l&&l(r,t))return}return e(r,...n)})},wf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ja=(e,t)=>{const a=e._withKeys||(e._withKeys={}),o=t.join(".");return a[o]||(a[o]=r=>{if(!("key"in r))return;const n=sa(r.key);if(t.some(s=>s===n||wf[s]===n))return e(r)})},kf=dt({patchProp:pf},Gu);let yi;function _f(){return yi||(yi=bu(kf))}const xf=(...e)=>{const t=_f().createApp(...e),{mount:a}=t;return t.mount=o=>{const r=Sf(o);if(!r)return;const n=t._component;!Ne(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const s=a(r,!1,Cf(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t};function Cf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Sf(e){return Ze(e)?document.querySelector(e):e}const $f=Me({name:"NcAppContent",props:{appName:{type:String,default:""},showNavigation:{type:Boolean,default:!0}},setup(e,{slots:t,attrs:a}){return()=>{const o=e.showNavigation!==!1,r={...a,class:[a.class,"app-content",o?null:"app-content--navigation-hidden"]},n={class:"app-content__navigation","aria-label":e.appName||"App navigation","aria-hidden":o?"false":"true"};return xt("div",r,[xt("aside",n,t.navigation?t.navigation():[]),xt("section",{class:"app-content__main",role:"main"},t.default?t.default():[])])}}}),Tf=Me({name:"NcAppNavigation",setup(e,{slots:t,attrs:a}){return()=>{const o={...a,class:[a.class,"app-navigation"]};"role"in o||(o.role="navigation");const r=[];return t.actions&&r.push(xt("div",{class:"app-navigation__actions"},t.actions())),t.default&&r.push(...t.default()),xt("nav",o,r)}}}),rt=Me({name:"NcButton",props:{type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t,slots:a,attrs:o}){return()=>{const r={...o,class:[o.class,"btn",e.type],disabled:e.disabled,onClick:()=>t("click")};return"type"in r||(r.type="button"),xt("button",r,a.default?a.default():[])}}}),ur=Me({name:"NcEmptyContent",props:{name:{type:String,default:""},description:{type:String,default:""}},setup(e,{attrs:t}){return()=>xt("div",{...t,class:[t.class,"card empty"]},[xt("div",{class:"value"},e.name),xt("div",{class:"hint"},e.description)])}}),wi=Me({name:"NcCheckboxRadioSwitch",props:{type:{type:String,default:"checkbox"},name:{type:String,default:""},checked:{type:Boolean,default:!1}},emits:["update:checked"],setup(e,{emit:t,slots:a,attrs:o}){const r=s=>{var l;return t("update:checked",!!((l=s==null?void 0:s.target)!=null&&l.checked))},n={...o,class:[o.class,"nc-checkbox-radio-switch"]};return()=>xt("label",n,[xt("input",{type:e.type,name:e.name,checked:e.checked,onInput:r}),xt("span",{},a.default?a.default():[])])}}),fr=Me({name:"NcLoadingIcon",props:{size:{type:[String,Number],default:16}},setup(e,{attrs:t}){return()=>xt("span",{...t,class:[t.class,"nc-loading-icon"],style:`width:${e.size}px;height:${e.size}px;border:2px solid var(--line);border-top-color:var(--brand);border-radius:50%;display:inline-block;animation:spin 1s linear infinite`})}}),Mf={class:"group-row"},Df={colspan:"5"},Af={class:"group-header"},Ef={class:"group-label"},Lf={class:"name"},Of={key:0,class:"group-meta"},Bf={class:"summary"},Nf={key:0,class:"summary-percent"},If={key:1,class:"group-meta"},Pf={class:"summary"},Ff={key:0},Hf=["title"],Wf={class:"row-name"},zf={key:0,class:"progress"},Rf={class:"progress-chip"},jf={class:"num"},Uf={class:"num"},Vf={class:"num"},Kf={class:"num"},qf={key:0,class:"hint"},Gf={key:0,class:"empty-row"},Jf=Me({__name:"ByCalendarTable",props:{rows:{},n2:{type:Function},targets:{},groups:{},todayHours:{}},setup(e){const t=e,a=B(()=>Array.isArray(t.groups)&&t.groups.length?t.groups.map(_=>({id:_.id,label:_.label,summary:_.summary??null,color:_.color,rows:(_.rows||[]).map(o)})):[{id:"__all__",label:"Calendars",summary:null,color:void 0,rows:(t.rows||[]).map(o)}]);function o(_){const $=r(_);return{..._,calendarId:$}}function r(_){return _?_.calendarId?String(_.calendarId):_.id?String(_.id):_.calendar_id?String(_.calendar_id):_.calendar?String(_.calendar):"":""}function n(_){return String(_.calendar||_.displayname||_.name||_.calendarId||"")}function s(_){return r(_)||n(_)}function l(_){const $=m(_);if(!$)return!1;const I=t.targets||{},C=Number(I[$]);return isFinite(C)&&C>0}function i(_){const $=m(_);if(!$)return 0;const I=t.targets||{},C=Number(I[$]);return isFinite(C)?C:0}function c(_){const $=i(_);return $>0?(Math.round($*100)/100).toFixed(2):""}function u(_,$){return _-$>=0?"delta pos":"delta neg"}function p(_,$){const I=_-$,C=Math.abs(Math.round(I*100)/100).toFixed(2);return(I>=0?"+":"-")+C+"h"}function w(_,$){return Math.max(0,Math.min(100,$>0?_/$*100:0)).toFixed(0)+"%"}function v(_,$){return Math.max(0,Math.min(100,$>0?_/$*100:0))}function g(_){const $=m(_);if(!$)return 0;const I=t.todayHours||{},C=Number(I[$]??0);return Number.isFinite(C)?Math.max(0,C):0}function f(_){const $=i(r(_)),I=g(r(_));if($<=0||I<=1e-4)return null;const C=Math.max(2,Math.min(120,I/$*100)),S=v(_.total_hours,$),b=Math.max(0,S-C);return{pct:C,left:b,text:I.toFixed(2)+"h"}}function m(_){return _==null?"":String(_)}function D(_){const $=_.summary;if(!$)return`${_.rows.length} calendar${_.rows.length===1?"":"s"}`;const I=t.n2($.actualHours);return $.targetHours>0?`${I} h / ${t.n2($.targetHours)} h`:`${I} h`}function T(_){const $=_.summary;return!$||$.targetHours<=0?"":`${Math.round($.percent)}%`}function M(_){switch(_){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}return(_,$)=>(y(),k("table",null,[$[1]||($[1]=d("colgroup",null,[d("col",{class:"col-w-42"}),d("col",{class:"col-w-12"}),d("col",{class:"col-w-14"}),d("col",{class:"col-w-14"}),d("col",{class:"col-w-18"})],-1)),$[2]||($[2]=d("thead",null,[d("tr",null,[d("th",{class:"nowrap"},"Calendar"),d("th",{class:"num"},"Events"),d("th",{class:"num"},"Hours"),d("th",{class:"num"},"Target"),d("th",{class:"num"}," / %")])],-1)),d("tbody",null,[(y(!0),k(le,null,we(a.value,I=>(y(),k(le,{key:I.id},[d("tr",Mf,[d("td",Df,[d("div",Af,[d("div",Ef,[d("span",{class:"dot",style:Le({background:I.color||"var(--brand)"})},null,4),d("span",Lf,N(I.label),1)]),I.summary?(y(),k("div",Of,[d("span",Bf,N(D(I)),1),T(I)?(y(),k("span",Nf,N(T(I)),1)):V("",!0),I.summary.statusLabel?(y(),k("span",{key:1,class:Ee(["badge",M(I.summary.status)])},N(I.summary.statusLabel),3)):V("",!0)])):(y(),k("div",If,[d("span",Pf,[De(N(I.rows.length)+" calendar",1),I.rows.length!==1?(y(),k("span",Ff,"s")):V("",!0)])]))])])]),(y(!0),k(le,null,we(I.rows,C=>(y(),k("tr",{key:s(C)},[d("td",null,[d("div",{class:"cell",title:n(C)},[d("div",Wf,N(n(C)),1),l(r(C))&&i(r(C))>0?(y(),k("div",zf,[d("div",{class:"progress-bar",style:Le({width:v(C.total_hours,i(r(C)))+"%",background:I.color||void 0})},null,4),f(C)?(y(),k("div",{key:0,class:"progress-today",style:Le({left:f(C).left+"%",width:f(C).pct+"%",background:I.color||"var(--brand)"})},[d("span",Rf,N(f(C).text),1)],4)):V("",!0)])):V("",!0)],8,Hf)]),d("td",jf,N(C.events_count),1),d("td",Uf,N(_.n2(C.total_hours)),1),d("td",Vf,N(c(r(C))),1),d("td",Kf,[l(r(C))?(y(),k(le,{key:0},[d("span",{class:Ee(u(C.total_hours,i(r(C))))},N(p(C.total_hours,i(r(C)))),3),i(r(C))>0?(y(),k("span",qf," ("+N(w(C.total_hours,i(r(C))))+")",1)):V("",!0)],64)):(y(),k(le,{key:1},[De("")],64))])]))),128)),I.rows.length?V("",!0):(y(),k("tr",Gf,[...$[0]||($[0]=[d("td",{colspan:"5",class:"empty"},"No calendars assigned",-1)])]))],64))),128))])]))}}),ze=(e,t)=>{const a=e.__vccOpts||e;for(const[o,r]of t)a[o]=r;return a},ki=ze(Jf,[["__scopeId","data-v-2efa83d5"]]),Yf={class:"mono nowrap"},Zf=["href"],Xf={class:"hint"},Qf={class:"num"},eg={class:"num"},tg=Me({__name:"ByDayTable",props:{rows:{},n2:{type:Function},link:{type:Function}},setup(e){function t(a){const o=/^(\d{4})-(\d{2})-(\d{2})$/.exec(String(a)||"");if(!o)return"";const r=new Date(`${o[1]}-${o[2]}-${o[3]}T00:00:00Z`);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][r.getUTCDay()]||""}return(a,o)=>(y(),k("table",null,[o[0]||(o[0]=d("colgroup",null,[d("col",{class:"col-w-40"}),d("col",{class:"col-w-30"}),d("col",{class:"col-w-30"})],-1)),o[1]||(o[1]=d("thead",null,[d("tr",null,[d("th",{class:"nowrap"},"Date"),d("th",{class:"num"},"Events"),d("th",{class:"num"},"Hours")])],-1)),d("tbody",null,[(y(!0),k(le,null,we(a.rows,r=>(y(),k("tr",{key:r.date},[d("td",Yf,[d("a",{href:a.link(r.date),target:"_blank"},N(r.date),9,Zf),d("span",Xf," ("+N(t(r.date))+")",1)]),d("td",Qf,N(r.events_count),1),d("td",eg,N(a.n2(r.total_hours)),1)]))),128))])]))}}),ag=["onClick"],og=["title"],rg={class:"num"},ng={class:"mono nowrap"},sg={class:"mono nowrap"},lg={key:0},ig={colspan:"5",class:"mono cell-details"},cg={key:0},dg={key:1,class:"hint"},ug=Me({__name:"TopEventsTable",props:{rows:{},n2:{type:Function},detailsIndex:{}},emits:["toggle"],setup(e){return(t,a)=>(y(),k("table",null,[a[1]||(a[1]=d("colgroup",null,[d("col",{class:"col-w-22"}),d("col"),d("col",{class:"col-w-12"}),d("col",{class:"col-w-18"}),d("col",{class:"col-w-16"})],-1)),a[2]||(a[2]=d("thead",null,[d("tr",null,[d("th",null,"Calendar"),d("th",null,"Summary"),d("th",{class:"num"},"Hours"),d("th",{class:"nowrap"},"Start date"),d("th",{class:"nowrap"},"Start time")])],-1)),d("tbody",null,[(y(!0),k(le,null,we(t.rows,(o,r)=>{var n;return y(),k(le,{key:r},[d("tr",{onClick:s=>t.$emit("toggle",r),class:"cursor-pointer"},[d("td",null,N(o.calendar),1),d("td",null,[d("span",{class:"cell",title:o.summary},N(o.summary),9,og)]),d("td",rg,N(t.n2(o.duration_h)),1),d("td",ng,N((o.start||"").split(" ")[0]),1),d("td",sg,N((n=(o.start||"").split(" ")[1])==null?void 0:n.slice(0,5)),1)],8,ag),t.detailsIndex===r?(y(),k("tr",lg,[d("td",ig,[a[0]||(a[0]=d("div",null,[d("strong",null,"Details")],-1)),o.desc?(y(),k("div",cg,N(o.desc),1)):(y(),k("div",dg,"No description"))])])):V("",!0)],64)}),128))])]))}}),xn=24*60*60*1e3;function It(e,t,a){const o=Number(e);return Number.isFinite(o)?Math.min(a,Math.max(t,Math.round(o*100)/100)):t}function fg(e,t,a){const o=Number(e);if(!Number.isFinite(o))return t;const r=Math.round(o);return r<t?t:r>a?a:r}function Ct(e){return Number.isFinite(e)?Number(e.toFixed(2)):0}function Cn(e){return Number.isFinite(e)?Math.max(0,Math.min(999,Number(e.toFixed(2)))):0}function Sn(e){if(!Number.isFinite(e))return"0";const t=Ct(Math.max(0,e));return Math.abs(t-Math.round(t))<.05?Math.round(t).toString():t.toFixed(1)}function gg(e){const t=Number(e);if(!Number.isFinite(t))return 0;const a=Math.min(1e4,Math.max(0,t));return Number(a.toFixed(2))}function yo(e){return gg(Number(e)*4)}function gr(){return{showWeekendShare:!0,showEveningShare:!0,showEarliestLatest:!0,showOverlaps:!0,showLongestSession:!0,showLastDayOff:!0,showDayOffTrend:!0,showHint:!0,forecastMode:"total"}}function Ua(){return{categories:["work","hobby","sport"],useCategoryMapping:!0,index:{method:"simple_range",basis:"category"},thresholds:{noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6},relations:{displayMode:"ratio"},trend:{lookbackWeeks:4},dayparts:{enabled:!1},ui:{showNotes:!1}}}function Gt(){return{totalHours:48,categories:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",color:"#2563EB",groupIds:[1]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#F97316",groupIds:[2]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#10B981",groupIds:[3]}],pace:{includeWeekendTotal:!0,mode:"days_only",thresholds:{onTrack:-2,atRisk:-10}},forecast:{methodPrimary:"linear",momentumLastNDays:2,padding:1.5},ui:{showTotalDelta:!0,showNeedPerDay:!0,showCategoryBlocks:!0,badges:!0,includeWeekendToggle:!0,showCalendarCharts:!0,showCategoryCharts:!0},allDayHours:8,timeSummary:{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},activityCard:gr(),balance:Ua(),includeZeroDaysInStats:!1}}function Jt(e){return JSON.parse(JSON.stringify(ht(e)))}function ht(e){var s,l,i,c,u,p,w,v,g,f,m,D,T,M,_,$,I,C,S,b,h,x,E,P,q;if(typeof e=="string")try{const O=JSON.parse(e);return ht(O)}catch{return ht(void 0)}const t=Gt(),a=JSON.parse(JSON.stringify(e??{}));if(typeof a!="object"||a===null||Array.isArray(a))return t;Array.isArray(a.categories)||(a.categories=[]);const o=a.categories.map(O=>{const j=(O!=null&&O.id&&typeof O.id=="string"?O.id:"")||bg(String((O==null?void 0:O.label)??"cat")),K=typeof(O==null?void 0:O.label)=="string"&&O.label.trim()!==""?O.label.trim():vg(j),J=It(O==null?void 0:O.targetHours,0,1e4),pe=!!(O!=null&&O.includeWeekend),Y=(O==null?void 0:O.paceMode)==="time_aware"?"time_aware":"days_only",R=mg(O==null?void 0:O.color),ae=Array.isArray(O==null?void 0:O.groupIds)?O.groupIds.map(ve=>Number(ve)).filter(ve=>Number.isFinite(ve)&&ve>=0&&ve<=9):[];return{id:j,label:K,targetHours:J,includeWeekend:pe,paceMode:Y,color:R,groupIds:ae}}),r=o.length?o:t.categories;return{totalHours:It(a.totalHours,0,1e4),categories:r,pace:{includeWeekendTotal:!!(((s=a.pace)==null?void 0:s.includeWeekendTotal)??t.pace.includeWeekendTotal),mode:((l=a.pace)==null?void 0:l.mode)==="time_aware"?"time_aware":t.pace.mode,thresholds:{onTrack:It(((c=(i=a.pace)==null?void 0:i.thresholds)==null?void 0:c.onTrack)??t.pace.thresholds.onTrack,-100,100),atRisk:It(((p=(u=a.pace)==null?void 0:u.thresholds)==null?void 0:p.atRisk)??t.pace.thresholds.atRisk,-100,100)}},forecast:{methodPrimary:((w=a.forecast)==null?void 0:w.methodPrimary)==="momentum"?"momentum":"linear",momentumLastNDays:(()=>{var j;const O=Math.round(((j=a.forecast)==null?void 0:j.momentumLastNDays)??t.forecast.momentumLastNDays);return Math.min(14,Math.max(1,Number.isFinite(O)?O:t.forecast.momentumLastNDays))})(),padding:It(((v=a.forecast)==null?void 0:v.padding)??t.forecast.padding,0,100)},ui:{showTotalDelta:!!(((g=a.ui)==null?void 0:g.showTotalDelta)??t.ui.showTotalDelta),showNeedPerDay:!!(((f=a.ui)==null?void 0:f.showNeedPerDay)??t.ui.showNeedPerDay),showCategoryBlocks:!!(((m=a.ui)==null?void 0:m.showCategoryBlocks)??t.ui.showCategoryBlocks),badges:!!(((D=a.ui)==null?void 0:D.badges)??t.ui.badges),includeWeekendToggle:!!(((T=a.ui)==null?void 0:T.includeWeekendToggle)??t.ui.includeWeekendToggle),showCalendarCharts:((M=a.ui)==null?void 0:M.showCalendarCharts)===void 0?t.ui.showCalendarCharts:!!a.ui.showCalendarCharts,showCategoryCharts:((_=a.ui)==null?void 0:_.showCategoryCharts)===void 0?t.ui.showCategoryCharts:!!a.ui.showCategoryCharts},allDayHours:It(a.allDayHours??t.allDayHours,0,24),timeSummary:{showTotal:(($=a.timeSummary)==null?void 0:$.showTotal)===void 0?t.timeSummary.showTotal:!!a.timeSummary.showTotal,showAverage:((I=a.timeSummary)==null?void 0:I.showAverage)===void 0?t.timeSummary.showAverage:!!a.timeSummary.showAverage,showMedian:((C=a.timeSummary)==null?void 0:C.showMedian)===void 0?t.timeSummary.showMedian:!!a.timeSummary.showMedian,showBusiest:((S=a.timeSummary)==null?void 0:S.showBusiest)===void 0?t.timeSummary.showBusiest:!!a.timeSummary.showBusiest,showWorkday:((b=a.timeSummary)==null?void 0:b.showWorkday)===void 0?t.timeSummary.showWorkday:!!a.timeSummary.showWorkday,showWeekend:((h=a.timeSummary)==null?void 0:h.showWeekend)===void 0?t.timeSummary.showWeekend:!!a.timeSummary.showWeekend,showWeekendShare:((x=a.timeSummary)==null?void 0:x.showWeekendShare)===void 0?t.timeSummary.showWeekendShare:!!a.timeSummary.showWeekendShare,showCalendarSummary:((E=a.timeSummary)==null?void 0:E.showCalendarSummary)===void 0?t.timeSummary.showCalendarSummary:!!a.timeSummary.showCalendarSummary,showTopCategory:((P=a.timeSummary)==null?void 0:P.showTopCategory)===void 0?t.timeSummary.showTopCategory:!!a.timeSummary.showTopCategory,showBalance:((q=a.timeSummary)==null?void 0:q.showBalance)===void 0?t.timeSummary.showBalance:!!a.timeSummary.showBalance},activityCard:pg(a.activityCard,t.activityCard),balance:hg(a.balance,r,t.balance),includeZeroDaysInStats:!!(a.includeZeroDaysInStats??t.includeZeroDaysInStats)}}function pg(e,t){const a={...t};if(!e||typeof e!="object")return a;["showWeekendShare","showEveningShare","showEarliestLatest","showOverlaps","showLongestSession","showLastDayOff","showDayOffTrend","showHint"].forEach(n=>{Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=!!e[n])});const r=e==null?void 0:e.forecastMode;if(typeof r=="string"){const n=r.toLowerCase();(n==="off"||n==="total"||n==="calendar"||n==="category")&&(a.forecastMode=n)}return a}function hg(e,t,a){var u,p,w;const o=t.map(v=>v.id),r=new Set([...o,"__uncategorized__"]),n=Array.isArray(e==null?void 0:e.categories)?e.categories:a.categories,s=[];for(const v of n){const g=typeof v=="string"?v.trim():String(v??"").trim();g&&(r.size&&!r.has(g)||s.includes(g)||s.push(g))}s.length||(o.length?s.push(...o.slice(0,a.categories.length)):s.push(...a.categories));const l=(e==null?void 0:e.thresholds)??{},i=(e==null?void 0:e.ui)??{},c=(e==null?void 0:e.index)??{};return{categories:s,useCategoryMapping:!!((e==null?void 0:e.useCategoryMapping)??a.useCategoryMapping),index:{method:(c==null?void 0:c.method)==="shannon_evenness"?"shannon_evenness":a.index.method,basis:(c==null?void 0:c.basis)==="calendar"||(c==null?void 0:c.basis)==="both"||(c==null?void 0:c.basis)==="off"?c.basis:a.index.basis},thresholds:{noticeAbove:It(l.noticeAbove??a.thresholds.noticeAbove,0,1),noticeBelow:It(l.noticeBelow??a.thresholds.noticeBelow,0,1),warnAbove:It(l.warnAbove??a.thresholds.warnAbove,0,1),warnBelow:It(l.warnBelow??a.thresholds.warnBelow,0,1),warnIndex:It(l.warnIndex??a.thresholds.warnIndex,0,1)},relations:{displayMode:((u=e==null?void 0:e.relations)==null?void 0:u.displayMode)==="factor"?"factor":a.relations.displayMode},trend:{lookbackWeeks:fg(((p=e==null?void 0:e.trend)==null?void 0:p.lookbackWeeks)??a.trend.lookbackWeeks,1,12)},dayparts:{enabled:!!(((w=e==null?void 0:e.dayparts)==null?void 0:w.enabled)??a.dayparts.enabled)},ui:{showNotes:!!(i.showNotes??a.ui.showNotes)}}}function mg(e){if(typeof e!="string")return;const t=e.trim();if(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t)){if(t.length===4){const[,a,o,r]=t;return`#${a}${a}${o}${o}${r}${r}`.toUpperCase()}return t.toUpperCase()}}function vg(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function bg(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return`cat-${Math.abs(t)}`}function yg(e){const t=e.pace.totalEligible>0?e.pace.elapsedEligible/e.pace.totalEligible:0,a=t>0?e.totalProgress.actualHours/t:e.totalProgress.actualHours,o=Math.max(0,Math.ceil(e.pace.daysLeft)),r=wg(e.dailyHours,e.config.forecast.momentumLastNDays),n=e.totalProgress.actualHours+r*o,s=Math.max(0,Math.min(a,n)-e.config.forecast.padding),l=Math.max(a,n)+e.config.forecast.padding,i=e.config.forecast.methodPrimary==="momentum"?"momentum":"linear",c=i==="momentum"?n:a,u=Math.max(0,c-e.config.forecast.padding),p=Math.max(0,c+e.config.forecast.padding),w=i==="momentum"?"Momentum":"Linear";return{linear:Ct(a),momentum:Ct(n),low:Ct(Math.max(0,s)),high:Ct(Math.max(0,l)),text:`${w} ${Sn(e.config.forecast.padding)}h  ${Sn(u)}${Sn(p)} h`,primaryMethod:i,primary:Ct(c),bandLow:Ct(u),bandHigh:Ct(p)}}function wg(e,t){if(t<=0)return 0;const a=Array.from(e.entries());if(!a.length)return 0;a.sort((n,s)=>n[0].localeCompare(s[0]));const o=a.slice(-t),r=o.reduce((n,[,s])=>n+Math.max(0,s||0),0);return o.length?r/o.length:0}function kg(e,t){var o,r;if(typeof window<"u"){const n=window;try{if(typeof(n==null?void 0:n.t)=="function")return n.t("opsdash",e,t||{});if(typeof((r=(o=n==null?void 0:n.OC)==null?void 0:o.L10N)==null?void 0:r.translate)=="function")return n.OC.L10N.translate("opsdash",e,t||{})}catch(s){n!=null&&n.console&&console.warn("[opsdash] translate failed",s)}}let a=e;return t&&Object.entries(t).forEach(([n,s])=>{a=a.replace(new RegExp(`{${n}}`,"g"),String(s))}),a}const Pt=kg;function _i(e){const t=e?ht(e):Gt(),a=(t==null?void 0:t.totalHours)??0,o=(t==null?void 0:t.categories)??[],r={id:"total",label:Pt("Total"),actualHours:0,targetHours:a,percent:0,deltaHours:0,remainingHours:a,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"};return{total:r,categories:o.map(n=>({...r,id:n.id,label:n.label,targetHours:n.targetHours,remainingHours:n.targetHours})),forecast:{linear:0,momentum:0,low:0,high:0,text:"~00 h",primaryMethod:(t==null?void 0:t.forecast.methodPrimary)??"linear",primary:0,bandLow:0,bandHigh:0}}}function xi(e){const t=e.config,a=$i(e.from),o=$i(e.to),r=Sg(e.byDay),n=(e.byCal||[]).reduce((p,w)=>{const v=Number((w==null?void 0:w.total_hours)??(w==null?void 0:w.hours)??0);return Number.isFinite(v)?p+v:p},0),s=t.totalHours||0,l=Ci({includeWeekend:t.pace.includeWeekendTotal,mode:t.pace.mode,includeZeroDays:t.includeZeroDaysInStats,start:a,end:o,dailyHours:r}),i=Si({id:"total",label:Pt("Total"),actual:n,target:s,pace:l,thresholds:t.pace.thresholds,includeWeekend:t.pace.includeWeekendTotal,paceMode:t.pace.mode}),c=t.categories.map(p=>{const w=Cg(p,e.byCal,e.groupsById),v=p.paceMode||t.pace.mode,g=Ci({includeWeekend:p.includeWeekend,mode:v,includeZeroDays:t.includeZeroDaysInStats,start:a,end:o,dailyHours:r});return Si({id:p.id,label:p.label,actual:w,target:p.targetHours,pace:g,thresholds:t.pace.thresholds,includeWeekend:p.includeWeekend,paceMode:v})}),u=yg({config:t,totalProgress:i,dailyHours:r,pace:l});return{total:i,categories:c,forecast:u}}function Ci(e){const{start:t,end:a}=e;if(!t||!a)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};const o=pr(new Date),r=pa(t),n=pa(a),s=$g(t,a).filter(p=>e.includeWeekend||!Tg(p)),l=s.length;if(l===0)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};if(pa(o)>n)return{totalEligible:l,elapsedEligible:l,daysLeft:0,calendarPercent:100};if(pa(o)<r)return{totalEligible:l,elapsedEligible:0,daysLeft:l,calendarPercent:0};let i=0;for(const p of s){const w=pa(p),v=e.dailyHours.get(w)??0;if(!(!e.includeZeroDays&&v<=0&&w!==pa(o))){if(w<pa(o))i+=1;else if(w===pa(o))if(e.mode==="time_aware"){const f=Math.min(new Date().getTime(),p.getTime()+xn)-p.getTime(),m=Math.max(0,Math.min(1,f/xn));(e.includeZeroDays||v>0||m>0)&&(i+=m)}else(e.includeZeroDays||v>0)&&(i+=1)}}const c=Cn(i/l*100),u=Math.max(0,l-i);return{totalEligible:l,elapsedEligible:i,daysLeft:u,calendarPercent:c}}function Si(e){const t=Math.max(0,e.target||0),a=Math.max(0,e.actual||0),o=t>0?Cn(a/t*100):0,r=t-a,n=a-t,s=e.pace.daysLeft>0?Math.max(0,r)/e.pace.daysLeft:0,l=o-e.pace.calendarPercent,i=_g({percent:o,target:t,gap:l,thresholds:e.thresholds});return{id:e.id,label:e.label,actualHours:Ct(a),targetHours:Ct(t),percent:o,deltaHours:Ct(n),remainingHours:Ct(Math.max(0,r)),needPerDay:Ct(s),daysLeft:Math.max(0,Math.ceil(e.pace.daysLeft)),calendarPercent:Cn(e.pace.calendarPercent),gap:Ct(l),status:i,statusLabel:xg(i),includeWeekend:e.includeWeekend,paceMode:e.paceMode}}function _g(e){return e.target<=0?"none":e.percent>=100?"done":e.gap>=e.thresholds.onTrack?"on_track":e.gap>=e.thresholds.atRisk?"at_risk":"behind"}function xg(e){switch(e){case"on_track":return Pt("On Track");case"at_risk":return Pt("At Risk");case"behind":return Pt("Behind");case"done":return Pt("Done");default:return""}}function Cg(e,t,a){if(!Array.isArray(t))return 0;const o=Array.isArray(e.groupIds)&&e.groupIds.length?new Set(e.groupIds):null;let r=0;for(const n of t){const s=Number((n==null?void 0:n.total_hours)??(n==null?void 0:n.hours)??0);if(!Number.isFinite(s)||s<=0)continue;const l=String((n==null?void 0:n.id)??(n==null?void 0:n.calendar)??""),i=Number((n==null?void 0:n.group)??(n==null?void 0:n.group_id)??(a==null?void 0:a[l])??0);o&&!o.has(i)||(r+=s)}return r}function Sg(e){const t=new Map;if(!Array.isArray(e))return t;for(const a of e){const o=String((a==null?void 0:a.date)??(a==null?void 0:a.day)??"");if(!o)continue;const r=Number((a==null?void 0:a.total_hours)??(a==null?void 0:a.hours)??0);Number.isFinite(r)&&t.set(o,r)}return t}function $g(e,t){const a=[];let o=pr(e);const r=pr(t).getTime();for(;o.getTime()<=r;)a.push(new Date(o)),o=new Date(o.getTime()+xn);return a}function $i(e){if(!e)return null;const t=e.split("-").map(o=>Number(o));if(t.length!==3||t.some(o=>!Number.isInteger(o)))return null;const a=new Date(Date.UTC(t[0],t[1]-1,t[2]));return Number.isNaN(a.getTime())?null:pr(a)}function pr(e){const t=new Date(e);return t.setUTCHours(0,0,0,0),t}function pa(e){return e.toISOString().slice(0,10)}function Tg(e){const t=e.getUTCDay();return t===0||t===6}const Ti=[{id:"navigation",title:"Navigation",items:[{id:"nav-prev",label:"Previous period",combo:["Alt",""],description:"Go to the previous week or month"},{id:"nav-next",label:"Next period",combo:["Alt",""],description:"Go to the next week or month"},{id:"nav-toggle-range",label:"Toggle week/month",combo:["Alt","Shift","R"],description:"Switch between week and month range"}]},{id:"notes",title:"Notes",items:[{id:"notes-save",label:"Save note",combo:["Ctrl / ","S"],description:"Persist the current note draft"}]},{id:"targets",title:"Targets",items:[{id:"targets-focus",label:"Open Theme",combo:["Alt","T"],description:"Jump to theme controls"}]},{id:"misc",title:"Misc",items:[{id:"shortcuts-open",label:"Open cheat sheet",combo:["?"],description:"Display this overlay"},{id:"widget-options",label:"Open widget options",combo:["Shift","C"],description:"Toggle options for the selected widget (edit mode)"},{id:"layout-edit",label:"Toggle edit layout",combo:["Shift","E"],description:"Enter or exit widget layout editing"}]}],Mg={id:"opsdash-sidebar-pane-calendars",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-calendars"},Dg={class:"sb-actions sb-actions--secondary"},Ag={class:"shortcuts-wrap"},Eg={key:0,class:"shortcuts-box",role:"region","aria-label":"Keyboard shortcuts"},Lg={class:"shortcuts-box__header"},Og={class:"shortcuts-box__body"},Bg={class:"shortcuts-box__title"},Ng={class:"label"},Ig={class:"combo"},Pg={key:0,class:"desc"},Fg={class:"sb-list"},Hg=["aria-pressed","onClick"],Wg={class:"cal-name"},zg={class:"cal-fields"},Rg={class:"field"},jg=["value","onChange"],Ug=["value"],Vg={class:"field"},Kg=["value","title","aria-invalid","onInput"],qg=ze(Me({__name:"SidebarCalendarsPane",props:{calendars:{},selected:{},range:{},isLoading:{type:Boolean},categoryOptions:{},calendarTargetMessages:{},calendarCategoryId:{type:Function},getTarget:{type:Function}},emits:["toggle-calendar","set-category","target-input","rerun-onboarding","open-shortcuts"],setup(e,{emit:t}){const a=e,{calendars:o,selected:r,range:n,isLoading:s,categoryOptions:l,calendarTargetMessages:i}=Yr(a),c=g=>a.calendarCategoryId(g),u=g=>a.getTarget(g),p=Q(!1),w=Ti;function v(g){p.value=!p.value}return(g,f)=>(y(),k("div",Mg,[d("div",Dg,[$e(A(rt),{type:"primary",size:"small",class:"rerun-btn",title:"Open the onboarding setup again",onClick:f[0]||(f[0]=m=>g.$emit("rerun-onboarding"))},{default:Ue(()=>[...f[2]||(f[2]=[De(" Re-run onboarding ",-1)])]),_:1}),d("div",Ag,[$e(A(rt),{type:"tertiary",size:"small",class:"shortcuts-btn",onClick:v},{default:Ue(()=>[...f[3]||(f[3]=[De(" Keyboard shortcuts ",-1)])]),_:1})])]),p.value?(y(),k("div",Eg,[d("div",Lg,[f[4]||(f[4]=d("span",null,"Keyboard shortcuts",-1)),d("button",{type:"button",class:"ghost sm",onClick:f[1]||(f[1]=m=>p.value=!1)},"")]),d("div",Og,[(y(!0),k(le,null,we(A(w),m=>(y(),k("div",{key:m.id,class:"shortcuts-box__group"},[d("div",Bg,N(m.title),1),d("ul",null,[(y(!0),k(le,null,we(m.items,D=>(y(),k("li",{key:D.id},[d("span",Ng,N(D.label),1),d("span",Ig,N(D.combo.join(" + ")),1),D.description?(y(),k("span",Pg,N(D.description),1)):V("",!0)]))),128))])]))),128))])])):V("",!0),f[8]||(f[8]=d("div",{class:"sb-context"},[d("div",{class:"sb-title"},"PerCalendar Settings"),d("p",{class:"sb-description"}," Choose which calendars feed dashboards, then map them to categories so Balance and Targets stay in sync. "),d("p",{class:"sb-description"},[De(" Use "),d("strong",null,"Category"),De(" to group calendars and "),d("strong",null,"Target (h)"),De(" to define weekly/monthly goalsthe values convert automatically when you switch ranges. ")])],-1)),d("div",Fg,[(y(!0),k(le,null,we(A(o),m=>{var D,T;return y(),k("div",{key:m.id,class:"cal-card"},[d("div",{class:"cal-card-head",role:"button",tabindex:"0","aria-pressed":A(r).includes(m.id),onClick:M=>g.$emit("toggle-calendar",m.id)},[d("span",{class:"color-dot",style:Le({background:m.color||"var(--brand)"})},null,4),d("span",Wg,N(m.displayname||m.id),1),d("span",{class:Ee(["cal-state",{on:A(r).includes(m.id)}])},N(A(r).includes(m.id)?"Selected":"Hidden"),3)],8,Hg),d("div",zg,[d("label",Rg,[f[6]||(f[6]=d("span",{class:"label"},"Category",-1)),d("select",{value:c(m.id),onChange:M=>g.$emit("set-category",{id:m.id,category:M.target.value})},[f[5]||(f[5]=d("option",{value:""},"Unassigned",-1)),(y(!0),k(le,null,we(A(l),M=>(y(),k("option",{key:M.id,value:M.id},N(M.label),9,Ug))),128))],40,jg)]),d("label",Vg,[f[7]||(f[7]=d("span",{class:"label"},"Target (h)",-1)),d("input",{type:"number",value:u(m.id),min:"0",max:"10000",step:"0.25","aria-label":"Target hours",title:`Target (${A(n)==="week"?"week":"month"}) in hours`,"aria-invalid":!!A(i)[m.id],class:"target-input",onInput:M=>g.$emit("target-input",{id:m.id,value:M.target.value})},null,40,Kg),A(i)[m.id]?(y(),k("div",{key:0,class:Ee(["input-message",(D=A(i)[m.id])==null?void 0:D.tone])},N((T=A(i)[m.id])==null?void 0:T.text),3)):V("",!0)])])])}),128))])]))}}),[["__scopeId","data-v-4f8c8947"]]),Gg={id:"opsdash-sidebar-pane-config",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-config"},Jg={class:"theme-section"},Yg={class:"theme-header"},Zg={class:"theme-hint"},Xg={class:"theme-options",role:"radiogroup","aria-label":"Theme preference"},Qg={class:"theme-option"},ep=["checked"],tp={class:"theme-copy"},ap={class:"theme-option__desc"},op={class:"theme-option"},rp=["checked"],np={class:"theme-option"},sp=["checked"],lp=ze(Me({__name:"SidebarConfigPane",props:{themePreference:{},effectiveTheme:{},systemTheme:{}},emits:["set-theme-preference"],setup(e,{emit:t}){const a=e,{themePreference:o,effectiveTheme:r,systemTheme:n}=Yr(a),s=t,l=B(()=>n.value==="dark"?"dark":"light"),i=B(()=>r.value==="dark"?"Dark":"Light");function c(u){s("set-theme-preference",u)}return(u,p)=>(y(),k("div",Gg,[p[7]||(p[7]=d("div",{class:"sb-title"},"Theme",-1)),p[8]||(p[8]=d("p",{class:"sb-description"}," Pick how Opsdash follows Nextcloud themes. Profile management lives under the Profiles tab. ",-1)),d("div",Jg,[d("div",Yg,[p[3]||(p[3]=d("div",{class:"theme-title"},"Theme & appearance",-1)),d("div",Zg,"Currently showing "+N(i.value),1)]),d("div",Xg,[d("label",Qg,[d("input",{type:"radio",name:"opsdash-theme-preference",value:"auto",checked:A(o)==="auto",onChange:p[0]||(p[0]=w=>c("auto"))},null,40,ep),d("div",tp,[p[4]||(p[4]=d("div",{class:"theme-option__title"},"Follow Nextcloud",-1)),d("div",ap,"Match account theme (currently "+N(l.value)+").",1)])]),d("label",op,[d("input",{type:"radio",name:"opsdash-theme-preference",value:"light",checked:A(o)==="light",onChange:p[1]||(p[1]=w=>c("light"))},null,40,rp),p[5]||(p[5]=d("div",{class:"theme-copy"},[d("div",{class:"theme-option__title"},"Force light"),d("div",{class:"theme-option__desc"},"Use the light palette even when Nextcloud switches to dark.")],-1))]),d("label",np,[d("input",{type:"radio",name:"opsdash-theme-preference",value:"dark",checked:A(o)==="dark",onChange:p[2]||(p[2]=w=>c("dark"))},null,40,sp),p[6]||(p[6]=d("div",{class:"theme-copy"},[d("div",{class:"theme-option__title"},"Force dark"),d("div",{class:"theme-option__desc"},"Keep Opsdash in dark mode, even if Nextcloud stays light.")],-1))])])])]))}}),[["__scopeId","data-v-1c577e0e"]]),ip={id:"opsdash-sidebar-pane-profiles",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-profiles"},cp={class:"setup-actions"},dp={class:"preset-form"},up=["disabled"],fp={key:0,class:"preset-error"},gp={key:0,class:"preset-warnings"},pp={class:"preset-header"},hp={key:1,class:"preset-empty"},mp={key:2,class:"preset-list"},vp={class:"preset-meta"},bp={class:"preset-name"},yp={class:"preset-info"},wp={key:0},kp={class:"preset-actions"},_p=ze(Me({__name:"SidebarProfilesPane",props:{presets:{},isLoading:{type:Boolean},isSaving:{type:Boolean},isApplying:{type:Boolean},warnings:{}},emits:["save","load","delete","refresh","clear-warnings","export-config","import-config"],setup(e,{emit:t}){const a=t,o=Q(""),r=Q(null),n=Q(null);function s(){const w=o.value.trim();if(!w){r.value="Enter a profile name";return}r.value=null,a("save",w),o.value=""}function l(w){a("load",w)}function i(w){window.confirm(`Delete profile "${w}"?`)&&a("delete",w)}function c(){var w;(w=n.value)==null||w.click()}function u(w){var f;const v=w.target,g=(f=v==null?void 0:v.files)==null?void 0:f[0];g&&a("import-config",g),v&&(v.value="")}function p(w){if(!w)return"";const v=new Date(w);if(Number.isNaN(v.getTime()))return w;const f=new Date().getTime()-v.getTime(),m=Math.round(f/6e4);if(m<1)return"just now";if(m<60)return`${m} min ago`;const D=Math.round(m/60);if(D<24)return`${D}h ago`;const T=Math.round(D/24);if(T<7)return`${T}d ago`;const M=Math.round(T/7);return M<5?`${M}w ago`:v.toLocaleDateString()}return(w,v)=>(y(),k("div",ip,[v[11]||(v[11]=d("div",{class:"sb-title"},"Profiles",-1)),v[12]||(v[12]=d("p",{class:"sb-description"}," Export/import full configs or save/load named profiles (calendars, groups, targets, settings). ",-1)),d("div",cp,[$e(A(rt),{type:"tertiary",size:"small",onClick:v[0]||(v[0]=g=>a("export-config"))},{default:Ue(()=>[...v[4]||(v[4]=[De(" Export configuration ",-1)])]),_:1}),$e(A(rt),{type:"tertiary",size:"small",onClick:c},{default:Ue(()=>[...v[5]||(v[5]=[De(" Import configuration ",-1)])]),_:1}),d("input",{ref_key:"fileInput",ref:n,type:"file",accept:"application/json",class:"import-input",onChange:u},null,544)]),d("div",dp,[v[6]||(v[6]=d("label",{class:"preset-label",for:"preset-name"},"Profile name",-1)),da(d("input",{id:"preset-name","onUpdate:modelValue":v[1]||(v[1]=g=>o.value=g),type:"text",placeholder:"e.g. Focus week",disabled:w.isSaving,onKeyup:ja(s,["enter"])},null,40,up),[[vf,o.value]]),r.value?(y(),k("div",fp,N(r.value),1)):V("",!0),$e(A(rt),{class:"preset-save",type:"primary",disabled:w.isSaving||!o.value.trim(),onClick:s},{default:Ue(()=>[De(N(w.isSaving?"Saving":"Save current configuration"),1)]),_:1},8,["disabled"])]),w.warnings.length?(y(),k("div",gp,[v[8]||(v[8]=d("div",{class:"warnings-title"},"Warnings",-1)),d("ul",null,[(y(!0),k(le,null,we(w.warnings,(g,f)=>(y(),k("li",{key:f},N(g),1))),128))]),$e(A(rt),{type:"tertiary",class:"preset-clear",onClick:v[2]||(v[2]=g=>a("clear-warnings"))},{default:Ue(()=>[...v[7]||(v[7]=[De(" Clear warnings ",-1)])]),_:1})])):V("",!0),d("div",pp,[v[9]||(v[9]=d("h3",null,"Saved profiles",-1)),$e(A(rt),{type:"tertiary",disabled:w.isLoading,onClick:v[3]||(v[3]=g=>a("refresh"))},{default:Ue(()=>[De(N(w.isLoading?"Refreshing":"Refresh list"),1)]),_:1},8,["disabled"])]),!w.presets.length&&!w.isLoading?(y(),k("div",hp," No profiles yet. Save one above to get started. ")):(y(),k("ul",mp,[(y(!0),k(le,null,we(w.presets,g=>(y(),k("li",{key:g.name,class:"preset-item"},[d("div",vp,[d("div",bp,N(g.name),1),d("div",yp,[d("span",null,N(g.selectedCount)+" calendars",1),d("span",null,N(g.calendarCount)+" groups",1),g.updatedAt?(y(),k("span",wp,"Updated "+N(p(g.updatedAt)),1)):V("",!0)])]),d("div",kp,[$e(A(rt),{type:"primary",disabled:w.isApplying,onClick:f=>l(g.name)},{default:Ue(()=>[De(N(w.isApplying?"Applying":"Load"),1)]),_:2},1032,["disabled","onClick"]),$e(A(rt),{type:"tertiary",disabled:w.isApplying,onClick:f=>i(g.name)},{default:Ue(()=>[...v[10]||(v[10]=[De(" Delete ",-1)])]),_:2},1032,["disabled","onClick"])])]))),128))]))]))}}),[["__scopeId","data-v-32d12bd1"]]),xp={id:"opsdash-sidebar-pane-report",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-report"},Cp={class:"report-card"},Sp={class:"report-card__header"},$p={class:"report-card__subtitle"},Tp={class:"switch"},Mp=["checked"],Dp={class:"report-field"},Ap=["value","disabled"],Ep={class:"report-field"},Lp=["value","disabled"],Op={class:"report-field"},Bp=["value","disabled"],Np={class:"report-risk"},Ip={class:"report-risk__header"},Pp=["checked","disabled"],Fp=["disabled","value"],Hp=["disabled"],Wp=["checked","disabled"],zp=["checked","disabled"],Rp={class:"report-actions"},jp=["disabled"],Up=ze(Me({__name:"SidebarReportPane",props:{reportingConfig:{},saving:{type:Boolean}},emits:["save-reporting"],setup(e,{emit:t}){const a=e,o=t,r=Q(c(a.reportingConfig));Be(()=>a.reportingConfig,u=>{r.value=c(u)},{deep:!0});const n=B(()=>JSON.stringify(r.value)!==JSON.stringify(a.reportingConfig));function s(u){r.value={...r.value,...u}}function l(){o("save-reporting",c(r.value))}function i(u){const p=u.target;if(!p)return;const w=Number(p.value);Number.isFinite(w)&&s({riskThreshold:Math.max(.5,Math.min(1,w/100))})}function c(u){return JSON.parse(JSON.stringify(u))}return(u,p)=>(y(),k("div",xp,[p[19]||(p[19]=d("div",{class:"sb-title"},"Reports & Automation",-1)),p[20]||(p[20]=d("p",{class:"sb-description"}," Configure weekly/monthly digests, interim reminders, and Deck visibility. ",-1)),d("div",Cp,[d("div",Sp,[d("div",null,[p[7]||(p[7]=d("div",{class:"report-card__title"},"Scheduled summaries",-1)),d("div",$p,N(r.value.enabled?"Sending on schedule":"Disabled"),1)]),d("label",Tp,[d("input",{type:"checkbox",checked:r.value.enabled,onChange:p[0]||(p[0]=w=>s({enabled:!r.value.enabled}))},null,40,Mp),p[8]||(p[8]=d("span",null,null,-1))])]),d("div",{class:Ee(["report-form",{"report-form--disabled":!r.value.enabled}])},[d("label",Dp,[p[10]||(p[10]=d("span",null,"Cadence",-1)),d("select",{value:r.value.schedule,disabled:!r.value.enabled,onChange:p[1]||(p[1]=w=>s({schedule:w.target.value}))},[...p[9]||(p[9]=[d("option",{value:"week"},"Weekly only",-1),d("option",{value:"month"},"Monthly only",-1),d("option",{value:"both"},"Weekly + Monthly",-1)])],40,Ap)]),d("label",Ep,[p[12]||(p[12]=d("span",null,"Interim updates",-1)),d("select",{value:r.value.interim,disabled:!r.value.enabled,onChange:p[2]||(p[2]=w=>s({interim:w.target.value}))},[...p[11]||(p[11]=[d("option",{value:"none"},"None",-1),d("option",{value:"midweek"},"Mid-week snapshot",-1),d("option",{value:"daily"},"Daily digest",-1)])],40,Lp)]),d("label",Op,[p[14]||(p[14]=d("span",null,"Reminder lead",-1)),d("select",{value:r.value.reminderLead,disabled:!r.value.enabled,onChange:p[3]||(p[3]=w=>s({reminderLead:w.target.value}))},[...p[13]||(p[13]=[d("option",{value:"none"},"No reminder",-1),d("option",{value:"1d"},"1 day before",-1),d("option",{value:"2d"},"2 days before",-1)])],40,Bp)]),d("div",Np,[d("div",Ip,[d("label",null,[d("input",{type:"checkbox",checked:r.value.alertOnRisk,disabled:!r.value.enabled,onChange:p[4]||(p[4]=w=>s({alertOnRisk:!r.value.alertOnRisk}))},null,40,Pp),p[15]||(p[15]=De(" Alert when schedule is at risk ",-1))]),d("span",null,N(Math.round(r.value.riskThreshold*100))+"%",1)]),d("input",{type:"range",min:"50",max:"100",step:"5",disabled:!r.value.enabled,value:Math.round(r.value.riskThreshold*100),onChange:i},null,40,Fp)]),d("fieldset",{class:"report-notify",disabled:!r.value.enabled},[p[18]||(p[18]=d("legend",null,"Delivery channels",-1)),d("label",null,[d("input",{type:"checkbox",checked:r.value.notifyEmail,disabled:!r.value.enabled,onChange:p[5]||(p[5]=w=>s({notifyEmail:!r.value.notifyEmail}))},null,40,Wp),p[16]||(p[16]=De(" Send via email ",-1))]),d("label",null,[d("input",{type:"checkbox",checked:r.value.notifyNotification,disabled:!r.value.enabled,onChange:p[6]||(p[6]=w=>s({notifyNotification:!r.value.notifyNotification}))},null,40,zp),p[17]||(p[17]=De(" Nextcloud notification ",-1))])],8,Hp)],2)]),d("div",Rp,[d("button",{type:"button",class:"report-save",disabled:u.saving||!n.value,onClick:l},N(u.saving?"Saving":n.value?"Save changes":"Saved"),9,jp)])]))}}),[["__scopeId","data-v-3badd082"]]);function Vp(e,t){const{allowEmpty:a=!1}=t;if(e===""||e===null||e===void 0)return a?{value:null}:{value:null,error:"Enter a number"};const o=Number(e);if(!Number.isFinite(o))return{value:null,error:"Enter a valid number"};let r=o,n;if(typeof t.min=="number"&&r<t.min&&(r=t.min,n=$n(t)),typeof t.max=="number"&&r>t.max&&(r=t.max,n=$n(t)),typeof t.step=="number"&&t.step>0){const l=qp(r,t.step);l!==r&&(r=l,n=$n(t))}const s=Mi(t);return typeof s=="number"&&(r=Number(r.toFixed(s))),{value:r,warning:n}}function Kp(e,t){const a=Vp(e,t),o=[];return a.error&&o.push({severity:"error",message:a.error}),a.warning&&o.push({severity:"warning",message:a.warning}),{value:a.value,issues:o}}function qp(e,t){const a=Mi({step:t}),o=Math.round(e/t)*t;return typeof a=="number"?Number(o.toFixed(a)):o}function Mi(e){if(typeof e.decimals=="number")return e.decimals;if(typeof e.step=="number")return Gp(e.step)}function Gp(e){const t=e.toString();if(t.includes("e-")){const[,o]=t.split("e-");return Number(o)}const[,a=""]=t.split(".");return a.length}function $n(e){const t=[];return typeof e.min=="number"&&typeof e.max=="number"?t.push(`Allowed range ${e.min}  ${e.max}`):typeof e.min=="number"?t.push(`Minimum ${e.min}`):typeof e.max=="number"&&t.push(`Maximum ${e.max}`),typeof e.step=="number"&&e.step>0&&t.push(`step ${e.step}`),`Adjusted to allowed value (${t.join(", ")})`}function Jp(e,t,a="Enter a valid number"){const o=Kp(e,t),r=o.issues.find(l=>l.severity==="error"),n=o.issues.find(l=>l.severity==="warning");let s=null;return r||o.value===null?s={text:(r==null?void 0:r.message)??a,tone:"error"}:n&&(s={text:n.message,tone:"warning"}),{ok:!r&&o.value!==null,value:o.value,message:s}}function Ma(e,t,a,o,r){const{ok:n,value:s,message:l}=Jp(e,t,r);return a(l),!n||s===null?!1:(o(s),!0)}const Yp={class:"rangebar",title:"Time range"},Zp={class:"range-actions"},Xp=["disabled"],Qp=["aria-label"],eh={class:"range-toggle"},th={class:"range-nav"},ah={class:"range-dates"},oh={class:"sb-tabs sb-tabs--primary",role:"tablist","aria-label":"Sidebar sections"},rh=["aria-selected"],nh={class:"sb-tabs sb-tabs--secondary",role:"tablist","aria-label":"Detail settings"},sh=["aria-selected"],lh={class:"sb-tabs sb-tabs--secondary",role:"tablist","aria-label":"Advanced configuration"},ih=["aria-selected"],ch=["aria-selected"],dh=ze(Me({__name:"Sidebar",props:{calendars:{},selected:{},groupsById:{},isLoading:{type:Boolean},range:{},offset:{},from:{},to:{},targetsWeek:{},targetsMonth:{},targetsConfig:{},navToggleLabel:{},navToggleIcon:{},presets:{},presetsLoading:{type:Boolean},presetSaving:{type:Boolean},presetApplying:{type:Boolean},presetWarnings:{},themePreference:{},effectiveTheme:{},systemTheme:{},reportingConfig:{},deckSettings:{},reportingSaving:{type:Boolean},dashboardMode:{}},emits:["load","update:range","update:offset","select-all","toggle-calendar","set-group","set-target","update:targets-config","toggle-nav","save-preset","load-preset","delete-preset","refresh-presets","clear-preset-warnings","rerun-onboarding","set-theme-preference","export-config","import-config","open-shortcuts","save-reporting","save-deck-settings"],setup(e,{expose:t,emit:a}){const o=e,r=a,n=Q("calendars");Be(()=>o.dashboardMode,b=>{b==="quick"&&(n.value==="profiles"||n.value==="report")&&(n.value="calendars")});const s=B(()=>o.targetsConfig),l=B(()=>{var b;return((b=s.value)==null?void 0:b.categories)??[]}),i=B(()=>o.presets??[]),c=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"];B(()=>{const b=new Set,h=x=>{const E=C(x);E&&b.add(E)};return(o.calendars||[]).forEach(x=>h(x==null?void 0:x.color)),l.value.forEach(x=>h(x==null?void 0:x.color)),c.forEach(x=>b.add(x)),Array.from(b)});function u(b){const h=ht(JSON.parse(JSON.stringify(o.targetsConfig||{})));b(h),r("update:targets-config",h)}B(()=>w()!==null);const p=Ut({});Ut({}),Q(null),Q(null),Ut({onTrack:null,atRisk:null}),Q(null),Q(null);function w(){const b=new Set;for(const h of l.value)(h.groupIds||[]).forEach(x=>b.add(Number(x)));Object.values(o.groupsById||{}).forEach(h=>b.add(Number(h)));for(let h=1;h<=9;h++)if(!b.has(h))return h;return null}function v(b){const h=m(b),x=l.value.find(E=>Array.isArray(E.groupIds)&&E.groupIds.includes(h));return x?x.id:""}function g(b,h){if(!h){r("set-group",{id:b,n:0});return}const x=l.value.find(P=>P.id===h);if(!x){r("set-group",{id:b,n:0});return}const E=f(x.id);r("set-group",{id:b,n:E})}function f(b){const h=l.value.find(P=>P.id===b);if(!h)return 0;const x=Array.isArray(h.groupIds)&&h.groupIds.length?Number(h.groupIds[0]):null;if(x&&Number.isFinite(x))return x;const E=w()??0;return u(P=>{const q=P.categories.find(O=>O.id===b);q&&(q.groupIds=E?[E]:[])}),E}function m(b){const h=Number((o.groupsById||{})[b]??0);return isFinite(h)?Math.max(0,Math.min(9,Math.trunc(h))):0}function D(b){const h=o.range==="month"?o.targetsMonth||{}:o.targetsWeek||{},x=Number(h[b]??"");return isFinite(x)?x:""}function T(b){r("select-all",b)}function M(b){r("toggle-calendar",b)}function _(b){g(b.id,b.category)}function $(b){I(b.id,b.value)}function I(b,h){Ma(h,{min:0,max:1e4,step:.25,decimals:2},x=>{p[b]=x},x=>r("set-target",{id:b,h:x}))}function C(b){if(typeof b!="string")return null;const h=b.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(h))return null;if(h.length===4){const[,x,E,P]=h;return`#${x}${x}${E}${E}${P}${P}`.toUpperCase()}return h.toUpperCase()}function S(b){n.value=b}return t({openTab:S}),(b,h)=>(y(),Re(A(Tf),null,{default:Ue(()=>[au(b.$slots,"actions",{},void 0,!0),h[30]||(h[30]=d("div",{class:"sb-title",title:"Filter and group calendars"},"Filter Calendars",-1)),d("div",Yp,[d("div",Zp,[d("button",{class:"sidebar-action-btn",type:"button",disabled:b.isLoading,onClick:h[0]||(h[0]=x=>b.$emit("load"))}," Refresh ",8,Xp),d("button",{class:"sidebar-action-btn sidebar-action-btn--icon",type:"button",onClick:h[1]||(h[1]=x=>b.$emit("toggle-nav")),"aria-label":b.navToggleLabel},N(b.navToggleIcon),9,Qp)]),d("div",eh,[$e(A(wi),{type:"radio",name:"range-week",checked:b.range==="week","onUpdate:checked":h[2]||(h[2]=x=>{x&&b.$emit("update:range","week")})},{default:Ue(()=>[...h[26]||(h[26]=[De("Week",-1)])]),_:1},8,["checked"]),$e(A(wi),{type:"radio",name:"range-month",checked:b.range==="month","onUpdate:checked":h[3]||(h[3]=x=>{x&&b.$emit("update:range","month")})},{default:Ue(()=>[...h[27]||(h[27]=[De("Month",-1)])]),_:1},8,["checked"])]),d("div",th,[$e(A(rt),{class:"nav-btn",type:"tertiary",disabled:b.isLoading,onClick:h[4]||(h[4]=x=>b.$emit("update:offset",b.offset-1)),title:"Previous"},{default:Ue(()=>[...h[28]||(h[28]=[De("",-1)])]),_:1},8,["disabled"]),d("span",ah,N(b.from)+"  "+N(b.to),1),$e(A(rt),{class:"nav-btn",type:"tertiary",disabled:b.isLoading,onClick:h[5]||(h[5]=x=>b.$emit("update:offset",b.offset+1)),title:"Next"},{default:Ue(()=>[...h[29]||(h[29]=[De("",-1)])]),_:1},8,["disabled"])])]),d("div",oh,[d("button",{id:"opsdash-sidebar-tab-calendars",type:"button",class:Ee(["sb-tab",{active:n.value==="calendars"}]),role:"tab","aria-selected":n.value==="calendars","aria-controls":"opsdash-sidebar-pane-calendars",onClick:h[6]||(h[6]=x=>n.value="calendars")}," Calendars ",10,rh)]),d("div",nh,[o.dashboardMode!=="quick"?(y(),k("button",{key:0,id:"opsdash-sidebar-tab-profiles",type:"button",class:Ee(["sb-tab",{active:n.value==="profiles"}]),role:"tab","aria-selected":n.value==="profiles","aria-controls":"opsdash-sidebar-pane-profiles",onClick:h[7]||(h[7]=x=>n.value="profiles")}," Profiles ",10,sh)):V("",!0)]),d("div",lh,[d("button",{id:"opsdash-sidebar-tab-config",type:"button",class:Ee(["sb-tab",{active:n.value==="config"}]),role:"tab","aria-selected":n.value==="config","aria-controls":"opsdash-sidebar-pane-config",onClick:h[8]||(h[8]=x=>n.value="config")}," Theme ",10,ih),o.dashboardMode!=="quick"?(y(),k("button",{key:0,id:"opsdash-sidebar-tab-report",type:"button",class:Ee(["sb-tab",{active:n.value==="report"}]),role:"tab","aria-selected":n.value==="report","aria-controls":"opsdash-sidebar-pane-report",onClick:h[9]||(h[9]=x=>n.value="report")}," Report ",10,ch)):V("",!0)]),n.value==="calendars"?(y(),Re(qg,{key:0,calendars:b.calendars,selected:b.selected,range:b.range,"is-loading":b.isLoading,"category-options":l.value,"calendar-target-messages":p,"calendar-category-id":v,"get-target":D,onSelectAll:T,onToggleCalendar:M,onSetCategory:_,onTargetInput:$,onRerunOnboarding:h[10]||(h[10]=()=>r("rerun-onboarding")),onOpenShortcuts:h[11]||(h[11]=x=>r("open-shortcuts",x))},null,8,["calendars","selected","range","is-loading","category-options","calendar-target-messages"])):n.value==="config"?(y(),Re(lp,{key:1,presets:i.value,"is-loading":o.presetsLoading,"is-saving":o.presetSaving,"is-applying":o.presetApplying,warnings:o.presetWarnings,"theme-preference":o.themePreference,"effective-theme":o.effectiveTheme,"system-theme":o.systemTheme,onSave:h[12]||(h[12]=x=>r("save-preset",x)),onLoad:h[13]||(h[13]=x=>r("load-preset",x)),onDelete:h[14]||(h[14]=x=>r("delete-preset",x)),onRefresh:h[15]||(h[15]=()=>r("refresh-presets")),onClearWarnings:h[16]||(h[16]=()=>r("clear-preset-warnings")),onSetThemePreference:h[17]||(h[17]=x=>r("set-theme-preference",x))},null,8,["presets","is-loading","is-saving","is-applying","warnings","theme-preference","effective-theme","system-theme"])):n.value==="profiles"?(y(),Re(_p,{key:2,presets:i.value,"is-loading":o.presetsLoading,"is-saving":o.presetSaving,"is-applying":o.presetApplying,warnings:o.presetWarnings,onSave:h[18]||(h[18]=x=>r("save-preset",x)),onLoad:h[19]||(h[19]=x=>r("load-preset",x)),onDelete:h[20]||(h[20]=x=>r("delete-preset",x)),onRefresh:h[21]||(h[21]=()=>r("refresh-presets")),onClearWarnings:h[22]||(h[22]=()=>r("clear-preset-warnings")),onExportConfig:h[23]||(h[23]=()=>r("export-config")),onImportConfig:h[24]||(h[24]=x=>r("import-config",x))},null,8,["presets","is-loading","is-saving","is-applying","warnings"])):n.value==="report"?(y(),Re(Up,{key:3,"reporting-config":o.reportingConfig,saving:o.reportingSaving,onSaveReporting:h[25]||(h[25]=x=>r("save-reporting",x))},null,8,["reporting-config","saving"])):V("",!0)]),_:3}))}}),[["__scopeId","data-v-a318502d"]]),uh={key:0,class:"config-warning"},fh=Me({__name:"OnboardingIntroStep",props:{hasExistingConfig:{type:Boolean},snapshotSaving:{type:Boolean},saving:{type:Boolean},snapshotNotice:{},onSaveCurrentConfig:{type:Function}},setup(e){return(t,a)=>(y(),k(le,null,[a[2]||(a[2]=d("h3",null,"Opsdash visualises your calendar time and keeps goals on track.",-1)),a[3]||(a[3]=d("ul",{class:"highlights"},[d("li",null,"Targets  stay aligned with your weekly/monthly goals."),d("li",null,"Balance  ensure your focus areas get the right attention."),d("li",null,"Notes  capture insights and the story behind the numbers.")],-1)),t.hasExistingConfig?(y(),k("div",uh,[a[1]||(a[1]=d("p",null," You already have a dashboard configuration. Saving a preset now keeps a backup before onboarding applies new values. ",-1)),$e(A(rt),{type:"tertiary",size:"small",disabled:t.snapshotSaving||t.saving,"aria-busy":t.snapshotSaving,onClick:t.onSaveCurrentConfig},{default:Ue(()=>[...a[0]||(a[0]=[De(" Save current setup as preset ",-1)])]),_:1},8,["disabled","aria-busy","onClick"])])):V("",!0),a[4]||(a[4]=d("p",{class:"hint"},"You can change configuration later from the Sidebar.",-1)),t.snapshotNotice?(y(),k("div",{key:1,class:Ee(["snapshot-notice",`snapshot-notice--${t.snapshotNotice.type}`]),role:"status"},N(t.snapshotNotice.message),3)):V("",!0)],64))}}),gh={class:"preferences-grid"},ph={class:"pref-card"},hh={class:"theme-options",role:"radiogroup","aria-label":"Theme preference"},mh={class:"theme-option"},vh=["checked"],bh={class:"theme-copy"},yh={class:"theme-option__desc"},wh={class:"theme-option"},kh=["checked"],_h={class:"theme-option"},xh=["checked"],Ch={class:"theme-preview"},Sh={class:"pref-card"},$h={class:"field"},Th=["value","disabled"],Mh={key:0,class:"pref-hint"},Dh={class:"pref-card"},Ah={class:"field"},Eh=["value"],Lh={class:"pref-card pref-card--deck"},Oh={class:"toggle-row"},Bh=["checked"],Nh={class:"deck-board-list"},Ih={key:0,class:"deck-status"},Ph={key:1,class:"deck-status deck-status--error"},Fh={key:0,class:"deck-status"},Hh={key:1,class:"deck-board-options",role:"list"},Wh=["checked","onChange"],zh={class:"pref-card pref-card--reporting"},Rh={class:"toggle-row"},jh=["checked"],Uh={class:"field"},Vh=["value"],Kh={class:"field"},qh=["value"],Gh={class:"field checkbox toggle-row"},Jh=["checked"],Yh={class:"pref-card pref-card--activity"},Zh={class:"toggle-row"},Xh=["checked"],Qh=Me({__name:"OnboardingPreferencesStep",props:{themePreference:{},systemThemeLabel:{},previewTheme:{},setThemePreference:{type:Function},totalHoursInput:{},categoryTotalHours:{},categoriesEnabled:{type:Boolean},onTotalHoursChange:{type:Function},allDayHoursInput:{},onAllDayHoursChange:{type:Function},deckSettingsDraft:{},setDeckEnabled:{type:Function},deckBoards:{},deckBoardsLoading:{type:Boolean},deckBoardsError:{},isDeckBoardVisible:{type:Function},toggleDeckBoard:{type:Function},reportingDraft:{},setReportingEnabled:{type:Function},setReportingSchedule:{type:Function},setReportingInterim:{type:Function},updateReporting:{type:Function},activityDraft:{},setActivityDayOff:{type:Function}},setup(e){return(t,a)=>(y(),k(le,null,[a[39]||(a[39]=d("h3",null,"Final tweaks",-1)),a[40]||(a[40]=d("p",{class:"hint"},"You can change these options later from Config & Setup.",-1)),d("div",gh,[d("article",ph,[a[14]||(a[14]=d("h4",null,"Theme & appearance",-1)),a[15]||(a[15]=d("p",{class:"pref-desc"},"Choose how Opsdash reacts to your Nextcloud theme. Charts keep their calendar colors.",-1)),d("div",hh,[d("label",mh,[d("input",{type:"radio",name:"onboarding-theme",value:"auto",checked:t.themePreference==="auto",onChange:a[0]||(a[0]=o=>t.setThemePreference("auto"))},null,40,vh),d("div",bh,[a[11]||(a[11]=d("div",{class:"theme-option__title"},"Follow Nextcloud",-1)),d("div",yh,"Matches your account theme (currently "+N(t.systemThemeLabel)+").",1)])]),d("label",wh,[d("input",{type:"radio",name:"onboarding-theme",value:"light",checked:t.themePreference==="light",onChange:a[1]||(a[1]=o=>t.setThemePreference("light"))},null,40,kh),a[12]||(a[12]=d("div",{class:"theme-copy"},[d("div",{class:"theme-option__title"},"Force light"),d("div",{class:"theme-option__desc"},"Always use the light palette, even if Nextcloud switches to dark.")],-1))]),d("label",_h,[d("input",{type:"radio",name:"onboarding-theme",value:"dark",checked:t.themePreference==="dark",onChange:a[2]||(a[2]=o=>t.setThemePreference("dark"))},null,40,xh),a[13]||(a[13]=d("div",{class:"theme-copy"},[d("div",{class:"theme-option__title"},"Force dark"),d("div",{class:"theme-option__desc"},"Keep Opsdash dark, even when Nextcloud stays light.")],-1))])]),d("div",Ch,"Preview: "+N(t.previewTheme==="dark"?"Dark":"Light")+" mode",1)]),d("article",Sh,[a[17]||(a[17]=d("h4",null,"Total weekly target",-1)),a[18]||(a[18]=d("p",{class:"pref-desc"},"Set your overall weekly goal. You can fine-tune per-category targets later.",-1)),d("label",$h,[a[16]||(a[16]=d("span",{class:"label"},"Total target (h / week)",-1)),d("input",{type:"number",value:t.totalHoursInput??t.categoryTotalHours,disabled:t.categoriesEnabled,min:"0",max:"1000",step:"0.5",onInput:a[3]||(a[3]=o=>t.onTotalHoursChange(o.target))},null,40,Th)]),t.categoriesEnabled?(y(),k("p",Mh," Using categories  total derives from category targets ("+N(t.categoryTotalHours.toFixed(1))+" h). ",1)):V("",!0)]),d("article",Dh,[a[20]||(a[20]=d("h4",null,"All-day events",-1)),a[21]||(a[21]=d("p",{class:"pref-desc"},"Tell Opsdash how many hours an all-day calendar event should contribute per day.",-1)),d("label",Ah,[a[19]||(a[19]=d("span",{class:"label"},"All-day hours per day",-1)),d("input",{type:"number",value:t.allDayHoursInput,min:"0",max:"24",step:"0.25",onInput:a[4]||(a[4]=o=>t.onAllDayHoursChange(o.target))},null,40,Eh)]),a[22]||(a[22]=d("p",{class:"pref-hint"},"Default is 8 h  adjust if your organisation tracks different durations.",-1))]),d("article",Lh,[a[25]||(a[25]=d("h4",null,"Deck cards",-1)),a[26]||(a[26]=d("p",{class:"pref-desc"},"Bring Deck boards into Opsdash. Cards remain read-only so you can focus on status.",-1)),d("label",Oh,[d("input",{type:"checkbox",checked:t.deckSettingsDraft.enabled,onChange:a[5]||(a[5]=o=>t.setDeckEnabled(o.target.checked))},null,40,Bh),a[23]||(a[23]=d("span",null,"Show Deck tab inside Config & Setup",-1))]),t.deckSettingsDraft.enabled?(y(),k(le,{key:0},[a[24]||(a[24]=d("p",{class:"pref-hint"},"Select which boards appear. Deck permissions still apply.",-1)),d("div",Nh,[t.deckBoardsLoading?(y(),k("p",Ih,"Loading Deck boards")):t.deckBoardsError?(y(),k("p",Ph,N(t.deckBoardsError),1)):(y(),k(le,{key:2},[t.deckBoards.length?(y(),k("div",Hh,[(y(!0),k(le,null,we(t.deckBoards,o=>(y(),k("label",{key:o.id,class:"deck-board-option",role:"listitem"},[d("input",{type:"checkbox",checked:t.isDeckBoardVisible(o.id),onChange:r=>t.toggleDeckBoard(o.id,r.target.checked)},null,40,Wh),d("span",null,N(o.title),1)]))),128))])):(y(),k("p",Fh,"Open the Deck app to create a board."))],64))])],64)):V("",!0)]),d("article",zh,[a[33]||(a[33]=d("h4",null,"Weekly/monthly recap",-1)),a[34]||(a[34]=d("p",{class:"pref-desc"},"Opsdash can send a summary of targets, balance, and notes so you stay aligned.",-1)),d("label",Rh,[d("input",{type:"checkbox",checked:t.reportingDraft.enabled,onChange:a[6]||(a[6]=o=>t.setReportingEnabled(o.target.checked))},null,40,jh),a[27]||(a[27]=d("span",null,"Send a recap automatically",-1))]),t.reportingDraft.enabled?(y(),k(le,{key:0},[d("label",Uh,[a[29]||(a[29]=d("span",{class:"label"},"Schedule",-1)),d("select",{value:t.reportingDraft.schedule,onChange:a[7]||(a[7]=o=>t.setReportingSchedule(o.target.value))},[...a[28]||(a[28]=[d("option",{value:"week"},"Weekly",-1),d("option",{value:"month"},"Monthly",-1),d("option",{value:"both"},"Weekly + Monthly",-1)])],40,Vh)]),d("label",Kh,[a[31]||(a[31]=d("span",{class:"label"},"Mid-range reminders",-1)),d("select",{value:t.reportingDraft.interim,onChange:a[8]||(a[8]=o=>t.setReportingInterim(o.target.value))},[...a[30]||(a[30]=[d("option",{value:"none"},"No interim reminder",-1),d("option",{value:"midweek"},"Mid-week / mid-month only",-1),d("option",{value:"daily"},"Daily nudge while enabled",-1)])],40,qh)]),d("label",Gh,[d("input",{type:"checkbox",checked:t.reportingDraft.alertOnRisk,onChange:a[9]||(a[9]=o=>t.updateReporting({alertOnRisk:o.target.checked}))},null,40,Jh),a[32]||(a[32]=d("span",null,"Highlight when targets drift off-track",-1))])],64)):V("",!0)]),d("article",Yh,[a[36]||(a[36]=d("h4",null,"Activity insights",-1)),a[37]||(a[37]=d("p",{class:"pref-desc"},"Choose whether the Activity & Schedule card shows the day-off heatmap.",-1)),d("label",Zh,[d("input",{type:"checkbox",checked:t.activityDraft.showDayOffTrend,onChange:a[10]||(a[10]=o=>t.setActivityDayOff(o.target.checked))},null,40,Xh),a[35]||(a[35]=d("span",null,"Show Days off trend heatmap",-1))]),a[38]||(a[38]=d("p",{class:"pref-hint"},"Helps you compare recent weeks/months at a glance.",-1))])])],64))}}),em={class:"strategy-grid"},tm=["onClick"],am={class:"subtitle"},om=Me({__name:"OnboardingDashboardStep",props:{dashboardMode:{},setDashboardMode:{type:Function},dashboardPresets:{}},setup(e){return(t,a)=>(y(),k(le,null,[a[0]||(a[0]=d("h3",null,"Dashboard preset",-1)),a[1]||(a[1]=d("p",{class:"hint"},"Pick how much you want to see by default. You can change widgets later.",-1)),d("div",em,[(y(!0),k(le,null,we(t.dashboardPresets,o=>(y(),k("article",{key:o.id,class:Ee(["strategy-card",{active:t.dashboardMode===o.id}]),onClick:r=>t.setDashboardMode(o.id)},[d("h4",null,N(o.title),1),d("p",am,N(o.subtitle),1),d("ul",null,[(y(!0),k(le,null,we(o.highlights,r=>(y(),k("li",{key:r},N(r),1))),128))]),d("footer",null,"Widgets: "+N(o.widgets),1)],10,tm))),128))])],64))}}),rm={class:"strategy-grid"},nm=["onClick"],sm={class:"subtitle"},lm=Me({__name:"OnboardingStrategyStep",props:{strategies:{},selectedStrategy:{},setSelectedStrategy:{type:Function}},setup(e){return(t,a)=>(y(),k(le,null,[a[0]||(a[0]=d("h3",null,"Select a starting strategy",-1)),d("div",rm,[(y(!0),k(le,null,we(t.strategies,o=>(y(),k("article",{key:o.id,class:Ee(["strategy-card",{active:t.selectedStrategy===o.id}]),onClick:r=>t.setSelectedStrategy(o.id)},[d("h4",null,N(o.title),1),d("p",sm,N(o.subtitle),1),d("ul",null,[(y(!0),k(le,null,we(o.highlights,r=>(y(),k("li",{key:r},N(r),1))),128))]),d("footer",null,"Best for: "+N(o.recommendedFor),1)],10,nm))),128))])],64))}}),im={class:"calendar-list"},cm=["value","checked","onChange"],dm={key:0,class:"warning"},um=Me({__name:"OnboardingCalendarsStep",props:{calendars:{},localSelection:{},toggleCalendar:{type:Function}},setup(e){return(t,a)=>(y(),k(le,null,[a[0]||(a[0]=d("h3",null,"Choose calendars to include",-1)),a[1]||(a[1]=d("p",null,"Select the calendars you want to track. You can adjust later at any time.",-1)),d("div",im,[(y(!0),k(le,null,we(t.calendars,o=>(y(),k("label",{key:o.id,class:Ee(["calendar-item",{checked:t.localSelection.includes(o.id)}])},[d("input",{type:"checkbox",value:o.id,checked:t.localSelection.includes(o.id),onChange:r=>t.toggleCalendar(o.id,r.target)},null,40,cm),d("span",{class:"dot",style:Le({backgroundColor:o.color||"#3B82F6"})},null,4),d("span",null,N(o.displayname),1)],2))),128))]),t.localSelection.length?V("",!0):(y(),k("div",dm,"Select at least one calendar to continue."))],64))}}),fm={key:0,class:"hint"},gm={class:"categories-editor"},pm={class:"category-card__header"},hm=["value","onInput"],mm={class:"category-actions"},vm=["disabled","onClick"],bm={class:"category-card__fields"},ym={class:"field"},wm=["value","onInput"],km={class:"field checkbox"},_m=["checked","onChange"],xm={class:"field color-field"},Cm=["aria-expanded","aria-label","onClick"],Sm=["id"],$m={class:"swatch-grid",role:"group","aria-label":"Preset colors"},Tm=["aria-label","onClick"],Mm={class:"custom-color"},Dm=["value","onInput"],Am={class:"category-total"},Em={key:0,class:"calendar-assignments"},Lm={class:"cal-name"},Om=["value","onChange"],Bm=["value"],Nm={key:1,class:"hint"},Im=Me({__name:"OnboardingCategoriesStep",props:{categoriesEnabled:{type:Boolean},categories:{},categoryTotalHours:{},selectedCalendars:{},assignments:{},addCategory:{type:Function},removeCategory:{type:Function},setCategoryLabel:{type:Function},setCategoryTarget:{type:Function},toggleCategoryWeekend:{type:Function},assignCalendar:{type:Function},openColorId:{},toggleColorPopover:{type:Function},closeColorPopover:{type:Function},categoryColorPalette:{},resolvedColor:{type:Function},applyColor:{type:Function},onColorInput:{type:Function}},setup(e){return(t,a)=>(y(),k(le,null,[a[6]||(a[6]=d("h3",null,"Configure categories & targets",-1)),t.categoriesEnabled?(y(),k(le,{key:1},[d("div",gm,[(y(!0),k(le,null,we(t.categories,o=>(y(),k("article",{key:o.id,class:"category-card"},[d("header",pm,[d("span",{class:"category-color-indicator",style:Le({backgroundColor:t.resolvedColor(o)}),"aria-hidden":"true"},null,4),d("input",{class:"category-name",type:"text",value:o.label,placeholder:"Category name",onInput:r=>t.setCategoryLabel(o.id,r.target.value)},null,40,hm),d("div",mm,[d("button",{class:"remove-category",type:"button",disabled:t.categories.length<=1,title:"Remove category",onClick:r=>t.removeCategory(o.id)},"  ",8,vm)])]),d("div",bm,[d("label",ym,[a[1]||(a[1]=d("span",{class:"label"},"Target (h / week)",-1)),d("input",{type:"number",value:o.targetHours,min:"0",step:"0.5",onInput:r=>t.setCategoryTarget(o.id,r.target.value)},null,40,wm)]),d("label",km,[d("input",{type:"checkbox",checked:o.includeWeekend,onChange:r=>t.toggleCategoryWeekend(o.id,r.target.checked)},null,40,_m),a[2]||(a[2]=d("span",null,"Include weekend",-1))]),d("div",xm,[d("button",{type:"button",class:"color-link","aria-expanded":t.openColorId===o.id,"aria-label":`Choose color for ${o.label}`,"data-color-popover":"",onClick:Qe(r=>t.toggleColorPopover(o.id),["stop"])}," Color ",8,Cm),t.openColorId===o.id?(y(),k("div",{key:0,class:"color-popover",id:`onboarding-color-popover-${o.id}`,tabindex:"-1",onKeydown:a[0]||(a[0]=ja(Qe(r=>t.closeColorPopover(),["prevent"]),["esc"]))},[d("div",$m,[(y(!0),k(le,null,we(t.categoryColorPalette,r=>(y(),k("button",{key:`${o.id}-swatch-${r}`,type:"button",class:Ee(["color-swatch",{active:t.resolvedColor(o)===r}]),style:Le({backgroundColor:r}),"aria-label":`Use color ${r}`,onClick:n=>t.applyColor(o.id,r)},null,14,Tm))),128))]),d("label",Mm,[a[3]||(a[3]=d("span",null,"Custom",-1)),d("input",{class:"color-input",type:"color",value:t.resolvedColor(o),"aria-label":"Pick custom color",onInput:r=>t.onColorInput(o.id,r.target.value)},null,40,Dm)])],40,Sm)):V("",!0)])])]))),128)),$e(A(rt),{type:"tertiary",class:"add-category",onClick:t.addCategory},{default:Ue(()=>[...a[4]||(a[4]=[De("Add category",-1)])]),_:1},8,["onClick"]),d("div",Am,"Total weekly target: "+N(t.categoryTotalHours.toFixed(1))+" h",1)]),t.selectedCalendars.length?(y(),k("div",Em,[a[5]||(a[5]=d("h4",null,"Assign calendars",-1)),(y(!0),k(le,null,we(t.selectedCalendars,o=>(y(),k("div",{key:o.id,class:"assignment-row"},[d("span",Lm,N(o.displayname),1),d("select",{value:t.assignments[o.id],onChange:r=>t.assignCalendar(o.id,r.target.value)},[(y(!0),k(le,null,we(t.categories,r=>(y(),k("option",{key:r.id,value:r.id},N(r.label),9,Bm))),128))],40,Om)]))),128))])):(y(),k("p",Nm,"Select at least one calendar to continue."))],64)):(y(),k("p",fm,"This strategy does not require categories."))],64))}}),Pm={class:"review-grid"},Fm={class:"hint"},Hm={key:1},Wm={key:0},zm={key:0},Rm=Me({__name:"OnboardingReviewStep",props:{strategyTitle:{},selectedCalendars:{},draftTargetsCategories:{},draftTotalHours:{},categoryTotalHours:{},deckReviewSummary:{},deckEnabled:{type:Boolean},deckVisibleBoards:{},reportingEnabled:{type:Boolean},reportingSummary:{},showDayOffTrend:{type:Boolean}},setup(e){return(t,a)=>(y(),k(le,null,[a[6]||(a[6]=d("h3",null,"Review your setup",-1)),d("div",Pm,[d("div",null,[a[0]||(a[0]=d("h5",null,"Strategy",-1)),d("p",null,N(t.strategyTitle),1)]),d("div",null,[a[1]||(a[1]=d("h5",null,"Calendars",-1)),d("ul",null,[(y(!0),k(le,null,we(t.selectedCalendars,o=>(y(),k("li",{key:o.id},N(o.displayname),1))),128))])]),d("div",null,[a[2]||(a[2]=d("h5",null,"Targets preview",-1)),t.draftTargetsCategories.length?(y(),k(le,{key:0},[d("ul",null,[(y(!0),k(le,null,we(t.draftTargetsCategories,o=>(y(),k("li",{key:o.id},N(o.label)+"  "+N(o.targetHours)+" h",1))),128))]),d("p",Fm,"Total weekly target: "+N(t.categoryTotalHours.toFixed(1))+" h",1)],64)):(y(),k("p",Hm,"Total target: "+N(t.draftTotalHours)+" h per week",1))]),d("div",null,[a[3]||(a[3]=d("h5",null,"Deck tab",-1)),d("p",null,N(t.deckReviewSummary),1),t.deckEnabled&&t.deckVisibleBoards.length?(y(),k("ul",Wm,[(y(!0),k(le,null,we(t.deckVisibleBoards.slice(0,3),o=>(y(),k("li",{key:o.id},N(o.title),1))),128)),t.deckVisibleBoards.length>3?(y(),k("li",zm,"+"+N(t.deckVisibleBoards.length-3)+" more",1)):V("",!0)])):V("",!0)]),d("div",null,[a[4]||(a[4]=d("h5",null,"Reporting",-1)),d("p",null,N(t.reportingEnabled?t.reportingSummary:"Recap disabled"),1)]),d("div",null,[a[5]||(a[5]=d("h5",null,"Activity card",-1)),d("p",null,N(t.showDayOffTrend?"Days-off heatmap enabled":"Heatmap hidden"),1)])]),a[7]||(a[7]=d("p",{class:"hint"},"You can fine-tune categories, goals, and pacing once the dashboard loads.",-1))],64))}});function jm(){const e=Q(!1),t=Q(!1),a=Q(0),o=Q(null),r=B(()=>e.value||t.value);async function n(s){a.value+=1,o.value=s??null,e.value=!1,t.value=!0,await Qt()}return{autoWizardNeeded:e,manualWizardOpen:t,onboardingRunId:a,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:o}}const ha=1,Um=[{id:"total_only",title:"Focused",subtitle:"Keep it simple with one total goal",highlights:["Single weekly/monthly target","Great for personal overview","Upgradable later"],layers:{total:!0,categories:!1,calendars:!1},recommendedFor:"Individuals tracking a single workload"},{id:"total_plus_categories",title:"Balanced",subtitle:"Track balance across a few life areas",highlights:["Total goal plus key categories","Automatic category summaries","Calendar grouping suggestions"],layers:{total:!0,categories:!0,calendars:!1},recommendedFor:"Work/life blend with a handful of focus areas"},{id:"full_granular",title:"Power",subtitle:"Targets per category and calendar",highlights:["Detailed per-calendar goals","Category dashboards & pacing","Best for multi-project oversight"],layers:{total:!0,categories:!0,calendars:!0},recommendedFor:"Power users managing several project calendars"}],Vm={work:["work","focus","deep","project"],personal:["personal","home","family","life"],recovery:["recovery","wellness","rest","health"],hobby:["hobby","learn","study","growth"],sport:["sport","fitness","gym","run","ride"]},ma=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1"];function Km(e,t,a,o){const r=e.toLowerCase();for(const n of t)if((a[n]||[]).some(l=>r.includes(l)))return n;return t[o%t.length]}function qm(e){const t={};return Object.entries(e).forEach(([a,o])=>{t[a]=Number((o*4).toFixed(2))}),t}function wo(e){if(typeof e!="string")return null;const t=e.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t))return null;if(t.length===4){const[,a,o,r]=t;return`#${a}${a}${o}${o}${r}${r}`.toUpperCase()}return t.toUpperCase()}function Gm(e){const t=new Set,a=[];return e.forEach((o,r)=>{const n=((o==null?void 0:o.id)||`cat_${r}`).trim()||`cat_${r}`;t.has(n)||(t.add(n),a.push({id:n,label:((o==null?void 0:o.label)||n).trim()||`Category ${r+1}`,targetHours:Number.isFinite(o==null?void 0:o.targetHours)?Number(o.targetHours):0,includeWeekend:!!(o!=null&&o.includeWeekend),paceMode:(o==null?void 0:o.paceMode)==="time_aware"?"time_aware":"days_only",color:wo(o==null?void 0:o.color)??null}))}),a}function Jm(e,t,a){const o={};if(!t.length)return o;const r=new Set(t.map(s=>s.id)),n=t[0].id;return e.forEach(s=>{const l=a[s];o[s]=r.has(l)?l:n}),o}function Ym(){return Um}function Di(e,t,a){const o=a.length?[...new Set(a.filter(c=>t.some(u=>u.id===c)))]:t.map(c=>c.id);if(e==="total_only")return{categories:[],assignments:{}};const r=e==="total_plus_categories"?["work","personal","recovery"]:["work","hobby","sport"],n=e==="total_plus_categories"?[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,color:ma[0]},{id:"personal",label:"Personal",targetHours:8,includeWeekend:!0,color:ma[1]},{id:"recovery",label:"Recovery",targetHours:4,includeWeekend:!0,color:ma[2]}]:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,color:ma[0]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,color:ma[1]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,color:ma[2]}],s={};let l=0;return t.filter(c=>o.includes(c.id)).forEach(c=>{s[c.id]=Km(c.displayname,r,Vm,l),l+=1}),{categories:n.map(c=>({id:c.id,label:c.label,targetHours:c.targetHours,includeWeekend:c.includeWeekend,paceMode:"days_only",color:wo(c.color)??null})),assignments:s}}function Tn(e,t,a,o){var m;const r=a.length?[...new Set(a.filter(D=>t.some(T=>T.id===D)))]:t.map(D=>D.id),n=ht(Gt()),s={},l={};if(e==="total_only"){const D=Jt(n);return D.totalHours=D.totalHours||40,D.categories=[],D.ui.showCategoryBlocks=!1,D.ui.showCategoryCharts=!1,D.ui.showCalendarCharts=!1,{selected:r,targetsConfig:ht(D),groups:s,targetsWeek:l,targetsMonth:{}}}const i=Di(e,t,r),c=Gm((m=o==null?void 0:o.categories)!=null&&m.length?o.categories:i.categories),u=Jm(r,c.length?c:i.categories,(o==null?void 0:o.assignments)??i.assignments),p=Jt(n),w=new Map;let v=0;const g=D=>{const T=wo(D.color);if(T)return T;const M=t.find($=>u[$.id]===D.id&&wo($.color));if(M)return wo(M.color)??null;const _=ma[v%ma.length];return v+=1,_??null};p.categories=c.map((D,T)=>{const M=T+1;return w.set(D.id,M),{id:D.id,label:D.label,targetHours:Number(D.targetHours.toFixed(2)),includeWeekend:D.includeWeekend,paceMode:D.paceMode,color:g(D),groupIds:[M]}}),p.totalHours=p.categories.reduce((D,T)=>D+T.targetHours,0),p.totalHours<=0&&(p.totalHours=40),p.ui.showCategoryBlocks=p.categories.length>0,p.ui.showCategoryCharts=p.categories.length>0,p.ui.showCalendarCharts=e==="full_granular",p.includeZeroDaysInStats=!1,p.balance.categories=p.categories.map(D=>D.id),p.balance.useCategoryMapping=!0;const f={};return Object.values(u).forEach(D=>{f[D]=(f[D]??0)+1}),Object.entries(u).forEach(([D,T])=>{const M=w.get(T);if(M&&(s[D]=M,e==="full_granular")){const _=p.categories.find(C=>C.id===T);if(!_)return;const $=f[T]||1,I=Number((_.targetHours/$).toFixed(2));l[D]=I}}),{selected:r,targetsConfig:ht(p),groups:s,targetsWeek:l,targetsMonth:qm(l)}}function hr(){return{enabled:!1,schedule:"both",interim:"none",reminderLead:"1d",alertOnRisk:!0,riskThreshold:.85,notifyEmail:!0,notifyNotification:!0}}function Mn(e,t){const a=t??hr();if(!e||typeof e!="object")return{...a};const o=e.schedule==="week"||e.schedule==="month"?e.schedule:"both",r=e.interim==="midweek"||e.interim==="daily"?e.interim:"none",n=e.reminderLead==="1d"||e.reminderLead==="2d"?e.reminderLead:"none",s=Number(e.riskThreshold),l=Number.isFinite(s)&&s>=0&&s<=1?s:a.riskThreshold;return{enabled:!!e.enabled,schedule:o,interim:r,reminderLead:n,alertOnRisk:e.alertOnRisk!==!1,riskThreshold:l,notifyEmail:e.notifyEmail!==!1,notifyNotification:!!e.notifyNotification}}function mr(){return{enabled:!0,filtersEnabled:!0,defaultFilter:"all",hiddenBoards:[],mineMode:"assignee",solvedIncludesArchived:!0,ticker:{autoScroll:!0,intervalSeconds:5,showBoardBadges:!0}}}function Dn(e,t){var p,w,v;const a=t??mr();if(!e||typeof e!="object")return{...a};const o=(g,f)=>{if(typeof g=="boolean")return g;if(typeof g=="number")return g===1?!0:g===0?!1:f;if(typeof g=="string"){const m=g.trim().toLowerCase();if(["1","true","yes","on"].includes(m))return!0;if(["0","false","no","off","null",""].includes(m))return!1}return f},r=g=>{const f=Number(g);return!Number.isInteger(f)||f<=0||f>1e5?null:f},s=["all","mine","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine"].includes(e.defaultFilter)?e.defaultFilter:"all",l=e.mineMode==="creator"||e.mineMode==="both"?e.mineMode:"assignee",i=o(e.solvedIncludesArchived,a.solvedIncludesArchived),c={autoScroll:o((p=e.ticker)==null?void 0:p.autoScroll,a.ticker.autoScroll),intervalSeconds:Zm((w=e.ticker)==null?void 0:w.intervalSeconds,a.ticker.intervalSeconds),showBoardBadges:o((v=e.ticker)==null?void 0:v.showBoardBadges,a.ticker.showBoardBadges)},u=Array.isArray(e.hiddenBoards)?Array.from(new Set(e.hiddenBoards.map(g=>r(g)).filter(g=>Number.isInteger(g)&&g>0))):a.hiddenBoards.slice();return{enabled:o(e.enabled,a.enabled),filtersEnabled:o(e.filtersEnabled,a.filtersEnabled),defaultFilter:s,hiddenBoards:u,mineMode:l,solvedIncludesArchived:i,ticker:c}}function Zm(e,t){const a=Number(e);return Number.isFinite(a)?Math.min(10,Math.max(3,Math.trunc(a))):t}class An extends Error{constructor(t,a,o){super(t),this.status=a,this.body=o}}async function Xm(e){const t=Date.parse(e.from),a=Date.parse(e.to);if(!Number.isFinite(t)||!Number.isFinite(a)||t>a)return[];const o=e.includeCompleted!==!1,r=e.includeArchived!==!1,n=await Ai();if(n.length===0)return[];const s=new Map;n.forEach(i=>{i.id!=null&&s.set(i.id,{id:i.id,title:i.title||`Board ${i.id}`,color:Oi(i.color)})});const l=[];for(const i of n){if(i.id==null)continue;let c;const u=r?{details:1,archived:1,includeArchived:1}:{details:1};try{c=await br(yr(`/apps/deck/api/v1/boards/${i.id}/stacks`,u))}catch(g){if(Bi(g))continue;if(g instanceof An&&g.status===400){const f=r?{archived:1,includeArchived:1}:void 0;c=await br(yr(`/apps/deck/api/v1/boards/${i.id}/stacks`,f))}else throw g}const p=Ei(c);let w=[];if(r)try{const g=await br(yr(`/apps/deck/api/v1/boards/${i.id}/stacks/archived`));w=Ei(g)}catch{}const v=[...p.map(g=>({stack:g,forceArchived:!1})),...w.map(g=>({stack:g,forceArchived:!0}))];for(const{stack:g,forceArchived:f}of v){if(g.cards==null||g.id==null)continue;const m=g.title||`Stack ${g.id}`;for(const D of g.cards){const T=ev(D,s.get(i.id),{stackId:g.id,stackTitle:m},{forceArchived:f});if(!T)continue;if(!(T.dueTs!=null||T.doneTs!=null)){if(T.status==="archived"&&!r)continue;l.push({...T,match:"due"});continue}if(T.status==="archived"&&!r)continue;const _=T.dueTs!=null&&Li(T.dueTs,t,a),$=o&&T.doneTs!=null&&Li(T.doneTs,t,a),I=T.status!=="active",C=o&&($||I&&_);!(_&&!C)&&!C||l.push({...T,match:C?"completed":"due"})}}}return l.sort((i,c)=>{const u=Number.MAX_SAFE_INTEGER,p=i.match==="due"?i.dueTs??i.doneTs??u:i.doneTs??i.dueTs??u,w=c.match==="due"?c.dueTs??c.doneTs??u:c.doneTs??c.dueTs??u;return p!==w?p-w:i.boardId!==c.boardId?i.boardId-c.boardId:i.id-c.id})}async function Ai(){let e;try{e=await br(yr("/apps/deck/api/v1/boards",{details:0}))}catch(t){if(Bi(t))return[];throw t}return Qm(e)}function Qm(e){if(Array.isArray(e))return e;if(e&&typeof e=="object"){if(Array.isArray(e.data))return e.data;if(e.ocs&&Array.isArray(e.ocs.data))return e.ocs.data}return[]}function Ei(e){if(Array.isArray(e))return e;if(e&&typeof e=="object"){if(Array.isArray(e.data))return e.data;if(e.ocs&&Array.isArray(e.ocs.data))return e.ocs.data}return[]}function ev(e,t,a,o){var p,w,v,g;if(!e||typeof e!="object"||e.id==null||!a)return null;const r=En(e.duedate),n=En(e.done),s=En(e.createdAt??e.created),l=e.boardId||(t==null?void 0:t.id);if(l==null)return null;const i=!!e.archived||!!(o!=null&&o.forceArchived),c=i?"archived":n!=null?"done":"active",u=(t==null?void 0:t.title)||`Board ${l}`;return{id:e.id,title:e.title||`Card ${e.id}`,description:e.description||"",boardId:l,boardTitle:u,boardColor:t==null?void 0:t.color,stackTitle:a.stackTitle,stackId:a.stackId,due:r!=null?new Date(r).toISOString():void 0,dueTs:r??void 0,done:n!=null?new Date(n).toISOString():void 0,doneTs:n??void 0,archived:i,status:c,created:s!=null?new Date(s).toISOString():void 0,createdTs:s??void 0,createdBy:(p=vr(e.owner??e.createdBy??e.creator))==null?void 0:p.uid,createdByDisplay:(w=vr(e.owner??e.createdBy??e.creator))==null?void 0:w.displayName,doneBy:(v=vr(e.doneBy??e.completedBy??e.lastEditor))==null?void 0:v.uid,doneByDisplay:(g=vr(e.doneBy??e.completedBy??e.lastEditor))==null?void 0:g.displayName,labels:Array.isArray(e.labels)?e.labels.filter(f=>!!(f&&typeof f=="object")).map(f=>({id:f.id,title:f.title||`Label ${f.id??""}`.trim(),color:Oi(f.color)})):[],assignees:Array.isArray(e.assignedUsers)?e.assignedUsers.map(f=>tv(f)).filter(Boolean):[],match:"due"}}function tv(e){if(!e)return null;const t=e.participant;if(t&&typeof t=="object"){const a=typeof t.uid=="string"?t.uid:void 0,o=typeof t.displayname=="string"?t.displayname:void 0;if(a||o)return{id:e.id,uid:a,displayName:o}}return typeof t=="string"?{id:e.id,uid:t}:null}function vr(e){if(!e)return null;if(typeof e=="string"){const t=e.trim();return t?{uid:t}:null}if(typeof e=="object"){const t=typeof e.uid=="string"?e.uid:typeof e.participant=="string"?e.participant:void 0,a=typeof e.displayname=="string"?e.displayname:typeof e.id=="string"||typeof e.id=="number"?String(e.id):void 0;if(t||a)return{uid:t,displayName:a}}return null}function En(e){if(typeof e=="number"&&Number.isFinite(e))return e>1e12?Math.trunc(e):e*1e3;if(typeof e=="string"&&e.trim()!==""){const t=Date.parse(e);return Number.isFinite(t)?t:null}return null}function Li(e,t,a){return e>=t&&e<=a}function Oi(e){if(!e||typeof e!="string")return;const t=e.trim();if(t!=="")return t.startsWith("#")?t:`#${t}`}async function br(e){const t={Accept:"application/json","OCS-APIREQUEST":"true"},a=ov();a&&(t.requesttoken=a);const o=await fetch(e,{credentials:"same-origin",headers:t}),r=await o.text();if(!o.ok)throw new An(`Deck request failed (${o.status})`,o.status,r);return r?JSON.parse(r):null}function yr(e,t){var l,i,c;const a=e.startsWith("/")?e:`/${e}`,o=t?av(t):"",r=typeof window<"u"?window:{};if(r.OC&&typeof r.OC.generateUrl=="function"){const u=r.OC.generateUrl(a);return o?`${u}?${o}`:u}const n=r.OC&&(r.OC.webroot||((i=(l=r.OC).getRootPath)==null?void 0:i.call(l)))||r._oc_webroot||"",s=typeof((c=r.location)==null?void 0:c.origin)=="string"?r.location.origin:"";return n?o?`${n}${a}?${o}`:`${n}${a}`:s?o?`${s}${a}?${o}`:`${s}${a}`:o?`${a}?${o}`:a}function av(e){const t=new URLSearchParams;return Object.entries(e).forEach(([a,o])=>{o!=null&&t.append(a,String(o))}),t.toString()}function ov(){var a;const e=typeof window<"u"?window:{},t=((a=e.OC)==null?void 0:a.requestToken)||e.oc_requesttoken;return typeof t=="string"?t:void 0}function Bi(e){return e instanceof An&&(e.status===404||e.status===401||e.status===503)}function rv(e){var Er,ba;const{props:t,emit:a}=e,o=["intro","strategy","dashboard","calendars","categories","preferences","review"],r=Q(0),n=Q("total_only"),s=Q(t.initialDashboardMode||"standard"),l=Q([]),i=Q([]),c=Q({}),u=Q("auto"),p=Q(8),w=Q(null),v=Q(ot(t.initialDeckSettings??mr())),g=Q({...t.initialReportingConfig??hr()}),f=Q({showDayOffTrend:((ba=(Er=t.initialTargetsConfig)==null?void 0:Er.activityCard)==null?void 0:ba.showDayOffTrend)??!0}),m=Q([]),D=Q(!1),T=Q(""),M=[{id:"quick",title:"Quick",subtitle:"Minimal view, core widgets only",highlights:["Time summary","Targets","Activity","Deck cards lite"],widgets:"4 widgets"},{id:"standard",title:"Standard",subtitle:"Balanced set for most users",highlights:["Time/Targets/Balance","Activity & trends","Deck cards"],widgets:"67 widgets"},{id:"pro",title:"Pro",subtitle:"Full layout with extras",highlights:["All core widgets","Deck cards & summary","Notes + text block"],widgets:"8+ widgets"}],_=B(()=>{if(!v.value.enabled)return[];const X=new Set(v.value.hiddenBoards||[]);return m.value.filter(ie=>!X.has(ie.id))}),$=B(()=>{if(!v.value.enabled)return"Deck tab disabled";if(D.value)return"Deck tab enabled  loading boards";if(T.value)return"Deck tab enabled  open Deck to finish setup.";if(!m.value.length)return"Deck tab enabled  create a Deck board to see cards.";if(!_.value.length)return"Deck tab enabled  all boards hidden";if(_.value.length===m.value.length){const X=_.value.length;return X===1?"Showing 1 board":`Showing all ${X} boards`}return _.value.length===1?`Showing ${_.value[0].title}`:_.value.length===2?`Showing ${_.value[0].title} and ${_.value[1].title}`:`Showing ${_.value.length} boards`}),I=B(()=>{if(!g.value.enabled)return"Recap disabled";const X=g.value.schedule==="both"?"Weekly + monthly recap":g.value.schedule==="week"?"Weekly recap":"Monthly recap",ie=g.value.interim==="daily"?"Daily reminder":g.value.interim==="midweek"?"Mid-range reminder":"No interim reminder";return`${X}  ${ie}`}),C=Q(null),S=B(()=>u.value==="auto"?t.systemTheme==="dark"?"dark":"light":u.value),b=B(()=>t.systemTheme==="dark"?"dark":"light"),h=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],x=B(()=>i.value.reduce((X,ie)=>X+(Number.isFinite(ie.targetHours)?ie.targetHours:0),0)),E=B(()=>{const X=new Set,ie=ke=>{const it=me(ke);it&&X.add(it)};return t.calendars.forEach(ke=>ie(ke.color)),i.value.forEach(ke=>ie(ke.color)),h.forEach(ke=>X.add(ke)),Array.from(X)}),P=Ym(),q=B(()=>P.find(X=>X.id===n.value)??P[0]),O=B(()=>q.value.layers.categories),j=B(()=>t.closable!==!1),K=B(()=>o.filter(X=>X==="categories"?O.value:!0)),J=B(()=>K.value[Math.min(r.value,K.value.length-1)]),pe=B(()=>r.value+1),Y=B(()=>K.value.length),R=B(()=>t.saving===!0),ae=B(()=>t.snapshotSaving===!0),ve=B(()=>t.snapshotNotice??null),H="opsdash-onboarding-lock";function re(X){if(typeof document>"u")return;const ie=document.body;ie&&(X?(ie.classList.add(H),ie.dataset.opsdashOnboarding="1"):(ie.classList.remove(H),delete ie.dataset.opsdashOnboarding))}Be(()=>t.visible,X=>{X&&(be(),he()),re(X)},{immediate:!0}),At(()=>{typeof document<"u"&&document.addEventListener("click",ge),st().catch(X=>{console.error("[opsdash] deck board load failed",X)})}),rn(()=>{typeof document<"u"&&document.removeEventListener("click",ge),re(!1)});function be(){var ie,ke,it;r.value=0,n.value=t.initialStrategy??"total_only";const X=(ie=t.initialSelection)!=null&&ie.length?[...t.initialSelection]:t.calendars.map(ut=>ut.id);l.value=Array.from(new Set(X.filter(ut=>t.calendars.some(ts=>ts.id===ut)))),u.value=t.initialThemePreference??"auto",p.value=Fe(t.initialAllDayHours??8),w.value=He(t.initialTotalHours??null),v.value=ot(t.initialDeckSettings??mr()),g.value={...t.initialReportingConfig??hr()},f.value={showDayOffTrend:((it=(ke=t.initialTargetsConfig)==null?void 0:ke.activityCard)==null?void 0:it.showDayOffTrend)??!0},F(),O.value?w.value=He(x.value):w.value===null&&(w.value=40),W()}function F(){const X=Di(n.value,t.calendars,l.value);i.value=X.categories.map(ie=>({...ie})),c.value={...X.assignments},z(),L()}function z(){if(!O.value||!i.value.length){c.value={};return}const X=new Set(i.value.map(it=>it.id)),ie=i.value[0].id,ke={};l.value.forEach(it=>{const ut=c.value[it];ke[it]=X.has(ut)?ut:ie}),c.value=ke}const U=B(()=>t.calendars.filter(X=>l.value.includes(X.id))),ne=B(()=>Tn(n.value,t.calendars,l.value,O.value?{categories:i.value,assignments:c.value}:void 0)),ye=B(()=>q.value.title);function L(){if(O.value){w.value=He(x.value);return}w.value===null&&(w.value=He(t.initialTotalHours??40))}function W(){if(!t.startStep)return;const X=K.value.indexOf(t.startStep);X>=0&&(r.value=X)}function G(X){const ie=K.value.indexOf(X);ie>=0&&(r.value=ie)}function te(X){switch(X){case"intro":return"Intro";case"strategy":return"Modes";case"dashboard":return"Dashboard";case"calendars":return"Calendars";case"categories":return"Targets";case"preferences":return"Preferences";case"review":return"Review";default:return X}}Be(n,()=>{F(),r.value=Math.min(r.value,K.value.length-1)}),Be(K,X=>{r.value>=X.length&&(r.value=Math.max(X.length-1,0))}),Be(()=>t.startStep,W),Be(O,()=>{L()}),Be(x,X=>{O.value&&(w.value=He(X))}),Be(J,X=>{X!=="categories"&&he()}),Be(()=>t.visible,X=>{X||he()}),Be(l,()=>{z()},{deep:!0}),Be(i,()=>{z()},{deep:!0});function ee(){const X=`cat_${Date.now().toString(36)}_${i.value.length}`;i.value=[...i.value,{id:X,label:`Category ${i.value.length+1}`,targetHours:8,includeWeekend:!1,paceMode:"days_only"}],z()}function oe(X){i.value.length<=1||(i.value=i.value.filter(ie=>ie.id!==X),z())}function fe(X,ie){i.value=i.value.map(ke=>ke.id===X?{...ke,label:ie}:ke)}function de(X,ie){const ke=Number(ie),it=Number.isFinite(ke)?Math.max(0,Math.min(1e3,ke)):void 0;i.value=i.value.map(ut=>ut.id===X?{...ut,targetHours:it??ut.targetHours}:ut)}function ue(X,ie){i.value=i.value.map(ke=>ke.id===X?{...ke,includeWeekend:ie}:ke)}function se(X,ie){c.value={...c.value,[X]:ie}}function _e(X){if(C.value===X){he();return}C.value=X,Qt(()=>{const ie=document.getElementById(`onboarding-color-popover-${X}`);ie==null||ie.focus()})}function he(){C.value=null}function ge(X){const ie=X.target;ie!=null&&ie.closest("[data-color-popover]")||he()}function me(X){if(typeof X!="string")return null;const ie=X.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(ie))return null;if(ie.length===4){const[,ke,it,ut]=ie;return`#${ke}${ke}${it}${it}${ut}${ut}`.toUpperCase()}return ie.toUpperCase()}function Se(X){return me(X==null?void 0:X.color)??Ce.value}const Ce=B(()=>E.value[0]??"#2563EB");function Te(X,ie){i.value=i.value.map(ke=>ke.id===X?{...ke,color:ie}:ke)}function Oe(X,ie){const ke=me(ie);Te(X,ke??Ce.value)}function Ie(X,ie){const ke=me(ie);Te(X,ke??Ce.value),he()}function Fe(X){if(!Number.isFinite(X))return 8;const ie=Math.max(0,Math.min(24,X));return Math.round(ie*100)/100}function He(X){if(!Number.isFinite(X))return null;const ie=Math.max(0,Math.min(1e3,Number(X)));return Math.round(ie*100)/100}function ot(X){return JSON.parse(JSON.stringify(X))}async function st(){if(D.value=!0,T.value="",!(typeof window<"u"&&typeof window.OC<"u")){D.value=!1,m.value=[];return}try{const ie=await Ai();m.value=ie,T.value=""}catch{T.value="Unable to load Deck boards. Open Deck to create one.",m.value=[]}finally{D.value=!1}}function Pe(X){v.value={...v.value,enabled:X}}function mt(X){return!(v.value.hiddenBoards||[]).includes(X)}function Ye(X,ie){const ke=new Set(v.value.hiddenBoards||[]);ie?ke.delete(X):ke.add(X),v.value={...v.value,hiddenBoards:Array.from(ke).sort((it,ut)=>it-ut)}}function Xe(X,ie){i.value=i.value.map(ke=>ke.id===X?{...ke,paceMode:ie}:ke)}function So(X){if(O.value)return;const ie=Number(X.value);if(!Number.isFinite(ie)){w.value=null;return}w.value=He(ie)}function Kn(X){const ie=Number(X.value);p.value=Fe(Number.isFinite(ie)?ie:p.value)}function Tr(X){g.value={...g.value,enabled:X}}function qn(X){g.value={...g.value,schedule:X}}function Ea(X){g.value={...g.value,interim:X}}function Gn(X){g.value={...g.value,...X}}function Jn(X){f.value={...f.value,showDayOffTrend:X}}const Mr=B(()=>r.value>0),Dr=B(()=>r.value<K.value.length-1),$o=B(()=>{if(J.value==="strategy")return!n.value;if(J.value==="calendars")return l.value.length===0;if(J.value==="categories"&&O.value){if(!l.value.length||!i.value.length)return!0;const X=new Set(i.value.map(ie=>ie.id));if(l.value.some(ie=>!X.has(c.value[ie])))return!0}return J.value==="preferences"&&(!O.value&&(w.value===null||w.value<0)||p.value<0||p.value>24)});function Yn(){Dr.value&&!$o.value&&r.value++}function Zn(){Mr.value&&r.value--}function Ka(){a("skip")}function qa(){j.value&&a("close")}function Xn(){const X=Tn(n.value,t.calendars,l.value,O.value?{categories:i.value.map(ke=>({...ke})),assignments:{...c.value}}:void 0),ie=X.targetsConfig;if(ie.allDayHours=Fe(p.value),O.value){const ke=He(x.value);ke!=null&&(ie.totalHours=ke)}else if(w.value!=null){const ke=He(w.value);ke!=null&&(ie.totalHours=ke)}a("complete",{strategy:n.value,selected:[...l.value],targetsConfig:ie,groups:X.groups,targetsWeek:X.targetsWeek,targetsMonth:X.targetsMonth,themePreference:u.value,deckSettings:ot(v.value),reportingConfig:{...g.value},activityCard:{...f.value},dashboardMode:s.value})}function Ar(){const X=Tn(n.value,t.calendars,l.value,O.value?{categories:i.value.map(ke=>({...ke})),assignments:{...c.value}}:void 0),ie=X.targetsConfig;if(ie.allDayHours=Fe(p.value),O.value){const ke=He(x.value);ke!=null&&(ie.totalHours=ke)}else if(w.value!=null){const ke=He(w.value);ke!=null&&(ie.totalHours=ke)}return{targetsConfig:ie,groups:X.groups,targetsWeek:X.targetsWeek,targetsMonth:X.targetsMonth,selected:[...l.value]}}function To(){return{completed:!1,version:t.onboardingVersion,strategy:n.value,completed_at:"",dashboardMode:s.value}}function Qn(X){const ie=Ar(),ke=To();return X==="intro"?{onboarding:ke}:X==="strategy"?{onboarding:ke,targets_config:ie.targetsConfig,groups:ie.groups,targets_week:ie.targetsWeek,targets_month:ie.targetsMonth}:X==="dashboard"?{onboarding:ke,dashboardMode:s.value}:X==="calendars"?{cals:ie.selected}:X==="categories"?{targets_config:ie.targetsConfig,groups:ie.groups,targets_week:ie.targetsWeek,targets_month:ie.targetsMonth}:X==="preferences"?{targets_config:ie.targetsConfig,theme_preference:u.value,deck_settings:ot(v.value),reporting_config:{...g.value},targets_config_activity:{...f.value}}:{cals:ie.selected,targets_config:ie.targetsConfig,groups:ie.groups,targets_week:ie.targetsWeek,targets_month:ie.targetsMonth,theme_preference:u.value,deck_settings:ot(v.value),reporting_config:{...g.value},targets_config_activity:{...f.value},onboarding:ke}}function es(X,ie){if(ie.checked){l.value.includes(X)||(l.value=[...l.value,X]);return}l.value=l.value.filter(ke=>ke!==X)}return{stepOrder:o,stepIndex:r,selectedStrategy:n,dashboardMode:s,localSelection:l,categories:i,assignments:c,themePreference:u,allDayHoursInput:p,totalHoursInput:w,deckSettingsDraft:v,reportingDraft:g,activityDraft:f,deckBoards:m,deckBoardsLoading:D,deckBoardsError:T,dashboardPresets:M,deckVisibleBoards:_,deckReviewSummary:$,reportingSummary:I,openColorId:C,previewTheme:S,systemThemeLabel:b,categoryTotalHours:x,categoryColorPalette:E,strategies:P,categoriesEnabled:O,isClosable:j,enabledSteps:K,currentStep:J,stepNumber:pe,totalSteps:Y,saving:R,snapshotSaving:ae,snapshotNotice:ve,selectedCalendars:U,draft:ne,strategyTitle:ye,applyStartStep:W,goToStep:G,stepLabel:te,addCategory:ee,removeCategory:oe,setCategoryLabel:fe,setCategoryTarget:de,toggleCategoryWeekend:ue,assignCalendar:se,toggleColorPopover:_e,closeColorPopover:he,resolvedColor:Se,applyColor:Ie,onColorInput:Oe,setDeckEnabled:Pe,isDeckBoardVisible:mt,toggleDeckBoard:Ye,setCategoryPaceMode:Xe,onTotalHoursChange:So,onAllDayHoursChange:Kn,setReportingEnabled:Tr,setReportingSchedule:qn,setReportingInterim:Ea,updateReporting:Gn,setActivityDayOff:Jn,canGoBack:Mr,canGoNext:Dr,nextDisabled:$o,nextStep:Yn,prevStep:Zn,handleSkip:Ka,handleClose:qa,emitComplete:Xn,toggleCalendar:es,resetWizard:be,buildStepPayload:Qn}}const nv={key:0,class:"onboarding-overlay",role:"dialog","aria-modal":"true"},sv={class:"onboarding-header"},lv={class:"onboarding-title"},iv={class:"subtitle"},cv={class:"onboarding-actions"},dv=["disabled"],uv=["disabled"],fv={class:"onboarding-step-nav","aria-label":"Onboarding steps"},gv=["disabled","onClick"],pv={class:"onboarding-body"},hv={key:0,class:"onboarding-step"},mv={key:1,class:"onboarding-step"},vv={key:2,class:"onboarding-step"},bv={key:3,class:"onboarding-step"},yv={key:4,class:"onboarding-step"},wv={key:5,class:"onboarding-step"},kv={key:6,class:"onboarding-step"},_v={class:"onboarding-footer"},xv=Me({__name:"OnboardingWizard",props:{visible:{type:Boolean},calendars:{},initialSelection:{},initialStrategy:{},startStep:{},onboardingVersion:{},saving:{type:Boolean},closable:{type:Boolean},initialThemePreference:{},systemTheme:{},initialAllDayHours:{},initialTotalHours:{},initialDeckSettings:{},initialReportingConfig:{},hasExistingConfig:{type:Boolean},snapshotSaving:{type:Boolean},snapshotNotice:{},initialDashboardMode:{},initialTargetsConfig:{}},emits:["close","skip","complete","save-step","save-current-config"],setup(e,{emit:t}){const a=e,o=t,{stepNumber:r,totalSteps:n,enabledSteps:s,currentStep:l,isClosable:i,saving:c,stepLabel:u,goToStep:p,handleClose:w,handleSkip:v,canGoBack:g,canGoNext:f,nextDisabled:m,prevStep:D,nextStep:T,emitComplete:M,themePreference:_,systemThemeLabel:$,previewTheme:I,totalHoursInput:C,categoryTotalHours:S,categoriesEnabled:b,onTotalHoursChange:h,allDayHoursInput:x,onAllDayHoursChange:E,deckSettingsDraft:P,setDeckEnabled:q,deckBoards:O,deckBoardsLoading:j,deckBoardsError:K,isDeckBoardVisible:J,toggleDeckBoard:pe,reportingDraft:Y,setReportingEnabled:R,setReportingSchedule:ae,setReportingInterim:ve,updateReporting:H,activityDraft:re,setActivityDayOff:be,dashboardMode:F,dashboardPresets:z,strategies:U,selectedStrategy:ne,localSelection:ye,toggleCalendar:L,categories:W,selectedCalendars:G,assignments:te,addCategory:ee,removeCategory:oe,setCategoryLabel:fe,setCategoryTarget:de,toggleCategoryWeekend:ue,assignCalendar:se,openColorId:_e,toggleColorPopover:he,closeColorPopover:ge,categoryColorPalette:me,resolvedColor:Se,applyColor:Ce,onColorInput:Te,draft:Oe,strategyTitle:Ie,deckReviewSummary:Fe,deckVisibleBoards:He,reportingSummary:ot,buildStepPayload:st}=rv({props:a,emit:o});function Pe(){o("save-step",st(l.value))}return(mt,Ye)=>(y(),Re(Yu,{name:"onboarding-fade"},{default:Ue(()=>[mt.visible?(y(),k("div",nv,[d("div",{class:"onboarding-backdrop",onClick:Ye[0]||(Ye[0]=(...Xe)=>A(w)&&A(w)(...Xe))}),d("div",{class:"onboarding-panel",onClick:Ye[3]||(Ye[3]=Qe(()=>{},["stop"]))},[d("header",sv,[d("div",lv,[Ye[4]||(Ye[4]=d("h2",null,"Welcome to Opsdash",-1)),d("p",iv,"Step "+N(A(r))+" of "+N(A(n)),1)]),d("div",cv,[d("button",{type:"button",class:"skip-link",onClick:Ye[1]||(Ye[1]=(...Xe)=>A(v)&&A(v)(...Xe)),disabled:A(c)},"Maybe later",8,dv),A(i)?(y(),k("button",{key:0,type:"button",class:"close-btn",disabled:A(c),onClick:Ye[2]||(Ye[2]=(...Xe)=>A(w)&&A(w)(...Xe)),"aria-label":"Close onboarding"},"  ",8,uv)):V("",!0)])]),d("nav",fv,[(y(!0),k(le,null,we(A(s),Xe=>(y(),k("button",{key:Xe,type:"button",class:Ee(["step-pill",{active:Xe===A(l)}]),disabled:A(c),onClick:So=>A(p)(Xe)},N(A(u)(Xe)),11,gv))),128))]),d("main",pv,[A(l)==="intro"?(y(),k("section",hv,[$e(fh,{"has-existing-config":a.hasExistingConfig??!1,"snapshot-saving":a.snapshotSaving??!1,saving:A(c),"snapshot-notice":a.snapshotNotice??null,"on-save-current-config":()=>o("save-current-config")},null,8,["has-existing-config","snapshot-saving","saving","snapshot-notice","on-save-current-config"])])):A(l)==="preferences"?(y(),k("section",mv,[$e(Qh,{"theme-preference":A(_),"system-theme-label":A($),"preview-theme":A(I),"set-theme-preference":Xe=>_.value=Xe,"total-hours-input":A(C),"category-total-hours":A(S),"categories-enabled":A(b),"on-total-hours-change":A(h),"all-day-hours-input":A(x),"on-all-day-hours-change":A(E),"deck-settings-draft":A(P),"set-deck-enabled":A(q),"deck-boards":A(O),"deck-boards-loading":A(j),"deck-boards-error":A(K),"is-deck-board-visible":A(J),"toggle-deck-board":A(pe),"reporting-draft":A(Y),"set-reporting-enabled":A(R),"set-reporting-schedule":A(ae),"set-reporting-interim":A(ve),"update-reporting":A(H),"activity-draft":A(re),"set-activity-day-off":A(be)},null,8,["theme-preference","system-theme-label","preview-theme","set-theme-preference","total-hours-input","category-total-hours","categories-enabled","on-total-hours-change","all-day-hours-input","on-all-day-hours-change","deck-settings-draft","set-deck-enabled","deck-boards","deck-boards-loading","deck-boards-error","is-deck-board-visible","toggle-deck-board","reporting-draft","set-reporting-enabled","set-reporting-schedule","set-reporting-interim","update-reporting","activity-draft","set-activity-day-off"])])):A(l)==="dashboard"?(y(),k("section",vv,[$e(om,{"dashboard-mode":A(F),"set-dashboard-mode":Xe=>F.value=Xe,"dashboard-presets":A(z)},null,8,["dashboard-mode","set-dashboard-mode","dashboard-presets"])])):A(l)==="strategy"?(y(),k("section",bv,[$e(lm,{strategies:A(U),"selected-strategy":A(ne),"set-selected-strategy":Xe=>ne.value=Xe},null,8,["strategies","selected-strategy","set-selected-strategy"])])):A(l)==="calendars"?(y(),k("section",yv,[$e(um,{calendars:mt.calendars,"local-selection":A(ye),"toggle-calendar":A(L)},null,8,["calendars","local-selection","toggle-calendar"])])):A(l)==="categories"?(y(),k("section",wv,[$e(Im,{"categories-enabled":A(b),categories:A(W),"category-total-hours":A(S),"selected-calendars":A(G),assignments:A(te),"add-category":A(ee),"remove-category":A(oe),"set-category-label":A(fe),"set-category-target":A(de),"toggle-category-weekend":A(ue),"assign-calendar":A(se),"open-color-id":A(_e),"toggle-color-popover":A(he),"close-color-popover":A(ge),"category-color-palette":A(me),"resolved-color":A(Se),"apply-color":A(Ce),"on-color-input":A(Te)},null,8,["categories-enabled","categories","category-total-hours","selected-calendars","assignments","add-category","remove-category","set-category-label","set-category-target","toggle-category-weekend","assign-calendar","open-color-id","toggle-color-popover","close-color-popover","category-color-palette","resolved-color","apply-color","on-color-input"])])):A(l)==="review"?(y(),k("section",kv,[$e(Rm,{"strategy-title":A(Ie),"selected-calendars":A(G),"draft-targets-categories":A(Oe).targetsConfig.categories,"draft-total-hours":A(Oe).targetsConfig.totalHours,"category-total-hours":A(S),"deck-review-summary":A(Fe),"deck-enabled":A(P).enabled,"deck-visible-boards":A(He),"reporting-enabled":A(Y).enabled,"reporting-summary":A(ot),"show-day-off-trend":A(re).showDayOffTrend},null,8,["strategy-title","selected-calendars","draft-targets-categories","draft-total-hours","category-total-hours","deck-review-summary","deck-enabled","deck-visible-boards","reporting-enabled","reporting-summary","show-day-off-trend"])])):V("",!0)]),d("footer",_v,[A(g)?(y(),Re(A(rt),{key:0,type:"tertiary",disabled:A(c),onClick:A(D)},{default:Ue(()=>[...Ye[5]||(Ye[5]=[De("Back",-1)])]),_:1},8,["disabled","onClick"])):V("",!0),$e(A(rt),{type:"tertiary",disabled:A(c)||A(m),onClick:Pe},{default:Ue(()=>[...Ye[6]||(Ye[6]=[De("Save step",-1)])]),_:1},8,["disabled"]),A(f)?(y(),Re(A(rt),{key:1,type:"primary",disabled:A(m)||A(c),onClick:A(T)},{default:Ue(()=>[...Ye[7]||(Ye[7]=[De("Continue",-1)])]),_:1},8,["disabled","onClick"])):(y(),Re(A(rt),{key:2,type:"primary",disabled:A(c),onClick:A(M)},{default:Ue(()=>[...Ye[8]||(Ye[8]=[De(" Start dashboard ",-1)])]),_:1},8,["disabled","onClick"]))])])])):V("",!0)]),_:1}))}}),Cv=["onKeydown"],Sv={class:"shortcuts-body"},$v={class:"shortcut-label"},Tv={key:0},Mv={class:"shortcut-combo","aria-hidden":"true"},Dv={class:"shortcuts-footer"},Av=ze(Me({__name:"KeyboardShortcutsModal",props:{visible:{type:Boolean},groups:{}},emits:["close"],setup(e,{emit:t}){const a=e,o=t,r=Q(null);function n(){o("close")}return Be(()=>a.visible,s=>{s&&Qt(()=>{var l;(l=r.value)==null||l.focus()}).catch(()=>{})}),(s,l)=>s.visible?(y(),k("div",{key:0,class:"shortcuts-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"opsdash-shortcuts-title",onClick:Qe(n,["self"])},[d("div",{ref_key:"panelRef",ref:r,class:"shortcuts-panel",tabindex:"-1",onKeydown:ja(Qe(n,["prevent"]),["esc"])},[d("header",{class:"shortcuts-header"},[l[0]||(l[0]=d("div",{class:"shortcuts-title"},[d("h2",{id:"opsdash-shortcuts-title"},"Keyboard Shortcuts"),d("p",{class:"shortcuts-hint"},"Press Esc to close or ? to reopen.")],-1)),d("button",{type:"button",class:"shortcuts-close","aria-label":"Close shortcuts overlay",onClick:n},"  ")]),d("div",Sv,[(y(!0),k(le,null,we(s.groups,i=>(y(),k("section",{key:i.id,class:"shortcuts-group"},[d("h3",null,N(i.title),1),d("ul",null,[(y(!0),k(le,null,we(i.items,c=>(y(),k("li",{key:c.id},[d("span",$v,[De(N(c.label)+" ",1),c.description?(y(),k("small",Tv,N(c.description),1)):V("",!0)]),d("span",Mv,[(y(!0),k(le,null,we(c.combo,(u,p)=>(y(),k("kbd",{key:p},N(u),1))),128))])]))),128))])]))),128))]),d("footer",Dv,[$e(A(rt),{type:"primary",size:"small",onClick:n},{default:Ue(()=>[...l[1]||(l[1]=[De(" Close ",-1)])]),_:1})])],40,Cv)])):V("",!0)}}),[["__scopeId","data-v-f8126e32"]]),Ev={key:0,class:"deck-panel__header"},Lv={class:"deck-panel__heading"},Ov={class:"deck-panel__title"},Bv={key:0,class:"deck-panel__subtitle"},Nv={key:1,class:"deck-panel__subtitle"},Iv={class:"deck-panel__actions"},Pv={key:0,class:"deck-panel__count"},Fv=["href"],Hv=["disabled"],Wv={key:1,class:"deck-panel__filters",role:"group","aria-label":"Deck card filters"},zv=["aria-pressed","disabled","draggable","onClick","onDragstart","onDragover","onDrop"],Rv={key:0,class:"deck-filter-count"},jv={key:0,class:"deck-panel__loading"},Uv={key:0,class:"deck-panel__error"},Vv=["data-idx"],Kv={class:"deck-card__status-row"},qv={key:0,class:"deck-card__time"},Gv={key:1,class:"deck-card__time"},Jv={class:"deck-card__title"},Yv={class:"deck-card__meta"},Zv={class:"deck-card__stack"},Xv={key:0,class:"deck-card__labels"},Qv={key:1,class:"deck-card__assignees"},Ni=ze(Me({__name:"DeckCardsPanel",props:{cards:{},loading:{type:Boolean},rangeLabel:{},lastFetchedAt:{},deckUrl:{},error:{},filter:{},canFilterMine:{type:Boolean},filtersEnabled:{type:Boolean},filterOptions:{},orderableValues:{},editable:{type:Boolean},allowMineOverride:{type:Boolean},autoScroll:{type:Boolean},intervalSeconds:{},showCount:{type:Boolean},title:{},cardBg:{},showHeader:{type:Boolean}},emits:["refresh","update:filter","reorder:filters"],setup(e,{emit:t}){const a=e,o=t,r=B(()=>a.filter??"all"),n=B(()=>a.title||"Deck cards"),s=B(()=>({background:a.cardBg||void 0})),l=B(()=>a.showHeader!==!1),i=B(()=>a.filtersEnabled!==!1&&u.value.length>1),c=B(()=>i.value&&a.canFilterMine!==!1&&a.allowMineOverride!==!1),u=B(()=>a.filterOptions&&a.filterOptions.length?a.filterOptions.map(P=>({...P,mine:!!P.mine})):[{value:"all",label:"All cards",mine:!1},{value:"open_all",label:"Open  All",mine:!1},{value:"open_mine",label:"Open  Mine",mine:!0},{value:"done_all",label:"Done  All",mine:!1},{value:"done_mine",label:"Done  Mine",mine:!0},{value:"archived_all",label:"Archived  All",mine:!1},{value:"archived_mine",label:"Archived  Mine",mine:!0},{value:"due_all",label:"Due  All",mine:!1},{value:"due_mine",label:"Due  Mine",mine:!0},{value:"due_today_all",label:"Due today  All",mine:!1},{value:"due_today_mine",label:"Due today  Mine",mine:!0}]),p=B(()=>a.orderableValues&&a.orderableValues.length?a.orderableValues:u.value.map(P=>P.value).filter(P=>!String(P).startsWith("custom_"))),w=Q(null),v=Q(null),g=Q(null),f=Q(null),m=Q(0),D=B(()=>{const P=Math.max(3,Math.min(10,Number(a.intervalSeconds??5)))*1e3;return Number.isFinite(P)?P:5e3});Be(()=>a.autoScroll,()=>{I(),C()}),Be(()=>a.cards,()=>{m.value=0,I(),C()},{deep:!0}),At(()=>{C()}),Nt(()=>{I()});function T(P,q){!a.editable||!p.value.includes(P)||(w.value=P,q.dataTransfer&&(q.dataTransfer.effectAllowed="move",q.dataTransfer.setData("text/plain",String(P))))}function M(P){!a.editable||!w.value||p.value.includes(P)}function _(P){if(!a.editable||!w.value||!p.value.includes(P))return;const q=p.value.slice(),O=q.indexOf(w.value),j=q.indexOf(P);if(O<0||j<0||O===j){w.value=null;return}if(q.splice(O,1),q.splice(j,0,w.value),w.value=null,q.length){const K=u.value.map(pe=>pe.value).filter(pe=>String(pe).startsWith("custom_")),J=[...q,...K];a.orderableValues&&a.orderableValues.length?o("reorder:filters",q):o("reorder:filters",J)}}function $(){w.value=null}function I(){f.value&&(clearInterval(f.value),f.value=null)}function C(){!a.autoScroll||(a.cards||[]).length<=1||(I(),f.value=window.setInterval(()=>{const P=(a.cards||[]).length;m.value=(m.value+1)%P,S(m.value)},D.value))}function S(P){if(!v.value||!g.value)return;const q=g.value.querySelector(`[data-idx="${P}"]`);if(!q)return;const O=q.offsetTop-g.value.offsetTop;v.value.scrollTo({top:O,behavior:"smooth"})}const b=new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}),h=B(()=>{if(!a.lastFetchedAt)return"";try{return b.format(new Date(a.lastFetchedAt))}catch{return""}});function x(P){try{return b.format(new Date(P))}catch{return P}}function E(P){return P==="done"?"Done":P==="archived"?"Archived":"Active"}return(P,q)=>(y(),k("div",{class:"deck-panel",style:Le(s.value)},[l.value?(y(),k("div",Ev,[d("div",Lv,[d("div",Ov,N(n.value),1),h.value?(y(),k("div",Bv," Updated "+N(h.value),1)):(y(),k("div",Nv," Showing "+N(P.rangeLabel.toLowerCase())+" selection ",1))]),d("div",Iv,[P.showCount?(y(),k("div",Pv,N(P.cards.length)+" cards",1)):V("",!0),P.deckUrl?(y(),k("a",{key:1,class:"deck-panel__link",href:P.deckUrl,target:"_blank",rel:"noopener"}," Open Deck  ",8,Fv)):V("",!0),d("button",{type:"button",class:"deck-panel__refresh",onClick:q[0]||(q[0]=O=>P.$emit("refresh")),disabled:P.loading}," Refresh ",8,Hv)])])):V("",!0),i.value?(y(),k("div",Wv,[(y(!0),k(le,null,we(u.value,O=>(y(),k("button",{key:O.value,type:"button",class:Ee(["deck-filter-btn",{active:r.value===O.value,"is-draggable":a.editable&&p.value.includes(O.value)}]),"aria-pressed":r.value===O.value,disabled:O.mine&&!c.value,draggable:a.editable&&p.value.includes(O.value),onClick:j=>P.$emit("update:filter",O.value),onDragstart:j=>T(O.value,j),onDragover:Qe(j=>M(O.value),["prevent"]),onDrop:Qe(j=>_(O.value),["prevent"]),onDragend:$},[d("span",null,N(O.label),1),typeof O.count=="number"?(y(),k("span",Rv,N(O.count),1)):V("",!0)],42,zv))),128))])):V("",!0),d("div",{class:"deck-panel__body",ref_key:"bodyEl",ref:v},[P.loading?(y(),k("div",jv,[$e(A(fr),{size:20}),q[1]||(q[1]=d("span",null,"Loading Deck cards",-1))])):(y(),k(le,{key:1},[P.error?(y(),k("div",Uv,N(P.error),1)):P.cards.length?(y(),k("ul",{key:2,class:"deck-card-list",ref_key:"listEl",ref:g},[(y(!0),k(le,null,we(P.cards,(O,j)=>(y(),k("li",{key:O.id,class:"deck-card","data-idx":j},[d("div",Kv,[d("span",{class:Ee(["deck-card__status",O.status])},N(E(O.status)),3),O.match==="due"&&O.due?(y(),k("span",qv," Due "+N(x(O.due)),1)):O.done?(y(),k("span",Gv," Completed "+N(x(O.done)),1)):V("",!0)]),d("div",Jv,N(O.title),1),d("div",Yv,[d("span",{class:"deck-card__board",style:Le({borderColor:O.boardColor||"var(--color-primary)"})},N(O.boardTitle),5),d("span",Zv,N(O.stackTitle),1)]),O.labels.length?(y(),k("div",Xv,[(y(!0),k(le,null,we(O.labels,K=>(y(),k("span",{key:`deck-label-${O.id}-${K.id??K.title}`,class:"deck-card__label",style:Le({background:K.color||"var(--color-background-darker)"})},N(K.title),5))),128))])):V("",!0),O.assignees.length?(y(),k("div",Qv,[q[2]||(q[2]=d("span",{class:"deck-card__assignees-label"},"Assigned:",-1)),(y(!0),k(le,null,we(O.assignees,K=>(y(),k("span",{key:`deck-assignee-${O.id}-${K.uid??K.id}`,class:"deck-card__assignee"},N(K.displayName||K.uid),1))),128))])):V("",!0)],8,Vv))),128))],512)):(y(),Re(A(ur),{key:1,name:"No Deck cards",description:`No cards matched this ${P.rangeLabel.toLowerCase()}. Confirm Deck due dates or rerun seeding.`},null,8,["description"]))],64))],512)],4))}}),[["__scopeId","data-v-f53d016f"]]),e2="modulepreload",t2=function(e){return"/"+e},a2={},tt=function(t,a,o){let r=Promise.resolve();function n(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return r.then(s=>{for(const l of s||[])l.status==="rejected"&&n(l.reason);return t().catch(n)})};function eb(e,t){const a=JSON.parse(JSON.stringify(e||{}));return t==="month"&&(a.totalHours=yo(a.totalHours??0),a.categories=(a.categories||[]).map(o=>({...o,targetHours:yo(o.targetHours??0)}))),a}function tb(e){return{...e,ui:{...(e==null?void 0:e.ui)??{}}}}function ab(e,t){try{return xi({config:e,stats:t.stats,byDay:t.byDay||[],byCal:t.byCal||[],groupsById:t.groupsById||{},range:t.rangeMode==="month"?"month":"week",from:t.from||"",to:t.to||""})}catch(a){return console.error("[opsdash] targets widget local summary failed",a),_i(e)}}function at(e,t){if(!t)return e;const a=String(t).trim();return a?`${a}  ${e}`:e}function ko(e,t){if(t!=null&&t!==""){const o=Number(t);if(Number.isFinite(o))return o}const a=Number(e);return Number.isFinite(a)?a:void 0}function Ii(e){switch(e){case"targets":return{title:"Targets"};case"activity":return{title:"Activity & Schedule"};case"balance":return{title:"Balance"};case"mix":return{title:"Category mix trend"};case"dayoff":return{title:"Days off trend"};case"deck":return{title:"Deck summary"};case"notes":return{title:"Notes"};default:return{}}}function ob(e,t={},a){if(!e)return[];if(e==="activity"){const n=(a==null?void 0:a.activitySummary)||{},s=p=>`${Number(p??0).toFixed(1)}%`,l=(p,w)=>[p,w].filter(Boolean).join(" / "),i=p=>`${Number(p??0).toFixed(1)}h`,c=p=>p?String(p):"";return[{opt:"weekendShare",key:"weekend",label:"Weekend share",value:s(n.weekendShare)},{opt:"eveningShare",key:"evening",label:"Evening share",value:s(n.eveningShare)},{opt:"earliestLatest",key:"earliest",label:"Earliest/Late times",value:l(n.typicalStart,n.typicalEnd)},{opt:"overlaps",key:"overlaps",label:"Overlaps",value:String(n.overlapEvents??"")},{opt:"longest",key:"longest",label:"Longest session",value:i(n.longestSession)},{opt:"lastDayOff",key:"lastDayOff",label:"Last day off",value:c(n.lastDayOff)}].filter(p=>t[p.opt]!==!1)}const r={"":[],targets:[{key:"status",label:"Status",value:"Pace / Delta / Forecast"},{key:"today",label:"Today",value:"Today overlay"},{key:"legend",label:"Legend",value:"Category breakdown"}],activity:[],balance:[{key:"index",label:"Index",value:"Balance index value"},{key:"trend",label:"Trend",value:"Trend history/heat"},{key:"notes",label:"Notes",value:"Pinned notes snippet"}],mix:[{key:"badge",label:"Badge",value:"Balance badge"},{key:"history",label:"History",value:"Category mix tiles"}],dayoff:[{key:"header",label:"Trend header",value:"Period lookback"},{key:"tiles",label:"Trend tiles",value:"Days off per week"}],deck:[{key:"header",label:"Deck header",value:"Range + Ticker"},{key:"buckets",label:"Buckets",value:"Open/Done/Archived counts"},{key:"empty",label:"Empty states",value:"No cards"}],notes:[{key:"labels",label:"Labels",value:"Prev/Current labels"},{key:"content",label:"Content",value:"Prev/Current note texts"}]}[e]||[];return t.include?r:r.length?[r[0]]:[]}function Pi(e){return Array.isArray(e)?Array.from(new Set(e.map(t=>Number(t)).filter(t=>Number.isInteger(t)&&t>0))):typeof e=="string"?Pi(e.split(",")):[]}function Fi(e){return Array.isArray(e)?e.map(t=>String(t).trim()).filter(Boolean):typeof e=="string"?e.split(",").map(t=>t.trim()).filter(Boolean):["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"]}function St(e){switch(e){case"all":return"All cards";case"mine":return"Mine (any status)";case"open_all":return"Open  All";case"open_mine":return"Open  Mine";case"done_all":return"Done  All";case"done_mine":return"Done  Mine";case"archived_all":return"Archived  All";case"archived_mine":return"Archived  Mine";case"due_all":return"Due  All";case"due_mine":return"Due  Mine";case"due_today_all":return"Due today  All";case"due_today_mine":return"Due today  Mine";case"created_today_all":return"Created today  All";case"created_today_mine":return"Created today  Mine";case"created_range_all":return"Created this range  All";case"created_range_mine":return"Created this range  Mine";default:return e}}const rb=et(()=>tt(()=>Promise.resolve().then(()=>Jw),void 0).then(e=>e.default)),Hi="Activity & Schedule",nb={component:rb,defaultLayout:{width:"half",height:"m",order:40},label:"Activity (old)",baseTitle:Hi,configurable:!0,controls:[{key:"showBadges",label:"Show badges",type:"toggle"},{key:"showTrends",label:"Show trend tiles",type:"toggle"},{key:"showMeta",label:"Show meta rows",type:"toggle"}],buildProps:(e,t)=>{var a,o,r,n,s,l;return{summary:t.activitySummary,config:t.activityConfig,dayOffTrend:t.activityDayOffTrend,trendUnit:t.activityTrendUnit,dayOffLookback:t.activityDayOffLookback,rangeLabel:t.rangeLabel,rangeMode:t.rangeMode,showHeader:((a=e.options)==null?void 0:a.showHeader)!==!1,showBadges:((o=e.options)==null?void 0:o.showBadges)!==!1,showTrends:((r=e.options)==null?void 0:r.showTrends)!==!1,showMeta:((n=e.options)==null?void 0:n.showMeta)!==!1,title:at(Hi,(s=e.options)==null?void 0:s.titlePrefix),cardBg:(l=e.options)==null?void 0:l.cardBg}}},sb=et(()=>tt(()=>Promise.resolve().then(()=>_k),void 0).then(e=>e.default)),Wi="Activity & Balance",lb={component:sb,defaultLayout:{width:"half",height:"m",order:30},label:"Balance (old)",baseTitle:Wi,configurable:!0,defaultOptions:{lookbackWeeks:4},controls:[{key:"showTrend",label:"Show trend history",type:"toggle"},{key:"showRelations",label:"Show relations",type:"toggle"},{key:"showWarnings",label:"Show warnings",type:"toggle"},{key:"lookbackWeeks",label:"Trend lookback (weeks)",type:"number",min:1,max:12,step:1}],buildProps:(e,t)=>{var a,o,r,n,s,l,i;return{overview:t.balanceOverview,rangeLabel:t.rangeLabel,rangeMode:t.rangeMode,lookbackWeeks:((a=e.options)==null?void 0:a.lookbackWeeks)??4,config:t.balanceConfig??{showNotes:!1},note:t.balanceNote,activitySummary:t.activitySummary,activityConfig:t.activityConfig,activityDayOffTrend:t.activityDayOffTrend,activityTrendUnit:t.activityTrendUnit,activityDayOffLookback:t.activityDayOffLookback,showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,showTrend:((r=e.options)==null?void 0:r.showTrend)!==!1,showRelations:((n=e.options)==null?void 0:n.showRelations)!==!1,showWarnings:((s=e.options)==null?void 0:s.showWarnings)!==!1,title:at(Wi,(l=e.options)==null?void 0:l.titlePrefix),cardBg:(i=e.options)==null?void 0:i.cardBg}}},ib=et(()=>tt(()=>Promise.resolve().then(()=>Pk),void 0).then(e=>e.default)),zi="Balance Index",cb={component:ib,defaultLayout:{width:"half",height:"s",order:32},label:"Balance Index",baseTitle:zi,configurable:!0,supportsColors:!0,defaultOptions:(()=>{const e=Ua();return{showTrend:!0,showMessages:!0,showConfig:!0,indexBasis:e.index.basis,noticeAbove:e.thresholds.noticeAbove,noticeBelow:e.thresholds.noticeBelow,warnAbove:e.thresholds.warnAbove,warnBelow:e.thresholds.warnBelow,warnIndex:e.thresholds.warnIndex,lookbackWeeks:e.trend.lookbackWeeks,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1}})(),controls:[{key:"showConfig",label:"Show config summary",type:"toggle"},{key:"showTrend",label:"Show trend",type:"toggle"},{key:"showMessages",label:"Show messages",type:"toggle"},{key:"lookbackWeeks",label:"Trend lookback (weeks)",type:"number",min:1,max:12,step:1},{key:"messageDensity",label:"Messages shown",type:"select",options:[{value:"few",label:"Few"},{value:"normal",label:"Normal"},{value:"many",label:"Many"}]},{key:"indexBasis",label:"Index basis",type:"select",options:[{value:"off",label:"Disabled"},{value:"category",label:"Total categories"},{value:"calendar",label:"Total calendars"},{value:"both",label:"Categories + calendars"}]},{key:"noticeAbove",label:"Notice above target",type:"number",min:0,max:1,step:.01},{key:"noticeBelow",label:"Notice below target",type:"number",min:0,max:1,step:.01},{key:"warnAbove",label:"Warn above target",type:"number",min:0,max:1,step:.01},{key:"warnBelow",label:"Warn below target",type:"number",min:0,max:1,step:.01},{key:"warnIndex",label:"Warn index",type:"number",min:0,max:1,step:.01},{key:"trendColor",label:"Trend color",type:"color"},{key:"showCurrent",label:"Show current period",type:"toggle"},{key:"reverseTrend",label:"Oldest first (reverse)",type:"toggle"},{key:"labelMode",label:"Trend label",type:"select",options:[{value:"date",label:"Date range"},{value:"period",label:"Week/Month"},{value:"offset",label:"Offset only"}]}],buildProps:(e,t)=>{var f,m,D,T,M,_,$,I,C,S,b,h,x,E,P,q,O,j,K,J,pe,Y,R,ae,ve,H,re,be,F,z,U,ne,ye,L,W;const a=t.balanceConfig?JSON.parse(JSON.stringify(t.balanceConfig)):Ua(),o=Ua(),r=((f=e.options)==null?void 0:f.showBadge)!==!1,n=((m=e.options)==null?void 0:m.showTrend)!==!1,s=((D=e.options)==null?void 0:D.showMessages)??((T=a.ui)==null?void 0:T.showMessages)??!0,l=((M=e.options)==null?void 0:M.messageDensity)||"normal",i=l==="few"?1:l==="many"?1/0:3,c=Number.isFinite((_=e.options)==null?void 0:_.lookbackWeeks)?Number(($=e.options)==null?void 0:$.lookbackWeeks):((I=o.trend)==null?void 0:I.lookbackWeeks)??4,u={noticeAbove:ko((C=a==null?void 0:a.thresholds)==null?void 0:C.noticeAbove,(S=e.options)==null?void 0:S.noticeAbove),noticeBelow:ko((b=a==null?void 0:a.thresholds)==null?void 0:b.noticeBelow,(h=e.options)==null?void 0:h.noticeBelow),warnAbove:ko((x=a==null?void 0:a.thresholds)==null?void 0:x.warnAbove,(E=e.options)==null?void 0:E.warnAbove),warnBelow:ko((P=a==null?void 0:a.thresholds)==null?void 0:P.warnBelow,(q=e.options)==null?void 0:q.warnBelow),warnIndex:ko((O=a==null?void 0:a.thresholds)==null?void 0:O.warnIndex,(j=e.options)==null?void 0:j.warnIndex)},p=((K=e.options)==null?void 0:K.indexBasis)||((J=a==null?void 0:a.index)==null?void 0:J.basis)||"category",w=typeof((pe=e.options)==null?void 0:pe.trendColor)=="string"&&((Y=e.options)!=null&&Y.trendColor.trim())?e.options.trendColor.trim():"#2563EB",v=Number.isFinite((R=e.options)==null?void 0:R.loopbackCount)?Number((ae=e.options)==null?void 0:ae.loopbackCount):void 0,g=Number.isFinite(v)?Number(v):(Number.isFinite(c)?Number(c):((ve=o.trend)==null?void 0:ve.lookbackWeeks)??4)+1;return{overview:t.balanceOverview,targetsCategories:((H=t.targetsConfig)==null?void 0:H.categories)||[],rangeLabel:t.rangeLabel,showBadge:r,showTrend:n,showMessages:s,showHeader:((re=e.options)==null?void 0:re.showHeader)!==!1,showConfig:((be=e.options)==null?void 0:be.showConfig)!==!1,messageLimit:i,lookbackWeeks:g,loopbackCount:g,showCurrent:((F=e.options)==null?void 0:F.showCurrent)!==!1,labelMode:((z=e.options)==null?void 0:z.labelMode)||"period",reverseTrend:((U=e.options)==null?void 0:U.reverseTrend)===!0,indexBasis:p,thresholds:u,title:at(zi,(ne=e.options)==null?void 0:ne.titlePrefix),cardBg:((L=(ye=e.options)==null?void 0:ye.colors)==null?void 0:L.background)??((W=e.options)==null?void 0:W.cardBg),trendColor:w,from:t.from,to:t.to,rangeMode:t.rangeMode}}},db=et(()=>tt(()=>Promise.resolve().then(()=>Gk),void 0).then(e=>e.default)),Ri="Category mix trend",ub={component:db,defaultLayout:{width:"half",height:"m",order:47},label:"Category mix trend",baseTitle:Ri,defaultOptions:{lookbackWeeks:4,density:"normal",labelMode:"period",colorMode:"hybrid",squareCells:!1,showHeader:!0,showBadge:!0},configurable:!0,controls:[{key:"lookbackWeeks",label:"Lookback (weeks)",type:"number",min:1,max:4,step:1},{key:"density",label:"Density",type:"select",options:[{value:"normal",label:"Normal"},{value:"dense",label:"Dense"}]},{key:"squareCells",label:"Square cells",type:"toggle"},{key:"labelMode",label:"History label",type:"select",options:[{value:"period",label:"Week/Month"},{value:"date",label:"Date range"},{value:"compact",label:"Compact (W-4)"},{value:"offset",label:"Offset only"},{value:"label",label:"Use server label"}]},{key:"colorMode",label:"Color mode",type:"select",options:[{value:"hybrid",label:"Hybrid (share + trend)"},{value:"share",label:"Share heatmap"},{value:"trend",label:"Trend only"}]},{key:"shareLowColor",label:"Share low",type:"color"},{key:"shareHighColor",label:"Share high",type:"color"},{key:"showBadge",label:"Show badge",type:"toggle"},{key:"toneLowColor",label:"Low color",type:"color"},{key:"toneHighColor",label:"High color",type:"color"}],buildProps:(e,t)=>{var a,o,r,n,s,l,i,c,u,p,w,v,g;return{overview:t.balanceOverview,rangeMode:t.rangeMode,rangeLabel:t.rangeLabel,from:t.from,to:t.to,lookbackWeeks:((a=e.options)==null?void 0:a.lookbackWeeks)??4,showBadge:((o=e.options)==null?void 0:o.showBadge)??!0,showHeader:((r=e.options)==null?void 0:r.showHeader)!==!1,density:(n=e.options)==null?void 0:n.density,labelMode:(s=e.options)==null?void 0:s.labelMode,squareCells:((l=e.options)==null?void 0:l.squareCells)===!0,colorMode:(i=e.options)==null?void 0:i.colorMode,title:at(Ri,(c=e.options)==null?void 0:c.titlePrefix),cardBg:(u=e.options)==null?void 0:u.cardBg,toneLowColor:(p=e.options)==null?void 0:p.toneLowColor,toneHighColor:(w=e.options)==null?void 0:w.toneHighColor,shareLowColor:(v=e.options)==null?void 0:v.shareLowColor,shareHighColor:(g=e.options)==null?void 0:g.shareHighColor}}};function Ft(e){return Array.isArray(e)?e.map(t=>String(t??"").trim()).filter(Boolean):typeof e=="string"?e.split(",").map(t=>t.trim()).filter(Boolean):[]}function fb(e,t){if(!e||!Array.isArray(e.data))return null;if(!t.size)return e;const a=e.ids||[],o=e.labels||[],r=e.data||[],n=e.colors||[],s=a.map((l,i)=>t.has(String(l))?i:-1).filter(l=>l>=0);return s.length?{ids:s.map(l=>String(a[l]??"")),labels:s.map(l=>String(o[l]??"")),data:s.map(l=>Number(r[l]??0)),colors:s.map(l=>n[l])}:null}function Ln(e,t){if(!e||!Array.isArray(e.series))return null;if(!t.size)return e;const a=e.series.filter(o=>t.has(String((o==null?void 0:o.id)??"")));return a.length?{labels:e.labels||[],series:a}:null}function On(e,t,a,o){if(!e||!Array.isArray(e.series))return null;const r=e.labels||[],n=new Map;if(e.series.forEach(l=>{const i=String((l==null?void 0:l.id)??""),c=String((t==null?void 0:t[i])??"");if(!c||a.size&&!a.has(c))return;n.has(c)||n.set(c,Array.from({length:r.length},()=>0));const u=n.get(c),p=Array.isArray(l==null?void 0:l.data)?l.data:[];u&&r.forEach((w,v)=>{u[v]+=Math.max(0,Number(p[v]??0))})}),!n.size)return null;const s=Array.from(n.entries()).map(([l,i])=>({id:l,name:l,label:l,color:o==null?void 0:o[l],data:i}));return{labels:r,series:s}}function ji(e){if(!e||!Array.isArray(e.series))return null;const t=e.labels||[],a=t.map((o,r)=>e.series.reduce((n,s)=>{var l;return n+Math.max(0,Number(((l=s==null?void 0:s.data)==null?void 0:l[r])??0))},0));return{labels:t,data:a}}function gb(e){if(!e)return null;const t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],a=new Map;return t.forEach(o=>a.set(o,0)),e.labels.forEach((o,r)=>{const n=hb(o);n&&a.set(n,(a.get(n)||0)+Math.max(0,Number(e.data[r]??0)))}),{labels:t,data:t.map(o=>a.get(o)||0)}}function pb(e,t,a){if(!Array.isArray(e)||!e.length)return null;const o=e.filter(r=>!r||!r.id?!1:t.size?t.has(String(r.id)):!0);return o.length?{ids:o.map(r=>String(r.id)),labels:o.map(r=>String(r.label??r.id)),data:o.map(r=>{var n;return Math.max(0,Number(((n=r.summary)==null?void 0:n.actualHours)??0))}),colors:o.map(r=>r.color||(a==null?void 0:a[String(r.id)]))}:null}function Bn(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const a=t.labels.map(f=>String(f??"")),o=t.series.map(f=>{const m=String((f==null?void 0:f.id)??"");return{...f,id:m,name:String((f==null?void 0:f.name)??(f==null?void 0:f.label)??m),color:String((f==null?void 0:f.color)??""),data:a.map((D,T)=>{var _;const M=Number(((_=f==null?void 0:f.data)==null?void 0:_[T])??0);return Number.isFinite(M)?Math.max(0,M):0})}}),r=bb(e.forecastMode),n=yb(new Date),s=a.map(f=>mb.test(f)&&f>n),l=[];if(s.forEach((f,m)=>{f&&l.push(m)}),!l.length||r==="off")return{labels:a,series:o};const i=e.targetsConfig??Gt(),c=kb(e.currentTargets),u=e.calendarCategoryMap??{},p=l.length,w=new Map;o.forEach(f=>{let m=0;f.data.forEach((D,T)=>{s[T]||(m+=Math.max(0,D))}),w.set(f.id,m)});const v=Array.from(w.values()).reduce((f,m)=>f+m,0),g=new Map;if(o.forEach(f=>{g.set(f.id,wb(a.length))}),r==="total"){const f=Math.max(0,Number(i.totalHours??0)),m=Math.max(0,f-v);if(m>1e-4){const D=m/p,T=o.map(_=>_.id),M=Ui(T,w,c);T.forEach(_=>{const $=M[_]??0;if($<=0)return;const I=g.get(_);I&&l.forEach(C=>{I[C]=wr(D*$)})})}}else if(r==="calendar")o.forEach(f=>{const m=c[f.id]??0;if(m<=0)return;const D=Math.max(0,w.get(f.id)??0),T=Math.max(0,m-D);if(T<=1e-4)return;const M=T/p,_=g.get(f.id);_&&l.forEach($=>{_[$]=wr(M)})});else if(r==="category"){const f=new Set,m=Array.isArray(i.categories)?i.categories:[],D=new Map;m.forEach(M=>{D.set(String(M.id),Math.max(0,Number(M.targetHours??0)))});const T=new Map;o.forEach(M=>{const _=u==null?void 0:u[M.id],$=_?String(_):vb;T.has($)||T.set($,[]),T.get($).push(M.id)}),T.forEach((M,_)=>{if(!M.length)return;const $=D.get(_)??0;if($<=0)return;const I=M.reduce((x,E)=>x+Math.max(0,w.get(E)??0),0),C=Math.max(0,$-I);if(C<=1e-4)return;const S=C/p,b={};M.forEach(x=>{b[x]=c[x]??0});const h=Ui(M,w,b);M.forEach(x=>{const E=h[x]??0;if(E<=0)return;const P=g.get(x);P&&(l.forEach(q=>{P[q]=wr(S*E)}),f.add(x))})}),o.forEach(M=>{if(f.has(M.id))return;const _=c[M.id]??0;if(_<=0)return;const $=Math.max(0,w.get(M.id)??0),I=Math.max(0,_-$);if(I<=1e-4)return;const C=I/p,S=g.get(M.id);S&&l.forEach(b=>{S[b]=wr(C)})})}return o.forEach(f=>{const m=g.get(f.id);m&&m.some(D=>D>1e-4)&&(f.forecast=m)}),{labels:a,series:o}}function hb(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(String(e));if(!t)return null;const a=new Date(`${t[1]}-${t[2]}-${t[3]}T00:00:00`);if(Number.isNaN(a.getTime()))return null;const r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a.getDay()];return r?r==="Sun"?"Sun":r:null}const mb=/^\d{4}-\d{2}-\d{2}$/,vb="__uncategorized__";function bb(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function yb(e){const t=e.getFullYear(),a=`${e.getMonth()+1}`.padStart(2,"0"),o=`${e.getDate()}`.padStart(2,"0");return`${t}-${a}-${o}`}function wb(e){return Array.from({length:e},()=>0)}function wr(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function kb(e){const t={};return e&&Object.entries(e).forEach(([a,o])=>{const r=Number(o);Number.isFinite(r)&&r>0&&(t[String(a)]=r)}),t}function Ui(e,t,a){const o={},r=e.reduce((l,i)=>l+Math.max(0,t.get(i)??0),0);if(r>1e-4)return e.forEach(l=>{const i=Math.max(0,t.get(l)??0);o[l]=i/r}),o;const n=e.reduce((l,i)=>l+Math.max(0,(a==null?void 0:a[i])??0),0);if(n>1e-4)return e.forEach(l=>{const i=Math.max(0,(a==null?void 0:a[l])??0);o[l]=i/n}),o;const s=e.length?1/e.length:0;return e.forEach(l=>{o[l]=s}),o}const _b=et(()=>tt(()=>Promise.resolve().then(()=>e_),void 0).then(e=>e.default)),Vi="Day of week",xb={component:_b,defaultLayout:{width:"half",height:"m",order:84},label:"Chart  Day of week",baseTitle:Vi,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLabels:!0,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var u,p,w,v,g,f,m,D,T,M;const a=((u=e.options)==null?void 0:u.scope)==="category"?"category":"calendar",o=new Set(Ft((p=e.options)==null?void 0:p.calendarFilter)),r=new Set(Ft((w=e.options)==null?void 0:w.categoryFilter)),n=t.categoryColorMap||{},s=Bn({perDaySeries:(v=t.charts)==null?void 0:v.perDaySeries,forecastMode:(g=e.options)==null?void 0:g.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),l=a==="category"?On(s,t.calendarCategoryMap||{},r,n):Ln(s,o),i=ji(l),c=gb(i);return{title:at(Vi,(f=e.options)==null?void 0:f.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(m=e.options)==null?void 0:m.cardBg,showHeader:((D=e.options)==null?void 0:D.showHeader)!==!1,showLabels:((T=e.options)==null?void 0:T.showLabels)!==!1,compact:((M=e.options)==null?void 0:M.compact)===!0,chartData:c}}},Cb=et(()=>tt(()=>Promise.resolve().then(()=>l_),void 0).then(e=>e.default)),Ki="Hours of day",Sb={component:Cb,defaultLayout:{width:"full",height:"l",order:86},label:"Chart  Hours of day",baseTitle:Ki,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showHint:!1,compact:!1},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"showHint",label:"Show hint",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var n,s,l,i,c,u,p;const a=Ft((n=e.options)==null?void 0:n.calendarFilter),o=Ft((s=e.options)==null?void 0:s.categoryFilter),r=a.length>0||o.length>0;return{title:at(Ki,(l=e.options)==null?void 0:l.titlePrefix),subtitle:r?"Filters currently not applied":void 0,cardBg:(i=e.options)==null?void 0:i.cardBg,showHeader:((c=e.options)==null?void 0:c.showHeader)!==!1,showHint:((u=e.options)==null?void 0:u.showHint)===!0,hodData:((p=t.charts)==null?void 0:p.hod)||null}}},$b=et(()=>tt(()=>Promise.resolve().then(()=>f_),void 0).then(e=>e.default)),qi="Per-day",Tb={component:$b,defaultLayout:{width:"half",height:"m",order:82},label:"Chart  Per-day",baseTitle:qi,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLabels:!1,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var c,u,p,w,v,g,f,m,D,T;const a=((c=e.options)==null?void 0:c.scope)==="category"?"category":"calendar",o=new Set(Ft((u=e.options)==null?void 0:u.calendarFilter)),r=new Set(Ft((p=e.options)==null?void 0:p.categoryFilter)),n=t.categoryColorMap||{},s=Bn({perDaySeries:(w=t.charts)==null?void 0:w.perDaySeries,forecastMode:(v=e.options)==null?void 0:v.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),l=a==="category"?On(s,t.calendarCategoryMap||{},r,n):Ln(s,o),i=ji(l);return{title:at(qi,(g=e.options)==null?void 0:g.titlePrefix),subtitle:a==="category"?"Totals by category":"Totals by calendar",cardBg:(f=e.options)==null?void 0:f.cardBg,showHeader:((m=e.options)==null?void 0:m.showHeader)!==!1,showLabels:((D=e.options)==null?void 0:D.showLabels)===!0,compact:((T=e.options)==null?void 0:T.compact)===!0,chartData:i}}},Mb=et(()=>tt(()=>Promise.resolve().then(()=>w_),void 0).then(e=>e.default)),Gi="Pie chart",Db={component:Mb,defaultLayout:{width:"half",height:"m",order:75},label:"Chart  Pie",baseTitle:Gi,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLegend:!0,showLabels:!0,compact:!1},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var c,u,p,w,v,g,f,m,D,T;const a=((c=e.options)==null?void 0:c.scope)==="category"?"category":"calendar",o=new Set(Ft((u=e.options)==null?void 0:u.calendarFilter)),r=new Set(Ft((p=e.options)==null?void 0:p.categoryFilter)),n=t.colorsById||{},s=t.colorsByName||{},l=t.categoryColorMap||{},i=a==="category"?pb(t.calendarGroups||[],r,l):fb(((w=t.calendarChartData)==null?void 0:w.pie)||null,o);return{title:at(Gi,(v=e.options)==null?void 0:v.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(g=e.options)==null?void 0:g.cardBg,showHeader:((f=e.options)==null?void 0:f.showHeader)!==!1,compact:((m=e.options)==null?void 0:m.compact)===!0,showLegend:((D=e.options)==null?void 0:D.showLegend)!==!1,showLabels:((T=e.options)==null?void 0:T.showLabels)!==!1,chartData:i,colorsById:n,colorsByName:s}}},Ab=et(()=>tt(()=>Promise.resolve().then(()=>T_),void 0).then(e=>e.default)),Ji="Stacked chart",Eb={component:Ab,defaultLayout:{width:"full",height:"l",order:80},label:"Chart  Stacked",baseTitle:Ji,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLegend:!0,showLabels:!1,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var i,c,u,p,w,v,g,f,m,D,T;const a=((i=e.options)==null?void 0:i.scope)==="category"?"category":"calendar",o=new Set(Ft((c=e.options)==null?void 0:c.calendarFilter)),r=new Set(Ft((u=e.options)==null?void 0:u.categoryFilter)),n=t.categoryColorMap||{},s=Bn({perDaySeries:(p=t.charts)==null?void 0:p.perDaySeries,forecastMode:(w=e.options)==null?void 0:w.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),l=a==="category"?On(s,t.calendarCategoryMap||{},r,n):Ln(s,o);return{title:at(Ji,(v=e.options)==null?void 0:v.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(g=e.options)==null?void 0:g.cardBg,showHeader:((f=e.options)==null?void 0:f.showHeader)!==!1,compact:((m=e.options)==null?void 0:m.compact)===!0,showLegend:((D=e.options)==null?void 0:D.showLegend)!==!1,showLabels:((T=e.options)==null?void 0:T.showLabels)===!0,stacked:l,colorsById:t.colorsById||{}}}},Lb=et(()=>tt(()=>Promise.resolve().then(()=>L_),void 0).then(e=>e.default)),Yi="By calendar",Ob={component:Lb,defaultLayout:{width:"full",height:"l",order:70},label:"Table  By calendar",baseTitle:Yi,configurable:!0,defaultOptions:{calendarFilter:[],compact:!1},dynamicControls:(e,t)=>[{key:"calendarFilter",label:"Calendars",type:"multiselect",options:Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(o=>({value:o.id,label:o.displayname||o.name||o.id})):[]},{key:"compact",label:"Compact",type:"toggle"}],buildProps:(e,t)=>{var n,s,l,i;const a=new Set(Ft((n=e.options)==null?void 0:n.calendarFilter)),o=Array.isArray(t.byCal)?t.byCal:[],r=a.size?o.filter(c=>a.has(String((c==null?void 0:c.id)??(c==null?void 0:c.calendar_id)??(c==null?void 0:c.calendar)??""))):o;return{title:at(Yi,(s=e.options)==null?void 0:s.titlePrefix),subtitle:a.size?"Filtered calendars":void 0,cardBg:(l=e.options)==null?void 0:l.cardBg,showHeader:((i=e.options)==null?void 0:i.showHeader)!==!1,rows:r,targets:t.currentTargets||{},groups:t.calendarGroups||[],todayHours:t.calendarTodayHours||{}}}},Bb=et(()=>tt(()=>Promise.resolve().then(()=>z_),void 0).then(e=>e.default)),Zi="Days off trend",Nb={component:Bb,defaultLayout:{width:"quarter",height:"s",order:45},label:"Days off trend",baseTitle:Zi,configurable:!0,defaultOptions:{lookback:4,unit:"wk",showBadges:!0},controls:[{key:"lookback",label:"Lookback (periods)",type:"number",min:1,max:12,step:1},{key:"unit",label:"Unit",type:"select",options:[{value:"wk",label:"Weeks"},{value:"mo",label:"Months"}]},{key:"showBadges",label:"Show badges",type:"toggle"},{key:"toneLowColor",label:"Low color",type:"color"},{key:"toneHighColor",label:"High color",type:"color"}],buildProps:(e,t)=>{var a,o,r,n,s,l,i,c;return{trend:t.activityDayOffTrend,unit:((a=e.options)==null?void 0:a.unit)??"wk",lookback:((o=e.options)==null?void 0:o.lookback)??4,showHeader:((r=e.options)==null?void 0:r.showHeader)!==!1,showBadges:((n=e.options)==null?void 0:n.showBadges)!==!1,title:at(Zi,(s=e.options)==null?void 0:s.titlePrefix),cardBg:(l=e.options)==null?void 0:l.cardBg,toneLowColor:(i=e.options)==null?void 0:i.toneLowColor,toneHighColor:(c=e.options)==null?void 0:c.toneHighColor}}},Ib=et(()=>tt(()=>Promise.resolve().then(()=>rx),void 0).then(e=>e.default)),Xi="Deck summary",Pb={component:Ib,defaultLayout:{width:"half",height:"s",order:50},label:"Deck (old)",baseTitle:Xi,configurable:!0,controls:[{key:"showBadges",label:"Show board badges",type:"toggle"},{key:"showTicker",label:"Show ticker",type:"toggle"},{key:"showEmpty",label:"Show empty states",type:"toggle"}],buildProps:(e,t)=>{var a,o,r,n,s,l;return{buckets:t.deckBuckets,rangeLabel:t.deckRangeLabel,loading:t.deckLoading,error:t.deckError,ticker:t.deckTicker,activeFilter:t.deckFilter,onFilter:t.onDeckFilter,showBoardBadges:((a=e.options)==null?void 0:a.showBadges)??t.deckShowBoardBadges,showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,showTicker:((r=e.options)==null?void 0:r.showTicker)!==!1,showEmpty:((n=e.options)==null?void 0:n.showEmpty)!==!1,title:at(Xi,(s=e.options)==null?void 0:s.titlePrefix),cardBg:(l=e.options)==null?void 0:l.cardBg}}},Fb=et(()=>tt(()=>Promise.resolve().then(()=>nx),void 0).then(e=>e.default)),Qi="Deck cards",Hb={component:Fb,defaultLayout:{width:"half",height:"m",order:52},label:"Deck cards",baseTitle:Qi,configurable:!0,defaultOptions:{allowMine:!0,includeArchived:!0,includeCompleted:!0,autoScroll:!0,intervalSeconds:5,showCount:!0,customFilters:[],filters:["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],defaultFilter:"open_all",mineMode:"assignee"},controls:[{key:"boardIds",label:"Boards to include",type:"multiselect",options:[]},{key:"filters",label:"Filters to show",type:"multiselect",options:[]},{key:"allowMine",label:"Allow mine filters",type:"toggle"},{key:"mineMode",label:"Mine mode",type:"select",options:[{value:"assignee",label:"Assignee"},{value:"creator",label:"Creator"},{value:"both",label:"Assignee + Creator"}]},{key:"includeArchived",label:"Include archived cards",type:"toggle"},{key:"includeCompleted",label:"Include completed cards",type:"toggle"},{key:"autoScroll",label:"Auto-scroll list",type:"toggle"},{key:"intervalSeconds",label:"Scroll every (s)",type:"number",min:3,max:10,step:1},{key:"showCount",label:"Show count pill",type:"toggle"},{key:"customFilters",label:"Custom filters",type:"filterbuilder"}],dynamicControls:(e,t)=>{var s;const o={key:"defaultFilter",label:"Default filter",type:"select",options:Fi(e.filters??((s=e.defaultOptions)==null?void 0:s.filters)).map(l=>({value:l,label:St(l)}))},r=[{value:"all",label:St("all")},{value:"open_all",label:St("open_all")},{value:"open_mine",label:St("open_mine")},{value:"done_all",label:St("done_all")},{value:"done_mine",label:St("done_mine")},{value:"archived_all",label:St("archived_all")},{value:"archived_mine",label:St("archived_mine")},{value:"due_all",label:St("due_all")},{value:"due_mine",label:St("due_mine")},{value:"due_today_all",label:St("due_today_all")},{value:"due_today_mine",label:St("due_today_mine")},{value:"created_today_all",label:St("created_today_all")},{value:"created_today_mine",label:St("created_today_mine")}],n=Array.isArray(t.deckBoards)?t.deckBoards.map(l=>({value:l.id,label:l.title||`Board ${l.id}`})):[];return[{key:"filters",label:"Filters",type:"multiselect",options:r},o,{key:"boardIds",label:"Boards",type:"multiselect",options:n}]},buildProps:(e,t)=>{var s,l,i,c,u,p,w,v,g,f,m,D,T,M,_,$,I,C;const a=Fi(((s=e.options)==null?void 0:s.filters)??((i=(l=e.options)==null?void 0:l.defaultOptions)==null?void 0:i.filters)),o=Array.isArray((c=e.options)==null?void 0:c.boardIds)?e.options.boardIds:Pi((u=e.options)==null?void 0:u.boardIds),r=a.includes((p=e.options)==null?void 0:p.defaultFilter)?(w=e.options)==null?void 0:w.defaultFilter:a[0]||"all",n=Wb((v=e.options)==null?void 0:v.customFilters);return{title:at(Qi,(g=e.options)==null?void 0:g.titlePrefix),cardBg:(f=e.options)==null?void 0:f.cardBg,cards:t.deckCards||[],rangeLabel:t.deckRangeLabel||t.rangeLabel||"",from:t.from,to:t.to,uid:t.uid,deckUrl:t.deckUrl,lastFetchedAt:t.deckRangeLabel,loading:t.deckLoading,error:t.deckError,boardIds:o,filters:a,defaultFilter:r,allowMine:((m=e.options)==null?void 0:m.allowMine)!==!1,mineMode:((D=e.options)==null?void 0:D.mineMode)||"assignee",includeArchived:((T=e.options)==null?void 0:T.includeArchived)!==!1,includeCompleted:((M=e.options)==null?void 0:M.includeCompleted)!==!1,autoScroll:((_=e.options)==null?void 0:_.autoScroll)!==!1,intervalSeconds:(($=e.options)==null?void 0:$.intervalSeconds)??5,showCount:((I=e.options)==null?void 0:I.showCount)!==!1,showHeader:((C=e.options)==null?void 0:C.showHeader)!==!1,customFilters:n,editable:t.isLayoutEditing===!0,onUpdateFilters:S=>{var b;return(b=t.onUpdateWidgetOptions)==null?void 0:b.call(t,e.id,"filters",S)}}}};function Wb(e){let t=[];if(Array.isArray(e))t=e;else if(typeof e=="string"&&e.trim()!=="")try{const a=JSON.parse(e);Array.isArray(a)&&(t=a)}catch{t=[]}return t.map(a=>{if(!a||typeof a!="object")return null;const o=String(a.label||a.name||"").trim();if(!o)return null;const r=zb(String(a.id||o)),n=Array.isArray(a.labelIds)?a.labelIds.map(i=>String(i).trim()).filter(Boolean):[],s=Array.isArray(a.labels)?a.labels.map(i=>String(i).trim()).filter(Boolean):[],l=Array.isArray(a.assignees)?a.assignees.map(i=>String(i).trim()).filter(Boolean):[];return{id:r,label:o,labelIds:n,labels:s,assignees:l}}).filter(Boolean)}function zb(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}const Rb=et(()=>tt(()=>Promise.resolve().then(()=>bx),void 0).then(e=>e.default)),ec="Notes",jb={component:Rb,defaultLayout:{width:"half",height:"m",order:69},label:"Notes editor",baseTitle:ec,configurable:!0,controls:[{key:"prevLabel",label:"Prev label",type:"text"},{key:"currLabel",label:"Current label",type:"text"}],buildProps:(e,t)=>{var a,o,r,n,s;return{title:at(ec,(a=e.options)==null?void 0:a.titlePrefix),showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,cardBg:(r=e.options)==null?void 0:r.cardBg,prevLabel:((n=e.options)==null?void 0:n.prevLabel)||(t.notesLabelPrev??"Previous"),currLabel:((s=e.options)==null?void 0:s.currLabel)||(t.notesLabelCurr??"Current"),previous:t.notesPrev??"",history:t.notesHistory??[],modelValue:t.notesCurr??"",saving:t.isSavingNote??!1,onSave:t.onSaveNote,onUpdateModelValue:t.onUpdateNotes}}},Ub=et(()=>tt(()=>Promise.resolve().then(()=>_x),void 0).then(e=>e.default)),tc="Note",Vb={component:Ub,defaultLayout:{width:"quarter",height:"s",order:68},label:"Notes snippet",baseTitle:tc,configurable:!0,controls:[],buildProps:(e,t)=>{var a,o,r;return{notesCurr:t.notesCurr??"",notesPrev:t.notesPrev??"",title:at(tc,(a=e.options)==null?void 0:a.titlePrefix),showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,cardBg:(r=e.options)==null?void 0:r.cardBg}}},Kb=et(()=>tt(()=>Promise.resolve().then(()=>Ox),void 0).then(e=>e.default)),ac="Notes",qb={component:Kb,defaultLayout:{width:"half",height:"s",order:60},label:"Notes (old)",baseTitle:ac,configurable:!0,controls:[{key:"showPrev",label:"Show previous note",type:"toggle"},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"mode",label:"Mode",type:"select",options:[{value:"week",label:"Week"},{value:"month",label:"Month"}]}],buildProps:(e,t)=>{var a,o,r;return{previous:t.notesPrev??"",history:t.notesHistory??[],modelValue:t.notesCurr??"",prevLabel:t.notesLabelPrev||"Previous",currLabel:t.notesLabelCurr||"Current",prevTitle:t.notesLabelPrevTitle||"",currTitle:t.notesLabelCurrTitle||"",saving:t.isSavingNote??!1,title:at(ac,(a=e.options)==null?void 0:a.titlePrefix),showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,cardBg:(r=e.options)==null?void 0:r.cardBg,onSave:t.onSaveNote,onUpdateModelValue:t.onUpdateNotes}}},Gb=et(()=>tt(()=>Promise.resolve().then(()=>kc),void 0).then(e=>e.default)),oc="Targets",Jb={component:Gb,defaultLayout:{width:"half",height:"m",order:20},label:"Targets (old)",baseTitle:oc,configurable:!0,controls:[{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showDelta",label:"Show delta",type:"toggle"},{key:"showForecast",label:"Show forecast",type:"toggle"},{key:"showPace",label:"Show pace line",type:"toggle"},{key:"showToday",label:"Show today overlay",type:"toggle"}],buildProps:(e,t)=>{var a,o,r,n,s,l,i,c,u;return{summary:t.targetsSummary??t.summary,config:t.targetsConfig,groups:((a=e.props)==null?void 0:a.groups)??t.groups,showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,showLegend:((r=e.options)==null?void 0:r.showLegend)!==!1,showDelta:((n=e.options)==null?void 0:n.showDelta)!==!1,showForecast:((s=e.options)==null?void 0:s.showForecast)!==!1,showPace:((l=e.options)==null?void 0:l.showPace)!==!1,showToday:((i=e.options)==null?void 0:i.showToday)!==!1,title:at(oc,(c=e.options)==null?void 0:c.titlePrefix),cardBg:(u=e.options)==null?void 0:u.cardBg}}},Yb=et(()=>tt(()=>Promise.resolve().then(()=>kc),void 0).then(e=>e.default)),rc="Targets",Zb={component:Yb,defaultLayout:{width:"half",height:"m",order:18},label:"Targets",baseTitle:rc,configurable:!0,defaultOptions:{showForecast:!0,showPace:!0,useLocalConfig:!1,localConfig:null},controls:[{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showDelta",label:"Show delta",type:"toggle"},{key:"showForecast",label:"Show forecast",type:"toggle"},{key:"showPace",label:"Show pace line",type:"toggle"},{key:"showToday",label:"Show today overlay",type:"toggle"},{key:"useLocalConfig",label:"Use custom targets for this widget",type:"toggle"},{key:"showTotalDelta",label:"Show total delta",type:"toggle"},{key:"showNeedPerDay",label:"Show need per day",type:"toggle"},{key:"showCategoryBlocks",label:"Show categories",type:"toggle"},{key:"badges",label:"Status badges",type:"toggle"},{key:"includeWeekendToggle",label:"Weekend toggle",type:"toggle"},{key:"includeZeroDaysInStats",label:"Include zero days in pace",type:"toggle"}],buildProps:(e,t)=>{var i,c,u,p,w,v,g,f,m,D,T;const a=!!((i=e.options)!=null&&i.useLocalConfig),o=a&&((c=e.options)!=null&&c.localConfig)?JSON.parse(JSON.stringify(e.options.localConfig)):t.targetsConfig?JSON.parse(JSON.stringify(t.targetsConfig)):Gt(),r=tb(eb(o,t.rangeMode)),n=(M,_)=>{var $;(($=e.options)==null?void 0:$[M])!==void 0&&_(!!e.options[M])};n("showTotalDelta",M=>{r.ui.showTotalDelta=M}),n("showNeedPerDay",M=>{r.ui.showNeedPerDay=M}),n("showCategoryBlocks",M=>{r.ui.showCategoryBlocks=M}),n("badges",M=>{r.ui.badges=M}),n("includeWeekendToggle",M=>{r.ui.includeWeekendToggle=M}),n("includeZeroDaysInStats",M=>{r.includeZeroDaysInStats=M});const s=a&&t.stats?ab(r,t):t.targetsSummary??t.summary,l=a?null:((u=e.props)==null?void 0:u.groups)??t.groups;return{summary:s,config:r,groups:l,showHeader:((p=e.options)==null?void 0:p.showHeader)!==!1,showLegend:((w=e.options)==null?void 0:w.showLegend)!==!1,showDelta:((v=e.options)==null?void 0:v.showDelta)!==!1,showForecast:((g=e.options)==null?void 0:g.showForecast)!==!1,showPace:((f=e.options)==null?void 0:f.showPace)!==!1,showToday:((m=e.options)==null?void 0:m.showToday)!==!1,title:at(rc,(D=e.options)==null?void 0:D.titlePrefix),cardBg:(T=e.options)==null?void 0:T.cardBg}}},Xb={component:et(()=>tt(()=>Promise.resolve().then(()=>cC),void 0).then(e=>e.default)),defaultLayout:{width:"quarter",height:"s",order:65},label:"Text label",configurable:!0,controls:[{key:"preset",label:"Source",type:"select",options:[{value:"",label:"Custom"},{value:"targets",label:"Targets"},{value:"activity",label:"Activity & Schedule"},{value:"balance",label:"Balance"},{value:"mix",label:"Category mix"},{value:"dayoff",label:"Days off trend"},{value:"deck",label:"Deck"},{value:"notes",label:"Notes"}]},{key:"title",label:"Title",type:"text"},{key:"body",label:"Body",type:"textarea"},{key:"include",label:"Include all labels",type:"toggle"}],buildProps:(e,t)=>{var a,o,r,n,s,l,i;return{title:at(Ii((a=e.options)==null?void 0:a.preset).title??"Text",(o=e.options)==null?void 0:o.titlePrefix),body:Ii((r=e.options)==null?void 0:r.preset).body??((n=e.options)==null?void 0:n.body)??"",items:ob((s=e.options)==null?void 0:s.preset,e.options||{},t),cardBg:(l=e.options)==null?void 0:l.cardBg,showHeader:((i=e.options)==null?void 0:i.showHeader)!==!1}},dynamicControls:e=>(e==null?void 0:e.preset)!=="activity"?[]:[{key:"weekendShare",label:"Weekend share",type:"toggle"},{key:"eveningShare",label:"Evening share",type:"toggle"},{key:"earliestLatest",label:"Earliest/Late times",type:"toggle"},{key:"overlaps",label:"Overlaps",type:"toggle"},{key:"longest",label:"Longest session",type:"toggle"},{key:"lastDayOff",label:"Last day off",type:"toggle"}]},Qb=et(()=>tt(()=>Promise.resolve().then(()=>_c),void 0).then(e=>e.default)),nc="Time Summary",ey={component:Qb,defaultLayout:{width:"half",height:"s",order:10},label:"Time Summary (old)",baseTitle:nc,configurable:!0,controls:[{key:"showTopCategory",label:"Show top category",type:"toggle"},{key:"showWorkdayStats",label:"Show workday stats",type:"toggle"},{key:"showWeekendStats",label:"Show weekend stats",type:"toggle"}],buildProps:(e,t)=>{var a,o,r,n,s,l,i;return{summary:t.summary,mode:"active",config:(a=t.targetsConfig)==null?void 0:a.timeSummary,showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,showTopCategory:((r=e.options)==null?void 0:r.showTopCategory)!==!1,showWorkdayStats:((n=e.options)==null?void 0:n.showWorkdayStats)!==!1,showWeekendStats:((s=e.options)==null?void 0:s.showWeekendStats)!==!1,title:at(nc,(l=e.options)==null?void 0:l.titlePrefix),cardBg:(i=e.options)==null?void 0:i.cardBg}}},ty=et(()=>tt(()=>Promise.resolve().then(()=>_c),void 0).then(e=>e.default)),sc="Time Summary",ay={component:ty,defaultLayout:{width:"half",height:"s",order:9},label:"Time Summary",baseTitle:sc,configurable:!0,defaultOptions:{...Gt().timeSummary,mode:"active"},controls:[{key:"mode",label:"Average mode",type:"select",options:[{value:"active",label:"Active days"},{value:"all",label:"All days"}]},{key:"showTotal",label:"Total hours",type:"toggle"},{key:"showAverage",label:"Average per day",type:"toggle"},{key:"showMedian",label:"Median per day",type:"toggle"},{key:"showBusiest",label:"Busiest day",type:"toggle"},{key:"showWorkday",label:"Workdays row",type:"toggle"},{key:"showWeekend",label:"Weekend row",type:"toggle"},{key:"showWeekendShare",label:"Weekend share",type:"toggle"},{key:"showCalendarSummary",label:"Top calendars",type:"toggle"},{key:"showTopCategory",label:"Top category",type:"toggle"},{key:"showBalance",label:"Balance index",type:"toggle"}],buildProps:(e,t)=>{var n,s,l,i,c;const a=t.targetsConfig?JSON.parse(JSON.stringify(t.targetsConfig)):Gt(),o={...a,timeSummary:{...a.timeSummary}},r=u=>{var p;((p=e.options)==null?void 0:p[u])!==void 0&&(o.timeSummary[u]=!!e.options[u])};return["showTotal","showAverage","showMedian","showBusiest","showWorkday","showWeekend","showWeekendShare","showCalendarSummary","showTopCategory","showBalance"].forEach(r),{summary:t.summary,activitySummary:t.activitySummary,mode:((n=e.options)==null?void 0:n.mode)??t.activeDayMode??"active",config:o.timeSummary,todayGroups:((s=e.props)==null?void 0:s.todayGroups)??t.groups,title:at(sc,(l=e.options)==null?void 0:l.titlePrefix),cardBg:(i=e.options)==null?void 0:i.cardBg,rangeMode:t.rangeMode,rangeStart:t.from,rangeEnd:t.to,offset:t.offset,showHeader:((c=e.options)==null?void 0:c.showHeader)!==!1}}},Da={time_summary:ey,time_summary_v2:ay,targets:Jb,targets_v2:Zb,balance:lb,balance_index:cb,activity:nb,dayoff_trend:Nb,category_mix_trend:ub,chart_pie:Db,chart_stacked:Eb,chart_per_day:Tb,chart_dow:xb,chart_hod:Sb,calendar_table:Ob,deck:Pb,deck_cards:Hb,notes:qb,text_block:Xb,note_snippet:Vb,note_editor:jb};function lc(e,t){if(!Array.isArray(e))return t;const a=[];return e.forEach((o,r)=>{const n=String((o==null?void 0:o.type)??"");if(!n)return;const s=Da[n],l=String((o==null?void 0:o.id)??"")||`widget-${n}-${r+1}`,i=(o==null?void 0:o.layout)??{},c=i.width==="quarter"||i.width==="half"?i.width:"full",u=i.height==="s"||i.height==="l"||i.height==="xl"?i.height:"m",p=Number(i.order??0),v={...(s==null?void 0:s.defaultOptions)||{},...o!=null&&o.options&&typeof o.options=="object"?o.options:{}};v.scale==null&&v.textSize!=null&&(v.scale=v.textSize,delete v.textSize),a.push({id:l,type:n,options:v,layout:{width:c,height:u,order:Number.isFinite(p)?p:0},version:Number((o==null?void 0:o.version)??1)||1})}),a.length?a:t}function Nn(){return ic("standard")}function oy(e,t){const a=Da[e.type];if(!a)return null;const o=a.buildProps(e,t)||{};return{component:a.component,props:o}}function Ve(e,t={},a){const o=Da[e],r=(o==null?void 0:o.defaultLayout)??{width:"half",height:"s",order:50},n=(o==null?void 0:o.defaultOptions)||{};return{id:`widget-${e}-${Math.random().toString(36).slice(2,8)}`,type:e,options:{...n,...t||{}},layout:{...r,...a||{}},version:1}}function ic(e){return e==="quick"?[Ve("balance",{scale:"lg"},{width:"full",height:"xl",order:5}),Ve("activity",{},{width:"full",height:"l",order:10.1}),Ve("time_summary_v2",{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0,mode:"active",scale:"xl"},{width:"full",height:"xl",order:12.55}),Ve("targets",{},{width:"full",height:"xl",order:15})]:e==="pro"?[Ve("targets_v2",{showForecast:!0,showPace:!0,useLocalConfig:!1,localConfig:null,showCategoryBlocks:!0},{width:"half",height:"xl",order:10}),Ve("time_summary_v2",{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0,mode:"active",scale:"md"},{width:"half",height:"xl",order:30}),Ve("balance_index",{showTrend:!0,showMessages:!0,showConfig:!1,indexBasis:"category",noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6,lookbackWeeks:4,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1},{width:"half",height:"m",order:40}),Ve("dayoff_trend",{},{width:"half",height:"s",order:50}),Ve("category_mix_trend",{lookbackWeeks:4,density:"normal",labelMode:"period",colorMode:"hybrid",squareCells:!1,showHeader:!0,showBadge:!0},{width:"full",height:"l",order:55}),Ve("calendar_table",{},{width:"full",height:"l",order:56}),Ve("chart_pie",{scope:"calendar",showLegend:!0,showLabels:!0},{width:"half",height:"m",order:57}),Ve("chart_stacked",{scope:"calendar",showLegend:!0,showLabels:!1},{width:"full",height:"l",order:58}),Ve("chart_per_day",{scope:"calendar",showLabels:!1},{width:"half",height:"m",order:59}),Ve("chart_dow",{scope:"calendar",showLabels:!0},{width:"half",height:"m",order:59.5}),Ve("chart_hod",{showHint:!1},{width:"full",height:"l",order:59.8}),Ve("deck_cards",{allowMine:!0,includeArchived:!0,includeCompleted:!0,autoScroll:!0,intervalSeconds:5,showCount:!0,filters:["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],defaultFilter:"open_all",mineMode:"assignee"},{width:"half",height:"xl",order:60}),Ve("note_editor",{},{width:"half",height:"l",order:70})]:[Ve("targets",{showForecast:!0,showHeader:!1,showLegend:!0,showDelta:!0,showPace:!0,showToday:!0,scale:"lg"},{width:"half",height:"l",order:10}),Ve("time_summary_v2",{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0,mode:"active",scale:"md"},{width:"half",height:"xl",order:20}),Ve("balance_index",{showTrend:!0,showMessages:!0,showConfig:!1,indexBasis:"category",noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6,lookbackWeeks:4,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1},{width:"half",height:"m",order:30}),Ve("dayoff_trend",{},{width:"half",height:"s",order:40}),Ve("category_mix_trend",{lookbackWeeks:4,density:"normal",labelMode:"period",colorMode:"hybrid",squareCells:!1,showHeader:!0,showBadge:!0},{width:"full",height:"l",order:50}),Ve("calendar_table",{},{width:"full",height:"l",order:55}),Ve("chart_pie",{scope:"calendar",showLegend:!0,showLabels:!0},{width:"half",height:"m",order:56}),Ve("chart_stacked",{scope:"calendar",showLegend:!0,showLabels:!1},{width:"full",height:"l",order:57}),Ve("chart_per_day",{scope:"calendar",showLabels:!1},{width:"half",height:"m",order:58}),Ve("chart_dow",{scope:"calendar",showLabels:!0},{width:"half",height:"m",order:58.5}),Ve("chart_hod",{showHint:!1},{width:"full",height:"l",order:59})]}const ry={class:"add-menu__header"},ny={class:"add-menu__hint"},sy={class:"add-menu__list"},ly=["onClick"],iy=ze(Me({__name:"DashboardAddMenu",props:{open:{type:Boolean},x:{},y:{},row:{},col:{},widgetTypeList:{}},emits:["close","confirm"],setup(e){return(t,a)=>t.open?(y(),k("div",{key:0,class:"add-menu",style:Le({left:t.x+"px",top:t.y+"px"}),role:"menu"},[d("div",ry,[d("div",null,[a[1]||(a[1]=d("div",{class:"add-menu__title"},"Add widget",-1)),d("div",ny,"Platz: Row "+N(t.row+1)+", Col "+N(t.col),1)]),d("button",{type:"button",class:"ghost sm close-btn",onClick:a[0]||(a[0]=o=>t.$emit("close")),"aria-label":"Close add menu"},"")]),d("div",sy,[(y(!0),k(le,null,we(t.widgetTypeList,o=>(y(),k("button",{key:o.type,type:"button",class:"add-btn",onClick:r=>t.$emit("confirm",o.type)},N(o.label),9,ly))),128))])],4)):V("",!0)}}),[["__scopeId","data-v-022ff937"]]),cy=["draggable","onClick","onDragstart"],dy=ze(Me({__name:"DashboardGrid",props:{ordered:{},editable:{type:Boolean},selectedId:{},widgetTypeList:{}},emits:["select","add","reorder"],setup(e,{emit:t}){const a=e,o=t,r=Q(null),n=Q(null),s=Q(null),l=Ut({open:!1,x:0,y:0,row:0,col:0}),i=B(()=>a.widgetTypeList||[]),c=B(()=>{const h=[];let x={items:[],col:1,remaining:4};const E=()=>{x.items.length&&h.push({items:x.items}),x={items:[],col:1,remaining:4}};return a.ordered.forEach(P=>{const q=p(P.layout.width);q>x.remaining&&E();const O=x.col;x.items.push({...P,span:q,start:O}),x.col+=q,x.remaining-=q}),E(),h});function u(h){switch(h){case"quarter":return"w-quarter";case"half":return"w-half";default:return"w-full"}}function p(h){return h==="quarter"?1:h==="half"?2:4}function w(h){switch(h){case"s":return"h-s";case"l":return"h-l";case"xl":return"h-xl";default:return"h-m"}}function v(h){const x=(h==null?void 0:h.scale)||(h==null?void 0:h.textSize)||"md";return x==="sm"?"scale-sm":x==="lg"?"scale-lg":x==="xl"?"scale-xl":"scale-md"}function g(h){const x=(h==null?void 0:h.scale)||(h==null?void 0:h.textSize)||"md",E=x==="sm"?.85:x==="lg"?1.35:x==="xl"?1.6:1.1,P=h!=null&&h.dense?.72:1,q=E*P,O=14*E;return{"--widget-scale":String(E),"--widget-space":String(q),"--widget-density":String(P),"--widget-title-size":`${O}px`}}function f(h){const x=r.value;if(!x)return{row:0,col:1};const E=x.getBoundingClientRect(),P=12,O=(E.width-P*3)/4,j=Math.max(0,Math.min(E.width,h.clientX-E.left)),K=Math.min(3,Math.max(0,Math.floor(j/(O+P))))+1,J=Math.max(0,Math.min(E.height+400,h.clientY-E.top)),pe=Number.parseFloat(getComputedStyle(x).getPropertyValue("--grid-row"))||24;return{row:Math.max(0,Math.floor(J/(pe+P))),col:K}}function m(h,x){var K,J,pe,Y;const E=c.value,P=E[h]||E[E.length-1]||{items:[]},q=[...P.items||[]].filter(R=>R.start<x).sort((R,ae)=>R.start-ae.start).pop(),O=[...P.items||[]].filter(R=>R.start>=x).sort((R,ae)=>R.start-ae.start)[0];if(q&&O)return(q.layout.order+O.layout.order)/2;if(q)return(q.layout.order||0)+5;if(O)return(O.layout.order||0)-5;const j=E[h-1]||E[E.length-1];return j&&j.items.length?(j.items[j.items.length-1].layout.order||0)+10:((((Y=(pe=(J=(K=E[0])==null?void 0:K.items)==null?void 0:J[0])==null?void 0:pe.layout)==null?void 0:Y.order)??0)||0)-10}function D(h){if(!a.editable||!i.value.length)return;const{row:x,col:E}=f(h);l.open=!0,l.x=h.clientX,l.y=h.clientY,l.row=x,l.col=E}function T(h){a.editable&&(h.target.closest(".layout-item")||D(h))}function M(h){a.editable&&(h.target.closest(".layout-item")||D(h))}function _(h){if(!a.editable||!n.value)return;const{row:x,col:E}=f(h);s.value=m(x,E)}function $(){if(!a.editable||!n.value)return;const h=n.value,x=s.value??void 0;n.value=null,s.value=null,o("reorder",h,x)}function I(){l.open=!1}function C(h){const x=m(l.row,l.col);o("add",h,x),I()}function S(h){a.editable&&(n.value=h,s.value=null,I())}function b(){n.value=null,s.value=null}return(h,x)=>(y(),k(le,null,[d("div",{ref_key:"gridEl",ref:r,class:Ee(["layout-grid",{"show-guides":h.editable}]),onClick:T,onContextmenu:Qe(M,["prevent"]),onDragover:Qe(_,["prevent"]),onDrop:Qe($,["prevent"])},[(y(!0),k(le,null,we(h.ordered,E=>(y(),k("div",{key:E.id,class:Ee(["layout-item",[u(E.layout.width),w(E.layout.height),v(E.options),{"is-editable":h.editable,"is-selected":h.editable&&h.selectedId===E.id,"is-dragging":h.editable&&n.value===E.id}]]),style:Le(g(E.options)),draggable:h.editable,onClick:Qe(P=>o("select",E.id),["stop"]),onDragstart:P=>S(E.id),onDragend:b},[(y(),Re(tu(E.component),Vl({ref_for:!0},E.props),null,16))],46,cy))),128))],34),$e(iy,{open:h.editable&&l.open,x:l.x,y:l.y,row:l.row,col:l.col,"widget-type-list":i.value,onClose:I,onConfirm:C},null,8,["open","x","y","row","col","widget-type-list"])],64))}}),[["__scopeId","data-v-efb6134a"]]),uy={key:0,class:"options-pop"},fy={class:"opt-section"},gy=["for"],py=["id","min","max","step","value","onInput"],hy=["id","value","onChange"],my=["value"],vy=["id","checked","onChange"],by=["id","value","onInput"],yy=["id","value","onInput"],wy={key:0,class:"opt-section"},ky=["for"],_y=["id","min","max","step","value","onInput"],xy=["id","value","onChange"],Cy=["value"],Sy=["id","checked","onChange"],$y=["id","value","onInput"],Ty=["id","value","onInput"],My={key:5,class:"colorlist"},Dy=["value","onInput"],Ay=["onClick"],Ey={key:6,class:"multi"},Ly=["value","checked","onChange"],Oy=["id","value","onInput"],By={key:8,class:"filter-builder"},Ny=["value","onInput"],Iy=["value","onInput"],Py=["value","onInput"],Fy=["onClick"],Hy=["onClick"],Wy={key:1,class:"opt-row opt-row--footer"},zy=ze(Me({__name:"WidgetOptionsMenu",props:{entry:{},options:{},open:{type:Boolean},showAdvanced:{type:Boolean},context:{}},emits:["change","toggle","open-advanced"],setup(e,{emit:t}){const a=e,o=t,r=Q({}),n=[{key:"titlePrefix",label:"Title prefix",type:"text"},{key:"showHeader",label:"Show title",type:"toggle"},{key:"cardBg",label:"Card background",type:"color",hint:"Pick a card fill; leave empty for default."},{key:"scale",label:"Scale",type:"select",options:[{value:"sm",label:"Small"},{value:"md",label:"Normal"},{value:"lg",label:"Large"},{value:"xl",label:"Extra large"}]},{key:"dense",label:"Dense mode",type:"toggle"}],s=B(()=>{var E,P;const S=new Set(n.map(q=>q.key)),b=((E=a.entry)==null?void 0:E.controls)||[],h=typeof((P=a.entry)==null?void 0:P.dynamicControls)=="function"?a.entry.dynamicControls(a.options||{},a.context||{}):[];return[...b,...h].filter(q=>!S.has(q.key))});Be(()=>a.options,S=>{var h;const b=((h=a.entry)==null?void 0:h.defaultOptions)||{};r.value={...b,...S||{}}},{immediate:!0,deep:!0});const l=B({get:()=>!!a.open,set:S=>o("toggle",S)});function i(S,b){const h=Number(b.target.value);o("change",S,h)}function c(S,b){const h=b.target.value;o("change",S,h)}function u(S,b){const h=b.target.checked;o("change",S,h)}function p(S,b){const h=b.target.value;o("change",S,h)}function w(S,b,h){const x=h.target.checked,E=Array.isArray(r.value[S])?[...r.value[S]]:[],P=new Set(E);x?P.add(b):P.delete(b),o("change",S,Array.from(P))}function v(S){if(S==="scale")return r.value.scale??r.value.textSize;if(!S.includes("."))return r.value[S];const b=S.split(".");let h=r.value;for(const x of b){if(h==null)return;h=h[x]}return h}function g(S){const b=v(S);return Array.isArray(b)&&b.length?b:typeof b=="string"&&b.trim()?b.split(",").map(h=>h.trim()).filter(Boolean):D.slice(0,5)}function f(S,b,h){const x=h.target.value,E=[...g(S)];E[b]=x,o("change",S,E)}function m(S){const b=[...g(S),"#cccccc"];o("change",S,b)}const D=["#2563EB","#F97316","#10B981","#A855F7","#EC4899"];function T(S){const b=v(S);if(Array.isArray(b))return b.map(h=>({label:String((h==null?void 0:h.label)||""),labels:Array.isArray(h==null?void 0:h.labels)?h.labels.join(", "):String((h==null?void 0:h.labels)||""),assignees:Array.isArray(h==null?void 0:h.assignees)?h.assignees.join(", "):String((h==null?void 0:h.assignees)||"")}));if(typeof b=="string"&&b.trim())try{const h=JSON.parse(b);if(Array.isArray(h))return h.map(x=>({label:String((x==null?void 0:x.label)||""),labels:Array.isArray(x==null?void 0:x.labels)?x.labels.join(", "):String((x==null?void 0:x.labels)||""),assignees:Array.isArray(x==null?void 0:x.assignees)?x.assignees.join(", "):String((x==null?void 0:x.assignees)||"")}))}catch{return[]}return[]}function M(S){const b=[...T(S),{label:"",labels:"",assignees:""}];o("change",S,I(b))}function _(S,b){const h=T(S).filter((x,E)=>E!==b);o("change",S,I(h))}function $(S,b,h,x){const E=x.target.value,P=T(S).map((q,O)=>O===b?{...q,[h]:E}:q);o("change",S,I(P))}function I(S){return S.map(b=>({label:b.label.trim(),labels:C(b.labels),assignees:C(b.assignees)}))}function C(S){return S.split(",").map(b=>b.trim()).filter(Boolean)}return(S,b)=>(y(),k("div",{class:"options-wrapper",onKeydown:b[2]||(b[2]=Qe(()=>{},["stop"]))},[d("button",{type:"button",class:"ghost",title:"Configure widget",onClick:b[0]||(b[0]=Qe(h=>l.value=!l.value,["stop"]))},""),l.value?(y(),k("div",uy,[d("div",fy,[b[3]||(b[3]=d("div",{class:"opt-section__title"},"Layout & title",-1)),(y(),k(le,null,we(n,h=>d("div",{key:h.key,class:"opt-row"},[d("label",{for:`opt-${h.key}`},N(h.label),9,gy),h.type==="number"?(y(),k("input",{key:0,id:`opt-${h.key}`,type:"number",min:h.min,max:h.max,step:h.step||1,value:v(h.key)??"",onInput:x=>i(h.key,x)},null,40,py)):h.type==="select"?(y(),k("select",{key:1,id:`opt-${h.key}`,value:v(h.key),onChange:x=>c(h.key,x)},[(y(!0),k(le,null,we(h.options||[],x=>(y(),k("option",{key:x.value,value:x.value},N(x.label),9,my))),128))],40,hy)):h.type==="toggle"?(y(),k("input",{key:2,id:`opt-${h.key}`,type:"checkbox",checked:!!v(h.key),onChange:x=>u(h.key,x)},null,40,vy)):h.type==="text"?(y(),k("input",{key:3,id:`opt-${h.key}`,type:"text",value:v(h.key)??"",onInput:x=>p(h.key,x)},null,40,by)):h.type==="color"?(y(),k("input",{key:4,id:`opt-${h.key}`,type:"color",value:v(h.key)||"#000000",onInput:x=>p(h.key,x)},null,40,yy)):V("",!0)])),64))]),s.value.length?(y(),k("div",wy,[b[5]||(b[5]=d("div",{class:"opt-section__title"},"Widget options",-1)),(y(!0),k(le,null,we(s.value,h=>(y(),k("div",{key:h.key,class:"opt-row"},[d("label",{for:`opt-${h.key}`},N(h.label),9,ky),h.type==="number"?(y(),k("input",{key:0,id:`opt-${h.key}`,type:"number",min:h.min,max:h.max,step:h.step||1,value:v(h.key)??"",onInput:x=>i(h.key,x)},null,40,_y)):h.type==="select"?(y(),k("select",{key:1,id:`opt-${h.key}`,value:v(h.key),onChange:x=>c(h.key,x)},[(y(!0),k(le,null,we(h.options||[],x=>(y(),k("option",{key:x.value,value:x.value},N(x.label),9,Cy))),128))],40,xy)):h.type==="toggle"?(y(),k("input",{key:2,id:`opt-${h.key}`,type:"checkbox",checked:!!v(h.key),onChange:x=>u(h.key,x)},null,40,Sy)):h.type==="text"?(y(),k("input",{key:3,id:`opt-${h.key}`,type:"text",value:v(h.key)??"",onInput:x=>p(h.key,x)},null,40,$y)):h.type==="color"?(y(),k("input",{key:4,id:`opt-${h.key}`,type:"color",value:v(h.key)||"#000000",onInput:x=>p(h.key,x)},null,40,Ty)):h.type==="colorlist"?(y(),k("div",My,[(y(!0),k(le,null,we(g(h.key),(x,E)=>(y(),k("div",{key:`${h.key}-${E}`,class:"colorlist__item"},[d("input",{type:"color",value:x,onInput:P=>f(h.key,E,P)},null,40,Dy)]))),128)),d("button",{type:"button",class:"ghost sm",onClick:x=>m(h.key)},"+",8,Ay)])):h.type==="multiselect"?(y(),k("div",Ey,[(y(!0),k(le,null,we(h.options||[],x=>(y(),k("label",{key:`${h.key}-${x.value}`,class:"multi__item"},[d("input",{type:"checkbox",value:x.value,checked:Array.isArray(v(h.key))?v(h.key).includes(x.value):!1,onChange:E=>w(h.key,x.value,E)},null,40,Ly),d("span",null,N(x.label),1)]))),128))])):h.type==="textarea"?(y(),k("textarea",{key:7,id:`opt-${h.key}`,rows:"3",value:v(h.key)??"",onInput:x=>p(h.key,x)},null,40,Oy)):h.type==="filterbuilder"?(y(),k("div",By,[b[4]||(b[4]=d("div",{class:"filter-builder__hint"},[De(" Tags and assigned can be used independentlyleave one empty to ignore it. Use commas. Special assignees: "),d("code",null,"me"),De(", "),d("code",null,"unassigned"),De(". ")],-1)),(y(!0),k(le,null,we(T(h.key),(x,E)=>(y(),k("div",{key:`${h.key}-row-${E}`,class:"filter-builder__row"},[d("input",{type:"text",class:"filter-builder__label",value:x.label,placeholder:"Filter label",onInput:P=>$(h.key,E,"label",P)},null,40,Ny),d("input",{type:"text",class:"filter-builder__input",value:x.labels,placeholder:"Tags (comma separated)",onInput:P=>$(h.key,E,"labels",P)},null,40,Iy),d("input",{type:"text",class:"filter-builder__input",value:x.assignees,placeholder:"Assigned (comma separated)",onInput:P=>$(h.key,E,"assignees",P)},null,40,Py),d("button",{type:"button",class:"ghost sm",onClick:P=>_(h.key,E)},"",8,Fy)]))),128)),d("button",{type:"button",class:"ghost sm",onClick:x=>M(h.key)},"+ Add filter",8,Hy)])):V("",!0)]))),128))])):V("",!0),S.showAdvanced?(y(),k("div",Wy,[d("button",{type:"button",class:"link-btn",title:"Opens a full targets editor for this widget only. Use the reset inside to go back to global.",onClick:b[1]||(b[1]=Qe(h=>o("open-advanced"),["stop"]))}," Advanced targets (widget only) ")])):V("",!0)])):V("",!0)],32))}}),[["__scopeId","data-v-fdb4e08b"]]),Ry={key:0,class:"widget-toolbar-layer"},jy={class:"widget-toolbar"},Uy={class:"toolbar-title"},Vy={key:0,class:"toolbar-actions"},Ky={class:"toolbar-quick"},qy={class:"toolbar-field"},Gy=["value"],Jy={class:"toolbar-field"},Yy=["value"],Zy={class:"toolbar-field"},Xy=["value"],Qy={class:"toolbar-field toolbar-field--toggle"},e1=["checked"],t1={class:"toolbar-field toolbar-field--toggle"},a1=["checked"],o1={key:1,class:"toolbar-actions"},r1=ze(Me({__name:"DashboardToolbar",props:{editable:{type:Boolean},selectedItem:{},openOptionsId:{},presetLabel:{},context:{}},emits:["select-first","move","cycle-width","cycle-height","remove","reset-preset","toggle-options","open-advanced","edit-options"],setup(e){const t=e,a=B(()=>{var u,p,w;const i=((p=(u=t.selectedItem)==null?void 0:u.props)==null?void 0:p.title)||"";if(i)return i;const c=t.selectedItem?Da[t.selectedItem.type]:null;return(c==null?void 0:c.label)||((w=t.selectedItem)==null?void 0:w.type)||"Widget"});function o(i){var c,u;return(u=(c=t.selectedItem)==null?void 0:c.options)==null?void 0:u[i]}function r(i){return Da[i]}function n(i){var c;return!!((c=Da[i])!=null&&c.configurable)}function s(i){return i==="quarter"?"":i==="half"?"":"1"}function l(i){return i==="s"?"S":i==="l"?"L":i==="xl"?"XL":"M"}return(i,c)=>(y(),Re(Hd,{to:"body"},[i.editable?(y(),k("div",Ry,[d("div",jy,[d("div",Uy,[i.selectedItem?(y(),k(le,{key:0},[De(N(a.value),1)],64)):(y(),k(le,{key:1},[De("Click a widget to edit")],64))]),i.selectedItem?(y(),k("div",Vy,[d("button",{type:"button",class:"ghost",title:"Move earlier",onClick:c[0]||(c[0]=u=>i.$emit("move","up"))},""),d("button",{type:"button",class:"ghost",title:"Move later",onClick:c[1]||(c[1]=u=>i.$emit("move","down"))},""),d("button",{type:"button",class:"ghost",title:"Cycle width",onClick:c[2]||(c[2]=u=>i.$emit("cycle-width"))},N(s(i.selectedItem.layout.width)),1),d("button",{type:"button",class:"ghost",title:"Cycle height",onClick:c[3]||(c[3]=u=>i.$emit("cycle-height"))},N(l(i.selectedItem.layout.height)),1),d("div",Ky,[d("label",qy,[c[15]||(c[15]=d("span",null,"Title",-1)),d("input",{type:"text",value:o("titlePrefix")||"",placeholder:"Prefix",onInput:c[4]||(c[4]=u=>i.$emit("edit-options",i.selectedItem.id,"titlePrefix",u.target.value))},null,40,Gy)]),d("label",Jy,[c[16]||(c[16]=d("span",null,"Card",-1)),d("input",{type:"color",value:o("cardBg")||"#ffffff",onInput:c[5]||(c[5]=u=>i.$emit("edit-options",i.selectedItem.id,"cardBg",u.target.value))},null,40,Yy)]),d("label",Zy,[c[18]||(c[18]=d("span",null,"Scale",-1)),d("select",{value:o("scale")||"md",onChange:c[6]||(c[6]=u=>i.$emit("edit-options",i.selectedItem.id,"scale",u.target.value))},[...c[17]||(c[17]=[d("option",{value:"sm"},"Small",-1),d("option",{value:"md"},"Normal",-1),d("option",{value:"lg"},"Large",-1),d("option",{value:"xl"},"Extra large",-1)])],40,Xy)]),d("label",Qy,[d("input",{type:"checkbox",checked:o("showHeader")!==!1,onChange:c[7]||(c[7]=u=>i.$emit("edit-options",i.selectedItem.id,"showHeader",u.target.checked))},null,40,e1),c[19]||(c[19]=d("span",null,"Show title",-1))]),d("label",t1,[d("input",{type:"checkbox",checked:!!o("dense"),onChange:c[8]||(c[8]=u=>i.$emit("edit-options",i.selectedItem.id,"dense",u.target.checked))},null,40,a1),c[20]||(c[20]=d("span",null,"Dense",-1))])]),i.selectedItem&&n(i.selectedItem.type)?(y(),Re(zy,{key:0,entry:r(i.selectedItem.type),options:i.selectedItem.options,open:i.openOptionsId===i.selectedItem.id,"show-advanced":i.selectedItem.type==="targets_v2",context:i.context,onToggle:c[9]||(c[9]=u=>i.$emit("toggle-options",i.selectedItem.id,u)),onOpenAdvanced:c[10]||(c[10]=u=>i.$emit("open-advanced",i.selectedItem.id)),onChange:c[11]||(c[11]=(u,p)=>i.$emit("edit-options",i.selectedItem.id,u,p))},null,8,["entry","options","open","show-advanced","context"])):V("",!0),i.presetLabel?(y(),k("button",{key:1,type:"button",class:"ghost",title:"Reset widgets to preset",onClick:c[12]||(c[12]=u=>i.$emit("reset-preset"))}," Reset "+N(i.presetLabel),1)):V("",!0),d("button",{type:"button",class:"ghost danger",title:"Remove widget",onClick:c[13]||(c[13]=u=>i.$emit("remove"))},"")])):(y(),k("div",o1,[d("button",{type:"button",class:"ghost",onClick:c[14]||(c[14]=u=>i.$emit("select-first"))},"Select first widget")]))])])):V("",!0)]))}}),[["__scopeId","data-v-99b1320b"]]),n1={id:"opsdash-sidebar-pane-targets",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-targets"},s1={class:"target-config"},l1={class:"field"},i1=["value","aria-invalid"],c1={class:"field"},d1=["value","aria-invalid"],u1={class:"cat-header"},f1=["value","onInput"],g1=["disabled","onClick"],p1={class:"cat-fields"},h1={class:"field"},m1=["value","aria-invalid","onInput"],v1={class:"field"},b1=["value","onChange"],y1={class:"field checkbox"},w1=["checked","onChange"],k1={class:"field color-field"},_1=["aria-expanded","aria-label","onClick"],x1=["id"],C1={class:"swatch-grid",role:"group","aria-label":"Preset colors"},S1=["aria-label","onClick"],$1={class:"custom-color"},T1=["value","onInput"],M1={class:"target-section"},D1={class:"field checkbox"},A1=["checked"],E1={class:"field"},L1=["value"],O1={class:"field"},B1=["value","aria-invalid"],N1={class:"field"},I1=["value","aria-invalid"],P1={class:"target-section"},F1={class:"field"},H1=["value"],W1={class:"field"},z1=["value","aria-invalid"],R1={class:"field"},j1=["value","aria-invalid"],U1={class:"target-section"},V1={class:"field checkbox"},K1=["checked"],q1={class:"field checkbox"},G1=["checked"],J1=ze(Me({__name:"SidebarTargetsPane",props:{targets:{},categoryOptions:{},totalTargetMessage:{},allDayHoursMessage:{},categoryTargetMessages:{},paceThresholdMessages:{},forecastMomentumMessage:{},forecastPaddingMessage:{},canAddCategory:{type:Boolean},colorPalette:{}},emits:["total-target-input","set-all-day-hours","set-category-label","remove-category","set-category-target","set-category-pace","set-category-weekend","set-category-color","add-category","set-include-weekend-total","set-pace-mode","set-threshold","set-forecast-method","set-forecast-momentum","set-forecast-padding","set-ui-option"],setup(e,{emit:t}){const a=e,{targets:o,categoryOptions:r,totalTargetMessage:n,allDayHoursMessage:s,categoryTargetMessages:l,paceThresholdMessages:i,forecastMomentumMessage:c,forecastPaddingMessage:u,canAddCategory:p,colorPalette:w}=Yr(a),v=t,g=B(()=>{var C;return M((C=w.value)==null?void 0:C[0])??"#2563EB"}),f=Q(null);function m(C){const S=C.target;S!=null&&S.closest("[data-color-popover]")||T()}At(()=>{document.addEventListener("click",m)}),Nt(()=>{document.removeEventListener("click",m)});function D(C){if(f.value===C){T();return}f.value=C,Qt(()=>{const S=document.getElementById(`opsdash-color-popover-${C}`);S==null||S.focus()})}function T(){f.value=null}function M(C){if(typeof C!="string")return null;const S=C.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(S))return null;if(S.length===4){const[,b,h,x]=S;return`#${b}${b}${h}${h}${x}${x}`.toUpperCase()}return S.toUpperCase()}function _(C){return M(C==null?void 0:C.color)??g.value}function $(C,S){const b=M(S)??g.value;v("set-category-color",{id:C,color:b})}function I(C,S){const b=M(S)??g.value;v("set-category-color",{id:C,color:b}),T()}return(C,S)=>{var b,h,x,E,P,q,O,j,K,J,pe,Y;return y(),k("div",n1,[S[36]||(S[36]=d("div",{class:"sb-title"},"Target Settings",-1)),d("div",s1,[d("div",l1,[S[14]||(S[14]=d("span",{class:"label"},"Total target (h)",-1)),d("input",{type:"number",value:A(o).totalHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!A(n),onInput:S[0]||(S[0]=R=>C.$emit("total-target-input",R.target.value))},null,40,i1),A(n)?(y(),k("div",{key:0,class:Ee(["input-message",(b=A(n))==null?void 0:b.tone])},N((h=A(n))==null?void 0:h.text),3)):V("",!0)]),d("div",c1,[S[15]||(S[15]=d("span",{class:"label"},"All-day event (h per day)",-1)),d("input",{type:"number",value:A(o).allDayHours,min:"0",max:"24",step:"0.25","aria-invalid":!!A(s),onInput:S[1]||(S[1]=R=>C.$emit("set-all-day-hours",R.target.value))},null,40,d1),A(s)?(y(),k("div",{key:0,class:Ee(["input-message",(x=A(s))==null?void 0:x.tone])},N((E=A(s))==null?void 0:E.text),3)):V("",!0)]),(y(!0),k(le,null,we(A(r),R=>{var ae,ve;return y(),k("div",{class:"target-category",key:R.id},[d("div",u1,[d("span",{class:"cat-color-indicator",style:Le({backgroundColor:_(R)}),"aria-hidden":"true"},null,4),d("input",{class:"cat-name",type:"text",value:R.label,placeholder:"Category name",onInput:H=>C.$emit("set-category-label",{id:R.id,label:H.target.value})},null,40,f1),d("button",{class:"remove-cat",type:"button",disabled:A(r).length<=1,title:"Remove category",onClick:H=>C.$emit("remove-category",R.id)},"  ",8,g1)]),d("div",p1,[d("label",h1,[S[16]||(S[16]=d("span",{class:"label"},"Target (h)",-1)),d("input",{type:"number",value:R.targetHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!A(l)[R.id],onInput:H=>C.$emit("set-category-target",{id:R.id,value:H.target.value})},null,40,m1),A(l)[R.id]?(y(),k("div",{key:0,class:Ee(["input-message",(ae=A(l)[R.id])==null?void 0:ae.tone])},N((ve=A(l)[R.id])==null?void 0:ve.text),3)):V("",!0)]),d("label",v1,[S[18]||(S[18]=d("span",{class:"label"},"Pace mode",-1)),d("select",{value:R.paceMode||A(o).pace.mode,onChange:H=>C.$emit("set-category-pace",{id:R.id,mode:H.target.value})},[...S[17]||(S[17]=[d("option",{value:"days_only"},"Days only",-1),d("option",{value:"time_aware"},"Time aware",-1)])],40,b1)]),d("label",y1,[d("input",{type:"checkbox",checked:R.includeWeekend,onChange:H=>C.$emit("set-category-weekend",{id:R.id,value:H.target.checked})},null,40,w1),S[19]||(S[19]=d("span",null,"Weekend",-1))]),d("div",k1,[d("div",{class:"color-trigger-wrapper","data-color-popover":"",onClick:S[3]||(S[3]=Qe(()=>{},["stop"]))},[d("button",{type:"button",class:"color-link","aria-expanded":f.value===R.id,"aria-label":`Choose color for ${R.label}`,onClick:H=>D(R.id)}," Color ",8,_1),f.value===R.id?(y(),k("div",{key:0,class:"color-popover",id:`opsdash-color-popover-${R.id}`,tabindex:"-1",onKeydown:S[2]||(S[2]=ja(Qe(H=>T(),["prevent"]),["esc"]))},[d("div",C1,[(y(!0),k(le,null,we(A(w),H=>(y(),k("button",{key:`${R.id}-swatch-${H}`,type:"button",class:Ee(["color-swatch",{active:_(R)===H}]),style:Le({backgroundColor:H}),"aria-label":`Use color ${H}`,onClick:re=>I(R.id,H)},null,14,S1))),128))]),d("label",$1,[S[20]||(S[20]=d("span",null,"Custom",-1)),d("input",{class:"color-input",type:"color",value:_(R),"aria-label":"Pick custom color",onInput:H=>$(R.id,H.target.value)},null,40,T1)])],40,x1)):V("",!0)])])])])}),128)),$e(A(rt),{type:"tertiary",class:"add-category",disabled:!A(p),onClick:S[4]||(S[4]=R=>C.$emit("add-category"))},{default:Ue(()=>[...S[21]||(S[21]=[De(" Add category ",-1)])]),_:1},8,["disabled"]),d("div",M1,[S[27]||(S[27]=d("div",{class:"section-title"},"Pace",-1)),d("label",D1,[d("input",{type:"checkbox",checked:A(o).pace.includeWeekendTotal,onChange:S[5]||(S[5]=R=>C.$emit("set-include-weekend-total",R.target.checked))},null,40,A1),S[22]||(S[22]=d("span",null,"Count weekend in total pace",-1))]),d("label",E1,[S[24]||(S[24]=d("span",{class:"label"},"Mode",-1)),d("select",{value:A(o).pace.mode,onChange:S[6]||(S[6]=R=>C.$emit("set-pace-mode",R.target.value))},[...S[23]||(S[23]=[d("option",{value:"days_only"},"Days only",-1),d("option",{value:"time_aware"},"Time aware",-1)])],40,L1)]),d("label",O1,[S[25]||(S[25]=d("span",{class:"label"},"On track  gap (%)",-1)),d("input",{type:"number",value:A(o).pace.thresholds.onTrack,step:"0.1","aria-invalid":!!A(i).onTrack,onInput:S[7]||(S[7]=R=>C.$emit("set-threshold",{key:"onTrack",value:R.target.value}))},null,40,B1),A(i).onTrack?(y(),k("div",{key:0,class:Ee(["input-message",(P=A(i).onTrack)==null?void 0:P.tone])},N((q=A(i).onTrack)==null?void 0:q.text),3)):V("",!0)]),d("label",N1,[S[26]||(S[26]=d("span",{class:"label"},"At risk  gap (%)",-1)),d("input",{type:"number",value:A(o).pace.thresholds.atRisk,step:"0.1","aria-invalid":!!A(i).atRisk,onInput:S[8]||(S[8]=R=>C.$emit("set-threshold",{key:"atRisk",value:R.target.value}))},null,40,I1),A(i).atRisk?(y(),k("div",{key:0,class:Ee(["input-message",(O=A(i).atRisk)==null?void 0:O.tone])},N((j=A(i).atRisk)==null?void 0:j.text),3)):V("",!0)])]),d("div",P1,[S[32]||(S[32]=d("div",{class:"section-title"},"Forecast",-1)),d("label",F1,[S[29]||(S[29]=d("span",{class:"label"},"Primary method",-1)),d("select",{value:A(o).forecast.methodPrimary,onChange:S[9]||(S[9]=R=>C.$emit("set-forecast-method",R.target.value))},[...S[28]||(S[28]=[d("option",{value:"linear"},"Linear",-1),d("option",{value:"momentum"},"Momentum",-1)])],40,H1)]),d("label",W1,[S[30]||(S[30]=d("span",{class:"label"},"Momentum window (days)",-1)),d("input",{type:"number",value:A(o).forecast.momentumLastNDays,min:"1",max:"14",step:"1","aria-invalid":!!A(c),onInput:S[10]||(S[10]=R=>C.$emit("set-forecast-momentum",R.target.value))},null,40,z1),A(c)?(y(),k("div",{key:0,class:Ee(["input-message",(K=A(c))==null?void 0:K.tone])},N((J=A(c))==null?void 0:J.text),3)):V("",!0)]),d("label",R1,[S[31]||(S[31]=d("span",{class:"label"},"Padding (h)",-1)),d("input",{type:"number",value:A(o).forecast.padding,min:"0",step:"0.1","aria-invalid":!!A(u),onInput:S[11]||(S[11]=R=>C.$emit("set-forecast-padding",R.target.value))},null,40,j1),A(u)?(y(),k("div",{key:0,class:Ee(["input-message",(pe=A(u))==null?void 0:pe.tone])},N((Y=A(u))==null?void 0:Y.text),3)):V("",!0)])]),d("div",U1,[S[35]||(S[35]=d("div",{class:"section-title"},"Display",-1)),d("label",V1,[d("input",{type:"checkbox",checked:A(o).ui.showCalendarCharts,onChange:S[12]||(S[12]=R=>C.$emit("set-ui-option",{key:"showCalendarCharts",value:R.target.checked}))},null,40,K1),S[33]||(S[33]=d("span",null,"Show calendar charts",-1))]),d("label",q1,[d("input",{type:"checkbox",checked:A(o).ui.showCategoryCharts,onChange:S[13]||(S[13]=R=>C.$emit("set-ui-option",{key:"showCategoryCharts",value:R.target.checked}))},null,40,G1),S[34]||(S[34]=d("span",null,"Show category charts",-1))])])])])}}}),[["__scopeId","data-v-1e606590"]]),Y1={key:0,class:"advanced-overlay",role:"dialog","aria-modal":"true","aria-label":"Targets configuration"},Z1={class:"advanced-panel"},X1=ze(Me({__name:"DashboardAdvancedTargetsOverlay",props:{widgetId:{},widgets:{},contextTargetsConfig:{}},emits:["close","save","use-global","open-onboarding"],setup(e,{emit:t}){const a=e,o=t,r=Q(null),n=Q(null),s=Q(null),l=Q(null),i=Q(null),c=Ut({onTrack:null,atRisk:null}),u=Ut({}),p=ht(void 0);Be(()=>a.widgetId,F=>{if(!F){r.value=null,m();return}const z=a.widgets.find(ye=>ye.id===F),U=(z==null?void 0:z.options)||{},ne=U.useLocalConfig&&U.localConfig?ht(U.localConfig):ht(a.contextTargetsConfig);r.value=Jt(ne),m()},{immediate:!0});const w=B(()=>{var F;return((F=r.value)==null?void 0:F.categories)??[]}),v=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],g=B(()=>{const F=new Set,z=U=>{const ne=$(U);ne&&F.add(ne)};return w.value.forEach(U=>z(U.color)),v.forEach(U=>F.add(U)),Array.from(F)}),f=B(()=>{const F=r.value;return F?I(F)!==null:!1});function m(){n.value=null,s.value=null,l.value=null,i.value=null,c.onTrack=null,c.atRisk=null,Object.keys(u).forEach(F=>{delete u[F]})}function D(){o("close")}function T(){!a.widgetId||!r.value||o("save",a.widgetId,Jt(r.value))}function M(){a.widgetId&&o("use-global",a.widgetId)}function _(){o("open-onboarding","categories")}function $(F){if(typeof F!="string")return null;const z=F.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(z))return null;if(z.length===4){const[,U,ne,ye]=z;return`#${U}${U}${ne}${ne}${ye}${ye}`.toUpperCase()}return z.toUpperCase()}function I(F){const z=new Set;F.categories.forEach(U=>{(U.groupIds||[]).forEach(ne=>{const ye=Number(ne);Number.isFinite(ye)&&z.add(ye)})});for(let U=1;U<=9;U++)if(!z.has(U))return U;return null}function C(){return`cat-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`}function S(F){const z=new Set;F.categories.forEach(U=>{const ne=$(U==null?void 0:U.color);ne&&z.add(ne)});for(const U of v)if(!z.has(U))return U;return v[0]??null}function b(F){if(!r.value)return;const z=Jt(r.value);F(z),r.value=z}function h(F,z){b(U=>{const ne=U.categories.find(ye=>ye.id===F);ne&&z(ne)})}function x(F){Ma(F,{min:0,max:1e3,step:.5,decimals:2},z=>{n.value=z},z=>b(U=>{U.totalHours=z}))}function E(F){Ma(F,{min:0,max:24,step:.25,decimals:2},z=>{s.value=z},z=>b(U=>{U.allDayHours=z}),"024 hours per day")}function P(F,z){Ma(z,{min:0,max:1e3,step:.5,decimals:2},U=>{u[F]=U},U=>h(F,ne=>{ne.targetHours=U}))}function q(F,z){h(F,U=>{U.label=z.trim()||U.label})}function O(F,z){h(F,U=>{U.includeWeekend=z})}function j(F,z){const U=$(z);h(F,ne=>{ne.color=U??null})}function K(F,z){z!=="days_only"&&z!=="time_aware"||h(F,U=>{U.paceMode=z})}function J(F){b(z=>{z.pace.includeWeekendTotal=F})}function pe(F){F!=="days_only"&&F!=="time_aware"||b(z=>{z.pace.mode=F})}function Y(F,z){Ma(z,{min:-100,max:100,step:.1,decimals:1},U=>{c[F]=U},U=>b(ne=>{ne.pace.thresholds[F]=U}))}function R(F){const z=F==="momentum"?"momentum":"linear";b(U=>{U.forecast.methodPrimary=z})}function ae(F){Ma(F,{min:1,max:14,step:1,decimals:0},z=>{l.value=z},z=>b(U=>{U.forecast.momentumLastNDays=z}))}function ve(F){Ma(F,{min:0,max:100,step:.1,decimals:1},z=>{i.value=z},z=>b(U=>{U.forecast.padding=z}))}function H(F,z){b(U=>{U.ui||(U.ui={...p.ui}),U.ui[F]=z})}function re(){const F=r.value;if(!F)return;const z=I(F);z!==null&&b(U=>{const ne=S(U);U.categories=[...U.categories,{id:C(),label:`Category ${U.categories.length+1}`,targetHours:0,includeWeekend:!0,paceMode:"days_only",color:ne,groupIds:[z]}]})}function be(F){const z=r.value;!z||z.categories.length<=1||(b(U=>{U.categories=U.categories.filter(ne=>ne.id!==F)}),delete u[F])}return(F,z)=>F.widgetId&&r.value?(y(),k("div",Y1,[d("div",Z1,[d("div",{class:"overlay-header"},[z[7]||(z[7]=d("div",null,[d("div",{class:"overlay-title"},"Targets (this widget only)"),d("div",{class:"overlay-subtitle"},"Starts from global targets; saving keeps a local copy for this widget.")],-1)),d("button",{type:"button",class:"ghost danger",onClick:D,"aria-label":"Close"},"")]),$e(J1,{targets:r.value,"category-options":w.value,"total-target-message":n.value,"all-day-hours-message":s.value,"category-target-messages":u,"pace-threshold-messages":c,"forecast-momentum-message":l.value,"forecast-padding-message":i.value,"color-palette":g.value,"can-add-category":f.value,onTotalTargetInput:x,onSetAllDayHours:E,onSetCategoryTarget:z[0]||(z[0]=({id:U,value:ne})=>P(U,ne)),onSetCategoryLabel:z[1]||(z[1]=({id:U,label:ne})=>q(U,ne)),onSetCategoryWeekend:z[2]||(z[2]=({id:U,value:ne})=>O(U,ne)),onSetCategoryPace:z[3]||(z[3]=({id:U,mode:ne})=>K(U,ne)),onSetCategoryColor:z[4]||(z[4]=({id:U,color:ne})=>j(U,ne)),onAddCategory:re,onRemoveCategory:be,onSetIncludeWeekendTotal:J,onSetPaceMode:pe,onSetThreshold:z[5]||(z[5]=({key:U,value:ne})=>Y(U,ne)),onSetForecastMethod:R,onSetForecastMomentum:ae,onSetForecastPadding:ve,onSetUiOption:z[6]||(z[6]=({key:U,value:ne})=>H(U,ne))},null,8,["targets","category-options","total-target-message","all-day-hours-message","category-target-messages","pace-threshold-messages","forecast-momentum-message","forecast-padding-message","color-palette","can-add-category"]),d("div",{class:"overlay-actions"},[d("div",{class:"overlay-actions__left"},[d("button",{type:"button",class:"ghost",onClick:M},"Use global targets"),d("button",{type:"button",class:"ghost",onClick:_},"Edit via onboarding")]),d("div",{class:"overlay-actions__right"},[d("button",{type:"button",class:"ghost",onClick:D},"Cancel"),d("button",{type:"button",class:"ghost primary",onClick:T},"Save")])])])])):V("",!0)}}),[["__scopeId","data-v-539a10f9"]]),Q1=ze(Me({__name:"DashboardLayout",props:{widgets:{},context:{},editable:{type:Boolean},widgetTypes:{},presetLabel:{}},emits:["edit:width","edit:height","edit:remove","edit:move","edit:options","edit:add","edit:reorder","open:onboarding","reset:preset"],setup(e,{expose:t,emit:a}){const o=e,r=a,n=Q(null),s=Q(null),l=Q(null),i=B(()=>(o.widgets||[]).slice().sort((b,h)=>(b.layout.order||0)-(h.layout.order||0)).map(b=>{const h=oy(b,o.context);if(!h)return null;const x=b.options||{};return{...h,id:b.id,layout:b.layout,type:b.type,options:x}}).filter(Boolean)),c=B(()=>i.value.find(b=>b.id===l.value)||null),u=B(()=>o.widgetTypes||[]);Be(()=>o.editable,b=>{b&&!l.value&&i.value.length&&(l.value=i.value[0].id),b||(l.value=null,n.value=null,s.value=null)},{immediate:!0}),Be(()=>i.value.map(b=>b.id).join("|"),()=>{var b;l.value&&!i.value.find(h=>h.id===l.value)&&(l.value=((b=i.value[0])==null?void 0:b.id)||null)});function p(b,h){n.value=h?b:null,!h&&s.value===b&&(s.value=null)}function w(b){l.value=b,n.value=null}function v(){i.value.length&&(l.value=i.value[0].id)}function g(){l.value=null,n.value=null,s.value=null}function f(){l.value&&r("edit:width",l.value)}function m(){l.value&&r("edit:height",l.value)}function D(b){l.value&&r("edit:move",l.value,b)}function T(){l.value&&r("edit:remove",l.value)}function M(b){l.value=b,n.value=b,s.value=b}function _(){n.value=null,s.value=null}function $(b,h){r("edit:options",b,"localConfig",h),r("edit:options",b,"useLocalConfig",!0),_()}function I(b){r("edit:options",b,"useLocalConfig",!1),r("edit:options",b,"localConfig",null),_()}function C(b){_(),r("open:onboarding",b)}function S(){!l.value&&i.value.length&&(l.value=i.value[0].id),l.value&&(n.value=l.value)}return t({openOptionsForSelected:S}),(b,h)=>(y(),k("div",{class:Ee(["layout-wrapper",{"editable-mode":b.editable}]),onClick:Qe(g,["self"])},[$e(dy,{ordered:i.value,editable:b.editable,"selected-id":l.value,"widget-type-list":u.value,onSelect:w,onAdd:h[0]||(h[0]=(x,E)=>r("edit:add",x,E)),onReorder:h[1]||(h[1]=(x,E)=>r("edit:reorder",x,E))},null,8,["ordered","editable","selected-id","widget-type-list"]),$e(r1,{editable:b.editable,"selected-item":c.value,"open-options-id":n.value,"preset-label":b.presetLabel,context:b.context,onSelectFirst:v,onMove:D,onCycleWidth:f,onCycleHeight:m,onRemove:T,onResetPreset:h[2]||(h[2]=x=>r("reset:preset")),onToggleOptions:p,onOpenAdvanced:M,onEditOptions:h[3]||(h[3]=(x,E,P)=>r("edit:options",x,E,P))},null,8,["editable","selected-item","open-options-id","preset-label","context"]),$e(X1,{"widget-id":s.value,widgets:b.widgets,"context-targets-config":b.context.targetsConfig,onClose:_,onSave:$,onUseGlobal:I,onOpenOnboarding:C},null,8,["widget-id","widgets","context-targets-config"])],2))}}),[["__scopeId","data-v-0bb4f135"]]);function e0(e){const t=Q(""),a=Q(""),o=Q(!1),r=Q([]),n=(c,u,p)=>c==="month"?`Month of ${u?u.slice(0,7):`-${p}`}`:`Week of ${u||`-${p}`}`,s=(c,u)=>{const p=c==="month"?"Notes for month starting":"Notes for week starting";return u?`${p} ${u}`:p};async function l(){var p,w,v;const c=await e.getJson(e.route("notes"),{range:e.range.value,offset:e.offset.value|0});t.value=String(((p=c==null?void 0:c.notes)==null?void 0:p.previous)??""),a.value=String(((w=c==null?void 0:c.notes)==null?void 0:w.current)??"");const u=Array.isArray((v=c==null?void 0:c.notes)==null?void 0:v.history)?c.notes.history:[];r.value=u.map((g,f)=>{const m=Number((g==null?void 0:g.offset)??f+1),D=String((g==null?void 0:g.from)??"").trim(),T=String((g==null?void 0:g.content)??"");if(!T.trim())return null;const M=n(e.range.value,D,m),_=s(e.range.value,D);return{id:`offset-${m}-${D||f}`,label:M,title:_,content:T,from:D||void 0,offset:m}}).filter(Boolean)}async function i(){try{o.value=!0,await e.postJson(e.route("notesSave"),{range:e.range.value,offset:e.offset.value|0,content:a.value??""}),e.notifySuccess("Notes saved"),await l()}catch(c){console.error(c),e.notifyError("Failed to save notes")}finally{o.value=!1}}return{notesPrev:t,notesCurrDraft:a,isSavingNote:o,notesHistory:r,fetchNotes:l,saveNotes:i}}let _o=null,In=null,cc=!1;function dc(){var t;if(typeof document>"u")return null;const e=(t=document.getElementById("app"))==null?void 0:t.getAttribute("data-opsdash-theme-preference");return e==="auto"||e==="light"||e==="dark"?e:null}function t0(){if(!(typeof window>"u"))try{kr(),a0()}catch(e){n0()&&console.warn("[opsdash] theme boot install failed",e)}}function a0(){if(_o||In||cc)return;const e=[];if(document.documentElement&&e.push(document.documentElement),document.body&&document.body!==document.documentElement&&e.push(document.body),e.length&&(_o=new MutationObserver(()=>kr()),e.forEach(t=>{_o==null||_o.observe(t,{attributes:!0,attributeFilter:["data-theme","class"]})})),window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>kr();typeof t.addEventListener=="function"?(t.addEventListener("change",a),In=()=>t.removeEventListener("change",a)):typeof t.addListener=="function"&&(t.addListener(a),In=()=>{t.removeListener(a)})}window.addEventListener("oc:theme:changed",kr),cc=!0}function kr(){const e=o0();if(!e)return;["icon","shortcut icon"].forEach(a=>{let o=document.querySelector(`link[rel="${a}"]`);o||(o=document.createElement("link"),o.rel=a,document.head.appendChild(o)),o.type="image/svg+xml",o.href=e})}function o0(){const e=Pn()==="dark",t=r0(),a=t("favicon.svg");if(a)return a;if(e){const r=t("app-dark.svg");if(r)return r}const o=t(e?"app-dark.svg":"app.svg");return o||"/apps-extra/opsdash/img/favicon.svg"}function Pn(){var o,r,n,s,l;const e=(o=document.documentElement)==null?void 0:o.getAttribute("data-theme");if(e==="dark"||e==="light")return e;const t=(r=document.body)==null?void 0:r.getAttribute("data-theme");if(t==="dark"||t==="light")return t;if((n=document.body)!=null&&n.classList.contains("theme--dark"))return"dark";if((s=document.body)!=null&&s.classList.contains("theme--light"))return"light";const a=(l=window.matchMedia)==null?void 0:l.call(window,"(prefers-color-scheme: dark)");return a!=null&&a.matches?"dark":"light"}function r0(){const e=window;return t=>{var a;return typeof((a=e.OC)==null?void 0:a.imagePath)=="function"?e.OC.imagePath("opsdash",t):""}}function n0(){var t;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function s0(e){const t=Q([]),a=Q({}),o=Q({}),r=Q({}),n=Q([]),s=Q(!1),l=Q(!1),i=Q(null),c=Q(""),u=Q(""),p=Q(""),w=Ut({}),v=Q([]),g=Q([]),f=Q([]),m=Q({}),D=Q({}),T=Q({}),M=Q(ht(Gt())),_=Q(null),$=dc()??"auto",I=Q($),C=Q(hr()),S=Q(mr());let b=0;async function h(){var O,j,K,J,pe,Y,R,ae,ve,H,re,be,F,z,U,ne;const x=++b;s.value=!0;const E={...o.value},P={...a.value};let q=!1;try{const ye={range:e.range.value,offset:e.offset.value|0,save:!1},L=await e.getJson(e.route("load"),ye);if(x!==b){(O=e.isDebug)!=null&&O.call(e)&&console.warn("discarding stale load response",{currentSeq:x,loadSeq:b});return}c.value=String(((j=L.meta)==null?void 0:j.uid)??""),u.value=String(((K=L.meta)==null?void 0:K.from)??""),p.value=String(((J=L.meta)==null?void 0:J.to)??""),l.value=!!((pe=L.meta)!=null&&pe.truncated),i.value=((Y=L.meta)==null?void 0:Y.limits)??null;const W=ge=>{const me={};return ge&&typeof ge=="object"&&Object.entries(ge).forEach(([Se,Ce])=>{typeof Ce=="string"&&Ce.trim()!==""&&(me[String(Se)]=Ce)}),me},G=Array.isArray(L.calendars)?L.calendars:[],te=W((R=L.colors)==null?void 0:R.byId),ee=W((ae=L.colors)==null?void 0:ae.byName),oe=G.map(ge=>{if(!ge||typeof ge!="object")return ge;const me={...ge},Se=String(me.id??""),Ce=String(me.displayname??me.name??me.calendar??Se),Te=typeof me.color=="string"?me.color:"",Oe=typeof me.color_src=="string"?me.color_src:"",Ie=Se?te[Se]:"",Fe=Ce?ee[Ce]:"",He=Se?E[Se]:"",ot=Ce?P[Ce]:"",st=He||ot;let Pe=Te;return!Pe&&Ie&&(Pe=Ie),!Pe&&Fe&&(Pe=Fe),(!Pe||Oe==="fallback")&&st&&(Pe=st),!Pe&&st&&(Pe=st),Pe&&(Pe!==Te&&(q=!0),me.color=Pe,Se&&(te[Se]=Pe),Ce&&(ee[Ce]=Pe)),me});t.value=oe,a.value=ee,o.value=te,_.value=L.onboarding?{...L.onboarding}:null,C.value=Mn(L.reportingConfig,C.value),S.value=Dn(L.deckSettings,S.value),e.widgets&&(e.widgets.value=lc(L.widgets,e.widgets.value&&e.widgets.value.length?e.widgets.value:Nn()));const fe=()=>{var me,Se,Ce,Te;let ge=!1;try{const Oe=((me=m.value)==null?void 0:me.pie)||{},Ie=Array.isArray(Oe.ids)?Oe.ids.map(Fe=>String(Fe??"")):[];if(Ie.length){const Fe=Array.isArray(Oe.colors)?Oe.colors:[],He=Ie.map((ot,st)=>o.value[ot]||Fe[st]||"#60a5fa");m.value={...m.value||{},pie:{...Oe,colors:He}},ge=!0}}catch(Oe){(Se=e.isDebug)!=null&&Se.call(e)&&console.warn("recompute pie colors failed",Oe)}try{const Oe=(Ce=m.value)==null?void 0:Ce.perDaySeries;if(Oe&&Array.isArray(Oe.series)){const Ie=Oe.series.map(Fe=>{const He=String((Fe==null?void 0:Fe.id)??""),ot=o.value[He]||Fe.color||"#60a5fa";return{...Fe,color:ot}});m.value={...m.value||{},perDaySeries:{labels:Oe.labels,series:Ie}},ge=!0}}catch(Oe){(Te=e.isDebug)!=null&&Te.call(e)&&console.warn("recompute stacked colors failed",Oe)}return ge},de=((ve=L.groups)==null?void 0:ve.byId)??((H=L.groups)==null?void 0:H.byID)??((re=L.groups)==null?void 0:re.ids)??{},ue={};t.value.forEach(ge=>{const me=String((ge==null?void 0:ge.id)??""),Se=Number((de==null?void 0:de[me])??0);ue[me]=Number.isFinite(Se)?Math.max(0,Math.min(9,Math.trunc(Se))):0}),r.value=ue;const se=((be=L.targets)==null?void 0:be.week)??{},_e=((F=L.targets)==null?void 0:F.month)??{};D.value=se&&typeof se=="object"?se:{},T.value=_e&&typeof _e=="object"?_e:{},M.value=ht(L.targetsConfig??Gt());const he=typeof L.themePreference=="string"?L.themePreference:"";if(I.value=he==="light"||he==="dark"?he:"auto",(z=e.isDebug)!=null&&z.call(e)&&(console.group("[opsdash] calendars/colors"),console.table((t.value||[]).map(ge=>({id:ge.id,name:ge.displayname,color:ge.color,raw:ge.color_raw,src:ge.color_src}))),console.log("colors.byId",o.value),console.log("colors.byName",a.value),L.calDebug&&console.log("server calDebug",L.calDebug),L.debug&&(console.group("[opsdash] server query debug"),console.log(L.debug),console.groupEnd()),console.groupEnd()),t.value.length&&e.fetchDavColors&&t.value.filter(me=>!me.color||me.color_src==="fallback").length)try{const me=await e.fetchDavColors(c.value,t.value.map(Ce=>String(Ce.id)));let Se=!1;t.value=t.value.map(Ce=>{const Te=me[Ce.id];return Te&&Te!==Ce.color&&(Ce.color_src="dav"(Ce).color_raw=Te,Ce.color=Te,Se=!0),Ce}),Object.entries(me).forEach(([Ce,Te])=>{if(Te){const Oe=String(Te);o.value[Ce]=Oe;const Ie=t.value.find(He=>String((He==null?void 0:He.id)??"")===Ce);Ie&&(Ie.color=Oe);const Fe=Ie?String(Ie.displayname??Ie.name??""):"";Fe&&(a.value[Fe]=Oe)}}),Se&&((U=e.isDebug)!=null&&U.call(e)&&console.log("[opsdash] dav colors applied",me),q=!0)}catch(me){(ne=e.isDebug)!=null&&ne.call(e)&&console.warn("dav colors failed",me)}n.value=Array.isArray(L.selected)?L.selected.map(ge=>String(ge)):Array.isArray(L.saved)?L.saved.map(ge=>String(ge)):[],e.userChangedSelection.value=!1,Object.assign(w,L.stats??{}),v.value=Array.isArray(L.byCal)?L.byCal:[],g.value=Array.isArray(L.byDay)?L.byDay:[],f.value=Array.isArray(L.longest)?L.longest:[],m.value=L.charts??{},q&&fe(),await Qt(),e.scheduleDraw(),await e.fetchNotes().catch(()=>{})}catch(ye){console.error(ye),e.notifyError("Failed to load data")}finally{s.value=!1}}return{calendars:t,colorsByName:a,colorsById:o,groupsById:r,selected:n,isLoading:s,isTruncated:l,truncLimits:i,uid:c,from:u,to:p,stats:w,byCal:v,byDay:g,longest:f,charts:m,targetsWeek:D,targetsMonth:T,targetsConfig:M,onboarding:_,load:h,themePreference:I,reportingConfig:C,deckSettings:S}}function l0(e){const t=Q(!1);let a=null;function o(r=!0){a&&clearTimeout(a),a=setTimeout(async()=>{a=null;try{t.value=!0;const n=Jt(e.targetsConfig.value),s={cals:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:n};e.themePreference&&(s.theme_preference=e.themePreference.value),e.reportingConfig&&(s.reporting_config=e.reportingConfig.value),e.deckSettings&&(s.deck_settings=e.deckSettings.value),e.widgets&&(s.widgets=e.widgets.value);const l=await e.postJson(e.route("persist"),s);Array.isArray(l.read)?e.selected.value=l.read.map(p=>String(p)):Array.isArray(l.saved)&&(e.selected.value=l.saved.map(p=>String(p)));const i=l.targets_config_read,c=l.targets_config_saved,u=c0(i??c,n);if(u&&(e.targetsConfig.value=u),e.themePreference){const p=i0(l.theme_preference_read??l.theme_preference_saved);p&&(e.themePreference.value=p)}if(e.reportingConfig){const p=Mn(l.reporting_config_read??l.reporting_config_saved,e.reportingConfig.value);p&&(e.reportingConfig.value=p)}if(e.deckSettings){const p=Dn(l.deck_settings_read??l.deck_settings_saved,e.deckSettings.value);p&&(e.deckSettings.value=p)}if(e.widgets){const p=l.widgets_read??l.widgets_saved??l.widgets;if(Array.isArray(p)){const w=e.widgets.value&&e.widgets.value.length?e.widgets.value:Nn();e.widgets.value=lc(p,w)}}r&&e.onReload&&await e.onReload(),e.notifySuccess("Selection saved")}catch(n){console.error(n),e.notifyError("Failed to save selection")}finally{t.value=!1}},250)}return{queueSave:o,isSaving:t}}function i0(e){return e==="light"||e==="dark"||e==="auto"?e:null}function c0(e,t){if(!e)return;const a=JSON.parse(JSON.stringify(e)),o=Array.isArray(t==null?void 0:t.categories)?t.categories:[],r=new Map;return o.forEach(n=>{const s=String((n==null?void 0:n.id)??"");s&&r.set(s,n)}),Array.isArray(a.categories)&&(a.categories=a.categories.map(n=>{const s=String((n==null?void 0:n.id)??"");if(!s)return n;const l=r.get(s);return l&&((n==null?void 0:n.color)==null||n.color==="")&&typeof l.color=="string"&&l.color&&(n.color=l.color),n})),ht(a)}const d0=1e4;function u0(e){function t(c){return e.selected.value.includes(c)}function a(c,u){const p=new Set(e.selected.value);u?p.add(c):p.delete(c),e.selected.value=Array.from(p)}function o(c){a(c,!t(c)),e.userChangedSelection.value=!0,e.queueSave()}function r(c){e.selected.value=c?e.calendars.value.map(u=>String(u.id)):[]}function n(c,u){const p=Math.max(0,Math.min(9,Math.trunc(Number(u)||0))),w=e.groupsById.value??{};e.groupsById.value={...w,[c]:p},e.queueSave(!1)}function s(c){const u=Math.round(c*100)/100;return Math.min(d0,Math.max(0,u))}function l(c,u){const p=Number(u);if(!Number.isFinite(p)||p<0)return;const w=s(p);if(e.range.value==="month"){const v=s(w/4);e.targetsMonth.value={...e.targetsMonth.value||{},[c]:w},e.targetsWeek.value={...e.targetsWeek.value||{},[c]:v}}else{const v=s(w*4);e.targetsWeek.value={...e.targetsWeek.value||{},[c]:w},e.targetsMonth.value={...e.targetsMonth.value||{},[c]:v}}e.queueSave(!1)}function i(c){e.targetsConfig.value=ht(c),e.queueSave(!1)}return{isSelected:t,toggleCalendar:o,setGroup:n,setTarget:l,updateTargetsConfig:i,selectAll:r}}function f0(e){const t=Q([]),a=Q(!1),o=Q(!1),r=Q(!1),n=Q([]),s=Q(null);async function l(){a.value=!0;try{const v=await e.getJson(e.route("presetsList"),{});t.value=Array.isArray(v==null?void 0:v.presets)?v.presets:[]}catch(v){console.error(v),e.notifyError("Failed to load presets")}finally{a.value=!1}}async function i(v){const g=v.trim();if(g===""){e.notifyError("Enter a preset name.");return}o.value=!0;try{const f={name:g,selected:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:e.targetsConfig.value},m=await e.postJson(e.route("presetsSave"),f);t.value=Array.isArray(m==null?void 0:m.presets)?m.presets:t.value;const D=Array.isArray(m==null?void 0:m.warnings)?m.warnings:[];n.value=D,s.value=g,e.notifySuccess(`Profile "${g}" saved`)}catch(f){console.error(f),e.notifyError("Failed to save preset")}finally{o.value=!1}}function c(v){const g=Array.isArray(v==null?void 0:v.selected)?v.selected.map(D=>String(D)):[];e.selected.value=g;const f=v!=null&&v.groups&&typeof v.groups=="object"?v.groups:{};e.groupsById.value={...f},e.targetsWeek.value=v!=null&&v.targets_week&&typeof v.targets_week=="object"?v.targets_week:{},e.targetsMonth.value=v!=null&&v.targets_month&&typeof v.targets_month=="object"?v.targets_month:{};const m=v!=null&&v.targets_config&&typeof v.targets_config=="object"?ht(v.targets_config):Jt(e.targetsConfig.value);e.targetsConfig.value=m,e.userChangedSelection.value=!1}async function u(v){const g=v.trim();if(g!==""){r.value=!0;try{const f=await e.getJson(e.route("presetsLoad",g),{}),m=(f==null?void 0:f.preset)??{},D=Array.isArray(m==null?void 0:m.warnings)?m.warnings:Array.isArray(f==null?void 0:f.warnings)?f.warnings:[];if(D.length){const T=`Some items in the saved profile are no longer available:

${D.map(M=>` ${M}`).join(`
`)}

Apply the remaining values?`;if(!window.confirm(T)){n.value=D,r.value=!1;return}}c(m),n.value=D,s.value=g,e.notifySuccess(`Profile "${g}" applied`),e.queueSave(!0),l().catch(T=>console.warn("[opsdash] refresh presets after load failed",T))}catch(f){console.error(f),e.notifyError("Failed to load preset")}finally{r.value=!1}}}async function p(v){const g=v.trim();if(g!=="")try{const f=await e.deleteJson(e.route("presetsDelete",g));t.value=Array.isArray(f==null?void 0:f.presets)?f.presets:t.value,e.notifySuccess(`Profile "${g}" deleted`),s.value===g&&(s.value=null)}catch(f){console.error(f),e.notifyError("Failed to delete preset")}}function w(){n.value=[]}return{presets:t,presetsLoading:a,presetSaving:o,presetApplying:r,presetWarnings:n,lastLoadedPreset:s,refreshPresets:l,savePreset:i,loadPreset:u,deletePreset:p,clearPresetWarnings:w}}function g0(){let e=null;function t(){typeof window>"u"||typeof window.requestAnimationFrame!="function"||(e!==null&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(()=>{e=null,window.dispatchEvent(new Event("resize"))}))}return Nt(()=>{e!==null&&typeof window<"u"&&typeof window.cancelAnimationFrame=="function"&&(window.cancelAnimationFrame(e),e=null)}),{scheduleDraw:t}}const p0={load:"/apps/opsdash/overview/load",persist:"/apps/opsdash/overview/persist",notes:"/apps/opsdash/overview/notes",notesSave:"/apps/opsdash/overview/notes",presetsList:"/apps/opsdash/overview/presets",presetsSave:"/apps/opsdash/overview/presets",presetsLoad:"/apps/opsdash/overview/presets",presetsDelete:"/apps/opsdash/overview/presets",ping:"/apps/opsdash/overview/ping"};function h0(){var t,a;const e=typeof window<"u"?window:{};return e.OC&&(e.OC.webroot||((a=(t=e.OC).getRootPath)==null?void 0:a.call(t)))||e._oc_webroot||""}function m0(){const e=B(()=>h0());function t(s,l){const i=typeof window<"u"?window:{},c=p0[s];if(s==="presetsLoad"||s==="presetsDelete"){const u=`${c}/${encodeURIComponent(String(l??""))}`;return i.OC&&typeof i.OC.generateUrl=="function"?i.OC.generateUrl(u):`${e.value}${u}`}return i.OC&&typeof i.OC.generateUrl=="function"?i.OC.generateUrl(c):`${e.value}${c}`}function a(s){const l=new URLSearchParams;return Object.entries(s||{}).forEach(([i,c])=>{Array.isArray(c)?c.forEach(u=>l.append(i,String(u))):c!=null&&l.set(i,String(c))}),l.toString()}async function o(s,l){const i=a(l),c=i?`${s}${s.includes("?")?"&":"?"}${i}`:s,u=await fetch(c,{method:"GET",credentials:"same-origin"});if(!u.ok)throw new Error(`HTTP ${u.status}`);return await u.json()}async function r(s,l){var w;const i=typeof window<"u"?window:{},c=((w=i.OC)==null?void 0:w.requestToken)||i.oc_requesttoken||"",u={"Content-Type":"application/json"};c&&(u.requesttoken=c);const p=await fetch(s,{method:"POST",credentials:"same-origin",headers:u,body:JSON.stringify(l||{})});if(!p.ok)throw new Error(`HTTP ${p.status}`);return await p.json()}async function n(s){var w;const l=typeof window<"u"?window:{},i=((w=l.OC)==null?void 0:w.requestToken)||l.oc_requesttoken||"",c={};i&&(c.requesttoken=i);const u=await fetch(s,{method:"DELETE",credentials:"same-origin",headers:c});if(!u.ok)throw new Error(`HTTP ${u.status}`);const p=await u.text();return p?JSON.parse(p):{}}return{route:t,getJson:o,postJson:r,deleteJson:n,root:e}}function uc(e){const t=typeof document<"u"?document.getElementById("app"):null;if(!t||!t.dataset)return"";const a=t.dataset;return a?String(a[e]??""):""}function v0(e){const t=Q(0),a=B(()=>{var p;const i=[],c=typeof window<"u"?window:{};try{if((p=c.OC)!=null&&p.imagePath){const w=c.OC.imagePath("opsdash","app.svg");w&&i.push(w)}}catch{}const u=e.root.value;return i.push(`${u}/apps/opsdash/img/app.svg`),i.push(`${u}/apps-extra/opsdash/img/app.svg`),i.push(`${u}/apps-writable/opsdash/img/app.svg`),i}),o=B(()=>a.value[Math.min(t.value,a.value.length-1)]||"");function r(){t.value+1<a.value.length&&t.value++}const n=Q(uc("opsdashVersion")||(e.pkgVersion?String(e.pkgVersion):"")),s=Q(uc("opsdashChangelog"));async function l(){if(!(n.value&&s.value))try{const i=await e.getJson(e.pingUrl(),{});!n.value&&typeof(i==null?void 0:i.version)=="string"&&(n.value=i.version),!s.value&&typeof(i==null?void 0:i.changelog)=="string"&&(s.value=i.changelog)}catch{}}return l(),{iconSrc:o,onIconError:r,appVersion:n,changelogUrl:s}}function b0(e){function t(o){const r=typeof window<"u"?window:{};return r.OC&&typeof r.OC.generateUrl=="function"?r.OC.generateUrl(`/apps/calendar/timeGridDay/${o}`):`${e.root.value}/index.php/apps/calendar/timeGridDay/${o}`}async function a(o,r){var i,c,u;const n={};if(!o)return n;const s=((i=window.OC)==null?void 0:i.requestToken)||window.oc_requesttoken||"",l=e.root.value;for(const p of r)try{const w=`${l}/remote.php/dav/calendars/${encodeURIComponent(o)}/${encodeURIComponent(p)}/`,v=`<?xml version="1.0" encoding="UTF-8"?>
<d:propfind xmlns:d="DAV:" xmlns:ical="http://apple.com/ns/ical/">
  <d:prop><ical:calendar-color/></d:prop>
</d:propfind>`;(c=e.isDebug)!=null&&c.call(e)&&console.log("[opsdash] PROPFIND",{url:w,id:p});const g=await fetch(w,{method:"PROPFIND",credentials:"same-origin",headers:{Depth:"0","Content-Type":"application/xml",requesttoken:s},body:v});if(!g.ok)continue;const f=await g.text();(u=e.isDebug)!=null&&u.call(e)&&console.log("[opsdash] PROPFIND response",{id:p,status:g.status,length:f.length,sample:f.slice(0,400)});const m=f.match(/<[^>]*calendar-color[^>]*>(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{8}|rgb\([^<]+\))<\/[^>]*calendar-color>/i);m&&(n[p]=m[1])}catch{}return n}return{calendarDayLink:t,fetchDavColors:a}}function y0(e){const t=B(()=>{var r,n;return _0({perDaySeries:(r=e.charts.value)==null?void 0:r.perDaySeries,forecastMode:((n=e.activityCardConfig.value)==null?void 0:n.forecastMode)??"total",targetsConfig:e.targetsConfig.value,currentTargets:e.currentTargets.value,calendarCategoryMap:e.calendarCategoryMap.value})}),a=B(()=>{var r;return{pie:((r=e.charts.value)==null?void 0:r.pie)||null,stacked:t.value}}),o=B(()=>{var m,D;const r={},n=(m=e.charts.value)==null?void 0:m.pie,s=(D=e.charts.value)==null?void 0:D.perDaySeries,l=t.value||s,i=n&&Array.isArray(n.data)&&Array.isArray(n.ids),c=l&&Array.isArray(l.series)&&Array.isArray(l.labels),u=e.calendarCategoryMap.value,p=i?(n.ids||[]).map(T=>String(T??"")):[],w=i?(n.labels||[]).map(T=>String(T??"")):[],v=i?(n.data||[]).map(T=>Number(T)||0):[],g=i?n.colors||[]:[],f=c?l.series:[];return e.calendarGroups.value.forEach(T=>{const M=[];i&&p.forEach((C,S)=>{u[C]===T.id&&M.push(S)});const _=M.length?{ids:M.map(C=>p[C]),labels:M.map(C=>w[C]),data:M.map(C=>v[C]),colors:M.map(C=>{var S;return g[C]||((S=e.colorsById.value)==null?void 0:S[p[C]])||"#60a5fa"})}:null,$=c?f.filter(C=>u[String((C==null?void 0:C.id)??"")]===T.id):[],I=$.length?{labels:l.labels,series:$}:null;r[T.id]={pie:_,stacked:I}}),r});return{calendarChartData:a,categoryChartsById:o}}const w0=/^\d{4}-\d{2}-\d{2}$/,k0="__uncategorized__";function _0(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const a=t.labels.map(f=>String(f??"")),o=t.series.map(f=>{const m=String((f==null?void 0:f.id)??"");return{...f,id:m,name:String((f==null?void 0:f.name)??(f==null?void 0:f.label)??m),color:String((f==null?void 0:f.color)??""),data:a.map((D,T)=>{var _;const M=Number(((_=f==null?void 0:f.data)==null?void 0:_[T])??0);return Number.isFinite(M)?Math.max(0,M):0})}}),r=x0(e.forecastMode),n=C0(new Date),s=a.map(f=>w0.test(f)&&f>n),l=[];if(s.forEach((f,m)=>{f&&l.push(m)}),!l.length||r==="off")return{labels:a,series:o};const i=e.targetsConfig??Gt(),c=$0(e.currentTargets),u=e.calendarCategoryMap??{},p=l.length,w=new Map;o.forEach(f=>{let m=0;f.data.forEach((D,T)=>{s[T]||(m+=Math.max(0,D))}),w.set(f.id,m)});const v=Array.from(w.values()).reduce((f,m)=>f+m,0),g=new Map;if(o.forEach(f=>{g.set(f.id,S0(a.length))}),r==="total"){const f=Math.max(0,Number(i.totalHours??0)),m=Math.max(0,f-v);if(m>1e-4){const D=m/p,T=o.map(_=>_.id),M=fc(T,w,c);T.forEach(_=>{const $=M[_]??0;if($<=0)return;const I=g.get(_);I&&l.forEach(C=>{I[C]=_r(D*$)})})}}else if(r==="calendar")o.forEach(f=>{const m=c[f.id]??0;if(m<=0)return;const D=Math.max(0,w.get(f.id)??0),T=Math.max(0,m-D);if(T<=1e-4)return;const M=T/p,_=g.get(f.id);_&&l.forEach($=>{_[$]=_r(M)})});else if(r==="category"){const f=new Set,m=Array.isArray(i.categories)?i.categories:[],D=new Map;m.forEach(M=>{D.set(String(M.id),Math.max(0,Number(M.targetHours??0)))});const T=new Map;o.forEach(M=>{const _=u==null?void 0:u[M.id],$=_?String(_):k0;T.has($)||T.set($,[]),T.get($).push(M.id)}),T.forEach((M,_)=>{if(!M.length)return;const $=D.get(_)??0;if($<=0)return;const I=M.reduce((x,E)=>x+Math.max(0,w.get(E)??0),0),C=Math.max(0,$-I);if(C<=1e-4)return;const S=C/p,b={};M.forEach(x=>{b[x]=c[x]??0});const h=fc(M,w,b);M.forEach(x=>{const E=h[x]??0;if(E<=0)return;const P=g.get(x);P&&(l.forEach(q=>{P[q]=_r(S*E)}),f.add(x))})}),o.forEach(M=>{if(f.has(M.id))return;const _=c[M.id]??0;if(_<=0)return;const $=Math.max(0,w.get(M.id)??0),I=Math.max(0,_-$);if(I<=1e-4)return;const C=I/p,S=g.get(M.id);S&&l.forEach(b=>{S[b]=_r(C)})})}return o.forEach(f=>{const m=g.get(f.id);m&&m.some(D=>D>1e-4)&&(f.forecast=m)}),{labels:a,series:o}}function x0(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function C0(e){const t=e.getFullYear(),a=`${e.getMonth()+1}`.padStart(2,"0"),o=`${e.getDate()}`.padStart(2,"0");return`${t}-${a}-${o}`}function S0(e){return Array.from({length:e},()=>0)}function _r(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function $0(e){const t={};return e&&Object.entries(e).forEach(([a,o])=>{const r=Number(o);Number.isFinite(r)&&r>0&&(t[String(a)]=r)}),t}function fc(e,t,a){const o={},r=e.reduce((l,i)=>l+Math.max(0,t.get(i)??0),0);if(r>1e-4)return e.forEach(l=>{const i=Math.max(0,t.get(l)??0);o[l]=i/r}),o;const n=e.reduce((l,i)=>l+Math.max(0,(a==null?void 0:a[i])??0),0);if(n>1e-4)return e.forEach(l=>{const i=Math.max(0,(a==null?void 0:a[l])??0);o[l]=i/n}),o;const s=e.length?1/e.length:0;return e.forEach(l=>{o[l]=s}),o}const ra="__uncategorized__",gc="Unassigned";function T0(e){const t=B(()=>{var u;const c=(u=e.targetsConfig.value)==null?void 0:u.categories;return Array.isArray(c)?c:[]}),a=B(()=>{const c={};return t.value.forEach(u=>{c[String(u.id)]=u.label||String(u.id)}),c}),o=B(()=>{var p;const c=new Map;return(((p=e.targetsSummary.value)==null?void 0:p.categories)||[]).forEach(w=>c.set(String(w.id),w)),c}),r=B(()=>{const c=new Map;return t.value.forEach(u=>{(Array.isArray(u.groupIds)?u.groupIds:[]).forEach(w=>{const v=Math.max(0,Math.min(9,Math.trunc(Number(w)||0)));c.set(v,String(u.id))})}),c}),n=B(()=>{var p;const c=e.calendars.value;if(!Array.isArray(c))return(p=e.isDebug)!=null&&p.call(e)&&console.warn("[opsdash] calendars not array",c),{};const u={};return c.forEach(w=>{var f;const v=String((w==null?void 0:w.id)??"");if(!v)return;const g=((f=e.colorsById.value)==null?void 0:f[v])||String((w==null?void 0:w.color)||"");u[v]={name:String((w==null?void 0:w.displayname)||(w==null?void 0:w.name)||(w==null?void 0:w.calendar)||v),color:g||void 0}}),u}),s=B(()=>{var g;const c={},u=r.value,p=e.groupsById.value||{},w=f=>{const m=p==null?void 0:p[f],D=Math.max(0,Math.min(9,Math.trunc(Number(m)||0))),T=u.get(D);c[f]=T||ra},v=e.calendars.value;return Array.isArray(v)?(v.forEach(f=>{const m=String((f==null?void 0:f.id)??"");m&&w(m)}),(e.selected.value||[]).forEach(f=>{const m=String(f??"");m&&(c[m]||w(m))}),c):((g=e.isDebug)!=null&&g.call(e)&&console.warn("[opsdash] calendarCategoryMap: calendars not array",v),c)}),l=B(()=>{const c=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"],u={};let p=0;const w=v=>{const g=String((v==null?void 0:v.id)??"");if(!g)return;if(u[g])return u[g];const f=typeof(v==null?void 0:v.color)=="string"&&v.color?v.color:void 0;if(f)return u[g]=f,f;const m=Object.entries(s.value).filter(([,T])=>T===g).map(([T])=>T);for(const T of m){const M=n.value[T];if(M!=null&&M.color)return u[g]=M.color,M.color}const D=c[p%c.length];return p+=1,u[g]=D,D};return t.value.forEach(v=>w(v)),Object.values(s.value||{}).some(v=>v===ra)&&w({id:ra}),u}),i=B(()=>{var $,I,C,S,b,h,x,E,P,q;const c=[],u=s.value,p=o.value,w=e.byCal.value;if(!Array.isArray(w))return($=e.isDebug)!=null&&$.call(e)&&console.warn("[opsdash] aggregateCategoryRows: byCal not array",w),c;const v=new Map;w.forEach(O=>{const j=String((O==null?void 0:O.id)??(O==null?void 0:O.calendar_id)??(O==null?void 0:O.calendar)??"");if(!j)return;const K=u[j]||ra;v.has(K)||v.set(K,[]),v.get(K).push({...O,calendarId:j})}),(I=e.isDebug)!=null&&I.call(e)&&console.log("[opsdash] aggregateCategoryRows",{rowsSourceIsArray:Array.isArray(w),rowsSourceLength:w.length,byCat:v,assignments:u});const g=((S=(C=e.targetsSummary.value)==null?void 0:C.total)==null?void 0:S.daysLeft)??0,f=((h=(b=e.targetsSummary.value)==null?void 0:b.total)==null?void 0:h.calendarPercent)??0,m=((E=(x=e.targetsSummary.value)==null?void 0:x.total)==null?void 0:E.paceMode)??((q=(P=e.targetsConfig.value)==null?void 0:P.pace)==null?void 0:q.mode)??"days_only",D=O=>Math.round(O*100)/100,T=e.currentTargets.value||{},M=(O,j,K)=>{const J=K.reduce((be,F)=>{const z=Number(T[F.calendarId]??0);return Number.isFinite(z)?be+Math.max(0,z):be},0),pe=K.reduce((be,F)=>{const z=Number((F==null?void 0:F.total_hours)??(F==null?void 0:F.hours)??0);return Number.isFinite(z)?be+Math.max(0,z):be},0),Y=J>0?Math.max(0,Math.min(100,pe/J*100)):0,R=pe-J,ae=Math.max(0,J-pe),ve=J<=0?"none":Y>=100?"done":R>=0?"on_track":"behind",H=ve==="done"?"Done":ve==="on_track"?"On Track":ve==="behind"?"Behind":"",re=g>0?ae/g:0;return{id:O,label:j,actualHours:D(pe),targetHours:D(J),percent:Y,deltaHours:D(R),remainingHours:D(ae),needPerDay:D(re),daysLeft:g,calendarPercent:Math.max(0,Math.min(100,f)),gap:D(Y-f),status:ve,statusLabel:H,includeWeekend:!0,paceMode:m}};if(t.value.map(O=>String(O.id)).forEach(O=>{const j=a.value[O]||O,K=v.get(O)||[],J=p.get(O)||M(O,j,K);c.push({id:O,label:j,rows:K,summary:J,color:l.value[O]})}),v.has(ra)){const O=v.get(ra)||[];c.push({id:ra,label:gc,rows:O,summary:M(ra,gc,O),color:l.value[ra]})}return c});return{categoryConfigList:t,categoryLabelById:a,categoryColorMap:l,calendarCategoryMap:s,calendarGroups:i}}function Fn(e){const t=Number(e);return Number.isFinite(t)?Math.round(t):0}function nt(e){const t=Number(e);return Number.isFinite(t)?t:null}function Va(e){if(e==null)return null;const t=String(e).trim();return t===""?null:t}function M0(e){const t=B(()=>{var M;const g=(M=e.charts.value)==null?void 0:M.pie;if(!g||!Array.isArray(g.data)||!Array.isArray(g.labels))return[];const f=g.data.map(_=>Number(_)||0),m=g.labels.map(_=>String(_||"")),D=f.reduce((_,$)=>_+Math.max(0,$),0);if(D<=0)return[];const T=f.map((_,$)=>({name:m[$]||"",value:Math.max(0,_)}));return T.sort((_,$)=>$.value-_.value),T.slice(0,3).map(_=>({name:_.name,share:_.value/D*100}))}),a=B(()=>{var f;if(t.value.length)return t.value.map(m=>`${m.name} ${hc(m.share)}`).join(", ");const g=(f=e.stats)==null?void 0:f.top_calendar;if(g&&g.calendar){const m=Number(g.share??0);return`${g.calendar} ${hc(m)}`}return""}),o=B(()=>{var g;return e.selected.value.length||(((g=e.calendars.value)==null?void 0:g.length)??0)}),r=B(()=>(e.byDay.value||[]).map(g=>Number((g==null?void 0:g.total_hours)??(g==null?void 0:g.hours)??0))),n=B(()=>{const g=r.value.map(f=>Number(f)||0);return e.activeDayMode.value==="active"?g.filter(f=>f>0):g}),s=B(()=>(e.byDay.value||[]).filter(g=>{const f=pc(String(g==null?void 0:g.date));return f>=1&&f<=5}).map(g=>Number((g==null?void 0:g.total_hours)??(g==null?void 0:g.hours)??0))),l=B(()=>(e.byDay.value||[]).filter(g=>{const f=pc(String(g==null?void 0:g.date));return f===0||f===6}).map(g=>Number((g==null?void 0:g.total_hours)??(g==null?void 0:g.hours)??0))),i=B(()=>e.activeDayMode.value==="active"?s.value.filter(g=>g>0):s.value),c=B(()=>e.activeDayMode.value==="active"?l.value.filter(g=>g>0):l.value),u=B(()=>{var m,D,T,M;const g=((m=e.stats)==null?void 0:m.balance_index)??((D=e.stats)==null?void 0:D.balanceIndex)??((M=(T=e.stats)==null?void 0:T.balance_overview)==null?void 0:M.index),f=Number(g);return Number.isFinite(f)?f:null}),p=B(()=>{var g,f,m,D;return{rangeLabel:e.rangeLabel.value,rangeStart:e.rangeStart.value,rangeEnd:e.rangeEnd.value,offset:e.offset.value,totalHours:Number(((g=e.stats)==null?void 0:g.total_hours)??0),avgDay:Hn(n.value),avgEvent:Number(((f=e.stats)==null?void 0:f.avg_per_event)??0),medianDay:Wn(n.value),busiest:((m=e.stats)==null?void 0:m.busiest_day)??null,workdayAvg:Hn(i.value),workdayMedian:Wn(i.value),weekendAvg:Hn(c.value),weekendMedian:Wn(c.value),weekendShare:((D=e.stats)==null?void 0:D.weekend_share)??null,activeCalendars:o.value,calendarSummary:a.value,balanceIndex:u.value,delta:(()=>{var M;const T=(M=e.stats)==null?void 0:M.delta;return!T||typeof T!="object"?null:{totalHours:nt(T.total_hours)??0,avgPerDay:nt(T.avg_per_day)??0,avgPerEvent:nt(T.avg_per_event)??0,events:Fn(T.events)}})(),topCategory:e.topCategory.value?{label:e.topCategory.value.label,actualHours:e.topCategory.value.summary.actualHours,targetHours:e.topCategory.value.summary.targetHours,percent:e.topCategory.value.summary.percent,statusLabel:e.topCategory.value.summary.statusLabel,status:e.topCategory.value.summary.status,color:e.topCategory.value.color}:null}}),w=B(()=>{const g=e.stats,f=g==null?void 0:g.delta,m=nt((f==null?void 0:f.weekend_share)??(f==null?void 0:f.weekendShare)),D=nt((f==null?void 0:f.evening_share)??(f==null?void 0:f.eveningShare)),T=m!=null||D!=null?{weekendShare:m,eveningShare:D}:null;return{rangeLabel:e.rangeLabel.value,events:Fn(g.events),activeDays:nt(g.active_days),typicalStart:Va(g.typical_start),typicalEnd:Va(g.typical_end),weekendShare:nt(g.weekend_share),eveningShare:nt(g.evening_share),delta:T,earliestStart:Va(g.earliest_start),latestEnd:Va(g.latest_end),overlapEvents:nt(g.overlap_events),longestSession:nt(g.longest_session),lastDayOff:Va(g.last_day_off),lastHalfDayOff:Va(g.last_half_day_off)}}),v=B(()=>{var f;const g=(f=e.stats)==null?void 0:f.day_off_trend;return Array.isArray(g)?g.map(m=>{const D=Number((m==null?void 0:m.totalDays)??(m==null?void 0:m.total_days)??0),T=Number((m==null?void 0:m.daysOff)??(m==null?void 0:m.days_off)??0),M=Number((m==null?void 0:m.daysWorked)??(m==null?void 0:m.days_worked)??0);return{offset:Number((m==null?void 0:m.offset)??0)||0,label:String((m==null?void 0:m.label)??""),from:String((m==null?void 0:m.from)??""),to:String((m==null?void 0:m.to)??""),totalDays:Number.isFinite(D)?Math.max(0,D):0,daysOff:Number.isFinite(T)?Math.max(0,T):0,daysWorked:Number.isFinite(M)?Math.max(0,M):0}}).filter(m=>m.totalDays>0):[]});return{topThree:t,topCalendarsSummary:a,timeSummary:p,activitySummary:w,activityDayOffTrend:v}}function Hn(e){return e.length?e.reduce((a,o)=>a+o,0)/e.length:0}function Wn(e){if(!e.length)return 0;const t=[...e].sort((o,r)=>o-r),a=Math.floor(t.length/2);return t.length%2?t[a]:(t[a-1]+t[a])/2}function pc(e){return new Date(`${e}T00:00:00Z`).getUTCDay()}function hc(e){return`${Number(e||0).toFixed(1)}%`}function D0(e){return{balanceOverview:B(()=>{var u,p,w,v;const a=(u=e.stats)==null?void 0:u.balance_overview;if(!a||typeof a!="object")return null;const o=Array.isArray(a.categories)?a.categories.map(g=>({id:String((g==null?void 0:g.id)??""),label:String((g==null?void 0:g.label)??""),hours:nt(g==null?void 0:g.hours)??0,share:nt(g==null?void 0:g.share)??0,prevShare:nt(g==null?void 0:g.prev_share)??0,delta:nt(g==null?void 0:g.delta)??0,color:e.categoryColorMap.value[String((g==null?void 0:g.id)??"")]})):[],r=Array.isArray(a.relations)?a.relations.map(g=>({label:String((g==null?void 0:g.label)??""),value:String((g==null?void 0:g.value)??"")})):[],n=Array.isArray((p=a.trend)==null?void 0:p.history)?a.trend.history:Array.isArray(a==null?void 0:a.trendHistory)?a.trendHistory:[],s={delta:Array.isArray((w=a.trend)==null?void 0:w.delta)?a.trend.delta.map(g=>({id:String((g==null?void 0:g.id)??""),label:String((g==null?void 0:g.label)??""),delta:nt(g==null?void 0:g.delta)??0})):[],badge:String(((v=a.trend)==null?void 0:v.badge)??""),history:n.map(g=>({offset:Fn(g==null?void 0:g.offset)??0,label:String((g==null?void 0:g.label)??""),categories:Array.isArray(g==null?void 0:g.categories)?g.categories.map(f=>({id:String((f==null?void 0:f.id)??""),label:String((f==null?void 0:f.label)??""),share:nt(f==null?void 0:f.share)??0})):[]}))},l=Array.isArray(a.daily)?a.daily.map(g=>({date:String((g==null?void 0:g.date)??""),weekday:String((g==null?void 0:g.weekday)??""),total_hours:nt(g==null?void 0:g.total_hours)??0,categories:Array.isArray(g==null?void 0:g.categories)?g.categories.map(f=>({id:String((f==null?void 0:f.id)??""),label:String((f==null?void 0:f.label)??""),hours:nt(f==null?void 0:f.hours)??0,share:nt(f==null?void 0:f.share)??0})):[]})):[],i=Array.isArray(a.warnings)?a.warnings.map(g=>String(g)):[];return{index:nt(a.index)??0,categories:o,relations:r,trend:s,daily:l,warnings:i}})}}const xo=Q("auto"),xr=Q("light"),mc=Q(!1),Co=B(()=>xo.value==="auto"?xr.value:xo.value);function A0(){return dc()??"auto"}function Cr(e){if(typeof document>"u")return;const t=document.getElementById("opsdash");t&&(t.classList.remove("opsdash-theme-light","opsdash-theme-dark"),e==="dark"?t.classList.add("opsdash-theme-dark"):t.classList.add("opsdash-theme-light"))}function zn(){xr.value=Pn()}let Et=null,Aa=null;function E0(){typeof window>"u"||Et||(Et=window.matchMedia("(prefers-color-scheme: dark)"),Aa=()=>zn(),typeof Et.addEventListener=="function"?Et.addEventListener("change",Aa):typeof Et.addListener=="function"&&Et.addListener(Aa))}function L0(){Et&&(Aa&&(typeof Et.removeEventListener=="function"?Et.removeEventListener("change",Aa):typeof Et.removeListener=="function"&&Et.removeListener(Aa)),Et=null,Aa=null)}function O0(){mc.value||(xo.value=A0(),xr.value=Pn(),Cr(Co.value),mc.value=!0),At(()=>{typeof window<"u"&&window.addEventListener("oc:theme:changed",zn),E0(),Cr(Co.value)}),Nt(()=>{typeof window<"u"&&window.removeEventListener("oc:theme:changed",zn),L0()}),Be(Co,t=>{Cr(t)});function e(t){xo.value=t,Cr(Co.value)}return{preference:xo,effectiveTheme:Co,systemTheme:xr,setThemePreference:e}}const Rn=e=>e==="light"||e==="dark"?e:"auto";function B0(e){const t=Q(!1),a=Q(Rn(e.serverPreference.value));let o=null;const r=typeof e.debounceMs=="number"?e.debounceMs:250,n=()=>{o&&(clearTimeout(o),o=null)};or()&&Nt(()=>{n()}),Be(e.serverPreference,i=>{const c=Rn(i);a.value=c,e.localPreference.value!==c&&(t.value=!0,e.applyLocalPreference(c),t.value=!1)},{immediate:!0});function s(i){t.value||i!==a.value&&(n(),o=setTimeout(async()=>{o=null;try{await e.postJson(e.route("persist"),{theme_preference:i}),a.value=i,e.notifySuccess("Theme preference saved")}catch(c){console.error(c),e.notifyError("Failed to save theme preference")}},r))}function l(i,c){const u=Rn(i);e.applyLocalPreference(u),(c==null?void 0:c.persist)!==!1&&s(u)}return{setThemePreference:l}}function N0(e){const{preference:t,effectiveTheme:a,systemTheme:o,setThemePreference:r}=O0(),{setThemePreference:n}=B0({serverPreference:e.serverPreference,localPreference:t,applyLocalPreference:r,route:e.route,postJson:e.postJson,notifySuccess:e.notifySuccess,notifyError:e.notifyError});function s(l,i){n(l,i)}return{themePreference:t,effectiveTheme:a,systemTheme:o,setThemePreference:s}}function I0(e){const{autoWizardNeeded:t,manualWizardOpen:a,onboardingRunId:o,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:s}=jm(),l=B(()=>{var b;return!!((b=e.onboardingState.value)!=null&&b.completed)}),i=e.actions.isOnboardingSaving,c=e.actions.isSnapshotSaving,u=e.actions.snapshotNotice,p=B(()=>(e.calendars.value||[]).map(b=>({id:String((b==null?void 0:b.id)??""),displayname:String((b==null?void 0:b.displayname)??(b==null?void 0:b.name)??(b==null?void 0:b.id)??""),color:typeof(b==null?void 0:b.color)=="string"?b.color:""})).filter(b=>b.id)),w=B(()=>[...e.selected.value]),v=B(()=>{var b;return((b=e.onboardingState.value)==null?void 0:b.strategy)??"total_only"}),g=B(()=>{var b;return((b=e.targetsConfig.value)==null?void 0:b.allDayHours)??8}),f=B(()=>{var b;return((b=e.targetsConfig.value)==null?void 0:b.totalHours)??40}),m=B(()=>({...e.deckSettings.value||{}})),D=B(()=>({...e.reportingConfig.value||{}})),T=B(()=>{var b;return((b=e.onboardingState.value)==null?void 0:b.dashboardMode)||"standard"});function M(b){if(!b)return!0;const h=b.version_required??ha;return!b.completed||(b.version??0)<h}function _(b){const h=b??e.onboardingState.value;if(!e.hasInitialLoad.value&&!h)return;const x=M(h);t.value=x||!!(h!=null&&h.resetRequested),(x||h!=null&&h.resetRequested)&&(s.value=null),h!=null&&h.resetRequested&&(a.value=!0)}Be(()=>e.onboardingState.value,b=>{e.hasInitialLoad.value&&_(b)});async function $(b){try{await e.actions.complete(b),a.value=!1,t.value=!1}catch(h){console.error("[opsdash] onboarding complete failed",h)}}async function I(){try{await e.actions.skip(),a.value=!1,t.value=!1}catch(b){console.error("[opsdash] onboarding skip failed",b)}}function C(){t.value||(a.value=!1)}async function S(){try{await e.actions.saveSnapshot()}catch(b){console.error("[opsdash] onboarding snapshot failed",b)}}return{autoWizardNeeded:t,manualWizardOpen:a,onboardingRunId:o,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:s,hasExistingConfig:l,wizardCalendars:p,wizardInitialSelection:w,wizardInitialStrategy:v,wizardInitialAllDayHours:g,wizardInitialTotalHours:f,wizardInitialDeckSettings:m,wizardInitialReportingConfig:D,wizardInitialDashboardMode:T,isOnboardingSaving:i,isSnapshotSaving:c,snapshotNotice:u,evaluateOnboarding:_,handleWizardComplete:$,handleWizardSkip:I,handleWizardClose:C,handleWizardSaveSnapshot:S}}function P0(e){const t=B(()=>!e.navOpen.value),a=B(()=>e.range.value==="week"?"Switch to month":"Switch to week"),o=B(()=>!e.from.value||!e.to.value?"":`${e.from.value}  ${e.to.value}`);function r(){try{const c=e.performLoad();if(c&&typeof c.then=="function")return c.catch(u=>{console.error("[opsdash] range load failed",u)})}catch(c){console.error("[opsdash] range load failed",c)}}function n(){r()}function s(){e.range.value=e.range.value==="week"?"month":"week",e.offset.value=0,r()}function l(){e.offset.value=(e.offset.value||0)-1,r()}function i(){e.offset.value=(e.offset.value||0)+1,r()}return{showCollapsedRangeControls:t,rangeToggleLabel:a,rangeDateLabel:o,loadCurrent:n,toggleRangeCollapsed:s,goPrevious:l,goNext:i}}const vc=["cals","groups","targets_week","targets_month","targets_config","theme_preference","onboarding","widgets"],F0=new Set(["auto","light","dark"]);function H0(e){if(!e||typeof e!="object")return{cleaned:{},ignored:["<invalid-payload>"]};const t=e,a={},o=[];return vc.forEach(r=>{t[r]!==void 0&&(a[r]=t[r])}),Object.keys(t).forEach(r=>{vc.includes(r)||o.push(r)}),a.cals&&!Array.isArray(a.cals)&&(o.push("cals"),delete a.cals),"groups"in a&&(!a.groups||typeof a.groups!="object")&&(o.push("groups"),delete a.groups),"targets_week"in a&&(!a.targets_week||typeof a.targets_week!="object")&&(o.push("targets_week"),delete a.targets_week),"targets_month"in a&&(!a.targets_month||typeof a.targets_month!="object")&&(o.push("targets_month"),delete a.targets_month),"targets_config"in a&&(!a.targets_config||typeof a.targets_config!="object")&&(o.push("targets_config"),delete a.targets_config),a.theme_preference&&!F0.has(String(a.theme_preference))&&(o.push("theme_preference"),delete a.theme_preference),"onboarding"in a&&(a.onboarding==null||typeof a.onboarding!="object")&&(o.push("onboarding"),delete a.onboarding),"widgets"in a&&!Array.isArray(a.widgets)&&(o.push("widgets"),delete a.widgets),{cleaned:a,ignored:o}}function W0(e,t="0.4.4"){return{version:t,generated:new Date().toISOString(),payload:e}}function z0(e){function t(){const s={cals:[...e.selected.value],groups:{...e.groupsById.value},targets_week:{...e.targetsWeek.value},targets_month:{...e.targetsMonth.value},targets_config:Jt(e.targetsConfig.value),theme_preference:e.themePreference.value};return e.onboardingState.value&&(s.onboarding={...e.onboardingState.value}),e.widgets&&(s.widgets=e.widgets.value),s}function a(s,l){if(e.createDownload){e.createDownload(s,l);return}const i=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),c=URL.createObjectURL(i),u=document.createElement("a");u.href=c,u.download=s,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c)}function o(){try{const s=t(),l=W0(s),i=`opsdash-config-${l.generated.slice(0,10)}.json`;a(i,l),e.notifySuccess("Configuration exported")}catch(s){console.error(s),e.notifyError("Failed to export configuration")}}async function r(s){const{cleaned:l,ignored:i}=H0(s);if(!Object.keys(l).length){e.notifyError("No recognised configuration keys found in file");return}if(l.cals&&(e.selected.value=l.cals.map(c=>String(c))),l.groups){const c={};Object.entries(l.groups).forEach(([u,p])=>{const w=Number(p);c[String(u)]=Number.isFinite(w)?w:0}),e.groupsById.value=c}if(l.targets_week){const c={};Object.entries(l.targets_week).forEach(([u,p])=>{const w=Number(p);Number.isFinite(w)&&(c[String(u)]=w)}),e.targetsWeek.value=c}if(l.targets_month){const c={};Object.entries(l.targets_month).forEach(([u,p])=>{const w=Number(p);Number.isFinite(w)&&(c[String(u)]=w)}),e.targetsMonth.value=c}l.targets_config&&(e.targetsConfig.value=ht(l.targets_config)),l.theme_preference&&e.setThemePreference(l.theme_preference,{persist:!1}),l.onboarding&&typeof l.onboarding=="object"&&(e.onboardingState.value={...l.onboarding}),e.widgets&&Array.isArray(l.widgets)&&(e.widgets.value=l.widgets),await e.postJson(e.route("persist"),l),await e.performLoad(),i.length?e.notifyError(`Configuration imported with ignored keys: ${i.join(", ")}`):e.notifySuccess("Configuration imported")}async function n(s){try{const l=await s.text(),i=JSON.parse(l),c=i!=null&&i.payload&&typeof i.payload=="object"?i.payload:i;await r(c)}catch(l){console.error(l),e.notifyError("Failed to import configuration")}}return{collectSidebarPayload:t,exportSidebarConfig:o,importSidebarConfig:n,applyConfigSource:r}}function R0(e=null){const t=Q(e);function a(o){t.value=t.value===o?null:o}return{detailsIndex:t,toggle:a}}function j0(e){const t=B(()=>e.value==="month"?"Last month":"Last week"),a=B(()=>e.value==="month"?"This month":"This week"),o=B(()=>e.value==="month"?"Notes for previous month":"Notes for previous week"),r=B(()=>e.value==="month"?"Notes for current month":"Notes for current week");return{notesLabelPrev:t,notesLabelCurr:a,notesLabelPrevTitle:o,notesLabelCurrTitle:r}}function U0(){return!0}function V0(){const e=Q(U0());Be(e,r=>{typeof window<"u"&&Qt(()=>{window.dispatchEvent(new Event("resize"))}).catch(()=>{})},{immediate:!1});const t=()=>{e.value=!e.value},a=B(()=>e.value?"Hide sidebar":"Show sidebar"),o=B(()=>e.value?"":"");return{navOpen:e,toggleNav:t,navToggleLabel:a,navToggleIcon:o}}function K0(e){const t=Q(!1),a=Q(null);let o=!1;const r=!!or();function n(v,g="api"){var f;v&&(a.value=v),t.value=!0,(f=e.onOpen)==null||f.call(e,{source:g})}function s(){t.value=!1;const v=a.value;if(a.value=null,v&&typeof v.focus=="function")try{v.focus()}catch{}}function l(){typeof e.ensureSidebarVisible=="function"&&e.ensureSidebarVisible()}function i(v,g){g.preventDefault(),l(),v()}function c(v){var D;const g=v;if(!g)return!1;if(g.isContentEditable)return!0;const f=g.tagName;if(!f)return!1;if(["INPUT","TEXTAREA","SELECT"].includes(f))return!0;const m=(D=g.getAttribute)==null?void 0:D.call(g,"role");return!!(m&&["textbox","combobox"].includes(m))}function u(v){if(v.defaultPrevented)return;const g=c(v.target);if((v.key==="Escape"||v.key==="Esc")&&t.value){v.preventDefault(),s();return}if(!v.altKey&&!v.ctrlKey&&!v.metaKey&&!g&&(v.key==="?"||v.shiftKey&&v.key==="/")){v.preventDefault(),n(v.target instanceof HTMLElement?v.target:null,"keyboard");return}if(v.altKey&&!v.ctrlKey&&!v.metaKey){const f=v.key;if(f==="ArrowLeft"){i(e.goPrevious,v);return}if(f==="ArrowRight"){i(e.goNext,v);return}if(v.shiftKey&&(f==="R"||f==="r")){i(e.toggleRange,v);return}if(f==="T"||f==="t"){e.openConfigPanel&&(v.preventDefault(),l(),e.openConfigPanel());return}}if(v.shiftKey&&!v.altKey&&!v.metaKey&&!v.ctrlKey){if((v.key==="e"||v.key==="E")&&e.toggleEditLayout&&!g){v.preventDefault(),e.toggleEditLayout();return}if((v.key==="c"||v.key==="C")&&e.openWidgetOptions&&!g){v.preventDefault(),e.openWidgetOptions();return}}}function p(){o||typeof document>"u"||(document.addEventListener("keydown",u),o=!0)}function w(){!o||typeof document>"u"||(document.removeEventListener("keydown",u),o=!1)}return p(),r&&(At(()=>{p()}),Nt(()=>{w()})),{shortcutsOpen:t,openShortcuts:n,closeShortcuts:s,shortcutGroups:Ti,unbindShortcuts:w}}function q0(e){const t=Q(!1),a=Q(!1),o=Q(null);async function r(i){var c,u;try{t.value=!0,o.value=null,e.setThemePreference(i.themePreference,{persist:!1}),await e.postJson(e.route("persist"),{cals:i.selected,groups:i.groups,targets_week:i.targetsWeek,targets_month:i.targetsMonth,targets_config:i.targetsConfig,theme_preference:i.themePreference,deck_settings:i.deckSettings,reporting_config:i.reportingConfig,targets_config_activity:i.activityCard,onboarding:{completed:!0,version:ha,strategy:i.strategy,dashboardMode:i.dashboardMode,completed_at:new Date().toISOString()}}),e.setSelected(i.selected),e.setTargetsWeek(i.targetsWeek),e.setTargetsMonth(i.targetsMonth),e.setTargetsConfig(i.targetsConfig),e.setGroupsById(i.groups),(c=e.setDashboardMode)==null||c.call(e,i.dashboardMode),(u=e.setOnboardingState)==null||u.call(e,{completed:!0,version:ha,strategy:i.strategy,dashboardMode:i.dashboardMode,version_required:ha,resetRequested:!1}),await e.reloadAfterPersist(),e.notifySuccess("Onboarding saved")}catch(p){throw console.error(p),e.notifyError("Failed to save onboarding"),p}finally{t.value=!1}}async function n(i){var c,u,p,w,v,g,f;try{t.value=!0,o.value=null,i.theme_preference&&e.setThemePreference(i.theme_preference,{persist:!1}),await e.postJson(e.route("persist"),i),i.cals&&e.setSelected(i.cals),i.targets_week&&e.setTargetsWeek(i.targets_week),i.targets_month&&e.setTargetsMonth(i.targets_month),i.targets_config&&e.setTargetsConfig(i.targets_config),i.groups&&e.setGroupsById(i.groups),i.deck_settings&&((c=e.setDeckSettings)==null||c.call(e,i.deck_settings)),i.reporting_config&&((u=e.setReportingConfig)==null||u.call(e,i.reporting_config)),i.onboarding&&((v=e.setOnboardingState)==null||v.call(e,{completed:i.onboarding.completed??!1,version:i.onboarding.version??ha,strategy:i.onboarding.strategy??((p=e.onboardingState.value)==null?void 0:p.strategy)??"total_only",completed_at:i.onboarding.completed_at??"",dashboardMode:i.onboarding.dashboardMode??((w=e.onboardingState.value)==null?void 0:w.dashboardMode),version_required:ha,resetRequested:!1})),i.dashboardMode&&((g=e.setDashboardMode)==null||g.call(e,i.dashboardMode)),i.widgets&&((f=e.setWidgets)==null||f.call(e,i.widgets)),e.notifySuccess("Step saved")}catch(m){throw console.error(m),e.notifyError("Failed to save step"),m}finally{t.value=!1}}async function s(){var i;try{t.value=!0,o.value=null,await e.postJson(e.route("persist"),{onboarding:{completed:!0,version:ha,strategy:((i=e.onboardingState.value)==null?void 0:i.strategy)??"total_only",completed_at:new Date().toISOString()}}),await e.reloadAfterPersist(),e.notifySuccess("You can revisit onboarding from the Targets tab any time.")}catch(c){throw console.error(c),e.notifyError("Failed to update onboarding state"),c}finally{t.value=!1}}async function l(){try{a.value=!0,o.value=null;const c=`Before onboarding ${new Date().toISOString().slice(0,16).replace("T"," ")}`;await e.savePreset(c),o.value={type:"success",message:`Preset "${c}" saved  find it under Config & Setup.`}}catch(i){throw console.error("[opsdash] preset backup failed",i),o.value={type:"error",message:"Failed to save preset backup. Please try again."},i}finally{a.value=!1}}return{isOnboardingSaving:t,isSnapshotSaving:a,snapshotNotice:o,complete:r,saveStep:n,skip:s,saveSnapshot:l}}function G0(e){const t=Q([]),a=Q(!1),o=Q(""),r=Q(null);let n=0;const s=new Map;let l="";function i(u,p){return`${u}::${p}`}async function c(u=!1){const p=(e.from.value||"").trim(),w=(e.to.value||"").trim();if(!p||!w){t.value=[],o.value="",a.value=!1,r.value=null,l="";return}const v=i(p,w);if(!u&&s.has(v)){const f=s.get(v);t.value=f.cards,r.value=f.fetchedAt,o.value="",a.value=!1,l=v;return}const g=++n;a.value=!0,o.value="";try{const f=await Xm({from:p,to:w});if(g===n){const m=new Date().toISOString();t.value=f,r.value=m,s.set(v,{cards:f,fetchedAt:m}),l=v}}catch(f){g===n&&(t.value=[],o.value=f instanceof Error?f.message:"deck_fetch_failed",e.notifyError&&e.notifyError("Unable to fetch Deck cards. Check the Deck app or try again."))}finally{g===n&&(a.value=!1)}}return Be(()=>[e.from.value,e.to.value],([u,p],[w,v])=>{if(!u||!p){t.value=[];return}u===w&&p===v||c()}),{deckCards:t,deckLoading:a,deckError:o,deckLastFetchedAt:r,refreshDeck:c}}function Sr(e){return["all","mine","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine"].includes(e)?e:"all"}function va(e,t,a){const o=e.status;return t==="open"?o==="active":t==="archived"?o==="archived":t==="done"?o==="done"?!0:a&&o==="archived":!1}function jn(e){return e.dueTs!=null||e.match==="due"}function Un(e){if(e.dueTs==null)return!1;const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),o=a+24*60*60*1e3;return e.dueTs>=a&&e.dueTs<o}function J0(e){const{deckSettings:t,deckCards:a,uid:o,root:r}=e,n=Q(Sr(t.value.defaultFilter));Be(()=>t.value.defaultFilter,g=>{const f=Sr(g);f!==n.value&&(n.value=f)});const s=B(()=>{const g=new Set((t.value.hiddenBoards||[]).map(f=>Number(f)).filter(f=>Number.isFinite(f)));return(a.value||[]).filter(f=>!g.has(Number(f.boardId)))}),l=B(()=>{const g=t.value.mineMode??"assignee",f=(o.value||"").trim().toLowerCase();return m=>{if(!f)return!1;const D=(m.assignees||[]).some(I=>typeof I.uid=="string"&&I.uid.toLowerCase()===f),T=typeof m.createdBy=="string"?m.createdBy.trim().toLowerCase():"",M=T&&T===f,_=typeof m.doneBy=="string"?m.doneBy.trim().toLowerCase():"",$=_&&_===f;return g==="creator"?M||$:g==="assignee"?D||$:D||M||$}}),i=B(()=>{const g=l.value,f=t.value.solvedIncludesArchived!==!1,m=n.value,D=s.value;if(m==="all")return D;if(m==="mine")return D.filter(_=>g(_));if(m.startsWith("due_today")){const _=m.endsWith("_mine");return D.filter($=>{const I=Un($),C=_?g($):!0;return I&&C})}if(m.startsWith("due_")){const _=m.endsWith("_mine");return D.filter($=>{const I=jn($),C=_?g($):!0;return I&&C})}const[T,M]=m.split("_");return D.filter(_=>{const $=va(_,T,f),I=M==="all"?!0:g(_);return $&&I})}),c=B(()=>{const g=l.value,f=t.value.solvedIncludesArchived!==!1,m=s.value;return[{value:"all",label:"All cards",mine:!1,matches:()=>!0},{value:"open_all",label:"Open  All",mine:!1,matches:T=>va(T,"open",f)},{value:"open_mine",label:"Open  Mine",mine:!0,matches:T=>va(T,"open",f)&&g(T)},{value:"done_all",label:"Done  All",mine:!1,matches:T=>va(T,"done",f)},{value:"done_mine",label:"Done  Mine",mine:!0,matches:T=>va(T,"done",f)&&g(T)},{value:"archived_all",label:"Archived  All",mine:!1,matches:T=>va(T,"archived",f)},{value:"archived_mine",label:"Archived  Mine",mine:!0,matches:T=>va(T,"archived",f)&&g(T)},{value:"due_all",label:"Due  All",mine:!1,matches:T=>jn(T)},{value:"due_mine",label:"Due  Mine",mine:!0,matches:T=>jn(T)&&g(T)},{value:"due_today_all",label:"Due today  All",mine:!1,matches:T=>Un(T)},{value:"due_today_mine",label:"Due today  Mine",mine:!0,matches:T=>Un(T)&&g(T)}].map(T=>({value:T.value,label:T.label,mine:T.mine,count:m.filter(T.matches).length}))}),u=B(()=>{const g=l.value,f=t.value.solvedIncludesArchived!==!1,m=s.value,D=[];return[{key:"open_all",label:"Open  All",status:"open",mine:!1},{key:"open_mine",label:"Open  Mine",status:"open",mine:!0},{key:"done_all",label:"Done  All",status:"done",mine:!1},{key:"done_mine",label:"Done  Mine",status:"done",mine:!0},{key:"archived_all",label:"Archived  All",status:"archived",mine:!1},{key:"archived_mine",label:"Archived  Mine",status:"archived",mine:!0}].forEach(M=>{const _=m.filter(C=>{const S=va(C,M.status,f),b=M.mine?g(C):!0;return S&&b}),$=new Map;_.forEach(C=>{if(C.boardId==null)return;const S=Number(C.boardId),b=$.get(S)||{count:0,title:C.boardTitle||"",color:C.boardColor};b.count+=1,b.title=C.boardTitle||b.title,b.color=C.boardColor??b.color,$.set(S,b)});let I;if($.size){const C=Array.from($.entries()).sort((S,b)=>b[1].count-S[1].count);I={title:C[0][1].title,color:C[0][1].color}}D.push({key:M.key,label:M.label,titles:_.map(C=>C.title||`Card ${C.id}`),count:_.length,board:I})}),D}),p=B(()=>{const g=t.value.ticker||{autoScroll:!0,intervalSeconds:5},f=Math.min(10,Math.max(3,Number(g.intervalSeconds??5)||5));return{autoScroll:g.autoScroll!==!1,intervalSeconds:f}}),w=B(()=>t.value.filtersEnabled&&t.value.enabled&&!!(o.value||"").trim()),v=B(()=>`${r.value||""}/apps/deck/`);return{deckFilter:n,deckVisibleCards:s,deckMineMatcher:l,deckFilteredCards:i,deckSummaryBuckets:u,deckTickerConfig:p,deckCanFilterMine:w,deckUrl:v,deckFilterOptions:c}}function Y0(e){const{widgetsRegistry:t,createDefaultWidgets:a,createDashboardPreset:o,dashboardMode:r,deckEnabled:n,hasInitialLoad:s,queueSaveRef:l}=e;function i(){return a()}const c=Q(i()),u=Q(!1),p=Q(!1),w=Q("");function v(){var x;s.value&&u.value&&((x=l.value)==null||x.call(l,!1),u.value=!1)}Be(()=>s.value,x=>{x&&u.value&&v()});const g=B(()=>{const x=c.value;return n.value?x:x.filter(E=>E.type!=="deck")}),f=B(()=>Object.keys(t).map(x=>{var E;return{type:x,label:((E=t[x])==null?void 0:E.label)||x}}));function m(x){r.value=x,c.value=o(x),u.value=!0,v()}function D(x,E){c.value=c.value.map(P=>P.id===x?E({...P,layout:{...P.layout}}):P),u.value=!0,v()}function T(x){const E=["quarter","half","full"];D(x,P=>{const q=E.indexOf(P.layout.width),O=E[(q+1)%E.length];return{...P,layout:{...P.layout,width:O}}})}function M(x){const E=["s","m","l","xl"];D(x,P=>{const q=E.indexOf(P.layout.height),O=E[(q+1)%E.length];return{...P,layout:{...P.layout,height:O}}})}function _(x,E){const P=[...c.value].sort((K,J)=>(K.layout.order||0)-(J.layout.order||0)),q=P.findIndex(K=>K.id===x);if(q<0)return;const O=E==="up"?q-1:q+1;if(O<0||O>=P.length)return;const j=P[q].layout.order;P[q].layout.order=P[O].layout.order,P[O].layout.order=j,c.value=P,u.value=!0,v()}function $(x){c.value=c.value.filter(E=>E.id!==x),u.value=!0,v()}function I(x){const E=t[x];if(!E)return;const P=c.value.reduce((O,j)=>Math.max(O,j.layout.order||0),0),q={id:`widget-${x}-${Date.now()}`,type:x,options:{},layout:{...E.defaultLayout,order:P+10},version:1};c.value=[...c.value,q],w.value="",u.value=!0,v()}function C(x,E){const P=t[x];if(!P)return;const q=c.value.reduce((K,J)=>Math.max(K,J.layout.order||0),0);let O=Number.isFinite(E)?Number(E):q+10;for(Number.isFinite(O)||(O=q+10);c.value.some(K=>K.layout.order===O);)O+=.1;const j={id:`widget-${x}-${Date.now()}`,type:x,options:{},layout:{...P.defaultLayout,order:O},version:1};c.value=[...c.value,j],u.value=!0,v()}function S(x,E){if(!Number.isFinite(E??NaN))return;const P=Number(E),q=c.value.map(O=>O.id===x?{...O,layout:{...O.layout,order:P}}:{...O});q.sort((O,j)=>(O.layout.order||0)-(j.layout.order||0)),c.value=q.map((O,j)=>({...O,layout:{...O.layout,order:(j+1)*10}})),u.value=!0,v()}function b(x,E,P){c.value=c.value.map(q=>{if(q.id!==x)return q;const O={...q.options||{}};if(E.includes(".")){const j=E.split("."),K={...O};let J=K;for(let pe=0;pe<j.length-1;pe+=1){const Y=j[pe];J[Y]={...J[Y]||{}},J=J[Y]}return J[j[j.length-1]]=P,{...q,options:K}}return E==="scale"?(O.scale=P,"textSize"in O&&delete O.textSize,{...q,options:O}):(O[E]=P,{...q,options:O})}),u.value=!0,v()}function h(){c.value=o(r.value),u.value=!0,v()}return{layoutWidgets:c,widgetsDirty:u,isLayoutEditing:p,newWidgetType:w,widgets:g,availableWidgetTypes:f,persistWidgets:v,applyDashboardPreset:m,updateWidget:D,cycleWidth:T,cycleHeight:M,moveWidget:_,removeWidget:$,addWidget:I,addWidgetAt:C,reorderWidget:S,updateWidgetOptions:b,resetWidgets:h}}function Z0(e){const{performLoad:t,refreshPresets:a,range:o,offset:r,onboardingState:n,hasInitialLoad:s,evaluateOnboarding:l,dashboardMode:i}=e;Be(n,c=>{s.value&&l(c)}),Be(n,c=>{const u=c==null?void 0:c.dashboardMode;(u==="quick"||u==="standard"||u==="pro")&&(i.value=u)}),At(async()=>{console.info("[opsdash] start");try{await t()}catch(c){console.error(c),alert("Initial load failed")}a().catch(c=>console.warn("[opsdash] presets fetch failed",c))}),Be(o,()=>{r.value=0,t().catch(console.error)})}function X0(e){return Array.from(e.reduce((t,a)=>(a.boardId==null||t.has(a.boardId)||t.set(a.boardId,{id:a.boardId,title:a.boardTitle,color:a.boardColor}),t),new Map).values())}function Q0(e){return{widgetContext:B(()=>{var a,o;return{summary:e.timeSummary.value,activeDayMode:e.activeDayMode.value,targetsSummary:e.targetsSummary.value,targetsConfig:e.targetsConfig.value,stats:e.stats,byDay:e.byDay.value,byCal:e.byCal.value,groupsById:e.groupsById.value,groups:e.calendarGroupsWithToday.value,balanceOverview:e.balanceOverview.value,balanceConfig:e.balanceCardConfig.value,rangeLabel:e.rangeLabel.value,rangeMode:e.range.value,offset:e.offset.value,from:e.from.value,to:e.to.value,lookbackWeeks:e.trendLookbackWeeks.value,balanceNote:e.balanceNote.value,activitySummary:e.activitySummary.value,activityConfig:e.activityCardConfig.value,activityDayOffTrend:e.activityDayOffTrend.value,activityTrendUnit:e.range.value==="month"?"mo":"wk",activityDayOffLookback:e.trendLookbackWeeks.value,deckBuckets:e.deckSummaryBuckets.value,deckRangeLabel:e.rangeLabel.value,deckLoading:e.deckLoading.value,deckError:e.deckError.value,deckTicker:e.deckTickerConfig.value,deckFilter:e.deckFilter.value,onDeckFilter:r=>e.setDeckFilter(r),deckShowBoardBadges:((o=(a=e.deckSettings.value)==null?void 0:a.ticker)==null?void 0:o.showBoardBadges)!==!1,deckUrl:e.deckUrl.value,deckCards:e.deckCards.value,deckBoards:X0(e.deckCards.value||[]),uid:e.uid.value,notesPrev:e.notesPrev.value,notesCurr:e.notesCurrDraft.value,notesHistory:e.notesHistory.value,notesLabelPrev:e.notesLabelPrev.value,notesLabelCurr:e.notesLabelCurr.value,notesLabelPrevTitle:e.notesLabelPrevTitle.value,notesLabelCurrTitle:e.notesLabelCurrTitle.value,isSavingNote:e.isSavingNote.value,onSaveNote:()=>e.saveNotes(),onUpdateNotes:r=>{e.notesCurrDraft.value=r},isLayoutEditing:e.isLayoutEditing.value,onUpdateWidgetOptions:(r,n,s)=>{e.updateWidgetOptions(r,n,s)},charts:e.charts.value,calendarChartData:e.calendarChartData.value,categoryChartsById:e.categoryChartsById.value,calendarGroups:e.calendarGroups.value,calendarCategoryMap:e.calendarCategoryMap.value,categoryColorMap:e.categoryColorMap.value,colorsById:e.colorsById.value,colorsByName:e.colorsByName.value,currentTargets:e.currentTargets.value,calendarTodayHours:e.calendarTodayHours.value}})}}function bc(){var t;if(typeof window>"u")return!1;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function ew(e,t={}){var o,r,n,s,l,i;if(typeof window>"u")return;const a=window;try{if((r=(o=a==null?void 0:a.OCA)==null?void 0:o.Analytics)!=null&&r.trackEvent){a.OCA.Analytics.trackEvent("opsdash",e,t);return}if((s=(n=a==null?void 0:a.OCA)==null?void 0:n.Analytics)!=null&&s.track){a.OCA.Analytics.track("opsdash",e,t);return}if((i=(l=a==null?void 0:a.OC)==null?void 0:l.eventBus)!=null&&i.emit){a.OC.eventBus.emit("opsdash:telemetry",{app:"opsdash",event:e,payload:t});return}}catch(c){bc()&&console.warn("[opsdash] telemetry emit failed",e,c);return}bc()&&console.debug("[opsdash] telemetry (noop)",e,t)}const tw={version:"0.5.1"},aw={class:"app-shell"},ow={class:"app-main"},rw={class:"app-container"},nw={key:0,class:"range-toolbar",role:"toolbar","aria-label":"Collapsed range controls"},sw=["aria-expanded","aria-label"],lw=["disabled"],iw=["disabled","aria-pressed"],cw={class:"range-toolbar__group",role:"group","aria-label":"Navigate periods"},dw=["disabled"],uw=["title"],fw=["disabled"],gw={class:"appbar"},pw={class:"title"},hw=["src"],mw=["textContent"],vw={class:"hint appbar-meta"},bw=["textContent"],yw={key:1,title:"Results truncated for performance"},ww=["title"],kw={class:"cards-toolbar"},_w={key:0,class:"cards-toolbar__add"},xw=["value"],Cw=["disabled"],Sw={class:"cards"},$w={key:0,class:"cards-loading"},Tw={class:"tabs"},Mw={class:"card full tab-panel"},Dw={class:"card full tab-panel"},Aw={class:"card full tab-panel"},Ew={key:2,class:"card full tab-panel"},Lw={class:"hint footer"},Ow=Me({__name:"App",setup(e){function t(Z){var Je,xe;const ce=window;(xe=(Je=ce.OC)==null?void 0:Je.Notification)!=null&&xe.showTemporary?ce.OC.Notification.showTemporary(Z):console.log("SUCCESS:",Z)}function a(Z){var Je,xe;const ce=window;(xe=(Je=ce.OC)==null?void 0:Je.Notification)!=null&&xe.showTemporary?ce.OC.Notification.showTemporary(Z):(console.error("ERROR:",Z),alert(Z))}const{navOpen:o,toggleNav:r,navToggleLabel:n,navToggleIcon:s}=V0(),l=Q(null);function i(){o.value||r()}Be(()=>o.value,Z=>{if(typeof document>"u")return;const ce=Z?"var(--app-navigation-width, 300px)":"0px";document.body.style.setProperty("--opsdash-nav-offset",ce)},{immediate:!0}),Nt(()=>{typeof document>"u"||document.body.style.removeProperty("--opsdash-nav-offset")});const c=Q("cal"),u=Q("week"),p=Q(0),w=B(()=>{const Z=de.value;if(!Z)return"Partial data due to caps";const ce=[];return Z.maxPerCal!=null&&ce.push(`cap per calendar: ${Z.maxPerCal}`),Z.maxTotal!=null&&ce.push(`cap total: ${Z.maxTotal}`),Z.totalProcessed!=null&&ce.push(`processed: ${Z.totalProcessed}`),ce.join("  ")}),v=Q(!1),{scheduleDraw:g}=g0(),{route:f,getJson:m,postJson:D,deleteJson:T,root:M}=m0(),{calendarDayLink:_,fetchDavColors:$}=b0({root:M,isDebug:us}),I=e0({range:u,offset:p,route:Z=>f(Z),getJson:m,postJson:D,notifySuccess:t,notifyError:a}),{notesPrev:C,notesCurrDraft:S,notesHistory:b,isSavingNote:h,fetchNotes:x,saveNotes:E}=I,P=Q(!1),q=Q("standard"),O=Q(null),j=Q(!0),{layoutWidgets:K,isLayoutEditing:J,newWidgetType:pe,widgets:Y,availableWidgetTypes:R,applyDashboardPreset:ae,cycleWidth:ve,cycleHeight:H,moveWidget:re,removeWidget:be,addWidget:F,addWidgetAt:z,reorderWidget:U,updateWidgetOptions:ne,resetWidgets:ye}=Y0({widgetsRegistry:Da,createDefaultWidgets:Nn,createDashboardPreset:ic,dashboardMode:q,deckEnabled:j,hasInitialLoad:P,queueSaveRef:O}),{calendars:L,colorsByName:W,colorsById:G,groupsById:te,selected:ee,isLoading:oe,isTruncated:fe,truncLimits:de,uid:ue,from:se,to:_e,stats:he,byCal:ge,byDay:me,longest:Se,charts:Ce,targetsWeek:Te,targetsMonth:Oe,targetsConfig:Ie,onboarding:Fe,load:He,themePreference:ot,reportingConfig:st,deckSettings:Pe}=s0({range:u,offset:p,userChangedSelection:v,route:Z=>f(Z),getJson:m,notifyError:a,scheduleDraw:g,fetchNotes:x,isDebug:us,fetchDavColors:$,widgets:K});function mt(Z){st.value=Mn(Z,st.value),ba(!1)}function Ye(Z){Pe.value=Dn(Z,Pe.value);const ce=Sr(Pe.value.defaultFilter);Ea.value=ce,ba(!1)}Be(()=>Pe.value.enabled,Z=>{j.value=Z,!Z&&c.value==="deck"&&(c.value="cal")},{immediate:!0});const{deckCards:Xe,deckLoading:So,deckLastFetchedAt:Kn,deckError:Tr,refreshDeck:qn}=G0({from:se,to:_e,notifyError:a}),{deckFilter:Ea,deckFilteredCards:Gn,deckSummaryBuckets:Jn,deckTickerConfig:Mr,deckCanFilterMine:Dr,deckUrl:$o,deckFilterOptions:Yn}=J0({deckSettings:Pe,deckCards:Xe,uid:ue,root:M}),Zn=Z=>{Ea.value=Sr(Z)},Ka=Fe,{themePreference:qa,effectiveTheme:Xn,systemTheme:Ar,setThemePreference:To}=N0({serverPreference:ot,route:Z=>f(Z),postJson:D,notifySuccess:t,notifyError:a});function Qn(Z){$c(Z||"categories")}const{exportSidebarConfig:es,importSidebarConfig:Er}=z0({selected:ee,groupsById:te,targetsWeek:Te,targetsMonth:Oe,targetsConfig:Ie,themePreference:qa,onboardingState:Ka,widgets:K,setThemePreference:To,postJson:D,route:Z=>f(Z),performLoad:()=>ya(),notifySuccess:t,notifyError:a}),{queueSave:ba,isSaving:X}=l0({route:Z=>f(Z),postJson:D,notifyError:a,notifySuccess:t,onReload:()=>ya(),selected:ee,groupsById:te,targetsWeek:Te,targetsMonth:Oe,targetsConfig:Ie,themePreference:qa,reportingConfig:st,deckSettings:Pe,widgets:K});O.value=ba;const{toggleCalendar:ie,setGroup:ke,setTarget:it,updateTargetsConfig:ut,selectAll:ts}=u0({calendars:L,selected:ee,groupsById:te,targetsWeek:Te,targetsMonth:Oe,targetsConfig:Ie,range:u,queueSave:ba,userChangedSelection:v}),{presets:IC,presetsLoading:PC,presetSaving:FC,presetApplying:HC,presetWarnings:WC,refreshPresets:xc,savePreset:Cc,loadPreset:zC,deletePreset:RC,clearPresetWarnings:jC}=f0({route:(Z,ce)=>f(Z,ce),getJson:m,postJson:D,deleteJson:T,notifyError:a,notifySuccess:t,queueSave:ba,selected:ee,groupsById:te,targetsWeek:Te,targetsMonth:Oe,targetsConfig:Ie,userChangedSelection:v}),Sc=q0({onboardingState:Ka,route:Z=>f(Z),postJson:D,notifySuccess:t,notifyError:a,setThemePreference:To,savePreset:Cc,reloadAfterPersist:()=>ya(),setSelected:Z=>{ee.value=[...Z]},setTargetsWeek:Z=>{Te.value={...Z}},setTargetsMonth:Z=>{Oe.value={...Z}},setTargetsConfig:Z=>{Ie.value=Jt(Z)},setGroupsById:Z=>{te.value={...Z}},setDeckSettings:Z=>{Pe.value={...Z}},setReportingConfig:Z=>{st.value={...Z}},setOnboardingState:Z=>{Fe.value={...Fe.value||{},...Z}},setDashboardMode:Z=>{q.value=Z}}),{autoWizardNeeded:UC,onboardingRunId:VC,onboardingWizardVisible:KC,openWizardFromSidebar:$c,wizardStartStep:qC,hasExistingConfig:GC,wizardCalendars:JC,wizardInitialSelection:YC,wizardInitialStrategy:ZC,wizardInitialAllDayHours:XC,wizardInitialTotalHours:QC,wizardInitialDeckSettings:eS,wizardInitialReportingConfig:tS,wizardInitialDashboardMode:aS,isOnboardingSaving:oS,isSnapshotSaving:rS,snapshotNotice:nS,evaluateOnboarding:Tc,handleWizardComplete:sS,handleWizardSkip:lS,handleWizardClose:iS,handleWizardSaveSnapshot:cS}=I0({onboardingState:Ka,calendars:L,selected:ee,targetsConfig:Ie,deckSettings:Pe,reportingConfig:st,hasInitialLoad:P,actions:Sc}),dS=async Z=>{await sS(Z),Z!=null&&Z.dashboardMode&&ae(Z.dashboardMode)},uS=async Z=>{Z!=null&&Z.dashboardMode&&ae(Z.dashboardMode),await Sc.saveStep(Z)};async function ya(){await He(),P.value||(P.value=!0),Tc()}const{showCollapsedRangeControls:fS,rangeToggleLabel:gS,rangeDateLabel:Mc,loadCurrent:Dc,toggleRangeCollapsed:as,goPrevious:os,goNext:rs}=P0({navOpen:o,range:u,offset:p,from:se,to:_e,isLoading:oe,performLoad:()=>ya()});function pS(Z){var ce;i(),(ce=l.value)==null||ce.openTab(Z)}const{shortcutsOpen:hS,openShortcuts:mS,closeShortcuts:vS,shortcutGroups:bS}=K0({goPrevious:os,goNext:rs,toggleRange:as,saveNotes:()=>E(),openConfigPanel:()=>pS("config"),toggleEditLayout:()=>{J.value=!J.value},openWidgetOptions:()=>{var Z,ce;J.value&&((ce=(Z=Ec.value)==null?void 0:Z.openOptionsForSelected)==null||ce.call(Z))},ensureSidebarVisible:i,onOpen:({source:Z})=>ew("shortcuts_opened",{source:Z})}),Ac=Q("active"),ns=B(()=>u.value==="month"?"Month":"Week"),Ec=Q(null),ss=B(()=>{const Z=Jt(Ie.value);return u.value==="month"&&(Z.totalHours=yo(Z.totalHours),Z.categories=Z.categories.map(ce=>({...ce,targetHours:yo(ce.targetHours)}))),Z}),Lc=B(()=>{const Z=ss.value;try{return xi({config:Z,stats:he,byDay:me.value||[],byCal:ge.value||[],groupsById:te.value||{},range:u.value,from:se.value,to:_e.value})}catch(ce){return console.error("[opsdash] targets summary failed",ce),_i(Z)}}),Lr=B(()=>{if(u.value==="month"){const Z=Oe.value||{};if(Z&&Object.keys(Z).length>0)return Z;const ce=Te.value||{},Je={};return Object.entries(ce).forEach(([xe,Ht])=>{const ct=Number(Ht);Number.isFinite(ct)&&(Je[xe]=yo(ct))}),Je}return Te.value||{}}),ls=B(()=>{var Z;return{...gr(),...((Z=Ie.value)==null?void 0:Z.activityCard)??{}}}),is=B(()=>{var Je;const Z=Ua(),ce=((Je=Ie.value)==null?void 0:Je.balance)??Z;return{...Z,...ce,thresholds:{...Z.thresholds,...ce.thresholds??{}},relations:{...Z.relations,...ce.relations??{}},trend:{...Z.trend,...ce.trend??{}},dayparts:{...Z.dayparts,...ce.dayparts??{}},ui:{...Z.ui,...ce.ui??{}}}}),yS=B(()=>({showNotes:!!is.value.ui.showNotes})),wS=B(()=>{var Z;return Math.max(1,Math.min(12,((Z=is.value.trend)==null?void 0:Z.lookbackWeeks)??1))}),kS=B(()=>{if(!is.value.ui.showNotes)return"";const Z=(S.value??"").trim();return Z||(C.value??"").trim()}),{categoryLabelById:_S,categoryColorMap:Oc,calendarCategoryMap:cs,calendarGroups:Mo}=T0({calendars:L,selected:ee,groupsById:te,colorsById:G,targetsConfig:ss,targetsSummary:Lc,byCal:ge,currentTargets:Lr,isDebug:us}),{balanceOverview:xS}=D0({stats:he,categoryColorMap:Oc});B(()=>{var Je,xe;if(!ls.value.showHint)return"";const ce=(Array.isArray((xe=(Je=Ie.value)==null?void 0:Je.balance)==null?void 0:xe.categories)?Ie.value.balance.categories:[]).map(Ht=>{const ct=String(Ht??"").trim();if(!ct)return"";const na=_S.value[ct];return na||ct.toUpperCase()}).filter(Ht=>Ht);return ce.length?`Mapping via Sidebar  ${ce.join(" / ")}`:""});const{calendarChartData:ds,categoryChartsById:CS}=y0({charts:Ce,colorsById:G,calendarGroups:Mo,calendarCategoryMap:cs,targetsConfig:ss,currentTargets:Lr,activityCardConfig:ls}),Bc=B(()=>{var Ht;const Z=(Ht=ds.value)==null?void 0:Ht.stacked;if(!Z||!Array.isArray(Z.labels)||!Array.isArray(Z.series))return{};const ce=Pc(new Date),Je=Z.labels.findIndex(ct=>String(ct??"")===ce);if(Je<0)return{};const xe={};return Z.series.forEach(ct=>{var Ga;const na=String((ct==null?void 0:ct.id)??""),Wt=Number(((Ga=ct==null?void 0:ct.data)==null?void 0:Ga[Je])??0),gs=Number.isFinite(Wt)?Math.max(0,Wt):0;na&&(xe[na]=(xe[na]||0)+gs)}),xe}),SS=B(()=>{var na;const Z=(na=ds.value)==null?void 0:na.stacked,ce=Z==null?void 0:Z.labels,Je=Z==null?void 0:Z.series;if(!Z||!Array.isArray(ce)||!Array.isArray(Je))return{};const xe=Pc(new Date),Ht=ce.findIndex(Wt=>String(Wt??"")===xe);if(Ht<0)return{};const ct={};return Je.forEach(Wt=>{var Hc,Wc;const gs=String((Wt==null?void 0:Wt.id)??""),Ga=(Hc=cs.value)==null?void 0:Hc[gs];if(!Ga)return;const Fc=Number(((Wc=Wt==null?void 0:Wt.data)==null?void 0:Wc[Ht])??0),zS=Number.isFinite(Fc)?Math.max(0,Fc):0;ct[Ga]=(ct[Ga]||0)+zS}),ct}),$S=B(()=>Mo.value.map(Z=>({...Z,todayHours:SS.value[Z.id]||0}))),TS=B(()=>{const Z=Mo.value||[];return Z.length&&[...Z].sort((Je,xe)=>(xe.summary.actualHours||0)-(Je.summary.actualHours||0))[0]||null}),{timeSummary:MS,activitySummary:DS,activityDayOffTrend:AS}=M0({stats:he,byDay:me,charts:Ce,calendars:L,selected:ee,rangeLabel:ns,rangeStart:se,rangeEnd:_e,offset:p,activeDayMode:Ac,topCategory:TS}),{detailsIndex:ES,toggle:LS}=R0();function us(){return!1}const{iconSrc:OS,onIconError:Nc,appVersion:Ic}=v0({pingUrl:()=>f("ping"),getJson:m,pkgVersion:String(tw.version),root:M}),{notesLabelPrev:BS,notesLabelCurr:NS,notesLabelPrevTitle:IS,notesLabelCurrTitle:PS}=j0(u),{widgetContext:FS}=Q0({timeSummary:MS,activeDayMode:Ac,targetsSummary:Lc,targetsConfig:Ie,stats:he,byDay:me,byCal:ge,groupsById:te,calendarGroupsWithToday:$S,balanceOverview:xS,balanceCardConfig:yS,rangeLabel:ns,range:u,offset:p,from:se,to:_e,trendLookbackWeeks:wS,balanceNote:kS,activitySummary:DS,activityCardConfig:ls,activityDayOffTrend:AS,deckSummaryBuckets:Jn,deckLoading:So,deckError:Tr,deckTickerConfig:Mr,deckFilter:Ea,setDeckFilter:Zn,deckSettings:Pe,deckUrl:$o,deckCards:Xe,uid:ue,notesPrev:C,notesCurrDraft:S,notesHistory:b,notesLabelPrev:BS,notesLabelCurr:NS,notesLabelPrevTitle:IS,notesLabelCurrTitle:PS,isSavingNote:h,saveNotes:E,isLayoutEditing:J,updateWidgetOptions:ne,charts:Ce,calendarChartData:ds,categoryChartsById:CS,calendarGroups:Mo,calendarCategoryMap:cs,categoryColorMap:Oc,colorsById:G,colorsByName:W,currentTargets:Lr,calendarTodayHours:Bc}),HS=B(()=>q.value==="quick"?"Quick preset":q.value==="pro"?"Pro preset":"Standard preset");function fs(Z){return Number(Z??0).toFixed(2)}function Pc(Z){const ce=Z.getFullYear(),Je=`${Z.getMonth()+1}`.padStart(2,"0"),xe=`${Z.getDate()}`.padStart(2,"0");return`${ce}-${Je}-${xe}`}function WS(Z){mS(Z??null,"button")}return Z0({performLoad:ya,refreshPresets:xc,range:u,offset:p,onboardingState:Ka,hasInitialLoad:P,evaluateOnboarding:Tc,dashboardMode:q}),(Z,ce)=>{const Je=eu("NcAppSidebarToggle");return y(),k("div",{id:"opsdash",class:Ee(["opsdash",{"is-nav-collapsed":!A(o)}])},[(y(),Re(xv,{key:A(VC),visible:A(KC),calendars:A(JC),"initial-selection":A(YC),"initial-strategy":A(ZC),"onboarding-version":A(ha),closable:!A(UC),"initial-theme-preference":A(qa),"system-theme":A(Ar),"initial-all-day-hours":A(XC),"initial-total-hours":A(QC),"initial-deck-settings":A(eS),"initial-reporting-config":A(tS),"initial-dashboard-mode":A(aS),"start-step":A(qC),"has-existing-config":A(GC),saving:A(oS),"snapshot-saving":A(rS),"snapshot-notice":A(nS),onClose:A(iS),onSkip:A(lS),onComplete:dS,onSaveCurrentConfig:A(cS),onSaveStep:uS},null,8,["visible","calendars","initial-selection","initial-strategy","onboarding-version","closable","initial-theme-preference","system-theme","initial-all-day-hours","initial-total-hours","initial-deck-settings","initial-reporting-config","initial-dashboard-mode","start-step","has-existing-config","saving","snapshot-saving","snapshot-notice","onClose","onSkip","onSaveCurrentConfig"])),$e(A($f),{"app-name":"Operational Dashboard","show-navigation":A(o)},{navigation:Ue(()=>[$e(dh,{ref_key:"sidebarRef",ref:l,id:"opsdash-sidebar",calendars:A(L),selected:A(ee),"groups-by-id":A(te),"is-loading":A(oe),range:u.value,offset:p.value,from:A(se),to:A(_e),"targets-week":A(Te),"targets-month":A(Oe),"targets-config":A(Ie),"nav-toggle-label":A(n),"nav-toggle-icon":A(s),presets:A(IC),"presets-loading":A(PC),"preset-saving":A(FC),"preset-applying":A(HC),"preset-warnings":A(WC),"theme-preference":A(qa),"effective-theme":A(Xn),"system-theme":A(Ar),"reporting-config":A(st),"deck-settings":A(Pe),"reporting-saving":A(X),"dashboard-mode":q.value,onLoad:ya,"onUpdate:range":ce[0]||(ce[0]=xe=>{u.value=xe,p.value=0,ya()}),"onUpdate:offset":ce[1]||(ce[1]=xe=>{p.value=xe,ya()}),onSelectAll:ce[2]||(ce[2]=xe=>A(ts)(xe)),onToggleCalendar:ce[3]||(ce[3]=xe=>A(ie)(xe)),onSetGroup:ce[4]||(ce[4]=xe=>A(ke)(xe.id,xe.n)),onSetTarget:ce[5]||(ce[5]=xe=>A(it)(xe.id,xe.h)),"onUpdate:targetsConfig":A(ut),onToggleNav:A(r),onSavePreset:A(Cc),onLoadPreset:A(zC),onDeletePreset:A(RC),onRefreshPresets:A(xc),onClearPresetWarnings:A(jC),onRerunOnboarding:A($c),onSetThemePreference:A(To),onExportConfig:A(es),onImportConfig:A(Er),onOpenShortcuts:WS,onSaveReporting:mt,onSaveDeckSettings:Ye},null,8,["calendars","selected","groups-by-id","is-loading","range","offset","from","to","targets-week","targets-month","targets-config","nav-toggle-label","nav-toggle-icon","presets","presets-loading","preset-saving","preset-applying","preset-warnings","theme-preference","effective-theme","system-theme","reporting-config","deck-settings","reporting-saving","dashboard-mode","onUpdate:targetsConfig","onToggleNav","onSavePreset","onLoadPreset","onDeletePreset","onRefreshPresets","onClearPresetWarnings","onRerunOnboarding","onSetThemePreference","onExportConfig","onImportConfig"])]),"sidebar-toggle":Ue(()=>[$e(Je,{open:A(o),onToggle:A(r)},null,8,["open","onToggle"])]),default:Ue(()=>[d("div",aw,[d("div",ow,[d("div",rw,[A(fS)?(y(),k("div",nw,[d("button",{class:"range-toolbar__btn",type:"button",onClick:ce[6]||(ce[6]=(...xe)=>A(r)&&A(r)(...xe)),"aria-expanded":A(o),"aria-controls":"opsdash-sidebar","aria-label":A(n)},N(A(s)),9,sw),d("button",{class:"range-toolbar__btn",type:"button",disabled:A(oe),onClick:ce[7]||(ce[7]=(...xe)=>A(Dc)&&A(Dc)(...xe))}," Refresh ",8,lw),ce[23]||(ce[23]=d("div",{class:"range-toolbar__divider","aria-hidden":"true"},null,-1)),d("button",{class:"range-toolbar__btn",type:"button",disabled:A(oe),onClick:ce[8]||(ce[8]=(...xe)=>A(as)&&A(as)(...xe)),"aria-pressed":u.value==="month"},N(A(gS)),9,iw),d("div",cw,[d("button",{class:"range-toolbar__btn",type:"button",disabled:A(oe),onClick:ce[9]||(ce[9]=(...xe)=>A(os)&&A(os)(...xe))},"  ",8,dw),d("span",{class:"range-toolbar__label",title:A(Mc)},N(A(Mc)),9,uw),d("button",{class:"range-toolbar__btn",type:"button",disabled:A(oe),onClick:ce[10]||(ce[10]=(...xe)=>A(rs)&&A(rs)(...xe))},"  ",8,fw)])])):V("",!0),d("div",gw,[d("div",pw,[d("img",{src:A(OS),onError:ce[11]||(ce[11]=(...xe)=>A(Nc)&&A(Nc)(...xe)),class:"app-icon",alt:"","aria-hidden":"true"},null,40,hw),ce[24]||(ce[24]=d("span",null,"Operational Dashboard",-1)),d("span",{class:"chip",textContent:N(u.value.toUpperCase())},null,8,mw)]),d("div",vw,[A(oe)?(y(),Re(A(fr),{key:0,size:16})):V("",!0),d("span",{textContent:N(A(ue))},null,8,bw),A(fe)?(y(),k("span",yw," Partial data")):V("",!0)])]),A(fe)?(y(),k("div",{key:1,class:"banner warn",title:w.value},[ce[25]||(ce[25]=De(" Showing partial data to keep things fast. ",-1)),A(de)&&A(de).totalProcessed!=null?(y(),k(le,{key:0},[De(" Processed "+N(A(de).totalProcessed)+" items. ",1)],64)):V("",!0)],8,ww)):V("",!0),d("div",kw,[d("button",{type:"button",class:"ghost-btn",onClick:ce[12]||(ce[12]=xe=>J.value=!A(J))},N(A(J)?"Done editing":"Edit layout"),1),A(J)?(y(),k("div",_w,[da(d("select",{"onUpdate:modelValue":ce[13]||(ce[13]=xe=>lt(pe)?pe.value=xe:null)},[ce[26]||(ce[26]=d("option",{value:"",disabled:""},"Select widget",-1)),(y(!0),k(le,null,we(A(R),xe=>(y(),k("option",{key:xe.type,value:xe.type},N(xe.label),9,xw))),128))],512),[[_n,A(pe)]]),d("button",{type:"button",class:"ghost-btn",disabled:!A(pe),onClick:ce[14]||(ce[14]=xe=>A(F)(A(pe)))}," Add ",8,Cw),d("button",{type:"button",class:"ghost-btn",onClick:ce[15]||(ce[15]=(...xe)=>A(ye)&&A(ye)(...xe))}," Reset ")])):V("",!0)]),d("div",Sw,[P.value?(y(),Re(Q1,{key:1,ref_key:"layoutRef",ref:Ec,widgets:A(Y),context:A(FS),editable:A(J),"widget-types":A(R),"preset-label":HS.value,"onEdit:width":A(ve),"onEdit:height":A(H),"onEdit:remove":A(be),"onEdit:move":A(re),"onEdit:options":A(ne),"onEdit:add":A(z),"onEdit:reorder":A(U),"onOpen:onboarding":Qn,"onReset:preset":ce[16]||(ce[16]=xe=>A(ae)(q.value.value))},null,8,["widgets","context","editable","widget-types","preset-label","onEdit:width","onEdit:height","onEdit:remove","onEdit:move","onEdit:options","onEdit:add","onEdit:reorder"])):(y(),k("div",$w,[$e(A(fr),{size:22}),ce[27]||(ce[27]=d("div",{class:"cards-loading__label"},"Loading your layout",-1))]))]),d("div",Tw,[d("a",{href:"#",class:Ee({active:c.value==="cal"}),onClick:ce[17]||(ce[17]=Qe(xe=>c.value="cal",["prevent"]))},"By Calendar",2),d("a",{href:"#",class:Ee({active:c.value==="day"}),onClick:ce[18]||(ce[18]=Qe(xe=>c.value="day",["prevent"]))},"By Day",2),d("a",{href:"#",class:Ee({active:c.value==="top"}),onClick:ce[19]||(ce[19]=Qe(xe=>c.value="top",["prevent"]))},"Longest Tasks",2),A(Pe).enabled?(y(),k("a",{key:0,href:"#",class:Ee({active:c.value==="deck"}),onClick:ce[20]||(ce[20]=Qe(xe=>c.value="deck",["prevent"]))}," Deck ",2)):V("",!0)]),da(d("div",Mw,[A(ge).length===0?(y(),Re(A(ur),{key:0,name:"No data",description:"Try changing the range or calendars"})):(y(),Re(ki,{key:1,rows:A(ge),n2:fs,targets:Lr.value,groups:A(Mo),"today-hours":Bc.value},null,8,["rows","targets","groups","today-hours"]))],512),[[lr,c.value==="cal"]]),da(d("div",Dw,[A(me).length===0?(y(),Re(A(ur),{key:0,name:"No data",description:"Try changing the range or calendars"})):(y(),Re(tg,{key:1,rows:A(me),n2:fs,link:A(_)},null,8,["rows","link"]))],512),[[lr,c.value==="day"]]),da(d("div",Aw,[A(Se).length===0?(y(),Re(A(ur),{key:0,name:"No data",description:"Try changing the range or calendars"})):(y(),Re(ug,{key:1,rows:A(Se),n2:fs,"details-index":A(ES),onToggle:A(LS)},null,8,["rows","details-index","onToggle"]))],512),[[lr,c.value==="top"]]),A(Pe).enabled?da((y(),k("div",Ew,[$e(Ni,{cards:A(Gn),loading:A(So),"range-label":ns.value,"last-fetched-at":A(Kn),"deck-url":A($o),error:A(Tr),filter:A(Ea),"can-filter-mine":A(Dr),"filters-enabled":A(Pe).filtersEnabled&&A(Pe).enabled,"filter-options":A(Yn),onRefresh:ce[21]||(ce[21]=xe=>A(qn)(!0)),"onUpdate:filter":ce[22]||(ce[22]=xe=>Ea.value=xe)},null,8,["cards","loading","range-label","last-fetched-at","deck-url","error","filter","can-filter-mine","filters-enabled","filter-options"])],512)),[[lr,c.value==="deck"]]):V("",!0),d("div",Lw,[A(Ic)?(y(),k(le,{key:0},[De(" Operational Dashboard  v"+N(A(Ic))+"  Built by Blade34242 @ Gellert Innovation ",1)],64)):(y(),k(le,{key:1},[De(" Operational Dashboard  v0.4.4  Built by Blade34242 @ Gellert Innovation ")],64))])])])])]),_:1},8,["show-navigation"]),$e(Av,{visible:A(hS),groups:A(bS),onClose:A(vS)},null,8,["visible","groups","onClose"])],2)}}});function Vn(){const e=document.getElementById("app");if(e){try{console.log("[opsdash] booting");const t=xf(Ow);t.config.errorHandler=(r,n,s)=>{const l=n!=null&&n.type&&n.type.name?n.type.name:"",i={err:r,info:s,name:l,stack:r instanceof Error?r.stack:void 0},c=window;Array.isArray(c.__opsdashErrors)||(c.__opsdashErrors=[]),c.__opsdashErrors.push(i),console.error("[opsdash] Vue error",i)};const a=t.mount(e),o=window;o.__opsdashApp=t,o.__opsdashRoot=a,t0(),console.log("[opsdash] mounted")}catch(t){console.error("Mount failed",t)}return}document.readyState==="complete"||document.readyState==="interactive"?setTimeout(Vn,50):window.addEventListener("DOMContentLoaded",Vn,{once:!0})}Vn();const Bw={key:0,class:"activity-card__header"},Nw={key:0,class:"pill"},Iw={key:1,class:"activity-card__hero"},Pw={key:2,class:"activity-card__subline"},Fw={key:3,class:"activity-card__meta"},Hw={key:4,class:"activity-card__extra"},Ww={key:5,class:"activity-card__trend"},zw={class:"dayoff-header"},Rw={key:0,class:"dayoff-meta"},jw={class:"dayoff-heatmap"},Uw=["title"],Vw={class:"dayoff-tile__label"},Kw={class:"dayoff-tile__value"},qw={class:"dayoff-tile__meta"},Gw={key:6,class:"activity-card__hint"},Jw=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"ActivityScheduleCard",props:{summary:{},rangeLabel:{},categoryHint:{},config:{},dayOffTrend:{},trendUnit:{},dayOffLookback:{},showHeader:{type:Boolean},title:{},cardBg:{}},setup(e){const t=gr(),a=e,o=B(()=>Object.assign({},t,a.config??{})),r=B(()=>a.title||"Activity & Schedule"),n=B(()=>({background:a.cardBg||void 0})),s=B(()=>a.showHeader!==!1),l=B(()=>{const $=[];$.push(`Events ${a.summary.events}`),a.summary.activeDays!=null&&$.push(`Active Days ${a.summary.activeDays}`);const I=f(a.summary.typicalStart,a.summary.typicalEnd);return I&&$.push(`Typical ${I}`),$.join("  ")}),i=B(()=>{const $=[];return o.value.showWeekendShare&&a.summary.weekendShare!=null&&$.push(`Weekend ${m(a.summary.weekendShare)}`),o.value.showEveningShare&&a.summary.eveningShare!=null&&$.push(`Evening ${m(a.summary.eveningShare)}`),$.join("  ")}),c=B(()=>{const $=[];if(o.value.showEarliestLatest){const I=D(a.summary.earliestStart),C=D(a.summary.latestEnd);(I||C)&&$.push({label:"Earliest/Late",value:`${I||""} / ${C||""}`})}return o.value.showOverlaps&&a.summary.overlapEvents!=null&&$.push({label:"Overlaps",value:a.summary.overlapEvents.toString()}),$}),u=B(()=>{const $=[];return o.value.showLongestSession&&a.summary.longestSession!=null&&a.summary.longestSession>0&&$.push({label:"Longest Session",value:`${Number(a.summary.longestSession).toFixed(1)} h`}),o.value.showLastDayOff&&a.summary.lastDayOff&&$.push({label:"Last day off",value:T(a.summary.lastDayOff)}),o.value.showLastDayOff&&a.summary.lastHalfDayOff&&$.push({label:"Last half day",value:T(a.summary.lastHalfDayOff)}),$}),p=B(()=>{const $=typeof a.dayOffLookback=="number"?a.dayOffLookback:null;if($!=null)return Math.max(0,Math.min(12,Math.floor($)));const I=(a.dayOffTrend??[]).filter(C=>Number((C==null?void 0:C.offset)??0)>0);return Math.max(0,Math.min(12,I.length))}),w=B(()=>{const $=Array.isArray(a.dayOffTrend)?a.dayOffTrend:[],I=new Map;$.forEach(E=>{const P=Number((E==null?void 0:E.offset)??0)||0;I.set(P,{offset:P,label:(E==null?void 0:E.label)??"",from:(E==null?void 0:E.from)??"",to:(E==null?void 0:E.to)??"",totalDays:Number((E==null?void 0:E.totalDays)??(E==null?void 0:E.total_days)??0)||0,daysOff:Number((E==null?void 0:E.daysOff)??(E==null?void 0:E.days_off)??0)||0,daysWorked:Number((E==null?void 0:E.daysWorked)??(E==null?void 0:E.days_worked)??0)||0})});const C=a.trendUnit==="mo"?"mo":"wk",S=a.trendUnit==="mo"?"This month":"This week",b=[],h=I.get(0)??{offset:0,label:S,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};b.push(h);const x=p.value;for(let E=1;E<=x;E+=1){const P=I.get(E)??{offset:E,label:`-${E} ${C}`,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};b.push(P)}return b}),v=B(()=>w.value.map($=>{const I=Math.max(0,Number($.totalDays)||0),C=Math.max(0,Math.min(I,Number($.daysOff)||0)),S=I>0?C/I:0;return{...$,share:S,tone:_(S)}})),g=B(()=>{const $=p.value;if($<=0)return"";const I=a.trendUnit==="mo"?"month":"week";return`${$} ${$===1?I:`${I}s`}`});function f($,I){return $&&I?`${$}${I}`:$?`${$}`:I?`${I}`:""}function m($){return`${Number($||0).toFixed(1)}%`}function D($){return $?$.length>=16?$.slice(11,16):$.length>=5?$.slice(0,5):null:null}function T($){const I=$.trim();if(!I)return"";if(I.split("-").length>=2){const S=new Date(I.length===10?`${I}T00:00:00`:I);if(!Number.isNaN(S.getTime()))return new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}).format(S)}return I}function M($){const I=Math.max(0,Math.min(1,$));return`${Math.round(I*100)}% off`}function _($){return $>=.5?"high":$>=.25?"mid":"low"}return($,I)=>(y(),k("div",{class:"card activity-card",style:Le(n.value)},[s.value?(y(),k("div",Bw,[d("span",null,N(r.value)+" ("+N($.rangeLabel)+")",1),$.summary.rangeLabel?(y(),k("span",Nw,N($.summary.rangeLabel),1)):V("",!0)])):V("",!0),l.value?(y(),k("div",Iw,[d("span",null,N(l.value),1)])):V("",!0),i.value?(y(),k("div",Pw,[d("span",null,N(i.value),1)])):V("",!0),c.value.length?(y(),k("div",Fw,[(y(!0),k(le,null,we(c.value,C=>(y(),k("span",{key:C.label},[d("strong",null,N(C.label),1),De(" "+N(C.value),1)]))),128))])):V("",!0),u.value.length?(y(),k("div",Hw,[(y(!0),k(le,null,we(u.value,C=>(y(),k("span",{key:C.label},[d("strong",null,N(C.label),1),De(" "+N(C.value),1)]))),128))])):V("",!0),o.value.showDayOffTrend&&v.value.length?(y(),k("div",Ww,[d("div",zw,[I[0]||(I[0]=d("span",null,"Days off trend",-1)),g.value?(y(),k("span",Rw," Last "+N(g.value),1)):V("",!0)]),d("div",jw,[(y(!0),k(le,null,we(v.value,C=>(y(),k("div",{key:C.offset,class:Ee(["dayoff-tile",[`dayoff-tile--${C.tone}`,{"dayoff-tile--current":C.offset===0}]]),title:`${C.label}  ${M(C.share)}`},[d("div",Vw,N(C.label),1),d("div",Kw,N(M(C.share)),1),d("div",qw,N(C.daysOff)+" off  "+N(C.daysWorked)+" on ",1)],10,Uw))),128))])])):V("",!0),o.value.showHint&&$.categoryHint?(y(),k("div",Gw,N($.categoryHint),1)):V("",!0)],4))}}),[["__scopeId","data-v-5d73a7ec"]])},Symbol.toStringTag,{value:"Module"})),Yw={key:0,class:"balance-card__header"},Zw={key:1,class:"balance-card__activity"},Xw={class:"activity-hero"},Qw={key:0,class:"activity-hero__line"},ek={key:1,class:"activity-subline"},tk={key:2,class:"activity-meta"},ak={key:3,class:"activity-meta activity-meta--extra"},ok={key:0,class:"activity-dayoff"},rk={class:"dayoff-header"},nk={key:0,class:"dayoff-meta"},sk={class:"dayoff-heatmap"},lk=["title"],ik={class:"dayoff-tile__label"},ck={class:"dayoff-tile__value"},dk={class:"dayoff-tile__meta"},uk={key:2,class:"balance-card__mix"},fk={class:"mix-header"},gk={class:"mix-subtitle"},pk={key:0,class:"mix-badge"},hk={class:"mix-column-label mix-column-label--current"},mk={class:"mix-list"},vk={class:"mix-label"},bk=["title"],yk={class:"mix-cell__value"},wk={key:3,class:"balance-card__warnings"},kk={key:4,class:"balance-card__note"},_k=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"BalanceOverviewCard",props:{overview:{},rangeLabel:{},rangeMode:{},lookbackWeeks:{},config:{},note:{},activitySummary:{},activityConfig:{},activityDayOffTrend:{},activityTrendUnit:{},activityDayOffLookback:{},showHeader:{type:Boolean},title:{},cardBg:{}},setup(e){const t=gr(),a=e;B(()=>Object.assign({},a.config??{}));const o=B(()=>(a.note??"").trim()),r=B(()=>Object.assign({},t,a.activityConfig??{})),n=B(()=>a.title||"Activity & Balance"),s=B(()=>({background:a.cardBg||void 0})),l=B(()=>a.showHeader!==!1),i=B(()=>{if(!a.activitySummary)return"";const Y=[];Y.push(`Events ${a.activitySummary.events}`),a.activitySummary.activeDays!=null&&Y.push(`Active Days ${a.activitySummary.activeDays}`);const R=O(a.activitySummary.typicalStart,a.activitySummary.typicalEnd);return R&&Y.push(`Typical ${R}`),Y.join("  ")}),c=B(()=>{if(!a.activitySummary)return"";const Y=[];return r.value.showWeekendShare&&a.activitySummary.weekendShare!=null&&Y.push(`Weekend ${q(a.activitySummary.weekendShare)}`),r.value.showEveningShare&&a.activitySummary.eveningShare!=null&&Y.push(`Evening ${q(a.activitySummary.eveningShare)}`),Y.join("  ")}),u=B(()=>{if(!a.activitySummary)return[];const Y=[];if(r.value.showEarliestLatest){const R=j(a.activitySummary.earliestStart),ae=j(a.activitySummary.latestEnd);(R||ae)&&Y.push({label:"Earliest/Late",value:`${R||""} / ${ae||""}`})}return r.value.showOverlaps&&a.activitySummary.overlapEvents!=null&&Y.push({label:"Overlaps",value:a.activitySummary.overlapEvents.toString()}),Y}),p=B(()=>{if(!a.activitySummary)return[];const Y=[];return r.value.showLongestSession&&a.activitySummary.longestSession!=null&&a.activitySummary.longestSession>0&&Y.push({label:"Longest Session",value:`${Number(a.activitySummary.longestSession).toFixed(1)} h`}),r.value.showLastDayOff&&a.activitySummary.lastDayOff&&Y.push({label:"Last day off",value:K(a.activitySummary.lastDayOff)}),r.value.showLastDayOff&&a.activitySummary.lastHalfDayOff&&Y.push({label:"Last half day",value:K(a.activitySummary.lastHalfDayOff)}),Y}),w=B(()=>{const Y=typeof a.activityDayOffLookback=="number"?a.activityDayOffLookback:null;if(Y!=null)return Math.max(0,Math.min(12,Math.floor(Y)));const R=(a.activityDayOffTrend??[]).filter(ae=>Number((ae==null?void 0:ae.offset)??0)>0);return Math.max(0,Math.min(12,R.length))}),v=B(()=>{const Y=Array.isArray(a.activityDayOffTrend)?a.activityDayOffTrend:[],R=new Map;Y.forEach(H=>{const re=Number((H==null?void 0:H.offset)??0)||0;re<=0||R.set(re,{offset:re,label:(H==null?void 0:H.label)??"",from:(H==null?void 0:H.from)??"",to:(H==null?void 0:H.to)??"",totalDays:Number((H==null?void 0:H.totalDays)??(H==null?void 0:H.total_days)??0)||0,daysOff:Number((H==null?void 0:H.daysOff)??(H==null?void 0:H.days_off)??0)||0,daysWorked:Number((H==null?void 0:H.daysWorked)??(H==null?void 0:H.days_worked)??0)||0})});const ae=a.activityTrendUnit==="mo"?"mo":"wk",ve=w.value||0;return Array.from(R.entries()).filter(([H])=>H<=ve||ve===0).map(([,H])=>({...H,label:`-${H.offset} ${ae}`})).sort((H,re)=>re.offset-H.offset)}),g=B(()=>v.value.map(Y=>{const R=Math.max(0,Number(Y.totalDays)||0),ae=Math.max(0,Math.min(R,Number(Y.daysOff)||0)),ve=R>0?ae/R:0;return{...Y,share:ve,tone:pe(ve)}})),f=B(()=>{const Y=w.value;if(Y<=0)return"";const R=a.activityTrendUnit==="mo"?"month":"week";return`${Y} ${Y===1?R:`${R}s`}`}),m=B(()=>{var Y;return((Y=a.overview)==null?void 0:Y.warnings)??[]}),D=B(()=>{var Y,R;return((R=(Y=a.overview)==null?void 0:Y.trend)==null?void 0:R.badge)??""}),T=B(()=>`CU. ${_.value}`),M=B(()=>Math.max(1,Math.min(4,a.lookbackWeeks||1))),_=B(()=>a.rangeMode==="month"?"MO":"WE"),$=B(()=>{var R,ae,ve;const Y=((ae=(R=a.overview)==null?void 0:R.trend)==null?void 0:ae.history)??((ve=a.overview)==null?void 0:ve.trendHistory)??[];return Array.isArray(Y)?Y.map(H=>({offset:Number((H==null?void 0:H.offset)??(H==null?void 0:H.step)??0)||0,label:String((H==null?void 0:H.label)??""),categories:Array.isArray(H==null?void 0:H.categories)?H.categories.map(re=>({id:String((re==null?void 0:re.id)??""),label:String((re==null?void 0:re.label)??""),share:Number((re==null?void 0:re.share)??0)||0})):[]})).filter(H=>H.offset>0):[]}),I=Y=>`-${Y} ${_.value}`,C=B(()=>{if(!a.overview)return[];const Y=M.value,R=new Map;return $.value.forEach(ae=>{const ve=Math.max(1,Math.min(12,Math.round(ae.offset)));if(!ve||ve>Y)return;const H={};ae.categories.forEach(re=>{re.id&&(H[re.id]=Number.isFinite(re.share)?re.share:0)}),R.set(ve,{offset:ve,label:I(ve),shares:H})}),Array.from(R.values()).sort((ae,ve)=>ve.offset-ae.offset)}),S=B(()=>C.value.length+1),b=B(()=>({gridTemplateColumns:`52px repeat(${Math.max(S.value,1)}, minmax(32px, 1fr))`})),h=Y=>Y>1?"up":Y<-1?"down":"flat",x=B(()=>a.overview?(a.overview.categories??[]).map(R=>{const ae=C.value.map(be=>({label:be.label,share:be.shares[R.id]??0,isCurrent:!1})),ve=typeof R.share=="number"?R.share:0,H=[...ae,{label:T.value,share:ve,isCurrent:!0}],re=H.map((be,F)=>{const z=F===0?be.share:H[F-1].share,U=be.share-z;return{label:be.label,share:be.share,isCurrent:!!be.isCurrent,trend:F===0?"flat":h(U)}});return{id:R.id,label:R.label,cells:re}}):[]),E=B(()=>{var R;const Y=M.value;if(Y>1){const ae=a.rangeMode==="month"?"months":"weeks";return`History  last ${Y} ${ae}`}return Y===1&&C.value.length?((R=C.value[C.value.length-1])==null?void 0:R.label)||I(1):I(Y||1)}),P=Y=>`${Math.max(0,Math.round(Y))}%`;function q(Y){return Y==null?"0%":`${Math.max(0,Math.min(100,Number(Y))).toFixed(1)}%`}function O(Y,R){const ae=j(Y),ve=j(R);return!ae&&!ve?"":ae&&ve?`${ae}${ve}`:ae||ve||""}function j(Y){if(!Y)return"";const R=new Date(Y);return Number.isNaN(R.getTime())?"":R.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function K(Y){const R=Y.trim();if(!R)return"";if(R.split("-").length>=2){const ve=new Date(R.length===10?`${R}T00:00:00`:R);if(!Number.isNaN(ve.getTime()))return new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}).format(ve)}return R}function J(Y){const R=Math.max(0,Math.min(1,Y));return`${Math.round(R*100)}% off`}function pe(Y){return Y>=.5?"high":Y>=.25?"mid":"low"}return(Y,R)=>(y(),k("div",{class:"card balance-card",style:Le(s.value)},[l.value?(y(),k("div",Yw,[d("span",null,N(n.value)+" ("+N(Y.rangeLabel)+")",1)])):V("",!0),Y.activitySummary?(y(),k("div",Zw,[d("div",Xw,[R[0]||(R[0]=d("div",{class:"activity-hero__title"},"Activity & Schedule",-1)),i.value?(y(),k("div",Qw,N(i.value),1)):V("",!0),c.value?(y(),k("div",ek,N(c.value),1)):V("",!0),u.value.length?(y(),k("div",tk,[(y(!0),k(le,null,we(u.value,ae=>(y(),k("span",{key:ae.label},[d("strong",null,N(ae.label),1),De(" "+N(ae.value),1)]))),128))])):V("",!0),p.value.length?(y(),k("div",ak,[(y(!0),k(le,null,we(p.value,ae=>(y(),k("span",{key:ae.label},[d("strong",null,N(ae.label),1),De(" "+N(ae.value),1)]))),128))])):V("",!0)]),r.value.showDayOffTrend&&g.value.length?(y(),k("div",ok,[d("div",rk,[R[1]||(R[1]=d("span",null,"Days off trend",-1)),f.value?(y(),k("span",nk,"Last "+N(f.value),1)):V("",!0)]),d("div",sk,[(y(!0),k(le,null,we(g.value,ae=>(y(),k("div",{key:ae.offset,class:Ee(["dayoff-tile",[`dayoff-tile--${ae.tone}`,{"dayoff-tile--current":ae.offset===0}]]),title:`${ae.label}  ${J(ae.share)}`},[d("div",ik,N(ae.label),1),d("div",ck,N(J(ae.share)),1),d("div",dk,N(ae.daysOff)+" off  "+N(ae.daysWorked)+" on ",1)],10,lk))),128))])])):V("",!0)])):V("",!0),x.value.length?(y(),k("div",uk,[d("div",fk,[d("div",null,[R[2]||(R[2]=d("div",{class:"mix-title"},"Category mix trend",-1)),d("div",gk,N(E.value),1)]),D.value?(y(),k("span",pk,N(D.value),1)):V("",!0)]),d("div",{class:"mix-columns",style:Le(b.value)},[R[3]||(R[3]=d("span",{class:"mix-column-label mix-column-label--label"},"CAT",-1)),(y(!0),k(le,null,we(C.value,ae=>(y(),k("span",{key:`col-${ae.offset}`,class:"mix-column-label"},N(ae.label),1))),128)),d("span",hk,N(T.value),1)],4),d("ul",mk,[(y(!0),k(le,null,we(x.value,ae=>(y(),k("li",{key:ae.id,class:"mix-row"},[d("span",vk,N(ae.label)+":",1),d("div",{class:"mix-cells",style:Le(b.value)},[(y(!0),k(le,null,we(ae.cells,(ve,H)=>(y(),k("div",{key:`${ae.id}-cell-${H}`,class:Ee(["mix-cell",[`mix-cell--trend-${ve.trend}`,{"mix-cell--current":ve.isCurrent}]]),title:`${ae.label}  ${ve.label}  ${P(ve.share)}`},[d("span",yk,N(P(ve.share)),1)],10,bk))),128))],4)]))),128))])])):V("",!0),m.value.length?(y(),k("ul",wk,[(y(!0),k(le,null,we(m.value,ae=>(y(),k("li",{key:ae}," "+N(ae),1))),128))])):V("",!0),o.value?(y(),k("div",kk,"  "+N(o.value),1)):V("",!0)],4))}}),[["__scopeId","data-v-cdc30eb8"]])},Symbol.toStringTag,{value:"Module"}));function xk(e){var l;const t=e.basis||"category";if(t==="off")return 0;const a={},o=(l=e.targets)!=null&&l.length?e.targets.reduce((i,c)=>i+(c.targetHours??0),0):0;t!=="calendar"&&o>0&&e.targets.forEach(i=>{const c=(i.targetHours??0)/o;a[i.id]=c});const r=new Set;if(Object.keys(e.shares||{}).forEach(i=>r.add(i)),Object.keys(a).forEach(i=>r.add(i)),r.size===0)return 0;let n=0;r.forEach(i=>{var w;const c=Number(((w=e.shares)==null?void 0:w[i])??0),u=t==="calendar"?1/r.size:a[i]??0,p=Math.abs(c-u);p>n&&(n=p)});const s=1-n;return Math.max(0,Math.min(1,Number(s.toFixed(2))))}function Ck(e){var s,l;const t=Array.isArray(e.history)?e.history:[],a=Math.max(1,Math.min(e.lookback||4,52)),o=((s=e.targetsConfig)==null?void 0:s.categories)||[],r=t.slice(0,a).map((i,c)=>{const u=Number((i==null?void 0:i.offset)??(i==null?void 0:i.step)),p=Number.isFinite(u)&&u>0?Math.round(u):c+1;return{entry:i,offset:p}});r.sort((i,c)=>c.offset-i.offset);const n=r.map(({entry:i,offset:c})=>{const u={};Array.isArray(i.categories)&&i.categories.forEach(m=>{u[String(m.id)]=Number(m.share??0)});const p=Object.values(u),w=p.length?Math.max(...p):0,v=p.reduce((m,D)=>m+D,0);(w>1||v>1.5)&&Object.keys(u).forEach(m=>{u[m]=u[m]/100});const g=Object.values(u).reduce((m,D)=>m+D,0);return g>1.0001&&g>0&&Object.keys(u).forEach(m=>{u[m]=u[m]/g}),{index:xk({shares:u,targets:o,basis:e.basis}),label:i.label||"",offset:c}});if(typeof e.currentIndex=="number")if(!n.some(c=>c.offset===0)||Math.abs((((l=n[n.length-1])==null?void 0:l.index)??0)-e.currentIndex)>1e-4)n.push({index:e.currentIndex,label:"Current",offset:0});else{const c=n.findIndex(u=>u.offset===0);c>=0&&(n[c].index=e.currentIndex)}return n.slice(0,a)}const Sk={key:0,class:"title-row"},$k={class:"title"},Tk={class:"index-value"},Mk={key:0,class:"trend"},Dk=["title"],Ak={class:"trend-line-row"},Ek={class:"trend-value"},Lk={class:"trend-range"},Ok={class:"trend-offset"},Bk={key:1,class:"messages"},Nk={key:2,class:"config"},Ik={key:3,class:"empty"},Pk=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"BalanceIndexCard",props:{overview:{},rangeLabel:{},showBadge:{type:Boolean},showTrend:{type:Boolean},showMessages:{type:Boolean},showConfig:{type:Boolean},messageLimit:{},lookbackWeeks:{},loopbackCount:{},indexBasis:{},showCurrent:{type:Boolean},labelMode:{},reverseTrend:{type:Boolean},from:{},to:{},rangeMode:{},thresholds:{},title:{},cardBg:{},showHeader:{type:Boolean},targetsCategories:{},trendColor:{}},setup(e){const t=e,a=B(()=>t.title||"Balance Index"),o=B(()=>t.showHeader!==!1),r=B(()=>{var Y,R,ae,ve;const j=[...Array.isArray((R=(Y=t.overview)==null?void 0:Y.trend)==null?void 0:R.history)?t.overview.trend.history:Array.isArray((ae=t.overview)==null?void 0:ae.trendHistory)?t.overview.trendHistory:[]],K=Math.max(1,Number.isFinite(t.loopbackCount)&&t.loopbackCount?Number(t.loopbackCount):Number.isFinite(t.lookbackWeeks)&&t.lookbackWeeks?Number(t.lookbackWeeks):5),J=t.targetsCategories||[];return Ck({history:j,targetsConfig:{categories:J},basis:t.indexBasis,lookback:K,currentIndex:typeof((ve=t.overview)==null?void 0:ve.index)=="number"?t.overview.index:void 0}).slice()}),n=B(()=>{let O=r.value.slice();return t.showCurrent===!1&&(O=O.filter(j=>((j==null?void 0:j.offset)??0)!==0)),t.reverseTrend?O.slice().reverse():O}),s=B(()=>n.value.length>0),l=B(()=>{var O;return((O=t.overview)==null?void 0:O.warnings)||[]}),i=B(()=>{const O=l.value,j=Number.isFinite(t.messageLimit)?Number(t.messageLimit):1/0;return!Number.isFinite(j)||j<=0?O:O.slice(0,j)}),c=B(()=>({background:t.cardBg||void 0})),u=B(()=>{var K,J,pe,Y,R;const O=Ua(),j={noticeAbove:((K=t.thresholds)==null?void 0:K.noticeAbove)??O.thresholds.noticeAbove,noticeBelow:((J=t.thresholds)==null?void 0:J.noticeBelow)??O.thresholds.noticeBelow,warnAbove:((pe=t.thresholds)==null?void 0:pe.warnAbove)??O.thresholds.warnAbove,warnBelow:((Y=t.thresholds)==null?void 0:Y.warnBelow)??O.thresholds.warnBelow,warnIndex:((R=t.thresholds)==null?void 0:R.warnIndex)??O.thresholds.warnIndex};return{basis:t.indexBasis||O.index.basis,...j}}),p=B(()=>{const O=t.showTrend===!1||!s.value,j=t.showMessages===!1||i.value.length===0,K=t.showConfig===!1;return O&&j&&K}),w=O=>Number.isFinite(O)?O.toFixed(2):"",v=B(()=>t.trendColor||"#2563EB"),g=B(()=>{const O=(t.labelMode||"period").toString().toLowerCase();return O==="date"||O==="offset"?O:"period"}),f=B(()=>({gridTemplateColumns:`repeat(auto-fit, minmax(${g.value==="date"?108:88}px, 1fr))`}));function m(O,j){const K=O.replace("#",""),J=parseInt(K.substring(0,2),16),pe=parseInt(K.substring(2,4),16),Y=parseInt(K.substring(4,6),16),R=ae=>Math.max(0,Math.min(255,Math.round(ae*(1-j))));return`rgb(${R(J)}, ${R(pe)}, ${R(Y)})`}const D=O=>{const j=v.value,K=n.value[O],J=Number((K==null?void 0:K.index)??0),pe=Math.min(1,Math.max(0,1-J)),Y=m(j,pe*.6);return{background:Y,boxShadow:O===0?`0 0 0 2px color-mix(in oklab, ${Y}, #ffffff 60%)`:void 0}},T=O=>{if(g.value!=="date")return"";const j=n.value[O],K=((j==null?void 0:j.offset)??0)===0;return(j==null?void 0:j.label)||K&&t.rangeLabel||""},M=O=>!!T(O),_=O=>{var K;if(g.value!=="offset")return"";const j=((K=n.value[O])==null?void 0:K.offset)??O;return j===0?"Current":`-${j}`},$=O=>{var J;if(g.value!=="date")return"";const j=T(O);return j||((((J=n.value[O])==null?void 0:J.offset)??O)===0&&t.rangeLabel?t.rangeLabel:"")};function I(O){const j=new Date(Date.UTC(O.getFullYear(),O.getMonth(),O.getDate())),K=j.getUTCDay()||7;j.setUTCDate(j.getUTCDate()+4-K);const J=new Date(Date.UTC(j.getUTCFullYear(),0,1));return Math.ceil(((j.getTime()-J.getTime())/864e5+1)/7)}const C=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"2-digit"});function S(O,j){const K=new Date(O);return K.setDate(K.getDate()+j),K}function b(O,j){const K=new Date(O);return K.setMonth(K.getMonth()+j),K}function h(O){return new Date(O.getFullYear(),O.getMonth()+1,0)}function x(O){return O?/^-\d+\s*wk$/i.test(O.trim()):!0}function E(O,j){if(!O||!j)return"";const K=C.format(O),J=C.format(j);return K===J?K:`${K}${J}`}function P(O){var ae,ve;const j=((ae=n.value[O])==null?void 0:ae.offset)??O;if(!t.from||!t.to){const H=(ve=n.value[O])==null?void 0:ve.label;return x(H)?"":H||""}const K=(t.rangeMode||"").toLowerCase(),J=new Date(t.from),pe=new Date(t.to);if(Number.isNaN(J.getTime())||Number.isNaN(pe.getTime()))return"";if(K==="month"){const H=b(J,-j),re=h(H);return E(H,re)}const Y=S(J,-7*j),R=S(pe,-7*j);return E(Y,R)}function q(O){var ae;const j=((ae=n.value[O])==null?void 0:ae.offset)??O,K=(t.rangeMode||"").toLowerCase();if(!t.from)return j===0?"Current":`- ${j} wk`;const J=K==="month"?b(new Date(t.from),-j):S(new Date(t.from),-7*j);if(Number.isNaN(J.getTime()))return j===0?"Current":`- ${j} wk`;if(K==="month"){J.getMonth()+1;const ve=new Date(J),H=new Date(t.from).getMonth()+1;return`MONTH ${j===0?H:ve.getMonth()+1}`}const pe=I(J),Y=I(new Date(t.from));return`WEEK ${j===0?Y:pe}`}return(O,j)=>(y(),k("div",{class:"balance-card",style:Le(c.value)},[d("div",{class:Ee(["header",{compact:p.value}])},[o.value?(y(),k("div",Sk,[d("span",$k,N(a.value),1)])):V("",!0),O.overview?(y(),k("div",{key:1,class:Ee(["index",{centered:p.value}])},[d("div",Tk,N(w(O.overview.index)),1),j[0]||(j[0]=d("div",{class:"index-label"},"Balance index",-1))],2)):V("",!0)],2),O.showTrend&&s.value?(y(),k("div",Mk,[d("div",{class:"trend-line",style:Le(f.value)},[(y(!0),k(le,null,we(n.value,(K,J)=>(y(),k("div",{key:J,class:Ee(["trend-block",{current:J===n.value.length-1,"no-range":!M(J)}]),title:K.label||"",style:Le(D(J))},[d("div",Ak,[d("span",Ek,N(w(K.index)),1),d("span",Lk,N(g.value==="date"?P(J)||$(J):""),1),d("span",Ok,[g.value==="period"?(y(),k(le,{key:0},[De(N(q(J)),1)],64)):g.value==="offset"?(y(),k(le,{key:1},[De(N(_(J)),1)],64)):V("",!0)])])],14,Dk))),128))],4)])):V("",!0),O.showMessages&&i.value.length?(y(),k("div",Bk,[j[1]||(j[1]=d("div",{class:"section-title"},"Messages",-1)),d("ul",null,[(y(!0),k(le,null,we(i.value,(K,J)=>(y(),k("li",{key:J},N(K),1))),128))])])):V("",!0),O.showConfig?(y(),k("div",Nk,[d("div",null,"Basis: "+N(u.value.basis),1),d("div",null,"Notice : +"+N(u.value.noticeAbove??"")+" / -"+N(u.value.noticeBelow??""),1),d("div",null,"Warn : +"+N(u.value.warnAbove??"")+" / -"+N(u.value.warnBelow??""),1),d("div",null,"Warn index: "+N(u.value.warnIndex??""),1)])):V("",!0),O.overview?V("",!0):(y(),k("div",Ik,"No balance data."))],4))}}),[["__scopeId","data-v-96453698"]])},Symbol.toStringTag,{value:"Module"})),Fk={key:0,class:"mix-header"},Hk={class:"mix-title"},Wk={class:"mix-subtitle"},zk={key:0,class:"mix-badge"},Rk={class:"mix-column-label mix-column-label--current"},jk={key:2,class:"mix-list"},Uk={class:"mix-label"},Vk=["title"],Kk={class:"mix-cell__value"},qk={key:3,class:"hint"},Gk=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"CategoryMixTrendCard",props:{overview:{},rangeMode:{},lookbackWeeks:{},showBadge:{type:Boolean},showHeader:{type:Boolean},colorMode:{},density:{},labelMode:{},squareCells:{type:Boolean},rangeLabel:{},from:{},to:{},title:{},cardBg:{},toneLowColor:{},toneHighColor:{},shareLowColor:{},shareHighColor:{}},setup(e){const t=e,a=B(()=>t.showHeader!==!1),o=B(()=>t.density==="dense"?"dense":"normal"),r=B(()=>{const F=(t.labelMode||"period").toString().toLowerCase();return F==="offset"||F==="label"||F==="compact"||F==="date"?F:"period"}),n=B(()=>t.squareCells===!0),s=B(()=>{const F=t.colorMode;return F==="trend"||F==="share"||F==="hybrid"?F:"hybrid"}),l=B(()=>{var F,z;return t.showBadge===!1?"":((z=(F=t.overview)==null?void 0:F.trend)==null?void 0:z.badge)??""}),i=B(()=>t.rangeMode==="month"?"MO":"WE"),c=B(()=>t.rangeMode==="month"?"M":"W"),u=B(()=>Y()),p=B(()=>Math.max(1,Math.min(4,t.lookbackWeeks||1))),w=B(()=>t.title||"Category mix trend"),v=B(()=>({background:t.cardBg||void 0})),g=B(()=>{var z,U,ne;const F=((U=(z=t.overview)==null?void 0:z.trend)==null?void 0:U.history)??((ne=t.overview)==null?void 0:ne.trendHistory)??[];return Array.isArray(F)?F.map(ye=>({offset:Number((ye==null?void 0:ye.offset)??(ye==null?void 0:ye.step)??0)||0,label:String((ye==null?void 0:ye.label)??""),categories:Array.isArray(ye==null?void 0:ye.categories)?ye.categories.map(L=>({id:String((L==null?void 0:L.id)??""),label:String((L==null?void 0:L.label)??""),share:Number((L==null?void 0:L.share)??0)||0})):[]})).filter(ye=>ye.offset>0):[]}),f=F=>`-${F} ${i.value}`,m=(F,z)=>r.value==="label"&&z?z:r.value==="date"?J(F,z)||f(F):r.value==="offset"?`-${F}`:r.value==="compact"?`${c.value}-${F}`:pe(F),D=B(()=>{if(!t.overview)return[];const F=p.value,z=new Map;return g.value.forEach(U=>{const ne=Math.max(1,Math.min(12,Math.round(U.offset)));if(!ne||ne>F)return;const ye={};U.categories.forEach(L=>{L.id&&(ye[L.id]=Number.isFinite(L.share)?L.share:0)}),z.set(ne,{offset:ne,label:m(ne,U.label),shares:ye})}),Array.from(z.values()).sort((U,ne)=>ne.offset-U.offset)}),T=B(()=>D.value.length+1),M=B(()=>({gridTemplateColumns:`minmax(0, var(--mix-label-width, 52px)) repeat(${Math.max(T.value,1)}, minmax(0, 1fr))`})),_=B(()=>({gridTemplateColumns:`repeat(${Math.max(T.value,1)}, minmax(0, 1fr))`})),$=B(()=>{const F=R(t.toneLowColor)||"#e11d48",z=R(t.toneHighColor)||"#10b981",U=ae(F,z,.5);return{down:re(F),flat:re(U),up:re(z)}}),I=B(()=>{const F=R(t.shareLowColor)||"#e2e8f0",z=R(t.shareHighColor)||"#60a5fa";return{low:F,high:z}}),C=F=>{const z=be(F,0,100)/100;return ae(I.value.low,I.value.high,z)},S=F=>F>1?"up":F<-1?"down":"flat",b=B(()=>t.overview?(t.overview.categories??[]).map(z=>{const U=D.value.map(W=>({label:W.label,share:W.shares[z.id]??0,isCurrent:!1})),ne=typeof z.share=="number"?z.share:0,ye=[...U,{label:u.value,share:ne,isCurrent:!0}],L=ye.map((W,G)=>{const te=G===0?W.share:ye[G-1].share,ee=W.share-te,oe=G===0?"flat":S(ee),fe=s.value,de=$.value[oe],ue=C(W.share),se=re(ue),_e=fe==="trend"?de.background:ue,he=fe==="trend"?de.color:se.color;return{label:W.label,share:W.share,isCurrent:!!W.isCurrent,trend:oe,style:{"--mix-bg":_e,"--mix-fg":he,"--mix-accent":de.background}}});return{id:z.id,label:z.label,cells:L}}):[]),h=B(()=>{var z;const F=p.value;if(F>1){const U=t.rangeMode==="month"?"months":"weeks";return`History  last ${F} ${U}`}return F===1&&D.value.length?((z=D.value[D.value.length-1])==null?void 0:z.label)||f(1):f(F||1)}),x=F=>`${Math.max(0,Math.round(F))}%`,E=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"2-digit"});function P(F,z){const U=new Date(F);return U.setDate(U.getDate()+z),U}function q(F,z){const U=new Date(F);return U.setMonth(U.getMonth()+z),U}function O(F){return new Date(F.getFullYear(),F.getMonth()+1,0)}function j(F){const z=new Date(Date.UTC(F.getFullYear(),F.getMonth(),F.getDate())),U=z.getUTCDay()||7;z.setUTCDate(z.getUTCDate()+4-U);const ne=new Date(Date.UTC(z.getUTCFullYear(),0,1));return Math.ceil(((z.getTime()-ne.getTime())/864e5+1)/7)}function K(F,z){if(!F||!z)return"";const U=E.format(F),ne=E.format(z);return U===ne?U:`${U}${ne}`}function J(F,z){if(!t.from||!t.to)return z||"";const U=(t.rangeMode||"").toLowerCase(),ne=new Date(t.from),ye=new Date(t.to);if(Number.isNaN(ne.getTime())||Number.isNaN(ye.getTime()))return z||"";if(U==="month"){const G=q(ne,-F),te=O(G);return K(G,te)}const L=P(ne,-7*F),W=P(ye,-7*F);return K(L,W)}function pe(F){const z=(t.rangeMode||"").toLowerCase();if(!t.from)return F===0?"Current":z==="month"?`-${F} mo`:`-${F} wk`;const U=z==="month"?q(new Date(t.from),-F):P(new Date(t.from),-7*F);if(Number.isNaN(U.getTime()))return F===0?"Current":z==="month"?`-${F} mo`:`-${F} wk`;if(z==="month"){const L=new Date(t.from).getMonth()+1;return`MONTH ${F===0?L:U.getMonth()+1}`}const ne=j(new Date(t.from));return`WEEK ${F===0?ne:j(U)}`}function Y(){return r.value==="offset"?"Current":r.value==="compact"?"CUR":r.value==="label"?t.rangeLabel||(t.rangeMode==="month"?"This month":"This week"):r.value==="date"?J(0,t.rangeLabel||"")||(t.rangeMode==="month"?"This month":"This week"):pe(0)}function R(F){if(!F||typeof F!="string")return null;const z=F.trim();return/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(z)?z:null}function ae(F,z,U=.5){const ne=ve(F),ye=ve(z);if(!ne||!ye)return F;const L=be(Math.round(ne.r+(ye.r-ne.r)*U),0,255),W=be(Math.round(ne.g+(ye.g-ne.g)*U),0,255),G=be(Math.round(ne.b+(ye.b-ne.b)*U),0,255);return`#${[L,W,G].map(te=>te.toString(16).padStart(2,"0")).join("")}`}function ve(F){const z=F.replace("#","");if(z.length===3){const[U,ne,ye]=z.split("").map(L=>parseInt(L.repeat(2),16));return{r:U,g:ne,b:ye}}if(z.length===6){const U=parseInt(z.slice(0,2),16),ne=parseInt(z.slice(2,4),16),ye=parseInt(z.slice(4,6),16);return{r:U,g:ne,b:ye}}return null}function H(F){const z=ve(F);return z?(.2126*z.r+.7152*z.g+.0722*z.b)/255:0}function re(F){const z=H(F)>.6?"#0f172a":"#fff";return{background:F,color:z}}function be(F,z,U){return Math.min(U,Math.max(z,F))}return(F,z)=>(y(),k("div",{class:Ee(["card mix-card",{"mix-card--no-header":!a.value,"mix-card--dense":o.value==="dense","mix-card--square":n.value}]),style:Le(v.value)},[a.value?(y(),k("div",Fk,[d("div",null,[d("div",Hk,N(w.value),1),d("div",Wk,N(h.value),1)]),l.value?(y(),k("span",zk,N(l.value),1)):V("",!0)])):V("",!0),D.value.length||b.value.length?(y(),k("div",{key:1,class:"mix-columns",style:Le(M.value)},[z[0]||(z[0]=d("span",{class:"mix-column-label mix-column-label--label"},"CAT",-1)),(y(!0),k(le,null,we(D.value,U=>(y(),k("span",{key:`col-${U.offset}`,class:"mix-column-label"},N(U.label),1))),128)),d("span",Rk,N(u.value),1)],4)):V("",!0),b.value.length?(y(),k("ul",jk,[(y(!0),k(le,null,we(b.value,U=>(y(),k("li",{key:U.id,class:"mix-row"},[d("span",Uk,N(U.label)+":",1),d("div",{class:"mix-cells",style:Le(_.value)},[(y(!0),k(le,null,we(U.cells,(ne,ye)=>(y(),k("div",{key:`${U.id}-cell-${ye}`,class:Ee(["mix-cell",[`mix-cell--trend-${ne.trend}`,`mix-cell--mode-${s.value}`,{"mix-cell--current":ne.isCurrent}]]),style:Le(ne.style),title:`${U.label}  ${ne.label}  ${x(ne.share)}`},[d("span",Kk,N(x(ne.share)),1)],14,Vk))),128))],4)]))),128))])):(y(),k("div",qk,"No category mix history."))],6))}}),[["__scopeId","data-v-9b471bde"]])},Symbol.toStringTag,{value:"Module"}));function $r(e){if(!e)return null;const t=window.devicePixelRatio||1,a=e.getBoundingClientRect();if(a.width<2||a.height<2)return null;const o=Math.floor(a.width*t),r=Math.floor(a.height*t);e.width!==o&&(e.width=o),e.height!==r&&(e.height=r);const n=e.getContext("2d");return n?(n.setTransform(t,0,0,t,0,0),n):null}function yc(e){const t=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(e||"");return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Jk(e){const a=Math.pow((c=>c<0?0:c>1?1:c)(e),.6),o=yc("#e0f2fe"),r=yc("#7c3aed");if(!o||!r)return"#7c3aed";const n=(c,u,p)=>Math.round(c+(u-c)*p),s=n(o.r,r.r,a),l=n(o.g,r.g,a),i=n(o.b,r.b,a);return`rgb(${s}, ${l}, ${i})`}const wc=Me({__name:"SimpleBars",props:{data:{},showLabels:{type:Boolean}},setup(e){const t=e,a=Q(null);function o(n){const s=Math.max(0,Number(n)||0);return(Math.round(s*10)/10).toFixed(1)}function r(){const n=a.value;if(!n||!t.data)return;const s=$r(n);if(!s)return;const l=n.clientWidth,i=n.clientHeight,c=28,u=c*1.4,p=i-c,w=l-c,v=getComputedStyle(document.documentElement).getPropertyValue("--line").trim()||"#e5e7eb",g=getComputedStyle(document.documentElement).getPropertyValue("--fg").trim()||"#0f172a";s.clearRect(0,0,l,i),s.strokeStyle=v,s.lineWidth=1,s.beginPath(),s.moveTo(u,p),s.lineTo(w,p),s.moveTo(u,p),s.lineTo(u,c),s.stroke();const f=(t.data.labels||[]).map(I=>String(I??"")),m=(t.data.data||[]).map(I=>Math.max(0,Number(I)||0));if(!f.length||!m.length)return;const D=Math.max(1,...m),T=f.length,M=8,_=Math.max(6,(w-u-M*(T+1))/T),$=(p-c)/D;s.fillStyle="#93c5fd",f.forEach((I,C)=>{const S=m[C]??0,b=Math.max(0,S*$),h=u+M+C*(_+M),x=p-b;if(s.fillRect(h,x,_,b),s.fillStyle=g,s.font="12px ui-sans-serif,system-ui",_>26){const E=s.measureText(I).width;s.fillText(I,h+_/2-E/2,p+14)}if(t.showLabels!==!1&&b>14&&_>22&&S>.01){const E=`${o(S)}h`,P=s.measureText(E).width;s.fillText(E,h+_/2-P/2,x+b/2+4)}})}return At(()=>{r(),window.addEventListener("resize",r)}),Be(()=>t.data,()=>r(),{deep:!0}),Be(()=>t.showLabels,()=>r()),(n,s)=>(y(),k("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),Yk={key:0,class:"chart-widget__header"},Zk={class:"chart-widget__title"},Xk={key:0,class:"chart-widget__subtitle"},Qk={key:2,class:"chart-widget__empty"},e_=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"ChartDowWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showLabels:{type:Boolean},chartData:{}},setup(e){const t=e,a=B(()=>t.showHeader!==!1),o=B(()=>t.title||"Day of week"),r=B(()=>({background:t.cardBg||void 0}));return(n,s)=>(y(),k("div",{class:"card chart-widget",style:Le(r.value)},[a.value?(y(),k("div",Yk,[d("div",Zk,N(o.value),1),n.subtitle?(y(),k("div",Xk,N(n.subtitle),1)):V("",!0)])):V("",!0),n.chartData?(y(),Re(wc,{key:1,data:n.chartData,"show-labels":n.showLabels},null,8,["data","show-labels"])):(y(),k("div",Qk,"No data"))],4))}}),[["__scopeId","data-v-debbf435"]])},Symbol.toStringTag,{value:"Module"})),t_=Me({__name:"HeatmapCanvas",props:{hod:{}},setup(e){const t=e,a=Q(null);let o=null;function r(){var $;const n=a.value,s=t.hod;if(!n)return;if(!s){console.info("[opsdash] heatmap: no data provided");return}const l=$r(n);if(!l)return;const i=n.clientWidth,c=n.clientHeight,u=s.dows||[],p=s.hours||[],w=s.matrix||[];l.clearRect(0,0,i,c);const v=36,g=v,f=v,m=i-v,D=c-v,T=(m-g)/Math.max(1,p.length),M=(D-f)/Math.max(1,u.length),_=Math.max(0,...w.flat())||1;u.length&&p.length&&console.info("[opsdash] heatmap draw",{rows:u.length,cols:p.length,vmax:_});for(let I=0;I<u.length;I++)for(let C=0;C<p.length;C++){const b=((($=w[I])==null?void 0:$[C])||0)/_,h=g+C*T,x=f+I*M;l.fillStyle=Jk(b),l.fillRect(h,x,T-1,M-1)}l.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--fg").trim()||"#0f172a",l.font="12px ui-sans-serif,system-ui",u.forEach((I,C)=>l.fillText(I,8,f+C*M+12)),p.forEach((I,C)=>{C%2===0&&l.fillText(String(I),g+C*T+2,f-6)})}return At(async()=>{await Qt(),r();try{o=new ResizeObserver(()=>r()),a.value&&o.observe(a.value)}catch{}window.addEventListener("resize",r)}),Nt(()=>{try{window.removeEventListener("resize",r)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}o=null}),Be(()=>t.hod,()=>r(),{deep:!0}),(n,s)=>(y(),k("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),a_={key:0,class:"chart-widget__header"},o_={class:"chart-widget__title"},r_={key:0,class:"chart-widget__subtitle"},n_={key:2,class:"chart-widget__empty"},s_={key:3,class:"chart-widget__hint"},l_=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"ChartHodWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showHint:{type:Boolean},hodData:{}},setup(e){const t=e,a=B(()=>t.showHeader!==!1),o=B(()=>t.title||"Hours of day"),r=B(()=>({background:t.cardBg||void 0}));return(n,s)=>(y(),k("div",{class:"card chart-widget",style:Le(r.value)},[a.value?(y(),k("div",a_,[d("div",o_,N(o.value),1),n.subtitle?(y(),k("div",r_,N(n.subtitle),1)):V("",!0)])):V("",!0),n.hodData?(y(),Re(t_,{key:1,hod:n.hodData},null,8,["hod"])):(y(),k("div",n_,"No data")),n.showHint&&n.hodData?(y(),k("div",s_,"247 Heatmap: hours by weekday and hour.")):V("",!0)],4))}}),[["__scopeId","data-v-1c648f65"]])},Symbol.toStringTag,{value:"Module"})),i_={key:0,class:"chart-widget__header"},c_={class:"chart-widget__title"},d_={key:0,class:"chart-widget__subtitle"},u_={key:2,class:"chart-widget__empty"},f_=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"ChartPerDayWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showLabels:{type:Boolean},chartData:{}},setup(e){const t=e,a=B(()=>t.showHeader!==!1),o=B(()=>t.title||"Per-day totals"),r=B(()=>({background:t.cardBg||void 0}));return(n,s)=>(y(),k("div",{class:"card chart-widget",style:Le(r.value)},[a.value?(y(),k("div",i_,[d("div",c_,N(o.value),1),n.subtitle?(y(),k("div",d_,N(n.subtitle),1)):V("",!0)])):V("",!0),n.chartData?(y(),Re(wc,{key:1,data:n.chartData,"show-labels":n.showLabels},null,8,["data","show-labels"])):(y(),k("div",u_,"No data"))],4))}}),[["__scopeId","data-v-af12c79b"]])},Symbol.toStringTag,{value:"Module"})),g_=Me({__name:"PieChart",props:{data:{},colorsById:{},colorsByName:{},showLabels:{type:Boolean}},setup(e){const t=e,a=Q(null);function o(){const r=t.data,n=a.value;if(!n||!r)return;const s=$r(n);if(!s)return;const l=n.clientWidth,i=n.clientHeight,c=l/2,u=i/2,p=Math.min(l,i)*.35,w=r.data||[],v=r.labels||[],g=r.ids||[],f=r.colors||[],m=[];for(let S=0;S<w.length;S++)(Number(w[S])||0)>0&&m.push(S);if(s.clearRect(0,0,l,i),m.length===0)return;const D=m.map(S=>Number(w[S])||0),T=m.map(S=>String(v[S]||"")),M=m.map(S=>String(g[S]||"")),_=m.map(S=>f[S]),$=D.reduce((S,b)=>S+Math.max(0,b),0)||1;let I=-Math.PI/2;s.lineWidth=1,s.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--line").trim()||"#e5e7eb";const C=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"];D.forEach((S,b)=>{var J,pe;const h=Math.max(0,S)/$,x=I+h*2*Math.PI,E=String((T==null?void 0:T[b])||""),P=String((M==null?void 0:M[b])||""),q=_[b],O=(J=t.colorsById)==null?void 0:J[P],j=(pe=t.colorsByName)==null?void 0:pe[E];let K=O||j||q||C[b%C.length];if(s.beginPath(),s.moveTo(c,u),s.arc(c,u,p,I,x),s.closePath(),s.fillStyle=K,s.fill(),s.stroke(),t.showLabels!==!1){const Y=(I+x)/2,R=c+Math.cos(Y)*(p+12),ae=u+Math.sin(Y)*(p+12);s.save(),s.font="12px ui-sans-serif,system-ui",s.fillStyle="#ffffff",s.strokeStyle="rgba(0,0,0,0.55)",s.lineWidth=3,s.textAlign="center",s.textBaseline="middle";const ve=Math.max(0,Number(S)||0)/$*100,H=`${T!=null&&T[b]?T[b]+" ":""}${Number(S).toFixed(2)}h  ${ve.toFixed(1)}%`;s.strokeText(H,R,ae),s.fillText(H,R,ae),s.restore()}I=x})}return At(()=>{o(),window.addEventListener("resize",o)}),Be(()=>t.data,()=>o(),{deep:!0}),Be(()=>t.colorsById,()=>o(),{deep:!0}),Be(()=>t.showLabels,()=>o()),(r,n)=>(y(),k("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),p_={key:0,class:"chart-widget__header"},h_={class:"chart-widget__title"},m_={key:0,class:"chart-widget__subtitle"},v_={key:2,class:"chart-widget__empty"},b_={key:3,class:"chart-widget__legend"},y_={class:"val"},w_=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"ChartPieWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},compact:{type:Boolean},showLegend:{type:Boolean},showLabels:{type:Boolean},chartData:{},colorsById:{},colorsByName:{}},setup(e){const t=e,a=B(()=>t.showHeader!==!1),o=B(()=>t.title||"Pie chart"),r=B(()=>({background:t.cardBg||void 0})),n=B(()=>t.colorsById||{}),s=B(()=>t.colorsByName||{}),l=B(()=>{const i=t.chartData;if(!i||!Array.isArray(i.data))return[];const c=i.data.reduce((u,p)=>u+Math.max(0,Number(p)||0),0)||1;return i.data.map((u,p)=>{var D,T,M;const w=Math.max(0,Number(u)||0),v=String(((D=i.labels)==null?void 0:D[p])??""),g=String(((T=i.ids)==null?void 0:T[p])??v??p),f=((M=i.colors)==null?void 0:M[p])||n.value[g]||s.value[v]||"#60a5fa",m=w/c*100;return{id:g,label:v,color:f,value:`${w.toFixed(1)}h  ${m.toFixed(0)}%`}})});return(i,c)=>(y(),k("div",{class:"card chart-widget",style:Le(r.value)},[a.value?(y(),k("div",p_,[d("div",h_,N(o.value),1),i.subtitle?(y(),k("div",m_,N(i.subtitle),1)):V("",!0)])):V("",!0),i.chartData?(y(),Re(g_,{key:1,data:i.chartData,"colors-by-id":n.value,"colors-by-name":s.value,"show-labels":i.showLabels},null,8,["data","colors-by-id","colors-by-name","show-labels"])):(y(),k("div",v_,"No data")),i.showLegend&&l.value.length?(y(),k("ul",b_,[(y(!0),k(le,null,we(l.value,u=>(y(),k("li",{key:u.id},[d("span",{class:"dot",style:Le({background:u.color})},null,4),d("span",null,N(u.label),1),d("span",y_,N(u.value),1)]))),128))])):V("",!0)],4))}}),[["__scopeId","data-v-b9796562"]])},Symbol.toStringTag,{value:"Module"})),k_=Me({__name:"StackedBars",props:{stacked:{},colorsById:{},showLabels:{type:Boolean}},setup(e){const t=e,a=Q(null);function o(f,m,D,T,M){f.save(),M!=null&&M.font&&(f.font=M.font),M!=null&&M.align&&(f.textAlign=M.align),M!=null&&M.baseline&&(f.textBaseline=M.baseline),f.lineWidth=3,f.strokeStyle="rgba(0,0,0,0.55)",f.strokeText(m,D,T),f.fillStyle="#ffffff",f.fillText(m,D,T),f.restore()}function r(f){const m=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(f||"");return m?{r:parseInt(m[1],16),g:parseInt(m[2],16),b:parseInt(m[3],16)}:null}function n(f,m){const D=r(f);return D&&(.2126*D.r+.7152*D.g+.0722*D.b)/255<.55?"#ffffff":m}function s(f){const m=Math.max(0,Number(f)||0);return(Math.round(m*10)/10).toFixed(1)}function l(f,m=.5){const D=r(f);if(!D)return f;const T=Math.max(0,Math.min(1,m)),M=Math.round(D.r+(255-D.r)*T),_=Math.round(D.g+(255-D.g)*T),$=Math.round(D.b+(255-D.b)*T);return`rgb(${M},${_},${$})`}function i(f,m=.5){const D=r(f);if(!D)return f;const T=Math.max(0,Math.min(1,m)),M=Math.round(D.r*(1-T)),_=Math.round(D.g*(1-T)),$=Math.round(D.b*(1-T));return`rgb(${M},${_},${$})`}function c(f,m){const{x:D,y:T,width:M,height:_,baseColor:$,variant:I}=m,C=I==="mixed",S=Math.min(M*(C?.35:.22),6),b=Math.max(2,C?M*.45:M-S*2),h=C?D+M-b-S:D+(M-b)/2,x=l($,C?.6:.45),E=i($,C?.4:.35);f.save(),f.fillStyle=x,f.globalAlpha=C?.12:.16,f.fillRect(h,T,b,_),f.restore(),f.save(),f.strokeStyle=E,f.lineWidth=C?1.25:1.5,f.globalAlpha=C?.6:.75,f.setLineDash([4,4]),f.strokeRect(h,T,b,_),f.restore(),f.save(),f.strokeStyle=E,f.globalAlpha=C?.35:.45,f.lineWidth=1,f.beginPath(),f.moveTo(h,T),f.lineTo(h+b,T),f.stroke(),f.restore()}function u(){const f=a.value;if(!f)return;const m=$r(f);if(!m)return;const D=f.clientWidth,T=f.clientHeight,M=28,_=M*1.4,$=T-M,I=D-M,C=getComputedStyle(document.documentElement).getPropertyValue("--line").trim()||"#e5e7eb",S=getComputedStyle(document.documentElement).getPropertyValue("--fg").trim()||"#0f172a";m.clearRect(0,0,D,T),m.strokeStyle=C,m.lineWidth=1,m.beginPath(),m.moveTo(_,$),m.lineTo(I,$),m.moveTo(_,$),m.lineTo(_,M),m.stroke();const b=t.stacked;if(b&&b.labels&&b.series){let h=b.labels||[],x=b.series||[];const E=p(h,x);h=E.labels,x=E.series;const P=h.map((H,re)=>x.reduce((be,F)=>{var z;return be+Math.max(0,Number(((z=F.data)==null?void 0:z[re])||0))},0)),q=h.map((H,re)=>x.reduce((be,F)=>{var z;return be+Math.max(0,Number(((z=F.forecast)==null?void 0:z[re])||0))},0)),O=P.map((H,re)=>H+q[re]),j=Math.max(1,...O),K=h.length||1,J=8,pe=Math.max(6,(I-_-J*(K+1))/K),Y=($-M)/j;let R=0,ae=0;h.forEach((H,re)=>{const be=_+J+re*(pe+J);let F=$,z=0;x.forEach(G=>{var fe;const te=Math.max(0,Number(((fe=G.data)==null?void 0:fe[re])||0)),ee=te*Y;F-=ee;const oe=t.colorsById[G.id]||G.color||"#93c5fd";if(ee>.5&&(m.fillStyle=oe,m.fillRect(be,F,pe,ee),t.showLabels!==!1&&ee>14&&pe>22&&te>.01)){const de=s(te);m.fillStyle=n(oe,S),m.font="11px ui-sans-serif,system-ui";const ue=m.measureText(de).width;m.fillText(de,be+pe/2-ue/2,F+ee/2+4)}z+=te});let ne=F,ye=0;x.forEach(G=>{var fe;const te=Math.max(0,Number(((fe=G.forecast)==null?void 0:fe[re])||0));if(te<=0)return;const ee=te*Y;if(ne-=ee,ye+=te,ee<=.5)return;const oe=t.colorsById[G.id]||G.color||"#93c5fd";c(m,{x:be,y:ne,width:pe,height:ee,baseColor:oe,variant:z>.01?"mixed":"future"})}),R+=z,ae+=ye,m.fillStyle=S,m.font="12px ui-sans-serif,system-ui";const L=w(String(h[re]||""));if(pe>26){const G=m.measureText(L).width;m.fillText(L,be+pe/2-G/2,$+14)}const W=ye>.01?`~${s(z+ye)}h`:z>.01?`${s(z)}h`:"";t.showLabels!==!1&&W&&o(m,W,be+pe/2,Math.max(M+4,ne-2),{align:"center",baseline:"bottom",font:"11px ui-sans-serif,system-ui"})});const ve=ae>.01?`~${s(R+ae)}h expected`:`${s(R)}h total`;t.showLabels!==!1&&o(m,ve,I-4,M+4,{align:"right",baseline:"top",font:"12px ui-sans-serif,system-ui"});return}}At(()=>{u(),window.addEventListener("resize",u)}),Be(()=>t.stacked,()=>u(),{deep:!0}),Be(()=>t.colorsById,()=>u(),{deep:!0}),Be(()=>t.showLabels,()=>u());function p(f,m){if(!Array.isArray(f)||f.length!==7)return{labels:f,series:m};const D=f.map(S=>v(S));if(D.some(S=>!S))return{labels:f,series:m};const T=D.map(S=>g(S)),M=[1,2,3,4,5,6,7];if(T.join(",")===M.join(","))return{labels:f,series:m};const _={};if(T.forEach((S,b)=>{_[S]=b}),!M.every(S=>S in _))return{labels:f,series:m};const $=M.map(S=>_[S]),I=$.map(S=>f[S]),C=(m||[]).map(S=>{const b=Array.isArray(S.data)?S.data:[],h=Array.isArray(S.forecast)?S.forecast:null,x=$.map(q=>b[q]??0),E=h?$.map(q=>h[q]??0):void 0,P={...S,data:x};return E&&(P.forecast=E),P});return{labels:I,series:C}}function w(f){const m=/^(\d{4})-(\d{2})-(\d{2})$/.exec(f);if(!m)return f;const D=new Date(`${m[1]}-${m[2]}-${m[3]}T00:00:00`);return["So","Mo","Di","Mi","Do","Fr","Sa"][D.getDay()]||f}function v(f){const m=/^(\d{4})-(\d{2})-(\d{2})$/.exec(f);if(!m)return null;const D=new Date(`${m[1]}-${m[2]}-${m[3]}T00:00:00`);return isNaN(D.getTime())?null:D}function g(f){const m=f.getDay();return m===0?7:m}return(f,m)=>(y(),k("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),__={key:0,class:"chart-widget__header"},x_={class:"chart-widget__title"},C_={key:0,class:"chart-widget__subtitle"},S_={key:2,class:"chart-widget__empty"},$_={key:3,class:"chart-widget__legend"},T_=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"ChartStackedWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},compact:{type:Boolean},showLegend:{type:Boolean},showLabels:{type:Boolean},stacked:{},colorsById:{}},setup(e){const t=e,a=B(()=>t.showHeader!==!1),o=B(()=>t.title||"Stacked bars"),r=B(()=>({background:t.cardBg||void 0})),n=B(()=>t.colorsById||{}),s=B(()=>{var i;return(((i=t.stacked)==null?void 0:i.series)||[]).map(c=>{const u=String((c==null?void 0:c.id)??""),p=String((c==null?void 0:c.name)??(c==null?void 0:c.label)??u),w=(c==null?void 0:c.color)||n.value[u]||"#60a5fa";return{id:u,label:p,color:w}})});return(l,i)=>(y(),k("div",{class:"card chart-widget",style:Le(r.value)},[a.value?(y(),k("div",__,[d("div",x_,N(o.value),1),l.subtitle?(y(),k("div",C_,N(l.subtitle),1)):V("",!0)])):V("",!0),l.stacked?(y(),Re(k_,{key:1,stacked:l.stacked,"colors-by-id":n.value,"show-labels":l.showLabels},null,8,["stacked","colors-by-id","show-labels"])):(y(),k("div",S_,"No data")),l.showLegend&&s.value.length?(y(),k("ul",$_,[(y(!0),k(le,null,we(s.value,c=>(y(),k("li",{key:c.id},[d("span",{class:"dot",style:Le({background:c.color})},null,4),d("span",null,N(c.label),1)]))),128))])):V("",!0)],4))}}),[["__scopeId","data-v-93cdb211"]])},Symbol.toStringTag,{value:"Module"})),M_={key:0,class:"table-widget__header"},D_={class:"table-widget__title"},A_={key:0,class:"table-widget__subtitle"},E_={key:2,class:"table-widget__empty"},L_=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"CalendarTableWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},rows:{},targets:{},groups:{},todayHours:{}},setup(e){const t=e,a=B(()=>t.showHeader!==!1),o=B(()=>t.title||"By calendar"),r=B(()=>({background:t.cardBg||void 0})),n=s=>Number(s??0).toFixed(2);return(s,l)=>(y(),k("div",{class:"card table-widget",style:Le(r.value)},[a.value?(y(),k("div",M_,[d("div",D_,N(o.value),1),s.subtitle?(y(),k("div",A_,N(s.subtitle),1)):V("",!0)])):V("",!0),s.rows&&s.rows.length?(y(),Re(ki,{key:1,rows:s.rows,n2:n,targets:s.targets,groups:s.groups,"today-hours":s.todayHours},null,8,["rows","targets","groups","today-hours"])):(y(),k("div",E_,"No data"))],4))}}),[["__scopeId","data-v-e75cc444"]])},Symbol.toStringTag,{value:"Module"})),O_={key:0,class:"dayoff-card__header"},B_={key:0,class:"pill"},N_={key:1,class:"dayoff-heatmap"},I_=["title"],P_={class:"dayoff-tile__label"},F_={class:"dayoff-tile__value"},H_={class:"dayoff-tile__meta"},W_={key:2,class:"hint"},z_=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"DayOffTrendCard",props:{trend:{},unit:{},lookback:{},title:{},cardBg:{},toneLowColor:{},toneHighColor:{},showHeader:{type:Boolean}},setup(e){const t=e,a=B(()=>{const M=typeof t.lookback=="number"?t.lookback:null;if(M!=null)return Math.max(0,Math.min(12,Math.floor(M)));const _=(t.trend??[]).filter($=>Number(($==null?void 0:$.offset)??0)>0);return Math.max(0,Math.min(12,_.length))}),o=B(()=>{const M=Array.isArray(t.trend)?t.trend:[],_=new Map;M.forEach(h=>{const x=Number((h==null?void 0:h.offset)??0)||0;_.set(x,{offset:x,label:(h==null?void 0:h.label)??"",from:(h==null?void 0:h.from)??"",to:(h==null?void 0:h.to)??"",totalDays:Number((h==null?void 0:h.totalDays)??(h==null?void 0:h.total_days)??0)||0,daysOff:Number((h==null?void 0:h.daysOff)??(h==null?void 0:h.days_off)??0)||0,daysWorked:Number((h==null?void 0:h.daysWorked)??(h==null?void 0:h.days_worked)??0)||0})});const $=t.unit==="mo"?"mo":"wk",I=t.unit==="mo"?"This month":"This week",C=[],S=_.get(0)??{offset:0,label:I,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};C.push(S);const b=a.value;for(let h=1;h<=b;h+=1){const x=_.get(h)??{offset:h,label:`-${h} ${$}`,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};C.push(x)}return C}),r=B(()=>o.value.map(M=>{const _=Math.max(0,Number(M.totalDays)||0),$=Math.max(0,Math.min(_,Number(M.daysOff)||0)),I=_>0?$/_:0;return{...M,share:I,tone:w(I)}})),n=B(()=>{const M=a.value;if(M<=0)return"";const _=t.unit==="mo"?"month":"week";return`Last ${M} ${M===1?_:`${_}s`}`}),s=B(()=>t.title||"Days off trend"),l=B(()=>({background:t.cardBg||void 0})),i=B(()=>t.showHeader!==!1),c=B(()=>{const M=v(t.toneLowColor)||"#dc2626",_=v(t.toneHighColor)||"#16a34a",$=g(M,_,.5);return{low:D(M),mid:D($),high:D(_)}});function u(M){const _=Math.max(0,Math.min(1,M));return`${Math.round(_*100)}% off`}function p(M){const _=c.value[M];return{"--tile-bg":_.background,"--tile-fg":_.color,background:_.background,color:_.color}}function w(M){return M>=.5?"high":M>=.25?"mid":"low"}function v(M){if(!M||typeof M!="string")return null;const _=M.trim();return/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(_)?_:null}function g(M,_,$=.5){const I=f(M),C=f(_);if(!I||!C)return M;const S=T(Math.round(I.r+(C.r-I.r)*$),0,255),b=T(Math.round(I.g+(C.g-I.g)*$),0,255),h=T(Math.round(I.b+(C.b-I.b)*$),0,255);return`rgb(${S}, ${b}, ${h})`}function f(M){const _=M.replace("#","");if(_.length===3){const[$,I,C]=_.split("").map(S=>parseInt(S.repeat(2),16));return{r:$,g:I,b:C}}if(_.length===6){const $=parseInt(_.slice(0,2),16),I=parseInt(_.slice(2,4),16),C=parseInt(_.slice(4,6),16);return{r:$,g:I,b:C}}return null}function m(M){const _=f(M);return _?(.2126*_.r+.7152*_.g+.0722*_.b)/255:0}function D(M){const _=m(M)>.6?"#0f172a":"#fff";return{background:M,color:_}}function T(M,_,$){return Math.min($,Math.max(_,M))}return(M,_)=>(y(),k("div",{class:"card dayoff-card",style:Le(l.value)},[i.value?(y(),k("div",O_,[d("span",null,N(s.value),1),n.value?(y(),k("span",B_,N(n.value),1)):V("",!0)])):V("",!0),r.value.length?(y(),k("div",N_,[(y(!0),k(le,null,we(r.value,$=>(y(),k("div",{key:$.offset,class:Ee(["dayoff-tile",[`dayoff-tile--${$.tone}`,{"dayoff-tile--current":$.offset===0}]]),style:Le(p($.tone)),title:`${$.label}  ${u($.share)}`},[d("div",P_,N($.label),1),d("div",F_,N(u($.share)),1),d("div",H_,N($.daysOff)+" off  "+N($.daysWorked)+" on ",1)],14,I_))),128))])):(y(),k("div",W_,"No day-off history for this range."))],4))}}),[["__scopeId","data-v-5119adef"]])},Symbol.toStringTag,{value:"Module"})),R_={key:0,class:"deck-summary-card__header"},j_={class:"deck-summary-card__title"},U_={class:"deck-summary-card__subtitle"},V_={class:"deck-summary-card__meta"},K_={key:0},q_={key:1},G_={key:1,class:"deck-summary-card__loading"},J_={key:2,class:"deck-summary-card__error"},Y_={key:3,class:"deck-summary-card__empty"},Z_=["onClick","onKeydown"],X_={class:"deck-summary-card__row-head"},Q_={class:"bucket-label"},ex={class:"bucket-count"},tx={class:"deck-summary-card__row-body"},ax={class:"bucket-titles"},ox={key:0,class:"bucket-title bucket-title--muted"},rx=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"DeckSummaryCard",props:{buckets:{},rangeLabel:{},loading:{type:Boolean},error:{},ticker:{},showBoardBadges:{type:Boolean},activeFilter:{},onFilter:{type:Function},title:{},cardBg:{},showHeader:{type:Boolean}},setup(e){const t=e,a=Q(0),o=Q(!1);let r=null;const n=B(()=>t.buckets.some(T=>T.count>0)),s=B(()=>t.title||"Deck summary"),l=B(()=>({background:t.cardBg||void 0})),i=B(()=>t.showHeader!==!1),c=B(()=>t.activeFilter),u=B(()=>typeof t.onFilter=="function");function p(T){if(!T.titles.length)return[];const M=t.ticker.autoScroll?a.value%T.titles.length:0,_=Math.min(4,T.titles.length),$=[];for(let I=0;I<_;I+=1){const C=(M+I)%T.titles.length;$.push(T.titles[C])}return $}function w(){r&&(clearInterval(r),r=null)}function v(){if(w(),!t.ticker.autoScroll)return;const T=Math.max(3e3,Math.min(1e4,(t.ticker.intervalSeconds||5)*1e3));r=setInterval(()=>{o.value||(a.value+=1)},T)}function g(){o.value=!0}function f(){o.value=!1}function m(T){t.onFilter&&t.onFilter(T)}function D(T){const M=T||"var(--brand)";return{borderColor:M,color:M,background:`color-mix(in srgb, ${M} 18%, transparent)`}}return Be(()=>[t.ticker.autoScroll,t.ticker.intervalSeconds],()=>{v()},{immediate:!0}),Nt(()=>{w()}),(T,M)=>(y(),k("div",{class:"card deck-summary-card",style:Le(l.value)},[i.value?(y(),k("div",R_,[d("div",null,[d("div",j_,N(s.value),1),d("div",U_,"Showing "+N(T.rangeLabel.toLowerCase())+" selection",1)]),d("div",V_,[T.ticker.autoScroll?(y(),k("span",K_,"Auto-scroll  "+N(T.ticker.intervalSeconds)+"s",1)):(y(),k("span",q_,"Auto-scroll off"))])])):V("",!0),T.loading?(y(),k("div",G_,[$e(A(fr),{size:18}),M[0]||(M[0]=d("span",null,"Loading Deck cards",-1))])):T.error?(y(),k("div",J_,N(T.error),1)):n.value?(y(),k("ul",{key:4,class:"deck-summary-card__rows",onMouseenter:g,onMouseleave:f},[(y(!0),k(le,null,we(T.buckets,_=>(y(),k("li",{key:_.key,class:Ee(["deck-summary-card__row",{"deck-summary-card__row--active":_.key===c.value,"deck-summary-card__row--clickable":u.value}]),role:"button",tabindex:"0",onClick:$=>m(_.key),onKeydown:[ja(Qe($=>m(_.key),["prevent"]),["enter"]),ja(Qe($=>m(_.key),["prevent"]),["space"])]},[d("div",X_,[d("span",Q_,N(_.label),1),d("span",ex,N(_.count),1)]),d("div",tx,[T.showBoardBadges&&_.board?(y(),k("span",{key:0,class:"bucket-board",style:Le(D(_.board.color))},N(_.board.title),5)):V("",!0),d("div",ax,[_.titles.length===0?(y(),k("span",ox,"No cards")):(y(!0),k(le,{key:1},we(p(_),($,I)=>(y(),k("span",{key:`${_.key}-${I}-${$}`,class:"bucket-title"},N($),1))),128))])])],42,Z_))),128))],32)):(y(),k("div",Y_," No Deck data "))],4))}}),[["__scopeId","data-v-7d6316aa"]])},Symbol.toStringTag,{value:"Module"})),nx=Object.freeze(Object.defineProperty({__proto__:null,default:Me({__name:"DeckCardsWidget",props:{cards:{},rangeLabel:{},from:{},to:{},uid:{},deckUrl:{},lastFetchedAt:{},loading:{type:Boolean},error:{},boardIds:{},filters:{},defaultFilter:{},allowMine:{type:Boolean},mineMode:{},includeArchived:{type:Boolean},includeCompleted:{type:Boolean},autoScroll:{type:Boolean},intervalSeconds:{},showCount:{type:Boolean},showHeader:{type:Boolean},title:{},cardBg:{},customFilters:{},editable:{type:Boolean},onUpdateFilters:{type:Function}},emits:["refresh"],setup(e){const t=e,a=["all","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],o=B(()=>{const C=(t.boardIds||[]).map(S=>Number(S)).filter(S=>Number.isInteger(S));return new Set(C)}),r=B(()=>{const C=t.includeArchived!==!1,b=(t.cards||[]).filter(E=>o.value.size?E.boardId!=null&&o.value.has(Number(E.boardId)):!0).filter(E=>(C||E.status!=="archived")&&(t.includeCompleted!==!1||E.status!=="done")),h=[...t.filters&&t.filters.length?t.filters:a,...(t.customFilters||[]).map(E=>`custom_${E.id}`)],x=new Map;return h.forEach(E=>{x.set(E,$(E,b,C).length)}),x}),n=Q(null),s=B(()=>n.value?n.value:(t.filters&&t.filters.length?t.filters:a).filter(Boolean)),l=B(()=>{const C=s.value,S={all:"All cards",mine:"Mine (any status)",open_all:"Open  All",open_mine:"Open  Mine",done_all:"Done  All",done_mine:"Done  Mine",archived_all:"Archived  All",archived_mine:"Archived  Mine",due_all:"Due  All",due_mine:"Due  Mine",due_today_all:"Due today  All",due_today_mine:"Due today  Mine",created_today_all:"Created today  All",created_today_mine:"Created today  Mine",created_range_all:"Created this range  All",created_range_mine:"Created this range  Mine"},b=r.value,h=C.map(E=>({value:E,label:S[E]||E,mine:E.endsWith("_mine")||E==="mine",count:b.get(E)??0})),x=(t.customFilters||[]).filter(E=>E&&E.id&&E.label).map(E=>({value:`custom_${E.id}`,label:E.label,mine:!1,count:b.get(`custom_${E.id}`)??0}));return[...h,...x]}),i=Q(w());Be(()=>t.defaultFilter,()=>{i.value=w()});const c=B(()=>l.value.length>1),u=B(()=>t.allowMine!==!1&&!!(t.uid||"").trim()),p=B(()=>{const C=t.includeArchived!==!1||i.value.startsWith("archived"),b=(t.cards||[]).filter(h=>o.value.size?h.boardId!=null&&o.value.has(Number(h.boardId)):!0).filter(h=>(C||h.status!=="archived")&&(t.includeCompleted!==!1||h.status!=="done"));return $(i.value,b,C)});function w(){const C=l.value.map(b=>b.value),S=t.defaultFilter||C[0]||"all";return C.includes(S)?S:C[0]||"all"}function v(C){i.value=C}function g(C){var S;C.length&&(n.value=[...C],(S=t.onUpdateFilters)==null||S.call(t,C),C.includes(i.value)||(i.value=C[0]))}function f(C,S){const b=C.trim().toLowerCase();return h=>{if(!b)return!1;const x=(h.assignees||[]).some(q=>typeof q.uid=="string"&&q.uid.toLowerCase()===b),E=typeof h.createdBy=="string"&&h.createdBy.trim().toLowerCase()===b,P=typeof h.doneBy=="string"&&h.doneBy.trim().toLowerCase()===b;return S==="creator"?E||P:S==="assignee"?x||P:x||E||P}}function m(C,S,b,h){return S==="open"?C.status==="active":S==="archived"?C.status==="archived":S==="done"?h?C.status==="done"?!0:b&&C.status==="archived"&&h:!1:S==="due"?C.match==="due":!1}function D(C){if(!C.createdTs)return!1;const S=new Date,b=new Date(S.getFullYear(),S.getMonth(),S.getDate()).getTime(),h=b+24*60*60*1e3;return C.createdTs>=b&&C.createdTs<h}function T(C,S,b){if(!C.createdTs||!S||!b)return!1;const h=Date.parse(S),x=Date.parse(b);return!Number.isFinite(h)||!Number.isFinite(x)?!1:C.createdTs>=h&&C.createdTs<=x}function M(C,S,b){if(!S||!b)return!1;const h=Date.parse(S),x=Date.parse(b);if(!Number.isFinite(h)||!Number.isFinite(x))return!1;const E=C.dueTs??null;return E!=null&&E>=h&&E<=x}function _(C){const S=C.dueTs??null;if(S==null)return!1;const b=new Date,h=new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime(),x=h+24*60*60*1e3;return S>=h&&S<x}function $(C,S,b){const h=f(t.uid||"",t.mineMode||"assignee"),x=b,E=t.includeCompleted!==!1;if(C==="all")return S;if(C==="mine")return S.filter(P=>h(P));if(C.startsWith("created_today"))return S.filter(P=>(C.endsWith("_mine")?h(P):!0)&&D(P));if(C.startsWith("created_range"))return S.filter(P=>(C.endsWith("_mine")?h(P):!0)&&T(P,t.from,t.to));if(C.startsWith("due_today"))return S.filter(P=>(C.endsWith("_mine")?h(P):!0)&&_(P));if(C.startsWith("due_"))return S.filter(P=>(C.endsWith("_mine")?h(P):!0)&&M(P,t.from,t.to));if(C.startsWith("custom_")){const P=C.slice(7),q=(t.customFilters||[]).find(O=>O.id===P);return q?S.filter(O=>I(O,q,h)):[]}if(C.includes("_")){const[P,q]=C.split("_");return S.filter(O=>{const j=m(O,P,x,E),K=q==="all"?!0:h(O);return j&&K})}return S}function I(C,S,b){const h=(S.labelIds||[]).map(J=>J.trim().toLowerCase()).filter(Boolean),x=(S.labels||[]).map(J=>J.trim().toLowerCase()).filter(Boolean),E=(S.assignees||[]).map(J=>J.trim().toLowerCase()).filter(Boolean),P=h.length>0,q=x.length>0,O=E.length>0;if(!P&&!q&&!O)return!1;let j=!0;if(P||q){const J=(C.labels||[]).map(Y=>Y.id!=null?String(Y.id).trim().toLowerCase():"").filter(Boolean),pe=(C.labels||[]).map(Y=>String(Y.title||"").trim().toLowerCase()).filter(Boolean);j=(!P||h.some(Y=>J.includes(Y)))&&(!q||x.some(Y=>pe.includes(Y)))}let K=!0;if(O){const J=(C.assignees||[]).map(pe=>String(pe.uid||"").trim().toLowerCase()).filter(Boolean);K=E.some(pe=>J.includes(pe)),!K&&E.includes("me")&&(K=b(C)),!K&&E.includes("unassigned")&&(K=J.length===0)}return j&&K}return(C,S)=>(y(),Re(Ni,{cards:p.value,loading:C.loading,"range-label":C.rangeLabel,"last-fetched-at":C.lastFetchedAt,"deck-url":C.deckUrl,error:C.error,filter:i.value,"filters-enabled":c.value,"can-filter-mine":u.value,"allow-mine-override":u.value,"filter-options":l.value,"auto-scroll":t.autoScroll!==!1,"interval-seconds":t.intervalSeconds,"show-count":t.showCount!==!1,title:t.title,"card-bg":t.cardBg,"show-header":t.showHeader!==!1,editable:t.editable===!0,"orderable-values":s.value,onRefresh:S[0]||(S[0]=b=>C.$emit("refresh")),"onUpdate:filter":v,"onReorder:filters":g},null,8,["cards","loading","range-label","last-fetched-at","deck-url","error","filter","filters-enabled","can-filter-mine","allow-mine-override","filter-options","auto-scroll","interval-seconds","show-count","title","card-bg","show-header","editable","orderable-values"]))}})},Symbol.toStringTag,{value:"Module"})),sx={class:"note-header"},lx={key:0,class:"title"},ix=["disabled"],cx={class:"field"},dx={class:"field-head"},ux={class:"label"},fx=["aria-label"],gx=["value"],px=["value"],hx={class:"field"},mx={class:"label"},vx=["value","disabled"],bx=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"NoteEditorWidget",props:{previous:{},history:{},modelValue:{},prevLabel:{},currLabel:{},saving:{type:Boolean},title:{},cardBg:{},showHeader:{type:Boolean}},emits:["update:modelValue","save"],setup(e,{emit:t}){const a=e,o=t,r=B(()=>a.title||"Notes"),n=B(()=>a.showHeader!==!1),s=a.prevLabel||"Previous",l=a.currLabel||"Current",i={background:a.cardBg||void 0},c=B(()=>(a.history||[]).filter(f=>f&&f.id&&f.label)),u=Q("");Be(()=>c.value,f=>{var m;u.value=((m=f[0])==null?void 0:m.id)||""},{immediate:!0});const p=B(()=>c.value.find(f=>f.id===u.value)||null),w=B(()=>{var f;return((f=p.value)==null?void 0:f.content)||a.previous||""});function v(f){o("update:modelValue",f.target.value)}function g(){o("save")}return(f,m)=>(y(),k("div",{class:"note-card",style:i},[d("div",sx,[n.value?(y(),k("div",lx,N(r.value),1)):V("",!0),d("button",{class:"btn",type:"button",disabled:f.saving,onClick:g},"Save",8,ix)]),d("div",cx,[d("div",dx,[d("span",ux,N(A(s)),1),c.value.length?da((y(),k("select",{key:0,"onUpdate:modelValue":m[0]||(m[0]=D=>u.value=D),class:"note-select","aria-label":`Select ${A(s)}`},[(y(!0),k(le,null,we(c.value,D=>(y(),k("option",{key:D.id,value:D.id},N(D.label),9,gx))),128))],8,fx)),[[_n,u.value]]):V("",!0)]),d("textarea",{class:"note note--compact",value:w.value,readonly:""},null,8,px)]),d("label",hx,[d("span",mx,N(A(l)),1),d("textarea",{class:"note",value:f.modelValue,disabled:f.saving,onInput:v},null,40,vx)])]))}}),[["__scopeId","data-v-5e293970"]])},Symbol.toStringTag,{value:"Module"})),yx={key:0},wx={key:1,class:"body"},kx={key:2,class:"body empty"},_x=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"NoteSnippetWidget",props:{notesCurr:{},notesPrev:{},title:{},cardBg:{},showHeader:{type:Boolean}},setup(e){const t=e,a=B(()=>{const s=(t.notesCurr||"").trim();return s||(t.notesPrev||"").trim()||""}),o=B(()=>t.title||"Note"),r=B(()=>({background:t.cardBg||void 0})),n=B(()=>t.showHeader!==!1);return(s,l)=>(y(),k("div",{class:"text-card",style:Le(r.value)},[n.value?(y(),k("h3",yx,N(o.value),1)):V("",!0),a.value?(y(),k("p",wx,N(a.value),1)):(y(),k("p",kx,""))],4))}}),[["__scopeId","data-v-01eb6d28"]])},Symbol.toStringTag,{value:"Module"})),xx={key:0,class:"notes-header"},Cx={class:"notes-history"},Sx={class:"notes-history__head"},$x=["title"],Tx=["aria-label"],Mx=["value"],Dx=["value","aria-label"],Ax=["title"],Ex=["value","placeholder","aria-label"],Lx={class:"notes-actions"},Ox=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"NotesPanel",props:{previous:{},history:{},modelValue:{},prevLabel:{},currLabel:{},prevTitle:{},currTitle:{},saving:{type:Boolean},title:{},cardBg:{},showHeader:{type:Boolean}},emits:["update:modelValue","save"],setup(e){const t=e,a=B(()=>({background:t.cardBg||void 0})),o=B(()=>t.title||"Notes"),r=B(()=>t.showHeader!==!1),n=B(()=>(t.history||[]).filter(c=>c&&c.id&&c.label)),s=Q("");Be(()=>n.value,c=>{var u;s.value=((u=c[0])==null?void 0:u.id)||""},{immediate:!0});const l=B(()=>n.value.find(c=>c.id===s.value)||null),i=B(()=>{var c;return((c=l.value)==null?void 0:c.content)||t.previous||""});return(c,u)=>(y(),k("div",{class:"notes-section",style:Le(a.value)},[r.value?(y(),k("div",xx,N(o.value),1)):V("",!0),d("div",Cx,[d("div",Sx,[d("div",{class:"hint",title:c.prevTitle},N(c.prevLabel),9,$x),n.value.length?da((y(),k("select",{key:0,"onUpdate:modelValue":u[0]||(u[0]=p=>s.value=p),class:"notes-select","aria-label":A(Pt)("Select previous notes")},[(y(!0),k(le,null,we(n.value,p=>(y(),k("option",{key:p.id,value:p.id},N(p.label),9,Mx))),128))],8,Tx)),[[_n,s.value]]):V("",!0)]),d("textarea",{value:i.value,readonly:"",rows:"3",class:"notes-textarea notes-textarea--compact","aria-label":A(Pt)("Previous notes")},null,8,Dx)]),d("div",{class:"hint",title:c.currTitle},N(c.currLabel),9,Ax),d("textarea",{value:c.modelValue,onInput:u[1]||(u[1]=p=>c.$emit("update:modelValue",p.target.value)),rows:"5",class:"notes-textarea notes-textarea--editable",placeholder:A(Pt)("Write your notes"),"aria-label":A(Pt)("Current notes")},null,40,Ex),d("div",Lx,[$e(A(rt),{type:"tertiary",disabled:c.saving,onClick:u[2]||(u[2]=p=>c.$emit("save"))},{default:Ue(()=>[De(N(A(Pt)("Save")),1)]),_:1},8,["disabled"])])],4))}}),[["__scopeId","data-v-91e76a62"]])},Symbol.toStringTag,{value:"Module"})),Bx={key:0,class:"targets-header"},Nx={key:0,class:"hint"},Ix={class:"targets-main"},Px={class:"line total-line"},Fx={class:"value"},Hx={key:0,class:"line"},Wx={key:1,class:"line"},zx={key:2,class:"line forecast"},Rx={class:"hint"},jx={key:1,class:"targets-badges"},Ux={key:2,class:"targets-categories"},Vx={class:"cat-top"},Kx={class:"cat-label"},qx={class:"name"},Gx={class:"cat-meta"},Jx={class:"percent"},Yx={class:"cat-progress"},Zx={class:"bar"},Xx={class:"today-label"},Qx={class:"cat-metrics"},eC={class:"hint"},tC={key:1,class:"hint"},aC={key:0,class:"cat-footer"},oC={class:"hint"},kc=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"TimeTargetsCard",props:{summary:{},config:{},groups:{},showPace:{type:Boolean,default:!0},showForecast:{type:Boolean,default:!0},showHeader:{type:Boolean},title:{default:"Targets"},cardBg:{default:null}},setup(e){const t=e,a=B(()=>{var g;return((g=t.summary)==null?void 0:g.total)??u("total","Total")}),o=B(()=>t.showHeader!==!1),r=B(()=>{var f;return Array.isArray(t.groups)&&t.groups.length?t.groups.map(m=>({id:m.id,label:m.label,summary:m.summary??u(m.id,m.label),color:m.color,rows:m.rows})):(((f=t.summary)==null?void 0:f.categories)??[]).map(m=>({id:m.id,label:m.label,summary:m,color:void 0,rows:[]}))}),n=B(()=>({background:t.cardBg||void 0})),s=B(()=>r.value.map(g=>{const f=g.summary??u(g.id,g.label),m=Number(g.todayHours??0),D=f.targetHours,T=Math.max(0,f.actualHours-D),M=Math.min(T,m),_=D>0?m/D*100:0,$=p(f.percent,0,200);return{id:g.id,label:g.label||f.label,actualHours:f.actualHours,targetHours:D,percent:f.percent,deltaHours:f.deltaHours,needPerDay:f.needPerDay,daysLeft:f.daysLeft,calendarPercent:f.calendarPercent,gap:f.gap,status:f.status,statusLabel:f.statusLabel,color:g.color,calendarCount:Array.isArray(g.rows)?g.rows.length:0,progress:$,todayHours:m,overToday:M,todayWidth:D>0?p(_,2,200):0,todayRight:Math.max(0,100-$),chipLeft:Math.min(100,$),chipText:M>0?`Today ${l(m)} (+${l(M)})`:`Today ${l(m)}`,todayColor:g.color?v(g.color,.65):"var(--brand)",todayBorder:g.color?v(g.color,.35,!0):"var(--brand)",calendarLabel:Array.isArray(g.rows)&&g.rows.length===1?"calendar":"calendars"}}).filter(g=>g.targetHours>0||g.actualHours>0||g.calendarCount>0));function l(g){if(!isFinite(g))return"0";const f=Math.round(g*10)/10;return Math.abs(f-Math.round(f))<.05?String(Math.round(f)):f.toFixed(1)}function i(g){return!isFinite(g)||Math.abs(g)<.005?"0.0":(g>=0?"+":"")+l(Math.abs(g))}function c(g){switch(g){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function u(g,f){return{id:g,label:f,actualHours:0,targetHours:0,percent:0,deltaHours:0,remainingHours:0,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"}}function p(g,f,m){return!isFinite(g)||g<f?f:g>m?m:g}function w(g){return g==="momentum"?"Momentum":"Linear"}function v(g,f=.5,m=!1){const D=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(g||"");if(!D)return g;const T=parseInt(D[1],16),M=parseInt(D[2],16),_=parseInt(D[3],16),$=Math.max(0,Math.min(1,f));return m?`rgb(${Math.round(T*(1-$))},${Math.round(M*(1-$))},${Math.round(_*(1-$))})`:`rgb(${Math.round(T+(255-T)*$)},${Math.round(M+(255-M)*$)},${Math.round(_+(255-_)*$)})`}return(g,f)=>(y(),k("div",{class:"card targets-card",style:Le(n.value)},[o.value?(y(),k("div",Bx,[d("strong",null,N(g.title||"Targets"),1),a.value.targetHours>0?(y(),k("span",Nx,N(a.value.percent.toFixed(0))+"%",1)):V("",!0)])):V("",!0),d("div",Ix,[d("div",Px,[d("span",Fx,[d("strong",null,N(l(a.value.actualHours)),1),De(" / "+N(l(a.value.targetHours))+" h",1)]),g.config.ui.showTotalDelta&&a.value.targetHours>0?(y(),k("span",{key:0,class:Ee(["delta",a.value.deltaHours>=0?"pos":"neg"])},"  "+N(i(a.value.deltaHours))+"h ",3)):V("",!0)]),g.config.ui.showNeedPerDay&&a.value.targetHours>0?(y(),k("div",Hx," Days left "+N(a.value.daysLeft)+"  Need "+N(l(a.value.needPerDay))+" h/day ",1)):V("",!0),g.showPace&&a.value.targetHours>0?(y(),k("div",Wx,[De(" Pace: "+N(a.value.percent.toFixed(0))+"% vs "+N(a.value.calendarPercent.toFixed(0))+"%  ",1),d("span",{class:Ee(["status-label",c(a.value.status)])},N(a.value.statusLabel),3)])):V("",!0),g.showForecast?(y(),k("div",zx,[De(" Forecast: "+N(g.summary.forecast.text)+" ",1),d("span",Rx," Linear "+N(l(g.summary.forecast.linear))+"h  Momentum "+N(l(g.summary.forecast.momentum))+"h  Primary: "+N(w(g.summary.forecast.primaryMethod)),1)])):V("",!0)]),g.config.ui.badges&&a.value.targetHours>0?(y(),k("div",jx,[d("span",{class:Ee(["badge",c(a.value.status)])},N(a.value.statusLabel),3)])):V("",!0),g.config.ui.showCategoryBlocks&&s.value.length?(y(),k("div",Ux,[(y(!0),k(le,null,we(s.value,m=>(y(),k("div",{class:"category",key:m.id},[d("div",Vx,[d("div",Kx,[d("span",{class:"dot",style:Le({background:m.color||"var(--brand)"})},null,4),d("span",qx,N(m.label),1)]),d("div",Gx,[d("span",Jx,N(m.percent.toFixed(0))+"%",1),g.config.ui.badges&&m.targetHours>0?(y(),k("span",{key:0,class:Ee(["badge",c(m.status)])},N(m.statusLabel),3)):V("",!0)])]),d("div",Yx,[d("div",Zx,[d("div",{class:"fill",style:Le({width:m.progress+"%",background:m.color||"var(--brand)"})},null,4),m.todayWidth>0?(y(),k("div",{key:0,class:"today-overlay",style:Le({width:m.todayWidth+"%",right:m.todayRight+"%",background:m.todayColor,borderColor:m.todayBorder})},null,4)):V("",!0),m.todayWidth>0?(y(),k("div",{key:1,class:"today-chip",style:Le({left:m.chipLeft+"%",background:m.todayColor,borderColor:m.todayBorder})},[d("span",Xx,N(m.chipText),1)],4)):V("",!0)])]),d("div",Qx,[d("strong",null,N(l(m.actualHours))+"h",1),d("span",eC,"/ "+N(l(m.targetHours))+"h",1),m.targetHours>0?(y(),k("span",{key:0,class:Ee(["delta",m.deltaHours>=0?"pos":"neg"])},"  "+N(i(m.deltaHours))+"h ",3)):V("",!0),g.config.ui.showNeedPerDay&&m.targetHours>0?(y(),k("span",tC," Need "+N(l(m.needPerDay))+"h/day  "+N(m.daysLeft)+" days left ",1)):V("",!0)]),m.calendarCount>0?(y(),k("div",aC,[d("span",oC,N(m.calendarCount)+" "+N(m.calendarLabel),1)])):V("",!0)]))),128))])):V("",!0)],4))}}),[["__scopeId","data-v-9ee23cb0"]])},Symbol.toStringTag,{value:"Module"})),rC={class:"text-card"},nC={key:0},sC={key:1,class:"body"},lC={key:0,class:"label"},iC={key:1,class:"value"},cC=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"TextBlockWidget",props:{title:{},body:{},items:{},showHeader:{type:Boolean}},setup(e){const t=e,a=B(()=>t.title??""),o=B(()=>t.body??""),r=B(()=>t.items??[]),n=B(()=>t.showHeader!==!1);return(s,l)=>(y(),k("div",rC,[n.value&&a.value?(y(),k("h3",nC,N(a.value),1)):V("",!0),o.value?(y(),k("p",sC,N(o.value),1)):V("",!0),r.value.length?(y(!0),k(le,{key:2},we(r.value,i=>(y(),k("div",{key:i.key,class:"line"},[i.label?(y(),k("span",lC,N(i.label),1)):V("",!0),i.value?(y(),k("span",iC,N(i.value),1)):V("",!0)]))),128)):V("",!0)]))}}),[["__scopeId","data-v-f5a0bc50"]])},Symbol.toStringTag,{value:"Module"})),dC={key:0,class:"time-summary-firstline"},uC={key:1,class:"today-highlight"},fC={class:"today-value"},gC={key:2,class:"today-cats"},pC={class:"name"},hC={class:"value"},mC={key:3,class:"time-summary-inline"},vC={key:4,class:"time-summary-inline"},bC={key:5,class:"time-summary-inline"},yC={key:6,class:"time-summary-row"},wC={key:7,class:"time-summary-row"},kC={key:0,class:"share"},_C={key:8,class:"time-summary-row calendars"},xC={class:"label"},CC={class:"text"},SC={key:9,class:"time-summary-row top-category"},$C={class:"text"},TC={key:10,class:"time-summary-activity"},MC={class:"time-summary-activity__line"},DC={class:"time-summary-activity__line"},AC={key:0,class:"time-summary-activity__delta"},EC={key:1,class:"time-summary-activity__delta"},LC={class:"time-summary-activity__line"},OC={class:"time-summary-activity__line"},BC={class:"time-summary-activity__line"},NC={key:11,class:"time-summary-delta"},_c=Object.freeze(Object.defineProperty({__proto__:null,default:ze(Me({__name:"TimeSummaryCard",props:{summary:{},activitySummary:{},mode:{},config:{},todayGroups:{},title:{},cardBg:{},rangeMode:{},rangeStart:{},rangeEnd:{},offset:{},showHeader:{type:Boolean}},setup(e){const t={showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},a=e,o=B(()=>Object.assign({},t,a.config??{})),r=B(()=>a.mode==="active"?"active days":"all days"),n=B(()=>(a.todayGroups||[]).filter(H=>Number(H.todayHours)>0).map(H=>({...H,todayHours:Number(H.todayHours)||0,color:H.color||"var(--brand)"}))),s=B(()=>{var re;if(n.value.length)return n.value.reduce((be,F)=>be+F.todayHours,0);const H=(re=a.summary)==null?void 0:re.todayHours;return typeof H=="number"&&Number.isFinite(H)?H:null}),l=B(()=>a.title||"Time Summary"),i=B(()=>({background:a.cardBg||void 0})),c=B(()=>a.showHeader!==!1),u=B(()=>{const H=a.summary.rangeLabel||(a.rangeMode==="month"?"Month":"Week"),re=E.value;return re?`${H} (${re})`:H}),p=B(()=>Number.isFinite(a.summary.offset)?a.summary.offset:a.offset??0),w=B(()=>p.value-1),v=B(()=>w.value-p.value),g=B(()=>ae(w.value)),f=B(()=>R(v.value)),m=B(()=>p.value===0?"":` (offset ${ae(p.value)})`),D=B(()=>{if(!o.value.showWeekendShare)return"";const H=a.summary.weekendShare;return H==null?"":`${q(H)}%`}),T=B(()=>{if(!o.value.showTopCategory)return null;const H=a.summary.topCategory;if(!H)return null;const re=O(H.actualHours),be=Number(H.percent??0).toFixed(0),F=H.targetHours>0?` (${be}% of ${O(H.targetHours)} h)`:"";return{text:`${H.label}  ${re} h${F}`,badge:H.statusLabel||"",badgeClass:K(H.status)}}),M=B(()=>{if(!o.value.showBusiest)return"";const H=a.summary.busiest;if(!H||!H.date)return"";const re=Number(H.hours??0);return`Busiest ${H.date}  ${O(re)} h`}),_=B(()=>{const H=[];return o.value.showAverage&&(H.push(`${O(a.summary.avgDay)} h/day (${r.value})`),H.push(`${O(a.summary.avgEvent)} h/event`)),o.value.showMedian&&H.push(`${O(a.summary.medianDay)} h median/day`),H.filter(Boolean).join("  ")}),$=B(()=>a.activitySummary??null),I=B(()=>{var H;return((H=$.value)==null?void 0:H.lastDayOff)||""}),C=B(()=>{var be,F;const H=j(((be=$.value)==null?void 0:be.typicalStart)??null),re=j(((F=$.value)==null?void 0:F.typicalEnd)??null);return H&&re?`${H}${re}`:H?`${H}`:re?`${re}`:""}),S=B(()=>{var be,F;const H=j(((be=$.value)==null?void 0:be.earliestStart)??null),re=j(((F=$.value)==null?void 0:F.latestEnd)??null);return!H&&!re?"":`${H||""} / ${re||""}`}),b=B(()=>{var re;const H=(re=$.value)==null?void 0:re.longestSession;return H==null?"":`${Number(H).toFixed(1)} h`}),h=B(()=>{var H;return(H=$.value)!=null&&H.delta?ve($.value.weekendShare,$.value.delta.weekendShare):""}),x=B(()=>{var H;return(H=$.value)!=null&&H.delta?ve($.value.eveningShare,$.value.delta.eveningShare):""}),E=B(()=>{const H=a.summary.rangeStart||a.rangeStart,re=a.summary.rangeEnd||a.rangeEnd;if(!H||!re)return"";const be=pe(H),F=pe(re);if(!be||!F)return"";const z=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),U=z.format(be),ne=z.format(F);return U===ne?U:`${U}${ne}`}),P=B(()=>{const H=a.summary.delta;if(!H)return"";const be=a.summary.totalHours-H.totalHours,F=be!==0?H.totalHours/be*100:0,z=f.value,U=H.totalHours>=0?"+":"",ne=`${U}${O(Math.abs(H.totalHours))} h`,ye=`${U}${Math.abs(F).toFixed(1)}%`,L=g.value,W=z?` (${z})`:"";return` vs. offset ${L}${W}: ${ne} / ${ye}`});function q(H){return Number(H??0).toFixed(1)}function O(H){return Number(H??0).toFixed(2)}function j(H){if(!H)return"";const re=new Date(H);return Number.isNaN(re.getTime())?"":re.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function K(H){switch(H){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function J(H){return H==null?"0.0%":`${Math.max(0,Math.min(100,Number(H))).toFixed(1)}%`}function pe(H){const re=H.trim();if(!re)return null;const be=new Date(re.length===10?`${re}T00:00:00`:re);return Number.isNaN(be.getTime())?null:be}function Y(H,re,be){const F=new Date(H);return re==="month"?F.setMonth(F.getMonth()+be):F.setDate(F.getDate()+be*7),F}function R(H){const re=(a.rangeMode||"week").toString().toLowerCase(),be=pe(a.summary.rangeStart||a.rangeStart||""),F=pe(a.summary.rangeEnd||a.rangeEnd||"");if(!be||!F)return"";const z=Y(be,re,H),U=Y(F,re,H),ne=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),ye=ne.format(z),L=ne.format(U);return ye===L?ye:`${ye}${L}`}function ae(H){return H===0?"0":H>0?`+${H}`:`${H}`}function ve(H,re){if(re==null||H==null)return"";const be=H-re;return` vs. offset ${g.value}  ${J(be)}`}return(H,re)=>(y(),k("div",{class:"card time-summary compact",style:Le(i.value)},[c.value?(y(),k("div",dC,[d("em",null,N(l.value)+"  "+N(u.value),1)])):V("",!0),s.value!==null?(y(),k("div",uC,[re[0]||(re[0]=d("div",{class:"today-label"},"Total today",-1)),d("div",fC,N(O(s.value))+" h",1)])):V("",!0),n.value.length?(y(),k("div",gC,[(y(!0),k(le,null,we(n.value,be=>(y(),k("div",{class:"today-cat",key:be.id},[d("span",{class:"dot",style:Le({background:be.color||"var(--brand)"})},null,4),d("span",pC,N(be.label),1),d("span",hC,N(O(be.todayHours))+" h",1)]))),128))])):V("",!0),o.value.showTotal?(y(),k("div",mC,[d("strong",null,N(O(H.summary.totalHours))+" h",1),re[1]||(re[1]=De(" total ",-1))])):V("",!0),_.value?(y(),k("div",vC,N(_.value),1)):V("",!0),o.value.showBusiest&&M.value?(y(),k("div",bC,N(M.value),1)):V("",!0),o.value.showWorkday?(y(),k("div",yC,[re[2]||(re[2]=d("span",{class:"label"},"Workdays",-1)),De(" "+N(O(H.summary.workdayAvg))+" h avg  "+N(O(H.summary.workdayMedian))+" h median ",1)])):V("",!0),o.value.showWeekend?(y(),k("div",wC,[re[3]||(re[3]=d("span",{class:"label"},"Weekend",-1)),De(" "+N(O(H.summary.weekendAvg))+" h avg  "+N(O(H.summary.weekendMedian))+" h median ",1),o.value.showWeekendShare&&D.value?(y(),k("span",kC,"("+N(D.value)+")",1)):V("",!0)])):V("",!0),o.value.showCalendarSummary?(y(),k("div",_C,[d("span",xC,N(H.summary.activeCalendars)+" calendars",1),H.summary.calendarSummary?(y(),k(le,{key:0},[re[4]||(re[4]=d("span",{class:"sep"},"",-1)),d("span",CC,N(H.summary.calendarSummary),1)],64)):V("",!0)])):V("",!0),o.value.showTopCategory&&T.value?(y(),k("div",SC,[re[5]||(re[5]=d("span",{class:"label"},"Top category",-1)),d("span",$C,N(T.value.text),1),T.value.badge?(y(),k("span",{key:0,class:Ee(["summary-badge",T.value.badgeClass])},N(T.value.badge),3)):V("",!0)])):V("",!0),$.value?(y(),k("div",TC,[re[6]||(re[6]=d("div",{class:"time-summary-activity__title"},"Activity & Schedule",-1)),d("div",MC," Events "+N($.value.events)+"  Active Days "+N($.value.activeDays??0)+"  Typical "+N(C.value)+N(m.value),1),d("div",DC,[De(" Weekend "+N(J($.value.weekendShare))+" ",1),h.value?(y(),k("span",AC,"("+N(h.value)+")",1)):V("",!0),De("  Evening "+N(J($.value.eveningShare))+" ",1),x.value?(y(),k("span",EC,"("+N(x.value)+")",1)):V("",!0)]),d("div",LC," Earliest/Late "+N(S.value),1),d("div",OC," Overlaps "+N($.value.overlapEvents??0)+"  Longest "+N(b.value),1),d("div",BC," Last day off "+N(I.value),1)])):V("",!0),P.value?(y(),k("div",NC,N(P.value),1)):V("",!0)],4))}}),[["__scopeId","data-v-30983ce4"]])},Symbol.toStringTag,{value:"Module"}))})();
