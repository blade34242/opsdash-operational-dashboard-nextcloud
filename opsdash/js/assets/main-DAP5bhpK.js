(function(){"use strict";var as=document.createElement("style");as.textContent=`table[data-v-2efa83d5]{width:100%;border-collapse:collapse;font-size:13px}thead th[data-v-2efa83d5]{text-align:left;padding:6px 8px;font-weight:600;color:var(--muted);border-bottom:1px solid var(--line)}thead th.num[data-v-2efa83d5]{text-align:right}tbody td[data-v-2efa83d5]{padding:6px 8px;border-top:1px solid var(--line);vertical-align:top}.col-w-42[data-v-2efa83d5]{width:42%}.col-w-12[data-v-2efa83d5]{width:12%}.col-w-14[data-v-2efa83d5]{width:14%}.col-w-18[data-v-2efa83d5]{width:18%}.group-row td[data-v-2efa83d5]{padding-top:12px;padding-bottom:8px;background:color-mix(in srgb,var(--muted) 6%,transparent)}.group-header[data-v-2efa83d5]{display:flex;justify-content:space-between;align-items:center;gap:12px;font-size:12px}.group-label[data-v-2efa83d5]{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--fg)}.group-label .dot[data-v-2efa83d5]{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 12%,transparent)}.group-meta[data-v-2efa83d5]{display:flex;align-items:center;gap:8px;flex-wrap:wrap;color:var(--muted)}.group-meta .summary[data-v-2efa83d5]{font-size:12px}.group-meta .summary-percent[data-v-2efa83d5]{font-variant-numeric:tabular-nums;color:var(--fg);font-weight:600}.badge[data-v-2efa83d5]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-2efa83d5]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-2efa83d5]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-2efa83d5]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-2efa83d5]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-2efa83d5]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.cell[data-v-2efa83d5]{display:flex;flex-direction:column;gap:4px}.row-name[data-v-2efa83d5]{font-weight:600;color:var(--fg)}.progress[data-v-2efa83d5]{position:relative;height:6px;background:color-mix(in srgb,var(--muted) 22%,transparent);border-radius:999px;overflow:hidden}.progress-bar[data-v-2efa83d5]{height:100%;border-radius:999px;background:var(--brand);transition:width .2s ease}.progress-today[data-v-2efa83d5]{position:absolute;top:-2px;height:10px;border-radius:8px;opacity:.9;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 4px #0000001f}.progress-chip[data-v-2efa83d5]{font-size:10px;font-weight:700;color:#fff;padding:0 6px;white-space:nowrap;text-shadow:0 1px 3px rgba(0,0,0,.25)}.num[data-v-2efa83d5]{text-align:right;font-variant-numeric:tabular-nums;color:var(--fg)}.hint[data-v-2efa83d5]{color:var(--muted);font-size:11px}.delta[data-v-2efa83d5]{font-weight:600}.delta.pos[data-v-2efa83d5]{color:var(--pos)}.delta.neg[data-v-2efa83d5]{color:var(--neg)}.empty-row td.empty[data-v-2efa83d5]{font-style:italic;color:var(--muted);text-align:center}.toggle-grid[data-v-9159d2e8]{display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.toggle-grid .toggle-field[data-v-9159d2e8]{background:var(--color-background-contrast, transparent);border:1px solid var(--color-border, #d1d5db);border-radius:6px;padding:8px}.forecast-block[data-v-9159d2e8]{margin-top:10px;display:flex;flex-direction:column;gap:6px}.forecast-block select[data-v-9159d2e8]{width:100%}.forecast-hint[data-v-9159d2e8]{margin:0}.section-hint[data-v-9159d2e8]{background:var(--color-background-hover, rgba(0, 0, 0, .05));border:1px solid var(--color-border, #d1d5db);border-left:4px solid var(--color-primary-element, #2563eb);border-radius:8px;padding:10px 12px;margin:6px 0 10px;color:var(--color-text-maxcontrast, inherit);box-shadow:0 1px 2px var(--color-box-shadow, rgba(0, 0, 0, .08))}.section-hint.compact[data-v-9159d2e8]{margin:4px 0 6px;padding:8px 10px}.hint-title[data-v-9159d2e8]{display:block;font-weight:600;margin-bottom:2px}.hint-body[data-v-9159d2e8]{display:block;line-height:1.4}.pane-heading[data-v-9159d2e8]{margin-bottom:12px}.heading-primary[data-v-9159d2e8]{font-weight:700;font-size:16px;color:var(--color-text-maxcontrast, inherit);line-height:1.2}.heading-subtitle[data-v-9159d2e8]{font-size:13px;color:var(--color-text-lighter, #6b7280);margin-top:2px}.section-title-row[data-v-9159d2e8]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin:8px 0 6px}.section-title-row.tier-2 .section-subtitle[data-v-9159d2e8]{font-size:13px;text-transform:uppercase;letter-spacing:.02em;color:var(--color-text-maxcontrast, inherit)}.section-subtitle[data-v-9159d2e8]{font-weight:600}.field .label[data-v-9159d2e8]{font-weight:600;color:var(--color-text-maxcontrast, inherit)}.field input[type=number][data-v-9159d2e8],.field select[data-v-9159d2e8]{border-radius:6px;padding:6px 8px;border:1px solid var(--color-border, #d1d5db);background:var(--color-main-background, #fff);color:var(--color-text-maxcontrast, inherit)}.field input[disabled][data-v-9159d2e8],.field select[disabled][data-v-9159d2e8]{opacity:.6;cursor:not-allowed}.input-message.info[data-v-9159d2e8]{color:var(--color-text-lighter, #6b7280)}.input-message.warning[data-v-9159d2e8]{color:var(--warning, #f97316)}.input-message.error[data-v-9159d2e8]{color:var(--neg, #dc2626)}.inline-hint[data-v-9159d2e8]{background:var(--color-background-hover, rgba(0, 0, 0, .05));border:1px solid var(--color-border, #d1d5db);border-left:4px solid var(--color-primary-element, #2563eb);border-radius:8px;padding:8px 10px;margin-top:6px;box-shadow:0 1px 2px var(--color-box-shadow, rgba(0, 0, 0, .08))}.toggle-field[data-v-9159d2e8]{display:flex;align-items:center;gap:8px}.single-toggle[data-v-9159d2e8]{grid-column:1 / -1}.toggle-field input[type=checkbox][data-v-9159d2e8]{margin:0}.toggle-copy[data-v-9159d2e8]{display:flex;flex-direction:column;gap:2px}.field-grid[data-v-9159d2e8]{align-items:start}.thresholds-grid[data-v-9159d2e8]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px}.inline-actions[data-v-9159d2e8]{display:flex;align-items:center;gap:10px}.inline-select[data-v-9159d2e8]{margin:0}.sb-title[data-v-67c94233]{font-weight:600;margin-bottom:6px}.sb-description[data-v-67c94233]{font-size:12px;color:var(--text-color-tertiary);margin:0 0 10px}.setup-actions[data-v-67c94233]{display:flex;justify-content:flex-start;flex-wrap:wrap;gap:6px;margin-bottom:12px}.rerun-btn[data-v-67c94233]{font-size:12px}.theme-section[data-v-67c94233]{border:1px solid color-mix(in oklab,var(--line),transparent 30%);border-radius:10px;padding:12px;margin-bottom:16px;background:color-mix(in oklab,var(--card),transparent 6%);display:flex;flex-direction:column;gap:12px}.theme-header[data-v-67c94233]{display:flex;flex-direction:column;gap:2px}.theme-title[data-v-67c94233]{font-weight:600;font-size:13px;color:var(--fg)}.theme-hint[data-v-67c94233]{font-size:11px;color:var(--muted)}.theme-options[data-v-67c94233]{display:flex;flex-direction:column;gap:8px}.theme-option[data-v-67c94233]{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,var(--line),transparent 40%);background:color-mix(in oklab,var(--card),transparent 8%)}.theme-option input[type=radio][data-v-67c94233]{margin-top:4px}.theme-copy[data-v-67c94233]{display:flex;flex-direction:column;gap:2px;font-size:12px}.theme-option__title[data-v-67c94233]{font-weight:600;color:var(--fg)}.theme-option__desc[data-v-67c94233]{color:var(--muted)}.sb-title[data-v-32d12bd1]{font-weight:600;margin-bottom:6px}.sb-description[data-v-32d12bd1]{font-size:12px;color:var(--text-color-tertiary);margin:0 0 10px}.setup-actions[data-v-32d12bd1]{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:12px}.setup-actions .import-input[data-v-32d12bd1]{display:none}.preset-form[data-v-32d12bd1]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.preset-label[data-v-32d12bd1]{font-size:12px;font-weight:600}.preset-form input[data-v-32d12bd1]{width:100%;padding:6px 8px;border-radius:4px;border:1px solid var(--color-border);background:var(--color-main-background);color:var(--color-main-text)}.preset-save[data-v-32d12bd1]{align-self:flex-start}.preset-error[data-v-32d12bd1]{color:var(--color-error);font-size:12px}.preset-warnings[data-v-32d12bd1]{border:1px solid var(--color-warning);background:color-mix(in srgb,var(--color-warning) 10%,transparent);border-radius:6px;padding:8px;margin-bottom:12px}.warnings-title[data-v-32d12bd1]{font-weight:600;margin-bottom:4px}.preset-warnings ul[data-v-32d12bd1]{padding-left:18px;margin:0 0 6px}.preset-clear[data-v-32d12bd1]{padding:2px 6px}.preset-header[data-v-32d12bd1]{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.preset-header h3[data-v-32d12bd1]{margin:0;font-size:13px;font-weight:600}.preset-empty[data-v-32d12bd1]{font-size:12px;color:var(--text-color-tertiary)}.preset-list[data-v-32d12bd1]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}.preset-item[data-v-32d12bd1]{border:1px solid var(--color-border);border-radius:6px;padding:8px;display:flex;flex-direction:column;gap:6px;background:var(--color-main-background)}.preset-meta[data-v-32d12bd1]{display:flex;flex-direction:column;gap:2px}.preset-name[data-v-32d12bd1]{font-weight:600}.preset-info[data-v-32d12bd1]{display:flex;flex-wrap:wrap;gap:8px;font-size:11px;color:var(--text-color-tertiary)}.preset-actions[data-v-32d12bd1]{display:flex;gap:6px}.report-card[data-v-3badd082]{border:1px solid var(--color-border-maxcontrast);border-radius:12px;padding:1rem;margin-bottom:1rem;background:var(--color-main-background)}.report-card__header[data-v-3badd082]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem}.report-card__title[data-v-3badd082]{font-weight:600;font-size:1rem}.report-card__subtitle[data-v-3badd082]{font-size:.85rem;color:var(--color-text-maxcontrast)}.report-form[data-v-3badd082]{display:flex;flex-direction:column;gap:.75rem}.report-form--disabled[data-v-3badd082]{opacity:.6}.report-field[data-v-3badd082]{display:flex;flex-direction:column;gap:.35rem;font-size:.85rem}.report-field select[data-v-3badd082]{border-radius:8px;padding:.35rem .45rem;border:1px solid var(--color-border)}.report-field--checkbox[data-v-3badd082]{flex-direction:row;align-items:center;gap:.5rem}.report-risk[data-v-3badd082]{display:flex;flex-direction:column;gap:.25rem}.report-risk__header[data-v-3badd082]{display:flex;justify-content:space-between;font-size:.85rem;align-items:center}.report-notify[data-v-3badd082]{border:1px dashed var(--color-border);border-radius:8px;padding:.5rem;display:flex;gap:1rem;flex-wrap:wrap}.report-notify legend[data-v-3badd082]{font-size:.85rem;font-weight:600}.report-actions[data-v-3badd082]{display:flex;justify-content:flex-end;margin-top:.5rem}.report-save[data-v-3badd082]{border-radius:999px;border:1px solid var(--color-border-maxcontrast);padding:.35rem .9rem;background:var(--color-main-background);cursor:pointer}.report-save[data-v-3badd082]:disabled{opacity:.6;cursor:not-allowed}.switch[data-v-3badd082]{position:relative;display:inline-block;width:38px;height:20px}.switch input[data-v-3badd082]{opacity:0;width:0;height:0}.switch span[data-v-3badd082]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:var(--color-border);transition:.2s;border-radius:999px}.switch span[data-v-3badd082]:before{position:absolute;content:"";height:16px;width:16px;left:2px;bottom:2px;background-color:#fff;transition:.2s;border-radius:50%}.switch input:checked+span[data-v-3badd082]{background-color:var(--color-primary)}.switch input:checked+span[data-v-3badd082]:before{transform:translate(18px)}.report-saving[data-v-3badd082]{font-size:.85rem;color:var(--color-text-maxcontrast)}.input-message[data-v-b8568ade]{font-size:11px;margin-top:4px;color:var(--muted)}.input-message.error[data-v-b8568ade]{color:var(--neg)}.input-message.warning[data-v-b8568ade]{color:var(--warning)}.onboarding-fade-enter-active,.onboarding-fade-leave-active{transition:opacity .2s ease}.onboarding-fade-enter-from,.onboarding-fade-leave-to{opacity:0}.onboarding-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2000;display:flex;align-items:center;justify-content:center;padding:24px}.onboarding-backdrop{position:absolute;top:0;right:0;bottom:0;left:0;background:#0f172a73}.onboarding-panel{position:relative;z-index:1;width:min(960px,100%);max-height:calc(100vh - 48px);background:var(--color-main-background, #fff);border-radius:12px;box-shadow:0 18px 48px #0f172a59;display:flex;flex-direction:column;padding:24px 28px}.onboarding-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:16px}.onboarding-actions{display:flex;align-items:center;gap:12px}.onboarding-title h2{margin:0;font-size:1.6rem}.onboarding-title .subtitle{margin:4px 0 0;color:var(--color-text-light)}.onboarding-overlay .skip-link{background:none;border:none;color:var(--color-primary);cursor:pointer;font-size:.95rem}.onboarding-overlay .close-btn{background:none;border:none;font-size:1.4rem;line-height:1;cursor:pointer;color:var(--color-text-light)}.onboarding-overlay .close-btn:hover{color:var(--color-primary)}.onboarding-step-nav{display:flex;flex-wrap:wrap;gap:8px;margin:0 0 12px}.onboarding-overlay .step-pill{border:1px solid var(--color-border);background:var(--color-background-contrast);padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer;color:var(--color-text)}.onboarding-overlay .step-pill.active{border-color:var(--color-primary);color:var(--color-primary);background:#2563eb14}.onboarding-overlay .step-pill:disabled{opacity:.6;cursor:default}.onboarding-body{flex:1;overflow-y:auto;padding-right:8px;margin-right:-8px}.onboarding-step h3{margin-top:0}.onboarding-overlay .highlights{padding-left:18px}.onboarding-overlay .config-warning{border:1px solid color-mix(in srgb,var(--color-warning, #f97316) 35%,transparent);background:color-mix(in srgb,var(--color-warning, #f97316) 12%,transparent);border-radius:8px;padding:12px;margin:12px 0;display:flex;flex-direction:column;gap:8px}.onboarding-overlay .config-warning p{margin:0;font-size:.95rem;color:var(--color-text)}.onboarding-overlay .hint{color:var(--color-text-light);margin-top:12px}.onboarding-overlay .snapshot-notice{margin-top:12px;padding:10px 12px;border-radius:8px;font-size:.9rem}.onboarding-overlay .snapshot-notice--success{background:color-mix(in srgb,#22c55e 15%,transparent);color:#14532d}.onboarding-overlay .snapshot-notice--error{background:color-mix(in srgb,#ef4444 15%,transparent);color:#7f1d1d}.onboarding-overlay .strategy-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.onboarding-overlay .strategy-card{border:1px solid var(--color-border);border-radius:8px;padding:16px;cursor:pointer;display:flex;flex-direction:column;gap:8px;transition:border-color .15s ease,box-shadow .15s ease}.onboarding-overlay .strategy-card.active{border-color:var(--color-primary);box-shadow:0 0 0 2px #3b82f633}.onboarding-overlay .strategy-card h4{margin:0}.onboarding-overlay .strategy-card .subtitle{color:var(--color-text-light);margin:0}.onboarding-overlay .strategy-card footer{margin-top:auto;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .calendar-list{display:grid;gap:8px;margin-top:8px}.onboarding-overlay .calendar-item{display:grid;grid-template-columns:auto auto 1fr;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--color-border);border-radius:6px}.onboarding-overlay .calendar-item.checked{border-color:var(--color-primary)}.onboarding-overlay .calendar-item input{margin:0}.onboarding-overlay .calendar-item .dot{width:12px;height:12px;border-radius:50%}.onboarding-overlay .warning{color:var(--color-error);margin-top:12px}.onboarding-overlay .review-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .review-grid h5{margin:0 0 8px;font-size:.95rem;color:var(--color-text-light)}.onboarding-overlay .categories-editor{display:grid;gap:16px}.onboarding-overlay .category-card{border:1px solid var(--color-border);border-radius:8px;padding:16px;background:var(--color-main-background, #fff);display:flex;flex-direction:column;gap:12px}.onboarding-overlay .category-card__header{display:flex;gap:12px;align-items:center}.onboarding-overlay .category-color-indicator{width:14px;height:14px;border-radius:50%;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);flex-shrink:0}.onboarding-overlay .category-name{flex:1;padding:6px 8px;border:1px solid var(--color-border);border-radius:4px}.onboarding-overlay .category-actions{display:flex;gap:8px}.onboarding-overlay .remove-category{background:none;border:none;color:var(--color-text-light);cursor:pointer;font-size:1.1rem}.onboarding-overlay .remove-category:disabled{opacity:.4;cursor:default}.onboarding-overlay .remove-category:not(:disabled):hover{color:var(--color-error)}.onboarding-overlay .category-card__fields{display:flex;flex-wrap:wrap;gap:16px}.onboarding-overlay .color-field{display:flex;flex-direction:column;gap:6px;position:relative}.onboarding-overlay .color-link{align-self:flex-start;border:none;background:transparent;padding:0;font-size:12px;color:var(--brand, #2563eb);text-decoration:underline;cursor:pointer}.onboarding-overlay .color-link:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .color-popover{position:absolute;top:calc(100% + 6px);left:0;z-index:30;min-width:160px;padding:10px;border-radius:10px;border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);background:var(--color-main-background, #fff);box-shadow:0 12px 32px #0f172a40;display:flex;flex-direction:column;gap:8px}.onboarding-overlay .color-popover:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .swatch-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,20px));justify-content:flex-start;gap:6px}.onboarding-overlay .color-swatch{width:18px;height:18px;aspect-ratio:1 / 1;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.onboarding-overlay .color-swatch.active{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 55%)}.onboarding-overlay .color-swatch:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:1px}.onboarding-overlay .custom-color{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .color-input{width:44px;height:26px;padding:0;border-radius:6px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:transparent}.onboarding-overlay .add-category{justify-self:flex-start}.onboarding-overlay .category-total{font-size:.9rem;color:var(--color-text-light)}.onboarding-overlay .calendar-assignments{margin-top:24px;display:grid;gap:12px}.onboarding-overlay .assignment-row{display:grid;grid-template-columns:1fr minmax(160px,220px);gap:12px;align-items:center}.onboarding-overlay .assignment-row select{padding:6px 8px}.onboarding-overlay .cal-name{font-size:.95rem}.onboarding-footer{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.onboarding-overlay .preferences-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}.onboarding-overlay .pref-card{border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);border-radius:10px;padding:12px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:12px}.onboarding-overlay .pref-card h4{margin:0}.onboarding-overlay .pref-card--deck .toggle-row{display:flex;gap:10px;align-items:center;font-size:.95rem}.onboarding-overlay .pref-card--deck input[type=checkbox]{transform:scale(1.05)}.onboarding-overlay .deck-board-list{border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);border-radius:8px;padding:10px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:8px}.onboarding-overlay .deck-board-options{display:flex;flex-direction:column;gap:6px}.onboarding-overlay .deck-board-option{display:flex;gap:8px;align-items:center;font-size:.9rem}.onboarding-overlay .deck-status{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .deck-status--error{color:var(--color-error)}.onboarding-overlay .pref-desc{margin:0;font-size:.9rem;color:var(--color-text-light)}.onboarding-overlay .pref-hint{margin:0;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .theme-options{display:flex;flex-direction:column;gap:8px}.onboarding-overlay .theme-option{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:color-mix(in oklab,var(--color-main-background, #fff),transparent 8%)}.onboarding-overlay .theme-option input[type=radio]{margin-top:4px}.onboarding-overlay .theme-copy{display:flex;flex-direction:column;gap:2px;font-size:.9rem}.onboarding-overlay .theme-option__title{font-weight:600;color:var(--color-text)}.onboarding-overlay .theme-option__desc{color:var(--color-text-light);font-size:.85rem}.onboarding-overlay .theme-preview{font-size:.85rem;color:var(--color-text-light)}:global(body.opsdash-onboarding-lock){overflow:hidden}.shortcuts-overlay[data-v-f8126e32]{position:fixed;top:0;right:0;bottom:0;left:0;background:color-mix(in srgb,var(--color-background-dark-default, rgba(0, 0, 0, .85)) 90%,transparent);display:flex;align-items:center;justify-content:center;padding:24px;z-index:9999}.shortcuts-panel[data-v-f8126e32]{width:min(720px,100%);max-height:90vh;overflow:auto;background:var(--color-main-background, #fff);border-radius:16px;box-shadow:0 12px 48px #00000059;padding:20px;display:flex;flex-direction:column;gap:16px;outline:none}.shortcuts-header[data-v-f8126e32]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}.shortcuts-title h2[data-v-f8126e32]{margin:0;font-size:20px}.shortcuts-hint[data-v-f8126e32]{margin:4px 0 0;font-size:13px;color:var(--text-color-tertiary)}.shortcuts-close[data-v-f8126e32]{border:none;background:transparent;font-size:24px;line-height:1;cursor:pointer;color:var(--text-color-primary, #111)}.shortcuts-body[data-v-f8126e32]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}.shortcuts-group h3[data-v-f8126e32]{margin:0 0 8px;font-size:14px;text-transform:uppercase;color:var(--text-color-tertiary);letter-spacing:.06em}.shortcuts-group ul[data-v-f8126e32]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}.shortcuts-group li[data-v-f8126e32]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 0;border-bottom:1px solid color-mix(in srgb,var(--color-border, rgba(0, 0, 0, .1)) 60%,transparent)}.shortcuts-group li[data-v-f8126e32]:last-child{border-bottom:none}.shortcut-label[data-v-f8126e32]{font-weight:600;display:flex;flex-direction:column;gap:2px}.shortcut-label small[data-v-f8126e32]{font-weight:400;font-size:12px;color:var(--text-color-tertiary)}.shortcut-combo[data-v-f8126e32]{display:inline-flex;gap:6px}kbd[data-v-f8126e32]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;padding:4px 8px;border-radius:6px;border:1px solid color-mix(in srgb,var(--color-border, rgba(0, 0, 0, .2)) 80%,transparent);background:color-mix(in srgb,var(--color-main-background, #fff) 80%,rgba(0,0,0,.05));color:var(--text-color-primary, #111);box-shadow:inset 0 -1px #fff9}.shortcuts-footer[data-v-f8126e32]{display:flex;justify-content:flex-end}@media (max-width: 600px){.shortcuts-panel[data-v-f8126e32]{padding:16px}.shortcuts-body[data-v-f8126e32]{grid-template-columns:1fr}}.deck-panel[data-v-1436c7c7]{display:flex;flex-direction:column;gap:1rem;height:100%;min-height:0}.deck-panel__header[data-v-1436c7c7]{display:flex;align-items:center;justify-content:space-between}.deck-panel__title[data-v-1436c7c7]{font-size:1rem;font-weight:600}.deck-panel__subtitle[data-v-1436c7c7]{font-size:.85rem;color:var(--color-text-maxcontrast)}.deck-panel__actions[data-v-1436c7c7]{display:flex;align-items:center;gap:.5rem}.deck-panel__count[data-v-1436c7c7]{font-size:.9rem;background:var(--color-background-darker);border:1px solid var(--color-border-dark);padding:2px 8px;border-radius:12px}.deck-panel__refresh[data-v-1436c7c7]{border:1px solid var(--color-primary);background:transparent;color:var(--color-primary);border-radius:999px;padding:.25rem .75rem;font-size:.85rem;cursor:pointer}.deck-panel__refresh[data-v-1436c7c7]:disabled{opacity:.6;cursor:default}.deck-panel__link[data-v-1436c7c7]{font-size:.85rem;text-decoration:none;color:var(--color-text-maxcontrast)}.deck-panel__loading[data-v-1436c7c7]{display:flex;align-items:center;gap:.5rem;color:var(--color-text-maxcontrast)}.deck-panel__filters[data-v-1436c7c7]{display:flex;gap:.5rem;flex-wrap:wrap}.deck-panel__body[data-v-1436c7c7]{flex:1;min-height:0;overflow:auto;padding-right:4px}.deck-filter-btn[data-v-1436c7c7]{border:1px solid var(--color-border-maxcontrast);background:var(--color-main-background);border-radius:999px;padding:.2rem .9rem;font-size:.8rem;cursor:pointer}.deck-filter-btn.active[data-v-1436c7c7]{border-color:var(--color-primary);color:var(--color-primary)}.deck-filter-btn[data-v-1436c7c7]:disabled{opacity:.5;cursor:not-allowed}.deck-panel__error[data-v-1436c7c7]{padding:.75rem;border-radius:8px;background:var(--color-error-hover);color:var(--color-error-text)}.deck-card-list[data-v-1436c7c7]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:1rem}.deck-card[data-v-1436c7c7]{border:1px solid var(--color-border);border-radius:12px;padding:.85rem;background:var(--color-main-background);display:flex;flex-direction:column;gap:.35rem}.deck-card__status-row[data-v-1436c7c7]{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:var(--color-text-maxcontrast)}.deck-card__status[data-v-1436c7c7]{font-weight:600;text-transform:uppercase;font-size:.75rem;letter-spacing:.05em}.deck-card__status.done[data-v-1436c7c7]{color:var(--color-success)}.deck-card__status.archived[data-v-1436c7c7]{color:var(--color-text-maxcontrast)}.deck-card__title[data-v-1436c7c7]{font-size:1rem;font-weight:600;color:var(--color-text)}.deck-card__meta[data-v-1436c7c7]{display:flex;align-items:center;gap:.5rem;font-size:.8rem}.deck-card__board[data-v-1436c7c7]{border:2px solid var(--color-border);padding:.15rem .5rem;border-radius:999px;text-transform:uppercase;font-size:.7rem}.deck-card__stack[data-v-1436c7c7]{color:var(--color-text-maxcontrast)}.deck-card__labels[data-v-1436c7c7]{display:flex;gap:.35rem;flex-wrap:wrap}.deck-card__label[data-v-1436c7c7]{color:#fff;font-size:.7rem;padding:.1rem .45rem;border-radius:999px}.deck-card__assignees[data-v-1436c7c7]{display:flex;flex-wrap:wrap;gap:.35rem;font-size:.75rem}.deck-card__assignees-label[data-v-1436c7c7]{color:var(--color-text-maxcontrast)}.deck-card__assignee[data-v-1436c7c7]{font-weight:500}.add-menu[data-v-022ff937]{position:fixed;transform:translate(-4px,-4px);background:var(--card,#fff);border:1px solid var(--color-border,#e5e7eb);border-radius:10px;padding:10px 10px 12px;box-shadow:0 12px 32px #00000026;z-index:60;min-width:200px}.add-menu__header[data-v-022ff937]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px}.add-menu__title[data-v-022ff937]{font-weight:600}.add-menu__hint[data-v-022ff937]{font-size:11px;color:var(--muted)}.add-menu__list[data-v-022ff937]{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:6px}.add-btn[data-v-022ff937]{border:1px solid var(--color-border,#d1d5db);background:color-mix(in oklab,var(--card,#fff),var(--color-primary,#2563EB) 8%);color:var(--fg,#0f172a);padding:8px 10px;border-radius:8px;font-weight:600;text-align:left;transition:background .12s ease,transform .12s ease,border-color .12s ease}.add-btn[data-v-022ff937]:hover{background:color-mix(in oklab,var(--card,#fff),var(--color-primary,#2563EB) 16%);border-color:color-mix(in oklab,var(--color-primary,#2563EB),#d1d5db 50%);transform:translateY(-1px)}.add-btn[data-v-022ff937]:active{transform:translateY(0)}.ghost[data-v-022ff937]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.layout-grid[data-v-f5ed2b29]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:100%;position:relative}.layout-grid.show-guides[data-v-f5ed2b29]{background-image:linear-gradient(to right,rgba(148,163,184,.15) 1px,transparent 1px),linear-gradient(to bottom,rgba(148,163,184,.12) 1px,transparent 1px);background-size:calc((100% - 36px)/4) 100%,100% 48px;background-position:0 0,0 0}.layout-grid.show-guides[data-v-f5ed2b29]:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.layout-item[data-v-f5ed2b29]{min-width:0;position:relative;display:flex;padding:0;cursor:grab}.layout-item[data-v-f5ed2b29]>*{flex:1 1 auto}.w-quarter[data-v-f5ed2b29]{grid-column:span 1}.w-half[data-v-f5ed2b29]{grid-column:span 2}.w-full[data-v-f5ed2b29]{grid-column:span 4}.h-s[data-v-f5ed2b29]>*{min-height:140px}.h-m[data-v-f5ed2b29]>*{min-height:220px}.h-l[data-v-f5ed2b29]>*{min-height:320px}.is-editable[data-v-f5ed2b29]{outline:1px dashed rgba(107,114,128,.5);border-radius:10px}.is-selected[data-v-f5ed2b29]{outline:2px solid var(--color-primary,#2563EB)}.is-dragging[data-v-f5ed2b29]{opacity:.6}.text-sm[data-v-f5ed2b29]{font-size:12px;line-height:1.2}.text-md[data-v-f5ed2b29]{font-size:14px;line-height:1.35}.text-lg[data-v-f5ed2b29]{font-size:18px;line-height:1.5}.is-dense[data-v-f5ed2b29]{line-height:1.2}@media (max-width: 1024px){.w-quarter[data-v-f5ed2b29],.w-half[data-v-f5ed2b29]{grid-column:span 2}.w-full[data-v-f5ed2b29]{grid-column:span 4}}@media (max-width: 768px){.w-quarter[data-v-f5ed2b29],.w-half[data-v-f5ed2b29],.w-full[data-v-f5ed2b29]{grid-column:span 4}}.options-wrapper[data-v-0c2fa778]{position:relative}.options-pop[data-v-0c2fa778]{position:absolute;bottom:calc(100% + 6px);right:0;top:auto;background:color-mix(in oklab,#111827,#1f2937 60%);border:1px solid color-mix(in oklab,#4b5563,transparent 20%);border-radius:8px;box-shadow:0 10px 22px #00000038;padding:8px;min-width:200px;z-index:30;max-height:320px;overflow:auto}.opt-row[data-v-0c2fa778]{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:6px}.opt-row[data-v-0c2fa778]:last-child{margin-bottom:0}.opt-row--footer[data-v-0c2fa778]{justify-content:flex-end}.link-btn[data-v-0c2fa778]{border:none;background:transparent;color:var(--brand,#2563eb);cursor:pointer;font-size:12px;text-decoration:underline}.opt-row label[data-v-0c2fa778]{font-size:12px;color:#e5e7eb}.opt-row input[type='"number"'][data-v-0c2fa778],.opt-row select[data-v-0c2fa778],.opt-row input[type='"text"'][data-v-0c2fa778]{width:100px;background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:4px 6px}.opt-row textarea[data-v-0c2fa778]{width:160px;background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:6px}.opt-section[data-v-0c2fa778]{margin-bottom:10px;border-bottom:1px solid color-mix(in oklab,#4b5563,transparent 25%);padding-bottom:6px}.opt-section[data-v-0c2fa778]:last-child{border-bottom:none;padding-bottom:0;margin-bottom:0}.opt-section__title[data-v-0c2fa778]{font-size:11px;text-transform:uppercase;letter-spacing:.04em;color:#9ca3af;margin-bottom:6px;font-weight:700}.colorlist[data-v-0c2fa778]{display:flex;align-items:center;gap:6px;flex-wrap:wrap}.colorlist__item input[type=color][data-v-0c2fa778]{width:38px;height:28px;padding:0;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);background:#0f172a}.multi[data-v-0c2fa778]{display:grid;gap:6px}.multi__item[data-v-0c2fa778]{display:flex;align-items:center;gap:6px;font-size:13px}.ghost[data-v-24378dd6]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.ghost.danger[data-v-24378dd6]{color:#b91c1c;border-color:#fca5a5}.widget-toolbar-layer[data-v-24378dd6]{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:2147480000;display:flex;align-items:flex-end;justify-content:center;padding:0 16px 12px;background:none}.widget-toolbar[data-v-24378dd6]{pointer-events:auto;position:relative;margin-top:0;padding:7px 9px;border:1px solid rgba(156,163,175,.85);background:#111827;border:1px solid color-mix(in oklab,var(--color-border,#9ca3af),transparent 10%);background:color-mix(in oklab,#1f2937,#111827 70%);border-radius:8px;display:flex;align-items:center;justify-content:space-between;gap:6px;box-shadow:0 6px 14px #00000029;max-width:760px;width:min(760px,calc(100% - 220px));opacity:1;z-index:2147480001;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);transition:background .14s ease,box-shadow .14s ease,transform .14s ease}.widget-toolbar[data-v-24378dd6]:hover{background:#0f172a;background:color-mix(in oklab,#111827,#1f2937 30%);box-shadow:0 8px 18px #0000002e}.toolbar-title[data-v-24378dd6]{font-weight:600;color:#e5e7eb}.toolbar-actions[data-v-24378dd6]{display:flex;gap:6px;flex-wrap:wrap;align-items:center}.widget-toolbar .ghost[data-v-24378dd6]{padding:4px 6px;font-size:12px;background:#0f172a;border-color:#4b5563;background:color-mix(in oklab,#111827,#1f2937 80%);border-color:color-mix(in oklab,#4b5563,transparent 35%);color:#f1f5f9}.widget-toolbar .ghost[data-v-24378dd6]:hover{background:#1e3a8a;border-color:#2563eb;background:color-mix(in oklab,#2563EB,#111827 85%);border-color:color-mix(in oklab,#2563EB,transparent 50%)}.cat-header[data-v-1e606590]{display:flex;align-items:center;gap:8px}.cat-color-indicator[data-v-1e606590]{width:12px;height:12px;border-radius:50%;border:1px solid color-mix(in oklab,var(--fg),transparent 80%);flex-shrink:0}.cat-header .cat-name[data-v-1e606590]{flex:1;padding:6px 8px;border:1px solid var(--line);border-radius:6px;background:color-mix(in oklab,var(--card),transparent 5%);color:var(--fg)}.color-trigger-wrapper[data-v-1e606590]{position:relative;display:inline-flex;align-items:center}.color-link[data-v-1e606590]{border:none;background:transparent;padding:0;font-size:12px;color:var(--brand, #2563eb);text-decoration:underline;cursor:pointer}.color-link[data-v-1e606590]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 40%);outline-offset:2px}.swatch-grid[data-v-1e606590]{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,20px));justify-content:flex-start;gap:6px}.color-swatch[data-v-1e606590]{width:18px!important;height:18px!important;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0!important;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}.color-swatch.active[data-v-1e606590]{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 60%)}.color-swatch[data-v-1e606590]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 40%);outline-offset:1px}.ghost[data-v-539a10f9]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.ghost.primary[data-v-539a10f9]{border-color:var(--color-primary, #2563EB);color:var(--color-primary, #2563EB)}.advanced-overlay[data-v-539a10f9]{position:fixed;top:0;right:0;bottom:0;left:0;background:#0006;display:flex;align-items:flex-start;justify-content:center;padding:48px 16px;z-index:50}.advanced-panel[data-v-539a10f9]{background:var(--color-main-background, #fff);color:var(--color-main-text, #0f172a);width:min(960px,100%);max-height:calc(100vh - 96px);border-radius:12px;box-shadow:0 20px 60px #00000040;overflow:hidden;display:flex;flex-direction:column;border:1px solid var(--color-border, #e5e7eb)}.advanced-panel>.sb-pane[data-v-539a10f9]{flex:1 1 auto;overflow:auto;padding:16px}.overlay-header[data-v-539a10f9]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--color-border, #e5e7eb);background:var(--color-background-hover, #f8fafc)}.overlay-title[data-v-539a10f9]{font-weight:600;font-size:16px}.overlay-subtitle[data-v-539a10f9]{font-size:12px;color:var(--muted, #6b7280);margin-top:2px}.overlay-actions[data-v-539a10f9]{display:flex;justify-content:space-between;align-items:center;gap:8px;padding:12px 16px;border-top:1px solid var(--color-border, #e5e7eb);background:var(--color-background-hover, #f8fafc)}.overlay-actions__left[data-v-539a10f9],.overlay-actions__right[data-v-539a10f9]{display:flex;gap:8px;flex-wrap:wrap}@media (max-width: 640px){.advanced-overlay[data-v-539a10f9]{padding:16px;align-items:flex-start}}.layout-wrapper[data-v-de4253e7]{position:relative}.layout-wrapper.editable-mode[data-v-de4253e7]{padding-bottom:120px;overflow:visible}:root{--widget-text-scale:1}.text-scale-sm{--widget-text-scale:.84}.text-scale-md{--widget-text-scale:1}.text-scale-lg{--widget-text-scale:1.24}.activity-card[data-v-10697283]{display:flex;flex-direction:column;gap:8px;padding:14px;font-size:13px;color:var(--muted)}.activity-card__header[data-v-10697283]{display:flex;justify-content:space-between;align-items:center;font-weight:600;color:var(--fg);font-size:12px}.activity-card__hero[data-v-10697283]{font-weight:600;color:var(--fg)}.activity-card__subline[data-v-10697283]{font-size:12px}.activity-card__meta[data-v-10697283],.activity-card__extra[data-v-10697283]{display:flex;flex-wrap:wrap;gap:8px 14px;font-size:12px}.activity-card__meta strong[data-v-10697283],.activity-card__extra strong[data-v-10697283]{font-weight:600;color:var(--fg)}.activity-card__hint[data-v-10697283]{font-size:11px;color:var(--muted);opacity:.8}.activity-card__trend[data-v-10697283]{border-top:1px solid var(--color-border-maxcontrast, rgba(125, 125, 125, .2));padding-top:10px;display:flex;flex-direction:column;gap:8px}.dayoff-header[data-v-10697283]{display:flex;justify-content:space-between;font-size:11px;color:var(--muted)}.dayoff-meta[data-v-10697283]{opacity:.85}.dayoff-heatmap[data-v-10697283]{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:8px}.dayoff-tile[data-v-10697283]{border-radius:10px;padding:10px 8px;display:flex;flex-direction:column;gap:4px;text-align:center;background:color-mix(in oklab,var(--muted),transparent 85%);color:var(--fg);transition:transform .2s ease,background .2s ease}.dayoff-tile--current[data-v-10697283]{outline:1px solid color-mix(in oklab,var(--brand),transparent 30%);outline-offset:1px}.dayoff-tile--low[data-v-10697283]{background:color-mix(in oklab,#dc2626,white 70%);color:#7f1d1d}.dayoff-tile--mid[data-v-10697283]{background:color-mix(in oklab,#f97316,white 68%);color:#7c2d12}.dayoff-tile--high[data-v-10697283]{background:color-mix(in oklab,#16a34a,white 65%);color:#14532d}.dayoff-tile__label[data-v-10697283]{font-size:11px;font-weight:600}.dayoff-tile__value[data-v-10697283]{font-size:14px;font-weight:700;font-variant-numeric:tabular-nums}.dayoff-tile__meta[data-v-10697283]{font-size:10px;color:color-mix(in oklab,currentColor,transparent 55%);font-variant-numeric:tabular-nums}.pill[data-v-10697283]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;font-size:11px;border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.balance-card[data-v-1b1b4dd2]{display:flex;flex-direction:column;gap:8px;padding:14px;font-size:13px;color:var(--muted)}.balance-card__header[data-v-1b1b4dd2]{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fg);font-size:12px}.balance-card__activity[data-v-1b1b4dd2]{display:flex;flex-direction:column;gap:6px;padding:6px 0;border-bottom:1px solid var(--border, rgba(125, 125, 125, .2))}.activity-hero__title[data-v-1b1b4dd2]{font-size:12px;font-weight:600;color:var(--fg)}.activity-hero__line[data-v-1b1b4dd2]{font-weight:600;color:var(--fg)}.activity-subline[data-v-1b1b4dd2]{font-size:12px;color:var(--muted)}.activity-meta[data-v-1b1b4dd2]{display:flex;flex-wrap:wrap;gap:8px 12px;font-size:12px;color:var(--muted)}.activity-meta strong[data-v-1b1b4dd2]{font-weight:600;color:var(--fg)}.activity-meta--extra[data-v-1b1b4dd2]{font-size:12px;color:var(--muted)}.activity-dayoff[data-v-1b1b4dd2]{display:flex;flex-direction:column;gap:6px}.dayoff-header[data-v-1b1b4dd2]{display:flex;align-items:center;justify-content:space-between;font-weight:600;font-size:12px;color:var(--fg)}.dayoff-meta[data-v-1b1b4dd2]{font-size:11px;color:var(--muted)}.dayoff-heatmap[data-v-1b1b4dd2]{display:grid;gap:2px;grid-template-columns:repeat(auto-fit,minmax(90px,1fr))}.dayoff-tile[data-v-1b1b4dd2]{border:1px solid var(--color-border, rgba(125, 125, 125, .2));border-radius:6px;padding:3px;display:grid;gap:1px;background:var(--color-main-background)}.dayoff-tile--current[data-v-1b1b4dd2]{border-color:var(--color-primary)}.dayoff-tile--low[data-v-1b1b4dd2]{background:color-mix(in srgb,#10b981 12%,var(--color-main-background))}.dayoff-tile--mid[data-v-1b1b4dd2]{background:color-mix(in srgb,#f59e0b 12%,var(--color-main-background))}.dayoff-tile--high[data-v-1b1b4dd2]{background:color-mix(in srgb,#ef4444 12%,var(--color-main-background))}.dayoff-tile__label[data-v-1b1b4dd2]{font-weight:600;color:var(--fg);font-size:11px}.dayoff-tile__value[data-v-1b1b4dd2]{font-size:11px;color:var(--fg)}.dayoff-tile__meta[data-v-1b1b4dd2]{font-size:9.5px;color:var(--muted)}.balance-card__warnings[data-v-1b1b4dd2]{margin:0;padding-left:16px;font-size:12px;display:flex;flex-direction:column;gap:4px}.balance-card__warnings[data-v-1b1b4dd2]{color:var(--danger, #b91c1c)}.balance-card__note[data-v-1b1b4dd2]{font-size:12px;color:var(--fg);background:color-mix(in oklab,var(--brand),transparent 88%);border-radius:6px;padding:6px 8px;white-space:pre-line}.badge[data-v-1b1b4dd2]{display:inline-flex;align-items:center;padding:2px 8px;border-radius:999px;font-size:11px;background:color-mix(in srgb,var(--brand) 12%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.balance-card__mix[data-v-1b1b4dd2]{border-top:1px solid var(--border, rgba(125, 125, 125, .2));padding-top:8px}.mix-header[data-v-1b1b4dd2]{display:flex;justify-content:space-between;align-items:flex-start;gap:6px;margin-bottom:6px}.mix-title[data-v-1b1b4dd2]{font-size:10.5px;font-weight:600;color:var(--fg)}.mix-subtitle[data-v-1b1b4dd2]{font-size:9px;color:var(--muted)}.mix-badge[data-v-1b1b4dd2]{font-size:8px;text-transform:uppercase;letter-spacing:.05em;padding:2px 8px;border-radius:999px;background:color-mix(in oklab,var(--brand),transparent 80%);color:var(--brand);border:1px solid color-mix(in oklab,var(--brand),transparent 60%)}.mix-list[data-v-1b1b4dd2]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px;font-size:11px}.mix-row[data-v-1b1b4dd2]{display:grid;grid-template-columns:52px repeat(auto-fit,minmax(32px,1fr));gap:1px;align-items:stretch}.mix-label[data-v-1b1b4dd2]{padding:2px 4px;font-weight:600;color:var(--fg);font-size:9px;text-align:left}.mix-columns[data-v-1b1b4dd2]{display:grid;align-items:center}.mix-column-label[data-v-1b1b4dd2]{text-align:center;font-size:8px;color:var(--muted);text-transform:uppercase;padding:1px 0}.mix-column-label--current[data-v-1b1b4dd2]{color:var(--brand)}.mix-cells[data-v-1b1b4dd2]{display:contents}.mix-cell[data-v-1b1b4dd2]{border-radius:4px;padding:1px .25px;text-align:center;font-size:9px;font-weight:700;color:var(--fg);background:color-mix(in oklab,var(--muted),transparent 85%);transition:background .2s ease}.mix-cell--current[data-v-1b1b4dd2]{outline:1px solid color-mix(in oklab,var(--brand),transparent 35%);outline-offset:1px}.mix-cell--trend-up[data-v-1b1b4dd2]{background:color-mix(in oklab,#16a34a,white 65%);color:#14532d}.mix-cell--trend-down[data-v-1b1b4dd2]{background:color-mix(in oklab,#dc2626,white 65%);color:#7f1d1d}.mix-cell--trend-flat[data-v-1b1b4dd2]{background:color-mix(in oklab,#f97316,white 70%);color:#7c2d12}.mix-cell__value[data-v-1b1b4dd2]{font-variant-numeric:tabular-nums}.balance-card[data-v-10378521]{background:var(--card,#fff);border:1px solid var(--color-border,#e5e7eb);border-radius:12px;padding:12px;color:var(--fg,#0f172a);display:flex;flex-direction:column;gap:10px;font-size:calc(14px * var(--widget-text-scale, 1))}.header[data-v-10378521]{display:flex;align-items:center;justify-content:space-between;gap:10px}.header.compact[data-v-10378521]{justify-content:center}.title-row[data-v-10378521]{display:flex;align-items:center;gap:8px}.title[data-v-10378521]{font-weight:600;font-size:1.02em}.index[data-v-10378521]{text-align:right}.index.centered[data-v-10378521]{text-align:center;width:100%}.trend[data-v-10378521]{display:flex;align-items:center;gap:10px}.trend-line[data-v-10378521]{flex:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(92px,1fr));gap:6px;justify-content:flex-start}.trend-block[data-v-10378521]{min-width:0;background:color-mix(in oklab,var(--color-primary,#2563eb),#e5e7eb 50%);border-radius:8px;padding:4px 5px;display:flex;align-items:center;justify-content:center;position:relative;color:#fff;font-size:11px;border:none;cursor:default}.trend-block.no-range[data-v-10378521]{grid-column:span 1;padding:4px 5px}.trend-block.no-range.no-offset[data-v-10378521]{grid-column:span 1;padding:4px}.trend-block.no-offset[data-v-10378521]{grid-column:span 1;padding:4px 6px}.trend-block.current[data-v-10378521]{background:var(--color-primary,#2563eb);box-shadow:0 0 0 2px color-mix(in oklab,var(--color-primary,#2563eb),#ffffff 60%)}.trend-line-row[data-v-10378521]{display:flex;align-items:center;justify-content:space-between;gap:4px;width:100%}.trend-value[data-v-10378521]{font-weight:700;font-size:calc(13px * var(--widget-text-scale, 1));text-align:left;white-space:nowrap}.trend-range[data-v-10378521]{flex:1;text-align:center;font-size:calc(10px * var(--widget-text-scale, 1));color:#e5e7eb;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.trend-offset[data-v-10378521]{min-width:52px;text-align:right;font-size:calc(10px * var(--widget-text-scale, 1));color:#cbd5f5;white-space:nowrap}.trend-delta[data-v-10378521]{font-size:calc(12px * var(--widget-text-scale, 1));color:var(--muted);display:flex;align-items:center;justify-content:space-between;gap:8px}.trend-left[data-v-10378521]{font-weight:700;color:var(--fg,#0f172a)}.trend-center[data-v-10378521]{flex:1;text-align:center;font-size:calc(11px * var(--widget-text-scale, 1))}.trend-right[data-v-10378521]{min-width:56px;text-align:right;font-size:calc(11px * var(--widget-text-scale, 1))}.section-title[data-v-10378521]{font-weight:600;font-size:calc(13px * var(--widget-text-scale, 1));margin-bottom:4px}.messages ul[data-v-10378521]{margin:0;padding-left:18px;color:var(--muted);font-size:calc(13px * var(--widget-text-scale, 1))}.messages li[data-v-10378521]{margin-bottom:2px}.messages li[data-v-10378521]:last-child{margin-bottom:0}.config[data-v-10378521]{font-size:calc(12px * var(--widget-text-scale, 1));color:var(--muted);display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:6px}.empty[data-v-10378521]{text-align:center;color:var(--muted);font-size:calc(13px * var(--widget-text-scale, 1))}.mix-card[data-v-d71ef484]{display:flex;flex-direction:column;gap:10px}.mix-header[data-v-d71ef484]{display:flex;justify-content:space-between;align-items:center}.mix-title[data-v-d71ef484]{font-weight:700;color:var(--fg)}.mix-subtitle[data-v-d71ef484]{font-size:12px;color:var(--muted)}.mix-badge[data-v-d71ef484]{padding:4px 8px;border-radius:8px;font-size:12px;font-weight:600;background:color-mix(in oklab,var(--brand),transparent 80%);border:1px solid color-mix(in oklab,var(--brand),transparent 60%);color:var(--brand)}.mix-list[data-v-d71ef484]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}.mix-row[data-v-d71ef484]{display:grid;grid-template-columns:52px 1fr;gap:6px;align-items:center}.mix-label[data-v-d71ef484]{font-weight:600;color:var(--fg);font-size:12px}.mix-columns[data-v-d71ef484]{display:grid;gap:6px;align-items:center;font-size:12px;color:var(--muted)}.mix-column-label[data-v-d71ef484]{text-align:center}.mix-column-label--label[data-v-d71ef484]{text-align:left}.mix-column-label--current[data-v-d71ef484]{font-weight:700;color:var(--fg)}.mix-cells[data-v-d71ef484]{display:grid;gap:6px}.mix-cell[data-v-d71ef484]{border-radius:8px;padding:6px;background:var(--mix-bg, color-mix(in oklab, var(--muted), transparent 85%));color:var(--mix-fg, var(--fg));text-align:center;font-size:12px}.mix-cell--current[data-v-d71ef484]{outline:1px solid color-mix(in oklab,var(--brand),transparent 35%);outline-offset:1px}.mix-cell--trend-up[data-v-d71ef484]{background:var(--mix-bg, color-mix(in oklab, #16a34a, white 65%))}.mix-cell--trend-down[data-v-d71ef484]{background:var(--mix-bg, color-mix(in oklab, #dc2626, white 65%))}.mix-cell--trend-flat[data-v-d71ef484]{background:var(--mix-bg, color-mix(in oklab, #f97316, white 70%))}.mix-cell__value[data-v-d71ef484]{font-weight:700;font-variant-numeric:tabular-nums}.pill[data-v-d71ef484]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;font-size:11px;border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.hint[data-v-d71ef484]{font-size:12px;color:var(--muted)}.dayoff-card[data-v-252bd4c8]{display:flex;flex-direction:column;gap:10px}.dayoff-card__header[data-v-252bd4c8]{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fg);font-size:12px}.dayoff-heatmap[data-v-252bd4c8]{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:8px}.dayoff-tile[data-v-252bd4c8]{border-radius:10px;padding:10px 8px;display:flex;flex-direction:column;gap:4px;text-align:center;background:var(--tile-bg, color-mix(in oklab, var(--muted), transparent 85%));color:var(--tile-fg, var(--fg));transition:transform .2s ease,background .2s ease}.dayoff-tile--current[data-v-252bd4c8]{outline:1px solid color-mix(in oklab,var(--brand),transparent 30%);outline-offset:1px}.dayoff-tile--low[data-v-252bd4c8]{background:var(--tile-bg, color-mix(in oklab, #dc2626, white 70%));color:var(--tile-fg, #7f1d1d)}.dayoff-tile--mid[data-v-252bd4c8]{background:var(--tile-bg, color-mix(in oklab, #f97316, white 68%));color:var(--tile-fg, #7c2d12)}.dayoff-tile--high[data-v-252bd4c8]{background:var(--tile-bg, color-mix(in oklab, #16a34a, white 65%));color:var(--tile-fg, #14532d)}.dayoff-tile__label[data-v-252bd4c8]{font-size:11px;font-weight:600}.dayoff-tile__value[data-v-252bd4c8]{font-size:14px;font-weight:700;font-variant-numeric:tabular-nums}.dayoff-tile__meta[data-v-252bd4c8]{font-size:10px;color:color-mix(in oklab,currentColor,transparent 55%);font-variant-numeric:tabular-nums}.pill[data-v-252bd4c8]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;font-size:11px;border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.hint[data-v-252bd4c8]{font-size:12px;color:var(--muted)}.deck-summary-card[data-v-cad91ee6]{display:flex;flex-direction:column;gap:.75rem}.deck-summary-card__header[data-v-cad91ee6]{display:flex;justify-content:space-between;align-items:center}.deck-summary-card__title[data-v-cad91ee6]{font-weight:700;font-size:1rem}.deck-summary-card__subtitle[data-v-cad91ee6],.deck-summary-card__meta[data-v-cad91ee6]{color:var(--color-text-maxcontrast);font-size:.85rem}.deck-summary-card__loading[data-v-cad91ee6],.deck-summary-card__error[data-v-cad91ee6],.deck-summary-card__empty[data-v-cad91ee6]{display:flex;align-items:center;gap:.5rem;color:var(--color-text-maxcontrast)}.deck-summary-card__error[data-v-cad91ee6]{background:var(--color-error-hover);color:var(--color-error-text);border-radius:8px;padding:.5rem .75rem}.deck-summary-card__rows[data-v-cad91ee6]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.5rem}.deck-summary-card__row[data-v-cad91ee6]{border:1px solid var(--color-border);border-radius:10px;padding:.6rem .75rem;display:flex;flex-direction:column;gap:.35rem;background:var(--color-main-background)}.deck-summary-card__row-head[data-v-cad91ee6]{display:flex;align-items:center;justify-content:space-between;font-weight:600}.bucket-label[data-v-cad91ee6]{font-size:.9rem}.bucket-count[data-v-cad91ee6]{font-size:.85rem;border-radius:999px;padding:.1rem .55rem;background:var(--color-background-darker)}.deck-summary-card__row-body[data-v-cad91ee6]{display:flex;flex-wrap:wrap;gap:.5rem;align-items:center}.bucket-board[data-v-cad91ee6]{border:2px solid var(--color-border);padding:.2rem .6rem;border-radius:999px;font-size:.75rem;text-transform:uppercase}.bucket-titles[data-v-cad91ee6]{display:flex;flex-wrap:wrap;gap:.35rem}.bucket-title[data-v-cad91ee6]{padding:.15rem .5rem;background:var(--color-background-darker);border-radius:999px;font-size:.8rem}.bucket-title--muted[data-v-cad91ee6]{color:var(--color-text-maxcontrast)}.note-card[data-v-68087d2d]{background:var(--card,#fff);border:1px solid var(--color-border,#d1d5db);border-radius:10px;padding:12px;color:var(--fg,#0f172a);display:flex;flex-direction:column;gap:10px}.note-header[data-v-68087d2d]{display:flex;align-items:center;justify-content:space-between}.title[data-v-68087d2d]{font-weight:600}.btn[data-v-68087d2d]{padding:6px 10px;border-radius:6px;border:1px solid var(--color-border,#d1d5db);background:var(--card,#fff);cursor:pointer}.field[data-v-68087d2d]{display:flex;flex-direction:column;gap:4px}.label[data-v-68087d2d]{font-size:12px;color:var(--muted)}.note[data-v-68087d2d]{width:100%;min-height:80px;border:1px solid var(--color-border,#d1d5db);border-radius:6px;padding:8px;resize:vertical}.text-card[data-v-26f50d1f]{background:var(--card, #fff);border:1px solid var(--color-border, #d1d5db);border-radius:10px;padding:12px;color:var(--fg, #0f172a);line-height:1.4}.text-card h3[data-v-26f50d1f]{margin:0 0 6px;font-size:1em}.text-card .body[data-v-26f50d1f]{margin:0;white-space:pre-wrap;font-size:.95em}.text-card .body.empty[data-v-26f50d1f]{color:var(--muted)}.notes-section[data-v-893077b2]{display:flex;flex-direction:column;gap:8px}.notes-textarea[data-v-893077b2]{width:100%;min-height:120px;padding:8px 10px;border-radius:8px;border:1px solid var(--line);background:color-mix(in oklab,var(--card),transparent 5%);color:var(--fg);resize:vertical;box-sizing:border-box;font:13px/1.4 ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.notes-textarea[data-v-893077b2]:focus{outline:2px solid color-mix(in oklab,var(--brand),transparent 60%);outline-offset:1px}.notes-textarea[data-v-893077b2]:read-only{background:color-mix(in oklab,var(--card),transparent 15%);color:var(--muted)}.notes-actions[data-v-893077b2]{display:flex;justify-content:flex-end;margin-top:4px}.targets-card[data-v-4ca3e5c0]{display:flex;flex-direction:column;gap:8px}.targets-header[data-v-4ca3e5c0]{display:flex;justify-content:space-between;align-items:center}.targets-header strong[data-v-4ca3e5c0]{font-size:14px}.targets-main[data-v-4ca3e5c0]{display:flex;flex-direction:column;gap:4px;font-size:13px}.targets-main .line[data-v-4ca3e5c0]{display:flex;flex-wrap:wrap;gap:6px}.targets-main .line.forecast[data-v-4ca3e5c0]{flex-direction:column;gap:2px}.targets-main .line .value[data-v-4ca3e5c0]{display:flex;gap:6px;align-items:center}.targets-badges[data-v-4ca3e5c0]{display:flex;flex-wrap:wrap;gap:6px}.targets-categories[data-v-4ca3e5c0]{display:flex;flex-direction:column;gap:10px;padding-top:6px;border-top:1px solid var(--line)}.category[data-v-4ca3e5c0]{display:flex;flex-direction:column;gap:6px;font-size:12px;padding:4px 0}.category .cat-top[data-v-4ca3e5c0]{display:flex;align-items:center;justify-content:space-between;gap:8px}.category .cat-label[data-v-4ca3e5c0]{display:flex;align-items:center;gap:6px;font-weight:600;color:var(--fg)}.category .cat-label .dot[data-v-4ca3e5c0]{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 10%,transparent)}.category .cat-label .name[data-v-4ca3e5c0]{color:var(--fg)}.category .cat-meta[data-v-4ca3e5c0]{display:flex;align-items:center;gap:6px;font-weight:600;color:var(--muted)}.category .cat-meta .percent[data-v-4ca3e5c0]{font-variant-numeric:tabular-nums;color:var(--fg)}.cat-progress .bar[data-v-4ca3e5c0]{position:relative;width:100%;height:8px;border-radius:999px;background:color-mix(in srgb,var(--muted) 20%,transparent);overflow:hidden}.cat-progress .bar .fill[data-v-4ca3e5c0]{height:100%;border-radius:999px;transition:width .2s ease;max-width:100%}.cat-progress .bar .today-overlay[data-v-4ca3e5c0]{position:absolute;top:-2px;height:12px;border-radius:8px;opacity:.85;border:1px solid transparent;pointer-events:none}.today-chip[data-v-4ca3e5c0]{position:absolute;top:-22px;transform:translate(-50%);padding:2px 8px;border-radius:999px;font-size:10px;font-weight:700;color:#fff;border:1px solid transparent;white-space:nowrap;box-shadow:0 2px 6px #0000001f}.today-label[data-v-4ca3e5c0]{font-size:10px;line-height:1.2}.category .cat-metrics[data-v-4ca3e5c0]{display:flex;flex-wrap:wrap;gap:6px;align-items:center;color:var(--fg)}.cat-footer[data-v-4ca3e5c0]{display:flex;justify-content:space-between;align-items:center}.hint[data-v-4ca3e5c0]{color:var(--muted);font-size:12px}.badge[data-v-4ca3e5c0]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-label[data-v-4ca3e5c0]{font-weight:600}.status-on[data-v-4ca3e5c0]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-4ca3e5c0]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-4ca3e5c0]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-4ca3e5c0]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-4ca3e5c0]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.delta[data-v-4ca3e5c0]{font-weight:600}.delta.pos[data-v-4ca3e5c0]{color:var(--pos)}.delta.neg[data-v-4ca3e5c0]{color:var(--neg)}.cat-metrics .hint[data-v-4ca3e5c0],.cat-footer .hint[data-v-4ca3e5c0]{font-size:11px}.cat-progress[data-v-4ca3e5c0]{padding:2px 0}.cat-meta .badge[data-v-4ca3e5c0]{font-size:10px}.text-card[data-v-6a33ad0d]{background:var(--card, #fff);border:1px solid var(--color-border, #d1d5db);border-radius:10px;padding:14px;color:var(--fg, #0f172a);line-height:1.5;font-size:inherit}.text-card h3[data-v-6a33ad0d]{margin:0 0 6px;font-size:1.1em}.text-card .body[data-v-6a33ad0d]{margin:0;white-space:pre-wrap}.line[data-v-6a33ad0d]{display:flex;align-items:center;gap:8px;font-size:inherit;line-height:1.4}.line+.line[data-v-6a33ad0d]{margin-top:4px}.line .label[data-v-6a33ad0d]{flex:1;color:var(--muted)}.line .value[data-v-6a33ad0d]{text-align:right;font-variant-numeric:tabular-nums;font-weight:600;font-size:inherit}.text-card.text-sm[data-v-6a33ad0d]{font-size:.9em}.text-card.text-sm h3[data-v-6a33ad0d]{font-size:1.05em}.text-card.text-md[data-v-6a33ad0d]{font-size:1em}.text-card.text-md h3[data-v-6a33ad0d]{font-size:1.1em}.text-card.text-lg[data-v-6a33ad0d]{font-size:1.15em}.text-card.text-lg h3[data-v-6a33ad0d]{font-size:1.22em}.text-card.dense[data-v-6a33ad0d]{padding:10px;line-height:1.35}.card.time-summary[data-v-a719de3e]{display:flex;flex-direction:column;gap:6px;font-size:13px;color:var(--muted);padding:14px}.today-highlight[data-v-a719de3e]{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;border-radius:10px;background:color-mix(in oklab,var(--brand, #2563eb) 14%,transparent);border:1px solid color-mix(in oklab,var(--brand, #2563eb),transparent 70%);color:var(--fg)}.today-label[data-v-a719de3e]{font-size:12px;text-transform:uppercase;letter-spacing:.04em;color:color-mix(in oklab,var(--fg),transparent 35%)}.today-value[data-v-a719de3e]{font-size:18px;font-weight:700;letter-spacing:-.02em}.today-cats[data-v-a719de3e]{display:flex;flex-wrap:wrap;gap:8px 12px;font-size:12px;color:var(--fg)}.today-cat[data-v-a719de3e]{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border-radius:8px;background:color-mix(in oklab,var(--card, #fff),transparent 6%);border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 30%)}.today-cat .dot[data-v-a719de3e]{width:9px;height:9px;border-radius:50%;box-shadow:0 0 0 1px color-mix(in oklab,var(--fg) 10%,transparent)}.today-cat .name[data-v-a719de3e]{font-weight:600}.today-cat .value[data-v-a719de3e]{color:var(--muted)}.time-summary-firstline[data-v-a719de3e]{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:12px;color:var(--fg);font-weight:600}.time-summary-firstline em[data-v-a719de3e]{font-style:italic;color:var(--fg)}.mode-pill[data-v-a719de3e]{display:inline-flex;align-items:center;padding:2px 8px;font-size:11px;font-weight:600;border-radius:999px;background:color-mix(in srgb,var(--brand) 18%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.time-summary-metrics[data-v-a719de3e]{display:grid;gap:4px;margin:0;padding:0;list-style:none}.time-summary-metrics li[data-v-a719de3e]{display:flex;flex-wrap:wrap;gap:4px;color:var(--muted)}.time-summary-metrics strong[data-v-a719de3e]{color:var(--fg);font-size:14px}.time-summary-row[data-v-a719de3e]{display:flex;flex-wrap:wrap;gap:4px;line-height:1.4;color:var(--muted)}.time-summary-row .label[data-v-a719de3e]{color:var(--fg);font-weight:600}.time-summary-row.calendars[data-v-a719de3e]{word-break:break-word}.time-summary-row .sep[data-v-a719de3e],.time-summary-row .hint[data-v-a719de3e],.time-summary-row .share[data-v-a719de3e]{color:var(--muted)}.time-summary-row.top-category[data-v-a719de3e]{align-items:center;gap:6px}.time-summary-activity[data-v-a719de3e]{margin-top:6px;padding-top:6px;border-top:1px solid var(--line);display:grid;gap:2px;font-size:12px;color:var(--muted)}.time-summary-activity__title[data-v-a719de3e]{font-weight:600;color:var(--fg)}.time-summary-activity__line[data-v-a719de3e]{display:flex;flex-wrap:wrap;gap:6px}.summary-badge[data-v-a719de3e]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-a719de3e]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-a719de3e]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-a719de3e]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-a719de3e]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-a719de3e]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}
/*$vite$:1*/`,document.head.appendChild(as);/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function $n(e){const t=Object.create(null);for(const o of e.split(","))t[o]=1;return o=>o in t}const Ve={},Do=[],Pt=()=>{},ns=()=>!1,Aa=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Tn=e=>e.startsWith("onUpdate:"),rt=Object.assign,Mn=(e,t)=>{const o=e.indexOf(t);o>-1&&e.splice(o,1)},wd=Object.prototype.hasOwnProperty,ze=(e,t)=>wd.call(e,t),De=Array.isArray,Eo=e=>Jo(e)==="[object Map]",Da=e=>Jo(e)==="[object Set]",rs=e=>Jo(e)==="[object Date]",Ne=e=>typeof e=="function",Xe=e=>typeof e=="string",Ot=e=>typeof e=="symbol",Ke=e=>e!==null&&typeof e=="object",ss=e=>(Ke(e)||Ne(e))&&Ne(e.then)&&Ne(e.catch),is=Object.prototype.toString,Jo=e=>is.call(e),xd=e=>Jo(e).slice(8,-1),ls=e=>Jo(e)==="[object Object]",An=e=>Xe(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Yo=$n(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ea=e=>{const t=Object.create(null);return o=>t[o]||(t[o]=e(o))},_d=/-(\w)/g,$t=Ea(e=>e.replace(_d,(t,o)=>o?o.toUpperCase():"")),Cd=/\B([A-Z])/g,no=Ea(e=>e.replace(Cd,"-$1").toLowerCase()),Oa=Ea(e=>e.charAt(0).toUpperCase()+e.slice(1)),Dn=Ea(e=>e?`on${Oa(e)}`:""),ro=(e,t)=>!Object.is(e,t),Na=(e,...t)=>{for(let o=0;o<e.length;o++)e[o](...t)},ds=(e,t,o,a=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:a,value:o})},La=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Sd=e=>{const t=Xe(e)?Number(e):NaN;return isNaN(t)?e:t};let cs;const Ia=()=>cs||(cs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Be(e){if(De(e)){const t={};for(let o=0;o<e.length;o++){const a=e[o],n=Xe(a)?Ad(a):Be(a);if(n)for(const r in n)t[r]=n[r]}return t}else if(Xe(e)||Ke(e))return e}const $d=/;(?![^(]*\))/g,Td=/:([^]+)/,Md=/\/\*[^]*?\*\//g;function Ad(e){const t={};return e.replace(Md,"").split($d).forEach(o=>{if(o){const a=o.split(Td);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function Te(e){let t="";if(Xe(e))t=e;else if(De(e))for(let o=0;o<e.length;o++){const a=Te(e[o]);a&&(t+=a+" ")}else if(Ke(e))for(const o in e)e[o]&&(t+=o+" ");return t.trim()}const Dd=$n("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function us(e){return!!e||e===""}function Ed(e,t){if(e.length!==t.length)return!1;let o=!0;for(let a=0;o&&a<e.length;a++)o=Ba(e[a],t[a]);return o}function Ba(e,t){if(e===t)return!0;let o=rs(e),a=rs(t);if(o||a)return o&&a?e.getTime()===t.getTime():!1;if(o=Ot(e),a=Ot(t),o||a)return e===t;if(o=De(e),a=De(t),o||a)return o&&a?Ed(e,t):!1;if(o=Ke(e),a=Ke(t),o||a){if(!o||!a)return!1;const n=Object.keys(e).length,r=Object.keys(t).length;if(n!==r)return!1;for(const i in e){const s=e.hasOwnProperty(i),d=t.hasOwnProperty(i);if(s&&!d||!s&&d||!Ba(e[i],t[i]))return!1}}return String(e)===String(t)}function Od(e,t){return e.findIndex(o=>Ba(o,t))}const fs=e=>!!(e&&e.__v_isRef===!0),D=e=>Xe(e)?e:e==null?"":De(e)||Ke(e)&&(e.toString===is||!Ne(e.toString))?fs(e)?D(e.value):JSON.stringify(e,ps,2):String(e),ps=(e,t)=>fs(t)?ps(e,t.value):Eo(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((o,[a,n],r)=>(o[En(a,r)+" =>"]=n,o),{})}:Da(t)?{[`Set(${t.size})`]:[...t.values()].map(o=>En(o))}:Ot(t)?En(t):Ke(t)&&!De(t)&&!ls(t)?String(t):t,En=(e,t="")=>{var o;return Ot(e)?`Symbol(${(o=e.description)!=null?o:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let yt;class Nd{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=yt,!t&&yt&&(this.index=(yt.scopes||(yt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].pause();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,o;if(this.scopes)for(t=0,o=this.scopes.length;t<o;t++)this.scopes[t].resume();for(t=0,o=this.effects.length;t<o;t++)this.effects[t].resume()}}run(t){if(this._active){const o=yt;try{return yt=this,t()}finally{yt=o}}}on(){++this._on===1&&(this.prevScope=yt,yt=this)}off(){this._on>0&&--this._on===0&&(yt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let o,a;for(o=0,a=this.effects.length;o<a;o++)this.effects[o].stop();for(this.effects.length=0,o=0,a=this.cleanups.length;o<a;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,a=this.scopes.length;o<a;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Ld(){return yt}let Ge;const On=new WeakSet;class gs{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,yt&&yt.active&&yt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,On.has(this)&&(On.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hs(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ws(this),vs(this);const t=Ge,o=Nt;Ge=this,Nt=!0;try{return this.fn()}finally{bs(this),Ge=t,Nt=o,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Bn(t);this.deps=this.depsTail=void 0,ws(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?On.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){In(this)&&this.run()}get dirty(){return In(this)}}let ms=0,Zo,Xo;function hs(e,t=!1){if(e.flags|=8,t){e.next=Xo,Xo=e;return}e.next=Zo,Zo=e}function Nn(){ms++}function Ln(){if(--ms>0)return;if(Xo){let t=Xo;for(Xo=void 0;t;){const o=t.next;t.next=void 0,t.flags&=-9,t=o}}let e;for(;Zo;){let t=Zo;for(Zo=void 0;t;){const o=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(a){e||(e=a)}t=o}}if(e)throw e}function vs(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function bs(e){let t,o=e.depsTail,a=o;for(;a;){const n=a.prevDep;a.version===-1?(a===o&&(o=n),Bn(a),Id(a)):t=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=n}e.deps=t,e.depsTail=o}function In(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ys(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ys(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Qo)||(e.globalVersion=Qo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!In(e))))return;e.flags|=2;const t=e.dep,o=Ge,a=Nt;Ge=e,Nt=!0;try{vs(e);const n=e.fn(e._value);(t.version===0||ro(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{Ge=o,Nt=a,bs(e),e.flags&=-3}}function Bn(e,t=!1){const{dep:o,prevSub:a,nextSub:n}=e;if(a&&(a.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=a,e.nextSub=void 0),o.subs===e&&(o.subs=a,!a&&o.computed)){o.computed.flags&=-5;for(let r=o.computed.deps;r;r=r.nextDep)Bn(r,!0)}!t&&!--o.sc&&o.map&&o.map.delete(o.key)}function Id(e){const{prevDep:t,nextDep:o}=e;t&&(t.nextDep=o,e.prevDep=void 0),o&&(o.prevDep=t,e.nextDep=void 0)}let Nt=!0;const ks=[];function Ft(){ks.push(Nt),Nt=!1}function Wt(){const e=ks.pop();Nt=e===void 0?!0:e}function ws(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const o=Ge;Ge=void 0;try{t()}finally{Ge=o}}}let Qo=0;class Bd{constructor(t,o){this.sub=t,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Pn{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Ge||!Nt||Ge===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==Ge)o=this.activeLink=new Bd(Ge,this),Ge.deps?(o.prevDep=Ge.depsTail,Ge.depsTail.nextDep=o,Ge.depsTail=o):Ge.deps=Ge.depsTail=o,xs(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const a=o.nextDep;a.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=a),o.prevDep=Ge.depsTail,o.nextDep=void 0,Ge.depsTail.nextDep=o,Ge.depsTail=o,Ge.deps===o&&(Ge.deps=a)}return o}trigger(t){this.version++,Qo++,this.notify(t)}notify(t){Nn();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{Ln()}}}function xs(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let a=t.deps;a;a=a.nextDep)xs(a)}const o=e.dep.subs;o!==e&&(e.prevSub=o,o&&(o.nextSub=e)),e.dep.subs=e}}const Pa=new WeakMap,vo=Symbol(""),Fn=Symbol(""),ea=Symbol("");function ut(e,t,o){if(Nt&&Ge){let a=Pa.get(e);a||Pa.set(e,a=new Map);let n=a.get(o);n||(a.set(o,n=new Pn),n.map=a,n.key=o),n.track()}}function qt(e,t,o,a,n,r){const i=Pa.get(e);if(!i){Qo++;return}const s=d=>{d&&d.trigger()};if(Nn(),t==="clear")i.forEach(s);else{const d=De(e),c=d&&An(o);if(d&&o==="length"){const f=Number(a);i.forEach((g,b)=>{(b==="length"||b===ea||!Ot(b)&&b>=f)&&s(g)})}else switch((o!==void 0||i.has(void 0))&&s(i.get(o)),c&&s(i.get(ea)),t){case"add":d?c&&s(i.get("length")):(s(i.get(vo)),Eo(e)&&s(i.get(Fn)));break;case"delete":d||(s(i.get(vo)),Eo(e)&&s(i.get(Fn)));break;case"set":Eo(e)&&s(i.get(vo));break}}Ln()}function Pd(e,t){const o=Pa.get(e);return o&&o.get(t)}function Oo(e){const t=We(e);return t===e?t:(ut(t,"iterate",ea),Mt(e)?t:t.map(it))}function Fa(e){return ut(e=We(e),"iterate",ea),e}const Fd={__proto__:null,[Symbol.iterator](){return Wn(this,Symbol.iterator,it)},concat(...e){return Oo(this).concat(...e.map(t=>De(t)?Oo(t):t))},entries(){return Wn(this,"entries",e=>(e[1]=it(e[1]),e))},every(e,t){return Gt(this,"every",e,t,void 0,arguments)},filter(e,t){return Gt(this,"filter",e,t,o=>o.map(it),arguments)},find(e,t){return Gt(this,"find",e,t,it,arguments)},findIndex(e,t){return Gt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Gt(this,"findLast",e,t,it,arguments)},findLastIndex(e,t){return Gt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Gt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Hn(this,"includes",e)},indexOf(...e){return Hn(this,"indexOf",e)},join(e){return Oo(this).join(e)},lastIndexOf(...e){return Hn(this,"lastIndexOf",e)},map(e,t){return Gt(this,"map",e,t,void 0,arguments)},pop(){return ta(this,"pop")},push(...e){return ta(this,"push",e)},reduce(e,...t){return _s(this,"reduce",e,t)},reduceRight(e,...t){return _s(this,"reduceRight",e,t)},shift(){return ta(this,"shift")},some(e,t){return Gt(this,"some",e,t,void 0,arguments)},splice(...e){return ta(this,"splice",e)},toReversed(){return Oo(this).toReversed()},toSorted(e){return Oo(this).toSorted(e)},toSpliced(...e){return Oo(this).toSpliced(...e)},unshift(...e){return ta(this,"unshift",e)},values(){return Wn(this,"values",it)}};function Wn(e,t,o){const a=Fa(e),n=a[t]();return a!==e&&!Mt(e)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=o(r.value)),r}),n}const Wd=Array.prototype;function Gt(e,t,o,a,n,r){const i=Fa(e),s=i!==e&&!Mt(e),d=i[t];if(d!==Wd[t]){const g=d.apply(e,r);return s?it(g):g}let c=o;i!==e&&(s?c=function(g,b){return o.call(this,it(g),b,e)}:o.length>2&&(c=function(g,b){return o.call(this,g,b,e)}));const f=d.call(i,c,a);return s&&n?n(f):f}function _s(e,t,o,a){const n=Fa(e);let r=o;return n!==e&&(Mt(e)?o.length>3&&(r=function(i,s,d){return o.call(this,i,s,d,e)}):r=function(i,s,d){return o.call(this,i,it(s),d,e)}),n[t](r,...a)}function Hn(e,t,o){const a=We(e);ut(a,"iterate",ea);const n=a[t](...o);return(n===-1||n===!1)&&zn(o[0])?(o[0]=We(o[0]),a[t](...o)):n}function ta(e,t,o=[]){Ft(),Nn();const a=We(e)[t].apply(e,o);return Ln(),Wt(),a}const Hd=$n("__proto__,__v_isRef,__isVue"),Cs=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ot));function Rd(e){Ot(e)||(e=String(e));const t=We(this);return ut(t,"has",e),t.hasOwnProperty(e)}class Ss{constructor(t=!1,o=!1){this._isReadonly=t,this._isShallow=o}get(t,o,a){if(o==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(o==="__v_isReactive")return!n;if(o==="__v_isReadonly")return n;if(o==="__v_isShallow")return r;if(o==="__v_raw")return a===(n?r?Es:Ds:r?As:Ms).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(a)?t:void 0;const i=De(t);if(!n){let d;if(i&&(d=Fd[o]))return d;if(o==="hasOwnProperty")return Rd}const s=Reflect.get(t,o,at(t)?t:a);return(Ot(o)?Cs.has(o):Hd(o))||(n||ut(t,"get",o),r)?s:at(s)?i&&An(o)?s:s.value:Ke(s)?n?Os(s):Tt(s):s}}class $s extends Ss{constructor(t=!1){super(!1,t)}set(t,o,a,n){let r=t[o];if(!this._isShallow){const d=so(r);if(!Mt(a)&&!so(a)&&(r=We(r),a=We(a)),!De(t)&&at(r)&&!at(a))return d||(r.value=a),!0}const i=De(t)&&An(o)?Number(o)<t.length:ze(t,o),s=Reflect.set(t,o,a,at(t)?t:n);return t===We(n)&&(i?ro(a,r)&&qt(t,"set",o,a):qt(t,"add",o,a)),s}deleteProperty(t,o){const a=ze(t,o);t[o];const n=Reflect.deleteProperty(t,o);return n&&a&&qt(t,"delete",o,void 0),n}has(t,o){const a=Reflect.has(t,o);return(!Ot(o)||!Cs.has(o))&&ut(t,"has",o),a}ownKeys(t){return ut(t,"iterate",De(t)?"length":vo),Reflect.ownKeys(t)}}class Ts extends Ss{constructor(t=!1){super(!0,t)}set(t,o){return!0}deleteProperty(t,o){return!0}}const zd=new $s,jd=new Ts,Ud=new $s(!0),Vd=new Ts(!0),Rn=e=>e,Wa=e=>Reflect.getPrototypeOf(e);function Kd(e,t,o){return function(...a){const n=this.__v_raw,r=We(n),i=Eo(r),s=e==="entries"||e===Symbol.iterator&&i,d=e==="keys"&&i,c=n[e](...a),f=o?Rn:t?ja:it;return!t&&ut(r,"iterate",d?Fn:vo),{next(){const{value:g,done:b}=c.next();return b?{value:g,done:b}:{value:s?[f(g[0]),f(g[1])]:f(g),done:b}},[Symbol.iterator](){return this}}}}function Ha(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function qd(e,t){const o={get(n){const r=this.__v_raw,i=We(r),s=We(n);e||(ro(n,s)&&ut(i,"get",n),ut(i,"get",s));const{has:d}=Wa(i),c=t?Rn:e?ja:it;if(d.call(i,n))return c(r.get(n));if(d.call(i,s))return c(r.get(s));r!==i&&r.get(n)},get size(){const n=this.__v_raw;return!e&&ut(We(n),"iterate",vo),n.size},has(n){const r=this.__v_raw,i=We(r),s=We(n);return e||(ro(n,s)&&ut(i,"has",n),ut(i,"has",s)),n===s?r.has(n):r.has(n)||r.has(s)},forEach(n,r){const i=this,s=i.__v_raw,d=We(s),c=t?Rn:e?ja:it;return!e&&ut(d,"iterate",vo),s.forEach((f,g)=>n.call(r,c(f),c(g),i))}};return rt(o,e?{add:Ha("add"),set:Ha("set"),delete:Ha("delete"),clear:Ha("clear")}:{add(n){!t&&!Mt(n)&&!so(n)&&(n=We(n));const r=We(this);return Wa(r).has.call(r,n)||(r.add(n),qt(r,"add",n,n)),this},set(n,r){!t&&!Mt(r)&&!so(r)&&(r=We(r));const i=We(this),{has:s,get:d}=Wa(i);let c=s.call(i,n);c||(n=We(n),c=s.call(i,n));const f=d.call(i,n);return i.set(n,r),c?ro(r,f)&&qt(i,"set",n,r):qt(i,"add",n,r),this},delete(n){const r=We(this),{has:i,get:s}=Wa(r);let d=i.call(r,n);d||(n=We(n),d=i.call(r,n)),s&&s.call(r,n);const c=r.delete(n);return d&&qt(r,"delete",n,void 0),c},clear(){const n=We(this),r=n.size!==0,i=n.clear();return r&&qt(n,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(n=>{o[n]=Kd(n,e,t)}),o}function Ra(e,t){const o=qd(e,t);return(a,n,r)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?a:Reflect.get(ze(o,n)&&n in a?o:a,n,r)}const Gd={get:Ra(!1,!1)},Jd={get:Ra(!1,!0)},Yd={get:Ra(!0,!1)},Zd={get:Ra(!0,!0)},Ms=new WeakMap,As=new WeakMap,Ds=new WeakMap,Es=new WeakMap;function Xd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Qd(e){return e.__v_skip||!Object.isExtensible(e)?0:Xd(xd(e))}function Tt(e){return so(e)?e:za(e,!1,zd,Gd,Ms)}function ec(e){return za(e,!1,Ud,Jd,As)}function Os(e){return za(e,!0,jd,Yd,Ds)}function U2(e){return za(e,!0,Vd,Zd,Es)}function za(e,t,o,a,n){if(!Ke(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=Qd(e);if(r===0)return e;const i=n.get(e);if(i)return i;const s=new Proxy(e,r===2?a:o);return n.set(e,s),s}function No(e){return so(e)?No(e.__v_raw):!!(e&&e.__v_isReactive)}function so(e){return!!(e&&e.__v_isReadonly)}function Mt(e){return!!(e&&e.__v_isShallow)}function zn(e){return e?!!e.__v_raw:!1}function We(e){const t=e&&e.__v_raw;return t?We(t):e}function tc(e){return!ze(e,"__v_skip")&&Object.isExtensible(e)&&ds(e,"__v_skip",!0),e}const it=e=>Ke(e)?Tt(e):e,ja=e=>Ke(e)?Os(e):e;function at(e){return e?e.__v_isRef===!0:!1}function Z(e){return oc(e,!1)}function oc(e,t){return at(e)?e:new ac(e,t)}class ac{constructor(t,o){this.dep=new Pn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?t:We(t),this._value=o?t:it(t),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(t){const o=this._rawValue,a=this.__v_isShallow||Mt(t)||so(t);t=a?t:We(t),ro(t,o)&&(this._rawValue=t,this._value=a?t:it(t),this.dep.trigger())}}function y(e){return at(e)?e.value:e}const nc={get:(e,t,o)=>t==="__v_raw"?e:y(Reflect.get(e,t,o)),set:(e,t,o,a)=>{const n=e[t];return at(n)&&!at(o)?(n.value=o,!0):Reflect.set(e,t,o,a)}};function Ns(e){return No(e)?e:new Proxy(e,nc)}function Ua(e){const t=De(e)?new Array(e.length):{};for(const o in e)t[o]=sc(e,o);return t}class rc{constructor(t,o,a){this._object=t,this._key=o,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Pd(We(this._object),this._key)}}function sc(e,t,o){const a=e[t];return at(a)?a:new rc(e,t,o)}class ic{constructor(t,o,a){this.fn=t,this.setter=o,this._value=void 0,this.dep=new Pn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Qo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&Ge!==this)return hs(this,!0),!0}get value(){const t=this.dep.track();return ys(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function lc(e,t,o=!1){let a,n;return Ne(e)?a=e:(a=e.get,n=e.set),new ic(a,n,o)}const Va={},Ka=new WeakMap;let bo;function dc(e,t=!1,o=bo){if(o){let a=Ka.get(o);a||Ka.set(o,a=[]),a.push(e)}}function cc(e,t,o=Ve){const{immediate:a,deep:n,once:r,scheduler:i,augmentJob:s,call:d}=o,c=v=>n?v:Mt(v)||n===!1||n===0?Jt(v,1):Jt(v);let f,g,b,p,m=!1,u=!1;if(at(e)?(g=()=>e.value,m=Mt(e)):No(e)?(g=()=>c(e),m=!0):De(e)?(u=!0,m=e.some(v=>No(v)||Mt(v)),g=()=>e.map(v=>{if(at(v))return v.value;if(No(v))return c(v);if(Ne(v))return d?d(v,2):v()})):Ne(e)?t?g=d?()=>d(e,2):e:g=()=>{if(b){Ft();try{b()}finally{Wt()}}const v=bo;bo=f;try{return d?d(e,3,[p]):e(p)}finally{bo=v}}:g=Pt,t&&n){const v=g,S=n===!0?1/0:n;g=()=>Jt(v(),S)}const x=Ld(),C=()=>{f.stop(),x&&x.active&&Mn(x.effects,f)};if(r&&t){const v=t;t=(...S)=>{v(...S),C()}}let h=u?new Array(e.length).fill(Va):Va;const k=v=>{if(!(!(f.flags&1)||!f.dirty&&!v))if(t){const S=f.run();if(n||m||(u?S.some((N,A)=>ro(N,h[A])):ro(S,h))){b&&b();const N=bo;bo=f;try{const A=[S,h===Va?void 0:u&&h[0]===Va?[]:h,p];h=S,d?d(t,3,A):t(...A)}finally{bo=N}}}else f.run()};return s&&s(k),f=new gs(g),f.scheduler=i?()=>i(k,!1):k,p=v=>dc(v,!1,f),b=f.onStop=()=>{const v=Ka.get(f);if(v){if(d)d(v,4);else for(const S of v)S();Ka.delete(f)}},t?a?k(!0):h=f.run():i?i(k.bind(null,!0),!0):f.run(),C.pause=f.pause.bind(f),C.resume=f.resume.bind(f),C.stop=C,C}function Jt(e,t=1/0,o){if(t<=0||!Ke(e)||e.__v_skip||(o=o||new Set,o.has(e)))return e;if(o.add(e),t--,at(e))Jt(e.value,t,o);else if(De(e))for(let a=0;a<e.length;a++)Jt(e[a],t,o);else if(Da(e)||Eo(e))e.forEach(a=>{Jt(a,t,o)});else if(ls(e)){for(const a in e)Jt(e[a],t,o);for(const a of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,a)&&Jt(e[a],t,o)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const oa=[];let jn=!1;function V2(e,...t){if(jn)return;jn=!0,Ft();const o=oa.length?oa[oa.length-1].component:null,a=o&&o.appContext.config.warnHandler,n=uc();if(a)Lo(a,o,11,[e+t.map(r=>{var i,s;return(s=(i=r.toString)==null?void 0:i.call(r))!=null?s:JSON.stringify(r)}).join(""),o&&o.proxy,n.map(({vnode:r})=>`at <${Hi(o,r.type)}>`).join(`
`),n]);else{const r=[`[Vue warn]: ${e}`,...t];n.length&&r.push(`
`,...fc(n)),console.warn(...r)}Wt(),jn=!1}function uc(){let e=oa[oa.length-1];if(!e)return[];const t=[];for(;e;){const o=t[0];o&&o.vnode===e?o.recurseCount++:t.push({vnode:e,recurseCount:0});const a=e.component&&e.component.parent;e=a&&a.vnode}return t}function fc(e){const t=[];return e.forEach((o,a)=>{t.push(...a===0?[]:[`
`],...pc(o))}),t}function pc({vnode:e,recurseCount:t}){const o=t>0?`... (${t} recursive calls)`:"",a=e.component?e.component.parent==null:!1,n=` at <${Hi(e.component,e.type,a)}`,r=">"+o;return e.props?[n,...gc(e.props),r]:[n+r]}function gc(e){const t=[],o=Object.keys(e);return o.slice(0,3).forEach(a=>{t.push(...Ls(a,e[a]))}),o.length>3&&t.push(" ..."),t}function Ls(e,t,o){return Xe(t)?(t=JSON.stringify(t),o?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?o?t:[`${e}=${t}`]:at(t)?(t=Ls(e,We(t.value),!0),o?t:[`${e}=Ref<`,t,">"]):Ne(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=We(t),o?t:[`${e}=`,t])}function Lo(e,t,o,a){try{return a?e(...a):e()}catch(n){aa(n,t,o)}}function Lt(e,t,o,a){if(Ne(e)){const n=Lo(e,t,o,a);return n&&ss(n)&&n.catch(r=>{aa(r,t,o)}),n}if(De(e)){const n=[];for(let r=0;r<e.length;r++)n.push(Lt(e[r],t,o,a));return n}}function aa(e,t,o,a=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||Ve;if(t){let s=t.parent;const d=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${o}`;for(;s;){const f=s.ec;if(f){for(let g=0;g<f.length;g++)if(f[g](e,d,c)===!1)return}s=s.parent}if(r){Ft(),Lo(r,null,10,[e,d,c]),Wt();return}}mc(e,o,n,a,i)}function mc(e,t,o,a=!0,n=!1){if(n)throw e;console.error(e)}const pt=[];let Ht=-1;const Io=[];let io=null,Bo=0;const Is=Promise.resolve();let qa=null;function Yt(e){const t=qa||Is;return e?t.then(this?e.bind(this):e):t}function hc(e){let t=Ht+1,o=pt.length;for(;t<o;){const a=t+o>>>1,n=pt[a],r=na(n);r<e||r===e&&n.flags&2?t=a+1:o=a}return t}function Un(e){if(!(e.flags&1)){const t=na(e),o=pt[pt.length-1];!o||!(e.flags&2)&&t>=na(o)?pt.push(e):pt.splice(hc(t),0,e),e.flags|=1,Bs()}}function Bs(){qa||(qa=Is.then(Ws))}function vc(e){De(e)?Io.push(...e):io&&e.id===-1?io.splice(Bo+1,0,e):e.flags&1||(Io.push(e),e.flags|=1),Bs()}function Ps(e,t,o=Ht+1){for(;o<pt.length;o++){const a=pt[o];if(a&&a.flags&2){if(e&&a.id!==e.uid)continue;pt.splice(o,1),o--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function Fs(e){if(Io.length){const t=[...new Set(Io)].sort((o,a)=>na(o)-na(a));if(Io.length=0,io){io.push(...t);return}for(io=t,Bo=0;Bo<io.length;Bo++){const o=io[Bo];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}io=null,Bo=0}}const na=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Ws(e){try{for(Ht=0;Ht<pt.length;Ht++){const t=pt[Ht];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Lo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ht<pt.length;Ht++){const t=pt[Ht];t&&(t.flags&=-2)}Ht=-1,pt.length=0,Fs(),qa=null,(pt.length||Io.length)&&Ws()}}let lt=null,Hs=null;function Ga(e){const t=lt;return lt=e,Hs=e&&e.type.__scopeId||null,t}function je(e,t=lt,o){if(!t||e._n)return e;const a=(...n)=>{a._d&&Ei(-1);const r=Ga(t);let i;try{i=e(...n)}finally{Ga(r),a._d&&Ei(1)}return i};return a._n=!0,a._c=!0,a._d=!0,a}function yo(e,t){if(lt===null)return e;const o=sn(lt),a=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[r,i,s,d=Ve]=t[n];r&&(Ne(r)&&(r={mounted:r,updated:r}),r.deep&&Jt(i),a.push({dir:r,instance:o,value:i,oldValue:void 0,arg:s,modifiers:d}))}return e}function ko(e,t,o,a){const n=e.dirs,r=t&&t.dirs;for(let i=0;i<n.length;i++){const s=n[i];r&&(s.oldValue=r[i].value);let d=s.dir[a];d&&(Ft(),Lt(d,o,8,[e.el,s,e,t]),Wt())}}const Rs=Symbol("_vte"),zs=e=>e.__isTeleport,ra=e=>e&&(e.disabled||e.disabled===""),js=e=>e&&(e.defer||e.defer===""),Us=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Vs=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Vn=(e,t)=>{const o=e&&e.to;return Xe(o)?t?t(o):null:o},Ks={name:"Teleport",__isTeleport:!0,process(e,t,o,a,n,r,i,s,d,c){const{mc:f,pc:g,pbc:b,o:{insert:p,querySelector:m,createText:u,createComment:x}}=c,C=ra(t.props);let{shapeFlag:h,children:k,dynamicChildren:v}=t;if(e==null){const S=t.el=u(""),N=t.anchor=u("");p(S,o,a),p(N,o,a);const A=(T,j)=>{h&16&&(n&&n.isCE&&(n.ce._teleportTarget=T),f(k,T,j,n,r,i,s,d))},$=()=>{const T=t.target=Vn(t.props,m),j=qs(T,t,u,p);T&&(i!=="svg"&&Us(T)?i="svg":i!=="mathml"&&Vs(T)&&(i="mathml"),C||(A(T,j),Ya(t,!1)))};C&&(A(o,N),Ya(t,!0)),js(t.props)?(t.el.__isMounted=!1,ht(()=>{$(),delete t.el.__isMounted},r)):$()}else{if(js(t.props)&&e.el.__isMounted===!1){ht(()=>{Ks.process(e,t,o,a,n,r,i,s,d,c)},r);return}t.el=e.el,t.targetStart=e.targetStart;const S=t.anchor=e.anchor,N=t.target=e.target,A=t.targetAnchor=e.targetAnchor,$=ra(e.props),T=$?o:N,j=$?S:A;if(i==="svg"||Us(N)?i="svg":(i==="mathml"||Vs(N))&&(i="mathml"),v?(b(e.dynamicChildren,v,T,n,r,i,s),rr(e,t,!0)):d||g(e,t,T,j,n,r,i,s,!1),C)$?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Ja(t,o,S,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const L=t.target=Vn(t.props,m);L&&Ja(t,L,null,c,0)}else $&&Ja(t,N,A,c,1);Ya(t,C)}},remove(e,t,o,{um:a,o:{remove:n}},r){const{shapeFlag:i,children:s,anchor:d,targetStart:c,targetAnchor:f,target:g,props:b}=e;if(g&&(n(c),n(f)),r&&n(d),i&16){const p=r||!ra(b);for(let m=0;m<s.length;m++){const u=s[m];a(u,t,o,p,!!u.dynamicChildren)}}},move:Ja,hydrate:bc};function Ja(e,t,o,{o:{insert:a},m:n},r=2){r===0&&a(e.targetAnchor,t,o);const{el:i,anchor:s,shapeFlag:d,children:c,props:f}=e,g=r===2;if(g&&a(i,t,o),(!g||ra(f))&&d&16)for(let b=0;b<c.length;b++)n(c[b],t,o,2);g&&a(s,t,o)}function bc(e,t,o,a,n,r,{o:{nextSibling:i,parentNode:s,querySelector:d,insert:c,createText:f}},g){const b=t.target=Vn(t.props,d);if(b){const p=ra(t.props),m=b._lpa||b.firstChild;if(t.shapeFlag&16)if(p)t.anchor=g(i(e),t,s(e),o,a,n,r),t.targetStart=m,t.targetAnchor=m&&i(m);else{t.anchor=i(e);let u=m;for(;u;){if(u&&u.nodeType===8){if(u.data==="teleport start anchor")t.targetStart=u;else if(u.data==="teleport anchor"){t.targetAnchor=u,b._lpa=t.targetAnchor&&i(t.targetAnchor);break}}u=i(u)}t.targetAnchor||qs(b,t,f,c),g(m&&i(m),t,b,o,a,n,r)}Ya(t,p)}return t.anchor&&i(t.anchor)}const yc=Ks;function Ya(e,t){const o=e.ctx;if(o&&o.ut){let a,n;for(t?(a=e.el,n=e.anchor):(a=e.targetStart,n=e.targetAnchor);a&&a!==n;)a.nodeType===1&&a.setAttribute("data-v-owner",o.uid),a=a.nextSibling;o.ut()}}function qs(e,t,o,a){const n=t.targetStart=o(""),r=t.targetAnchor=o("");return n[Rs]=r,e&&(a(n,e),a(r,e)),r}const Zt=Symbol("_leaveCb"),Za=Symbol("_enterCb");function kc(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return It(()=>{e.isMounted=!0}),Rt(()=>{e.isUnmounting=!0}),e}const At=[Function,Array],Gs={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:At,onEnter:At,onAfterEnter:At,onEnterCancelled:At,onBeforeLeave:At,onLeave:At,onAfterLeave:At,onLeaveCancelled:At,onBeforeAppear:At,onAppear:At,onAfterAppear:At,onAppearCancelled:At},Js=e=>{const t=e.subTree;return t.component?Js(t.component):t},wc={name:"BaseTransition",props:Gs,setup(e,{slots:t}){const o=nn(),a=kc();return()=>{const n=t.default&&Qs(t.default(),!0);if(!n||!n.length)return;const r=Ys(n),i=We(e),{mode:s}=i;if(a.isLeaving)return qn(r);const d=Xs(r);if(!d)return qn(r);let c=Kn(d,i,a,o,g=>c=g);d.type!==ft&&sa(d,c);let f=o.subTree&&Xs(o.subTree);if(f&&f.type!==ft&&!xo(d,f)&&Js(o).type!==ft){let g=Kn(f,i,a,o);if(sa(f,g),s==="out-in"&&d.type!==ft)return a.isLeaving=!0,g.afterLeave=()=>{a.isLeaving=!1,o.job.flags&8||o.update(),delete g.afterLeave,f=void 0},qn(r);s==="in-out"&&d.type!==ft?g.delayLeave=(b,p,m)=>{const u=Zs(a,f);u[String(f.key)]=f,b[Zt]=()=>{p(),b[Zt]=void 0,delete c.delayedLeave,f=void 0},c.delayedLeave=()=>{m(),delete c.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return r}}};function Ys(e){let t=e[0];if(e.length>1){for(const o of e)if(o.type!==ft){t=o;break}}return t}const xc=wc;function Zs(e,t){const{leavingVNodes:o}=e;let a=o.get(t.type);return a||(a=Object.create(null),o.set(t.type,a)),a}function Kn(e,t,o,a,n){const{appear:r,mode:i,persisted:s=!1,onBeforeEnter:d,onEnter:c,onAfterEnter:f,onEnterCancelled:g,onBeforeLeave:b,onLeave:p,onAfterLeave:m,onLeaveCancelled:u,onBeforeAppear:x,onAppear:C,onAfterAppear:h,onAppearCancelled:k}=t,v=String(e.key),S=Zs(o,e),N=(T,j)=>{T&&Lt(T,a,9,j)},A=(T,j)=>{const L=j[1];N(T,j),De(T)?T.every(F=>F.length<=1)&&L():T.length<=1&&L()},$={mode:i,persisted:s,beforeEnter(T){let j=d;if(!o.isMounted)if(r)j=x||d;else return;T[Zt]&&T[Zt](!0);const L=S[v];L&&xo(e,L)&&L.el[Zt]&&L.el[Zt](),N(j,[T])},enter(T){let j=c,L=f,F=g;if(!o.isMounted)if(r)j=C||c,L=h||f,F=k||g;else return;let W=!1;const B=T[Za]=E=>{W||(W=!0,E?N(F,[T]):N(L,[T]),$.delayedLeave&&$.delayedLeave(),T[Za]=void 0)};j?A(j,[T,B]):B()},leave(T,j){const L=String(e.key);if(T[Za]&&T[Za](!0),o.isUnmounting)return j();N(b,[T]);let F=!1;const W=T[Zt]=B=>{F||(F=!0,j(),B?N(u,[T]):N(m,[T]),T[Zt]=void 0,S[L]===e&&delete S[L])};S[L]=e,p?A(p,[T,W]):W()},clone(T){const j=Kn(T,t,o,a,n);return n&&n(j),j}};return $}function qn(e){if(la(e))return e=lo(e),e.children=null,e}function Xs(e){if(!la(e))return zs(e.type)&&e.children?Ys(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:o}=e;if(o){if(t&16)return o[0];if(t&32&&Ne(o.default))return o.default()}}function sa(e,t){e.shapeFlag&6&&e.component?(e.transition=t,sa(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Qs(e,t=!1,o){let a=[],n=0;for(let r=0;r<e.length;r++){let i=e[r];const s=o==null?i.key:String(o)+String(i.key!=null?i.key:r);i.type===de?(i.patchFlag&128&&n++,a=a.concat(Qs(i.children,t,s))):(t||i.type!==ft)&&a.push(s!=null?lo(i,{key:s}):i)}if(n>1)for(let r=0;r<a.length;r++)a[r].patchFlag=-2;return a}/*! #__NO_SIDE_EFFECTS__ */function Ee(e,t){return Ne(e)?rt({name:e.name},t,{setup:e}):e}function Gn(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function ia(e,t,o,a,n=!1){if(De(e)){e.forEach((m,u)=>ia(m,t&&(De(t)?t[u]:t),o,a,n));return}if(Po(a)&&!n){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&ia(e,t,o,a.component.subTree);return}const r=a.shapeFlag&4?sn(a.component):a.el,i=n?null:r,{i:s,r:d}=e,c=t&&t.r,f=s.refs===Ve?s.refs={}:s.refs,g=s.setupState,b=We(g),p=g===Ve?ns:m=>ze(b,m);if(c!=null&&c!==d){if(Xe(c))f[c]=null,p(c)&&(g[c]=null);else if(at(c)){c.value=null;const m=t;m.k&&(f[m.k]=null)}}if(Ne(d))Lo(d,s,12,[i,f]);else{const m=Xe(d),u=at(d);if(m||u){const x=()=>{if(e.f){const C=m?p(d)?g[d]:f[d]:d.value;if(n)De(C)&&Mn(C,r);else if(De(C))C.includes(r)||C.push(r);else if(m)f[d]=[r],p(d)&&(g[d]=f[d]);else{const h=[r];d.value=h,e.k&&(f[e.k]=h)}}else m?(f[d]=i,p(d)&&(g[d]=i)):u&&(d.value=i,e.k&&(f[e.k]=i))};i?(x.id=-1,ht(x,o)):x()}}}const ei=e=>e.nodeType===8;Ia().requestIdleCallback,Ia().cancelIdleCallback;function _c(e,t){if(ei(e)&&e.data==="["){let o=1,a=e.nextSibling;for(;a;){if(a.nodeType===1){if(t(a)===!1)break}else if(ei(a))if(a.data==="]"){if(--o===0)break}else a.data==="["&&o++;a=a.nextSibling}}else t(e)}const Po=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function gt(e){Ne(e)&&(e={loader:e});const{loader:t,loadingComponent:o,errorComponent:a,delay:n=200,hydrate:r,timeout:i,suspensible:s=!0,onError:d}=e;let c=null,f,g=0;const b=()=>(g++,c=null,p()),p=()=>{let m;return c||(m=c=t().catch(u=>{if(u=u instanceof Error?u:new Error(String(u)),d)return new Promise((x,C)=>{d(u,()=>x(b()),()=>C(u),g+1)});throw u}).then(u=>m!==c&&c?c:(u&&(u.__esModule||u[Symbol.toStringTag]==="Module")&&(u=u.default),f=u,u)))};return Ee({name:"AsyncComponentWrapper",__asyncLoader:p,__asyncHydrate(m,u,x){let C=!1;(u.bu||(u.bu=[])).push(()=>C=!0);const h=()=>{C||x()},k=r?()=>{const v=r(h,S=>_c(m,S));v&&(u.bum||(u.bum=[])).push(v)}:h;f?k():p().then(()=>!u.isUnmounted&&k())},get __asyncResolved(){return f},setup(){const m=dt;if(Gn(m),f)return()=>Jn(f,m);const u=k=>{c=null,aa(k,m,13,!a)};if(s&&m.suspense||Wo)return p().then(k=>()=>Jn(k,m)).catch(k=>(u(k),()=>a?Se(a,{error:k}):null));const x=Z(!1),C=Z(),h=Z(!!n);return n&&setTimeout(()=>{h.value=!1},n),i!=null&&setTimeout(()=>{if(!x.value&&!C.value){const k=new Error(`Async component timed out after ${i}ms.`);u(k),C.value=k}},i),p().then(()=>{x.value=!0,m.parent&&la(m.parent.vnode)&&m.parent.update()}).catch(k=>{u(k),C.value=k}),()=>{if(x.value&&f)return Jn(f,m);if(C.value&&a)return Se(a,{error:C.value});if(o&&!h.value)return Se(o)}}})}function Jn(e,t){const{ref:o,props:a,children:n,ce:r}=t.vnode,i=Se(e,a,n);return i.ref=o,i.ce=r,delete t.vnode.ce,i}const la=e=>e.type.__isKeepAlive;function Cc(e,t){ti(e,"a",t)}function Sc(e,t){ti(e,"da",t)}function ti(e,t,o=dt){const a=e.__wdc||(e.__wdc=()=>{let n=o;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Xa(t,a,o),o){let n=o.parent;for(;n&&n.parent;)la(n.parent.vnode)&&$c(a,t,o,n),n=n.parent}}function $c(e,t,o,a){const n=Xa(t,e,a,!0);Yn(()=>{Mn(a[t],n)},o)}function Xa(e,t,o=dt,a=!1){if(o){const n=o[e]||(o[e]=[]),r=t.__weh||(t.__weh=(...i)=>{Ft();const s=ga(o),d=Lt(t,o,e,i);return s(),Wt(),d});return a?n.unshift(r):n.push(r),r}}const Xt=e=>(t,o=dt)=>{(!Wo||e==="sp")&&Xa(e,(...a)=>t(...a),o)},Tc=Xt("bm"),It=Xt("m"),Mc=Xt("bu"),Ac=Xt("u"),Rt=Xt("bum"),Yn=Xt("um"),Dc=Xt("sp"),Ec=Xt("rtg"),Oc=Xt("rtc");function Nc(e,t=dt){Xa("ec",e,t)}const oi="components";function Lc(e,t){return ni(oi,e,!0,t)||e}const ai=Symbol.for("v-ndc");function Ic(e){return Xe(e)?ni(oi,e,!1)||e:e||ai}function ni(e,t,o=!0,a=!1){const n=lt||dt;if(n){const r=n.type;{const s=Wi(r,!1);if(s&&(s===t||s===$t(t)||s===Oa($t(t))))return r}const i=ri(n[e]||r[e],t)||ri(n.appContext[e],t);return!i&&a?r:i}}function ri(e,t){return e&&(e[t]||e[$t(t)]||e[Oa($t(t))])}function Ce(e,t,o,a){let n;const r=o,i=De(e);if(i||Xe(e)){const s=i&&No(e);let d=!1,c=!1;s&&(d=!Mt(e),c=so(e),e=Fa(e)),n=new Array(e.length);for(let f=0,g=e.length;f<g;f++)n[f]=t(d?c?ja(it(e[f])):it(e[f]):e[f],f,void 0,r)}else if(typeof e=="number"){n=new Array(e);for(let s=0;s<e;s++)n[s]=t(s+1,s,void 0,r)}else if(Ke(e))if(e[Symbol.iterator])n=Array.from(e,(s,d)=>t(s,d,void 0,r));else{const s=Object.keys(e);n=new Array(s.length);for(let d=0,c=s.length;d<c;d++){const f=s[d];n[d]=t(e[f],f,d,r)}}else n=[];return n}function Bc(e,t,o={},a,n){if(lt.ce||lt.parent&&Po(lt.parent)&&lt.parent.ce)return o.name=t,w(),Je(de,null,[Se("slot",o,a)],64);let r=e[t];r&&r._c&&(r._d=!1),w();const i=r&&si(r(o)),s=o.key||i&&i.key,d=Je(de,{key:(s&&!Ot(s)?s:`_${t}`)+(!i&&a?"_fb":"")},i||[],i&&e._===1?64:-2);return r&&r._c&&(r._d=!0),d}function si(e){return e.some(t=>pa(t)?!(t.type===ft||t.type===de&&!si(t.children)):!0)?e:null}const Zn=e=>e?Bi(e)?sn(e):Zn(e.parent):null,da=rt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Zn(e.parent),$root:e=>Zn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ci(e),$forceUpdate:e=>e.f||(e.f=()=>{Un(e.update)}),$nextTick:e=>e.n||(e.n=Yt.bind(e.proxy)),$watch:e=>nu.bind(e)}),Xn=(e,t)=>e!==Ve&&!e.__isScriptSetup&&ze(e,t),Pc={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:o,setupState:a,data:n,props:r,accessCache:i,type:s,appContext:d}=e;let c;if(t[0]!=="$"){const p=i[t];if(p!==void 0)switch(p){case 1:return a[t];case 2:return n[t];case 4:return o[t];case 3:return r[t]}else{if(Xn(a,t))return i[t]=1,a[t];if(n!==Ve&&ze(n,t))return i[t]=2,n[t];if((c=e.propsOptions[0])&&ze(c,t))return i[t]=3,r[t];if(o!==Ve&&ze(o,t))return i[t]=4,o[t];Qn&&(i[t]=0)}}const f=da[t];let g,b;if(f)return t==="$attrs"&&ut(e.attrs,"get",""),f(e);if((g=s.__cssModules)&&(g=g[t]))return g;if(o!==Ve&&ze(o,t))return i[t]=4,o[t];if(b=d.config.globalProperties,ze(b,t))return b[t]},set({_:e},t,o){const{data:a,setupState:n,ctx:r}=e;return Xn(n,t)?(n[t]=o,!0):a!==Ve&&ze(a,t)?(a[t]=o,!0):ze(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=o,!0)},has({_:{data:e,setupState:t,accessCache:o,ctx:a,appContext:n,propsOptions:r,type:i}},s){let d,c;return!!(o[s]||e!==Ve&&s[0]!=="$"&&ze(e,s)||Xn(t,s)||(d=r[0])&&ze(d,s)||ze(a,s)||ze(da,s)||ze(n.config.globalProperties,s)||(c=i.__cssModules)&&c[s])},defineProperty(e,t,o){return o.get!=null?e._.accessCache[t]=0:ze(o,"value")&&this.set(e,t,o.value,null),Reflect.defineProperty(e,t,o)}};function ii(e){return De(e)?e.reduce((t,o)=>(t[o]=null,t),{}):e}let Qn=!0;function Fc(e){const t=ci(e),o=e.proxy,a=e.ctx;Qn=!1,t.beforeCreate&&li(t.beforeCreate,e,"bc");const{data:n,computed:r,methods:i,watch:s,provide:d,inject:c,created:f,beforeMount:g,mounted:b,beforeUpdate:p,updated:m,activated:u,deactivated:x,beforeDestroy:C,beforeUnmount:h,destroyed:k,unmounted:v,render:S,renderTracked:N,renderTriggered:A,errorCaptured:$,serverPrefetch:T,expose:j,inheritAttrs:L,components:F,directives:W,filters:B}=t;if(c&&Wc(c,a,null),i)for(const R in i){const ie=i[R];Ne(ie)&&(a[R]=ie.bind(o))}if(n){const R=n.call(o,o);Ke(R)&&(e.data=Tt(R))}if(Qn=!0,r)for(const R in r){const ie=r[R],V=Ne(ie)?ie.bind(o,o):Ne(ie.get)?ie.get.bind(o,o):Pt,J=!Ne(ie)&&Ne(ie.set)?ie.set.bind(o):Pt,z=O({get:V,set:J});Object.defineProperty(a,R,{enumerable:!0,configurable:!0,get:()=>z.value,set:fe=>z.value=fe})}if(s)for(const R in s)di(s[R],a,o,R);if(d){const R=Ne(d)?d.call(o):d;Reflect.ownKeys(R).forEach(ie=>{Vc(ie,R[ie])})}f&&li(f,e,"c");function U(R,ie){De(ie)?ie.forEach(V=>R(V.bind(o))):ie&&R(ie.bind(o))}if(U(Tc,g),U(It,b),U(Mc,p),U(Ac,m),U(Cc,u),U(Sc,x),U(Nc,$),U(Oc,N),U(Ec,A),U(Rt,h),U(Yn,v),U(Dc,T),De(j))if(j.length){const R=e.exposed||(e.exposed={});j.forEach(ie=>{Object.defineProperty(R,ie,{get:()=>o[ie],set:V=>o[ie]=V,enumerable:!0})})}else e.exposed||(e.exposed={});S&&e.render===Pt&&(e.render=S),L!=null&&(e.inheritAttrs=L),F&&(e.components=F),W&&(e.directives=W),T&&Gn(e)}function Wc(e,t,o=Pt){De(e)&&(e=er(e));for(const a in e){const n=e[a];let r;Ke(n)?"default"in n?r=en(n.from||a,n.default,!0):r=en(n.from||a):r=en(n),at(r)?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>r.value,set:i=>r.value=i}):t[a]=r}}function li(e,t,o){Lt(De(e)?e.map(a=>a.bind(t.proxy)):e.bind(t.proxy),t,o)}function di(e,t,o,a){let n=a.includes(".")?$i(o,a):()=>o[a];if(Xe(e)){const r=t[e];Ne(r)&&Le(n,r)}else if(Ne(e))Le(n,e.bind(o));else if(Ke(e))if(De(e))e.forEach(r=>di(r,t,o,a));else{const r=Ne(e.handler)?e.handler.bind(o):t[e.handler];Ne(r)&&Le(n,r,e)}}function ci(e){const t=e.type,{mixins:o,extends:a}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:i}}=e.appContext,s=r.get(t);let d;return s?d=s:!n.length&&!o&&!a?d=t:(d={},n.length&&n.forEach(c=>Qa(d,c,i,!0)),Qa(d,t,i)),Ke(t)&&r.set(t,d),d}function Qa(e,t,o,a=!1){const{mixins:n,extends:r}=t;r&&Qa(e,r,o,!0),n&&n.forEach(i=>Qa(e,i,o,!0));for(const i in t)if(!(a&&i==="expose")){const s=Hc[i]||o&&o[i];e[i]=s?s(e[i],t[i]):t[i]}return e}const Hc={data:ui,props:fi,emits:fi,methods:ca,computed:ca,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:ca,directives:ca,watch:zc,provide:ui,inject:Rc};function ui(e,t){return t?e?function(){return rt(Ne(e)?e.call(this,this):e,Ne(t)?t.call(this,this):t)}:t:e}function Rc(e,t){return ca(er(e),er(t))}function er(e){if(De(e)){const t={};for(let o=0;o<e.length;o++)t[e[o]]=e[o];return t}return e}function mt(e,t){return e?[...new Set([].concat(e,t))]:t}function ca(e,t){return e?rt(Object.create(null),e,t):t}function fi(e,t){return e?De(e)&&De(t)?[...new Set([...e,...t])]:rt(Object.create(null),ii(e),ii(t??{})):t}function zc(e,t){if(!e)return t;if(!t)return e;const o=rt(Object.create(null),e);for(const a in t)o[a]=mt(e[a],t[a]);return o}function pi(){return{app:null,config:{isNativeTag:ns,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jc=0;function Uc(e,t){return function(a,n=null){Ne(a)||(a=rt({},a)),n!=null&&!Ke(n)&&(n=null);const r=pi(),i=new WeakSet,s=[];let d=!1;const c=r.app={_uid:jc++,_component:a,_props:n,_container:null,_context:r,_instance:null,version:Su,get config(){return r.config},set config(f){},use(f,...g){return i.has(f)||(f&&Ne(f.install)?(i.add(f),f.install(c,...g)):Ne(f)&&(i.add(f),f(c,...g))),c},mixin(f){return r.mixins.includes(f)||r.mixins.push(f),c},component(f,g){return g?(r.components[f]=g,c):r.components[f]},directive(f,g){return g?(r.directives[f]=g,c):r.directives[f]},mount(f,g,b){if(!d){const p=c._ceVNode||Se(a,n);return p.appContext=r,b===!0?b="svg":b===!1&&(b=void 0),e(p,f,b),d=!0,c._container=f,f.__vue_app__=c,sn(p.component)}},onUnmount(f){s.push(f)},unmount(){d&&(Lt(s,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(f,g){return r.provides[f]=g,c},runWithContext(f){const g=Fo;Fo=c;try{return f()}finally{Fo=g}}};return c}}let Fo=null;function Vc(e,t){if(dt){let o=dt.provides;const a=dt.parent&&dt.parent.provides;a===o&&(o=dt.provides=Object.create(a)),o[e]=t}}function en(e,t,o=!1){const a=nn();if(a||Fo){let n=Fo?Fo._context.provides:a?a.parent==null||a.ce?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return o&&Ne(t)?t.call(a&&a.proxy):t}}const gi={},mi=()=>Object.create(gi),hi=e=>Object.getPrototypeOf(e)===gi;function Kc(e,t,o,a=!1){const n={},r=mi();e.propsDefaults=Object.create(null),vi(e,t,n,r);for(const i in e.propsOptions[0])i in n||(n[i]=void 0);o?e.props=a?n:ec(n):e.type.props?e.props=n:e.props=r,e.attrs=r}function qc(e,t,o,a){const{props:n,attrs:r,vnode:{patchFlag:i}}=e,s=We(n),[d]=e.propsOptions;let c=!1;if((a||i>0)&&!(i&16)){if(i&8){const f=e.vnode.dynamicProps;for(let g=0;g<f.length;g++){let b=f[g];if(tn(e.emitsOptions,b))continue;const p=t[b];if(d)if(ze(r,b))p!==r[b]&&(r[b]=p,c=!0);else{const m=$t(b);n[m]=tr(d,s,m,p,e,!1)}else p!==r[b]&&(r[b]=p,c=!0)}}}else{vi(e,t,n,r)&&(c=!0);let f;for(const g in s)(!t||!ze(t,g)&&((f=no(g))===g||!ze(t,f)))&&(d?o&&(o[g]!==void 0||o[f]!==void 0)&&(n[g]=tr(d,s,g,void 0,e,!0)):delete n[g]);if(r!==s)for(const g in r)(!t||!ze(t,g))&&(delete r[g],c=!0)}c&&qt(e.attrs,"set","")}function vi(e,t,o,a){const[n,r]=e.propsOptions;let i=!1,s;if(t)for(let d in t){if(Yo(d))continue;const c=t[d];let f;n&&ze(n,f=$t(d))?!r||!r.includes(f)?o[f]=c:(s||(s={}))[f]=c:tn(e.emitsOptions,d)||(!(d in a)||c!==a[d])&&(a[d]=c,i=!0)}if(r){const d=We(o),c=s||Ve;for(let f=0;f<r.length;f++){const g=r[f];o[g]=tr(n,d,g,c[g],e,!ze(c,g))}}return i}function tr(e,t,o,a,n,r){const i=e[o];if(i!=null){const s=ze(i,"default");if(s&&a===void 0){const d=i.default;if(i.type!==Function&&!i.skipFactory&&Ne(d)){const{propsDefaults:c}=n;if(o in c)a=c[o];else{const f=ga(n);a=c[o]=d.call(null,t),f()}}else a=d;n.ce&&n.ce._setProp(o,a)}i[0]&&(r&&!s?a=!1:i[1]&&(a===""||a===no(o))&&(a=!0))}return a}const Gc=new WeakMap;function bi(e,t,o=!1){const a=o?Gc:t.propsCache,n=a.get(e);if(n)return n;const r=e.props,i={},s=[];let d=!1;if(!Ne(e)){const f=g=>{d=!0;const[b,p]=bi(g,t,!0);rt(i,b),p&&s.push(...p)};!o&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!r&&!d)return Ke(e)&&a.set(e,Do),Do;if(De(r))for(let f=0;f<r.length;f++){const g=$t(r[f]);yi(g)&&(i[g]=Ve)}else if(r)for(const f in r){const g=$t(f);if(yi(g)){const b=r[f],p=i[g]=De(b)||Ne(b)?{type:b}:rt({},b),m=p.type;let u=!1,x=!0;if(De(m))for(let C=0;C<m.length;++C){const h=m[C],k=Ne(h)&&h.name;if(k==="Boolean"){u=!0;break}else k==="String"&&(x=!1)}else u=Ne(m)&&m.name==="Boolean";p[0]=u,p[1]=x,(u||ze(p,"default"))&&s.push(g)}}const c=[i,s];return Ke(e)&&a.set(e,c),c}function yi(e){return e[0]!=="$"&&!Yo(e)}const or=e=>e==="_"||e==="_ctx"||e==="$stable",ar=e=>De(e)?e.map(zt):[zt(e)],Jc=(e,t,o)=>{if(t._n)return t;const a=je((...n)=>ar(t(...n)),o);return a._c=!1,a},ki=(e,t,o)=>{const a=e._ctx;for(const n in e){if(or(n))continue;const r=e[n];if(Ne(r))t[n]=Jc(n,r,a);else if(r!=null){const i=ar(r);t[n]=()=>i}}},wi=(e,t)=>{const o=ar(t);e.slots.default=()=>o},xi=(e,t,o)=>{for(const a in t)(o||!or(a))&&(e[a]=t[a])},Yc=(e,t,o)=>{const a=e.slots=mi();if(e.vnode.shapeFlag&32){const n=t._;n?(xi(a,t,o),o&&ds(a,"_",n,!0)):ki(t,a)}else t&&wi(e,t)},Zc=(e,t,o)=>{const{vnode:a,slots:n}=e;let r=!0,i=Ve;if(a.shapeFlag&32){const s=t._;s?o&&s===1?r=!1:xi(n,t,o):(r=!t.$stable,ki(t,n)),i=t}else t&&(wi(e,t),i={default:1});if(r)for(const s in n)!or(s)&&i[s]==null&&delete n[s]},ht=uu;function Xc(e){return Qc(e)}function Qc(e,t){const o=Ia();o.__VUE__=!0;const{insert:a,remove:n,patchProp:r,createElement:i,createText:s,createComment:d,setText:c,setElementText:f,parentNode:g,nextSibling:b,setScopeId:p=Pt,insertStaticContent:m}=e,u=(M,I,K,ne=null,ae=null,se=null,ge=void 0,ue=null,ce=!!I.dynamicChildren)=>{if(M===I)return;M&&!xo(M,I)&&(ne=ee(M),fe(M,ae,se,!0),M=null),I.patchFlag===-2&&(ce=!1,I.dynamicChildren=null);const{type:te,ref:$e,shapeFlag:me}=I;switch(te){case on:x(M,I,K,ne);break;case ft:C(M,I,K,ne);break;case sr:M==null&&h(I,K,ne,ge);break;case de:F(M,I,K,ne,ae,se,ge,ue,ce);break;default:me&1?S(M,I,K,ne,ae,se,ge,ue,ce):me&6?W(M,I,K,ne,ae,se,ge,ue,ce):(me&64||me&128)&&te.process(M,I,K,ne,ae,se,ge,ue,ce,we)}$e!=null&&ae?ia($e,M&&M.ref,se,I||M,!I):$e==null&&M&&M.ref!=null&&ia(M.ref,null,se,M,!0)},x=(M,I,K,ne)=>{if(M==null)a(I.el=s(I.children),K,ne);else{const ae=I.el=M.el;I.children!==M.children&&c(ae,I.children)}},C=(M,I,K,ne)=>{M==null?a(I.el=d(I.children||""),K,ne):I.el=M.el},h=(M,I,K,ne)=>{[M.el,M.anchor]=m(M.children,I,K,ne,M.el,M.anchor)},k=({el:M,anchor:I},K,ne)=>{let ae;for(;M&&M!==I;)ae=b(M),a(M,K,ne),M=ae;a(I,K,ne)},v=({el:M,anchor:I})=>{let K;for(;M&&M!==I;)K=b(M),n(M),M=K;n(I)},S=(M,I,K,ne,ae,se,ge,ue,ce)=>{I.type==="svg"?ge="svg":I.type==="math"&&(ge="mathml"),M==null?N(I,K,ne,ae,se,ge,ue,ce):T(M,I,ae,se,ge,ue,ce)},N=(M,I,K,ne,ae,se,ge,ue)=>{let ce,te;const{props:$e,shapeFlag:me,transition:pe,dirs:he}=M;if(ce=M.el=i(M.type,se,$e&&$e.is,$e),me&8?f(ce,M.children):me&16&&$(M.children,ce,null,ne,ae,nr(M,se),ge,ue),he&&ko(M,null,ne,"created"),A(ce,M,M.scopeId,ge,ne),$e){for(const be in $e)be!=="value"&&!Yo(be)&&r(ce,be,null,$e[be],se,ne);"value"in $e&&r(ce,"value",null,$e.value,se),(te=$e.onVnodeBeforeMount)&&jt(te,ne,M)}he&&ko(M,null,ne,"beforeMount");const ke=eu(ae,pe);ke&&pe.beforeEnter(ce),a(ce,I,K),((te=$e&&$e.onVnodeMounted)||ke||he)&&ht(()=>{te&&jt(te,ne,M),ke&&pe.enter(ce),he&&ko(M,null,ne,"mounted")},ae)},A=(M,I,K,ne,ae)=>{if(K&&p(M,K),ne)for(let se=0;se<ne.length;se++)p(M,ne[se]);if(ae){let se=ae.subTree;if(I===se||Di(se.type)&&(se.ssContent===I||se.ssFallback===I)){const ge=ae.vnode;A(M,ge,ge.scopeId,ge.slotScopeIds,ae.parent)}}},$=(M,I,K,ne,ae,se,ge,ue,ce=0)=>{for(let te=ce;te<M.length;te++){const $e=M[te]=ue?co(M[te]):zt(M[te]);u(null,$e,I,K,ne,ae,se,ge,ue)}},T=(M,I,K,ne,ae,se,ge)=>{const ue=I.el=M.el;let{patchFlag:ce,dynamicChildren:te,dirs:$e}=I;ce|=M.patchFlag&16;const me=M.props||Ve,pe=I.props||Ve;let he;if(K&&wo(K,!1),(he=pe.onVnodeBeforeUpdate)&&jt(he,K,I,M),$e&&ko(I,M,K,"beforeUpdate"),K&&wo(K,!0),(me.innerHTML&&pe.innerHTML==null||me.textContent&&pe.textContent==null)&&f(ue,""),te?j(M.dynamicChildren,te,ue,K,ne,nr(I,ae),se):ge||ie(M,I,ue,null,K,ne,nr(I,ae),se,!1),ce>0){if(ce&16)L(ue,me,pe,K,ae);else if(ce&2&&me.class!==pe.class&&r(ue,"class",null,pe.class,ae),ce&4&&r(ue,"style",me.style,pe.style,ae),ce&8){const ke=I.dynamicProps;for(let be=0;be<ke.length;be++){const _e=ke[be],xe=me[_e],Ie=pe[_e];(Ie!==xe||_e==="value")&&r(ue,_e,xe,Ie,ae,K)}}ce&1&&M.children!==I.children&&f(ue,I.children)}else!ge&&te==null&&L(ue,me,pe,K,ae);((he=pe.onVnodeUpdated)||$e)&&ht(()=>{he&&jt(he,K,I,M),$e&&ko(I,M,K,"updated")},ne)},j=(M,I,K,ne,ae,se,ge)=>{for(let ue=0;ue<I.length;ue++){const ce=M[ue],te=I[ue],$e=ce.el&&(ce.type===de||!xo(ce,te)||ce.shapeFlag&198)?g(ce.el):K;u(ce,te,$e,null,ne,ae,se,ge,!0)}},L=(M,I,K,ne,ae)=>{if(I!==K){if(I!==Ve)for(const se in I)!Yo(se)&&!(se in K)&&r(M,se,I[se],null,ae,ne);for(const se in K){if(Yo(se))continue;const ge=K[se],ue=I[se];ge!==ue&&se!=="value"&&r(M,se,ue,ge,ae,ne)}"value"in K&&r(M,"value",I.value,K.value,ae)}},F=(M,I,K,ne,ae,se,ge,ue,ce)=>{const te=I.el=M?M.el:s(""),$e=I.anchor=M?M.anchor:s("");let{patchFlag:me,dynamicChildren:pe,slotScopeIds:he}=I;he&&(ue=ue?ue.concat(he):he),M==null?(a(te,K,ne),a($e,K,ne),$(I.children||[],K,$e,ae,se,ge,ue,ce)):me>0&&me&64&&pe&&M.dynamicChildren?(j(M.dynamicChildren,pe,K,ae,se,ge,ue),(I.key!=null||ae&&I===ae.subTree)&&rr(M,I,!0)):ie(M,I,K,$e,ae,se,ge,ue,ce)},W=(M,I,K,ne,ae,se,ge,ue,ce)=>{I.slotScopeIds=ue,M==null?I.shapeFlag&512?ae.ctx.activate(I,K,ne,ge,ce):B(I,K,ne,ae,se,ge,ce):E(M,I,ce)},B=(M,I,K,ne,ae,se,ge)=>{const ue=M.component=vu(M,ne,ae);if(la(M)&&(ue.ctx.renderer=we),bu(ue,!1,ge),ue.asyncDep){if(ae&&ae.registerDep(ue,U,ge),!M.el){const ce=ue.subTree=Se(ft);C(null,ce,I,K),M.placeholder=ce.el}}else U(ue,M,I,K,ae,se,ge)},E=(M,I,K)=>{const ne=I.component=M.component;if(du(M,I,K))if(ne.asyncDep&&!ne.asyncResolved){R(ne,I,K);return}else ne.next=I,ne.update();else I.el=M.el,ne.vnode=I},U=(M,I,K,ne,ae,se,ge)=>{const ue=()=>{if(M.isMounted){let{next:me,bu:pe,u:he,parent:ke,vnode:be}=M;{const Fe=_i(M);if(Fe){me&&(me.el=be.el,R(M,me,ge)),Fe.asyncDep.then(()=>{M.isUnmounted||ue()});return}}let _e=me,xe;wo(M,!1),me?(me.el=be.el,R(M,me,ge)):me=be,pe&&Na(pe),(xe=me.props&&me.props.onVnodeBeforeUpdate)&&jt(xe,ke,me,be),wo(M,!0);const Ie=Mi(M),Pe=M.subTree;M.subTree=Ie,u(Pe,Ie,g(Pe.el),ee(Pe),M,ae,se),me.el=Ie.el,_e===null&&cu(M,Ie.el),he&&ht(he,ae),(xe=me.props&&me.props.onVnodeUpdated)&&ht(()=>jt(xe,ke,me,be),ae)}else{let me;const{el:pe,props:he}=I,{bm:ke,m:be,parent:_e,root:xe,type:Ie}=M,Pe=Po(I);wo(M,!1),ke&&Na(ke),!Pe&&(me=he&&he.onVnodeBeforeMount)&&jt(me,_e,I),wo(M,!0);{xe.ce&&xe.ce._def.shadowRoot!==!1&&xe.ce._injectChildStyle(Ie);const Fe=M.subTree=Mi(M);u(null,Fe,K,ne,M,ae,se),I.el=Fe.el}if(be&&ht(be,ae),!Pe&&(me=he&&he.onVnodeMounted)){const Fe=I;ht(()=>jt(me,_e,Fe),ae)}(I.shapeFlag&256||_e&&Po(_e.vnode)&&_e.vnode.shapeFlag&256)&&M.a&&ht(M.a,ae),M.isMounted=!0,I=K=ne=null}};M.scope.on();const ce=M.effect=new gs(ue);M.scope.off();const te=M.update=ce.run.bind(ce),$e=M.job=ce.runIfDirty.bind(ce);$e.i=M,$e.id=M.uid,ce.scheduler=()=>Un($e),wo(M,!0),te()},R=(M,I,K)=>{I.component=M;const ne=M.vnode.props;M.vnode=I,M.next=null,qc(M,I.props,ne,K),Zc(M,I.children,K),Ft(),Ps(M),Wt()},ie=(M,I,K,ne,ae,se,ge,ue,ce=!1)=>{const te=M&&M.children,$e=M?M.shapeFlag:0,me=I.children,{patchFlag:pe,shapeFlag:he}=I;if(pe>0){if(pe&128){J(te,me,K,ne,ae,se,ge,ue,ce);return}else if(pe&256){V(te,me,K,ne,ae,se,ge,ue,ce);return}}he&8?($e&16&&oe(te,ae,se),me!==te&&f(K,me)):$e&16?he&16?J(te,me,K,ne,ae,se,ge,ue,ce):oe(te,ae,se,!0):($e&8&&f(K,""),he&16&&$(me,K,ne,ae,se,ge,ue,ce))},V=(M,I,K,ne,ae,se,ge,ue,ce)=>{M=M||Do,I=I||Do;const te=M.length,$e=I.length,me=Math.min(te,$e);let pe;for(pe=0;pe<me;pe++){const he=I[pe]=ce?co(I[pe]):zt(I[pe]);u(M[pe],he,K,null,ae,se,ge,ue,ce)}te>$e?oe(M,ae,se,!0,!1,me):$(I,K,ne,ae,se,ge,ue,ce,me)},J=(M,I,K,ne,ae,se,ge,ue,ce)=>{let te=0;const $e=I.length;let me=M.length-1,pe=$e-1;for(;te<=me&&te<=pe;){const he=M[te],ke=I[te]=ce?co(I[te]):zt(I[te]);if(xo(he,ke))u(he,ke,K,null,ae,se,ge,ue,ce);else break;te++}for(;te<=me&&te<=pe;){const he=M[me],ke=I[pe]=ce?co(I[pe]):zt(I[pe]);if(xo(he,ke))u(he,ke,K,null,ae,se,ge,ue,ce);else break;me--,pe--}if(te>me){if(te<=pe){const he=pe+1,ke=he<$e?I[he].el:ne;for(;te<=pe;)u(null,I[te]=ce?co(I[te]):zt(I[te]),K,ke,ae,se,ge,ue,ce),te++}}else if(te>pe)for(;te<=me;)fe(M[te],ae,se,!0),te++;else{const he=te,ke=te,be=new Map;for(te=ke;te<=pe;te++){const Oe=I[te]=ce?co(I[te]):zt(I[te]);Oe.key!=null&&be.set(Oe.key,te)}let _e,xe=0;const Ie=pe-ke+1;let Pe=!1,Fe=0;const Ze=new Array(Ie);for(te=0;te<Ie;te++)Ze[te]=0;for(te=he;te<=me;te++){const Oe=M[te];if(xe>=Ie){fe(Oe,ae,se,!0);continue}let Re;if(Oe.key!=null)Re=be.get(Oe.key);else for(_e=ke;_e<=pe;_e++)if(Ze[_e-ke]===0&&xo(Oe,I[_e])){Re=_e;break}Re===void 0?fe(Oe,ae,se,!0):(Ze[Re-ke]=te+1,Re>=Fe?Fe=Re:Pe=!0,u(Oe,I[Re],K,null,ae,se,ge,ue,ce),xe++)}const Ue=Pe?tu(Ze):Do;for(_e=Ue.length-1,te=Ie-1;te>=0;te--){const Oe=ke+te,Re=I[Oe],go=I[Oe+1],Mo=Oe+1<$e?go.el||go.placeholder:ne;Ze[te]===0?u(null,Re,K,Mo,ae,se,ge,ue,ce):Pe&&(_e<0||te!==Ue[_e]?z(Re,K,Mo,2):_e--)}}},z=(M,I,K,ne,ae=null)=>{const{el:se,type:ge,transition:ue,children:ce,shapeFlag:te}=M;if(te&6){z(M.component.subTree,I,K,ne);return}if(te&128){M.suspense.move(I,K,ne);return}if(te&64){ge.move(M,I,K,we);return}if(ge===de){a(se,I,K);for(let me=0;me<ce.length;me++)z(ce[me],I,K,ne);a(M.anchor,I,K);return}if(ge===sr){k(M,I,K);return}if(ne!==2&&te&1&&ue)if(ne===0)ue.beforeEnter(se),a(se,I,K),ht(()=>ue.enter(se),ae);else{const{leave:me,delayLeave:pe,afterLeave:he}=ue,ke=()=>{M.ctx.isUnmounted?n(se):a(se,I,K)},be=()=>{se._isLeaving&&se[Zt](!0),me(se,()=>{ke(),he&&he()})};pe?pe(se,ke,be):be()}else a(se,I,K)},fe=(M,I,K,ne=!1,ae=!1)=>{const{type:se,props:ge,ref:ue,children:ce,dynamicChildren:te,shapeFlag:$e,patchFlag:me,dirs:pe,cacheIndex:he}=M;if(me===-2&&(ae=!1),ue!=null&&(Ft(),ia(ue,null,K,M,!0),Wt()),he!=null&&(I.renderCache[he]=void 0),$e&256){I.ctx.deactivate(M);return}const ke=$e&1&&pe,be=!Po(M);let _e;if(be&&(_e=ge&&ge.onVnodeBeforeUnmount)&&jt(_e,I,M),$e&6)H(M.component,K,ne);else{if($e&128){M.suspense.unmount(K,ne);return}ke&&ko(M,null,I,"beforeUnmount"),$e&64?M.type.remove(M,I,K,we,ne):te&&!te.hasOnce&&(se!==de||me>0&&me&64)?oe(te,I,K,!1,!0):(se===de&&me&384||!ae&&$e&16)&&oe(ce,I,K),ne&&G(M)}(be&&(_e=ge&&ge.onVnodeUnmounted)||ke)&&ht(()=>{_e&&jt(_e,I,M),ke&&ko(M,null,I,"unmounted")},K)},G=M=>{const{type:I,el:K,anchor:ne,transition:ae}=M;if(I===de){P(K,ne);return}if(I===sr){v(M);return}const se=()=>{n(K),ae&&!ae.persisted&&ae.afterLeave&&ae.afterLeave()};if(M.shapeFlag&1&&ae&&!ae.persisted){const{leave:ge,delayLeave:ue}=ae,ce=()=>ge(K,se);ue?ue(M.el,se,ce):ce()}else se()},P=(M,I)=>{let K;for(;M!==I;)K=b(M),n(M),M=K;n(I)},H=(M,I,K)=>{const{bum:ne,scope:ae,job:se,subTree:ge,um:ue,m:ce,a:te}=M;Ci(ce),Ci(te),ne&&Na(ne),ae.stop(),se&&(se.flags|=8,fe(ge,M,I,K)),ue&&ht(ue,I),ht(()=>{M.isUnmounted=!0},I)},oe=(M,I,K,ne=!1,ae=!1,se=0)=>{for(let ge=se;ge<M.length;ge++)fe(M[ge],I,K,ne,ae)},ee=M=>{if(M.shapeFlag&6)return ee(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const I=b(M.anchor||M.el),K=I&&I[Rs];return K?b(K):I};let X=!1;const le=(M,I,K)=>{M==null?I._vnode&&fe(I._vnode,null,null,!0):u(I._vnode||null,M,I,null,null,null,K),I._vnode=M,X||(X=!0,Ps(),Fs(),X=!1)},we={p:u,um:fe,m:z,r:G,mt:B,mc:$,pc:ie,pbc:j,n:ee,o:e};return{render:le,hydrate:void 0,createApp:Uc(le)}}function nr({type:e,props:t},o){return o==="svg"&&e==="foreignObject"||o==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:o}function wo({effect:e,job:t},o){o?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function eu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function rr(e,t,o=!1){const a=e.children,n=t.children;if(De(a)&&De(n))for(let r=0;r<a.length;r++){const i=a[r];let s=n[r];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=n[r]=co(n[r]),s.el=i.el),!o&&s.patchFlag!==-2&&rr(i,s)),s.type===on&&s.patchFlag!==-1&&(s.el=i.el),s.type===ft&&!s.el&&(s.el=i.el)}}function tu(e){const t=e.slice(),o=[0];let a,n,r,i,s;const d=e.length;for(a=0;a<d;a++){const c=e[a];if(c!==0){if(n=o[o.length-1],e[n]<c){t[a]=n,o.push(a);continue}for(r=0,i=o.length-1;r<i;)s=r+i>>1,e[o[s]]<c?r=s+1:i=s;c<e[o[r]]&&(r>0&&(t[a]=o[r-1]),o[r]=a)}}for(r=o.length,i=o[r-1];r-- >0;)o[r]=i,i=t[i];return o}function _i(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_i(t)}function Ci(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ou=Symbol.for("v-scx"),au=()=>en(ou);function Le(e,t,o){return Si(e,t,o)}function Si(e,t,o=Ve){const{immediate:a,deep:n,flush:r,once:i}=o,s=rt({},o),d=t&&a||!t&&r!=="post";let c;if(Wo){if(r==="sync"){const p=au();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!d){const p=()=>{};return p.stop=Pt,p.resume=Pt,p.pause=Pt,p}}const f=dt;s.call=(p,m,u)=>Lt(p,f,m,u);let g=!1;r==="post"?s.scheduler=p=>{ht(p,f&&f.suspense)}:r!=="sync"&&(g=!0,s.scheduler=(p,m)=>{m?p():Un(p)}),s.augmentJob=p=>{t&&(p.flags|=4),g&&(p.flags|=2,f&&(p.id=f.uid,p.i=f))};const b=cc(e,t,s);return Wo&&(c?c.push(b):d&&b()),b}function nu(e,t,o){const a=this.proxy,n=Xe(e)?e.includes(".")?$i(a,e):()=>a[e]:e.bind(a,a);let r;Ne(t)?r=t:(r=t.handler,o=t);const i=ga(this),s=Si(n,r.bind(a),o);return i(),s}function $i(e,t){const o=t.split(".");return()=>{let a=e;for(let n=0;n<o.length&&a;n++)a=a[o[n]];return a}}const ru=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${$t(t)}Modifiers`]||e[`${no(t)}Modifiers`];function su(e,t,...o){if(e.isUnmounted)return;const a=e.vnode.props||Ve;let n=o;const r=t.startsWith("update:"),i=r&&ru(a,t.slice(7));i&&(i.trim&&(n=o.map(f=>Xe(f)?f.trim():f)),i.number&&(n=o.map(La)));let s,d=a[s=Dn(t)]||a[s=Dn($t(t))];!d&&r&&(d=a[s=Dn(no(t))]),d&&Lt(d,e,6,n);const c=a[s+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Lt(c,e,6,n)}}function Ti(e,t,o=!1){const a=t.emitsCache,n=a.get(e);if(n!==void 0)return n;const r=e.emits;let i={},s=!1;if(!Ne(e)){const d=c=>{const f=Ti(c,t,!0);f&&(s=!0,rt(i,f))};!o&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}return!r&&!s?(Ke(e)&&a.set(e,null),null):(De(r)?r.forEach(d=>i[d]=null):rt(i,r),Ke(e)&&a.set(e,i),i)}function tn(e,t){return!e||!Aa(t)?!1:(t=t.slice(2).replace(/Once$/,""),ze(e,t[0].toLowerCase()+t.slice(1))||ze(e,no(t))||ze(e,t))}function K2(){}function Mi(e){const{type:t,vnode:o,proxy:a,withProxy:n,propsOptions:[r],slots:i,attrs:s,emit:d,render:c,renderCache:f,props:g,data:b,setupState:p,ctx:m,inheritAttrs:u}=e,x=Ga(e);let C,h;try{if(o.shapeFlag&4){const v=n||a,S=v;C=zt(c.call(S,v,f,g,p,b,m)),h=s}else{const v=t;C=zt(v.length>1?v(g,{attrs:s,slots:i,emit:d}):v(g,null)),h=t.props?s:iu(s)}}catch(v){ua.length=0,aa(v,e,1),C=Se(ft)}let k=C;if(h&&u!==!1){const v=Object.keys(h),{shapeFlag:S}=k;v.length&&S&7&&(r&&v.some(Tn)&&(h=lu(h,r)),k=lo(k,h,!1,!0))}return o.dirs&&(k=lo(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(o.dirs):o.dirs),o.transition&&sa(k,o.transition),C=k,Ga(x),C}const iu=e=>{let t;for(const o in e)(o==="class"||o==="style"||Aa(o))&&((t||(t={}))[o]=e[o]);return t},lu=(e,t)=>{const o={};for(const a in e)(!Tn(a)||!(a.slice(9)in t))&&(o[a]=e[a]);return o};function du(e,t,o){const{props:a,children:n,component:r}=e,{props:i,children:s,patchFlag:d}=t,c=r.emitsOptions;if(t.dirs||t.transition)return!0;if(o&&d>=0){if(d&1024)return!0;if(d&16)return a?Ai(a,i,c):!!i;if(d&8){const f=t.dynamicProps;for(let g=0;g<f.length;g++){const b=f[g];if(i[b]!==a[b]&&!tn(c,b))return!0}}}else return(n||s)&&(!s||!s.$stable)?!0:a===i?!1:a?i?Ai(a,i,c):!0:!!i;return!1}function Ai(e,t,o){const a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let n=0;n<a.length;n++){const r=a[n];if(t[r]!==e[r]&&!tn(o,r))return!0}return!1}function cu({vnode:e,parent:t},o){for(;t;){const a=t.subTree;if(a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el),a===e)(e=t.vnode).el=o,t=t.parent;else break}}const Di=e=>e.__isSuspense;function uu(e,t){t&&t.pendingBranch?De(e)?t.effects.push(...e):t.effects.push(e):vc(e)}const de=Symbol.for("v-fgt"),on=Symbol.for("v-txt"),ft=Symbol.for("v-cmt"),sr=Symbol.for("v-stc"),ua=[];let St=null;function w(e=!1){ua.push(St=e?null:[])}function fu(){ua.pop(),St=ua[ua.length-1]||null}let fa=1;function Ei(e,t=!1){fa+=e,e<0&&St&&t&&(St.hasOnce=!0)}function Oi(e){return e.dynamicChildren=fa>0?St||Do:null,fu(),fa>0&&St&&St.push(e),e}function _(e,t,o,a,n,r){return Oi(l(e,t,o,a,n,r,!0))}function Je(e,t,o,a,n){return Oi(Se(e,t,o,a,n,!0))}function pa(e){return e?e.__v_isVNode===!0:!1}function xo(e,t){return e.type===t.type&&e.key===t.key}const Ni=({key:e})=>e??null,an=({ref:e,ref_key:t,ref_for:o})=>(typeof e=="number"&&(e=""+e),e!=null?Xe(e)||at(e)||Ne(e)?{i:lt,r:e,k:t,f:!!o}:e:null);function l(e,t=null,o=null,a=0,n=null,r=e===de?0:1,i=!1,s=!1){const d={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ni(t),ref:t&&an(t),scopeId:Hs,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:a,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:lt};return s?(ir(d,o),r&128&&e.normalize(d)):o&&(d.shapeFlag|=Xe(o)?8:16),fa>0&&!i&&St&&(d.patchFlag>0||r&6)&&d.patchFlag!==32&&St.push(d),d}const Se=pu;function pu(e,t=null,o=null,a=0,n=null,r=!1){if((!e||e===ai)&&(e=ft),pa(e)){const s=lo(e,t,!0);return o&&ir(s,o),fa>0&&!r&&St&&(s.shapeFlag&6?St[St.indexOf(e)]=s:St.push(s)),s.patchFlag=-2,s}if(Cu(e)&&(e=e.__vccOpts),t){t=gu(t);let{class:s,style:d}=t;s&&!Xe(s)&&(t.class=Te(s)),Ke(d)&&(zn(d)&&!De(d)&&(d=rt({},d)),t.style=Be(d))}const i=Xe(e)?1:Di(e)?128:zs(e)?64:Ke(e)?4:Ne(e)?2:0;return l(e,t,o,a,n,i,r,!0)}function gu(e){return e?zn(e)||hi(e)?rt({},e):e:null}function lo(e,t,o=!1,a=!1){const{props:n,ref:r,patchFlag:i,children:s,transition:d}=e,c=t?Li(n||{},t):n,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Ni(c),ref:t&&t.ref?o&&r?De(r)?r.concat(an(t)):[r,an(t)]:an(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==de?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:d,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&lo(e.ssContent),ssFallback:e.ssFallback&&lo(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return d&&a&&sa(f,d.clone(f)),f}function Ae(e=" ",t=0){return Se(on,null,e,t)}function q(e="",t=!1){return t?(w(),Je(ft,null,e)):Se(ft,null,e)}function zt(e){return e==null||typeof e=="boolean"?Se(ft):De(e)?Se(de,null,e.slice()):pa(e)?co(e):Se(on,null,String(e))}function co(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:lo(e)}function ir(e,t){let o=0;const{shapeFlag:a}=e;if(t==null)t=null;else if(De(t))o=16;else if(typeof t=="object")if(a&65){const n=t.default;n&&(n._c&&(n._d=!1),ir(e,n()),n._c&&(n._d=!0));return}else{o=32;const n=t._;!n&&!hi(t)?t._ctx=lt:n===3&&lt&&(lt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ne(t)?(t={default:t,_ctx:lt},o=32):(t=String(t),a&64?(o=16,t=[Ae(t)]):o=8);e.children=t,e.shapeFlag|=o}function Li(...e){const t={};for(let o=0;o<e.length;o++){const a=e[o];for(const n in a)if(n==="class")t.class!==a.class&&(t.class=Te([t.class,a.class]));else if(n==="style")t.style=Be([t.style,a.style]);else if(Aa(n)){const r=t[n],i=a[n];i&&r!==i&&!(De(r)&&r.includes(i))&&(t[n]=r?[].concat(r,i):i)}else n!==""&&(t[n]=a[n])}return t}function jt(e,t,o,a=null){Lt(e,t,7,[o,a])}const mu=pi();let hu=0;function vu(e,t,o){const a=e.type,n=(t?t.appContext:e.appContext)||mu,r={uid:hu++,vnode:e,type:a,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Nd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bi(a,n),emitsOptions:Ti(a,n),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:a.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=su.bind(null,r),e.ce&&e.ce(r),r}let dt=null;const nn=()=>dt||lt;let rn,lr;{const e=Ia(),t=(o,a)=>{let n;return(n=e[o])||(n=e[o]=[]),n.push(a),r=>{n.length>1?n.forEach(i=>i(r)):n[0](r)}};rn=t("__VUE_INSTANCE_SETTERS__",o=>dt=o),lr=t("__VUE_SSR_SETTERS__",o=>Wo=o)}const ga=e=>{const t=dt;return rn(e),e.scope.on(),()=>{e.scope.off(),rn(t)}},Ii=()=>{dt&&dt.scope.off(),rn(null)};function Bi(e){return e.vnode.shapeFlag&4}let Wo=!1;function bu(e,t=!1,o=!1){t&&lr(t);const{props:a,children:n}=e.vnode,r=Bi(e);Kc(e,a,r,t),Yc(e,n,o||t);const i=r?yu(e,t):void 0;return t&&lr(!1),i}function yu(e,t){const o=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Pc);const{setup:a}=o;if(a){Ft();const n=e.setupContext=a.length>1?wu(e):null,r=ga(e),i=Lo(a,e,0,[e.props,n]),s=ss(i);if(Wt(),r(),(s||e.sp)&&!Po(e)&&Gn(e),s){if(i.then(Ii,Ii),t)return i.then(d=>{Pi(e,d)}).catch(d=>{aa(d,e,0)});e.asyncDep=i}else Pi(e,i)}else Fi(e)}function Pi(e,t,o){Ne(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ke(t)&&(e.setupState=Ns(t)),Fi(e)}function Fi(e,t,o){const a=e.type;e.render||(e.render=a.render||Pt);{const n=ga(e);Ft();try{Fc(e)}finally{Wt(),n()}}}const ku={get(e,t){return ut(e,"get",""),e[t]}};function wu(e){const t=o=>{e.exposed=o||{}};return{attrs:new Proxy(e.attrs,ku),slots:e.slots,emit:e.emit,expose:t}}function sn(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ns(tc(e.exposed)),{get(t,o){if(o in t)return t[o];if(o in da)return da[o](e)},has(t,o){return o in t||o in da}})):e.proxy}const xu=/(?:^|[-_])(\w)/g,_u=e=>e.replace(xu,t=>t.toUpperCase()).replace(/[-_]/g,"");function Wi(e,t=!0){return Ne(e)?e.displayName||e.name:e.name||t&&e.__name}function Hi(e,t,o=!1){let a=Wi(t);if(!a&&t.__file){const n=t.__file.match(/([^/\\]+)\.\w+$/);n&&(a=n[1])}if(!a&&e&&e.parent){const n=r=>{for(const i in r)if(r[i]===t)return i};a=n(e.components||e.parent.type.components)||n(e.appContext.components)}return a?_u(a):o?"App":"Anonymous"}function Cu(e){return Ne(e)&&"__vccOpts"in e}const O=(e,t)=>lc(e,t,Wo);function kt(e,t,o){const a=arguments.length;return a===2?Ke(t)&&!De(t)?pa(t)?Se(e,null,[t]):Se(e,t):Se(e,null,t):(a>3?o=Array.prototype.slice.call(arguments,2):a===3&&pa(o)&&(o=[o]),Se(e,t,o))}const Su="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dr;const Ri=typeof window<"u"&&window.trustedTypes;if(Ri)try{dr=Ri.createPolicy("vue",{createHTML:e=>e})}catch{}const zi=dr?e=>dr.createHTML(e):e=>e,$u="http://www.w3.org/2000/svg",Tu="http://www.w3.org/1998/Math/MathML",Qt=typeof document<"u"?document:null,ji=Qt&&Qt.createElement("template"),Mu={insert:(e,t,o)=>{t.insertBefore(e,o||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,o,a)=>{const n=t==="svg"?Qt.createElementNS($u,e):t==="mathml"?Qt.createElementNS(Tu,e):o?Qt.createElement(e,{is:o}):Qt.createElement(e);return e==="select"&&a&&a.multiple!=null&&n.setAttribute("multiple",a.multiple),n},createText:e=>Qt.createTextNode(e),createComment:e=>Qt.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Qt.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,o,a,n,r){const i=o?o.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),o),!(n===r||!(n=n.nextSibling)););else{ji.innerHTML=zi(a==="svg"?`<svg>${e}</svg>`:a==="mathml"?`<math>${e}</math>`:e);const s=ji.content;if(a==="svg"||a==="mathml"){const d=s.firstChild;for(;d.firstChild;)s.appendChild(d.firstChild);s.removeChild(d)}t.insertBefore(s,o)}return[i?i.nextSibling:t.firstChild,o?o.previousSibling:t.lastChild]}},uo="transition",ma="animation",ha=Symbol("_vtc"),Ui={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Au=rt({},Gs,Ui),Du=(e=>(e.displayName="Transition",e.props=Au,e))((e,{slots:t})=>kt(xc,Eu(e),t)),_o=(e,t=[])=>{De(e)?e.forEach(o=>o(...t)):e&&e(...t)},Vi=e=>e?De(e)?e.some(t=>t.length>1):e.length>1:!1;function Eu(e){const t={};for(const F in e)F in Ui||(t[F]=e[F]);if(e.css===!1)return t;const{name:o="v",type:a,duration:n,enterFromClass:r=`${o}-enter-from`,enterActiveClass:i=`${o}-enter-active`,enterToClass:s=`${o}-enter-to`,appearFromClass:d=r,appearActiveClass:c=i,appearToClass:f=s,leaveFromClass:g=`${o}-leave-from`,leaveActiveClass:b=`${o}-leave-active`,leaveToClass:p=`${o}-leave-to`}=e,m=Ou(n),u=m&&m[0],x=m&&m[1],{onBeforeEnter:C,onEnter:h,onEnterCancelled:k,onLeave:v,onLeaveCancelled:S,onBeforeAppear:N=C,onAppear:A=h,onAppearCancelled:$=k}=t,T=(F,W,B,E)=>{F._enterCancelled=E,Co(F,W?f:s),Co(F,W?c:i),B&&B()},j=(F,W)=>{F._isLeaving=!1,Co(F,g),Co(F,p),Co(F,b),W&&W()},L=F=>(W,B)=>{const E=F?A:h,U=()=>T(W,F,B);_o(E,[W,U]),Ki(()=>{Co(W,F?d:r),eo(W,F?f:s),Vi(E)||qi(W,a,u,U)})};return rt(t,{onBeforeEnter(F){_o(C,[F]),eo(F,r),eo(F,i)},onBeforeAppear(F){_o(N,[F]),eo(F,d),eo(F,c)},onEnter:L(!1),onAppear:L(!0),onLeave(F,W){F._isLeaving=!0;const B=()=>j(F,W);eo(F,g),F._enterCancelled?(eo(F,b),Yi()):(Yi(),eo(F,b)),Ki(()=>{F._isLeaving&&(Co(F,g),eo(F,p),Vi(v)||qi(F,a,x,B))}),_o(v,[F,B])},onEnterCancelled(F){T(F,!1,void 0,!0),_o(k,[F])},onAppearCancelled(F){T(F,!0,void 0,!0),_o($,[F])},onLeaveCancelled(F){j(F),_o(S,[F])}})}function Ou(e){if(e==null)return null;if(Ke(e))return[cr(e.enter),cr(e.leave)];{const t=cr(e);return[t,t]}}function cr(e){return Sd(e)}function eo(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.add(o)),(e[ha]||(e[ha]=new Set)).add(t)}function Co(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.remove(a));const o=e[ha];o&&(o.delete(t),o.size||(e[ha]=void 0))}function Ki(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Nu=0;function qi(e,t,o,a){const n=e._endId=++Nu,r=()=>{n===e._endId&&a()};if(o!=null)return setTimeout(r,o);const{type:i,timeout:s,propCount:d}=Lu(e,t);if(!i)return a();const c=i+"end";let f=0;const g=()=>{e.removeEventListener(c,b),r()},b=p=>{p.target===e&&++f>=d&&g()};setTimeout(()=>{f<d&&g()},s+1),e.addEventListener(c,b)}function Lu(e,t){const o=window.getComputedStyle(e),a=m=>(o[m]||"").split(", "),n=a(`${uo}Delay`),r=a(`${uo}Duration`),i=Gi(n,r),s=a(`${ma}Delay`),d=a(`${ma}Duration`),c=Gi(s,d);let f=null,g=0,b=0;t===uo?i>0&&(f=uo,g=i,b=r.length):t===ma?c>0&&(f=ma,g=c,b=d.length):(g=Math.max(i,c),f=g>0?i>c?uo:ma:null,b=f?f===uo?r.length:d.length:0);const p=f===uo&&/\b(transform|all)(,|$)/.test(a(`${uo}Property`).toString());return{type:f,timeout:g,propCount:b,hasTransform:p}}function Gi(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((o,a)=>Ji(o)+Ji(e[a])))}function Ji(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Yi(){return document.body.offsetHeight}function Iu(e,t,o){const a=e[ha];a&&(t=(t?[t,...a]:[...a]).join(" ")),t==null?e.removeAttribute("class"):o?e.setAttribute("class",t):e.className=t}const ln=Symbol("_vod"),Zi=Symbol("_vsh"),va={name:"show",beforeMount(e,{value:t},{transition:o}){e[ln]=e.style.display==="none"?"":e.style.display,o&&t?o.beforeEnter(e):ba(e,t)},mounted(e,{value:t},{transition:o}){o&&t&&o.enter(e)},updated(e,{value:t,oldValue:o},{transition:a}){!t!=!o&&(a?t?(a.beforeEnter(e),ba(e,!0),a.enter(e)):a.leave(e,()=>{ba(e,!1)}):ba(e,t))},beforeUnmount(e,{value:t}){ba(e,t)}};function ba(e,t){e.style.display=t?e[ln]:"none",e[Zi]=!t}const Bu=Symbol(""),Pu=/(^|;)\s*display\s*:/;function Fu(e,t,o){const a=e.style,n=Xe(o);let r=!1;if(o&&!n){if(t)if(Xe(t))for(const i of t.split(";")){const s=i.slice(0,i.indexOf(":")).trim();o[s]==null&&dn(a,s,"")}else for(const i in t)o[i]==null&&dn(a,i,"");for(const i in o)i==="display"&&(r=!0),dn(a,i,o[i])}else if(n){if(t!==o){const i=a[Bu];i&&(o+=";"+i),a.cssText=o,r=Pu.test(o)}}else t&&e.removeAttribute("style");ln in e&&(e[ln]=r?a.display:"",e[Zi]&&(a.display="none"))}const Xi=/\s*!important$/;function dn(e,t,o){if(De(o))o.forEach(a=>dn(e,t,a));else if(o==null&&(o=""),t.startsWith("--"))e.setProperty(t,o);else{const a=Wu(e,t);Xi.test(o)?e.setProperty(no(a),o.replace(Xi,""),"important"):e[a]=o}}const Qi=["Webkit","Moz","ms"],ur={};function Wu(e,t){const o=ur[t];if(o)return o;let a=$t(t);if(a!=="filter"&&a in e)return ur[t]=a;a=Oa(a);for(let n=0;n<Qi.length;n++){const r=Qi[n]+a;if(r in e)return ur[t]=r}return t}const el="http://www.w3.org/1999/xlink";function tl(e,t,o,a,n,r=Dd(t)){a&&t.startsWith("xlink:")?o==null?e.removeAttributeNS(el,t.slice(6,t.length)):e.setAttributeNS(el,t,o):o==null||r&&!us(o)?e.removeAttribute(t):e.setAttribute(t,r?"":Ot(o)?String(o):o)}function ol(e,t,o,a,n){if(t==="innerHTML"||t==="textContent"){o!=null&&(e[t]=t==="innerHTML"?zi(o):o);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const s=r==="OPTION"?e.getAttribute("value")||"":e.value,d=o==null?e.type==="checkbox"?"on":"":String(o);(s!==d||!("_value"in e))&&(e.value=d),o==null&&e.removeAttribute(t),e._value=o;return}let i=!1;if(o===""||o==null){const s=typeof e[t];s==="boolean"?o=us(o):o==null&&s==="string"?(o="",i=!0):s==="number"&&(o=0,i=!0)}try{e[t]=o}catch{}i&&e.removeAttribute(n||t)}function So(e,t,o,a){e.addEventListener(t,o,a)}function Hu(e,t,o,a){e.removeEventListener(t,o,a)}const al=Symbol("_vei");function Ru(e,t,o,a,n=null){const r=e[al]||(e[al]={}),i=r[t];if(a&&i)i.value=a;else{const[s,d]=zu(t);if(a){const c=r[t]=Vu(a,n);So(e,s,c,d)}else i&&(Hu(e,s,i,d),r[t]=void 0)}}const nl=/(?:Once|Passive|Capture)$/;function zu(e){let t;if(nl.test(e)){t={};let a;for(;a=e.match(nl);)e=e.slice(0,e.length-a[0].length),t[a[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):no(e.slice(2)),t]}let fr=0;const ju=Promise.resolve(),Uu=()=>fr||(ju.then(()=>fr=0),fr=Date.now());function Vu(e,t){const o=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=o.attached)return;Lt(Ku(a,o.value),t,5,[a])};return o.value=e,o.attached=Uu(),o}function Ku(e,t){if(De(t)){const o=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{o.call(e),e._stopped=!0},t.map(a=>n=>!n._stopped&&a&&a(n))}else return t}const rl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,qu=(e,t,o,a,n,r)=>{const i=n==="svg";t==="class"?Iu(e,a,i):t==="style"?Fu(e,o,a):Aa(t)?Tn(t)||Ru(e,t,o,a,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Gu(e,t,a,i))?(ol(e,t,a),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&tl(e,t,a,i,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Xe(a))?ol(e,$t(t),a,r,t):(t==="true-value"?e._trueValue=a:t==="false-value"&&(e._falseValue=a),tl(e,t,a,i))};function Gu(e,t,o,a){if(a)return!!(t==="innerHTML"||t==="textContent"||t in e&&rl(t)&&Ne(o));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return rl(t)&&Xe(o)?!1:t in e}const cn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return De(t)?o=>Na(t,o):t};function Ju(e){e.target.composing=!0}function sl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ho=Symbol("_assign"),Yu={created(e,{modifiers:{lazy:t,trim:o,number:a}},n){e[Ho]=cn(n);const r=a||n.props&&n.props.type==="number";So(e,t?"change":"input",i=>{if(i.target.composing)return;let s=e.value;o&&(s=s.trim()),r&&(s=La(s)),e[Ho](s)}),o&&So(e,"change",()=>{e.value=e.value.trim()}),t||(So(e,"compositionstart",Ju),So(e,"compositionend",sl),So(e,"change",sl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:o,modifiers:{lazy:a,trim:n,number:r}},i){if(e[Ho]=cn(i),e.composing)return;const s=(r||e.type==="number")&&!/^0\d/.test(e.value)?La(e.value):e.value,d=t??"";s!==d&&(document.activeElement===e&&e.type!=="range"&&(a&&t===o||n&&e.value.trim()===d)||(e.value=d))}},Zu={deep:!0,created(e,{value:t,modifiers:{number:o}},a){const n=Da(t);So(e,"change",()=>{const r=Array.prototype.filter.call(e.options,i=>i.selected).map(i=>o?La(un(i)):un(i));e[Ho](e.multiple?n?new Set(r):r:r[0]),e._assigning=!0,Yt(()=>{e._assigning=!1})}),e[Ho]=cn(a)},mounted(e,{value:t}){il(e,t)},beforeUpdate(e,t,o){e[Ho]=cn(o)},updated(e,{value:t}){e._assigning||il(e,t)}};function il(e,t){const o=e.multiple,a=De(t);if(!(o&&!a&&!Da(t))){for(let n=0,r=e.options.length;n<r;n++){const i=e.options[n],s=un(i);if(o)if(a){const d=typeof s;d==="string"||d==="number"?i.selected=t.some(c=>String(c)===String(s)):i.selected=Od(t,s)>-1}else i.selected=t.has(s);else if(Ba(un(i),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!o&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function un(e){return"_value"in e?e._value:e.value}const Xu=["ctrl","shift","alt","meta"],Qu={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Xu.some(o=>e[`${o}Key`]&&!t.includes(o))},ot=(e,t)=>{const o=e._withMods||(e._withMods={}),a=t.join(".");return o[a]||(o[a]=(n,...r)=>{for(let i=0;i<t.length;i++){const s=Qu[t[i]];if(s&&s(n,t))return}return e(n,...r)})},ef={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},fn=(e,t)=>{const o=e._withKeys||(e._withKeys={}),a=t.join(".");return o[a]||(o[a]=n=>{if(!("key"in n))return;const r=no(n.key);if(t.some(i=>i===r||ef[i]===r))return e(n)})},tf=rt({patchProp:qu},Mu);let ll;function of(){return ll||(ll=Xc(tf))}const af=(...e)=>{const t=of().createApp(...e),{mount:o}=t;return t.mount=a=>{const n=rf(a);if(!n)return;const r=t._component;!Ne(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const i=o(n,!1,nf(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),i},t};function nf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function rf(e){return Xe(e)?document.querySelector(e):e}const sf=Ee({name:"NcAppContent",props:{appName:{type:String,default:""},showNavigation:{type:Boolean,default:!0}},setup(e,{slots:t,attrs:o}){return()=>{const a=e.showNavigation!==!1,n={...o,class:[o.class,"app-content",a?null:"app-content--navigation-hidden"]},r={class:"app-content__navigation","aria-label":e.appName||"App navigation","aria-hidden":a?"false":"true"};return kt("div",n,[kt("aside",r,t.navigation?t.navigation():[]),kt("section",{class:"app-content__main",role:"main"},t.default?t.default():[])])}}}),lf=Ee({name:"NcAppNavigation",setup(e,{slots:t,attrs:o}){return()=>{const a={...o,class:[o.class,"app-navigation"]};"role"in a||(a.role="navigation");const n=[];return t.actions&&n.push(kt("div",{class:"app-navigation__actions"},t.actions())),t.default&&n.push(...t.default()),kt("nav",a,n)}}}),et=Ee({name:"NcButton",props:{type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t,slots:o,attrs:a}){return()=>{const n={...a,class:[a.class,"btn",e.type],disabled:e.disabled,onClick:()=>t("click")};return"type"in n||(n.type="button"),kt("button",n,o.default?o.default():[])}}}),ya=Ee({name:"NcEmptyContent",props:{name:{type:String,default:""},description:{type:String,default:""}},setup(e,{attrs:t}){return()=>kt("div",{...t,class:[t.class,"card empty"]},[kt("div",{class:"value"},e.name),kt("div",{class:"hint"},e.description)])}}),dl=Ee({name:"NcCheckboxRadioSwitch",props:{type:{type:String,default:"checkbox"},name:{type:String,default:""},checked:{type:Boolean,default:!1}},emits:["update:checked"],setup(e,{emit:t,slots:o,attrs:a}){const n=i=>{var s;return t("update:checked",!!((s=i==null?void 0:i.target)!=null&&s.checked))},r={...a,class:[a.class,"nc-checkbox-radio-switch"]};return()=>kt("label",r,[kt("input",{type:e.type,name:e.name,checked:e.checked,onInput:n}),kt("span",{},o.default?o.default():[])])}}),pr=Ee({name:"NcLoadingIcon",props:{size:{type:[String,Number],default:16}},setup(e,{attrs:t}){return()=>kt("span",{...t,class:[t.class,"nc-loading-icon"],style:`width:${e.size}px;height:${e.size}px;border:2px solid var(--line);border-top-color:var(--brand);border-radius:50%;display:inline-block;animation:spin 1s linear infinite`})}});function gr(e){if(!e)return null;const t=window.devicePixelRatio||1,o=e.getBoundingClientRect();if(o.width<2||o.height<2)return null;const a=Math.floor(o.width*t),n=Math.floor(o.height*t);e.width!==a&&(e.width=a),e.height!==n&&(e.height=n);const r=e.getContext("2d");return r?(r.setTransform(t,0,0,t,0,0),r):null}function cl(e){const t=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(e||"");return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function df(e){const o=Math.pow((c=>c<0?0:c>1?1:c)(e),.6),a=cl("#e0f2fe"),n=cl("#7c3aed");if(!a||!n)return"#7c3aed";const r=(c,f,g)=>Math.round(c+(f-c)*g),i=r(a.r,n.r,o),s=r(a.g,n.g,o),d=r(a.b,n.b,o);return`rgb(${i}, ${s}, ${d})`}const ul=Ee({__name:"PieChart",props:{data:{},colorsById:{},colorsByName:{}},setup(e){const t=e,o=Z(null);function a(){const n=t.data,r=o.value;if(!r||!n)return;const i=gr(r);if(!i)return;const s=r.clientWidth,d=r.clientHeight,c=s/2,f=d/2,g=Math.min(s,d)*.35,b=n.data||[],p=n.labels||[],m=n.ids||[],u=n.colors||[],x=[];for(let $=0;$<b.length;$++)(Number(b[$])||0)>0&&x.push($);if(i.clearRect(0,0,s,d),x.length===0)return;const C=x.map($=>Number(b[$])||0),h=x.map($=>String(p[$]||"")),k=x.map($=>String(m[$]||"")),v=x.map($=>u[$]),S=C.reduce(($,T)=>$+Math.max(0,T),0)||1;let N=-Math.PI/2;i.lineWidth=1,i.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--line").trim()||"#e5e7eb";const A=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"];C.forEach(($,T)=>{var G,P;const j=Math.max(0,$)/S,L=N+j*2*Math.PI,F=String((h==null?void 0:h[T])||""),W=String((k==null?void 0:k[T])||""),B=v[T],E=(G=t.colorsById)==null?void 0:G[W],U=(P=t.colorsByName)==null?void 0:P[F];let R=E||U||B||A[T%A.length];i.beginPath(),i.moveTo(c,f),i.arc(c,f,g,N,L),i.closePath(),i.fillStyle=R,i.fill(),i.stroke();const ie=(N+L)/2,V=c+Math.cos(ie)*(g+12),J=f+Math.sin(ie)*(g+12);i.save(),i.font="12px ui-sans-serif,system-ui",i.fillStyle="#ffffff",i.strokeStyle="rgba(0,0,0,0.55)",i.lineWidth=3,i.textAlign="center",i.textBaseline="middle";const z=Math.max(0,Number($)||0)/S*100,fe=`${h!=null&&h[T]?h[T]+" ":""}${Number($).toFixed(2)}h  ${z.toFixed(1)}%`;i.strokeText(fe,V,J),i.fillText(fe,V,J),i.restore(),N=L})}return It(()=>{a(),window.addEventListener("resize",a)}),Le(()=>t.data,()=>a(),{deep:!0}),Le(()=>t.colorsById,()=>a(),{deep:!0}),(n,r)=>(w(),_("canvas",{ref_key:"cv",ref:o,class:"chart"},null,512))}}),fl=Ee({__name:"StackedBars",props:{stacked:{},legacy:{},colorsById:{}},setup(e){const t=e,o=Z(null);function a(u,x,C,h,k){u.save(),k!=null&&k.font&&(u.font=k.font),k!=null&&k.align&&(u.textAlign=k.align),k!=null&&k.baseline&&(u.textBaseline=k.baseline),u.lineWidth=3,u.strokeStyle="rgba(0,0,0,0.55)",u.strokeText(x,C,h),u.fillStyle="#ffffff",u.fillText(x,C,h),u.restore()}function n(u){const x=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(u||"");return x?{r:parseInt(x[1],16),g:parseInt(x[2],16),b:parseInt(x[3],16)}:null}function r(u,x){const C=n(u);return C&&(.2126*C.r+.7152*C.g+.0722*C.b)/255<.55?"#ffffff":x}function i(u){const x=Math.max(0,Number(u)||0);return(Math.round(x*10)/10).toFixed(1)}function s(u,x=.5){const C=n(u);if(!C)return u;const h=Math.max(0,Math.min(1,x)),k=Math.round(C.r+(255-C.r)*h),v=Math.round(C.g+(255-C.g)*h),S=Math.round(C.b+(255-C.b)*h);return`rgb(${k},${v},${S})`}function d(u,x=.5){const C=n(u);if(!C)return u;const h=Math.max(0,Math.min(1,x)),k=Math.round(C.r*(1-h)),v=Math.round(C.g*(1-h)),S=Math.round(C.b*(1-h));return`rgb(${k},${v},${S})`}function c(u,x){const{x:C,y:h,width:k,height:v,baseColor:S,variant:N}=x,A=N==="mixed",$=Math.min(k*(A?.35:.22),6),T=Math.max(2,A?k*.45:k-$*2),j=A?C+k-T-$:C+(k-T)/2,L=s(S,A?.6:.45),F=d(S,A?.4:.35);u.save(),u.fillStyle=L,u.globalAlpha=A?.12:.16,u.fillRect(j,h,T,v),u.restore(),u.save(),u.strokeStyle=F,u.lineWidth=A?1.25:1.5,u.globalAlpha=A?.6:.75,u.setLineDash([4,4]),u.strokeRect(j,h,T,v),u.restore(),u.save(),u.strokeStyle=F,u.globalAlpha=A?.35:.45,u.lineWidth=1,u.beginPath(),u.moveTo(j,h),u.lineTo(j+T,h),u.stroke(),u.restore()}function f(){var z,fe;const u=o.value;if(!u)return;const x=gr(u);if(!x)return;const C=u.clientWidth,h=u.clientHeight,k=28,v=k*1.4,S=h-k,N=C-k,A=getComputedStyle(document.documentElement).getPropertyValue("--line").trim()||"#e5e7eb",$=getComputedStyle(document.documentElement).getPropertyValue("--fg").trim()||"#0f172a";x.clearRect(0,0,C,h),x.strokeStyle=A,x.lineWidth=1,x.beginPath(),x.moveTo(v,S),x.lineTo(N,S),x.moveTo(v,S),x.lineTo(v,k),x.stroke();const T=t.stacked;if(T&&T.labels&&T.series){let G=T.labels||[],P=T.series||[];const H=b(G,P);G=H.labels,P=H.series;const oe=G.map((se,ge)=>P.reduce((ue,ce)=>{var te;return ue+Math.max(0,Number(((te=ce.data)==null?void 0:te[ge])||0))},0)),ee=G.map((se,ge)=>P.reduce((ue,ce)=>{var te;return ue+Math.max(0,Number(((te=ce.forecast)==null?void 0:te[ge])||0))},0)),X=oe.map((se,ge)=>se+ee[ge]),le=Math.max(1,...X),we=G.length||1,He=8,M=Math.max(6,(N-v-He*(we+1))/we),I=(S-k)/le;let K=0,ne=0;G.forEach((se,ge)=>{const ue=v+He+ge*(M+He);let ce=S,te=0;P.forEach(be=>{var Pe;const _e=Math.max(0,Number(((Pe=be.data)==null?void 0:Pe[ge])||0)),xe=_e*I;ce-=xe;const Ie=t.colorsById[be.id]||be.color||"#93c5fd";if(xe>.5&&(x.fillStyle=Ie,x.fillRect(ue,ce,M,xe),xe>14&&M>22&&_e>.01)){const Fe=i(_e);x.fillStyle=r(Ie,$),x.font="11px ui-sans-serif,system-ui";const Ze=x.measureText(Fe).width;x.fillText(Fe,ue+M/2-Ze/2,ce+xe/2+4)}te+=_e});let me=ce,pe=0;P.forEach(be=>{var Pe;const _e=Math.max(0,Number(((Pe=be.forecast)==null?void 0:Pe[ge])||0));if(_e<=0)return;const xe=_e*I;if(me-=xe,pe+=_e,xe<=.5)return;const Ie=t.colorsById[be.id]||be.color||"#93c5fd";c(x,{x:ue,y:me,width:M,height:xe,baseColor:Ie,variant:te>.01?"mixed":"future"})}),K+=te,ne+=pe,x.fillStyle=$,x.font="12px ui-sans-serif,system-ui";const he=g(String(G[ge]||""));if(M>26){const be=x.measureText(he).width;x.fillText(he,ue+M/2-be/2,S+14)}const ke=pe>.01?`~${i(te+pe)}h`:te>.01?`${i(te)}h`:"";ke&&a(x,ke,ue+M/2,Math.max(k+4,me-2),{align:"center",baseline:"bottom",font:"11px ui-sans-serif,system-ui"})});const ae=ne>.01?`~${i(K+ne)}h expected`:`${i(K)}h total`;a(x,ae,N-4,k+4,{align:"right",baseline:"top",font:"12px ui-sans-serif,system-ui"});return}const j=t.legacy;if(!j)return;let L=j.data||[],F=j.labels||[];const W=b(F,[{id:"__legacy__",data:L}]);F=W.labels,L=((fe=(z=W.series)==null?void 0:z[0])==null?void 0:fe.data)||L;const B=Math.max(1,...L.map(G=>Math.max(0,G))),E=L.length||1,U=8,R=Math.max(6,(N-v-U*(E+1))/E),ie=(S-k)/B;x.fillStyle="#93c5fd",L.forEach((G,P)=>{const H=Math.max(0,G*ie),oe=v+U+P*(R+U),ee=S-H;if(x.fillRect(oe,ee,R,H),H>14&&R>22&&G>.01){const le=String((Math.round(G*100)/100).toFixed(1));x.fillStyle=r("#93c5fd",$),x.font="11px ui-sans-serif,system-ui";const we=x.measureText(le).width;x.fillText(le,oe+R/2-we/2,ee+H/2+4)}x.fillStyle=$,x.font="12px ui-sans-serif,system-ui";const X=g(String(F[P]||""));if(R>26){const le=x.measureText(X).width;x.fillText(X,oe+R/2-le/2,S+14)}if(G>.01){const le=`${(Math.round(G*100)/100).toFixed(1)}h`;a(x,le,oe+R/2,Math.max(k+4,ee-2),{align:"center",baseline:"bottom",font:"11px ui-sans-serif,system-ui"})}});const V=L.reduce((G,P)=>G+Math.max(0,Number(P)||0),0),J=`${(Math.round(V*100)/100).toFixed(1)}h total`;a(x,J,N-4,k+4,{align:"right",baseline:"top",font:"12px ui-sans-serif,system-ui"})}It(()=>{f(),window.addEventListener("resize",f)}),Le(()=>t.stacked,()=>f(),{deep:!0}),Le(()=>t.legacy,()=>f(),{deep:!0}),Le(()=>t.colorsById,()=>f(),{deep:!0});function g(u){const x=/^(\d{4})-(\d{2})-(\d{2})$/.exec(u);if(!x)return u;const C=new Date(`${x[1]}-${x[2]}-${x[3]}T00:00:00`);return["So","Mo","Di","Mi","Do","Fr","Sa"][C.getDay()]||u}function b(u,x){if(!Array.isArray(u)||u.length!==7)return{labels:u,series:x};const C=u.map($=>p($));if(C.some($=>!$))return{labels:u,series:x};const h=C.map($=>m($)),k=[1,2,3,4,5,6,7];if(h.join(",")===k.join(","))return{labels:u,series:x};const v={};if(h.forEach(($,T)=>{v[$]=T}),!k.every($=>$ in v))return{labels:u,series:x};const S=k.map($=>v[$]),N=S.map($=>u[$]),A=(x||[]).map($=>{const T=Array.isArray($.data)?$.data:[],j=Array.isArray($.forecast)?$.forecast:null,L=S.map(B=>T[B]??0),F=j?S.map(B=>j[B]??0):void 0,W={...$,data:L};return F&&(W.forecast=F),W});return{labels:N,series:A}}function p(u){const x=/^(\d{4})-(\d{2})-(\d{2})$/.exec(u);if(!x)return null;const C=new Date(`${x[1]}-${x[2]}-${x[3]}T00:00:00`);return isNaN(C.getTime())?null:C}function m(u){const x=u.getDay();return x===0?7:x}return(u,x)=>(w(),_("canvas",{ref_key:"cv",ref:o,class:"chart"},null,512))}}),cf=Ee({__name:"HeatmapCanvas",props:{hod:{}},setup(e){const t=e,o=Z(null);let a=null;function n(){var S;const r=o.value,i=t.hod;if(!r)return;if(!i){console.info("[opsdash] heatmap: no data provided");return}const s=gr(r);if(!s)return;const d=r.clientWidth,c=r.clientHeight,f=i.dows||[],g=i.hours||[],b=i.matrix||[];s.clearRect(0,0,d,c);const p=36,m=p,u=p,x=d-p,C=c-p,h=(x-m)/Math.max(1,g.length),k=(C-u)/Math.max(1,f.length),v=Math.max(0,...b.flat())||1;f.length&&g.length&&console.info("[opsdash] heatmap draw",{rows:f.length,cols:g.length,vmax:v});for(let N=0;N<f.length;N++)for(let A=0;A<g.length;A++){const T=(((S=b[N])==null?void 0:S[A])||0)/v,j=m+A*h,L=u+N*k;s.fillStyle=df(T),s.fillRect(j,L,h-1,k-1)}s.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--fg").trim()||"#0f172a",s.font="12px ui-sans-serif,system-ui",f.forEach((N,A)=>s.fillText(N,8,u+A*k+12)),g.forEach((N,A)=>{A%2===0&&s.fillText(String(N),m+A*h+2,u-6)})}return It(async()=>{await Yt(),n();try{a=new ResizeObserver(()=>n()),o.value&&a.observe(o.value)}catch{}window.addEventListener("resize",n)}),Rt(()=>{try{window.removeEventListener("resize",n)}catch{}try{a&&o.value&&a.unobserve(o.value)}catch{}a=null}),Le(()=>t.hod,()=>n(),{deep:!0}),(r,i)=>(w(),_("canvas",{ref_key:"cv",ref:o,class:"chart"},null,512))}}),uf={class:"group-row"},ff={colspan:"5"},pf={class:"group-header"},gf={class:"group-label"},mf={class:"name"},hf={key:0,class:"group-meta"},vf={class:"summary"},bf={key:0,class:"summary-percent"},yf={key:1,class:"group-meta"},kf={class:"summary"},wf={key:0},xf=["title"],_f={class:"row-name"},Cf={key:0,class:"progress"},Sf={class:"progress-chip"},$f={class:"num"},Tf={class:"num"},Mf={class:"num"},Af={class:"num"},Df={key:0,class:"hint"},Ef={key:0,class:"empty-row"},Of=Ee({__name:"ByCalendarTable",props:{rows:{},n2:{type:Function},targets:{},groups:{},todayHours:{}},setup(e){const t=e,o=O(()=>Array.isArray(t.groups)&&t.groups.length?t.groups.map(v=>({id:v.id,label:v.label,summary:v.summary??null,color:v.color,rows:(v.rows||[]).map(a)})):[{id:"__all__",label:"Calendars",summary:null,color:void 0,rows:(t.rows||[]).map(a)}]);function a(v){const S=n(v);return{...v,calendarId:S}}function n(v){return v?v.calendarId?String(v.calendarId):v.id?String(v.id):v.calendar_id?String(v.calendar_id):v.calendar?String(v.calendar):"":""}function r(v){return String(v.calendar||v.displayname||v.name||v.calendarId||"")}function i(v){return n(v)||r(v)}function s(v){const S=x(v);if(!S)return!1;const N=t.targets||{},A=Number(N[S]);return isFinite(A)&&A>0}function d(v){const S=x(v);if(!S)return 0;const N=t.targets||{},A=Number(N[S]);return isFinite(A)?A:0}function c(v){const S=d(v);return S>0?(Math.round(S*100)/100).toFixed(2):""}function f(v,S){return v-S>=0?"delta pos":"delta neg"}function g(v,S){const N=v-S,A=Math.abs(Math.round(N*100)/100).toFixed(2);return(N>=0?"+":"-")+A+"h"}function b(v,S){return Math.max(0,Math.min(100,S>0?v/S*100:0)).toFixed(0)+"%"}function p(v,S){return Math.max(0,Math.min(100,S>0?v/S*100:0))}function m(v){const S=x(v);if(!S)return 0;const N=t.todayHours||{},A=Number(N[S]??0);return Number.isFinite(A)?Math.max(0,A):0}function u(v){const S=d(n(v)),N=m(n(v));if(S<=0||N<=1e-4)return null;const A=Math.max(2,Math.min(120,N/S*100)),$=p(v.total_hours,S),T=Math.max(0,$-A);return{pct:A,left:T,text:N.toFixed(2)+"h"}}function x(v){return v==null?"":String(v)}function C(v){const S=v.summary;if(!S)return`${v.rows.length} calendar${v.rows.length===1?"":"s"}`;const N=t.n2(S.actualHours);return S.targetHours>0?`${N} h / ${t.n2(S.targetHours)} h`:`${N} h`}function h(v){const S=v.summary;return!S||S.targetHours<=0?"":`${Math.round(S.percent)}%`}function k(v){switch(v){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}return(v,S)=>(w(),_("table",null,[S[1]||(S[1]=l("colgroup",null,[l("col",{class:"col-w-42"}),l("col",{class:"col-w-12"}),l("col",{class:"col-w-14"}),l("col",{class:"col-w-14"}),l("col",{class:"col-w-18"})],-1)),S[2]||(S[2]=l("thead",null,[l("tr",null,[l("th",{class:"nowrap"},"Calendar"),l("th",{class:"num"},"Events"),l("th",{class:"num"},"Hours"),l("th",{class:"num"},"Target"),l("th",{class:"num"}," / %")])],-1)),l("tbody",null,[(w(!0),_(de,null,Ce(o.value,N=>(w(),_(de,{key:N.id},[l("tr",uf,[l("td",ff,[l("div",pf,[l("div",gf,[l("span",{class:"dot",style:Be({background:N.color||"var(--brand)"})},null,4),l("span",mf,D(N.label),1)]),N.summary?(w(),_("div",hf,[l("span",vf,D(C(N)),1),h(N)?(w(),_("span",bf,D(h(N)),1)):q("",!0),N.summary.statusLabel?(w(),_("span",{key:1,class:Te(["badge",k(N.summary.status)])},D(N.summary.statusLabel),3)):q("",!0)])):(w(),_("div",yf,[l("span",kf,[Ae(D(N.rows.length)+" calendar",1),N.rows.length!==1?(w(),_("span",wf,"s")):q("",!0)])]))])])]),(w(!0),_(de,null,Ce(N.rows,A=>(w(),_("tr",{key:i(A)},[l("td",null,[l("div",{class:"cell",title:r(A)},[l("div",_f,D(r(A)),1),s(n(A))&&d(n(A))>0?(w(),_("div",Cf,[l("div",{class:"progress-bar",style:Be({width:p(A.total_hours,d(n(A)))+"%",background:N.color||void 0})},null,4),u(A)?(w(),_("div",{key:0,class:"progress-today",style:Be({left:u(A).left+"%",width:u(A).pct+"%",background:N.color||"var(--brand)"})},[l("span",Sf,D(u(A).text),1)],4)):q("",!0)])):q("",!0)],8,xf)]),l("td",$f,D(A.events_count),1),l("td",Tf,D(v.n2(A.total_hours)),1),l("td",Mf,D(c(n(A))),1),l("td",Af,[s(n(A))?(w(),_(de,{key:0},[l("span",{class:Te(f(A.total_hours,d(n(A))))},D(g(A.total_hours,d(n(A)))),3),d(n(A))>0?(w(),_("span",Df," ("+D(b(A.total_hours,d(n(A))))+")",1)):q("",!0)],64)):(w(),_(de,{key:1},[Ae("")],64))])]))),128)),N.rows.length?q("",!0):(w(),_("tr",Ef,[...S[0]||(S[0]=[l("td",{colspan:"5",class:"empty"},"No calendars assigned",-1)])]))],64))),128))])]))}}),qe=(e,t)=>{const o=e.__vccOpts||e;for(const[a,n]of t)o[a]=n;return o},Nf=qe(Of,[["__scopeId","data-v-2efa83d5"]]),Lf={class:"mono nowrap"},If=["href"],Bf={class:"hint"},Pf={class:"num"},Ff={class:"num"},Wf=Ee({__name:"ByDayTable",props:{rows:{},n2:{type:Function},link:{type:Function}},setup(e){function t(o){const a=/^(\d{4})-(\d{2})-(\d{2})$/.exec(String(o)||"");if(!a)return"";const n=new Date(`${a[1]}-${a[2]}-${a[3]}T00:00:00Z`);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][n.getUTCDay()]||""}return(o,a)=>(w(),_("table",null,[a[0]||(a[0]=l("colgroup",null,[l("col",{class:"col-w-40"}),l("col",{class:"col-w-30"}),l("col",{class:"col-w-30"})],-1)),a[1]||(a[1]=l("thead",null,[l("tr",null,[l("th",{class:"nowrap"},"Date"),l("th",{class:"num"},"Events"),l("th",{class:"num"},"Hours")])],-1)),l("tbody",null,[(w(!0),_(de,null,Ce(o.rows,n=>(w(),_("tr",{key:n.date},[l("td",Lf,[l("a",{href:o.link(n.date),target:"_blank"},D(n.date),9,If),l("span",Bf," ("+D(t(n.date))+")",1)]),l("td",Pf,D(n.events_count),1),l("td",Ff,D(o.n2(n.total_hours)),1)]))),128))])]))}}),Hf=["onClick"],Rf=["title"],zf={class:"num"},jf={class:"mono nowrap"},Uf={class:"mono nowrap"},Vf={key:0},Kf={colspan:"5",class:"mono cell-details"},qf={key:0},Gf={key:1,class:"hint"},Jf=Ee({__name:"TopEventsTable",props:{rows:{},n2:{type:Function},detailsIndex:{}},emits:["toggle"],setup(e){return(t,o)=>(w(),_("table",null,[o[1]||(o[1]=l("colgroup",null,[l("col",{class:"col-w-22"}),l("col"),l("col",{class:"col-w-12"}),l("col",{class:"col-w-18"}),l("col",{class:"col-w-16"})],-1)),o[2]||(o[2]=l("thead",null,[l("tr",null,[l("th",null,"Calendar"),l("th",null,"Summary"),l("th",{class:"num"},"Hours"),l("th",{class:"nowrap"},"Start date"),l("th",{class:"nowrap"},"Start time")])],-1)),l("tbody",null,[(w(!0),_(de,null,Ce(t.rows,(a,n)=>{var r;return w(),_(de,{key:n},[l("tr",{onClick:i=>t.$emit("toggle",n),class:"cursor-pointer"},[l("td",null,D(a.calendar),1),l("td",null,[l("span",{class:"cell",title:a.summary},D(a.summary),9,Rf)]),l("td",zf,D(t.n2(a.duration_h)),1),l("td",jf,D((a.start||"").split(" ")[0]),1),l("td",Uf,D((r=(a.start||"").split(" ")[1])==null?void 0:r.slice(0,5)),1)],8,Hf),t.detailsIndex===n?(w(),_("tr",Vf,[l("td",Kf,[o[0]||(o[0]=l("div",null,[l("strong",null,"Details")],-1)),a.desc?(w(),_("div",qf,D(a.desc),1)):(w(),_("div",Gf,"No description"))])])):q("",!0)],64)}),128))])]))}}),mr=24*60*60*1e3;function Bt(e,t,o){const a=Number(e);return Number.isFinite(a)?Math.min(o,Math.max(t,Math.round(a*100)/100)):t}function Yf(e,t,o){const a=Number(e);if(!Number.isFinite(a))return t;const n=Math.round(a);return n<t?t:n>o?o:n}function wt(e){return Number.isFinite(e)?Number(e.toFixed(2)):0}function hr(e){return Number.isFinite(e)?Math.max(0,Math.min(999,Number(e.toFixed(2)))):0}function vr(e){if(!Number.isFinite(e))return"0";const t=wt(Math.max(0,e));return Math.abs(t-Math.round(t))<.05?Math.round(t).toString():t.toFixed(1)}function Zf(e){const t=Number(e);if(!Number.isFinite(t))return 0;const o=Math.min(1e4,Math.max(0,t));return Number(o.toFixed(2))}function ka(e){return Zf(Number(e)*4)}function $o(){return{showWeekendShare:!0,showEveningShare:!0,showEarliestLatest:!0,showOverlaps:!0,showLongestSession:!0,showLastDayOff:!0,showDayOffTrend:!0,showHint:!0,forecastMode:"total"}}function Ro(){return{categories:["work","hobby","sport"],useCategoryMapping:!0,index:{method:"simple_range",basis:"category"},thresholds:{noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6},relations:{displayMode:"ratio"},trend:{lookbackWeeks:4},dayparts:{enabled:!1},ui:{showNotes:!1}}}function to(){return{totalHours:48,categories:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",color:"#2563EB",groupIds:[1]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#F97316",groupIds:[2]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#10B981",groupIds:[3]}],pace:{includeWeekendTotal:!0,mode:"days_only",thresholds:{onTrack:-2,atRisk:-10}},forecast:{methodPrimary:"linear",momentumLastNDays:2,padding:1.5},ui:{showTotalDelta:!0,showNeedPerDay:!0,showCategoryBlocks:!0,badges:!0,includeWeekendToggle:!0,showCalendarCharts:!0,showCategoryCharts:!0},allDayHours:8,timeSummary:{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},activityCard:$o(),balance:Ro(),includeZeroDaysInStats:!1}}function Ut(e){return JSON.parse(JSON.stringify(ct(e)))}function ct(e){var i,s,d,c,f,g,b,p,m,u,x,C,h,k,v,S,N,A,$,T,j,L,F,W,B;if(typeof e=="string")try{const E=JSON.parse(e);return ct(E)}catch{return ct(void 0)}const t=to(),o=JSON.parse(JSON.stringify(e??{}));if(typeof o!="object"||o===null||Array.isArray(o))return t;Array.isArray(o.categories)||(o.categories=[]);const a=o.categories.map(E=>{const U=(E!=null&&E.id&&typeof E.id=="string"?E.id:"")||op(String((E==null?void 0:E.label)??"cat")),R=typeof(E==null?void 0:E.label)=="string"&&E.label.trim()!==""?E.label.trim():tp(U),ie=Bt(E==null?void 0:E.targetHours,0,1e4),V=!!(E!=null&&E.includeWeekend),J=(E==null?void 0:E.paceMode)==="time_aware"?"time_aware":"days_only",z=ep(E==null?void 0:E.color),fe=Array.isArray(E==null?void 0:E.groupIds)?E.groupIds.map(G=>Number(G)).filter(G=>Number.isFinite(G)&&G>=0&&G<=9):[];return{id:U,label:R,targetHours:ie,includeWeekend:V,paceMode:J,color:z,groupIds:fe}}),n=a.length?a:t.categories;return{totalHours:Bt(o.totalHours,0,1e4),categories:n,pace:{includeWeekendTotal:!!(((i=o.pace)==null?void 0:i.includeWeekendTotal)??t.pace.includeWeekendTotal),mode:((s=o.pace)==null?void 0:s.mode)==="time_aware"?"time_aware":t.pace.mode,thresholds:{onTrack:Bt(((c=(d=o.pace)==null?void 0:d.thresholds)==null?void 0:c.onTrack)??t.pace.thresholds.onTrack,-100,100),atRisk:Bt(((g=(f=o.pace)==null?void 0:f.thresholds)==null?void 0:g.atRisk)??t.pace.thresholds.atRisk,-100,100)}},forecast:{methodPrimary:((b=o.forecast)==null?void 0:b.methodPrimary)==="momentum"?"momentum":"linear",momentumLastNDays:(()=>{var U;const E=Math.round(((U=o.forecast)==null?void 0:U.momentumLastNDays)??t.forecast.momentumLastNDays);return Math.min(14,Math.max(1,Number.isFinite(E)?E:t.forecast.momentumLastNDays))})(),padding:Bt(((p=o.forecast)==null?void 0:p.padding)??t.forecast.padding,0,100)},ui:{showTotalDelta:!!(((m=o.ui)==null?void 0:m.showTotalDelta)??t.ui.showTotalDelta),showNeedPerDay:!!(((u=o.ui)==null?void 0:u.showNeedPerDay)??t.ui.showNeedPerDay),showCategoryBlocks:!!(((x=o.ui)==null?void 0:x.showCategoryBlocks)??t.ui.showCategoryBlocks),badges:!!(((C=o.ui)==null?void 0:C.badges)??t.ui.badges),includeWeekendToggle:!!(((h=o.ui)==null?void 0:h.includeWeekendToggle)??t.ui.includeWeekendToggle),showCalendarCharts:((k=o.ui)==null?void 0:k.showCalendarCharts)===void 0?t.ui.showCalendarCharts:!!o.ui.showCalendarCharts,showCategoryCharts:((v=o.ui)==null?void 0:v.showCategoryCharts)===void 0?t.ui.showCategoryCharts:!!o.ui.showCategoryCharts},allDayHours:Bt(o.allDayHours??t.allDayHours,0,24),timeSummary:{showTotal:((S=o.timeSummary)==null?void 0:S.showTotal)===void 0?t.timeSummary.showTotal:!!o.timeSummary.showTotal,showAverage:((N=o.timeSummary)==null?void 0:N.showAverage)===void 0?t.timeSummary.showAverage:!!o.timeSummary.showAverage,showMedian:((A=o.timeSummary)==null?void 0:A.showMedian)===void 0?t.timeSummary.showMedian:!!o.timeSummary.showMedian,showBusiest:(($=o.timeSummary)==null?void 0:$.showBusiest)===void 0?t.timeSummary.showBusiest:!!o.timeSummary.showBusiest,showWorkday:((T=o.timeSummary)==null?void 0:T.showWorkday)===void 0?t.timeSummary.showWorkday:!!o.timeSummary.showWorkday,showWeekend:((j=o.timeSummary)==null?void 0:j.showWeekend)===void 0?t.timeSummary.showWeekend:!!o.timeSummary.showWeekend,showWeekendShare:((L=o.timeSummary)==null?void 0:L.showWeekendShare)===void 0?t.timeSummary.showWeekendShare:!!o.timeSummary.showWeekendShare,showCalendarSummary:((F=o.timeSummary)==null?void 0:F.showCalendarSummary)===void 0?t.timeSummary.showCalendarSummary:!!o.timeSummary.showCalendarSummary,showTopCategory:((W=o.timeSummary)==null?void 0:W.showTopCategory)===void 0?t.timeSummary.showTopCategory:!!o.timeSummary.showTopCategory,showBalance:((B=o.timeSummary)==null?void 0:B.showBalance)===void 0?t.timeSummary.showBalance:!!o.timeSummary.showBalance},activityCard:Xf(o.activityCard,t.activityCard),balance:Qf(o.balance,n,t.balance),includeZeroDaysInStats:!!(o.includeZeroDaysInStats??t.includeZeroDaysInStats)}}function Xf(e,t){const o={...t};if(!e||typeof e!="object")return o;["showWeekendShare","showEveningShare","showEarliestLatest","showOverlaps","showLongestSession","showLastDayOff","showDayOffTrend","showHint"].forEach(r=>{Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=!!e[r])});const n=e==null?void 0:e.forecastMode;if(typeof n=="string"){const r=n.toLowerCase();(r==="off"||r==="total"||r==="calendar"||r==="category")&&(o.forecastMode=r)}return o}function Qf(e,t,o){var f,g,b;const a=t.map(p=>p.id),n=new Set([...a,"__uncategorized__"]),r=Array.isArray(e==null?void 0:e.categories)?e.categories:o.categories,i=[];for(const p of r){const m=typeof p=="string"?p.trim():String(p??"").trim();m&&(n.size&&!n.has(m)||i.includes(m)||i.push(m))}i.length||(a.length?i.push(...a.slice(0,o.categories.length)):i.push(...o.categories));const s=(e==null?void 0:e.thresholds)??{},d=(e==null?void 0:e.ui)??{},c=(e==null?void 0:e.index)??{};return{categories:i,useCategoryMapping:!!((e==null?void 0:e.useCategoryMapping)??o.useCategoryMapping),index:{method:(c==null?void 0:c.method)==="shannon_evenness"?"shannon_evenness":o.index.method,basis:(c==null?void 0:c.basis)==="calendar"||(c==null?void 0:c.basis)==="both"||(c==null?void 0:c.basis)==="off"?c.basis:o.index.basis},thresholds:{noticeAbove:Bt(s.noticeAbove??o.thresholds.noticeAbove,0,1),noticeBelow:Bt(s.noticeBelow??o.thresholds.noticeBelow,0,1),warnAbove:Bt(s.warnAbove??o.thresholds.warnAbove,0,1),warnBelow:Bt(s.warnBelow??o.thresholds.warnBelow,0,1),warnIndex:Bt(s.warnIndex??o.thresholds.warnIndex,0,1)},relations:{displayMode:((f=e==null?void 0:e.relations)==null?void 0:f.displayMode)==="factor"?"factor":o.relations.displayMode},trend:{lookbackWeeks:Yf(((g=e==null?void 0:e.trend)==null?void 0:g.lookbackWeeks)??o.trend.lookbackWeeks,1,12)},dayparts:{enabled:!!(((b=e==null?void 0:e.dayparts)==null?void 0:b.enabled)??o.dayparts.enabled)},ui:{showNotes:!!(d.showNotes??o.ui.showNotes)}}}function ep(e){if(typeof e!="string")return;const t=e.trim();if(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t)){if(t.length===4){const[,o,a,n]=t;return`#${o}${o}${a}${a}${n}${n}`.toUpperCase()}return t.toUpperCase()}}function tp(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function op(e){let t=0;for(let o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;return`cat-${Math.abs(t)}`}function ap(e){const t=e.pace.totalEligible>0?e.pace.elapsedEligible/e.pace.totalEligible:0,o=t>0?e.totalProgress.actualHours/t:e.totalProgress.actualHours,a=Math.max(0,Math.ceil(e.pace.daysLeft)),n=np(e.dailyHours,e.config.forecast.momentumLastNDays),r=e.totalProgress.actualHours+n*a,i=Math.max(0,Math.min(o,r)-e.config.forecast.padding),s=Math.max(o,r)+e.config.forecast.padding,d=e.config.forecast.methodPrimary==="momentum"?"momentum":"linear",c=d==="momentum"?r:o,f=Math.max(0,c-e.config.forecast.padding),g=Math.max(0,c+e.config.forecast.padding),b=d==="momentum"?"Momentum":"Linear";return{linear:wt(o),momentum:wt(r),low:wt(Math.max(0,i)),high:wt(Math.max(0,s)),text:`${b} ${vr(e.config.forecast.padding)}h  ${vr(f)}${vr(g)} h`,primaryMethod:d,primary:wt(c),bandLow:wt(f),bandHigh:wt(g)}}function np(e,t){if(t<=0)return 0;const o=Array.from(e.entries());if(!o.length)return 0;o.sort((r,i)=>r[0].localeCompare(i[0]));const a=o.slice(-t),n=a.reduce((r,[,i])=>r+Math.max(0,i||0),0);return a.length?n/a.length:0}function rp(e,t){var a,n;if(typeof window<"u"){const r=window;try{if(typeof(r==null?void 0:r.t)=="function")return r.t("opsdash",e,t||{});if(typeof((n=(a=r==null?void 0:r.OC)==null?void 0:a.L10N)==null?void 0:n.translate)=="function")return r.OC.L10N.translate("opsdash",e,t||{})}catch(i){r!=null&&r.console&&console.warn("[opsdash] translate failed",i)}}let o=e;return t&&Object.entries(t).forEach(([r,i])=>{o=o.replace(new RegExp(`{${r}}`,"g"),String(i))}),o}const Vt=rp;function pl(e){const t=e?ct(e):to(),o=(t==null?void 0:t.totalHours)??0,a=(t==null?void 0:t.categories)??[],n={id:"total",label:Vt("Total"),actualHours:0,targetHours:o,percent:0,deltaHours:0,remainingHours:o,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"};return{total:n,categories:a.map(r=>({...n,id:r.id,label:r.label,targetHours:r.targetHours,remainingHours:r.targetHours})),forecast:{linear:0,momentum:0,low:0,high:0,text:"~00 h",primaryMethod:(t==null?void 0:t.forecast.methodPrimary)??"linear",primary:0,bandLow:0,bandHigh:0}}}function gl(e){const t=e.config,o=vl(e.from),a=vl(e.to),n=dp(e.byDay),r=(e.byCal||[]).reduce((g,b)=>{const p=Number((b==null?void 0:b.total_hours)??(b==null?void 0:b.hours)??0);return Number.isFinite(p)?g+p:g},0),i=t.totalHours||0,s=ml({includeWeekend:t.pace.includeWeekendTotal,mode:t.pace.mode,includeZeroDays:t.includeZeroDaysInStats,start:o,end:a,dailyHours:n}),d=hl({id:"total",label:Vt("Total"),actual:r,target:i,pace:s,thresholds:t.pace.thresholds,includeWeekend:t.pace.includeWeekendTotal,paceMode:t.pace.mode}),c=t.categories.map(g=>{const b=lp(g,e.byCal,e.groupsById),p=g.paceMode||t.pace.mode,m=ml({includeWeekend:g.includeWeekend,mode:p,includeZeroDays:t.includeZeroDaysInStats,start:o,end:a,dailyHours:n});return hl({id:g.id,label:g.label,actual:b,target:g.targetHours,pace:m,thresholds:t.pace.thresholds,includeWeekend:g.includeWeekend,paceMode:p})}),f=ap({config:t,totalProgress:d,dailyHours:n,pace:s});return{total:d,categories:c,forecast:f}}function ml(e){const{start:t,end:o}=e;if(!t||!o)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};const a=pn(new Date),n=fo(t),r=fo(o),i=cp(t,o).filter(g=>e.includeWeekend||!up(g)),s=i.length;if(s===0)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};if(fo(a)>r)return{totalEligible:s,elapsedEligible:s,daysLeft:0,calendarPercent:100};if(fo(a)<n)return{totalEligible:s,elapsedEligible:0,daysLeft:s,calendarPercent:0};let d=0;for(const g of i){const b=fo(g),p=e.dailyHours.get(b)??0;if(!(!e.includeZeroDays&&p<=0&&b!==fo(a))){if(b<fo(a))d+=1;else if(b===fo(a))if(e.mode==="time_aware"){const u=Math.min(new Date().getTime(),g.getTime()+mr)-g.getTime(),x=Math.max(0,Math.min(1,u/mr));(e.includeZeroDays||p>0||x>0)&&(d+=x)}else(e.includeZeroDays||p>0)&&(d+=1)}}const c=hr(d/s*100),f=Math.max(0,s-d);return{totalEligible:s,elapsedEligible:d,daysLeft:f,calendarPercent:c}}function hl(e){const t=Math.max(0,e.target||0),o=Math.max(0,e.actual||0),a=t>0?hr(o/t*100):0,n=t-o,r=o-t,i=e.pace.daysLeft>0?Math.max(0,n)/e.pace.daysLeft:0,s=a-e.pace.calendarPercent,d=sp({percent:a,target:t,gap:s,thresholds:e.thresholds});return{id:e.id,label:e.label,actualHours:wt(o),targetHours:wt(t),percent:a,deltaHours:wt(r),remainingHours:wt(Math.max(0,n)),needPerDay:wt(i),daysLeft:Math.max(0,Math.ceil(e.pace.daysLeft)),calendarPercent:hr(e.pace.calendarPercent),gap:wt(s),status:d,statusLabel:ip(d),includeWeekend:e.includeWeekend,paceMode:e.paceMode}}function sp(e){return e.target<=0?"none":e.percent>=100?"done":e.gap>=e.thresholds.onTrack?"on_track":e.gap>=e.thresholds.atRisk?"at_risk":"behind"}function ip(e){switch(e){case"on_track":return Vt("On Track");case"at_risk":return Vt("At Risk");case"behind":return Vt("Behind");case"done":return Vt("Done");default:return""}}function lp(e,t,o){if(!Array.isArray(t))return 0;const a=Array.isArray(e.groupIds)&&e.groupIds.length?new Set(e.groupIds):null;let n=0;for(const r of t){const i=Number((r==null?void 0:r.total_hours)??(r==null?void 0:r.hours)??0);if(!Number.isFinite(i)||i<=0)continue;const s=String((r==null?void 0:r.id)??(r==null?void 0:r.calendar)??""),d=Number((r==null?void 0:r.group)??(r==null?void 0:r.group_id)??(o==null?void 0:o[s])??0);a&&!a.has(d)||(n+=i)}return n}function dp(e){const t=new Map;if(!Array.isArray(e))return t;for(const o of e){const a=String((o==null?void 0:o.date)??(o==null?void 0:o.day)??"");if(!a)continue;const n=Number((o==null?void 0:o.total_hours)??(o==null?void 0:o.hours)??0);Number.isFinite(n)&&t.set(a,n)}return t}function cp(e,t){const o=[];let a=pn(e);const n=pn(t).getTime();for(;a.getTime()<=n;)o.push(new Date(a)),a=new Date(a.getTime()+mr);return o}function vl(e){if(!e)return null;const t=e.split("-").map(a=>Number(a));if(t.length!==3||t.some(a=>!Number.isInteger(a)))return null;const o=new Date(Date.UTC(t[0],t[1]-1,t[2]));return Number.isNaN(o.getTime())?null:pn(o)}function pn(e){const t=new Date(e);return t.setUTCHours(0,0,0,0),t}function fo(e){return e.toISOString().slice(0,10)}function up(e){const t=e.getUTCDay();return t===0||t===6}const fp={id:"opsdash-sidebar-pane-calendars",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-calendars"},pp={class:"sb-actions"},gp={class:"sb-list"},mp=["aria-pressed","onClick"],hp={class:"cal-name"},vp={class:"cal-fields"},bp={class:"field"},yp=["value","onChange"],kp=["value"],wp={class:"field"},xp=["value","title","aria-invalid","onInput"],_p=Ee({__name:"SidebarCalendarsPane",props:{calendars:{},selected:{},range:{},isLoading:{type:Boolean},categoryOptions:{},calendarTargetMessages:{},calendarCategoryId:{type:Function},getTarget:{type:Function}},emits:["select-all","toggle-calendar","set-category","target-input"],setup(e){const t=e,{calendars:o,selected:a,range:n,isLoading:r,categoryOptions:i,calendarTargetMessages:s}=Ua(t),d=f=>t.calendarCategoryId(f),c=f=>t.getTarget(f);return(f,g)=>(w(),_("div",fp,[l("div",pp,[Se(y(et),{type:"tertiary",disabled:y(r),onClick:g[0]||(g[0]=b=>f.$emit("select-all",!0))},{default:je(()=>[...g[2]||(g[2]=[Ae("All",-1)])]),_:1},8,["disabled"]),Se(y(et),{type:"tertiary",disabled:y(r),onClick:g[1]||(g[1]=b=>f.$emit("select-all",!1))},{default:je(()=>[...g[3]||(g[3]=[Ae("None",-1)])]),_:1},8,["disabled"])]),g[7]||(g[7]=l("div",{class:"sb-context"},[l("div",{class:"sb-title"},"PerCalendar Settings"),l("p",{class:"sb-description"}," Choose which calendars feed dashboards, then map them to categories so Balance and Targets stay in sync. "),l("p",{class:"sb-description"},[Ae(" Use "),l("strong",null,"Category"),Ae(" to group calendars and "),l("strong",null,"Target (h)"),Ae(" to define weekly/monthly goalsthe values convert automatically when you switch ranges. ")])],-1)),l("div",gp,[(w(!0),_(de,null,Ce(y(o),b=>{var p,m;return w(),_("div",{key:b.id,class:"cal-card"},[l("div",{class:"cal-card-head",role:"button",tabindex:"0","aria-pressed":y(a).includes(b.id),onClick:u=>f.$emit("toggle-calendar",b.id)},[l("span",{class:"color-dot",style:Be({background:b.color||"var(--brand)"})},null,4),l("span",hp,D(b.displayname||b.id),1),l("span",{class:Te(["cal-state",{on:y(a).includes(b.id)}])},D(y(a).includes(b.id)?"Selected":"Hidden"),3)],8,mp),l("div",vp,[l("label",bp,[g[5]||(g[5]=l("span",{class:"label"},"Category",-1)),l("select",{value:d(b.id),onChange:u=>f.$emit("set-category",{id:b.id,category:u.target.value})},[g[4]||(g[4]=l("option",{value:""},"Unassigned",-1)),(w(!0),_(de,null,Ce(y(i),u=>(w(),_("option",{key:u.id,value:u.id},D(u.label),9,kp))),128))],40,yp)]),l("label",wp,[g[6]||(g[6]=l("span",{class:"label"},"Target (h)",-1)),l("input",{type:"number",value:c(b.id),min:"0",max:"10000",step:"0.25","aria-label":"Target hours",title:`Target (${y(n)==="week"?"week":"month"}) in hours`,"aria-invalid":!!y(s)[b.id],class:"target-input",onInput:u=>f.$emit("target-input",{id:b.id,value:u.target.value})},null,40,xp),y(s)[b.id]?(w(),_("div",{key:0,class:Te(["input-message",(p=y(s)[b.id])==null?void 0:p.tone])},D((m=y(s)[b.id])==null?void 0:m.text),3)):q("",!0)])])])}),128))])]))}}),Cp={class:"sb-pane"},Sp={class:"target-section"},$p={class:"section-title-row tier-2"},Tp=["aria-expanded"],Mp={key:0,class:"section-hint"},Ap={class:"toggle-grid"},Dp=["checked","onChange"],Ep={class:"toggle-copy"},Op={class:"toggle-label"},Np={class:"target-section"},Lp={class:"forecast-block"},Ip={class:"field"},Bp=["value"],Pp=["value"],Fp={key:0,class:"section-hint compact"},Wp={class:"hint-body"},Hp={class:"target-section"},Rp={class:"section-title-row tier-2"},zp={class:"inline-actions"},jp={class:"field inline-select"},Up=["value"],Vp=["aria-expanded"],Kp={key:0,class:"section-hint"},qp={class:"field-grid thresholds-grid"},Gp={class:"field"},Jp=["value","aria-invalid"],Yp={class:"field"},Zp=["value","aria-invalid"],Xp={class:"field"},Qp=["value","aria-invalid"],eg={class:"field"},tg=["value","aria-invalid"],og={class:"field"},ag=["value","aria-invalid"],ng={class:"target-section"},rg={class:"section-title-row tier-2"},sg=["aria-expanded"],ig={key:0,class:"section-hint"},lg={class:"field-grid"},dg={class:"field"},cg=["disabled","value","aria-invalid"],ug={class:"target-section"},fg={class:"section-title-row tier-2"},pg=["aria-expanded"],gg={key:0,class:"section-hint"},mg={class:"toggle-grid"},hg={class:"toggle-field single-toggle"},vg=["checked"],bg=qe(Ee({__name:"SidebarBalancePane",props:{balanceSettings:{},activitySettings:{},activityToggles:{},activityForecastMode:{},activityForecastOptions:{},balanceThresholdMessages:{},balanceLookbackMessage:{},helpActivity:{type:Boolean},helpThresholds:{type:Boolean},helpTrend:{type:Boolean},helpDisplay:{type:Boolean},indexDisabled:{type:Boolean}},emits:["toggle-help","set-activity-forecast","set-activity-toggle","set-threshold","set-lookback","set-index-basis","set-ui-toggle"],setup(e,{emit:t}){const o=e,a=t,{balanceSettings:n,activitySettings:r,activityToggles:i,activityForecastMode:s,activityForecastOptions:d,balanceThresholdMessages:c,balanceLookbackMessage:f,helpActivity:g,helpThresholds:b,helpTrend:p,helpDisplay:m,indexDisabled:u}=Ua(o),x=O(()=>{var h;const C=(h=d.value)==null?void 0:h.find(k=>k.value===s.value);return(C==null?void 0:C.description)??""});return(C,h)=>{var k,v,S,N,A,$,T,j,L,F,W,B;return w(),_("div",Cp,[h[39]||(h[39]=l("div",{class:"pane-heading"},[l("div",{class:"heading-primary"},"Activity & Balance"),l("div",{class:"heading-subtitle"},"Card display & warnings")],-1)),l("div",Sp,[l("div",$p,[h[14]||(h[14]=l("div",{class:"section-subtitle subtitle"},"Activity card",-1)),l("button",{type:"button",class:"info-button","aria-expanded":y(g),"aria-label":"Activity help",onClick:h[0]||(h[0]=E=>a("toggle-help","activity"))},[...h[13]||(h[13]=[l("span",null,"?",-1)])],8,Tp)]),y(g)?(w(),_("div",Mp,[...h[15]||(h[15]=[l("span",{class:"hint-title"},"Card toggles",-1),l("span",{class:"hint-body"},"Enable or hide specific activity metrics. These only affect the activity card.",-1)])])):q("",!0),l("div",Ap,[(w(!0),_(de,null,Ce(y(i),([E,U],R)=>(w(),_("label",{key:`${E}-${R}`,class:"toggle-field"},[l("input",{type:"checkbox",checked:y(r)[E],onChange:ie=>a("set-activity-toggle",{key:E,value:ie.target.checked})},null,40,Dp),l("span",Ep,[l("span",Op,D(U),1),h[16]||(h[16]=l("span",{class:"toggle-description"},"Show in activity card",-1))])]))),128))])]),l("div",Np,[l("div",Lp,[h[19]||(h[19]=l("div",{class:"section-title"},"Chart projection",-1)),h[20]||(h[20]=l("div",{class:"section-hint"},[l("span",{class:"hint-title"},"Projection"),l("span",{class:"hint-body"},"Bar forecast for future days (week/month) based on your targets.")],-1)),l("label",Ip,[h[17]||(h[17]=l("span",{class:"label"},"Projection mode",-1)),l("select",{value:y(s),onChange:h[1]||(h[1]=E=>a("set-activity-forecast",E.target.value))},[(w(!0),_(de,null,Ce(y(d),E=>(w(),_("option",{key:E.value,value:E.value},D(E.label),9,Pp))),128))],40,Bp)]),x.value?(w(),_("div",Fp,[h[18]||(h[18]=l("span",{class:"hint-title"},"Details",-1)),l("span",Wp,D(x.value),1)])):q("",!0)])]),l("div",Hp,[l("div",Rp,[h[24]||(h[24]=l("div",{class:"section-subtitle subtitle"},"Balance index",-1)),l("div",zp,[l("label",jp,[h[22]||(h[22]=l("span",{class:"label"},"Basis",-1)),l("select",{value:y(n).index.basis,"aria-disabled":!1,onChange:h[2]||(h[2]=E=>a("set-index-basis",E.target.value))},[...h[21]||(h[21]=[l("option",{value:"off"},"Disabled",-1),l("option",{value:"category"},"Total categories",-1),l("option",{value:"calendar"},"Total calendars",-1),l("option",{value:"both"},"Categories + calendars",-1)])],40,Up)]),l("button",{type:"button",class:"info-button","aria-expanded":y(b),"aria-label":"Thresholds help",onClick:h[3]||(h[3]=E=>a("toggle-help","thresholds"))},[...h[23]||(h[23]=[l("span",null,"?",-1)])],8,Vp)])]),y(b)?(w(),_("div",Kp,[...h[25]||(h[25]=[l("span",{class:"hint-title"},"Thresholds & warnings",-1),l("span",{class:"hint-body"},"Set percentage gaps for subtle notices vs. strong warnings. Values are 01 ratios.",-1)])])):q("",!0),l("div",qp,[l("label",Gp,[h[26]||(h[26]=l("span",{class:"label"},"Notice above",-1)),l("input",{type:"number",min:"0",max:"1",step:"0.01",value:y(n).thresholds.noticeAbove,"aria-invalid":!!y(c).noticeAbove,onInput:h[4]||(h[4]=E=>a("set-threshold",{key:"noticeAbove",value:E.target.value}))},null,40,Jp),y(c).noticeAbove?(w(),_("div",{key:0,class:Te(["input-message",(k=y(c).noticeAbove)==null?void 0:k.tone])},D((v=y(c).noticeAbove)==null?void 0:v.text),3)):q("",!0)]),l("label",Yp,[h[27]||(h[27]=l("span",{class:"label"},"Notice below",-1)),l("input",{type:"number",min:"0",max:"1",step:"0.01",value:y(n).thresholds.noticeBelow,"aria-invalid":!!y(c).noticeBelow,onInput:h[5]||(h[5]=E=>a("set-threshold",{key:"noticeBelow",value:E.target.value}))},null,40,Zp),y(c).noticeBelow?(w(),_("div",{key:0,class:Te(["input-message",(S=y(c).noticeBelow)==null?void 0:S.tone])},D((N=y(c).noticeBelow)==null?void 0:N.text),3)):q("",!0)]),l("label",Xp,[h[28]||(h[28]=l("span",{class:"label"},"Warn above",-1)),l("input",{type:"number",min:"0",max:"1",step:"0.01",value:y(n).thresholds.warnAbove,"aria-invalid":!!y(c).warnAbove,onInput:h[6]||(h[6]=E=>a("set-threshold",{key:"warnAbove",value:E.target.value}))},null,40,Qp),y(c).warnAbove?(w(),_("div",{key:0,class:Te(["input-message",(A=y(c).warnAbove)==null?void 0:A.tone])},D(($=y(c).warnAbove)==null?void 0:$.text),3)):q("",!0)]),l("label",eg,[h[29]||(h[29]=l("span",{class:"label"},"Warn below",-1)),l("input",{type:"number",min:"0",max:"1",step:"0.01",value:y(n).thresholds.warnBelow,"aria-invalid":!!y(c).warnBelow,onInput:h[7]||(h[7]=E=>a("set-threshold",{key:"warnBelow",value:E.target.value}))},null,40,tg),y(c).warnBelow?(w(),_("div",{key:0,class:Te(["input-message",(T=y(c).warnBelow)==null?void 0:T.tone])},D((j=y(c).warnBelow)==null?void 0:j.text),3)):q("",!0)]),l("label",og,[h[30]||(h[30]=l("span",{class:"label"},"Warn index",-1)),l("input",{type:"number",min:"0",max:"1",step:"0.01",value:y(n).thresholds.warnIndex,"aria-invalid":!!y(c).warnIndex,onInput:h[8]||(h[8]=E=>a("set-threshold",{key:"warnIndex",value:E.target.value}))},null,40,ag),y(c).warnIndex?(w(),_("div",{key:0,class:Te(["input-message",(L=y(c).warnIndex)==null?void 0:L.tone])},D((F=y(c).warnIndex)==null?void 0:F.text),3)):q("",!0)])])]),l("div",ng,[l("div",rg,[h[32]||(h[32]=l("div",{class:"section-subtitle subtitle"},"Trend & relations",-1)),l("button",{type:"button",class:"info-button","aria-expanded":y(p),"aria-label":"Trend help",onClick:h[9]||(h[9]=E=>a("toggle-help","trend"))},[...h[31]||(h[31]=[l("span",null,"?",-1)])],8,sg)]),y(p)?(w(),_("div",ig,[...h[33]||(h[33]=[l("span",{class:"hint-title"},"Trend window",-1),l("span",{class:"hint-body"},"Controls the comparison window and how ratios are expressed. Day on/off never looks ahead; it scans the past using this lookback (default 4). Applies to week and month ranges. Larger lookbacks can take longer to load if many events exist.",-1)])])):q("",!0),l("div",lg,[l("label",dg,[h[34]||(h[34]=l("span",{class:"label"},"Trend lookback (weeks/months)",-1)),l("input",{type:"number",min:"1",max:"4",step:"1",disabled:y(u),value:y(n).trend.lookbackWeeks,"aria-invalid":!!y(f),onInput:h[10]||(h[10]=E=>a("set-lookback",E.target.value))},null,40,cg),y(f)?(w(),_("div",{key:0,class:Te(["input-message",(W=y(f))==null?void 0:W.tone])},D((B=y(f))==null?void 0:B.text),3)):q("",!0)])])]),l("div",ug,[l("div",fg,[h[36]||(h[36]=l("div",{class:"section-subtitle subtitle"},"Display",-1)),l("button",{type:"button",class:"info-button","aria-expanded":y(m),"aria-label":"Display help",onClick:h[11]||(h[11]=E=>a("toggle-help","display"))},[...h[35]||(h[35]=[l("span",null,"?",-1)])],8,pg)]),y(m)?(w(),_("div",gg,[...h[37]||(h[37]=[l("span",{class:"hint-title"},"Notes in balance cards",-1),l("span",{class:"hint-body"},"Toggle extra notes and annotations below balance charts. This affects the dashboard only.",-1)])])):q("",!0),l("div",mg,[l("label",hg,[l("input",{type:"checkbox",checked:y(n).ui.showNotes,onChange:h[12]||(h[12]=E=>a("set-ui-toggle",{key:"showNotes",value:E.target.checked}))},null,40,vg),h[38]||(h[38]=l("span",{class:"toggle-copy"},[l("span",{class:"toggle-label"},"Show balance notes"),l("span",{class:"toggle-description"},"Display note snippet under balance cards")],-1))])])])])}}}),[["__scopeId","data-v-9159d2e8"]]),yg={id:"opsdash-sidebar-pane-config",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-config"},kg={class:"theme-section"},wg={class:"theme-header"},xg={class:"theme-hint"},_g={class:"theme-options",role:"radiogroup","aria-label":"Theme preference"},Cg={class:"theme-option"},Sg=["checked"],$g={class:"theme-copy"},Tg={class:"theme-option__desc"},Mg={class:"theme-option"},Ag=["checked"],Dg={class:"theme-option"},Eg=["checked"],Og={class:"setup-actions"},Ng=qe(Ee({__name:"SidebarConfigPane",props:{themePreference:{},effectiveTheme:{},systemTheme:{}},emits:["rerun-onboarding","set-theme-preference","open-shortcuts"],setup(e,{emit:t}){const o=e,{themePreference:a,effectiveTheme:n,systemTheme:r}=Ua(o),i=t,s=O(()=>r.value==="dark"?"dark":"light"),d=O(()=>n.value==="dark"?"Dark":"Light");function c(g){i("set-theme-preference",g)}function f(g){const b=g.currentTarget;i("open-shortcuts",b??void 0)}return(g,b)=>(w(),_("div",yg,[b[10]||(b[10]=l("div",{class:"sb-title"},"Configuration & Setup",-1)),b[11]||(b[11]=l("p",{class:"sb-description"}," Adjust theme preferences and re-run onboarding. Profile management lives under the Profiles tab. ",-1)),l("div",kg,[l("div",wg,[b[4]||(b[4]=l("div",{class:"theme-title"},"Theme & appearance",-1)),l("div",xg,"Currently showing "+D(d.value),1)]),l("div",_g,[l("label",Cg,[l("input",{type:"radio",name:"opsdash-theme-preference",value:"auto",checked:y(a)==="auto",onChange:b[0]||(b[0]=p=>c("auto"))},null,40,Sg),l("div",$g,[b[5]||(b[5]=l("div",{class:"theme-option__title"},"Follow Nextcloud",-1)),l("div",Tg,"Match account theme (currently "+D(s.value)+").",1)])]),l("label",Mg,[l("input",{type:"radio",name:"opsdash-theme-preference",value:"light",checked:y(a)==="light",onChange:b[1]||(b[1]=p=>c("light"))},null,40,Ag),b[6]||(b[6]=l("div",{class:"theme-copy"},[l("div",{class:"theme-option__title"},"Force light"),l("div",{class:"theme-option__desc"},"Use the light palette even when Nextcloud switches to dark.")],-1))]),l("label",Dg,[l("input",{type:"radio",name:"opsdash-theme-preference",value:"dark",checked:y(a)==="dark",onChange:b[2]||(b[2]=p=>c("dark"))},null,40,Eg),b[7]||(b[7]=l("div",{class:"theme-copy"},[l("div",{class:"theme-option__title"},"Force dark"),l("div",{class:"theme-option__desc"},"Keep Opsdash in dark mode, even if Nextcloud stays light.")],-1))])])]),l("div",Og,[Se(y(et),{type:"primary",size:"small",class:"rerun-btn",title:"Open the onboarding setup again",onClick:b[3]||(b[3]=p=>i("rerun-onboarding"))},{default:je(()=>[...b[8]||(b[8]=[Ae(" Re-run onboarding ",-1)])]),_:1}),Se(y(et),{type:"tertiary",size:"small",class:"shortcuts-btn",onClick:f},{default:je(()=>[...b[9]||(b[9]=[Ae(" Keyboard shortcuts ",-1)])]),_:1})])]))}}),[["__scopeId","data-v-67c94233"]]),Lg={id:"opsdash-sidebar-pane-profiles",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-profiles"},Ig={class:"setup-actions"},Bg={class:"preset-form"},Pg=["disabled"],Fg={key:0,class:"preset-error"},Wg={key:0,class:"preset-warnings"},Hg={class:"preset-header"},Rg={key:1,class:"preset-empty"},zg={key:2,class:"preset-list"},jg={class:"preset-meta"},Ug={class:"preset-name"},Vg={class:"preset-info"},Kg={key:0},qg={class:"preset-actions"},Gg=qe(Ee({__name:"SidebarProfilesPane",props:{presets:{},isLoading:{type:Boolean},isSaving:{type:Boolean},isApplying:{type:Boolean},warnings:{}},emits:["save","load","delete","refresh","clear-warnings","export-config","import-config"],setup(e,{emit:t}){const o=t,a=Z(""),n=Z(null),r=Z(null);function i(){const b=a.value.trim();if(!b){n.value="Enter a profile name";return}n.value=null,o("save",b),a.value=""}function s(b){o("load",b)}function d(b){window.confirm(`Delete profile "${b}"?`)&&o("delete",b)}function c(){var b;(b=r.value)==null||b.click()}function f(b){var u;const p=b.target,m=(u=p==null?void 0:p.files)==null?void 0:u[0];m&&o("import-config",m),p&&(p.value="")}function g(b){if(!b)return"";const p=new Date(b);if(Number.isNaN(p.getTime()))return b;const u=new Date().getTime()-p.getTime(),x=Math.round(u/6e4);if(x<1)return"just now";if(x<60)return`${x} min ago`;const C=Math.round(x/60);if(C<24)return`${C}h ago`;const h=Math.round(C/24);if(h<7)return`${h}d ago`;const k=Math.round(h/7);return k<5?`${k}w ago`:p.toLocaleDateString()}return(b,p)=>(w(),_("div",Lg,[p[11]||(p[11]=l("div",{class:"sb-title"},"Profiles",-1)),p[12]||(p[12]=l("p",{class:"sb-description"}," Export/import full configs or save/load named profiles (calendars, groups, targets, settings). ",-1)),l("div",Ig,[Se(y(et),{type:"tertiary",size:"small",onClick:p[0]||(p[0]=m=>o("export-config"))},{default:je(()=>[...p[4]||(p[4]=[Ae(" Export configuration ",-1)])]),_:1}),Se(y(et),{type:"tertiary",size:"small",onClick:c},{default:je(()=>[...p[5]||(p[5]=[Ae(" Import configuration ",-1)])]),_:1}),l("input",{ref_key:"fileInput",ref:r,type:"file",accept:"application/json",class:"import-input",onChange:f},null,544)]),l("div",Bg,[p[6]||(p[6]=l("label",{class:"preset-label",for:"preset-name"},"Profile name",-1)),yo(l("input",{id:"preset-name","onUpdate:modelValue":p[1]||(p[1]=m=>a.value=m),type:"text",placeholder:"e.g. Focus week",disabled:b.isSaving,onKeyup:fn(i,["enter"])},null,40,Pg),[[Yu,a.value]]),n.value?(w(),_("div",Fg,D(n.value),1)):q("",!0),Se(y(et),{class:"preset-save",type:"primary",disabled:b.isSaving||!a.value.trim(),onClick:i},{default:je(()=>[Ae(D(b.isSaving?"Saving":"Save current configuration"),1)]),_:1},8,["disabled"])]),b.warnings.length?(w(),_("div",Wg,[p[8]||(p[8]=l("div",{class:"warnings-title"},"Warnings",-1)),l("ul",null,[(w(!0),_(de,null,Ce(b.warnings,(m,u)=>(w(),_("li",{key:u},D(m),1))),128))]),Se(y(et),{type:"tertiary",class:"preset-clear",onClick:p[2]||(p[2]=m=>o("clear-warnings"))},{default:je(()=>[...p[7]||(p[7]=[Ae(" Clear warnings ",-1)])]),_:1})])):q("",!0),l("div",Hg,[p[9]||(p[9]=l("h3",null,"Saved profiles",-1)),Se(y(et),{type:"tertiary",disabled:b.isLoading,onClick:p[3]||(p[3]=m=>o("refresh"))},{default:je(()=>[Ae(D(b.isLoading?"Refreshing":"Refresh list"),1)]),_:1},8,["disabled"])]),!b.presets.length&&!b.isLoading?(w(),_("div",Rg," No profiles yet. Save one above to get started. ")):(w(),_("ul",zg,[(w(!0),_(de,null,Ce(b.presets,m=>(w(),_("li",{key:m.name,class:"preset-item"},[l("div",jg,[l("div",Ug,D(m.name),1),l("div",Vg,[l("span",null,D(m.selectedCount)+" calendars",1),l("span",null,D(m.calendarCount)+" groups",1),m.updatedAt?(w(),_("span",Kg,"Updated "+D(g(m.updatedAt)),1)):q("",!0)])]),l("div",qg,[Se(y(et),{type:"primary",disabled:b.isApplying,onClick:u=>s(m.name)},{default:je(()=>[Ae(D(b.isApplying?"Applying":"Load"),1)]),_:2},1032,["disabled","onClick"]),Se(y(et),{type:"tertiary",disabled:b.isApplying,onClick:u=>d(m.name)},{default:je(()=>[...p[10]||(p[10]=[Ae(" Delete ",-1)])]),_:2},1032,["disabled","onClick"])])]))),128))]))]))}}),[["__scopeId","data-v-32d12bd1"]]),Jg={id:"opsdash-sidebar-pane-report",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-report"},Yg={class:"report-card"},Zg={class:"report-card__header"},Xg={class:"report-card__subtitle"},Qg={class:"switch"},em=["checked"],tm={class:"report-field"},om=["value","disabled"],am={class:"report-field"},nm=["value","disabled"],rm={class:"report-field"},sm=["value","disabled"],im={class:"report-risk"},lm={class:"report-risk__header"},dm=["checked","disabled"],cm=["disabled","value"],um=["disabled"],fm=["checked","disabled"],pm=["checked","disabled"],gm={class:"report-actions"},mm=["disabled"],hm=qe(Ee({__name:"SidebarReportPane",props:{reportingConfig:{},saving:{type:Boolean}},emits:["save-reporting"],setup(e,{emit:t}){const o=e,a=t,n=Z(c(o.reportingConfig));Le(()=>o.reportingConfig,f=>{n.value=c(f)},{deep:!0});const r=O(()=>JSON.stringify(n.value)!==JSON.stringify(o.reportingConfig));function i(f){n.value={...n.value,...f}}function s(){a("save-reporting",c(n.value))}function d(f){const g=f.target;if(!g)return;const b=Number(g.value);Number.isFinite(b)&&i({riskThreshold:Math.max(.5,Math.min(1,b/100))})}function c(f){return JSON.parse(JSON.stringify(f))}return(f,g)=>(w(),_("div",Jg,[g[19]||(g[19]=l("div",{class:"sb-title"},"Reports & Automation",-1)),g[20]||(g[20]=l("p",{class:"sb-description"}," Configure weekly/monthly digests, interim reminders, and Deck visibility. ",-1)),l("div",Yg,[l("div",Zg,[l("div",null,[g[7]||(g[7]=l("div",{class:"report-card__title"},"Scheduled summaries",-1)),l("div",Xg,D(n.value.enabled?"Sending on schedule":"Disabled"),1)]),l("label",Qg,[l("input",{type:"checkbox",checked:n.value.enabled,onChange:g[0]||(g[0]=b=>i({enabled:!n.value.enabled}))},null,40,em),g[8]||(g[8]=l("span",null,null,-1))])]),l("div",{class:Te(["report-form",{"report-form--disabled":!n.value.enabled}])},[l("label",tm,[g[10]||(g[10]=l("span",null,"Cadence",-1)),l("select",{value:n.value.schedule,disabled:!n.value.enabled,onChange:g[1]||(g[1]=b=>i({schedule:b.target.value}))},[...g[9]||(g[9]=[l("option",{value:"week"},"Weekly only",-1),l("option",{value:"month"},"Monthly only",-1),l("option",{value:"both"},"Weekly + Monthly",-1)])],40,om)]),l("label",am,[g[12]||(g[12]=l("span",null,"Interim updates",-1)),l("select",{value:n.value.interim,disabled:!n.value.enabled,onChange:g[2]||(g[2]=b=>i({interim:b.target.value}))},[...g[11]||(g[11]=[l("option",{value:"none"},"None",-1),l("option",{value:"midweek"},"Mid-week snapshot",-1),l("option",{value:"daily"},"Daily digest",-1)])],40,nm)]),l("label",rm,[g[14]||(g[14]=l("span",null,"Reminder lead",-1)),l("select",{value:n.value.reminderLead,disabled:!n.value.enabled,onChange:g[3]||(g[3]=b=>i({reminderLead:b.target.value}))},[...g[13]||(g[13]=[l("option",{value:"none"},"No reminder",-1),l("option",{value:"1d"},"1 day before",-1),l("option",{value:"2d"},"2 days before",-1)])],40,sm)]),l("div",im,[l("div",lm,[l("label",null,[l("input",{type:"checkbox",checked:n.value.alertOnRisk,disabled:!n.value.enabled,onChange:g[4]||(g[4]=b=>i({alertOnRisk:!n.value.alertOnRisk}))},null,40,dm),g[15]||(g[15]=Ae(" Alert when schedule is at risk ",-1))]),l("span",null,D(Math.round(n.value.riskThreshold*100))+"%",1)]),l("input",{type:"range",min:"50",max:"100",step:"5",disabled:!n.value.enabled,value:Math.round(n.value.riskThreshold*100),onChange:d},null,40,cm)]),l("fieldset",{class:"report-notify",disabled:!n.value.enabled},[g[18]||(g[18]=l("legend",null,"Delivery channels",-1)),l("label",null,[l("input",{type:"checkbox",checked:n.value.notifyEmail,disabled:!n.value.enabled,onChange:g[5]||(g[5]=b=>i({notifyEmail:!n.value.notifyEmail}))},null,40,fm),g[16]||(g[16]=Ae(" Send via email ",-1))]),l("label",null,[l("input",{type:"checkbox",checked:n.value.notifyNotification,disabled:!n.value.enabled,onChange:g[6]||(g[6]=b=>i({notifyNotification:!n.value.notifyNotification}))},null,40,pm),g[17]||(g[17]=Ae(" Nextcloud notification ",-1))])],8,um)],2)]),l("div",gm,[l("button",{type:"button",class:"report-save",disabled:f.saving||!r.value,onClick:s},D(f.saving?"Saving":r.value?"Save changes":"Saved"),9,mm)])]))}}),[["__scopeId","data-v-3badd082"]]);function vm(e,t){const{allowEmpty:o=!1}=t;if(e===""||e===null||e===void 0)return o?{value:null}:{value:null,error:"Enter a number"};const a=Number(e);if(!Number.isFinite(a))return{value:null,error:"Enter a valid number"};let n=a,r;if(typeof t.min=="number"&&n<t.min&&(n=t.min,r=br(t)),typeof t.max=="number"&&n>t.max&&(n=t.max,r=br(t)),typeof t.step=="number"&&t.step>0){const s=ym(n,t.step);s!==n&&(n=s,r=br(t))}const i=bl(t);return typeof i=="number"&&(n=Number(n.toFixed(i))),{value:n,warning:r}}function bm(e,t){const o=vm(e,t),a=[];return o.error&&a.push({severity:"error",message:o.error}),o.warning&&a.push({severity:"warning",message:o.warning}),{value:o.value,issues:a}}function ym(e,t){const o=bl({step:t}),a=Math.round(e/t)*t;return typeof o=="number"?Number(a.toFixed(o)):a}function bl(e){if(typeof e.decimals=="number")return e.decimals;if(typeof e.step=="number")return km(e.step)}function km(e){const t=e.toString();if(t.includes("e-")){const[,a]=t.split("e-");return Number(a)}const[,o=""]=t.split(".");return o.length}function br(e){const t=[];return typeof e.min=="number"&&typeof e.max=="number"?t.push(`Allowed range ${e.min}  ${e.max}`):typeof e.min=="number"?t.push(`Minimum ${e.min}`):typeof e.max=="number"&&t.push(`Maximum ${e.max}`),typeof e.step=="number"&&e.step>0&&t.push(`step ${e.step}`),`Adjusted to allowed value (${t.join(", ")})`}function wm(e,t,o="Enter a valid number"){const a=bm(e,t),n=a.issues.find(s=>s.severity==="error"),r=a.issues.find(s=>s.severity==="warning");let i=null;return n||a.value===null?i={text:(n==null?void 0:n.message)??o,tone:"error"}:r&&(i={text:r.message,tone:"warning"}),{ok:!n&&a.value!==null,value:a.value,message:i}}function oo(e,t,o,a,n){const{ok:r,value:i,message:s}=wm(e,t,n);return o(s),!r||i===null?!1:(a(i),!0)}const xm={class:"rangebar",title:"Time range"},_m={class:"range-actions"},Cm=["disabled"],Sm=["aria-label"],$m={class:"range-toggle"},Tm={class:"range-nav"},Mm={class:"range-dates"},Am={class:"sb-tabs sb-tabs--primary",role:"tablist","aria-label":"Sidebar sections"},Dm=["aria-selected"],Em={class:"sb-tabs sb-tabs--secondary",role:"tablist","aria-label":"Detail settings"},Om=["aria-selected"],Nm=["aria-selected"],Lm={class:"sb-tabs sb-tabs--secondary",role:"tablist","aria-label":"Advanced configuration"},Im=["aria-selected"],Bm=["aria-selected"],Pm=qe(Ee({__name:"Sidebar",props:{calendars:{},selected:{},groupsById:{},isLoading:{type:Boolean},range:{},offset:{},from:{},to:{},targetsWeek:{},targetsMonth:{},targetsConfig:{},navToggleLabel:{},navToggleIcon:{},presets:{},presetsLoading:{type:Boolean},presetSaving:{type:Boolean},presetApplying:{type:Boolean},presetWarnings:{},themePreference:{},effectiveTheme:{},systemTheme:{},reportingConfig:{},deckSettings:{},reportingSaving:{type:Boolean},dashboardMode:{}},emits:["load","update:range","update:offset","select-all","toggle-calendar","set-group","set-target","update:targets-config","toggle-nav","save-preset","load-preset","delete-preset","refresh-presets","clear-preset-warnings","rerun-onboarding","set-theme-preference","export-config","import-config","open-shortcuts","save-reporting","save-deck-settings"],setup(e,{expose:t,emit:o}){const a=e,n=o,r=Z("calendars");Le(()=>a.dashboardMode,P=>{P==="quick"&&(r.value==="profiles"||r.value==="report")&&(r.value="calendars")});const i=O(()=>a.targetsConfig),s=O(()=>{var P;return((P=i.value)==null?void 0:P.categories)??[]}),d=O(()=>a.presets??[]),c=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"];O(()=>{const P=new Set,H=oe=>{const ee=fe(oe);ee&&P.add(ee)};return(a.calendars||[]).forEach(oe=>H(oe==null?void 0:oe.color)),s.value.forEach(oe=>H(oe==null?void 0:oe.color)),c.forEach(oe=>P.add(oe)),Array.from(P)});function f(P){const H=ct(JSON.parse(JSON.stringify(a.targetsConfig||{})));P(H),n("update:targets-config",H)}O(()=>v()!==null);const g=O(()=>{var P;return{...$o(),...((P=i.value)==null?void 0:P.activityCard)??{}}}),b=[["showWeekendShare","Weekend share"],["showDayOffTrend","Days off trend"],["showHint","Show helper text"]],p=[{value:"off",label:"Do not project future days",description:"Keep charts empty until events occur."},{value:"total",label:"Distribute remaining total target",description:"Split leftover total target hours evenly across future days using current calendar mix."},{value:"calendar",label:"Respect calendar targets",description:"Use per-calendar targets for the current range and spread remaining hours across future days."},{value:"category",label:"Respect category targets",description:"Allocate remaining category targets across future days according to current mappings."}],m=O(()=>{var oe;const P=Ro(),H=((oe=i.value)==null?void 0:oe.balance)??P;return{...P,...H,index:{...P.index,...H.index??{}},thresholds:{...P.thresholds,...H.thresholds??{}},relations:{...P.relations,...H.relations??{}},trend:{...P.trend,...H.trend??{}},dayparts:{...P.dayparts,...H.dayparts??{}},ui:{...P.ui,...H.ui??{}}}}),u=Tt({balanceActivity:!1,balanceThresholds:!1,balanceTrend:!1,balanceDisplay:!1}),x=Tt({});Tt({}),Z(null),Z(null),Tt({onTrack:null,atRisk:null});const C=Tt({});Z(null),Z(null);const h=Z(null),k=O(()=>m.value.index.basis==="off");function v(){const P=new Set;for(const H of s.value)(H.groupIds||[]).forEach(oe=>P.add(Number(oe)));Object.values(a.groupsById||{}).forEach(H=>P.add(Number(H)));for(let H=1;H<=9;H++)if(!P.has(H))return H;return null}function S(P){const H=$(P),oe=s.value.find(ee=>Array.isArray(ee.groupIds)&&ee.groupIds.includes(H));return oe?oe.id:""}function N(P,H){if(!H){n("set-group",{id:P,n:0});return}const oe=s.value.find(X=>X.id===H);if(!oe){n("set-group",{id:P,n:0});return}const ee=A(oe.id);n("set-group",{id:P,n:ee})}function A(P){const H=s.value.find(X=>X.id===P);if(!H)return 0;const oe=Array.isArray(H.groupIds)&&H.groupIds.length?Number(H.groupIds[0]):null;if(oe&&Number.isFinite(oe))return oe;const ee=v()??0;return f(X=>{const le=X.categories.find(we=>we.id===P);le&&(le.groupIds=ee?[ee]:[])}),ee}function $(P){const H=Number((a.groupsById||{})[P]??0);return isFinite(H)?Math.max(0,Math.min(9,Math.trunc(H))):0}function T(P){const H=a.range==="month"?a.targetsMonth||{}:a.targetsWeek||{},oe=Number(H[P]??"");return isFinite(oe)?oe:""}function j(P){n("select-all",P)}function L(P){n("toggle-calendar",P)}function F(P){N(P.id,P.category)}function W(P){U(P.id,P.value)}function B(P){P!=="off"&&P!=="total"&&P!=="calendar"&&P!=="category"||f(H=>{H.activityCard||(H.activityCard=$o()),H.activityCard.forecastMode=P})}function E(P){P==="trend"?u.balanceTrend=!u.balanceTrend:P==="display"?u.balanceDisplay=!u.balanceDisplay:P==="thresholds"?u.balanceThresholds=!u.balanceThresholds:P==="activity"&&(u.balanceActivity=!u.balanceActivity)}function U(P,H){oo(H,{min:0,max:1e4,step:.25,decimals:2},oe=>{x[P]=oe},oe=>n("set-target",{id:P,h:oe}))}function R(P,H){oo(H,{min:0,max:1,step:.01,decimals:2},oe=>{C[P]=oe},oe=>f(ee=>{ee.balance.thresholds[P]=Number(oe.toFixed(2))}))}function ie(P){oo(P,{min:1,max:4,step:1,decimals:0},H=>{h.value=H},H=>f(oe=>{oe.balance.trend.lookbackWeeks=H}))}function V(P){const oe=["off","category","calendar","both"].includes(P)?P:"category";f(ee=>{ee.balance.index.basis=oe})}function J(P){f(H=>{H.balance.ui[P.key]=P.value})}function z(P){f(H=>{H.activityCard||(H.activityCard=$o()),H.activityCard[P.key]=P.value})}function fe(P){if(typeof P!="string")return null;const H=P.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(H))return null;if(H.length===4){const[,oe,ee,X]=H;return`#${oe}${oe}${ee}${ee}${X}${X}`.toUpperCase()}return H.toUpperCase()}function G(P){r.value=P}return t({openTab:G}),(P,H)=>(w(),Je(y(lf),null,{default:je(()=>[Bc(P.$slots,"actions",{},void 0,!0),H[32]||(H[32]=l("div",{class:"sb-title",title:"Filter and group calendars"},"Filter Calendars",-1)),l("div",xm,[l("div",_m,[l("button",{class:"sidebar-action-btn",type:"button",disabled:P.isLoading,onClick:H[0]||(H[0]=oe=>P.$emit("load"))}," Refresh ",8,Cm),l("button",{class:"sidebar-action-btn sidebar-action-btn--icon",type:"button",onClick:H[1]||(H[1]=oe=>P.$emit("toggle-nav")),"aria-label":P.navToggleLabel},D(P.navToggleIcon),9,Sm)]),l("div",$m,[Se(y(dl),{type:"radio",name:"range-week",checked:P.range==="week","onUpdate:checked":H[2]||(H[2]=oe=>{oe&&P.$emit("update:range","week")})},{default:je(()=>[...H[28]||(H[28]=[Ae("Week",-1)])]),_:1},8,["checked"]),Se(y(dl),{type:"radio",name:"range-month",checked:P.range==="month","onUpdate:checked":H[3]||(H[3]=oe=>{oe&&P.$emit("update:range","month")})},{default:je(()=>[...H[29]||(H[29]=[Ae("Month",-1)])]),_:1},8,["checked"])]),l("div",Tm,[Se(y(et),{class:"nav-btn",type:"tertiary",disabled:P.isLoading,onClick:H[4]||(H[4]=oe=>P.$emit("update:offset",P.offset-1)),title:"Previous"},{default:je(()=>[...H[30]||(H[30]=[Ae("",-1)])]),_:1},8,["disabled"]),l("span",Mm,D(P.from)+"  "+D(P.to),1),Se(y(et),{class:"nav-btn",type:"tertiary",disabled:P.isLoading,onClick:H[5]||(H[5]=oe=>P.$emit("update:offset",P.offset+1)),title:"Next"},{default:je(()=>[...H[31]||(H[31]=[Ae("",-1)])]),_:1},8,["disabled"])])]),l("div",Am,[l("button",{id:"opsdash-sidebar-tab-calendars",type:"button",class:Te(["sb-tab",{active:r.value==="calendars"}]),role:"tab","aria-selected":r.value==="calendars","aria-controls":"opsdash-sidebar-pane-calendars",onClick:H[6]||(H[6]=oe=>r.value="calendars")}," Calendars ",10,Dm)]),l("div",Em,[l("button",{id:"opsdash-sidebar-tab-activitybalance",type:"button",class:Te(["sb-tab",{active:r.value==="activitybalance"}]),role:"tab","aria-selected":r.value==="activitybalance","aria-controls":"opsdash-sidebar-pane-activitybalance",onClick:H[7]||(H[7]=oe=>r.value="activitybalance")}," Activity & Balance ",10,Om),a.dashboardMode!=="quick"?(w(),_("button",{key:0,id:"opsdash-sidebar-tab-profiles",type:"button",class:Te(["sb-tab",{active:r.value==="profiles"}]),role:"tab","aria-selected":r.value==="profiles","aria-controls":"opsdash-sidebar-pane-profiles",onClick:H[8]||(H[8]=oe=>r.value="profiles")}," Profiles ",10,Nm)):q("",!0)]),l("div",Lm,[l("button",{id:"opsdash-sidebar-tab-config",type:"button",class:Te(["sb-tab",{active:r.value==="config"}]),role:"tab","aria-selected":r.value==="config","aria-controls":"opsdash-sidebar-pane-config",onClick:H[9]||(H[9]=oe=>r.value="config")}," Config & Setup ",10,Im),a.dashboardMode!=="quick"?(w(),_("button",{key:0,id:"opsdash-sidebar-tab-report",type:"button",class:Te(["sb-tab",{active:r.value==="report"}]),role:"tab","aria-selected":r.value==="report","aria-controls":"opsdash-sidebar-pane-report",onClick:H[10]||(H[10]=oe=>r.value="report")}," Report ",10,Bm)):q("",!0)]),r.value==="calendars"?(w(),Je(_p,{key:0,calendars:P.calendars,selected:P.selected,range:P.range,"is-loading":P.isLoading,"category-options":s.value,"calendar-target-messages":x,"calendar-category-id":S,"get-target":T,onSelectAll:j,onToggleCalendar:L,onSetCategory:F,onTargetInput:W},null,8,["calendars","selected","range","is-loading","category-options","calendar-target-messages"])):r.value==="config"?(w(),Je(Ng,{key:1,presets:d.value,"is-loading":a.presetsLoading,"is-saving":a.presetSaving,"is-applying":a.presetApplying,warnings:a.presetWarnings,"theme-preference":a.themePreference,"effective-theme":a.effectiveTheme,"system-theme":a.systemTheme,onSave:H[11]||(H[11]=oe=>n("save-preset",oe)),onLoad:H[12]||(H[12]=oe=>n("load-preset",oe)),onDelete:H[13]||(H[13]=oe=>n("delete-preset",oe)),onRefresh:H[14]||(H[14]=()=>n("refresh-presets")),onClearWarnings:H[15]||(H[15]=()=>n("clear-preset-warnings")),onRerunOnboarding:H[16]||(H[16]=()=>n("rerun-onboarding")),onSetThemePreference:H[17]||(H[17]=oe=>n("set-theme-preference",oe)),onOpenShortcuts:H[18]||(H[18]=oe=>n("open-shortcuts",oe))},null,8,["presets","is-loading","is-saving","is-applying","warnings","theme-preference","effective-theme","system-theme"])):r.value==="profiles"?(w(),Je(Gg,{key:2,presets:d.value,"is-loading":a.presetsLoading,"is-saving":a.presetSaving,"is-applying":a.presetApplying,warnings:a.presetWarnings,onSave:H[19]||(H[19]=oe=>n("save-preset",oe)),onLoad:H[20]||(H[20]=oe=>n("load-preset",oe)),onDelete:H[21]||(H[21]=oe=>n("delete-preset",oe)),onRefresh:H[22]||(H[22]=()=>n("refresh-presets")),onClearWarnings:H[23]||(H[23]=()=>n("clear-preset-warnings")),onExportConfig:H[24]||(H[24]=()=>n("export-config")),onImportConfig:H[25]||(H[25]=oe=>n("import-config",oe))},null,8,["presets","is-loading","is-saving","is-applying","warnings"])):r.value==="report"?(w(),Je(hm,{key:3,"reporting-config":a.reportingConfig,saving:a.reportingSaving,onSaveReporting:H[26]||(H[26]=oe=>n("save-reporting",oe))},null,8,["reporting-config","saving"])):r.value==="activitybalance"?(w(),Je(bg,{key:4,id:"opsdash-sidebar-pane-activitybalance",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-activitybalance","activity-settings":g.value,"activity-toggles":b,"activity-forecast-mode":g.value.forecastMode,"activity-forecast-options":p,"balance-settings":m.value,"balance-threshold-messages":C,"balance-lookback-message":h.value,"help-activity":u.balanceActivity,"help-thresholds":u.balanceThresholds,"help-trend":u.balanceTrend,"help-display":u.balanceDisplay,"index-disabled":k.value,onToggleHelp:E,onSetActivityForecast:B,onSetLookback:ie,onSetActivityToggle:z,onSetThreshold:H[27]||(H[27]=oe=>R(oe.key,oe.value)),onSetIndexBasis:V,onSetUiToggle:J},null,8,["activity-settings","activity-forecast-mode","balance-settings","balance-threshold-messages","balance-lookback-message","help-activity","help-thresholds","help-trend","help-display","index-disabled"])):q("",!0)]),_:3}))}}),[["__scopeId","data-v-b8568ade"]]),Fm={key:0,class:"config-warning"},Wm=Ee({__name:"OnboardingIntroStep",props:{hasExistingConfig:{type:Boolean},snapshotSaving:{type:Boolean},saving:{type:Boolean},snapshotNotice:{},onSaveCurrentConfig:{type:Function}},setup(e){return(t,o)=>(w(),_(de,null,[o[2]||(o[2]=l("h3",null,"Opsdash visualises your calendar time and keeps goals on track.",-1)),o[3]||(o[3]=l("ul",{class:"highlights"},[l("li",null,"Targets  stay aligned with your weekly/monthly goals."),l("li",null,"Balance  ensure your focus areas get the right attention."),l("li",null,"Notes  capture insights and the story behind the numbers.")],-1)),t.hasExistingConfig?(w(),_("div",Fm,[o[1]||(o[1]=l("p",null," You already have a dashboard configuration. Saving a preset now keeps a backup before onboarding applies new values. ",-1)),Se(y(et),{type:"tertiary",size:"small",disabled:t.snapshotSaving||t.saving,"aria-busy":t.snapshotSaving,onClick:t.onSaveCurrentConfig},{default:je(()=>[...o[0]||(o[0]=[Ae(" Save current setup as preset ",-1)])]),_:1},8,["disabled","aria-busy","onClick"])])):q("",!0),o[4]||(o[4]=l("p",{class:"hint"},"You can change configuration later from the Sidebar.",-1)),t.snapshotNotice?(w(),_("div",{key:1,class:Te(["snapshot-notice",`snapshot-notice--${t.snapshotNotice.type}`]),role:"status"},D(t.snapshotNotice.message),3)):q("",!0)],64))}}),Hm={class:"preferences-grid"},Rm={class:"pref-card"},zm={class:"theme-options",role:"radiogroup","aria-label":"Theme preference"},jm={class:"theme-option"},Um=["checked"],Vm={class:"theme-copy"},Km={class:"theme-option__desc"},qm={class:"theme-option"},Gm=["checked"],Jm={class:"theme-option"},Ym=["checked"],Zm={class:"theme-preview"},Xm={class:"pref-card"},Qm={class:"field"},eh=["value","disabled"],th={key:0,class:"pref-hint"},oh={class:"pref-card"},ah={class:"field"},nh=["value"],rh={class:"pref-card pref-card--deck"},sh={class:"toggle-row"},ih=["checked"],lh={class:"deck-board-list"},dh={key:0,class:"deck-status"},ch={key:1,class:"deck-status deck-status--error"},uh={key:0,class:"deck-status"},fh={key:1,class:"deck-board-options",role:"list"},ph=["checked","onChange"],gh={class:"pref-card pref-card--reporting"},mh={class:"toggle-row"},hh=["checked"],vh={class:"field"},bh=["value"],yh={class:"field"},kh=["value"],wh={class:"field checkbox toggle-row"},xh=["checked"],_h={class:"pref-card pref-card--activity"},Ch={class:"toggle-row"},Sh=["checked"],$h=Ee({__name:"OnboardingPreferencesStep",props:{themePreference:{},systemThemeLabel:{},previewTheme:{},setThemePreference:{type:Function},totalHoursInput:{},categoryTotalHours:{},categoriesEnabled:{type:Boolean},onTotalHoursChange:{type:Function},allDayHoursInput:{},onAllDayHoursChange:{type:Function},deckSettingsDraft:{},setDeckEnabled:{type:Function},deckBoards:{},deckBoardsLoading:{type:Boolean},deckBoardsError:{},isDeckBoardVisible:{type:Function},toggleDeckBoard:{type:Function},reportingDraft:{},setReportingEnabled:{type:Function},setReportingSchedule:{type:Function},setReportingInterim:{type:Function},updateReporting:{type:Function},activityDraft:{},setActivityDayOff:{type:Function}},setup(e){return(t,o)=>(w(),_(de,null,[o[39]||(o[39]=l("h3",null,"Final tweaks",-1)),o[40]||(o[40]=l("p",{class:"hint"},"You can change these options later from Config & Setup.",-1)),l("div",Hm,[l("article",Rm,[o[14]||(o[14]=l("h4",null,"Theme & appearance",-1)),o[15]||(o[15]=l("p",{class:"pref-desc"},"Choose how Opsdash reacts to your Nextcloud theme. Charts keep their calendar colors.",-1)),l("div",zm,[l("label",jm,[l("input",{type:"radio",name:"onboarding-theme",value:"auto",checked:t.themePreference==="auto",onChange:o[0]||(o[0]=a=>t.setThemePreference("auto"))},null,40,Um),l("div",Vm,[o[11]||(o[11]=l("div",{class:"theme-option__title"},"Follow Nextcloud",-1)),l("div",Km,"Matches your account theme (currently "+D(t.systemThemeLabel)+").",1)])]),l("label",qm,[l("input",{type:"radio",name:"onboarding-theme",value:"light",checked:t.themePreference==="light",onChange:o[1]||(o[1]=a=>t.setThemePreference("light"))},null,40,Gm),o[12]||(o[12]=l("div",{class:"theme-copy"},[l("div",{class:"theme-option__title"},"Force light"),l("div",{class:"theme-option__desc"},"Always use the light palette, even if Nextcloud switches to dark.")],-1))]),l("label",Jm,[l("input",{type:"radio",name:"onboarding-theme",value:"dark",checked:t.themePreference==="dark",onChange:o[2]||(o[2]=a=>t.setThemePreference("dark"))},null,40,Ym),o[13]||(o[13]=l("div",{class:"theme-copy"},[l("div",{class:"theme-option__title"},"Force dark"),l("div",{class:"theme-option__desc"},"Keep Opsdash dark, even when Nextcloud stays light.")],-1))])]),l("div",Zm,"Preview: "+D(t.previewTheme==="dark"?"Dark":"Light")+" mode",1)]),l("article",Xm,[o[17]||(o[17]=l("h4",null,"Total weekly target",-1)),o[18]||(o[18]=l("p",{class:"pref-desc"},"Set your overall weekly goal. You can fine-tune per-category targets later.",-1)),l("label",Qm,[o[16]||(o[16]=l("span",{class:"label"},"Total target (h / week)",-1)),l("input",{type:"number",value:t.totalHoursInput??t.categoryTotalHours,disabled:t.categoriesEnabled,min:"0",max:"1000",step:"0.5",onInput:o[3]||(o[3]=a=>t.onTotalHoursChange(a.target))},null,40,eh)]),t.categoriesEnabled?(w(),_("p",th," Using categories  total derives from category targets ("+D(t.categoryTotalHours.toFixed(1))+" h). ",1)):q("",!0)]),l("article",oh,[o[20]||(o[20]=l("h4",null,"All-day events",-1)),o[21]||(o[21]=l("p",{class:"pref-desc"},"Tell Opsdash how many hours an all-day calendar event should contribute per day.",-1)),l("label",ah,[o[19]||(o[19]=l("span",{class:"label"},"All-day hours per day",-1)),l("input",{type:"number",value:t.allDayHoursInput,min:"0",max:"24",step:"0.25",onInput:o[4]||(o[4]=a=>t.onAllDayHoursChange(a.target))},null,40,nh)]),o[22]||(o[22]=l("p",{class:"pref-hint"},"Default is 8 h  adjust if your organisation tracks different durations.",-1))]),l("article",rh,[o[25]||(o[25]=l("h4",null,"Deck cards",-1)),o[26]||(o[26]=l("p",{class:"pref-desc"},"Bring Deck boards into Opsdash. Cards remain read-only so you can focus on status.",-1)),l("label",sh,[l("input",{type:"checkbox",checked:t.deckSettingsDraft.enabled,onChange:o[5]||(o[5]=a=>t.setDeckEnabled(a.target.checked))},null,40,ih),o[23]||(o[23]=l("span",null,"Show Deck tab inside Config & Setup",-1))]),t.deckSettingsDraft.enabled?(w(),_(de,{key:0},[o[24]||(o[24]=l("p",{class:"pref-hint"},"Select which boards appear. Deck permissions still apply.",-1)),l("div",lh,[t.deckBoardsLoading?(w(),_("p",dh,"Loading Deck boards")):t.deckBoardsError?(w(),_("p",ch,D(t.deckBoardsError),1)):(w(),_(de,{key:2},[t.deckBoards.length?(w(),_("div",fh,[(w(!0),_(de,null,Ce(t.deckBoards,a=>(w(),_("label",{key:a.id,class:"deck-board-option",role:"listitem"},[l("input",{type:"checkbox",checked:t.isDeckBoardVisible(a.id),onChange:n=>t.toggleDeckBoard(a.id,n.target.checked)},null,40,ph),l("span",null,D(a.title),1)]))),128))])):(w(),_("p",uh,"Open the Deck app to create a board."))],64))])],64)):q("",!0)]),l("article",gh,[o[33]||(o[33]=l("h4",null,"Weekly/monthly recap",-1)),o[34]||(o[34]=l("p",{class:"pref-desc"},"Opsdash can send a summary of targets, balance, and notes so you stay aligned.",-1)),l("label",mh,[l("input",{type:"checkbox",checked:t.reportingDraft.enabled,onChange:o[6]||(o[6]=a=>t.setReportingEnabled(a.target.checked))},null,40,hh),o[27]||(o[27]=l("span",null,"Send a recap automatically",-1))]),t.reportingDraft.enabled?(w(),_(de,{key:0},[l("label",vh,[o[29]||(o[29]=l("span",{class:"label"},"Schedule",-1)),l("select",{value:t.reportingDraft.schedule,onChange:o[7]||(o[7]=a=>t.setReportingSchedule(a.target.value))},[...o[28]||(o[28]=[l("option",{value:"week"},"Weekly",-1),l("option",{value:"month"},"Monthly",-1),l("option",{value:"both"},"Weekly + Monthly",-1)])],40,bh)]),l("label",yh,[o[31]||(o[31]=l("span",{class:"label"},"Mid-range reminders",-1)),l("select",{value:t.reportingDraft.interim,onChange:o[8]||(o[8]=a=>t.setReportingInterim(a.target.value))},[...o[30]||(o[30]=[l("option",{value:"none"},"No interim reminder",-1),l("option",{value:"midweek"},"Mid-week / mid-month only",-1),l("option",{value:"daily"},"Daily nudge while enabled",-1)])],40,kh)]),l("label",wh,[l("input",{type:"checkbox",checked:t.reportingDraft.alertOnRisk,onChange:o[9]||(o[9]=a=>t.updateReporting({alertOnRisk:a.target.checked}))},null,40,xh),o[32]||(o[32]=l("span",null,"Highlight when targets drift off-track",-1))])],64)):q("",!0)]),l("article",_h,[o[36]||(o[36]=l("h4",null,"Activity insights",-1)),o[37]||(o[37]=l("p",{class:"pref-desc"},"Choose whether the Activity & Schedule card shows the day-off heatmap.",-1)),l("label",Ch,[l("input",{type:"checkbox",checked:t.activityDraft.showDayOffTrend,onChange:o[10]||(o[10]=a=>t.setActivityDayOff(a.target.checked))},null,40,Sh),o[35]||(o[35]=l("span",null,"Show Days off trend heatmap",-1))]),o[38]||(o[38]=l("p",{class:"pref-hint"},"Helps you compare recent weeks/months at a glance.",-1))])])],64))}}),Th={class:"strategy-grid"},Mh=["onClick"],Ah={class:"subtitle"},Dh=Ee({__name:"OnboardingDashboardStep",props:{dashboardMode:{},setDashboardMode:{type:Function},dashboardPresets:{}},setup(e){return(t,o)=>(w(),_(de,null,[o[0]||(o[0]=l("h3",null,"Dashboard preset",-1)),o[1]||(o[1]=l("p",{class:"hint"},"Pick how much you want to see by default. You can change widgets later.",-1)),l("div",Th,[(w(!0),_(de,null,Ce(t.dashboardPresets,a=>(w(),_("article",{key:a.id,class:Te(["strategy-card",{active:t.dashboardMode===a.id}]),onClick:n=>t.setDashboardMode(a.id)},[l("h4",null,D(a.title),1),l("p",Ah,D(a.subtitle),1),l("ul",null,[(w(!0),_(de,null,Ce(a.highlights,n=>(w(),_("li",{key:n},D(n),1))),128))]),l("footer",null,"Widgets: "+D(a.widgets),1)],10,Mh))),128))])],64))}}),Eh={class:"strategy-grid"},Oh=["onClick"],Nh={class:"subtitle"},Lh=Ee({__name:"OnboardingStrategyStep",props:{strategies:{},selectedStrategy:{},setSelectedStrategy:{type:Function}},setup(e){return(t,o)=>(w(),_(de,null,[o[0]||(o[0]=l("h3",null,"Select a starting strategy",-1)),l("div",Eh,[(w(!0),_(de,null,Ce(t.strategies,a=>(w(),_("article",{key:a.id,class:Te(["strategy-card",{active:t.selectedStrategy===a.id}]),onClick:n=>t.setSelectedStrategy(a.id)},[l("h4",null,D(a.title),1),l("p",Nh,D(a.subtitle),1),l("ul",null,[(w(!0),_(de,null,Ce(a.highlights,n=>(w(),_("li",{key:n},D(n),1))),128))]),l("footer",null,"Best for: "+D(a.recommendedFor),1)],10,Oh))),128))])],64))}}),Ih={class:"calendar-list"},Bh=["value","checked","onChange"],Ph={key:0,class:"warning"},Fh=Ee({__name:"OnboardingCalendarsStep",props:{calendars:{},localSelection:{},toggleCalendar:{type:Function}},setup(e){return(t,o)=>(w(),_(de,null,[o[0]||(o[0]=l("h3",null,"Choose calendars to include",-1)),o[1]||(o[1]=l("p",null,"Select the calendars you want to track. You can adjust later at any time.",-1)),l("div",Ih,[(w(!0),_(de,null,Ce(t.calendars,a=>(w(),_("label",{key:a.id,class:Te(["calendar-item",{checked:t.localSelection.includes(a.id)}])},[l("input",{type:"checkbox",value:a.id,checked:t.localSelection.includes(a.id),onChange:n=>t.toggleCalendar(a.id,n.target)},null,40,Bh),l("span",{class:"dot",style:Be({backgroundColor:a.color||"#3B82F6"})},null,4),l("span",null,D(a.displayname),1)],2))),128))]),t.localSelection.length?q("",!0):(w(),_("div",Ph,"Select at least one calendar to continue."))],64))}}),Wh={key:0,class:"hint"},Hh={class:"categories-editor"},Rh={class:"category-card__header"},zh=["value","onInput"],jh={class:"category-actions"},Uh=["disabled","onClick"],Vh={class:"category-card__fields"},Kh={class:"field"},qh=["value","onInput"],Gh={class:"field checkbox"},Jh=["checked","onChange"],Yh={class:"field color-field"},Zh=["aria-expanded","aria-label","onClick"],Xh=["id"],Qh={class:"swatch-grid",role:"group","aria-label":"Preset colors"},ev=["aria-label","onClick"],tv={class:"custom-color"},ov=["value","onInput"],av={class:"category-total"},nv={key:0,class:"calendar-assignments"},rv={class:"cal-name"},sv=["value","onChange"],iv=["value"],lv={key:1,class:"hint"},dv=Ee({__name:"OnboardingCategoriesStep",props:{categoriesEnabled:{type:Boolean},categories:{},categoryTotalHours:{},selectedCalendars:{},assignments:{},addCategory:{type:Function},removeCategory:{type:Function},setCategoryLabel:{type:Function},setCategoryTarget:{type:Function},toggleCategoryWeekend:{type:Function},assignCalendar:{type:Function},openColorId:{},toggleColorPopover:{type:Function},closeColorPopover:{type:Function},categoryColorPalette:{},resolvedColor:{type:Function},applyColor:{type:Function},onColorInput:{type:Function}},setup(e){return(t,o)=>(w(),_(de,null,[o[6]||(o[6]=l("h3",null,"Configure categories & targets",-1)),t.categoriesEnabled?(w(),_(de,{key:1},[l("div",Hh,[(w(!0),_(de,null,Ce(t.categories,a=>(w(),_("article",{key:a.id,class:"category-card"},[l("header",Rh,[l("span",{class:"category-color-indicator",style:Be({backgroundColor:t.resolvedColor(a)}),"aria-hidden":"true"},null,4),l("input",{class:"category-name",type:"text",value:a.label,placeholder:"Category name",onInput:n=>t.setCategoryLabel(a.id,n.target.value)},null,40,zh),l("div",jh,[l("button",{class:"remove-category",type:"button",disabled:t.categories.length<=1,title:"Remove category",onClick:n=>t.removeCategory(a.id)},"  ",8,Uh)])]),l("div",Vh,[l("label",Kh,[o[1]||(o[1]=l("span",{class:"label"},"Target (h / week)",-1)),l("input",{type:"number",value:a.targetHours,min:"0",step:"0.5",onInput:n=>t.setCategoryTarget(a.id,n.target.value)},null,40,qh)]),l("label",Gh,[l("input",{type:"checkbox",checked:a.includeWeekend,onChange:n=>t.toggleCategoryWeekend(a.id,n.target.checked)},null,40,Jh),o[2]||(o[2]=l("span",null,"Include weekend",-1))]),l("div",Yh,[l("button",{type:"button",class:"color-link","aria-expanded":t.openColorId===a.id,"aria-label":`Choose color for ${a.label}`,"data-color-popover":"",onClick:ot(n=>t.toggleColorPopover(a.id),["stop"])}," Color ",8,Zh),t.openColorId===a.id?(w(),_("div",{key:0,class:"color-popover",id:`onboarding-color-popover-${a.id}`,tabindex:"-1",onKeydown:o[0]||(o[0]=fn(ot(n=>t.closeColorPopover(),["prevent"]),["esc"]))},[l("div",Qh,[(w(!0),_(de,null,Ce(t.categoryColorPalette,n=>(w(),_("button",{key:`${a.id}-swatch-${n}`,type:"button",class:Te(["color-swatch",{active:t.resolvedColor(a)===n}]),style:Be({backgroundColor:n}),"aria-label":`Use color ${n}`,onClick:r=>t.applyColor(a.id,n)},null,14,ev))),128))]),l("label",tv,[o[3]||(o[3]=l("span",null,"Custom",-1)),l("input",{class:"color-input",type:"color",value:t.resolvedColor(a),"aria-label":"Pick custom color",onInput:n=>t.onColorInput(a.id,n.target.value)},null,40,ov)])],40,Xh)):q("",!0)])])]))),128)),Se(y(et),{type:"tertiary",class:"add-category",onClick:t.addCategory},{default:je(()=>[...o[4]||(o[4]=[Ae("Add category",-1)])]),_:1},8,["onClick"]),l("div",av,"Total weekly target: "+D(t.categoryTotalHours.toFixed(1))+" h",1)]),t.selectedCalendars.length?(w(),_("div",nv,[o[5]||(o[5]=l("h4",null,"Assign calendars",-1)),(w(!0),_(de,null,Ce(t.selectedCalendars,a=>(w(),_("div",{key:a.id,class:"assignment-row"},[l("span",rv,D(a.displayname),1),l("select",{value:t.assignments[a.id],onChange:n=>t.assignCalendar(a.id,n.target.value)},[(w(!0),_(de,null,Ce(t.categories,n=>(w(),_("option",{key:n.id,value:n.id},D(n.label),9,iv))),128))],40,sv)]))),128))])):(w(),_("p",lv,"Select at least one calendar to continue."))],64)):(w(),_("p",Wh,"This strategy does not require categories."))],64))}}),cv={class:"review-grid"},uv={class:"hint"},fv={key:1},pv={key:0},gv={key:0},mv=Ee({__name:"OnboardingReviewStep",props:{strategyTitle:{},selectedCalendars:{},draftTargetsCategories:{},draftTotalHours:{},categoryTotalHours:{},deckReviewSummary:{},deckEnabled:{type:Boolean},deckVisibleBoards:{},reportingEnabled:{type:Boolean},reportingSummary:{},showDayOffTrend:{type:Boolean}},setup(e){return(t,o)=>(w(),_(de,null,[o[6]||(o[6]=l("h3",null,"Review your setup",-1)),l("div",cv,[l("div",null,[o[0]||(o[0]=l("h5",null,"Strategy",-1)),l("p",null,D(t.strategyTitle),1)]),l("div",null,[o[1]||(o[1]=l("h5",null,"Calendars",-1)),l("ul",null,[(w(!0),_(de,null,Ce(t.selectedCalendars,a=>(w(),_("li",{key:a.id},D(a.displayname),1))),128))])]),l("div",null,[o[2]||(o[2]=l("h5",null,"Targets preview",-1)),t.draftTargetsCategories.length?(w(),_(de,{key:0},[l("ul",null,[(w(!0),_(de,null,Ce(t.draftTargetsCategories,a=>(w(),_("li",{key:a.id},D(a.label)+"  "+D(a.targetHours)+" h",1))),128))]),l("p",uv,"Total weekly target: "+D(t.categoryTotalHours.toFixed(1))+" h",1)],64)):(w(),_("p",fv,"Total target: "+D(t.draftTotalHours)+" h per week",1))]),l("div",null,[o[3]||(o[3]=l("h5",null,"Deck tab",-1)),l("p",null,D(t.deckReviewSummary),1),t.deckEnabled&&t.deckVisibleBoards.length?(w(),_("ul",pv,[(w(!0),_(de,null,Ce(t.deckVisibleBoards.slice(0,3),a=>(w(),_("li",{key:a.id},D(a.title),1))),128)),t.deckVisibleBoards.length>3?(w(),_("li",gv,"+"+D(t.deckVisibleBoards.length-3)+" more",1)):q("",!0)])):q("",!0)]),l("div",null,[o[4]||(o[4]=l("h5",null,"Reporting",-1)),l("p",null,D(t.reportingEnabled?t.reportingSummary:"Recap disabled"),1)]),l("div",null,[o[5]||(o[5]=l("h5",null,"Activity card",-1)),l("p",null,D(t.showDayOffTrend?"Days-off heatmap enabled":"Heatmap hidden"),1)])]),o[7]||(o[7]=l("p",{class:"hint"},"You can fine-tune categories, goals, and pacing once the dashboard loads.",-1))],64))}});function hv(){const e=Z(!1),t=Z(!1),o=Z(0),a=Z(null),n=O(()=>e.value||t.value);async function r(i){o.value+=1,a.value=i??null,e.value=!1,t.value=!0,await Yt()}return{autoWizardNeeded:e,manualWizardOpen:t,onboardingRunId:o,onboardingWizardVisible:n,openWizardFromSidebar:r,wizardStartStep:a}}const zo=1,vv=[{id:"total_only",title:"Focused",subtitle:"Keep it simple with one total goal",highlights:["Single weekly/monthly target","Great for personal overview","Upgradable later"],layers:{total:!0,categories:!1,calendars:!1},recommendedFor:"Individuals tracking a single workload"},{id:"total_plus_categories",title:"Balanced",subtitle:"Track balance across a few life areas",highlights:["Total goal plus key categories","Automatic category summaries","Calendar grouping suggestions"],layers:{total:!0,categories:!0,calendars:!1},recommendedFor:"Work/life blend with a handful of focus areas"},{id:"full_granular",title:"Power",subtitle:"Targets per category and calendar",highlights:["Detailed per-calendar goals","Category dashboards & pacing","Best for multi-project oversight"],layers:{total:!0,categories:!0,calendars:!0},recommendedFor:"Power users managing several project calendars"}],bv={work:["work","focus","deep","project"],personal:["personal","home","family","life"],recovery:["recovery","wellness","rest","health"],hobby:["hobby","learn","study","growth"],sport:["sport","fitness","gym","run","ride"]},po=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1"];function yv(e,t,o,a){const n=e.toLowerCase();for(const r of t)if((o[r]||[]).some(s=>n.includes(s)))return r;return t[a%t.length]}function kv(e){const t={};return Object.entries(e).forEach(([o,a])=>{t[o]=Number((a*4).toFixed(2))}),t}function wa(e){if(typeof e!="string")return null;const t=e.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t))return null;if(t.length===4){const[,o,a,n]=t;return`#${o}${o}${a}${a}${n}${n}`.toUpperCase()}return t.toUpperCase()}function wv(e){const t=new Set,o=[];return e.forEach((a,n)=>{const r=((a==null?void 0:a.id)||`cat_${n}`).trim()||`cat_${n}`;t.has(r)||(t.add(r),o.push({id:r,label:((a==null?void 0:a.label)||r).trim()||`Category ${n+1}`,targetHours:Number.isFinite(a==null?void 0:a.targetHours)?Number(a.targetHours):0,includeWeekend:!!(a!=null&&a.includeWeekend),paceMode:(a==null?void 0:a.paceMode)==="time_aware"?"time_aware":"days_only",color:wa(a==null?void 0:a.color)??null}))}),o}function xv(e,t,o){const a={};if(!t.length)return a;const n=new Set(t.map(i=>i.id)),r=t[0].id;return e.forEach(i=>{const s=o[i];a[i]=n.has(s)?s:r}),a}function _v(){return vv}function yl(e,t,o){const a=o.length?[...new Set(o.filter(c=>t.some(f=>f.id===c)))]:t.map(c=>c.id);if(e==="total_only")return{categories:[],assignments:{}};const n=e==="total_plus_categories"?["work","personal","recovery"]:["work","hobby","sport"],r=e==="total_plus_categories"?[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,color:po[0]},{id:"personal",label:"Personal",targetHours:8,includeWeekend:!0,color:po[1]},{id:"recovery",label:"Recovery",targetHours:4,includeWeekend:!0,color:po[2]}]:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,color:po[0]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,color:po[1]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,color:po[2]}],i={};let s=0;return t.filter(c=>a.includes(c.id)).forEach(c=>{i[c.id]=yv(c.displayname,n,bv,s),s+=1}),{categories:r.map(c=>({id:c.id,label:c.label,targetHours:c.targetHours,includeWeekend:c.includeWeekend,paceMode:"days_only",color:wa(c.color)??null})),assignments:i}}function kl(e,t,o,a){var x;const n=o.length?[...new Set(o.filter(C=>t.some(h=>h.id===C)))]:t.map(C=>C.id),r=ct(to()),i={},s={};if(e==="total_only"){const C=Ut(r);return C.totalHours=C.totalHours||40,C.categories=[],C.ui.showCategoryBlocks=!1,C.ui.showCategoryCharts=!1,C.ui.showCalendarCharts=!1,{selected:n,targetsConfig:ct(C),groups:i,targetsWeek:s,targetsMonth:{}}}const d=yl(e,t,n),c=wv((x=a==null?void 0:a.categories)!=null&&x.length?a.categories:d.categories),f=xv(n,c.length?c:d.categories,(a==null?void 0:a.assignments)??d.assignments),g=Ut(r),b=new Map;let p=0;const m=C=>{const h=wa(C.color);if(h)return h;const k=t.find(S=>f[S.id]===C.id&&wa(S.color));if(k)return wa(k.color)??null;const v=po[p%po.length];return p+=1,v??null};g.categories=c.map((C,h)=>{const k=h+1;return b.set(C.id,k),{id:C.id,label:C.label,targetHours:Number(C.targetHours.toFixed(2)),includeWeekend:C.includeWeekend,paceMode:C.paceMode,color:m(C),groupIds:[k]}}),g.totalHours=g.categories.reduce((C,h)=>C+h.targetHours,0),g.totalHours<=0&&(g.totalHours=40),g.ui.showCategoryBlocks=g.categories.length>0,g.ui.showCategoryCharts=g.categories.length>0,g.ui.showCalendarCharts=e==="full_granular",g.includeZeroDaysInStats=!1,g.balance.categories=g.categories.map(C=>C.id),g.balance.useCategoryMapping=!0;const u={};return Object.values(f).forEach(C=>{u[C]=(u[C]??0)+1}),Object.entries(f).forEach(([C,h])=>{const k=b.get(h);if(k&&(i[C]=k,e==="full_granular")){const v=g.categories.find(A=>A.id===h);if(!v)return;const S=u[h]||1,N=Number((v.targetHours/S).toFixed(2));s[C]=N}}),{selected:n,targetsConfig:ct(g),groups:i,targetsWeek:s,targetsMonth:kv(s)}}function gn(){return{enabled:!1,schedule:"both",interim:"none",reminderLead:"1d",alertOnRisk:!0,riskThreshold:.85,notifyEmail:!0,notifyNotification:!0}}function yr(e,t){const o=t??gn();if(!e||typeof e!="object")return{...o};const a=e.schedule==="week"||e.schedule==="month"?e.schedule:"both",n=e.interim==="midweek"||e.interim==="daily"?e.interim:"none",r=e.reminderLead==="1d"||e.reminderLead==="2d"?e.reminderLead:"none",i=Number(e.riskThreshold),s=Number.isFinite(i)&&i>=0&&i<=1?i:o.riskThreshold;return{enabled:!!e.enabled,schedule:a,interim:n,reminderLead:r,alertOnRisk:e.alertOnRisk!==!1,riskThreshold:s,notifyEmail:e.notifyEmail!==!1,notifyNotification:!!e.notifyNotification}}function mn(){return{enabled:!0,filtersEnabled:!0,defaultFilter:"all",hiddenBoards:[],mineMode:"assignee",solvedIncludesArchived:!0,ticker:{autoScroll:!0,intervalSeconds:5,showBoardBadges:!0}}}function kr(e,t){var c,f,g;const o=t??mn();if(!e||typeof e!="object")return{...o};const n=["all","mine","open_all","open_mine","done_all","done_mine","archived_all","archived_mine"].includes(e.defaultFilter)?e.defaultFilter:"all",r=e.mineMode==="creator"||e.mineMode==="both"?e.mineMode:"assignee",i=e.solvedIncludesArchived!==!1,s={autoScroll:((c=e.ticker)==null?void 0:c.autoScroll)!==!1,intervalSeconds:Cv((f=e.ticker)==null?void 0:f.intervalSeconds,o.ticker.intervalSeconds),showBoardBadges:((g=e.ticker)==null?void 0:g.showBoardBadges)!==!1},d=Array.isArray(e.hiddenBoards)?Array.from(new Set(e.hiddenBoards.map(b=>Number(b)).filter(b=>Number.isInteger(b)&&b>0))):o.hiddenBoards.slice();return{enabled:e.enabled!==!1,filtersEnabled:e.filtersEnabled!==!1,defaultFilter:n,hiddenBoards:d,mineMode:r,solvedIncludesArchived:i,ticker:s}}function Cv(e,t){const o=Number(e);return Number.isFinite(o)?Math.min(10,Math.max(3,Math.trunc(o))):t}class wr extends Error{constructor(t,o,a){super(t),this.status=o,this.body=a}}async function Sv(e){const t=Date.parse(e.from),o=Date.parse(e.to);if(!Number.isFinite(t)||!Number.isFinite(o)||t>o)return[];const a=e.includeCompleted!==!1,n=e.includeArchived!==!1,r=await wl();if(r.length===0)return[];const i=new Map;r.forEach(d=>{d.id!=null&&i.set(d.id,{id:d.id,title:d.title||`Board ${d.id}`,color:_l(d.color)})});const s=[];for(const d of r){if(d.id==null)continue;let c;try{c=await _r(Cr(`/apps/deck/api/v1/boards/${d.id}/stacks`,{details:1}))}catch(g){if(Cl(g))continue;if(g instanceof wr&&g.status===400)c=await _r(Cr(`/apps/deck/api/v1/boards/${d.id}/stacks`));else throw g}const f=Tv(c);for(const g of f){if(g.cards==null||g.id==null)continue;const b=g.title||`Stack ${g.id}`;for(const p of g.cards){const m=Mv(p,i.get(d.id),{stackId:g.id,stackTitle:b});if(!m)continue;if(!(m.dueTs!=null||m.doneTs!=null)){if(m.status==="archived"&&!n)continue;s.push({...m,match:"due"});continue}if(m.status==="archived"&&!n)continue;const x=m.dueTs!=null&&xl(m.dueTs,t,o),C=a&&m.doneTs!=null&&xl(m.doneTs,t,o),h=m.status!=="active",k=a&&(C||h&&x);!(x&&!k)&&!k||s.push({...m,match:k?"completed":"due"})}}}return s.sort((d,c)=>{const f=Number.MAX_SAFE_INTEGER,g=d.match==="due"?d.dueTs??d.doneTs??f:d.doneTs??d.dueTs??f,b=c.match==="due"?c.dueTs??c.doneTs??f:c.doneTs??c.dueTs??f;return g!==b?g-b:d.boardId!==c.boardId?d.boardId-c.boardId:d.id-c.id})}async function wl(){let e;try{e=await _r(Cr("/apps/deck/api/v1/boards",{details:0}))}catch(t){if(Cl(t))return[];throw t}return $v(e)}function $v(e){if(Array.isArray(e))return e;if(e&&typeof e=="object"){if(Array.isArray(e.data))return e.data;if(e.ocs&&Array.isArray(e.ocs.data))return e.ocs.data}return[]}function Tv(e){if(Array.isArray(e))return e;if(e&&typeof e=="object"){if(Array.isArray(e.data))return e.data;if(e.ocs&&Array.isArray(e.ocs.data))return e.ocs.data}return[]}function Mv(e,t,o){var c,f,g,b;if(!e||typeof e!="object"||e.id==null||!o)return null;const a=xr(e.duedate),n=xr(e.done),r=xr(e.createdAt??e.created),i=e.boardId||(t==null?void 0:t.id);if(i==null)return null;const s=e.archived?"archived":n!=null?"done":"active",d=(t==null?void 0:t.title)||`Board ${i}`;return{id:e.id,title:e.title||`Card ${e.id}`,description:e.description||"",boardId:i,boardTitle:d,boardColor:t==null?void 0:t.color,stackTitle:o.stackTitle,stackId:o.stackId,due:a!=null?new Date(a).toISOString():void 0,dueTs:a??void 0,done:n!=null?new Date(n).toISOString():void 0,doneTs:n??void 0,archived:!!e.archived,status:s,created:r!=null?new Date(r).toISOString():void 0,createdTs:r??void 0,createdBy:(c=hn(e.owner??e.createdBy??e.creator))==null?void 0:c.uid,createdByDisplay:(f=hn(e.owner??e.createdBy??e.creator))==null?void 0:f.displayName,doneBy:(g=hn(e.doneBy??e.completedBy??e.lastEditor))==null?void 0:g.uid,doneByDisplay:(b=hn(e.doneBy??e.completedBy??e.lastEditor))==null?void 0:b.displayName,labels:Array.isArray(e.labels)?e.labels.filter(p=>!!(p&&typeof p=="object")).map(p=>({id:p.id,title:p.title||`Label ${p.id??""}`.trim(),color:_l(p.color)})):[],assignees:Array.isArray(e.assignedUsers)?e.assignedUsers.map(p=>Av(p)).filter(Boolean):[],match:"due"}}function Av(e){if(!e)return null;const t=e.participant;if(t&&typeof t=="object"){const o=typeof t.uid=="string"?t.uid:void 0,a=typeof t.displayname=="string"?t.displayname:void 0;if(o||a)return{id:e.id,uid:o,displayName:a}}return typeof t=="string"?{id:e.id,uid:t}:null}function hn(e){if(!e)return null;if(typeof e=="string"){const t=e.trim();return t?{uid:t}:null}if(typeof e=="object"){const t=typeof e.uid=="string"?e.uid:typeof e.participant=="string"?e.participant:void 0,o=typeof e.displayname=="string"?e.displayname:typeof e.id=="string"||typeof e.id=="number"?String(e.id):void 0;if(t||o)return{uid:t,displayName:o}}return null}function xr(e){if(typeof e=="number"&&Number.isFinite(e))return e>1e12?Math.trunc(e):e*1e3;if(typeof e=="string"&&e.trim()!==""){const t=Date.parse(e);return Number.isFinite(t)?t:null}return null}function xl(e,t,o){return e>=t&&e<=o}function _l(e){if(!e||typeof e!="string")return;const t=e.trim();if(t!=="")return t.startsWith("#")?t:`#${t}`}async function _r(e){const t={Accept:"application/json","OCS-APIREQUEST":"true"},o=Ev();o&&(t.requesttoken=o);const a=await fetch(e,{credentials:"same-origin",headers:t}),n=await a.text();if(!a.ok)throw new wr(`Deck request failed (${a.status})`,a.status,n);return n?JSON.parse(n):null}function Cr(e,t){var s,d,c;const o=e.startsWith("/")?e:`/${e}`,a=t?Dv(t):"",n=typeof window<"u"?window:{};if(n.OC&&typeof n.OC.generateUrl=="function"){const f=n.OC.generateUrl(o);return a?`${f}?${a}`:f}const r=n.OC&&(n.OC.webroot||((d=(s=n.OC).getRootPath)==null?void 0:d.call(s)))||n._oc_webroot||"",i=typeof((c=n.location)==null?void 0:c.origin)=="string"?n.location.origin:"";return r?a?`${r}${o}?${a}`:`${r}${o}`:i?a?`${i}${o}?${a}`:`${i}${o}`:a?`${o}?${a}`:o}function Dv(e){const t=new URLSearchParams;return Object.entries(e).forEach(([o,a])=>{a!=null&&t.append(o,String(a))}),t.toString()}function Ev(){var o;const e=typeof window<"u"?window:{},t=((o=e.OC)==null?void 0:o.requestToken)||e.oc_requesttoken;return typeof t=="string"?t:void 0}function Cl(e){return e instanceof wr&&(e.status===404||e.status===401||e.status===503)}function Ov(e){var Cn,mo;const{props:t,emit:o}=e,a=["intro","strategy","dashboard","calendars","categories","preferences","review"],n=Z(0),r=Z("total_only"),i=Z(t.initialDashboardMode||"standard"),s=Z([]),d=Z([]),c=Z({}),f=Z("auto"),g=Z(8),b=Z(null),p=Z(Ze(t.initialDeckSettings??mn())),m=Z({...t.initialReportingConfig??gn()}),u=Z({showDayOffTrend:((mo=(Cn=t.initialTargetsConfig)==null?void 0:Cn.activityCard)==null?void 0:mo.showDayOffTrend)??!0}),x=Z([]),C=Z(!1),h=Z(""),k=[{id:"quick",title:"Quick",subtitle:"Minimal view, core widgets only",highlights:["Time summary","Targets","Activity","Deck cards lite"],widgets:"4 widgets"},{id:"standard",title:"Standard",subtitle:"Balanced set for most users",highlights:["Time/Targets/Balance","Activity & trends","Deck cards"],widgets:"67 widgets"},{id:"pro",title:"Pro",subtitle:"Full layout with extras",highlights:["All core widgets","Deck cards & summary","Notes + text block"],widgets:"8+ widgets"}],v=O(()=>{if(!p.value.enabled)return[];const Y=new Set(p.value.hiddenBoards||[]);return x.value.filter(ve=>!Y.has(ve.id))}),S=O(()=>{if(!p.value.enabled)return"Deck tab disabled";if(C.value)return"Deck tab enabled  loading boards";if(h.value)return"Deck tab enabled  open Deck to finish setup.";if(!x.value.length)return"Deck tab enabled  create a Deck board to see cards.";if(!v.value.length)return"Deck tab enabled  all boards hidden";if(v.value.length===x.value.length){const Y=v.value.length;return Y===1?"Showing 1 board":`Showing all ${Y} boards`}return v.value.length===1?`Showing ${v.value[0].title}`:v.value.length===2?`Showing ${v.value[0].title} and ${v.value[1].title}`:`Showing ${v.value.length} boards`}),N=O(()=>{if(!m.value.enabled)return"Recap disabled";const Y=m.value.schedule==="both"?"Weekly + monthly recap":m.value.schedule==="week"?"Weekly recap":"Monthly recap",ve=m.value.interim==="daily"?"Daily reminder":m.value.interim==="midweek"?"Mid-range reminder":"No interim reminder";return`${Y}  ${ve}`}),A=Z(null),$=O(()=>f.value==="auto"?t.systemTheme==="dark"?"dark":"light":f.value),T=O(()=>t.systemTheme==="dark"?"dark":"light"),j=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],L=O(()=>d.value.reduce((Y,ve)=>Y+(Number.isFinite(ve.targetHours)?ve.targetHours:0),0)),F=O(()=>{const Y=new Set,ve=Me=>{const nt=he(Me);nt&&Y.add(nt)};return t.calendars.forEach(Me=>ve(Me.color)),d.value.forEach(Me=>ve(Me.color)),j.forEach(Me=>Y.add(Me)),Array.from(Y)}),W=_v(),B=O(()=>W.find(Y=>Y.id===r.value)??W[0]),E=O(()=>B.value.layers.categories),U=O(()=>t.closable!==!1),R=O(()=>a.filter(Y=>Y==="categories"?E.value:!0)),ie=O(()=>R.value[Math.min(n.value,R.value.length-1)]),V=O(()=>n.value+1),J=O(()=>R.value.length),z=O(()=>t.saving===!0),fe=O(()=>t.snapshotSaving===!0),G=O(()=>t.snapshotNotice??null),P="opsdash-onboarding-lock";function H(Y){if(typeof document>"u")return;const ve=document.body;ve&&(Y?(ve.classList.add(P),ve.dataset.opsdashOnboarding="1"):(ve.classList.remove(P),delete ve.dataset.opsdashOnboarding))}Le(()=>t.visible,Y=>{Y&&(oe(),me()),H(Y)},{immediate:!0}),It(()=>{typeof document<"u"&&document.addEventListener("click",pe),Ue().catch(Y=>{console.error("[opsdash] deck board load failed",Y)})}),Yn(()=>{typeof document<"u"&&document.removeEventListener("click",pe),H(!1)});function oe(){var ve,Me,nt;n.value=0,r.value=t.initialStrategy??"total_only";const Y=(ve=t.initialSelection)!=null&&ve.length?[...t.initialSelection]:t.calendars.map(st=>st.id);s.value=Array.from(new Set(Y.filter(st=>t.calendars.some(jr=>jr.id===st)))),f.value=t.initialThemePreference??"auto",g.value=Pe(t.initialAllDayHours??8),b.value=Fe(t.initialTotalHours??null),p.value=Ze(t.initialDeckSettings??mn()),m.value={...t.initialReportingConfig??gn()},u.value={showDayOffTrend:((nt=(Me=t.initialTargetsConfig)==null?void 0:Me.activityCard)==null?void 0:nt.showDayOffTrend)??!0},ee(),E.value?b.value=Fe(L.value):b.value===null&&(b.value=40),I()}function ee(){const Y=yl(r.value,t.calendars,s.value);d.value=Y.categories.map(ve=>({...ve})),c.value={...Y.assignments},X(),M()}function X(){if(!E.value||!d.value.length){c.value={};return}const Y=new Set(d.value.map(nt=>nt.id)),ve=d.value[0].id,Me={};s.value.forEach(nt=>{const st=c.value[nt];Me[nt]=Y.has(st)?st:ve}),c.value=Me}const le=O(()=>t.calendars.filter(Y=>s.value.includes(Y.id))),we=O(()=>kl(r.value,t.calendars,s.value,E.value?{categories:d.value,assignments:c.value}:void 0)),He=O(()=>B.value.title);function M(){if(E.value){b.value=Fe(L.value);return}b.value===null&&(b.value=Fe(t.initialTotalHours??40))}function I(){if(!t.startStep)return;const Y=R.value.indexOf(t.startStep);Y>=0&&(n.value=Y)}function K(Y){const ve=R.value.indexOf(Y);ve>=0&&(n.value=ve)}function ne(Y){switch(Y){case"intro":return"Intro";case"strategy":return"Modes";case"dashboard":return"Dashboard";case"calendars":return"Calendars";case"categories":return"Targets";case"preferences":return"Preferences";case"review":return"Review";default:return Y}}Le(r,()=>{ee(),n.value=Math.min(n.value,R.value.length-1)}),Le(R,Y=>{n.value>=Y.length&&(n.value=Math.max(Y.length-1,0))}),Le(()=>t.startStep,I),Le(E,()=>{M()}),Le(L,Y=>{E.value&&(b.value=Fe(Y))}),Le(ie,Y=>{Y!=="categories"&&me()}),Le(()=>t.visible,Y=>{Y||me()}),Le(s,()=>{X()},{deep:!0}),Le(d,()=>{X()},{deep:!0});function ae(){const Y=`cat_${Date.now().toString(36)}_${d.value.length}`;d.value=[...d.value,{id:Y,label:`Category ${d.value.length+1}`,targetHours:8,includeWeekend:!1,paceMode:"days_only"}],X()}function se(Y){d.value.length<=1||(d.value=d.value.filter(ve=>ve.id!==Y),X())}function ge(Y,ve){d.value=d.value.map(Me=>Me.id===Y?{...Me,label:ve}:Me)}function ue(Y,ve){const Me=Number(ve),nt=Number.isFinite(Me)?Math.max(0,Math.min(1e3,Me)):void 0;d.value=d.value.map(st=>st.id===Y?{...st,targetHours:nt??st.targetHours}:st)}function ce(Y,ve){d.value=d.value.map(Me=>Me.id===Y?{...Me,includeWeekend:ve}:Me)}function te(Y,ve){c.value={...c.value,[Y]:ve}}function $e(Y){if(A.value===Y){me();return}A.value=Y,Yt(()=>{const ve=document.getElementById(`onboarding-color-popover-${Y}`);ve==null||ve.focus()})}function me(){A.value=null}function pe(Y){const ve=Y.target;ve!=null&&ve.closest("[data-color-popover]")||me()}function he(Y){if(typeof Y!="string")return null;const ve=Y.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(ve))return null;if(ve.length===4){const[,Me,nt,st]=ve;return`#${Me}${Me}${nt}${nt}${st}${st}`.toUpperCase()}return ve.toUpperCase()}function ke(Y){return he(Y==null?void 0:Y.color)??be.value}const be=O(()=>F.value[0]??"#2563EB");function _e(Y,ve){d.value=d.value.map(Me=>Me.id===Y?{...Me,color:ve}:Me)}function xe(Y,ve){const Me=he(ve);_e(Y,Me??be.value)}function Ie(Y,ve){const Me=he(ve);_e(Y,Me??be.value),me()}function Pe(Y){if(!Number.isFinite(Y))return 8;const ve=Math.max(0,Math.min(24,Y));return Math.round(ve*100)/100}function Fe(Y){if(!Number.isFinite(Y))return null;const ve=Math.max(0,Math.min(1e3,Number(Y)));return Math.round(ve*100)/100}function Ze(Y){return JSON.parse(JSON.stringify(Y))}async function Ue(){if(C.value=!0,h.value="",!(typeof window<"u"&&typeof window.OC<"u")){C.value=!1,x.value=[];return}try{const ve=await wl();x.value=ve,h.value=""}catch{h.value="Unable to load Deck boards. Open Deck to create one.",x.value=[]}finally{C.value=!1}}function Oe(Y){p.value={...p.value,enabled:Y}}function Re(Y){return!(p.value.hiddenBoards||[]).includes(Y)}function go(Y,ve){const Me=new Set(p.value.hiddenBoards||[]);ve?Me.delete(Y):Me.add(Y),p.value={...p.value,hiddenBoards:Array.from(Me).sort((nt,st)=>nt-st)}}function Mo(Y,ve){d.value=d.value.map(Me=>Me.id===Y?{...Me,paceMode:ve}:Me)}function Ir(Y){if(E.value)return;const ve=Number(Y.value);if(!Number.isFinite(ve)){b.value=null;return}b.value=Fe(ve)}function wn(Y){const ve=Number(Y.value);g.value=Pe(Number.isFinite(ve)?ve:g.value)}function Br(Y){m.value={...m.value,enabled:Y}}function $a(Y){m.value={...m.value,schedule:Y}}function Pr(Y){m.value={...m.value,interim:Y}}function Fr(Y){m.value={...m.value,...Y}}function Wr(Y){u.value={...u.value,showDayOffTrend:Y}}const xn=O(()=>n.value>0),Ta=O(()=>n.value<R.value.length-1),Ao=O(()=>{if(ie.value==="strategy")return!r.value;if(ie.value==="calendars")return s.value.length===0;if(ie.value==="categories"&&E.value){if(!s.value.length||!d.value.length)return!0;const Y=new Set(d.value.map(ve=>ve.id));if(s.value.some(ve=>!Y.has(c.value[ve])))return!0}return ie.value==="preferences"&&(!E.value&&(b.value===null||b.value<0)||g.value<0||g.value>24)});function Vo(){Ta.value&&!Ao.value&&n.value++}function Hr(){xn.value&&n.value--}function _n(){o("skip")}function Ma(){U.value&&o("close")}function Rr(){const Y=kl(r.value,t.calendars,s.value,E.value?{categories:d.value.map(Me=>({...Me})),assignments:{...c.value}}:void 0),ve=Y.targetsConfig;if(ve.allDayHours=Pe(g.value),E.value){const Me=Fe(L.value);Me!=null&&(ve.totalHours=Me)}else if(b.value!=null){const Me=Fe(b.value);Me!=null&&(ve.totalHours=Me)}o("complete",{strategy:r.value,selected:[...s.value],targetsConfig:ve,groups:Y.groups,targetsWeek:Y.targetsWeek,targetsMonth:Y.targetsMonth,themePreference:f.value,deckSettings:Ze(p.value),reportingConfig:{...m.value},activityCard:{...u.value},dashboardMode:i.value})}function zr(Y,ve){if(ve.checked){s.value.includes(Y)||(s.value=[...s.value,Y]);return}s.value=s.value.filter(Me=>Me!==Y)}return{stepOrder:a,stepIndex:n,selectedStrategy:r,dashboardMode:i,localSelection:s,categories:d,assignments:c,themePreference:f,allDayHoursInput:g,totalHoursInput:b,deckSettingsDraft:p,reportingDraft:m,activityDraft:u,deckBoards:x,deckBoardsLoading:C,deckBoardsError:h,dashboardPresets:k,deckVisibleBoards:v,deckReviewSummary:S,reportingSummary:N,openColorId:A,previewTheme:$,systemThemeLabel:T,categoryTotalHours:L,categoryColorPalette:F,strategies:W,categoriesEnabled:E,isClosable:U,enabledSteps:R,currentStep:ie,stepNumber:V,totalSteps:J,saving:z,snapshotSaving:fe,snapshotNotice:G,selectedCalendars:le,draft:we,strategyTitle:He,applyStartStep:I,goToStep:K,stepLabel:ne,addCategory:ae,removeCategory:se,setCategoryLabel:ge,setCategoryTarget:ue,toggleCategoryWeekend:ce,assignCalendar:te,toggleColorPopover:$e,closeColorPopover:me,resolvedColor:ke,applyColor:Ie,onColorInput:xe,setDeckEnabled:Oe,isDeckBoardVisible:Re,toggleDeckBoard:go,setCategoryPaceMode:Mo,onTotalHoursChange:Ir,onAllDayHoursChange:wn,setReportingEnabled:Br,setReportingSchedule:$a,setReportingInterim:Pr,updateReporting:Fr,setActivityDayOff:Wr,canGoBack:xn,canGoNext:Ta,nextDisabled:Ao,nextStep:Vo,prevStep:Hr,handleSkip:_n,handleClose:Ma,emitComplete:Rr,toggleCalendar:zr,resetWizard:oe}}const Nv={key:0,class:"onboarding-overlay",role:"dialog","aria-modal":"true"},Lv={class:"onboarding-header"},Iv={class:"onboarding-title"},Bv={class:"subtitle"},Pv={class:"onboarding-actions"},Fv=["disabled"],Wv=["disabled"],Hv={class:"onboarding-step-nav","aria-label":"Onboarding steps"},Rv=["disabled","onClick"],zv={class:"onboarding-body"},jv={key:0,class:"onboarding-step"},Uv={key:1,class:"onboarding-step"},Vv={key:2,class:"onboarding-step"},Kv={key:3,class:"onboarding-step"},qv={key:4,class:"onboarding-step"},Gv={key:5,class:"onboarding-step"},Jv={key:6,class:"onboarding-step"},Yv={class:"onboarding-footer"},Zv=Ee({__name:"OnboardingWizard",props:{visible:{type:Boolean},calendars:{},initialSelection:{},initialStrategy:{},startStep:{},onboardingVersion:{},saving:{type:Boolean},closable:{type:Boolean},initialThemePreference:{},systemTheme:{},initialAllDayHours:{},initialTotalHours:{},initialDeckSettings:{},initialReportingConfig:{},hasExistingConfig:{type:Boolean},snapshotSaving:{type:Boolean},snapshotNotice:{},initialDashboardMode:{},initialTargetsConfig:{}},emits:["close","skip","complete","save-current-config"],setup(e,{emit:t}){const o=e,a=t,{stepNumber:n,totalSteps:r,enabledSteps:i,currentStep:s,isClosable:d,saving:c,stepLabel:f,goToStep:g,handleClose:b,handleSkip:p,canGoBack:m,canGoNext:u,nextDisabled:x,prevStep:C,nextStep:h,emitComplete:k,themePreference:v,systemThemeLabel:S,previewTheme:N,totalHoursInput:A,categoryTotalHours:$,categoriesEnabled:T,onTotalHoursChange:j,allDayHoursInput:L,onAllDayHoursChange:F,deckSettingsDraft:W,setDeckEnabled:B,deckBoards:E,deckBoardsLoading:U,deckBoardsError:R,isDeckBoardVisible:ie,toggleDeckBoard:V,reportingDraft:J,setReportingEnabled:z,setReportingSchedule:fe,setReportingInterim:G,updateReporting:P,activityDraft:H,setActivityDayOff:oe,dashboardMode:ee,dashboardPresets:X,strategies:le,selectedStrategy:we,localSelection:He,toggleCalendar:M,categories:I,selectedCalendars:K,assignments:ne,addCategory:ae,removeCategory:se,setCategoryLabel:ge,setCategoryTarget:ue,toggleCategoryWeekend:ce,assignCalendar:te,openColorId:$e,toggleColorPopover:me,closeColorPopover:pe,categoryColorPalette:he,resolvedColor:ke,applyColor:be,onColorInput:_e,draft:xe,strategyTitle:Ie,deckReviewSummary:Pe,deckVisibleBoards:Fe,reportingSummary:Ze}=Ov({props:o,emit:a});return(Ue,Oe)=>(w(),Je(Du,{name:"onboarding-fade"},{default:je(()=>[Ue.visible?(w(),_("div",Nv,[l("div",{class:"onboarding-backdrop",onClick:Oe[0]||(Oe[0]=(...Re)=>y(b)&&y(b)(...Re))}),l("div",{class:"onboarding-panel",onClick:Oe[3]||(Oe[3]=ot(()=>{},["stop"]))},[l("header",Lv,[l("div",Iv,[Oe[4]||(Oe[4]=l("h2",null,"Welcome to Opsdash",-1)),l("p",Bv,"Step "+D(y(n))+" of "+D(y(r)),1)]),l("div",Pv,[l("button",{type:"button",class:"skip-link",onClick:Oe[1]||(Oe[1]=(...Re)=>y(p)&&y(p)(...Re)),disabled:y(c)},"Maybe later",8,Fv),y(d)?(w(),_("button",{key:0,type:"button",class:"close-btn",disabled:y(c),onClick:Oe[2]||(Oe[2]=(...Re)=>y(b)&&y(b)(...Re)),"aria-label":"Close onboarding"},"  ",8,Wv)):q("",!0)])]),l("nav",Hv,[(w(!0),_(de,null,Ce(y(i),Re=>(w(),_("button",{key:Re,type:"button",class:Te(["step-pill",{active:Re===y(s)}]),disabled:y(c),onClick:go=>y(g)(Re)},D(y(f)(Re)),11,Rv))),128))]),l("main",zv,[y(s)==="intro"?(w(),_("section",jv,[Se(Wm,{"has-existing-config":o.hasExistingConfig??!1,"snapshot-saving":o.snapshotSaving??!1,saving:y(c),"snapshot-notice":o.snapshotNotice??null,"on-save-current-config":()=>a("save-current-config")},null,8,["has-existing-config","snapshot-saving","saving","snapshot-notice","on-save-current-config"])])):y(s)==="preferences"?(w(),_("section",Uv,[Se($h,{"theme-preference":y(v),"system-theme-label":y(S),"preview-theme":y(N),"set-theme-preference":Re=>v.value=Re,"total-hours-input":y(A),"category-total-hours":y($),"categories-enabled":y(T),"on-total-hours-change":y(j),"all-day-hours-input":y(L),"on-all-day-hours-change":y(F),"deck-settings-draft":y(W),"set-deck-enabled":y(B),"deck-boards":y(E),"deck-boards-loading":y(U),"deck-boards-error":y(R),"is-deck-board-visible":y(ie),"toggle-deck-board":y(V),"reporting-draft":y(J),"set-reporting-enabled":y(z),"set-reporting-schedule":y(fe),"set-reporting-interim":y(G),"update-reporting":y(P),"activity-draft":y(H),"set-activity-day-off":y(oe)},null,8,["theme-preference","system-theme-label","preview-theme","set-theme-preference","total-hours-input","category-total-hours","categories-enabled","on-total-hours-change","all-day-hours-input","on-all-day-hours-change","deck-settings-draft","set-deck-enabled","deck-boards","deck-boards-loading","deck-boards-error","is-deck-board-visible","toggle-deck-board","reporting-draft","set-reporting-enabled","set-reporting-schedule","set-reporting-interim","update-reporting","activity-draft","set-activity-day-off"])])):y(s)==="dashboard"?(w(),_("section",Vv,[Se(Dh,{"dashboard-mode":y(ee),"set-dashboard-mode":Re=>ee.value=Re,"dashboard-presets":y(X)},null,8,["dashboard-mode","set-dashboard-mode","dashboard-presets"])])):y(s)==="strategy"?(w(),_("section",Kv,[Se(Lh,{strategies:y(le),"selected-strategy":y(we),"set-selected-strategy":Re=>we.value=Re},null,8,["strategies","selected-strategy","set-selected-strategy"])])):y(s)==="calendars"?(w(),_("section",qv,[Se(Fh,{calendars:Ue.calendars,"local-selection":y(He),"toggle-calendar":y(M)},null,8,["calendars","local-selection","toggle-calendar"])])):y(s)==="categories"?(w(),_("section",Gv,[Se(dv,{"categories-enabled":y(T),categories:y(I),"category-total-hours":y($),"selected-calendars":y(K),assignments:y(ne),"add-category":y(ae),"remove-category":y(se),"set-category-label":y(ge),"set-category-target":y(ue),"toggle-category-weekend":y(ce),"assign-calendar":y(te),"open-color-id":y($e),"toggle-color-popover":y(me),"close-color-popover":y(pe),"category-color-palette":y(he),"resolved-color":y(ke),"apply-color":y(be),"on-color-input":y(_e)},null,8,["categories-enabled","categories","category-total-hours","selected-calendars","assignments","add-category","remove-category","set-category-label","set-category-target","toggle-category-weekend","assign-calendar","open-color-id","toggle-color-popover","close-color-popover","category-color-palette","resolved-color","apply-color","on-color-input"])])):y(s)==="review"?(w(),_("section",Jv,[Se(mv,{"strategy-title":y(Ie),"selected-calendars":y(K),"draft-targets-categories":y(xe).targetsConfig.categories,"draft-total-hours":y(xe).targetsConfig.totalHours,"category-total-hours":y($),"deck-review-summary":y(Pe),"deck-enabled":y(W).enabled,"deck-visible-boards":y(Fe),"reporting-enabled":y(J).enabled,"reporting-summary":y(Ze),"show-day-off-trend":y(H).showDayOffTrend},null,8,["strategy-title","selected-calendars","draft-targets-categories","draft-total-hours","category-total-hours","deck-review-summary","deck-enabled","deck-visible-boards","reporting-enabled","reporting-summary","show-day-off-trend"])])):q("",!0)]),l("footer",Yv,[y(m)?(w(),Je(y(et),{key:0,type:"tertiary",disabled:y(c),onClick:y(C)},{default:je(()=>[...Oe[5]||(Oe[5]=[Ae("Back",-1)])]),_:1},8,["disabled","onClick"])):q("",!0),y(u)?(w(),Je(y(et),{key:1,type:"primary",disabled:y(x)||y(c),onClick:y(h)},{default:je(()=>[...Oe[6]||(Oe[6]=[Ae("Continue",-1)])]),_:1},8,["disabled","onClick"])):(w(),Je(y(et),{key:2,type:"primary",disabled:y(c),onClick:y(k)},{default:je(()=>[...Oe[7]||(Oe[7]=[Ae(" Start dashboard ",-1)])]),_:1},8,["disabled","onClick"]))])])])):q("",!0)]),_:1}))}}),Xv=["onKeydown"],Qv={class:"shortcuts-body"},eb={class:"shortcut-label"},tb={key:0},ob={class:"shortcut-combo","aria-hidden":"true"},ab={class:"shortcuts-footer"},nb=qe(Ee({__name:"KeyboardShortcutsModal",props:{visible:{type:Boolean},groups:{}},emits:["close"],setup(e,{emit:t}){const o=e,a=t,n=Z(null);function r(){a("close")}return Le(()=>o.visible,i=>{i&&Yt(()=>{var s;(s=n.value)==null||s.focus()}).catch(()=>{})}),(i,s)=>i.visible?(w(),_("div",{key:0,class:"shortcuts-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"opsdash-shortcuts-title",onClick:ot(r,["self"])},[l("div",{ref_key:"panelRef",ref:n,class:"shortcuts-panel",tabindex:"-1",onKeydown:fn(ot(r,["prevent"]),["esc"])},[l("header",{class:"shortcuts-header"},[s[0]||(s[0]=l("div",{class:"shortcuts-title"},[l("h2",{id:"opsdash-shortcuts-title"},"Keyboard Shortcuts"),l("p",{class:"shortcuts-hint"},"Press Esc to close or ? to reopen.")],-1)),l("button",{type:"button",class:"shortcuts-close","aria-label":"Close shortcuts overlay",onClick:r},"  ")]),l("div",Qv,[(w(!0),_(de,null,Ce(i.groups,d=>(w(),_("section",{key:d.id,class:"shortcuts-group"},[l("h3",null,D(d.title),1),l("ul",null,[(w(!0),_(de,null,Ce(d.items,c=>(w(),_("li",{key:c.id},[l("span",eb,[Ae(D(c.label)+" ",1),c.description?(w(),_("small",tb,D(c.description),1)):q("",!0)]),l("span",ob,[(w(!0),_(de,null,Ce(c.combo,(f,g)=>(w(),_("kbd",{key:g},D(f),1))),128))])]))),128))])]))),128))]),l("footer",ab,[Se(y(et),{type:"primary",size:"small",onClick:r},{default:je(()=>[...s[1]||(s[1]=[Ae(" Close ",-1)])]),_:1})])],40,Xv)])):q("",!0)}}),[["__scopeId","data-v-f8126e32"]]),rb={class:"deck-panel"},sb={class:"deck-panel__header"},ib={class:"deck-panel__heading"},lb={key:0,class:"deck-panel__subtitle"},db={key:1,class:"deck-panel__subtitle"},cb={class:"deck-panel__actions"},ub={key:0,class:"deck-panel__count"},fb=["href"],pb=["disabled"],gb={key:0,class:"deck-panel__filters",role:"group","aria-label":"Deck card filters"},mb=["aria-pressed","disabled","onClick"],hb={class:"deck-panel__body"},vb={key:0,class:"deck-panel__loading"},bb={key:0,class:"deck-panel__error"},yb=["data-idx"],kb={class:"deck-card__status-row"},wb={key:0,class:"deck-card__time"},xb={key:1,class:"deck-card__time"},_b={class:"deck-card__title"},Cb={class:"deck-card__meta"},Sb={class:"deck-card__stack"},$b={key:0,class:"deck-card__labels"},Tb={key:1,class:"deck-card__assignees"},Sl=qe(Ee({__name:"DeckCardsPanel",props:{cards:{},loading:{type:Boolean},rangeLabel:{},lastFetchedAt:{},deckUrl:{},error:{},filter:{},canFilterMine:{type:Boolean},filtersEnabled:{type:Boolean},filterOptions:{},allowMineOverride:{type:Boolean},autoScroll:{type:Boolean},intervalSeconds:{},showCount:{type:Boolean}},emits:["refresh","update:filter"],setup(e){const t=e,o=O(()=>t.filter??"all"),a=O(()=>t.filtersEnabled!==!1&&r.value.length>1),n=O(()=>a.value&&t.canFilterMine!==!1&&t.allowMineOverride!==!1),r=O(()=>t.filterOptions&&t.filterOptions.length?t.filterOptions.map(C=>({...C,mine:!!C.mine})):[{value:"all",label:"All cards",mine:!1},{value:"open_all",label:"Open  All",mine:!1},{value:"open_mine",label:"Open  Mine",mine:!0},{value:"done_all",label:"Done  All",mine:!1},{value:"done_mine",label:"Done  Mine",mine:!0},{value:"archived_all",label:"Archived  All",mine:!1},{value:"archived_mine",label:"Archived  Mine",mine:!0}]),i=Z(null),s=Z(null),d=Z(0),c=O(()=>{const C=Math.max(3,Math.min(10,Number(t.intervalSeconds??5)))*1e3;return Number.isFinite(C)?C:5e3});Le(()=>t.autoScroll,()=>{f(),g()}),Le(()=>t.cards,()=>{d.value=0,f(),g()},{deep:!0}),It(()=>{g()}),Rt(()=>{f()});function f(){s.value&&(clearInterval(s.value),s.value=null)}function g(){!t.autoScroll||!i.value||(t.cards||[]).length<=1||(f(),s.value=window.setInterval(()=>{const C=(t.cards||[]).length;d.value=(d.value+1)%C,b(d.value)},c.value))}function b(C){if(!i.value)return;const h=i.value.querySelector(`[data-idx="${C}"]`);h==null||h.scrollIntoView({block:"nearest",behavior:"smooth"})}const p=new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}),m=O(()=>{if(!t.lastFetchedAt)return"";try{return p.format(new Date(t.lastFetchedAt))}catch{return""}});function u(C){try{return p.format(new Date(C))}catch{return C}}function x(C){return C==="done"?"Done":C==="archived"?"Archived":"Active"}return(C,h)=>(w(),_("div",rb,[l("div",sb,[l("div",ib,[h[1]||(h[1]=l("div",{class:"deck-panel__title"},"Deck cards",-1)),m.value?(w(),_("div",lb," Updated "+D(m.value),1)):(w(),_("div",db," Showing "+D(C.rangeLabel.toLowerCase())+" selection ",1))]),l("div",cb,[C.showCount?(w(),_("div",ub,D(C.cards.length)+" cards",1)):q("",!0),C.deckUrl?(w(),_("a",{key:1,class:"deck-panel__link",href:C.deckUrl,target:"_blank",rel:"noopener"}," Open Deck  ",8,fb)):q("",!0),l("button",{type:"button",class:"deck-panel__refresh",onClick:h[0]||(h[0]=k=>C.$emit("refresh")),disabled:C.loading}," Refresh ",8,pb)])]),a.value?(w(),_("div",gb,[(w(!0),_(de,null,Ce(r.value,k=>(w(),_("button",{key:k.value,type:"button",class:Te(["deck-filter-btn",{active:o.value===k.value}]),"aria-pressed":o.value===k.value,disabled:k.mine&&!n.value,onClick:v=>C.$emit("update:filter",k.value)},D(k.label),11,mb))),128))])):q("",!0),l("div",hb,[C.loading?(w(),_("div",vb,[Se(y(pr),{size:20}),h[2]||(h[2]=l("span",null,"Loading Deck cards",-1))])):(w(),_(de,{key:1},[C.error?(w(),_("div",bb,D(C.error),1)):C.cards.length?(w(),_("ul",{key:2,class:"deck-card-list",ref_key:"listEl",ref:i},[(w(!0),_(de,null,Ce(C.cards,(k,v)=>(w(),_("li",{key:k.id,class:"deck-card","data-idx":v},[l("div",kb,[l("span",{class:Te(["deck-card__status",k.status])},D(x(k.status)),3),k.match==="due"&&k.due?(w(),_("span",wb," Due "+D(u(k.due)),1)):k.done?(w(),_("span",xb," Completed "+D(u(k.done)),1)):q("",!0)]),l("div",_b,D(k.title),1),l("div",Cb,[l("span",{class:"deck-card__board",style:Be({borderColor:k.boardColor||"var(--color-primary)"})},D(k.boardTitle),5),l("span",Sb,D(k.stackTitle),1)]),k.labels.length?(w(),_("div",$b,[(w(!0),_(de,null,Ce(k.labels,S=>(w(),_("span",{key:`deck-label-${k.id}-${S.id??S.title}`,class:"deck-card__label",style:Be({background:S.color||"var(--color-background-darker)"})},D(S.title),5))),128))])):q("",!0),k.assignees.length?(w(),_("div",Tb,[h[3]||(h[3]=l("span",{class:"deck-card__assignees-label"},"Assigned:",-1)),(w(!0),_(de,null,Ce(k.assignees,S=>(w(),_("span",{key:`deck-assignee-${k.id}-${S.uid??S.id}`,class:"deck-card__assignee"},D(S.displayName||S.uid),1))),128))])):q("",!0)],8,yb))),128))],512)):(w(),Je(y(ya),{key:1,name:"No Deck cards",description:`No cards matched this ${C.rangeLabel.toLowerCase()}. Confirm Deck due dates or rerun seeding.`},null,8,["description"]))],64))])]))}}),[["__scopeId","data-v-1436c7c7"]]),tC="modulepreload",oC=function(e){return"/"+e},aC={},vt=function(t,o,a){let n=Promise.resolve();function r(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return n.then(i=>{for(const s of i||[])s.status==="rejected"&&r(s.reason);return t().catch(r)})};function Mb(e,t){const o=JSON.parse(JSON.stringify(e||{}));return t==="month"&&(o.totalHours=ka(o.totalHours??0),o.categories=(o.categories||[]).map(a=>({...a,targetHours:ka(a.targetHours??0)}))),o}function Ab(e){return{...e,ui:{...(e==null?void 0:e.ui)??{}}}}function Db(e,t){try{return gl({config:e,stats:t.stats,byDay:t.byDay||[],byCal:t.byCal||[],groupsById:t.groupsById||{},range:t.rangeMode==="month"?"month":"week",from:t.from||"",to:t.to||""})}catch(o){return console.error("[opsdash] targets widget local summary failed",o),pl(e)}}function xt(e,t){if(!t)return e;const o=String(t).trim();return o?`${o}  ${e}`:e}function xa(e,t){if(t!=null&&t!==""){const a=Number(t);if(Number.isFinite(a))return a}const o=Number(e);return Number.isFinite(o)?o:void 0}function $l(e){switch(e){case"targets":return{title:"Targets"};case"activity":return{title:"Activity & Schedule"};case"balance":return{title:"Balance"};case"mix":return{title:"Category mix trend"};case"dayoff":return{title:"Days off trend"};case"deck":return{title:"Deck summary"};case"notes":return{title:"Notes"};default:return{}}}function Eb(e,t={},o){if(!e)return[];if(e==="activity"){const r=(o==null?void 0:o.activitySummary)||{},i=g=>`${Number(g??0).toFixed(1)}%`,s=(g,b)=>[g,b].filter(Boolean).join(" / "),d=g=>`${Number(g??0).toFixed(1)}h`,c=g=>g?String(g):"";return[{opt:"weekendShare",key:"weekend",label:"Weekend share",value:i(r.weekendShare)},{opt:"eveningShare",key:"evening",label:"Evening share",value:i(r.eveningShare)},{opt:"earliestLatest",key:"earliest",label:"Earliest/Late times",value:s(r.typicalStart,r.typicalEnd)},{opt:"overlaps",key:"overlaps",label:"Overlaps",value:String(r.overlapEvents??"")},{opt:"longest",key:"longest",label:"Longest session",value:d(r.longestSession)},{opt:"lastDayOff",key:"lastDayOff",label:"Last day off",value:c(r.lastDayOff)}].filter(g=>t[g.opt]!==!1)}const n={"":[],targets:[{key:"status",label:"Status",value:"Pace / Delta / Forecast"},{key:"today",label:"Today",value:"Today overlay"},{key:"legend",label:"Legend",value:"Category breakdown"}],activity:[],balance:[{key:"index",label:"Index",value:"Balance index value"},{key:"trend",label:"Trend",value:"Trend history/heat"},{key:"notes",label:"Notes",value:"Pinned notes snippet"}],mix:[{key:"badge",label:"Badge",value:"Balance badge"},{key:"history",label:"History",value:"Category mix tiles"}],dayoff:[{key:"header",label:"Trend header",value:"Period lookback"},{key:"tiles",label:"Trend tiles",value:"Days off per week"}],deck:[{key:"header",label:"Deck header",value:"Range + Ticker"},{key:"buckets",label:"Buckets",value:"Open/Done/Archived counts"},{key:"empty",label:"Empty states",value:"No cards"}],notes:[{key:"labels",label:"Labels",value:"Prev/Current labels"},{key:"content",label:"Content",value:"Prev/Current note texts"}]}[e]||[];return t.include?n:n.length?[n[0]]:[]}function Tl(e){return Array.isArray(e)?Array.from(new Set(e.map(t=>Number(t)).filter(t=>Number.isInteger(t)&&t>0))):typeof e=="string"?Tl(e.split(",")):[]}function Ml(e){return Array.isArray(e)?e.map(t=>String(t).trim()).filter(Boolean):typeof e=="string"?e.split(",").map(t=>t.trim()).filter(Boolean):["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","created_today_all","created_today_mine"]}function Kt(e){switch(e){case"all":return"All cards";case"mine":return"Mine (any status)";case"open_all":return"Open  All";case"open_mine":return"Open  Mine";case"done_all":return"Done  All";case"done_mine":return"Done  Mine";case"archived_all":return"Archived  All";case"archived_mine":return"Archived  Mine";case"created_today_all":return"Created today  All";case"created_today_mine":return"Created today  Mine";case"created_range_all":return"Created this range  All";case"created_range_mine":return"Created this range  Mine";default:return e}}const Ob=gt(()=>vt(()=>Promise.resolve().then(()=>qk),void 0).then(e=>e.default)),Al="Activity & Schedule",Nb={component:Ob,defaultLayout:{width:"half",height:"m",order:40},label:"Activity (old)",baseTitle:Al,configurable:!0,controls:[{key:"showHeader",label:"Show header",type:"toggle"},{key:"showBadges",label:"Show badges",type:"toggle"},{key:"showTrends",label:"Show trend tiles",type:"toggle"},{key:"showMeta",label:"Show meta rows",type:"toggle"}],buildProps:(e,t)=>{var o,a,n,r,i,s;return{summary:t.activitySummary,config:t.activityConfig,dayOffTrend:t.activityDayOffTrend,trendUnit:t.activityTrendUnit,dayOffLookback:t.activityDayOffLookback,rangeLabel:t.rangeLabel,rangeMode:t.rangeMode,showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,showBadges:((a=e.options)==null?void 0:a.showBadges)!==!1,showTrends:((n=e.options)==null?void 0:n.showTrends)!==!1,showMeta:((r=e.options)==null?void 0:r.showMeta)!==!1,title:xt(Al,(i=e.options)==null?void 0:i.titlePrefix),cardBg:(s=e.options)==null?void 0:s.cardBg}}},Lb=gt(()=>vt(()=>Promise.resolve().then(()=>kw),void 0).then(e=>e.default)),Dl="Activity & Balance",Ib={component:Lb,defaultLayout:{width:"half",height:"m",order:30},label:"Balance (old)",baseTitle:Dl,configurable:!0,controls:[{key:"showHeader",label:"Show header",type:"toggle"},{key:"showTrend",label:"Show trend history",type:"toggle"},{key:"showRelations",label:"Show relations",type:"toggle"},{key:"showWarnings",label:"Show warnings",type:"toggle"}],buildProps:(e,t)=>{var o,a,n,r,i,s;return{overview:t.balanceOverview,rangeLabel:t.rangeLabel,rangeMode:t.rangeMode,lookbackWeeks:t.lookbackWeeks,config:t.balanceConfig??{showNotes:!1},note:t.balanceNote,activitySummary:t.activitySummary,activityConfig:t.activityConfig,activityDayOffTrend:t.activityDayOffTrend,activityTrendUnit:t.activityTrendUnit,activityDayOffLookback:t.activityDayOffLookback,showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,showTrend:((a=e.options)==null?void 0:a.showTrend)!==!1,showRelations:((n=e.options)==null?void 0:n.showRelations)!==!1,showWarnings:((r=e.options)==null?void 0:r.showWarnings)!==!1,title:xt(Dl,(i=e.options)==null?void 0:i.titlePrefix),cardBg:(s=e.options)==null?void 0:s.cardBg}}},Bb=gt(()=>vt(()=>Promise.resolve().then(()=>Iw),void 0).then(e=>e.default)),El="Balance Index",Pb={component:Bb,defaultLayout:{width:"half",height:"s",order:32},label:"Balance Index",baseTitle:El,configurable:!0,supportsColors:!0,defaultOptions:(()=>{const e=Ro();return{showTrend:!0,showMessages:!0,showConfig:!0,indexBasis:e.index.basis,noticeAbove:e.thresholds.noticeAbove,noticeBelow:e.thresholds.noticeBelow,warnAbove:e.thresholds.warnAbove,warnBelow:e.thresholds.warnBelow,warnIndex:e.thresholds.warnIndex,lookbackWeeks:e.trend.lookbackWeeks,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1}})(),controls:[{key:"showConfig",label:"Show config summary",type:"toggle"},{key:"showTrend",label:"Show trend",type:"toggle"},{key:"showMessages",label:"Show messages",type:"toggle"},{key:"lookbackWeeks",label:"Trend lookback (weeks)",type:"number",min:1,max:12,step:1},{key:"messageDensity",label:"Messages shown",type:"select",options:[{value:"few",label:"Few"},{value:"normal",label:"Normal"},{value:"many",label:"Many"}]},{key:"indexBasis",label:"Index basis",type:"select",options:[{value:"off",label:"Disabled"},{value:"category",label:"Total categories"},{value:"calendar",label:"Total calendars"},{value:"both",label:"Categories + calendars"}]},{key:"noticeAbove",label:"Notice above target",type:"number",min:0,max:1,step:.01},{key:"noticeBelow",label:"Notice below target",type:"number",min:0,max:1,step:.01},{key:"warnAbove",label:"Warn above target",type:"number",min:0,max:1,step:.01},{key:"warnBelow",label:"Warn below target",type:"number",min:0,max:1,step:.01},{key:"warnIndex",label:"Warn index",type:"number",min:0,max:1,step:.01},{key:"trendColor",label:"Trend color",type:"color"},{key:"showCurrent",label:"Show current period",type:"toggle"},{key:"reverseTrend",label:"Oldest first (reverse)",type:"toggle"},{key:"labelMode",label:"Trend label",type:"select",options:[{value:"date",label:"Date range"},{value:"period",label:"Week/Month"},{value:"offset",label:"Offset only"}]}],buildProps:(e,t)=>{var m,u,x,C,h,k,v,S,N,A,$,T,j,L,F,W,B,E,U,R,ie,V,J,z,fe,G,P,H,oe,ee,X,le,we,He;const o=t.balanceConfig?JSON.parse(JSON.stringify(t.balanceConfig)):Ro(),a=((m=e.options)==null?void 0:m.showBadge)!==!1,n=((u=e.options)==null?void 0:u.showTrend)!==!1,r=((x=e.options)==null?void 0:x.showMessages)??((C=o.ui)==null?void 0:C.showMessages)??!0,i=((h=e.options)==null?void 0:h.messageDensity)||"normal",s=i==="few"?1:i==="many"?1/0:3,d=Number.isFinite((k=e.options)==null?void 0:k.lookbackWeeks)?Number((v=e.options)==null?void 0:v.lookbackWeeks):((S=o.trend)==null?void 0:S.lookbackWeeks)??4,c={noticeAbove:xa((N=o==null?void 0:o.thresholds)==null?void 0:N.noticeAbove,(A=e.options)==null?void 0:A.noticeAbove),noticeBelow:xa(($=o==null?void 0:o.thresholds)==null?void 0:$.noticeBelow,(T=e.options)==null?void 0:T.noticeBelow),warnAbove:xa((j=o==null?void 0:o.thresholds)==null?void 0:j.warnAbove,(L=e.options)==null?void 0:L.warnAbove),warnBelow:xa((F=o==null?void 0:o.thresholds)==null?void 0:F.warnBelow,(W=e.options)==null?void 0:W.warnBelow),warnIndex:xa((B=o==null?void 0:o.thresholds)==null?void 0:B.warnIndex,(E=e.options)==null?void 0:E.warnIndex)},f=((U=e.options)==null?void 0:U.indexBasis)||((R=o==null?void 0:o.index)==null?void 0:R.basis)||"category",g=typeof((ie=e.options)==null?void 0:ie.trendColor)=="string"&&((V=e.options)!=null&&V.trendColor.trim())?e.options.trendColor.trim():"#2563EB",b=Number.isFinite((J=e.options)==null?void 0:J.loopbackCount)?Number((z=e.options)==null?void 0:z.loopbackCount):void 0,p=Number.isFinite(b)?Number(b):(Number.isFinite(d)?Number(d):((fe=o.trend)==null?void 0:fe.lookbackWeeks)??4)+1;return{overview:t.balanceOverview,targetsCategories:((G=t.targetsConfig)==null?void 0:G.categories)||[],rangeLabel:t.rangeLabel,showBadge:a,showTrend:n,showMessages:r,showConfig:((P=e.options)==null?void 0:P.showConfig)!==!1,messageLimit:s,lookbackWeeks:p,loopbackCount:p,showCurrent:((H=e.options)==null?void 0:H.showCurrent)!==!1,labelMode:((oe=e.options)==null?void 0:oe.labelMode)||"period",reverseTrend:((ee=e.options)==null?void 0:ee.reverseTrend)===!0,indexBasis:f,thresholds:c,title:xt(El,(X=e.options)==null?void 0:X.titlePrefix),cardBg:((we=(le=e.options)==null?void 0:le.colors)==null?void 0:we.background)??((He=e.options)==null?void 0:He.cardBg),trendColor:g,from:t.from,to:t.to,rangeMode:t.rangeMode}}},Fb=gt(()=>vt(()=>Promise.resolve().then(()=>Kw),void 0).then(e=>e.default)),Ol="Category mix trend",Wb={component:Fb,defaultLayout:{width:"half",height:"m",order:47},label:"Category mix trend",baseTitle:Ol,configurable:!0,controls:[{key:"lookbackWeeks",label:"Lookback (weeks)",type:"number",min:1,max:4,step:1},{key:"showHeader",label:"Show header",type:"toggle"},{key:"toneLowColor",label:"Low color",type:"color"},{key:"toneHighColor",label:"High color",type:"color"}],buildProps:(e,t)=>{var o,a,n,r,i,s,d;return{overview:t.balanceOverview,rangeMode:t.rangeMode,lookbackWeeks:((o=e.options)==null?void 0:o.lookbackWeeks)??t.lookbackWeeks,showBadge:((a=e.options)==null?void 0:a.showBadge)??!0,showHeader:((n=e.options)==null?void 0:n.showHeader)!==!1,title:xt(Ol,(r=e.options)==null?void 0:r.titlePrefix),cardBg:(i=e.options)==null?void 0:i.cardBg,toneLowColor:(s=e.options)==null?void 0:s.toneLowColor,toneHighColor:(d=e.options)==null?void 0:d.toneHighColor}}},Hb=gt(()=>vt(()=>Promise.resolve().then(()=>tx),void 0).then(e=>e.default)),Nl="Days off trend",Rb={component:Hb,defaultLayout:{width:"quarter",height:"s",order:45},label:"Days off trend",baseTitle:Nl,configurable:!0,controls:[{key:"lookback",label:"Lookback (periods)",type:"number",min:1,max:12,step:1},{key:"unit",label:"Unit",type:"select",options:[{value:"wk",label:"Weeks"},{value:"mo",label:"Months"}]},{key:"showHeader",label:"Show header",type:"toggle"},{key:"showBadges",label:"Show badges",type:"toggle"},{key:"toneLowColor",label:"Low color",type:"color"},{key:"toneHighColor",label:"High color",type:"color"}],buildProps:(e,t)=>{var o,a,n,r,i,s,d,c;return{trend:t.activityDayOffTrend,unit:((o=e.options)==null?void 0:o.unit)??t.activityTrendUnit,lookback:((a=e.options)==null?void 0:a.lookback)??t.activityDayOffLookback,showHeader:((n=e.options)==null?void 0:n.showHeader)!==!1,showBadges:((r=e.options)==null?void 0:r.showBadges)!==!1,title:xt(Nl,(i=e.options)==null?void 0:i.titlePrefix),cardBg:(s=e.options)==null?void 0:s.cardBg,toneLowColor:(d=e.options)==null?void 0:d.toneLowColor,toneHighColor:(c=e.options)==null?void 0:c.toneHighColor}}},zb=gt(()=>vt(()=>Promise.resolve().then(()=>vx),void 0).then(e=>e.default)),Ll="Deck summary",jb={component:zb,defaultLayout:{width:"half",height:"s",order:50},label:"Deck (old)",baseTitle:Ll,configurable:!0,controls:[{key:"showHeader",label:"Show header",type:"toggle"},{key:"showBadges",label:"Show board badges",type:"toggle"},{key:"showTicker",label:"Show ticker",type:"toggle"},{key:"showEmpty",label:"Show empty states",type:"toggle"}],buildProps:(e,t)=>{var o,a,n,r,i,s;return{buckets:t.deckBuckets,rangeLabel:t.deckRangeLabel,loading:t.deckLoading,error:t.deckError,ticker:t.deckTicker,showBoardBadges:((o=e.options)==null?void 0:o.showBadges)??t.deckShowBoardBadges,showHeader:((a=e.options)==null?void 0:a.showHeader)!==!1,showTicker:((n=e.options)==null?void 0:n.showTicker)!==!1,showEmpty:((r=e.options)==null?void 0:r.showEmpty)!==!1,title:xt(Ll,(i=e.options)==null?void 0:i.titlePrefix),cardBg:(s=e.options)==null?void 0:s.cardBg}}},Ub={component:gt(()=>vt(()=>Promise.resolve().then(()=>bx),void 0).then(e=>e.default)),defaultLayout:{width:"half",height:"m",order:52},label:"Deck cards",baseTitle:"Deck cards",configurable:!0,defaultOptions:{allowMine:!0,includeArchived:!0,includeCompleted:!0,autoScroll:!0,intervalSeconds:5,showCount:!0,filters:["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","created_today_all","created_today_mine"],defaultFilter:"open_all",mineMode:"assignee"},controls:[{key:"boardIds",label:"Boards to include",type:"multiselect",options:[]},{key:"filters",label:"Filters to show",type:"multiselect",options:[]},{key:"allowMine",label:"Allow mine filters",type:"toggle"},{key:"mineMode",label:"Mine mode",type:"select",options:[{value:"assignee",label:"Assignee"},{value:"creator",label:"Creator"},{value:"both",label:"Assignee + Creator"}]},{key:"includeArchived",label:"Include archived cards",type:"toggle"},{key:"includeCompleted",label:"Include completed cards",type:"toggle"},{key:"autoScroll",label:"Auto-scroll list",type:"toggle"},{key:"intervalSeconds",label:"Scroll every (s)",type:"number",min:3,max:10,step:1},{key:"showCount",label:"Show count pill",type:"toggle"}],dynamicControls:(e,t)=>{var i;const a={key:"defaultFilter",label:"Default filter",type:"select",options:Ml(e.filters??((i=e.defaultOptions)==null?void 0:i.filters)).map(s=>({value:s,label:Kt(s)}))},n=[{value:"all",label:Kt("all")},{value:"open_all",label:Kt("open_all")},{value:"open_mine",label:Kt("open_mine")},{value:"done_all",label:Kt("done_all")},{value:"done_mine",label:Kt("done_mine")},{value:"archived_all",label:Kt("archived_all")},{value:"archived_mine",label:Kt("archived_mine")},{value:"created_today_all",label:Kt("created_today_all")},{value:"created_today_mine",label:Kt("created_today_mine")}],r=Array.isArray(t.deckBoards)?t.deckBoards.map(s=>({value:s.id,label:s.title||`Board ${s.id}`})):[];return[{key:"filters",label:"Filters",type:"multiselect",options:n},a,{key:"boardIds",label:"Boards",type:"multiselect",options:r}]},buildProps:(e,t)=>{var r,i,s,d,c,f,g,b,p,m,u,x,C,h;const o=Ml(((r=e.options)==null?void 0:r.filters)??((s=(i=e.options)==null?void 0:i.defaultOptions)==null?void 0:s.filters)),a=Array.isArray((d=e.options)==null?void 0:d.boardIds)?e.options.boardIds:Tl((c=e.options)==null?void 0:c.boardIds),n=o.includes((f=e.options)==null?void 0:f.defaultFilter)?(g=e.options)==null?void 0:g.defaultFilter:o[0]||"all";return{cards:t.deckCards||[],rangeLabel:t.deckRangeLabel||t.rangeLabel||"",from:t.from,to:t.to,uid:t.uid,deckUrl:t.deckUrl,lastFetchedAt:t.deckRangeLabel,loading:t.deckLoading,error:t.deckError,boardIds:a,filters:o,defaultFilter:n,allowMine:((b=e.options)==null?void 0:b.allowMine)!==!1,mineMode:((p=e.options)==null?void 0:p.mineMode)||"assignee",includeArchived:((m=e.options)==null?void 0:m.includeArchived)!==!1,includeCompleted:((u=e.options)==null?void 0:u.includeCompleted)!==!1,autoScroll:((x=e.options)==null?void 0:x.autoScroll)!==!1,intervalSeconds:((C=e.options)==null?void 0:C.intervalSeconds)??5,showCount:((h=e.options)==null?void 0:h.showCount)!==!1}}},Vb=gt(()=>vt(()=>Promise.resolve().then(()=>Mx),void 0).then(e=>e.default)),Il="Notes",Kb={component:Vb,defaultLayout:{width:"half",height:"m",order:69},label:"Notes editor",baseTitle:Il,configurable:!0,controls:[{key:"prevLabel",label:"Prev label",type:"text"},{key:"currLabel",label:"Current label",type:"text"}],buildProps:(e,t)=>{var o,a,n,r;return{title:xt(Il,(o=e.options)==null?void 0:o.titlePrefix),cardBg:(a=e.options)==null?void 0:a.cardBg,prevLabel:((n=e.options)==null?void 0:n.prevLabel)||(t.notesLabelPrev??"Previous"),currLabel:((r=e.options)==null?void 0:r.currLabel)||(t.notesLabelCurr??"Current"),previous:t.notesPrev??"",modelValue:t.notesCurr??"",saving:t.isSavingNote??!1,onSave:t.onSaveNote,onUpdateModelValue:t.onUpdateNotes}}},qb=gt(()=>vt(()=>Promise.resolve().then(()=>Ex),void 0).then(e=>e.default)),Bl="Note",Gb={component:qb,defaultLayout:{width:"quarter",height:"s",order:68},label:"Notes snippet",baseTitle:Bl,configurable:!0,controls:[],buildProps:(e,t)=>{var o,a;return{notesCurr:t.notesCurr??"",notesPrev:t.notesPrev??"",title:xt(Bl,(o=e.options)==null?void 0:o.titlePrefix),cardBg:(a=e.options)==null?void 0:a.cardBg}}},Jb=gt(()=>vt(()=>Promise.resolve().then(()=>Px),void 0).then(e=>e.default)),Pl="Notes",Yb={component:Jb,defaultLayout:{width:"half",height:"s",order:60},label:"Notes (old)",baseTitle:Pl,configurable:!0,controls:[{key:"showPrev",label:"Show previous note",type:"toggle"},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"mode",label:"Mode",type:"select",options:[{value:"week",label:"Week"},{value:"month",label:"Month"}]}],buildProps:(e,t)=>{var o,a,n,r,i,s;return{notesPrev:t.notesPrev,notesCurrDraft:t.notesCurr,notesLabelPrev:t.notesLabelPrev,notesLabelCurr:t.notesLabelCurr,notesLabelPrevTitle:t.notesLabelPrevTitle,notesLabelCurrTitle:t.notesLabelCurrTitle,isSaving:t.isSavingNote,onSave:t.onSaveNote,onUpdateNotes:t.onUpdateNotes,mode:((o=e.options)==null?void 0:o.mode)??((a=e.props)==null?void 0:a.mode)??"week",showPrev:((n=e.options)==null?void 0:n.showPrev)!==!1,showLabels:((r=e.options)==null?void 0:r.showLabels)!==!1,title:xt(Pl,(i=e.options)==null?void 0:i.titlePrefix),cardBg:(s=e.options)==null?void 0:s.cardBg}}},Zb=gt(()=>vt(()=>Promise.resolve().then(()=>od),void 0).then(e=>e.default)),Fl="Targets",Xb={component:Zb,defaultLayout:{width:"half",height:"m",order:20},label:"Targets (old)",baseTitle:Fl,configurable:!0,controls:[{key:"showHeader",label:"Show header",type:"toggle"},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showDelta",label:"Show delta",type:"toggle"},{key:"showForecast",label:"Show forecast",type:"toggle"},{key:"showPace",label:"Show pace line",type:"toggle"},{key:"showToday",label:"Show today overlay",type:"toggle"}],buildProps:(e,t)=>{var o,a,n,r,i,s,d,c,f;return{summary:t.targetsSummary??t.summary,config:t.targetsConfig,groups:((o=e.props)==null?void 0:o.groups)??t.groups,showHeader:((a=e.options)==null?void 0:a.showHeader)!==!1,showLegend:((n=e.options)==null?void 0:n.showLegend)!==!1,showDelta:((r=e.options)==null?void 0:r.showDelta)!==!1,showForecast:((i=e.options)==null?void 0:i.showForecast)!==!1,showPace:((s=e.options)==null?void 0:s.showPace)!==!1,showToday:((d=e.options)==null?void 0:d.showToday)!==!1,title:xt(Fl,(c=e.options)==null?void 0:c.titlePrefix),cardBg:(f=e.options)==null?void 0:f.cardBg}}},Qb=gt(()=>vt(()=>Promise.resolve().then(()=>od),void 0).then(e=>e.default)),Wl="Targets",ey={component:Qb,defaultLayout:{width:"half",height:"m",order:18},label:"Targets",baseTitle:Wl,configurable:!0,defaultOptions:{showForecast:!0,showPace:!0,useLocalConfig:!1,localConfig:null},controls:[{key:"showHeader",label:"Show header",type:"toggle"},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showDelta",label:"Show delta",type:"toggle"},{key:"showForecast",label:"Show forecast",type:"toggle"},{key:"showPace",label:"Show pace line",type:"toggle"},{key:"showToday",label:"Show today overlay",type:"toggle"},{key:"useLocalConfig",label:"Use custom targets for this widget",type:"toggle"},{key:"showTotalDelta",label:"Show total delta",type:"toggle"},{key:"showNeedPerDay",label:"Show need per day",type:"toggle"},{key:"showCategoryBlocks",label:"Show categories",type:"toggle"},{key:"badges",label:"Status badges",type:"toggle"},{key:"includeWeekendToggle",label:"Weekend toggle",type:"toggle"},{key:"includeZeroDaysInStats",label:"Include zero days in pace",type:"toggle"}],buildProps:(e,t)=>{var d,c,f,g,b,p,m,u,x,C,h;const o=!!((d=e.options)!=null&&d.useLocalConfig),a=o&&((c=e.options)!=null&&c.localConfig)?JSON.parse(JSON.stringify(e.options.localConfig)):t.targetsConfig?JSON.parse(JSON.stringify(t.targetsConfig)):to(),n=Ab(Mb(a,t.rangeMode)),r=(k,v)=>{var S;((S=e.options)==null?void 0:S[k])!==void 0&&v(!!e.options[k])};r("showTotalDelta",k=>{n.ui.showTotalDelta=k}),r("showNeedPerDay",k=>{n.ui.showNeedPerDay=k}),r("showCategoryBlocks",k=>{n.ui.showCategoryBlocks=k}),r("badges",k=>{n.ui.badges=k}),r("includeWeekendToggle",k=>{n.ui.includeWeekendToggle=k}),r("includeZeroDaysInStats",k=>{n.includeZeroDaysInStats=k});const i=o&&t.stats?Db(n,t):t.targetsSummary??t.summary,s=o?null:((f=e.props)==null?void 0:f.groups)??t.groups;return{summary:i,config:n,groups:s,showHeader:((g=e.options)==null?void 0:g.showHeader)!==!1,showLegend:((b=e.options)==null?void 0:b.showLegend)!==!1,showDelta:((p=e.options)==null?void 0:p.showDelta)!==!1,showForecast:((m=e.options)==null?void 0:m.showForecast)!==!1,showPace:((u=e.options)==null?void 0:u.showPace)!==!1,showToday:((x=e.options)==null?void 0:x.showToday)!==!1,title:xt(Wl,(C=e.options)==null?void 0:C.titlePrefix),cardBg:(h=e.options)==null?void 0:h.cardBg}}},ty={component:gt(()=>vt(()=>Promise.resolve().then(()=>f_),void 0).then(e=>e.default)),defaultLayout:{width:"quarter",height:"s",order:65},label:"Text label",configurable:!0,controls:[{key:"preset",label:"Source",type:"select",options:[{value:"",label:"Custom"},{value:"targets",label:"Targets"},{value:"activity",label:"Activity & Schedule"},{value:"balance",label:"Balance"},{value:"mix",label:"Category mix"},{value:"dayoff",label:"Days off trend"},{value:"deck",label:"Deck"},{value:"notes",label:"Notes"}]},{key:"title",label:"Title",type:"text"},{key:"body",label:"Body",type:"textarea"},{key:"include",label:"Include all labels",type:"toggle"}],buildProps:(e,t)=>{var o,a,n,r,i,s,d,c;return{title:xt($l((o=e.options)==null?void 0:o.preset).title??"Text",(a=e.options)==null?void 0:a.titlePrefix),body:$l((n=e.options)==null?void 0:n.preset).body??((r=e.options)==null?void 0:r.body)??"",items:Eb((i=e.options)==null?void 0:i.preset,e.options||{},t),textSize:((s=e.options)==null?void 0:s.textSize)??"md",dense:!!((d=e.options)!=null&&d.dense),cardBg:(c=e.options)==null?void 0:c.cardBg}},dynamicControls:e=>(e==null?void 0:e.preset)!=="activity"?[]:[{key:"weekendShare",label:"Weekend share",type:"toggle"},{key:"eveningShare",label:"Evening share",type:"toggle"},{key:"earliestLatest",label:"Earliest/Late times",type:"toggle"},{key:"overlaps",label:"Overlaps",type:"toggle"},{key:"longest",label:"Longest session",type:"toggle"},{key:"lastDayOff",label:"Last day off",type:"toggle"}]},oy=gt(()=>vt(()=>Promise.resolve().then(()=>ad),void 0).then(e=>e.default)),Hl="Time Summary",ay={component:oy,defaultLayout:{width:"half",height:"s",order:10},label:"Time Summary (old)",baseTitle:Hl,configurable:!0,controls:[{key:"showHeader",label:"Show header",type:"toggle"},{key:"showTopCategory",label:"Show top category",type:"toggle"},{key:"showWorkdayStats",label:"Show workday stats",type:"toggle"},{key:"showWeekendStats",label:"Show weekend stats",type:"toggle"}],buildProps:(e,t)=>{var o,a,n,r,i,s,d;return{summary:t.summary,mode:"active",config:(o=t.targetsConfig)==null?void 0:o.timeSummary,showHeader:((a=e.options)==null?void 0:a.showHeader)!==!1,showTopCategory:((n=e.options)==null?void 0:n.showTopCategory)!==!1,showWorkdayStats:((r=e.options)==null?void 0:r.showWorkdayStats)!==!1,showWeekendStats:((i=e.options)==null?void 0:i.showWeekendStats)!==!1,title:xt(Hl,(s=e.options)==null?void 0:s.titlePrefix),cardBg:(d=e.options)==null?void 0:d.cardBg}}},ny=gt(()=>vt(()=>Promise.resolve().then(()=>ad),void 0).then(e=>e.default)),Rl="Time Summary",ry={component:ny,defaultLayout:{width:"half",height:"s",order:9},label:"Time Summary",baseTitle:Rl,configurable:!0,defaultOptions:{...to().timeSummary,mode:"active"},controls:[{key:"mode",label:"Average mode",type:"select",options:[{value:"active",label:"Active days"},{value:"all",label:"All days"}]},{key:"showTotal",label:"Total hours",type:"toggle"},{key:"showAverage",label:"Average per day",type:"toggle"},{key:"showMedian",label:"Median per day",type:"toggle"},{key:"showBusiest",label:"Busiest day",type:"toggle"},{key:"showWorkday",label:"Workdays row",type:"toggle"},{key:"showWeekend",label:"Weekend row",type:"toggle"},{key:"showWeekendShare",label:"Weekend share",type:"toggle"},{key:"showCalendarSummary",label:"Top calendars",type:"toggle"},{key:"showTopCategory",label:"Top category",type:"toggle"},{key:"showBalance",label:"Balance index",type:"toggle"}],buildProps:(e,t)=>{var r,i,s,d;const o=t.targetsConfig?JSON.parse(JSON.stringify(t.targetsConfig)):to(),a={...o,timeSummary:{...o.timeSummary}},n=c=>{var f;((f=e.options)==null?void 0:f[c])!==void 0&&(a.timeSummary[c]=!!e.options[c])};return["showTotal","showAverage","showMedian","showBusiest","showWorkday","showWeekend","showWeekendShare","showCalendarSummary","showTopCategory","showBalance"].forEach(n),{summary:t.summary,mode:((r=e.options)==null?void 0:r.mode)??t.activeDayMode??"active",config:a.timeSummary,todayGroups:((i=e.props)==null?void 0:i.todayGroups)??t.groups,title:xt(Rl,(s=e.options)==null?void 0:s.titlePrefix),cardBg:(d=e.options)==null?void 0:d.cardBg}}},jo={time_summary:ay,time_summary_v2:ry,targets:Xb,targets_v2:ey,balance:Ib,balance_index:Pb,activity:Nb,dayoff_trend:Rb,category_mix_trend:Wb,deck:jb,deck_cards:Ub,notes:Yb,text_block:ty,note_snippet:Gb,note_editor:Kb};function Sr(e,t){if(!Array.isArray(e))return t;const o=[];return e.forEach((a,n)=>{const r=String((a==null?void 0:a.type)??"");if(!r)return;const i=String((a==null?void 0:a.id)??"")||`widget-${r}-${n+1}`,s=(a==null?void 0:a.layout)??{},d=s.width==="quarter"||s.width==="half"?s.width:"full",c=s.height==="s"||s.height==="l"?s.height:"m",f=Number(s.order??0),g=a!=null&&a.options&&typeof a.options=="object"?{...a.options}:{};o.push({id:i,type:r,options:g,layout:{width:d,height:c,order:Number.isFinite(f)?f:0},version:Number((a==null?void 0:a.version)??1)||1})}),o.length?o:t}function $r(){return zl("standard")}function sy(e,t){const o=jo[e.type];if(!o)return null;const a=o.buildProps(e,t)||{};return{component:o.component,props:a}}function tt(e,t={},o){const a=jo[e],n=(a==null?void 0:a.defaultLayout)??{width:"half",height:"s",order:50};return{id:`widget-${e}-${Math.random().toString(36).slice(2,8)}`,type:e,options:t,layout:{...n},version:1}}function zl(e){return e==="quick"?[tt("time_summary_v2"),tt("targets_v2"),tt("activity"),tt("deck_cards",{filters:["open_all","open_mine"],defaultFilter:"open_all",autoScroll:!1,showCount:!1})]:e==="pro"?[tt("time_summary_v2"),tt("targets_v2"),tt("balance"),tt("activity"),tt("dayoff_trend",{showHeader:!0,showBadges:!0}),tt("category_mix_trend",{showHeader:!0}),tt("deck_cards",{autoScroll:!0,intervalSeconds:5}),tt("deck",{showTicker:!0}),tt("notes"),tt("text_block",{preset:"targets"})]:[tt("time_summary_v2"),tt("targets_v2"),tt("balance"),tt("activity"),tt("dayoff_trend"),tt("category_mix_trend"),tt("deck_cards")]}const iy={class:"add-menu__header"},ly={class:"add-menu__hint"},dy={class:"add-menu__list"},cy=["onClick"],uy=qe(Ee({__name:"DashboardAddMenu",props:{open:{type:Boolean},x:{},y:{},row:{},col:{},widgetTypeList:{}},emits:["close","confirm"],setup(e){return(t,o)=>t.open?(w(),_("div",{key:0,class:"add-menu",style:Be({left:t.x+"px",top:t.y+"px"}),role:"menu"},[l("div",iy,[l("div",null,[o[1]||(o[1]=l("div",{class:"add-menu__title"},"Add widget",-1)),l("div",ly,"Platz: Row "+D(t.row+1)+", Col "+D(t.col),1)]),l("button",{type:"button",class:"ghost sm close-btn",onClick:o[0]||(o[0]=a=>t.$emit("close")),"aria-label":"Close add menu"},"")]),l("div",dy,[(w(!0),_(de,null,Ce(t.widgetTypeList,a=>(w(),_("button",{key:a.type,type:"button",class:"add-btn",onClick:n=>t.$emit("confirm",a.type)},D(a.label),9,cy))),128))])],4)):q("",!0)}}),[["__scopeId","data-v-022ff937"]]),fy=["draggable","onClick","onDragstart"],py=qe(Ee({__name:"DashboardGrid",props:{ordered:{},editable:{type:Boolean},selectedId:{},widgetTypeList:{}},emits:["select","add","reorder"],setup(e,{emit:t}){const o=e,a=t,n=Z(null),r=Z(null),i=Z(null),s=Tt({open:!1,x:0,y:0,row:0,col:0}),d=O(()=>o.widgetTypeList||[]),c=O(()=>{const L=[];let F={items:[],col:1,remaining:4};const W=()=>{F.items.length&&L.push({items:F.items}),F={items:[],col:1,remaining:4}};return o.ordered.forEach(B=>{const E=b(B.layout.width);E>F.remaining&&W();const U=F.col;F.items.push({...B,span:E,start:U}),F.col+=E,F.remaining-=E}),W(),L}),f=O(()=>{const L={s:140,m:220,l:320},F=c.value.map(W=>W.items.reduce((E,U)=>Math.max(E,L[U.layout.height]||L.m),L.m));return F.push(200),F});function g(L){switch(L){case"quarter":return"w-quarter";case"half":return"w-half";default:return"w-full"}}function b(L){return L==="quarter"?1:L==="half"?2:4}function p(L){switch(L){case"s":return"h-s";case"l":return"h-l";default:return"h-m"}}function m(L){return L==="sm"?"text-sm":L==="lg"?"text-lg":"text-md"}function u(L){return L==="sm"?"text-scale-sm":L==="lg"?"text-scale-lg":"text-scale-md"}function x(L){const F=n.value;if(!F)return{row:0,col:1};const W=F.getBoundingClientRect(),B=12,U=(W.width-B*3)/4,R=Math.max(0,Math.min(W.width,L.clientX-W.left)),ie=Math.min(3,Math.max(0,Math.floor(R/(U+B))))+1,V=f.value,J=Math.max(0,Math.min(W.height+400,L.clientY-W.top));let z=0,fe=0;for(let G=0;G<V.length;G++){const P=V[G];if(J<=z+P){fe=G;break}z+=P+B,fe=G}return{row:fe,col:ie}}function C(L,F){var ie,V,J,z;const W=c.value,B=W[L]||W[W.length-1]||{items:[]},E=[...B.items||[]].filter(fe=>fe.start<F).sort((fe,G)=>fe.start-G.start).pop(),U=[...B.items||[]].filter(fe=>fe.start>=F).sort((fe,G)=>fe.start-G.start)[0];if(E&&U)return(E.layout.order+U.layout.order)/2;if(E)return(E.layout.order||0)+5;if(U)return(U.layout.order||0)-5;const R=W[L-1]||W[W.length-1];return R&&R.items.length?(R.items[R.items.length-1].layout.order||0)+10:((((z=(J=(V=(ie=W[0])==null?void 0:ie.items)==null?void 0:V[0])==null?void 0:J.layout)==null?void 0:z.order)??0)||0)-10}function h(L){if(!o.editable||!d.value.length)return;const{row:F,col:W}=x(L);s.open=!0,s.x=L.clientX,s.y=L.clientY,s.row=F,s.col=W}function k(L){o.editable&&(L.target.closest(".layout-item")||h(L))}function v(L){o.editable&&(L.target.closest(".layout-item")||h(L))}function S(L){if(!o.editable||!r.value)return;const{row:F,col:W}=x(L);i.value=C(F,W)}function N(){if(!o.editable||!r.value)return;const L=r.value,F=i.value??void 0;r.value=null,i.value=null,a("reorder",L,F)}function A(){s.open=!1}function $(L){const F=C(s.row,s.col);a("add",L,F),A()}function T(L){o.editable&&(r.value=L,i.value=null,A())}function j(){r.value=null,i.value=null}return(L,F)=>(w(),_(de,null,[l("div",{ref_key:"gridEl",ref:n,class:Te(["layout-grid",{"show-guides":L.editable}]),onClick:k,onContextmenu:ot(v,["prevent"]),onDragover:ot(S,["prevent"]),onDrop:ot(N,["prevent"])},[(w(!0),_(de,null,Ce(L.ordered,W=>{var B,E,U;return w(),_("div",{key:W.id,class:Te(["layout-item",[g(W.layout.width),p(W.layout.height),m((B=W.options)==null?void 0:B.textSize),u((E=W.options)==null?void 0:E.textSize),{"is-editable":L.editable,"is-dense":(U=W.options)==null?void 0:U.dense,"is-selected":L.editable&&L.selectedId===W.id,"is-dragging":L.editable&&r.value===W.id}]]),draggable:L.editable,onClick:ot(R=>a("select",W.id),["stop"]),onDragstart:R=>T(W.id),onDragend:j},[(w(),Je(Ic(W.component),Li({ref_for:!0},W.props),null,16))],42,fy)}),128))],34),Se(uy,{open:L.editable&&s.open,x:s.x,y:s.y,row:s.row,col:s.col,"widget-type-list":d.value,onClose:A,onConfirm:$},null,8,["open","x","y","row","col","widget-type-list"])],64))}}),[["__scopeId","data-v-f5ed2b29"]]),gy={key:0,class:"options-pop"},my={class:"opt-section"},hy=["for"],vy=["id","min","max","step","value","onInput"],by=["id","value","onChange"],yy=["value"],ky=["id","checked","onChange"],wy=["id","value","onInput"],xy=["id","value","onInput"],_y={key:0,class:"opt-section"},Cy=["for"],Sy=["id","min","max","step","value","onInput"],$y=["id","value","onChange"],Ty=["value"],My=["id","checked","onChange"],Ay=["id","value","onInput"],Dy=["id","value","onInput"],Ey={key:5,class:"colorlist"},Oy=["value","onInput"],Ny=["onClick"],Ly={key:6,class:"multi"},Iy=["value","checked","onChange"],By=["id","value","onInput"],Py={key:1,class:"opt-row opt-row--footer"},Fy=qe(Ee({__name:"WidgetOptionsMenu",props:{entry:{},options:{},open:{type:Boolean},showAdvanced:{type:Boolean},context:{}},emits:["change","toggle","open-advanced"],setup(e,{emit:t}){const o=e,a=t,n=Z({}),r=[{key:"titlePrefix",label:"Title prefix",type:"text"},{key:"cardBg",label:"Card background",type:"color",hint:"Pick a card fill; leave empty for default."},{key:"textSize",label:"Text size",type:"select",options:[{value:"sm",label:"Small"},{value:"md",label:"Normal"},{value:"lg",label:"Large"}]},{key:"dense",label:"Dense mode",type:"toggle"}],i=O(()=>{var N,A;const h=new Set(r.map($=>$.key)),k=((N=o.entry)==null?void 0:N.controls)||[],v=typeof((A=o.entry)==null?void 0:A.dynamicControls)=="function"?o.entry.dynamicControls(o.options||{},o.context||{}):[];return[...k,...v].filter($=>!h.has($.key))});Le(()=>o.options,h=>{var v;const k=((v=o.entry)==null?void 0:v.defaultOptions)||{};n.value={...k,...h||{}}},{immediate:!0,deep:!0});const s=O({get:()=>!!o.open,set:h=>a("toggle",h)});function d(h,k){const v=Number(k.target.value);a("change",h,v)}function c(h,k){const v=k.target.value;a("change",h,v)}function f(h,k){const v=k.target.checked;a("change",h,v)}function g(h,k){const v=k.target.value;a("change",h,v)}function b(h,k,v){const S=v.target.checked,N=Array.isArray(n.value[h])?[...n.value[h]]:[],A=new Set(N);S?A.add(k):A.delete(k),a("change",h,Array.from(A))}function p(h){if(!h.includes("."))return n.value[h];const k=h.split(".");let v=n.value;for(const S of k){if(v==null)return;v=v[S]}return v}function m(h){const k=p(h);return Array.isArray(k)&&k.length?k:typeof k=="string"&&k.trim()?k.split(",").map(v=>v.trim()).filter(Boolean):C.slice(0,5)}function u(h,k,v){const S=v.target.value,N=[...m(h)];N[k]=S,a("change",h,N)}function x(h){const k=[...m(h),"#cccccc"];a("change",h,k)}const C=["#2563EB","#F97316","#10B981","#A855F7","#EC4899"];return(h,k)=>(w(),_("div",{class:"options-wrapper",onKeydown:k[2]||(k[2]=ot(()=>{},["stop"]))},[l("button",{type:"button",class:"ghost",title:"Configure widget",onClick:k[0]||(k[0]=ot(v=>s.value=!s.value,["stop"]))},""),s.value?(w(),_("div",gy,[l("div",my,[k[3]||(k[3]=l("div",{class:"opt-section__title"},"Layout & title",-1)),(w(),_(de,null,Ce(r,v=>l("div",{key:v.key,class:"opt-row"},[l("label",{for:`opt-${v.key}`},D(v.label),9,hy),v.type==="number"?(w(),_("input",{key:0,id:`opt-${v.key}`,type:"number",min:v.min,max:v.max,step:v.step||1,value:p(v.key)??"",onInput:S=>d(v.key,S)},null,40,vy)):v.type==="select"?(w(),_("select",{key:1,id:`opt-${v.key}`,value:p(v.key),onChange:S=>c(v.key,S)},[(w(!0),_(de,null,Ce(v.options||[],S=>(w(),_("option",{key:S.value,value:S.value},D(S.label),9,yy))),128))],40,by)):v.type==="toggle"?(w(),_("input",{key:2,id:`opt-${v.key}`,type:"checkbox",checked:!!p(v.key),onChange:S=>f(v.key,S)},null,40,ky)):v.type==="text"?(w(),_("input",{key:3,id:`opt-${v.key}`,type:"text",value:p(v.key)??"",onInput:S=>g(v.key,S)},null,40,wy)):v.type==="color"?(w(),_("input",{key:4,id:`opt-${v.key}`,type:"color",value:p(v.key)??"#ffffff",onInput:S=>g(v.key,S)},null,40,xy)):q("",!0)])),64))]),i.value.length?(w(),_("div",_y,[k[4]||(k[4]=l("div",{class:"opt-section__title"},"Widget options",-1)),(w(!0),_(de,null,Ce(i.value,v=>(w(),_("div",{key:v.key,class:"opt-row"},[l("label",{for:`opt-${v.key}`},D(v.label),9,Cy),v.type==="number"?(w(),_("input",{key:0,id:`opt-${v.key}`,type:"number",min:v.min,max:v.max,step:v.step||1,value:p(v.key)??"",onInput:S=>d(v.key,S)},null,40,Sy)):v.type==="select"?(w(),_("select",{key:1,id:`opt-${v.key}`,value:p(v.key),onChange:S=>c(v.key,S)},[(w(!0),_(de,null,Ce(v.options||[],S=>(w(),_("option",{key:S.value,value:S.value},D(S.label),9,Ty))),128))],40,$y)):v.type==="toggle"?(w(),_("input",{key:2,id:`opt-${v.key}`,type:"checkbox",checked:!!p(v.key),onChange:S=>f(v.key,S)},null,40,My)):v.type==="text"?(w(),_("input",{key:3,id:`opt-${v.key}`,type:"text",value:p(v.key)??"",onInput:S=>g(v.key,S)},null,40,Ay)):v.type==="color"?(w(),_("input",{key:4,id:`opt-${v.key}`,type:"color",value:p(v.key)??"#ffffff",onInput:S=>g(v.key,S)},null,40,Dy)):v.type==="colorlist"?(w(),_("div",Ey,[(w(!0),_(de,null,Ce(m(v.key),(S,N)=>(w(),_("div",{key:`${v.key}-${N}`,class:"colorlist__item"},[l("input",{type:"color",value:S,onInput:A=>u(v.key,N,A)},null,40,Oy)]))),128)),l("button",{type:"button",class:"ghost sm",onClick:S=>x(v.key)},"+",8,Ny)])):v.type==="multiselect"?(w(),_("div",Ly,[(w(!0),_(de,null,Ce(v.options||[],S=>(w(),_("label",{key:`${v.key}-${S.value}`,class:"multi__item"},[l("input",{type:"checkbox",value:S.value,checked:Array.isArray(p(v.key))?p(v.key).includes(S.value):!1,onChange:N=>b(v.key,S.value,N)},null,40,Iy),l("span",null,D(S.label),1)]))),128))])):v.type==="textarea"?(w(),_("textarea",{key:7,id:`opt-${v.key}`,rows:"3",value:p(v.key)??"",onInput:S=>g(v.key,S)},null,40,By)):q("",!0)]))),128))])):q("",!0),h.showAdvanced?(w(),_("div",Py,[l("button",{type:"button",class:"link-btn",title:"Opens a full targets editor for this widget only. Use the reset inside to go back to global.",onClick:k[1]||(k[1]=ot(v=>a("open-advanced"),["stop"]))}," Advanced targets (widget only) ")])):q("",!0)])):q("",!0)],32))}}),[["__scopeId","data-v-0c2fa778"]]),Wy={key:0,class:"widget-toolbar-layer"},Hy={class:"widget-toolbar"},Ry={class:"toolbar-title"},zy={key:0,class:"toolbar-actions"},jy={key:1,class:"toolbar-actions"},Uy=qe(Ee({__name:"DashboardToolbar",props:{editable:{type:Boolean},selectedItem:{},openOptionsId:{},presetLabel:{},context:{}},emits:["select-first","move","cycle-width","cycle-height","remove","reset-preset","toggle-options","open-advanced","edit-options"],setup(e){const t=e,o=O(()=>{var c,f,g;const s=((f=(c=t.selectedItem)==null?void 0:c.props)==null?void 0:f.title)||"";if(s)return s;const d=t.selectedItem?jo[t.selectedItem.type]:null;return(d==null?void 0:d.label)||((g=t.selectedItem)==null?void 0:g.type)||"Widget"});function a(s){return jo[s]}function n(s){var d;return!!((d=jo[s])!=null&&d.configurable)}function r(s){return s==="quarter"?"":s==="half"?"":"1"}function i(s){return s==="s"?"S":s==="l"?"L":"M"}return(s,d)=>(w(),Je(yc,{to:"body"},[s.editable?(w(),_("div",Wy,[l("div",Hy,[l("div",Ry,[s.selectedItem?(w(),_(de,{key:0},[Ae(D(o.value),1)],64)):(w(),_(de,{key:1},[Ae("Click a widget to edit")],64))]),s.selectedItem?(w(),_("div",zy,[l("button",{type:"button",class:"ghost",title:"Move earlier",onClick:d[0]||(d[0]=c=>s.$emit("move","up"))},""),l("button",{type:"button",class:"ghost",title:"Move later",onClick:d[1]||(d[1]=c=>s.$emit("move","down"))},""),l("button",{type:"button",class:"ghost",title:"Cycle width",onClick:d[2]||(d[2]=c=>s.$emit("cycle-width"))},D(r(s.selectedItem.layout.width)),1),l("button",{type:"button",class:"ghost",title:"Cycle height",onClick:d[3]||(d[3]=c=>s.$emit("cycle-height"))},D(i(s.selectedItem.layout.height)),1),s.selectedItem&&n(s.selectedItem.type)?(w(),Je(Fy,{key:0,entry:a(s.selectedItem.type),options:s.selectedItem.options,open:s.openOptionsId===s.selectedItem.id,"show-advanced":s.selectedItem.type==="targets_v2",context:s.context,onToggle:d[4]||(d[4]=c=>s.$emit("toggle-options",s.selectedItem.id,c)),onOpenAdvanced:d[5]||(d[5]=c=>s.$emit("open-advanced",s.selectedItem.id)),onChange:d[6]||(d[6]=(c,f)=>s.$emit("edit-options",s.selectedItem.id,c,f))},null,8,["entry","options","open","show-advanced","context"])):q("",!0),s.presetLabel?(w(),_("button",{key:1,type:"button",class:"ghost",title:"Reset widgets to preset",onClick:d[7]||(d[7]=c=>s.$emit("reset-preset"))}," Reset "+D(s.presetLabel),1)):q("",!0),l("button",{type:"button",class:"ghost danger",title:"Remove widget",onClick:d[8]||(d[8]=c=>s.$emit("remove"))},"")])):(w(),_("div",jy,[l("button",{type:"button",class:"ghost",onClick:d[9]||(d[9]=c=>s.$emit("select-first"))},"Select first widget")]))])])):q("",!0)]))}}),[["__scopeId","data-v-24378dd6"]]),Vy={id:"opsdash-sidebar-pane-targets",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-targets"},Ky={class:"target-config"},qy={class:"field"},Gy=["value","aria-invalid"],Jy={class:"field"},Yy=["value","aria-invalid"],Zy={class:"cat-header"},Xy=["value","onInput"],Qy=["disabled","onClick"],e1={class:"cat-fields"},t1={class:"field"},o1=["value","aria-invalid","onInput"],a1={class:"field"},n1=["value","onChange"],r1={class:"field checkbox"},s1=["checked","onChange"],i1={class:"field color-field"},l1=["aria-expanded","aria-label","onClick"],d1=["id"],c1={class:"swatch-grid",role:"group","aria-label":"Preset colors"},u1=["aria-label","onClick"],f1={class:"custom-color"},p1=["value","onInput"],g1={class:"target-section"},m1={class:"field checkbox"},h1=["checked"],v1={class:"field"},b1=["value"],y1={class:"field"},k1=["value","aria-invalid"],w1={class:"field"},x1=["value","aria-invalid"],_1={class:"target-section"},C1={class:"field"},S1=["value"],$1={class:"field"},T1=["value","aria-invalid"],M1={class:"field"},A1=["value","aria-invalid"],D1={class:"target-section"},E1={class:"field checkbox"},O1=["checked"],N1={class:"field checkbox"},L1=["checked"],I1=qe(Ee({__name:"SidebarTargetsPane",props:{targets:{},categoryOptions:{},totalTargetMessage:{},allDayHoursMessage:{},categoryTargetMessages:{},paceThresholdMessages:{},forecastMomentumMessage:{},forecastPaddingMessage:{},canAddCategory:{type:Boolean},colorPalette:{}},emits:["total-target-input","set-all-day-hours","set-category-label","remove-category","set-category-target","set-category-pace","set-category-weekend","set-category-color","add-category","set-include-weekend-total","set-pace-mode","set-threshold","set-forecast-method","set-forecast-momentum","set-forecast-padding","set-ui-option"],setup(e,{emit:t}){const o=e,{targets:a,categoryOptions:n,totalTargetMessage:r,allDayHoursMessage:i,categoryTargetMessages:s,paceThresholdMessages:d,forecastMomentumMessage:c,forecastPaddingMessage:f,canAddCategory:g,colorPalette:b}=Ua(o),p=t,m=O(()=>{var A;return k((A=b.value)==null?void 0:A[0])??"#2563EB"}),u=Z(null);function x(A){const $=A.target;$!=null&&$.closest("[data-color-popover]")||h()}It(()=>{document.addEventListener("click",x)}),Rt(()=>{document.removeEventListener("click",x)});function C(A){if(u.value===A){h();return}u.value=A,Yt(()=>{const $=document.getElementById(`opsdash-color-popover-${A}`);$==null||$.focus()})}function h(){u.value=null}function k(A){if(typeof A!="string")return null;const $=A.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test($))return null;if($.length===4){const[,T,j,L]=$;return`#${T}${T}${j}${j}${L}${L}`.toUpperCase()}return $.toUpperCase()}function v(A){return k(A==null?void 0:A.color)??m.value}function S(A,$){const T=k($)??m.value;p("set-category-color",{id:A,color:T})}function N(A,$){const T=k($)??m.value;p("set-category-color",{id:A,color:T}),h()}return(A,$)=>{var T,j,L,F,W,B,E,U,R,ie,V,J;return w(),_("div",Vy,[$[36]||($[36]=l("div",{class:"sb-title"},"Target Settings",-1)),l("div",Ky,[l("div",qy,[$[14]||($[14]=l("span",{class:"label"},"Total target (h)",-1)),l("input",{type:"number",value:y(a).totalHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!y(r),onInput:$[0]||($[0]=z=>A.$emit("total-target-input",z.target.value))},null,40,Gy),y(r)?(w(),_("div",{key:0,class:Te(["input-message",(T=y(r))==null?void 0:T.tone])},D((j=y(r))==null?void 0:j.text),3)):q("",!0)]),l("div",Jy,[$[15]||($[15]=l("span",{class:"label"},"All-day event (h per day)",-1)),l("input",{type:"number",value:y(a).allDayHours,min:"0",max:"24",step:"0.25","aria-invalid":!!y(i),onInput:$[1]||($[1]=z=>A.$emit("set-all-day-hours",z.target.value))},null,40,Yy),y(i)?(w(),_("div",{key:0,class:Te(["input-message",(L=y(i))==null?void 0:L.tone])},D((F=y(i))==null?void 0:F.text),3)):q("",!0)]),(w(!0),_(de,null,Ce(y(n),z=>{var fe,G;return w(),_("div",{class:"target-category",key:z.id},[l("div",Zy,[l("span",{class:"cat-color-indicator",style:Be({backgroundColor:v(z)}),"aria-hidden":"true"},null,4),l("input",{class:"cat-name",type:"text",value:z.label,placeholder:"Category name",onInput:P=>A.$emit("set-category-label",{id:z.id,label:P.target.value})},null,40,Xy),l("button",{class:"remove-cat",type:"button",disabled:y(n).length<=1,title:"Remove category",onClick:P=>A.$emit("remove-category",z.id)},"  ",8,Qy)]),l("div",e1,[l("label",t1,[$[16]||($[16]=l("span",{class:"label"},"Target (h)",-1)),l("input",{type:"number",value:z.targetHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!y(s)[z.id],onInput:P=>A.$emit("set-category-target",{id:z.id,value:P.target.value})},null,40,o1),y(s)[z.id]?(w(),_("div",{key:0,class:Te(["input-message",(fe=y(s)[z.id])==null?void 0:fe.tone])},D((G=y(s)[z.id])==null?void 0:G.text),3)):q("",!0)]),l("label",a1,[$[18]||($[18]=l("span",{class:"label"},"Pace mode",-1)),l("select",{value:z.paceMode||y(a).pace.mode,onChange:P=>A.$emit("set-category-pace",{id:z.id,mode:P.target.value})},[...$[17]||($[17]=[l("option",{value:"days_only"},"Days only",-1),l("option",{value:"time_aware"},"Time aware",-1)])],40,n1)]),l("label",r1,[l("input",{type:"checkbox",checked:z.includeWeekend,onChange:P=>A.$emit("set-category-weekend",{id:z.id,value:P.target.checked})},null,40,s1),$[19]||($[19]=l("span",null,"Weekend",-1))]),l("div",i1,[l("div",{class:"color-trigger-wrapper","data-color-popover":"",onClick:$[3]||($[3]=ot(()=>{},["stop"]))},[l("button",{type:"button",class:"color-link","aria-expanded":u.value===z.id,"aria-label":`Choose color for ${z.label}`,onClick:P=>C(z.id)}," Color ",8,l1),u.value===z.id?(w(),_("div",{key:0,class:"color-popover",id:`opsdash-color-popover-${z.id}`,tabindex:"-1",onKeydown:$[2]||($[2]=fn(ot(P=>h(),["prevent"]),["esc"]))},[l("div",c1,[(w(!0),_(de,null,Ce(y(b),P=>(w(),_("button",{key:`${z.id}-swatch-${P}`,type:"button",class:Te(["color-swatch",{active:v(z)===P}]),style:Be({backgroundColor:P}),"aria-label":`Use color ${P}`,onClick:H=>N(z.id,P)},null,14,u1))),128))]),l("label",f1,[$[20]||($[20]=l("span",null,"Custom",-1)),l("input",{class:"color-input",type:"color",value:v(z),"aria-label":"Pick custom color",onInput:P=>S(z.id,P.target.value)},null,40,p1)])],40,d1)):q("",!0)])])])])}),128)),Se(y(et),{type:"tertiary",class:"add-category",disabled:!y(g),onClick:$[4]||($[4]=z=>A.$emit("add-category"))},{default:je(()=>[...$[21]||($[21]=[Ae(" Add category ",-1)])]),_:1},8,["disabled"]),l("div",g1,[$[27]||($[27]=l("div",{class:"section-title"},"Pace",-1)),l("label",m1,[l("input",{type:"checkbox",checked:y(a).pace.includeWeekendTotal,onChange:$[5]||($[5]=z=>A.$emit("set-include-weekend-total",z.target.checked))},null,40,h1),$[22]||($[22]=l("span",null,"Count weekend in total pace",-1))]),l("label",v1,[$[24]||($[24]=l("span",{class:"label"},"Mode",-1)),l("select",{value:y(a).pace.mode,onChange:$[6]||($[6]=z=>A.$emit("set-pace-mode",z.target.value))},[...$[23]||($[23]=[l("option",{value:"days_only"},"Days only",-1),l("option",{value:"time_aware"},"Time aware",-1)])],40,b1)]),l("label",y1,[$[25]||($[25]=l("span",{class:"label"},"On track  gap (%)",-1)),l("input",{type:"number",value:y(a).pace.thresholds.onTrack,step:"0.1","aria-invalid":!!y(d).onTrack,onInput:$[7]||($[7]=z=>A.$emit("set-threshold",{key:"onTrack",value:z.target.value}))},null,40,k1),y(d).onTrack?(w(),_("div",{key:0,class:Te(["input-message",(W=y(d).onTrack)==null?void 0:W.tone])},D((B=y(d).onTrack)==null?void 0:B.text),3)):q("",!0)]),l("label",w1,[$[26]||($[26]=l("span",{class:"label"},"At risk  gap (%)",-1)),l("input",{type:"number",value:y(a).pace.thresholds.atRisk,step:"0.1","aria-invalid":!!y(d).atRisk,onInput:$[8]||($[8]=z=>A.$emit("set-threshold",{key:"atRisk",value:z.target.value}))},null,40,x1),y(d).atRisk?(w(),_("div",{key:0,class:Te(["input-message",(E=y(d).atRisk)==null?void 0:E.tone])},D((U=y(d).atRisk)==null?void 0:U.text),3)):q("",!0)])]),l("div",_1,[$[32]||($[32]=l("div",{class:"section-title"},"Forecast",-1)),l("label",C1,[$[29]||($[29]=l("span",{class:"label"},"Primary method",-1)),l("select",{value:y(a).forecast.methodPrimary,onChange:$[9]||($[9]=z=>A.$emit("set-forecast-method",z.target.value))},[...$[28]||($[28]=[l("option",{value:"linear"},"Linear",-1),l("option",{value:"momentum"},"Momentum",-1)])],40,S1)]),l("label",$1,[$[30]||($[30]=l("span",{class:"label"},"Momentum window (days)",-1)),l("input",{type:"number",value:y(a).forecast.momentumLastNDays,min:"1",max:"14",step:"1","aria-invalid":!!y(c),onInput:$[10]||($[10]=z=>A.$emit("set-forecast-momentum",z.target.value))},null,40,T1),y(c)?(w(),_("div",{key:0,class:Te(["input-message",(R=y(c))==null?void 0:R.tone])},D((ie=y(c))==null?void 0:ie.text),3)):q("",!0)]),l("label",M1,[$[31]||($[31]=l("span",{class:"label"},"Padding (h)",-1)),l("input",{type:"number",value:y(a).forecast.padding,min:"0",step:"0.1","aria-invalid":!!y(f),onInput:$[11]||($[11]=z=>A.$emit("set-forecast-padding",z.target.value))},null,40,A1),y(f)?(w(),_("div",{key:0,class:Te(["input-message",(V=y(f))==null?void 0:V.tone])},D((J=y(f))==null?void 0:J.text),3)):q("",!0)])]),l("div",D1,[$[35]||($[35]=l("div",{class:"section-title"},"Display",-1)),l("label",E1,[l("input",{type:"checkbox",checked:y(a).ui.showCalendarCharts,onChange:$[12]||($[12]=z=>A.$emit("set-ui-option",{key:"showCalendarCharts",value:z.target.checked}))},null,40,O1),$[33]||($[33]=l("span",null,"Show calendar charts",-1))]),l("label",N1,[l("input",{type:"checkbox",checked:y(a).ui.showCategoryCharts,onChange:$[13]||($[13]=z=>A.$emit("set-ui-option",{key:"showCategoryCharts",value:z.target.checked}))},null,40,L1),$[34]||($[34]=l("span",null,"Show category charts",-1))])])])])}}}),[["__scopeId","data-v-1e606590"]]),B1={key:0,class:"advanced-overlay",role:"dialog","aria-modal":"true","aria-label":"Targets configuration"},P1={class:"advanced-panel"},F1=qe(Ee({__name:"DashboardAdvancedTargetsOverlay",props:{widgetId:{},widgets:{},contextTargetsConfig:{}},emits:["close","save","use-global","open-onboarding"],setup(e,{emit:t}){const o=e,a=t,n=Z(null),r=Z(null),i=Z(null),s=Z(null),d=Z(null),c=Tt({onTrack:null,atRisk:null}),f=Tt({}),g=ct(void 0);Le(()=>o.widgetId,ee=>{if(!ee){n.value=null,x();return}const X=o.widgets.find(He=>He.id===ee),le=(X==null?void 0:X.options)||{},we=le.useLocalConfig&&le.localConfig?ct(le.localConfig):ct(o.contextTargetsConfig);n.value=Ut(we),x()},{immediate:!0});const b=O(()=>{var ee;return((ee=n.value)==null?void 0:ee.categories)??[]}),p=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],m=O(()=>{const ee=new Set,X=le=>{const we=S(le);we&&ee.add(we)};return b.value.forEach(le=>X(le.color)),p.forEach(le=>ee.add(le)),Array.from(ee)}),u=O(()=>{const ee=n.value;return ee?N(ee)!==null:!1});function x(){r.value=null,i.value=null,s.value=null,d.value=null,c.onTrack=null,c.atRisk=null,Object.keys(f).forEach(ee=>{delete f[ee]})}function C(){a("close")}function h(){!o.widgetId||!n.value||a("save",o.widgetId,Ut(n.value))}function k(){o.widgetId&&a("use-global",o.widgetId)}function v(){a("open-onboarding","categories")}function S(ee){if(typeof ee!="string")return null;const X=ee.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(X))return null;if(X.length===4){const[,le,we,He]=X;return`#${le}${le}${we}${we}${He}${He}`.toUpperCase()}return X.toUpperCase()}function N(ee){const X=new Set;ee.categories.forEach(le=>{(le.groupIds||[]).forEach(we=>{const He=Number(we);Number.isFinite(He)&&X.add(He)})});for(let le=1;le<=9;le++)if(!X.has(le))return le;return null}function A(){return`cat-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`}function $(ee){const X=new Set;ee.categories.forEach(le=>{const we=S(le==null?void 0:le.color);we&&X.add(we)});for(const le of p)if(!X.has(le))return le;return p[0]??null}function T(ee){if(!n.value)return;const X=Ut(n.value);ee(X),n.value=X}function j(ee,X){T(le=>{const we=le.categories.find(He=>He.id===ee);we&&X(we)})}function L(ee){oo(ee,{min:0,max:1e3,step:.5,decimals:2},X=>{r.value=X},X=>T(le=>{le.totalHours=X}))}function F(ee){oo(ee,{min:0,max:24,step:.25,decimals:2},X=>{i.value=X},X=>T(le=>{le.allDayHours=X}),"024 hours per day")}function W(ee,X){oo(X,{min:0,max:1e3,step:.5,decimals:2},le=>{f[ee]=le},le=>j(ee,we=>{we.targetHours=le}))}function B(ee,X){j(ee,le=>{le.label=X.trim()||le.label})}function E(ee,X){j(ee,le=>{le.includeWeekend=X})}function U(ee,X){const le=S(X);j(ee,we=>{we.color=le??null})}function R(ee,X){X!=="days_only"&&X!=="time_aware"||j(ee,le=>{le.paceMode=X})}function ie(ee){T(X=>{X.pace.includeWeekendTotal=ee})}function V(ee){ee!=="days_only"&&ee!=="time_aware"||T(X=>{X.pace.mode=ee})}function J(ee,X){oo(X,{min:-100,max:100,step:.1,decimals:1},le=>{c[ee]=le},le=>T(we=>{we.pace.thresholds[ee]=le}))}function z(ee){const X=ee==="momentum"?"momentum":"linear";T(le=>{le.forecast.methodPrimary=X})}function fe(ee){oo(ee,{min:1,max:14,step:1,decimals:0},X=>{s.value=X},X=>T(le=>{le.forecast.momentumLastNDays=X}))}function G(ee){oo(ee,{min:0,max:100,step:.1,decimals:1},X=>{d.value=X},X=>T(le=>{le.forecast.padding=X}))}function P(ee,X){T(le=>{le.ui||(le.ui={...g.ui}),le.ui[ee]=X})}function H(){const ee=n.value;if(!ee)return;const X=N(ee);X!==null&&T(le=>{const we=$(le);le.categories=[...le.categories,{id:A(),label:`Category ${le.categories.length+1}`,targetHours:0,includeWeekend:!0,paceMode:"days_only",color:we,groupIds:[X]}]})}function oe(ee){const X=n.value;!X||X.categories.length<=1||(T(le=>{le.categories=le.categories.filter(we=>we.id!==ee)}),delete f[ee])}return(ee,X)=>ee.widgetId&&n.value?(w(),_("div",B1,[l("div",P1,[l("div",{class:"overlay-header"},[X[7]||(X[7]=l("div",null,[l("div",{class:"overlay-title"},"Targets (this widget only)"),l("div",{class:"overlay-subtitle"},"Starts from global targets; saving keeps a local copy for this widget.")],-1)),l("button",{type:"button",class:"ghost danger",onClick:C,"aria-label":"Close"},"")]),Se(I1,{targets:n.value,"category-options":b.value,"total-target-message":r.value,"all-day-hours-message":i.value,"category-target-messages":f,"pace-threshold-messages":c,"forecast-momentum-message":s.value,"forecast-padding-message":d.value,"color-palette":m.value,"can-add-category":u.value,onTotalTargetInput:L,onSetAllDayHours:F,onSetCategoryTarget:X[0]||(X[0]=({id:le,value:we})=>W(le,we)),onSetCategoryLabel:X[1]||(X[1]=({id:le,label:we})=>B(le,we)),onSetCategoryWeekend:X[2]||(X[2]=({id:le,value:we})=>E(le,we)),onSetCategoryPace:X[3]||(X[3]=({id:le,mode:we})=>R(le,we)),onSetCategoryColor:X[4]||(X[4]=({id:le,color:we})=>U(le,we)),onAddCategory:H,onRemoveCategory:oe,onSetIncludeWeekendTotal:ie,onSetPaceMode:V,onSetThreshold:X[5]||(X[5]=({key:le,value:we})=>J(le,we)),onSetForecastMethod:z,onSetForecastMomentum:fe,onSetForecastPadding:G,onSetUiOption:X[6]||(X[6]=({key:le,value:we})=>P(le,we))},null,8,["targets","category-options","total-target-message","all-day-hours-message","category-target-messages","pace-threshold-messages","forecast-momentum-message","forecast-padding-message","color-palette","can-add-category"]),l("div",{class:"overlay-actions"},[l("div",{class:"overlay-actions__left"},[l("button",{type:"button",class:"ghost",onClick:k},"Use global targets"),l("button",{type:"button",class:"ghost",onClick:v},"Edit via onboarding")]),l("div",{class:"overlay-actions__right"},[l("button",{type:"button",class:"ghost",onClick:C},"Cancel"),l("button",{type:"button",class:"ghost primary",onClick:h},"Save")])])])])):q("",!0)}}),[["__scopeId","data-v-539a10f9"]]),W1=qe(Ee({__name:"DashboardLayout",props:{widgets:{},context:{},editable:{type:Boolean},widgetTypes:{},presetLabel:{}},emits:["edit:width","edit:height","edit:remove","edit:move","edit:options","edit:add","edit:reorder","open:onboarding","reset:preset"],setup(e,{emit:t}){const o=e,a=t,n=Z(null),r=Z(null),i=Z(null),s=O(()=>(o.widgets||[]).slice().sort((A,$)=>(A.layout.order||0)-($.layout.order||0)).map(A=>{const $=sy(A,o.context);if(!$)return null;const T=A.options||{};return{...$,id:A.id,layout:A.layout,type:A.type,options:T}}).filter(Boolean)),d=O(()=>s.value.find(A=>A.id===i.value)||null),c=O(()=>o.widgetTypes||[]);Le(()=>o.editable,A=>{A&&!i.value&&s.value.length&&(i.value=s.value[0].id),A||(i.value=null,n.value=null,r.value=null)},{immediate:!0}),Le(()=>s.value.map(A=>A.id).join("|"),()=>{var A;i.value&&!s.value.find($=>$.id===i.value)&&(i.value=((A=s.value[0])==null?void 0:A.id)||null)});function f(A,$){n.value=$?A:null,!$&&r.value===A&&(r.value=null)}function g(A){i.value=A,n.value=null}function b(){s.value.length&&(i.value=s.value[0].id)}function p(){i.value=null,n.value=null,r.value=null}function m(){i.value&&a("edit:width",i.value)}function u(){i.value&&a("edit:height",i.value)}function x(A){i.value&&a("edit:move",i.value,A)}function C(){i.value&&a("edit:remove",i.value)}function h(A){i.value=A,n.value=A,r.value=A}function k(){n.value=null,r.value=null}function v(A,$){a("edit:options",A,"localConfig",$),a("edit:options",A,"useLocalConfig",!0),k()}function S(A){a("edit:options",A,"useLocalConfig",!1),a("edit:options",A,"localConfig",null),k()}function N(A){k(),a("open:onboarding",A)}return(A,$)=>(w(),_("div",{class:Te(["layout-wrapper",{"editable-mode":A.editable}]),onClick:ot(p,["self"])},[Se(py,{ordered:s.value,editable:A.editable,"selected-id":i.value,"widget-type-list":c.value,onSelect:g,onAdd:$[0]||($[0]=(T,j)=>a("edit:add",T,j)),onReorder:$[1]||($[1]=(T,j)=>a("edit:reorder",T,j))},null,8,["ordered","editable","selected-id","widget-type-list"]),Se(Uy,{editable:A.editable,"selected-item":d.value,"open-options-id":n.value,"preset-label":A.presetLabel,context:A.context,onSelectFirst:b,onMove:x,onCycleWidth:m,onCycleHeight:u,onRemove:C,onResetPreset:$[2]||($[2]=T=>a("reset:preset")),onToggleOptions:f,onOpenAdvanced:h,onEditOptions:$[3]||($[3]=(T,j,L)=>a("edit:options",T,j,L))},null,8,["editable","selected-item","open-options-id","preset-label","context"]),Se(F1,{"widget-id":r.value,widgets:A.widgets,"context-targets-config":A.context.targetsConfig,onClose:k,onSave:v,onUseGlobal:S,onOpenOnboarding:N},null,8,["widget-id","widgets","context-targets-config"])],2))}}),[["__scopeId","data-v-de4253e7"]]);function H1(e){const t=Z(""),o=Z(""),a=Z(!1);async function n(){var s,d;const i=await e.getJson(e.route("notes"),{range:e.range.value,offset:e.offset.value|0});t.value=String(((s=i==null?void 0:i.notes)==null?void 0:s.previous)??""),o.value=String(((d=i==null?void 0:i.notes)==null?void 0:d.current)??"")}async function r(){try{a.value=!0,await e.postJson(e.route("notesSave"),{range:e.range.value,offset:e.offset.value|0,content:o.value??""}),e.notifySuccess("Notes saved"),await n()}catch(i){console.error(i),e.notifyError("Failed to save notes")}finally{a.value=!1}}return{notesPrev:t,notesCurrDraft:o,isSavingNote:a,fetchNotes:n,saveNotes:r}}let _a=null,Tr=null,jl=!1;function Ul(){var t;if(typeof document>"u")return null;const e=(t=document.getElementById("app"))==null?void 0:t.getAttribute("data-opsdash-theme-preference");return e==="auto"||e==="light"||e==="dark"?e:null}function R1(){if(!(typeof window>"u"))try{vn(),z1()}catch(e){V1()&&console.warn("[opsdash] theme boot install failed",e)}}function z1(){if(_a||Tr||jl)return;const e=[];if(document.documentElement&&e.push(document.documentElement),document.body&&document.body!==document.documentElement&&e.push(document.body),e.length&&(_a=new MutationObserver(()=>vn()),e.forEach(t=>{_a==null||_a.observe(t,{attributes:!0,attributeFilter:["data-theme","class"]})})),window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>vn();typeof t.addEventListener=="function"?(t.addEventListener("change",o),Tr=()=>t.removeEventListener("change",o)):typeof t.addListener=="function"&&(t.addListener(o),Tr=()=>{t.removeListener(o)})}window.addEventListener("oc:theme:changed",vn),jl=!0}function vn(){const e=j1();if(!e)return;["icon","shortcut icon"].forEach(o=>{let a=document.querySelector(`link[rel="${o}"]`);a||(a=document.createElement("link"),a.rel=o,document.head.appendChild(a)),a.type="image/svg+xml",a.href=e})}function j1(){const e=Mr()==="dark",t=U1(),o=t("favicon.svg");if(o)return o;if(e){const n=t("app-dark.svg");if(n)return n}const a=t(e?"app-dark.svg":"app.svg");return a||"/apps-extra/opsdash/img/favicon.svg"}function Mr(){var a,n,r,i,s;const e=(a=document.documentElement)==null?void 0:a.getAttribute("data-theme");if(e==="dark"||e==="light")return e;const t=(n=document.body)==null?void 0:n.getAttribute("data-theme");if(t==="dark"||t==="light")return t;if((r=document.body)!=null&&r.classList.contains("theme--dark"))return"dark";if((i=document.body)!=null&&i.classList.contains("theme--light"))return"light";const o=(s=window.matchMedia)==null?void 0:s.call(window,"(prefers-color-scheme: dark)");return o!=null&&o.matches?"dark":"light"}function U1(){const e=window;return t=>{var o;return typeof((o=e.OC)==null?void 0:o.imagePath)=="function"?e.OC.imagePath("opsdash",t):""}}function V1(){var t;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function K1(e){const t=Z([]),o=Z({}),a=Z({}),n=Z({}),r=Z([]),i=Z(!1),s=Z(!1),d=Z(null),c=Z(""),f=Z(""),g=Z(""),b=Tt({}),p=Z([]),m=Z([]),u=Z([]),x=Z({}),C=Z({}),h=Z({}),k=Z(ct(to())),v=Z(null),S=Ul()??"auto",N=Z(S),A=Z(gn()),$=Z(mn());let T=0;async function j(){var E,U,R,ie,V,J,z,fe,G,P,H,oe,ee,X,le,we;const L=++T;i.value=!0;const F={...a.value},W={...o.value};let B=!1;try{const He={range:e.range.value,offset:e.offset.value|0,save:!1},M=await e.getJson(e.route("load"),He);if(L!==T){(E=e.isDebug)!=null&&E.call(e)&&console.warn("discarding stale load response",{currentSeq:L,loadSeq:T});return}c.value=String(((U=M.meta)==null?void 0:U.uid)??""),f.value=String(((R=M.meta)==null?void 0:R.from)??""),g.value=String(((ie=M.meta)==null?void 0:ie.to)??""),s.value=!!((V=M.meta)!=null&&V.truncated),d.value=((J=M.meta)==null?void 0:J.limits)??null;const I=pe=>{const he={};return pe&&typeof pe=="object"&&Object.entries(pe).forEach(([ke,be])=>{typeof be=="string"&&be.trim()!==""&&(he[String(ke)]=be)}),he},K=Array.isArray(M.calendars)?M.calendars:[],ne=I((z=M.colors)==null?void 0:z.byId),ae=I((fe=M.colors)==null?void 0:fe.byName),se=K.map(pe=>{if(!pe||typeof pe!="object")return pe;const he={...pe},ke=String(he.id??""),be=String(he.displayname??he.name??he.calendar??ke),_e=typeof he.color=="string"?he.color:"",xe=typeof he.color_src=="string"?he.color_src:"",Ie=ke?ne[ke]:"",Pe=be?ae[be]:"",Fe=ke?F[ke]:"",Ze=be?W[be]:"",Ue=Fe||Ze;let Oe=_e;return!Oe&&Ie&&(Oe=Ie),!Oe&&Pe&&(Oe=Pe),(!Oe||xe==="fallback")&&Ue&&(Oe=Ue),!Oe&&Ue&&(Oe=Ue),Oe&&(Oe!==_e&&(B=!0),he.color=Oe,ke&&(ne[ke]=Oe),be&&(ae[be]=Oe)),he});t.value=se,o.value=ae,a.value=ne,v.value=M.onboarding?{...M.onboarding}:null,A.value=yr(M.reportingConfig,A.value),$.value=kr(M.deckSettings,$.value),e.widgets&&(e.widgets.value=Sr(M.widgets,e.widgets.value&&e.widgets.value.length?e.widgets.value:$r()));const ge=()=>{var he,ke,be,_e;let pe=!1;try{const xe=((he=x.value)==null?void 0:he.pie)||{},Ie=Array.isArray(xe.ids)?xe.ids.map(Pe=>String(Pe??"")):[];if(Ie.length){const Pe=Array.isArray(xe.colors)?xe.colors:[],Fe=Ie.map((Ze,Ue)=>a.value[Ze]||Pe[Ue]||"#60a5fa");x.value={...x.value||{},pie:{...xe,colors:Fe}},pe=!0}}catch(xe){(ke=e.isDebug)!=null&&ke.call(e)&&console.warn("recompute pie colors failed",xe)}try{const xe=(be=x.value)==null?void 0:be.perDaySeries;if(xe&&Array.isArray(xe.series)){const Ie=xe.series.map(Pe=>{const Fe=String((Pe==null?void 0:Pe.id)??""),Ze=a.value[Fe]||Pe.color||"#60a5fa";return{...Pe,color:Ze}});x.value={...x.value||{},perDaySeries:{labels:xe.labels,series:Ie}},pe=!0}}catch(xe){(_e=e.isDebug)!=null&&_e.call(e)&&console.warn("recompute stacked colors failed",xe)}return pe},ue=((G=M.groups)==null?void 0:G.byId)??((P=M.groups)==null?void 0:P.byID)??((H=M.groups)==null?void 0:H.ids)??{},ce={};t.value.forEach(pe=>{const he=String((pe==null?void 0:pe.id)??""),ke=Number((ue==null?void 0:ue[he])??0);ce[he]=Number.isFinite(ke)?Math.max(0,Math.min(9,Math.trunc(ke))):0}),n.value=ce;const te=((oe=M.targets)==null?void 0:oe.week)??{},$e=((ee=M.targets)==null?void 0:ee.month)??{};C.value=te&&typeof te=="object"?te:{},h.value=$e&&typeof $e=="object"?$e:{},k.value=ct(M.targetsConfig??to());const me=typeof M.themePreference=="string"?M.themePreference:"";if(N.value=me==="light"||me==="dark"?me:"auto",(X=e.isDebug)!=null&&X.call(e)&&(console.group("[opsdash] calendars/colors"),console.table((t.value||[]).map(pe=>({id:pe.id,name:pe.displayname,color:pe.color,raw:pe.color_raw,src:pe.color_src}))),console.log("colors.byId",a.value),console.log("colors.byName",o.value),M.calDebug&&console.log("server calDebug",M.calDebug),M.debug&&(console.group("[opsdash] server query debug"),console.log(M.debug),console.groupEnd()),console.groupEnd()),t.value.length&&e.fetchDavColors&&t.value.filter(he=>!he.color||he.color_src==="fallback").length)try{const he=await e.fetchDavColors(c.value,t.value.map(be=>String(be.id)));let ke=!1;t.value=t.value.map(be=>{const _e=he[be.id];return _e&&_e!==be.color&&(be.color_src="dav"(be).color_raw=_e,be.color=_e,ke=!0),be}),Object.entries(he).forEach(([be,_e])=>{if(_e){const xe=String(_e);a.value[be]=xe;const Ie=t.value.find(Fe=>String((Fe==null?void 0:Fe.id)??"")===be);Ie&&(Ie.color=xe);const Pe=Ie?String(Ie.displayname??Ie.name??""):"";Pe&&(o.value[Pe]=xe)}}),ke&&((le=e.isDebug)!=null&&le.call(e)&&console.log("[opsdash] dav colors applied",he),B=!0)}catch(he){(we=e.isDebug)!=null&&we.call(e)&&console.warn("dav colors failed",he)}r.value=Array.isArray(M.selected)?M.selected.map(pe=>String(pe)):Array.isArray(M.saved)?M.saved.map(pe=>String(pe)):[],e.userChangedSelection.value=!1,Object.assign(b,M.stats??{}),p.value=Array.isArray(M.byCal)?M.byCal:[],m.value=Array.isArray(M.byDay)?M.byDay:[],u.value=Array.isArray(M.longest)?M.longest:[],x.value=M.charts??{},B&&ge(),await Yt(),e.scheduleDraw(),await e.fetchNotes().catch(()=>{})}catch(He){console.error(He),e.notifyError("Failed to load data")}finally{i.value=!1}}return{calendars:t,colorsByName:o,colorsById:a,groupsById:n,selected:r,isLoading:i,isTruncated:s,truncLimits:d,uid:c,from:f,to:g,stats:b,byCal:p,byDay:m,longest:u,charts:x,targetsWeek:C,targetsMonth:h,targetsConfig:k,onboarding:v,load:j,themePreference:N,reportingConfig:A,deckSettings:$}}function q1(e){const t=Z(!1);let o=null;function a(n=!0){o&&clearTimeout(o),o=setTimeout(async()=>{o=null;try{t.value=!0;const r=Ut(e.targetsConfig.value),i={cals:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:r};e.themePreference&&(i.theme_preference=e.themePreference.value),e.reportingConfig&&(i.reporting_config=e.reportingConfig.value),e.deckSettings&&(i.deck_settings=e.deckSettings.value),e.widgets&&(i.widgets=e.widgets.value);const s=await e.postJson(e.route("persist"),i);Array.isArray(s.read)?e.selected.value=s.read.map(g=>String(g)):Array.isArray(s.saved)&&(e.selected.value=s.saved.map(g=>String(g)));const d=s.targets_config_read,c=s.targets_config_saved,f=J1(d??c,r);if(f&&(e.targetsConfig.value=f),e.themePreference){const g=G1(s.theme_preference_read??s.theme_preference_saved);g&&(e.themePreference.value=g)}if(e.reportingConfig){const g=yr(s.reporting_config_read??s.reporting_config_saved,e.reportingConfig.value);g&&(e.reportingConfig.value=g)}if(e.deckSettings){const g=kr(s.deck_settings_read??s.deck_settings_saved,e.deckSettings.value);g&&(e.deckSettings.value=g)}if(e.widgets){const g=s.widgets_read??s.widgets_saved??s.widgets;if(Array.isArray(g)){const b=e.widgets.value&&e.widgets.value.length?e.widgets.value:$r();e.widgets.value=Sr(g,b)}}n&&e.onReload&&await e.onReload(),e.notifySuccess("Selection saved")}catch(r){console.error(r),e.notifyError("Failed to save selection")}finally{t.value=!1}},250)}return{queueSave:a,isSaving:t}}function G1(e){return e==="light"||e==="dark"||e==="auto"?e:null}function J1(e,t){if(!e)return;const o=JSON.parse(JSON.stringify(e)),a=Array.isArray(t==null?void 0:t.categories)?t.categories:[],n=new Map;return a.forEach(r=>{const i=String((r==null?void 0:r.id)??"");i&&n.set(i,r)}),Array.isArray(o.categories)&&(o.categories=o.categories.map(r=>{const i=String((r==null?void 0:r.id)??"");if(!i)return r;const s=n.get(i);return s&&((r==null?void 0:r.color)==null||r.color==="")&&typeof s.color=="string"&&s.color&&(r.color=s.color),r})),ct(o)}const Y1=1e4;function Z1(e){function t(c){return e.selected.value.includes(c)}function o(c,f){const g=new Set(e.selected.value);f?g.add(c):g.delete(c),e.selected.value=Array.from(g)}function a(c){o(c,!t(c)),e.userChangedSelection.value=!0,e.queueSave()}function n(c){e.selected.value=c?e.calendars.value.map(f=>String(f.id)):[]}function r(c,f){const g=Math.max(0,Math.min(9,Math.trunc(Number(f)||0))),b=e.groupsById.value??{};e.groupsById.value={...b,[c]:g},e.queueSave(!1)}function i(c){const f=Math.round(c*100)/100;return Math.min(Y1,Math.max(0,f))}function s(c,f){const g=Number(f);if(!Number.isFinite(g)||g<0)return;const b=i(g);if(e.range.value==="month"){const p=i(b/4);e.targetsMonth.value={...e.targetsMonth.value||{},[c]:b},e.targetsWeek.value={...e.targetsWeek.value||{},[c]:p}}else{const p=i(b*4);e.targetsWeek.value={...e.targetsWeek.value||{},[c]:b},e.targetsMonth.value={...e.targetsMonth.value||{},[c]:p}}e.queueSave(!1)}function d(c){e.targetsConfig.value=ct(c),e.queueSave(!1)}return{isSelected:t,toggleCalendar:a,setGroup:r,setTarget:s,updateTargetsConfig:d,selectAll:n}}function X1(e){const t=Z([]),o=Z(!1),a=Z(!1),n=Z(!1),r=Z([]),i=Z(null);async function s(){o.value=!0;try{const p=await e.getJson(e.route("presetsList"),{});t.value=Array.isArray(p==null?void 0:p.presets)?p.presets:[]}catch(p){console.error(p),e.notifyError("Failed to load presets")}finally{o.value=!1}}async function d(p){const m=p.trim();if(m===""){e.notifyError("Enter a preset name.");return}a.value=!0;try{const u={name:m,selected:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:e.targetsConfig.value},x=await e.postJson(e.route("presetsSave"),u);t.value=Array.isArray(x==null?void 0:x.presets)?x.presets:t.value;const C=Array.isArray(x==null?void 0:x.warnings)?x.warnings:[];r.value=C,i.value=m,e.notifySuccess(`Profile "${m}" saved`)}catch(u){console.error(u),e.notifyError("Failed to save preset")}finally{a.value=!1}}function c(p){const m=Array.isArray(p==null?void 0:p.selected)?p.selected.map(C=>String(C)):[];e.selected.value=m;const u=p!=null&&p.groups&&typeof p.groups=="object"?p.groups:{};e.groupsById.value={...u},e.targetsWeek.value=p!=null&&p.targets_week&&typeof p.targets_week=="object"?p.targets_week:{},e.targetsMonth.value=p!=null&&p.targets_month&&typeof p.targets_month=="object"?p.targets_month:{};const x=p!=null&&p.targets_config&&typeof p.targets_config=="object"?ct(p.targets_config):Ut(e.targetsConfig.value);e.targetsConfig.value=x,e.userChangedSelection.value=!1}async function f(p){const m=p.trim();if(m!==""){n.value=!0;try{const u=await e.getJson(e.route("presetsLoad",m),{}),x=(u==null?void 0:u.preset)??{},C=Array.isArray(x==null?void 0:x.warnings)?x.warnings:Array.isArray(u==null?void 0:u.warnings)?u.warnings:[];if(C.length){const h=`Some items in the saved profile are no longer available:

${C.map(k=>` ${k}`).join(`
`)}

Apply the remaining values?`;if(!window.confirm(h)){r.value=C,n.value=!1;return}}c(x),r.value=C,i.value=m,e.notifySuccess(`Profile "${m}" applied`),e.queueSave(!0),s().catch(h=>console.warn("[opsdash] refresh presets after load failed",h))}catch(u){console.error(u),e.notifyError("Failed to load preset")}finally{n.value=!1}}}async function g(p){const m=p.trim();if(m!=="")try{const u=await e.deleteJson(e.route("presetsDelete",m));t.value=Array.isArray(u==null?void 0:u.presets)?u.presets:t.value,e.notifySuccess(`Profile "${m}" deleted`),i.value===m&&(i.value=null)}catch(u){console.error(u),e.notifyError("Failed to delete preset")}}function b(){r.value=[]}return{presets:t,presetsLoading:o,presetSaving:a,presetApplying:n,presetWarnings:r,lastLoadedPreset:i,refreshPresets:s,savePreset:d,loadPreset:f,deletePreset:g,clearPresetWarnings:b}}function Q1(){let e=null;function t(){typeof window>"u"||typeof window.requestAnimationFrame!="function"||(e!==null&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(()=>{e=null,window.dispatchEvent(new Event("resize"))}))}return Rt(()=>{e!==null&&typeof window<"u"&&typeof window.cancelAnimationFrame=="function"&&(window.cancelAnimationFrame(e),e=null)}),{scheduleDraw:t}}const e0={load:"/apps/opsdash/overview/load",persist:"/apps/opsdash/overview/persist",notes:"/apps/opsdash/overview/notes",notesSave:"/apps/opsdash/overview/notes",presetsList:"/apps/opsdash/overview/presets",presetsSave:"/apps/opsdash/overview/presets",presetsLoad:"/apps/opsdash/overview/presets",presetsDelete:"/apps/opsdash/overview/presets",ping:"/apps/opsdash/overview/ping"};function t0(){var t,o;const e=typeof window<"u"?window:{};return e.OC&&(e.OC.webroot||((o=(t=e.OC).getRootPath)==null?void 0:o.call(t)))||e._oc_webroot||""}function o0(){const e=O(()=>t0());function t(i,s){const d=typeof window<"u"?window:{},c=e0[i];if(i==="presetsLoad"||i==="presetsDelete"){const f=`${c}/${encodeURIComponent(String(s??""))}`;return d.OC&&typeof d.OC.generateUrl=="function"?d.OC.generateUrl(f):`${e.value}${f}`}return d.OC&&typeof d.OC.generateUrl=="function"?d.OC.generateUrl(c):`${e.value}${c}`}function o(i){const s=new URLSearchParams;return Object.entries(i||{}).forEach(([d,c])=>{Array.isArray(c)?c.forEach(f=>s.append(d,String(f))):c!=null&&s.set(d,String(c))}),s.toString()}async function a(i,s){const d=o(s),c=d?`${i}${i.includes("?")?"&":"?"}${d}`:i,f=await fetch(c,{method:"GET",credentials:"same-origin"});if(!f.ok)throw new Error(`HTTP ${f.status}`);return await f.json()}async function n(i,s){var b;const d=typeof window<"u"?window:{},c=((b=d.OC)==null?void 0:b.requestToken)||d.oc_requesttoken||"",f={"Content-Type":"application/json"};c&&(f.requesttoken=c);const g=await fetch(i,{method:"POST",credentials:"same-origin",headers:f,body:JSON.stringify(s||{})});if(!g.ok)throw new Error(`HTTP ${g.status}`);return await g.json()}async function r(i){var b;const s=typeof window<"u"?window:{},d=((b=s.OC)==null?void 0:b.requestToken)||s.oc_requesttoken||"",c={};d&&(c.requesttoken=d);const f=await fetch(i,{method:"DELETE",credentials:"same-origin",headers:c});if(!f.ok)throw new Error(`HTTP ${f.status}`);const g=await f.text();return g?JSON.parse(g):{}}return{route:t,getJson:a,postJson:n,deleteJson:r,root:e}}function Vl(e){const t=typeof document<"u"?document.getElementById("app"):null;if(!t||!t.dataset)return"";const o=t.dataset;return o?String(o[e]??""):""}function a0(e){const t=Z(0),o=O(()=>{var g;const d=[],c=typeof window<"u"?window:{};try{if((g=c.OC)!=null&&g.imagePath){const b=c.OC.imagePath("opsdash","app.svg");b&&d.push(b)}}catch{}const f=e.root.value;return d.push(`${f}/apps/opsdash/img/app.svg`),d.push(`${f}/apps-extra/opsdash/img/app.svg`),d.push(`${f}/apps-writable/opsdash/img/app.svg`),d}),a=O(()=>o.value[Math.min(t.value,o.value.length-1)]||"");function n(){t.value+1<o.value.length&&t.value++}const r=Z(Vl("opsdashVersion")||(e.pkgVersion?String(e.pkgVersion):"")),i=Z(Vl("opsdashChangelog"));async function s(){if(!(r.value&&i.value))try{const d=await e.getJson(e.pingUrl(),{});!r.value&&typeof(d==null?void 0:d.version)=="string"&&(r.value=d.version),!i.value&&typeof(d==null?void 0:d.changelog)=="string"&&(i.value=d.changelog)}catch{}}return s(),{iconSrc:a,onIconError:n,appVersion:r,changelogUrl:i}}function n0(e){function t(a){const n=typeof window<"u"?window:{};return n.OC&&typeof n.OC.generateUrl=="function"?n.OC.generateUrl(`/apps/calendar/timeGridDay/${a}`):`${e.root.value}/index.php/apps/calendar/timeGridDay/${a}`}async function o(a,n){var d,c,f;const r={};if(!a)return r;const i=((d=window.OC)==null?void 0:d.requestToken)||window.oc_requesttoken||"",s=e.root.value;for(const g of n)try{const b=`${s}/remote.php/dav/calendars/${encodeURIComponent(a)}/${encodeURIComponent(g)}/`,p=`<?xml version="1.0" encoding="UTF-8"?>
<d:propfind xmlns:d="DAV:" xmlns:ical="http://apple.com/ns/ical/">
  <d:prop><ical:calendar-color/></d:prop>
</d:propfind>`;(c=e.isDebug)!=null&&c.call(e)&&console.log("[opsdash] PROPFIND",{url:b,id:g});const m=await fetch(b,{method:"PROPFIND",credentials:"same-origin",headers:{Depth:"0","Content-Type":"application/xml",requesttoken:i},body:p});if(!m.ok)continue;const u=await m.text();(f=e.isDebug)!=null&&f.call(e)&&console.log("[opsdash] PROPFIND response",{id:g,status:m.status,length:u.length,sample:u.slice(0,400)});const x=u.match(/<[^>]*calendar-color[^>]*>(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{8}|rgb\([^<]+\))<\/[^>]*calendar-color>/i);x&&(r[g]=x[1])}catch{}return r}return{calendarDayLink:t,fetchDavColors:o}}function r0(e){const t=O(()=>{var n,r;return l0({perDaySeries:(n=e.charts.value)==null?void 0:n.perDaySeries,forecastMode:((r=e.activityCardConfig.value)==null?void 0:r.forecastMode)??"total",targetsConfig:e.targetsConfig.value,currentTargets:e.currentTargets.value,calendarCategoryMap:e.calendarCategoryMap.value})}),o=O(()=>{var n;return{pie:((n=e.charts.value)==null?void 0:n.pie)||null,stacked:t.value}}),a=O(()=>{var x,C;const n={},r=(x=e.charts.value)==null?void 0:x.pie,i=(C=e.charts.value)==null?void 0:C.perDaySeries,s=t.value||i,d=r&&Array.isArray(r.data)&&Array.isArray(r.ids),c=s&&Array.isArray(s.series)&&Array.isArray(s.labels),f=e.calendarCategoryMap.value,g=d?(r.ids||[]).map(h=>String(h??"")):[],b=d?(r.labels||[]).map(h=>String(h??"")):[],p=d?(r.data||[]).map(h=>Number(h)||0):[],m=d?r.colors||[]:[],u=c?s.series:[];return e.calendarGroups.value.forEach(h=>{const k=[];d&&g.forEach((A,$)=>{f[A]===h.id&&k.push($)});const v=k.length?{ids:k.map(A=>g[A]),labels:k.map(A=>b[A]),data:k.map(A=>p[A]),colors:k.map(A=>{var $;return m[A]||(($=e.colorsById.value)==null?void 0:$[g[A]])||"#60a5fa"})}:null,S=c?u.filter(A=>f[String((A==null?void 0:A.id)??"")]===h.id):[],N=S.length?{labels:s.labels,series:S}:null;n[h.id]={pie:v,stacked:N}}),n});return{calendarChartData:o,categoryChartsById:a}}const s0=/^\d{4}-\d{2}-\d{2}$/,i0="__uncategorized__";function l0(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const o=t.labels.map(u=>String(u??"")),a=t.series.map(u=>{const x=String((u==null?void 0:u.id)??"");return{...u,id:x,name:String((u==null?void 0:u.name)??(u==null?void 0:u.label)??x),color:String((u==null?void 0:u.color)??""),data:o.map((C,h)=>{var v;const k=Number(((v=u==null?void 0:u.data)==null?void 0:v[h])??0);return Number.isFinite(k)?Math.max(0,k):0})}}),n=d0(e.forecastMode),r=c0(new Date),i=o.map(u=>s0.test(u)&&u>r),s=[];if(i.forEach((u,x)=>{u&&s.push(x)}),!s.length||n==="off")return{labels:o,series:a};const d=e.targetsConfig??to(),c=f0(e.currentTargets),f=e.calendarCategoryMap??{},g=s.length,b=new Map;a.forEach(u=>{let x=0;u.data.forEach((C,h)=>{i[h]||(x+=Math.max(0,C))}),b.set(u.id,x)});const p=Array.from(b.values()).reduce((u,x)=>u+x,0),m=new Map;if(a.forEach(u=>{m.set(u.id,u0(o.length))}),n==="total"){const u=Math.max(0,Number(d.totalHours??0)),x=Math.max(0,u-p);if(x>1e-4){const C=x/g,h=a.map(v=>v.id),k=Kl(h,b,c);h.forEach(v=>{const S=k[v]??0;if(S<=0)return;const N=m.get(v);N&&s.forEach(A=>{N[A]=bn(C*S)})})}}else if(n==="calendar")a.forEach(u=>{const x=c[u.id]??0;if(x<=0)return;const C=Math.max(0,b.get(u.id)??0),h=Math.max(0,x-C);if(h<=1e-4)return;const k=h/g,v=m.get(u.id);v&&s.forEach(S=>{v[S]=bn(k)})});else if(n==="category"){const u=new Set,x=Array.isArray(d.categories)?d.categories:[],C=new Map;x.forEach(k=>{C.set(String(k.id),Math.max(0,Number(k.targetHours??0)))});const h=new Map;a.forEach(k=>{const v=f==null?void 0:f[k.id],S=v?String(v):i0;h.has(S)||h.set(S,[]),h.get(S).push(k.id)}),h.forEach((k,v)=>{if(!k.length)return;const S=C.get(v)??0;if(S<=0)return;const N=k.reduce((L,F)=>L+Math.max(0,b.get(F)??0),0),A=Math.max(0,S-N);if(A<=1e-4)return;const $=A/g,T={};k.forEach(L=>{T[L]=c[L]??0});const j=Kl(k,b,T);k.forEach(L=>{const F=j[L]??0;if(F<=0)return;const W=m.get(L);W&&(s.forEach(B=>{W[B]=bn($*F)}),u.add(L))})}),a.forEach(k=>{if(u.has(k.id))return;const v=c[k.id]??0;if(v<=0)return;const S=Math.max(0,b.get(k.id)??0),N=Math.max(0,v-S);if(N<=1e-4)return;const A=N/g,$=m.get(k.id);$&&s.forEach(T=>{$[T]=bn(A)})})}return a.forEach(u=>{const x=m.get(u.id);x&&x.some(C=>C>1e-4)&&(u.forecast=x)}),{labels:o,series:a}}function d0(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function c0(e){const t=e.getFullYear(),o=`${e.getMonth()+1}`.padStart(2,"0"),a=`${e.getDate()}`.padStart(2,"0");return`${t}-${o}-${a}`}function u0(e){return Array.from({length:e},()=>0)}function bn(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function f0(e){const t={};return e&&Object.entries(e).forEach(([o,a])=>{const n=Number(a);Number.isFinite(n)&&n>0&&(t[String(o)]=n)}),t}function Kl(e,t,o){const a={},n=e.reduce((s,d)=>s+Math.max(0,t.get(d)??0),0);if(n>1e-4)return e.forEach(s=>{const d=Math.max(0,t.get(s)??0);a[s]=d/n}),a;const r=e.reduce((s,d)=>s+Math.max(0,(o==null?void 0:o[d])??0),0);if(r>1e-4)return e.forEach(s=>{const d=Math.max(0,(o==null?void 0:o[s])??0);a[s]=d/r}),a;const i=e.length?1/e.length:0;return e.forEach(s=>{a[s]=i}),a}const ao="__uncategorized__",ql="Unassigned";function p0(e){const t=O(()=>{var f;const c=(f=e.targetsConfig.value)==null?void 0:f.categories;return Array.isArray(c)?c:[]}),o=O(()=>{const c={};return t.value.forEach(f=>{c[String(f.id)]=f.label||String(f.id)}),c}),a=O(()=>{var g;const c=new Map;return(((g=e.targetsSummary.value)==null?void 0:g.categories)||[]).forEach(b=>c.set(String(b.id),b)),c}),n=O(()=>{const c=new Map;return t.value.forEach(f=>{(Array.isArray(f.groupIds)?f.groupIds:[]).forEach(b=>{const p=Math.max(0,Math.min(9,Math.trunc(Number(b)||0)));c.set(p,String(f.id))})}),c}),r=O(()=>{var g;const c=e.calendars.value;if(!Array.isArray(c))return(g=e.isDebug)!=null&&g.call(e)&&console.warn("[opsdash] calendars not array",c),{};const f={};return c.forEach(b=>{var u;const p=String((b==null?void 0:b.id)??"");if(!p)return;const m=((u=e.colorsById.value)==null?void 0:u[p])||String((b==null?void 0:b.color)||"");f[p]={name:String((b==null?void 0:b.displayname)||(b==null?void 0:b.name)||(b==null?void 0:b.calendar)||p),color:m||void 0}}),f}),i=O(()=>{var m;const c={},f=n.value,g=e.groupsById.value||{},b=u=>{const x=g==null?void 0:g[u],C=Math.max(0,Math.min(9,Math.trunc(Number(x)||0))),h=f.get(C);c[u]=h||ao},p=e.calendars.value;return Array.isArray(p)?(p.forEach(u=>{const x=String((u==null?void 0:u.id)??"");x&&b(x)}),(e.selected.value||[]).forEach(u=>{const x=String(u??"");x&&(c[x]||b(x))}),c):((m=e.isDebug)!=null&&m.call(e)&&console.warn("[opsdash] calendarCategoryMap: calendars not array",p),c)}),s=O(()=>{const c=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"],f={};let g=0;const b=p=>{const m=String((p==null?void 0:p.id)??"");if(!m)return;if(f[m])return f[m];const u=typeof(p==null?void 0:p.color)=="string"&&p.color?p.color:void 0;if(u)return f[m]=u,u;const x=Object.entries(i.value).filter(([,h])=>h===m).map(([h])=>h);for(const h of x){const k=r.value[h];if(k!=null&&k.color)return f[m]=k.color,k.color}const C=c[g%c.length];return g+=1,f[m]=C,C};return t.value.forEach(p=>b(p)),Object.values(i.value||{}).some(p=>p===ao)&&b({id:ao}),f}),d=O(()=>{var S,N,A,$,T,j,L,F,W,B;const c=[],f=i.value,g=a.value,b=e.byCal.value;if(!Array.isArray(b))return(S=e.isDebug)!=null&&S.call(e)&&console.warn("[opsdash] aggregateCategoryRows: byCal not array",b),c;const p=new Map;b.forEach(E=>{const U=String((E==null?void 0:E.id)??(E==null?void 0:E.calendar_id)??(E==null?void 0:E.calendar)??"");if(!U)return;const R=f[U]||ao;p.has(R)||p.set(R,[]),p.get(R).push({...E,calendarId:U})}),(N=e.isDebug)!=null&&N.call(e)&&console.log("[opsdash] aggregateCategoryRows",{rowsSourceIsArray:Array.isArray(b),rowsSourceLength:b.length,byCat:p,assignments:f});const m=(($=(A=e.targetsSummary.value)==null?void 0:A.total)==null?void 0:$.daysLeft)??0,u=((j=(T=e.targetsSummary.value)==null?void 0:T.total)==null?void 0:j.calendarPercent)??0,x=((F=(L=e.targetsSummary.value)==null?void 0:L.total)==null?void 0:F.paceMode)??((B=(W=e.targetsConfig.value)==null?void 0:W.pace)==null?void 0:B.mode)??"days_only",C=E=>Math.round(E*100)/100,h=e.currentTargets.value||{},k=(E,U,R)=>{const ie=R.reduce((oe,ee)=>{const X=Number(h[ee.calendarId]??0);return Number.isFinite(X)?oe+Math.max(0,X):oe},0),V=R.reduce((oe,ee)=>{const X=Number((ee==null?void 0:ee.total_hours)??(ee==null?void 0:ee.hours)??0);return Number.isFinite(X)?oe+Math.max(0,X):oe},0),J=ie>0?Math.max(0,Math.min(100,V/ie*100)):0,z=V-ie,fe=Math.max(0,ie-V),G=ie<=0?"none":J>=100?"done":z>=0?"on_track":"behind",P=G==="done"?"Done":G==="on_track"?"On Track":G==="behind"?"Behind":"",H=m>0?fe/m:0;return{id:E,label:U,actualHours:C(V),targetHours:C(ie),percent:J,deltaHours:C(z),remainingHours:C(fe),needPerDay:C(H),daysLeft:m,calendarPercent:Math.max(0,Math.min(100,u)),gap:C(J-u),status:G,statusLabel:P,includeWeekend:!0,paceMode:x}};if(t.value.map(E=>String(E.id)).forEach(E=>{const U=o.value[E]||E,R=p.get(E)||[],ie=g.get(E)||k(E,U,R);c.push({id:E,label:U,rows:R,summary:ie,color:s.value[E]})}),p.has(ao)){const E=p.get(ao)||[];c.push({id:ao,label:ql,rows:E,summary:k(ao,ql,E),color:s.value[ao]})}return c});return{categoryConfigList:t,categoryLabelById:o,categoryColorMap:s,calendarCategoryMap:i,calendarGroups:d}}function Gl(e){const t=Number(e);return Number.isFinite(t)?Math.round(t):0}function bt(e){const t=Number(e);return Number.isFinite(t)?t:null}function Uo(e){if(e==null)return null;const t=String(e).trim();return t===""?null:t}function g0(e){const t=O(()=>{var k;const m=(k=e.charts.value)==null?void 0:k.pie;if(!m||!Array.isArray(m.data)||!Array.isArray(m.labels))return[];const u=m.data.map(v=>Number(v)||0),x=m.labels.map(v=>String(v||"")),C=u.reduce((v,S)=>v+Math.max(0,S),0);if(C<=0)return[];const h=u.map((v,S)=>({name:x[S]||"",value:Math.max(0,v)}));return h.sort((v,S)=>S.value-v.value),h.slice(0,3).map(v=>({name:v.name,share:v.value/C*100}))}),o=O(()=>{var u;if(t.value.length)return t.value.map(x=>`${x.name} ${Yl(x.share)}`).join(", ");const m=(u=e.stats)==null?void 0:u.top_calendar;if(m&&m.calendar){const x=Number(m.share??0);return`${m.calendar} ${Yl(x)}`}return""}),a=O(()=>{var m;return e.selected.value.length||(((m=e.calendars.value)==null?void 0:m.length)??0)}),n=O(()=>(e.byDay.value||[]).map(m=>Number((m==null?void 0:m.total_hours)??(m==null?void 0:m.hours)??0))),r=O(()=>{const m=n.value.map(u=>Number(u)||0);return e.activeDayMode.value==="active"?m.filter(u=>u>0):m}),i=O(()=>(e.byDay.value||[]).filter(m=>{const u=Jl(String(m==null?void 0:m.date));return u>=1&&u<=5}).map(m=>Number((m==null?void 0:m.total_hours)??(m==null?void 0:m.hours)??0))),s=O(()=>(e.byDay.value||[]).filter(m=>{const u=Jl(String(m==null?void 0:m.date));return u===0||u===6}).map(m=>Number((m==null?void 0:m.total_hours)??(m==null?void 0:m.hours)??0))),d=O(()=>e.activeDayMode.value==="active"?i.value.filter(m=>m>0):i.value),c=O(()=>e.activeDayMode.value==="active"?s.value.filter(m=>m>0):s.value),f=O(()=>{var x,C,h,k;const m=((x=e.stats)==null?void 0:x.balance_index)??((C=e.stats)==null?void 0:C.balanceIndex)??((k=(h=e.stats)==null?void 0:h.balance_overview)==null?void 0:k.index),u=Number(m);return Number.isFinite(u)?u:null}),g=O(()=>{var m,u,x,C;return{rangeLabel:e.rangeLabel.value,totalHours:Number(((m=e.stats)==null?void 0:m.total_hours)??0),avgDay:Ar(r.value),avgEvent:Number(((u=e.stats)==null?void 0:u.avg_per_event)??0),medianDay:Dr(r.value),busiest:((x=e.stats)==null?void 0:x.busiest_day)??null,workdayAvg:Ar(d.value),workdayMedian:Dr(d.value),weekendAvg:Ar(c.value),weekendMedian:Dr(c.value),weekendShare:((C=e.stats)==null?void 0:C.weekend_share)??null,activeCalendars:a.value,calendarSummary:o.value,balanceIndex:f.value,topCategory:e.topCategory.value?{label:e.topCategory.value.label,actualHours:e.topCategory.value.summary.actualHours,targetHours:e.topCategory.value.summary.targetHours,percent:e.topCategory.value.summary.percent,statusLabel:e.topCategory.value.summary.statusLabel,status:e.topCategory.value.summary.status,color:e.topCategory.value.color}:null}}),b=O(()=>{const m=e.stats;return{rangeLabel:e.rangeLabel.value,events:Gl(m.events),activeDays:bt(m.active_days),typicalStart:Uo(m.typical_start),typicalEnd:Uo(m.typical_end),weekendShare:bt(m.weekend_share),eveningShare:bt(m.evening_share),earliestStart:Uo(m.earliest_start),latestEnd:Uo(m.latest_end),overlapEvents:bt(m.overlap_events),longestSession:bt(m.longest_session),lastDayOff:Uo(m.last_day_off),lastHalfDayOff:Uo(m.last_half_day_off)}}),p=O(()=>{var u;const m=(u=e.stats)==null?void 0:u.day_off_trend;return Array.isArray(m)?m.map(x=>{const C=Number((x==null?void 0:x.totalDays)??(x==null?void 0:x.total_days)??0),h=Number((x==null?void 0:x.daysOff)??(x==null?void 0:x.days_off)??0),k=Number((x==null?void 0:x.daysWorked)??(x==null?void 0:x.days_worked)??0);return{offset:Number((x==null?void 0:x.offset)??0)||0,label:String((x==null?void 0:x.label)??""),from:String((x==null?void 0:x.from)??""),to:String((x==null?void 0:x.to)??""),totalDays:Number.isFinite(C)?Math.max(0,C):0,daysOff:Number.isFinite(h)?Math.max(0,h):0,daysWorked:Number.isFinite(k)?Math.max(0,k):0}}).filter(x=>x.totalDays>0):[]});return{topThree:t,topCalendarsSummary:o,timeSummary:g,activitySummary:b,activityDayOffTrend:p}}function Ar(e){return e.length?e.reduce((o,a)=>o+a,0)/e.length:0}function Dr(e){if(!e.length)return 0;const t=[...e].sort((a,n)=>a-n),o=Math.floor(t.length/2);return t.length%2?t[o]:(t[o-1]+t[o])/2}function Jl(e){return new Date(`${e}T00:00:00Z`).getUTCDay()}function Yl(e){return`${Number(e||0).toFixed(1)}%`}function m0(e){return{balanceOverview:O(()=>{var f,g,b,p;const o=(f=e.stats)==null?void 0:f.balance_overview;if(!o||typeof o!="object")return null;const a=Array.isArray(o.categories)?o.categories.map(m=>({id:String((m==null?void 0:m.id)??""),label:String((m==null?void 0:m.label)??""),hours:bt(m==null?void 0:m.hours)??0,share:bt(m==null?void 0:m.share)??0,prevShare:bt(m==null?void 0:m.prev_share)??0,delta:bt(m==null?void 0:m.delta)??0,color:e.categoryColorMap.value[String((m==null?void 0:m.id)??"")]})):[],n=Array.isArray(o.relations)?o.relations.map(m=>({label:String((m==null?void 0:m.label)??""),value:String((m==null?void 0:m.value)??"")})):[],r=Array.isArray((g=o.trend)==null?void 0:g.history)?o.trend.history:Array.isArray(o==null?void 0:o.trendHistory)?o.trendHistory:[],i={delta:Array.isArray((b=o.trend)==null?void 0:b.delta)?o.trend.delta.map(m=>({id:String((m==null?void 0:m.id)??""),label:String((m==null?void 0:m.label)??""),delta:bt(m==null?void 0:m.delta)??0})):[],badge:String(((p=o.trend)==null?void 0:p.badge)??""),history:r.map(m=>({offset:Gl(m==null?void 0:m.offset)??0,label:String((m==null?void 0:m.label)??""),categories:Array.isArray(m==null?void 0:m.categories)?m.categories.map(u=>({id:String((u==null?void 0:u.id)??""),label:String((u==null?void 0:u.label)??""),share:bt(u==null?void 0:u.share)??0})):[]}))},s=Array.isArray(o.daily)?o.daily.map(m=>({date:String((m==null?void 0:m.date)??""),weekday:String((m==null?void 0:m.weekday)??""),total_hours:bt(m==null?void 0:m.total_hours)??0,categories:Array.isArray(m==null?void 0:m.categories)?m.categories.map(u=>({id:String((u==null?void 0:u.id)??""),label:String((u==null?void 0:u.label)??""),hours:bt(u==null?void 0:u.hours)??0,share:bt(u==null?void 0:u.share)??0})):[]})):[],d=Array.isArray(o.warnings)?o.warnings.map(m=>String(m)):[];return{index:bt(o.index)??0,categories:a,relations:n,trend:i,daily:s,warnings:d}})}}const Ca=Z("auto"),yn=Z("light"),Zl=Z(!1),Sa=O(()=>Ca.value==="auto"?yn.value:Ca.value);function h0(){return Ul()??"auto"}function kn(e){if(typeof document>"u")return;const t=document.getElementById("opsdash");t&&(t.classList.remove("opsdash-theme-light","opsdash-theme-dark"),e==="dark"?t.classList.add("opsdash-theme-dark"):t.classList.add("opsdash-theme-light"))}function Er(){yn.value=Mr()}let Dt=null,To=null;function v0(){typeof window>"u"||Dt||(Dt=window.matchMedia("(prefers-color-scheme: dark)"),To=()=>Er(),typeof Dt.addEventListener=="function"?Dt.addEventListener("change",To):typeof Dt.addListener=="function"&&Dt.addListener(To))}function b0(){Dt&&(To&&(typeof Dt.removeEventListener=="function"?Dt.removeEventListener("change",To):typeof Dt.removeListener=="function"&&Dt.removeListener(To)),Dt=null,To=null)}function y0(){Zl.value||(Ca.value=h0(),yn.value=Mr(),kn(Sa.value),Zl.value=!0),It(()=>{typeof window<"u"&&window.addEventListener("oc:theme:changed",Er),v0(),kn(Sa.value)}),Rt(()=>{typeof window<"u"&&window.removeEventListener("oc:theme:changed",Er),b0()}),Le(Sa,t=>{kn(t)});function e(t){Ca.value=t,kn(Sa.value)}return{preference:Ca,effectiveTheme:Sa,systemTheme:yn,setThemePreference:e}}const Or=e=>e==="light"||e==="dark"?e:"auto";function k0(e){const t=Z(!1),o=Z(Or(e.serverPreference.value));let a=null;const n=typeof e.debounceMs=="number"?e.debounceMs:250,r=()=>{a&&(clearTimeout(a),a=null)};nn()&&Rt(()=>{r()}),Le(e.serverPreference,d=>{const c=Or(d);o.value=c,e.localPreference.value!==c&&(t.value=!0,e.applyLocalPreference(c),t.value=!1)},{immediate:!0});function i(d){t.value||d!==o.value&&(r(),a=setTimeout(async()=>{a=null;try{await e.postJson(e.route("persist"),{theme_preference:d}),o.value=d,e.notifySuccess("Theme preference saved")}catch(c){console.error(c),e.notifyError("Failed to save theme preference")}},n))}function s(d,c){const f=Or(d);e.applyLocalPreference(f),(c==null?void 0:c.persist)!==!1&&i(f)}return{setThemePreference:s}}function w0(e){const{preference:t,effectiveTheme:o,systemTheme:a,setThemePreference:n}=y0(),{setThemePreference:r}=k0({serverPreference:e.serverPreference,localPreference:t,applyLocalPreference:n,route:e.route,postJson:e.postJson,notifySuccess:e.notifySuccess,notifyError:e.notifyError});function i(s,d){r(s,d)}return{themePreference:t,effectiveTheme:o,systemTheme:a,setThemePreference:i}}function x0(e){const{autoWizardNeeded:t,manualWizardOpen:o,onboardingRunId:a,onboardingWizardVisible:n,openWizardFromSidebar:r,wizardStartStep:i}=hv(),s=O(()=>{var T;return!!((T=e.onboardingState.value)!=null&&T.completed)}),d=e.actions.isOnboardingSaving,c=e.actions.isSnapshotSaving,f=e.actions.snapshotNotice,g=O(()=>(e.calendars.value||[]).map(T=>({id:String((T==null?void 0:T.id)??""),displayname:String((T==null?void 0:T.displayname)??(T==null?void 0:T.name)??(T==null?void 0:T.id)??""),color:typeof(T==null?void 0:T.color)=="string"?T.color:""})).filter(T=>T.id)),b=O(()=>[...e.selected.value]),p=O(()=>{var T;return((T=e.onboardingState.value)==null?void 0:T.strategy)??"total_only"}),m=O(()=>{var T;return((T=e.targetsConfig.value)==null?void 0:T.allDayHours)??8}),u=O(()=>{var T;return((T=e.targetsConfig.value)==null?void 0:T.totalHours)??40}),x=O(()=>({...e.deckSettings.value||{}})),C=O(()=>({...e.reportingConfig.value||{}})),h=O(()=>{var T;return((T=e.onboardingState.value)==null?void 0:T.dashboardMode)||"standard"});function k(T){if(!T)return!0;const j=T.version_required??zo;return!T.completed||(T.version??0)<j}function v(T){const j=T??e.onboardingState.value;if(!e.hasInitialLoad.value&&!j)return;const L=k(j);t.value=L||!!(j!=null&&j.resetRequested),(L||j!=null&&j.resetRequested)&&(i.value=null),j!=null&&j.resetRequested&&(o.value=!0)}Le(()=>e.onboardingState.value,T=>{e.hasInitialLoad.value&&v(T)});async function S(T){try{await e.actions.complete(T),o.value=!1,t.value=!1}catch(j){console.error("[opsdash] onboarding complete failed",j)}}async function N(){try{await e.actions.skip(),o.value=!1,t.value=!1}catch(T){console.error("[opsdash] onboarding skip failed",T)}}function A(){t.value||(o.value=!1)}async function $(){try{await e.actions.saveSnapshot()}catch(T){console.error("[opsdash] onboarding snapshot failed",T)}}return{autoWizardNeeded:t,manualWizardOpen:o,onboardingRunId:a,onboardingWizardVisible:n,openWizardFromSidebar:r,wizardStartStep:i,hasExistingConfig:s,wizardCalendars:g,wizardInitialSelection:b,wizardInitialStrategy:p,wizardInitialAllDayHours:m,wizardInitialTotalHours:u,wizardInitialDeckSettings:x,wizardInitialReportingConfig:C,wizardInitialDashboardMode:h,isOnboardingSaving:d,isSnapshotSaving:c,snapshotNotice:f,evaluateOnboarding:v,handleWizardComplete:S,handleWizardSkip:N,handleWizardClose:A,handleWizardSaveSnapshot:$}}function _0(e){const t=O(()=>!e.navOpen.value),o=O(()=>e.range.value==="week"?"Switch to month":"Switch to week"),a=O(()=>!e.from.value||!e.to.value?"":`${e.from.value}  ${e.to.value}`);function n(){try{const c=e.performLoad();if(c&&typeof c.then=="function")return c.catch(f=>{console.error("[opsdash] range load failed",f)})}catch(c){console.error("[opsdash] range load failed",c)}}function r(){n()}function i(){e.range.value=e.range.value==="week"?"month":"week",e.offset.value=0,n()}function s(){e.offset.value=(e.offset.value||0)-1,n()}function d(){e.offset.value=(e.offset.value||0)+1,n()}return{showCollapsedRangeControls:t,rangeToggleLabel:o,rangeDateLabel:a,loadCurrent:r,toggleRangeCollapsed:i,goPrevious:s,goNext:d}}const Xl=["cals","groups","targets_week","targets_month","targets_config","theme_preference","onboarding","widgets"],C0=new Set(["auto","light","dark"]);function S0(e){if(!e||typeof e!="object")return{cleaned:{},ignored:["<invalid-payload>"]};const t=e,o={},a=[];return Xl.forEach(n=>{t[n]!==void 0&&(o[n]=t[n])}),Object.keys(t).forEach(n=>{Xl.includes(n)||a.push(n)}),o.cals&&!Array.isArray(o.cals)&&(a.push("cals"),delete o.cals),"groups"in o&&(!o.groups||typeof o.groups!="object")&&(a.push("groups"),delete o.groups),"targets_week"in o&&(!o.targets_week||typeof o.targets_week!="object")&&(a.push("targets_week"),delete o.targets_week),"targets_month"in o&&(!o.targets_month||typeof o.targets_month!="object")&&(a.push("targets_month"),delete o.targets_month),"targets_config"in o&&(!o.targets_config||typeof o.targets_config!="object")&&(a.push("targets_config"),delete o.targets_config),o.theme_preference&&!C0.has(String(o.theme_preference))&&(a.push("theme_preference"),delete o.theme_preference),"onboarding"in o&&(o.onboarding==null||typeof o.onboarding!="object")&&(a.push("onboarding"),delete o.onboarding),"widgets"in o&&!Array.isArray(o.widgets)&&(a.push("widgets"),delete o.widgets),{cleaned:o,ignored:a}}function $0(e,t="0.4.4"){return{version:t,generated:new Date().toISOString(),payload:e}}function T0(e){function t(){const i={cals:[...e.selected.value],groups:{...e.groupsById.value},targets_week:{...e.targetsWeek.value},targets_month:{...e.targetsMonth.value},targets_config:Ut(e.targetsConfig.value),theme_preference:e.themePreference.value};return e.onboardingState.value&&(i.onboarding={...e.onboardingState.value}),e.widgets&&(i.widgets=e.widgets.value),i}function o(i,s){if(e.createDownload){e.createDownload(i,s);return}const d=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),c=URL.createObjectURL(d),f=document.createElement("a");f.href=c,f.download=i,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(c)}function a(){try{const i=t(),s=$0(i),d=`opsdash-config-${s.generated.slice(0,10)}.json`;o(d,s),e.notifySuccess("Configuration exported")}catch(i){console.error(i),e.notifyError("Failed to export configuration")}}async function n(i){const{cleaned:s,ignored:d}=S0(i);if(!Object.keys(s).length){e.notifyError("No recognised configuration keys found in file");return}if(s.cals&&(e.selected.value=s.cals.map(c=>String(c))),s.groups){const c={};Object.entries(s.groups).forEach(([f,g])=>{const b=Number(g);c[String(f)]=Number.isFinite(b)?b:0}),e.groupsById.value=c}if(s.targets_week){const c={};Object.entries(s.targets_week).forEach(([f,g])=>{const b=Number(g);Number.isFinite(b)&&(c[String(f)]=b)}),e.targetsWeek.value=c}if(s.targets_month){const c={};Object.entries(s.targets_month).forEach(([f,g])=>{const b=Number(g);Number.isFinite(b)&&(c[String(f)]=b)}),e.targetsMonth.value=c}s.targets_config&&(e.targetsConfig.value=ct(s.targets_config)),s.theme_preference&&e.setThemePreference(s.theme_preference,{persist:!1}),s.onboarding&&typeof s.onboarding=="object"&&(e.onboardingState.value={...s.onboarding}),e.widgets&&Array.isArray(s.widgets)&&(e.widgets.value=s.widgets),await e.postJson(e.route("persist"),s),await e.performLoad(),d.length?e.notifyError(`Configuration imported with ignored keys: ${d.join(", ")}`):e.notifySuccess("Configuration imported")}async function r(i){try{const s=await i.text(),d=JSON.parse(s),c=d!=null&&d.payload&&typeof d.payload=="object"?d.payload:d;await n(c)}catch(s){console.error(s),e.notifyError("Failed to import configuration")}}return{collectSidebarPayload:t,exportSidebarConfig:a,importSidebarConfig:r,applyConfigSource:n}}function M0(e=null){const t=Z(e);function o(a){t.value=t.value===a?null:a}return{detailsIndex:t,toggle:o}}function A0(e){const t=O(()=>e.value==="month"?"Last month":"Last week"),o=O(()=>e.value==="month"?"This month":"This week"),a=O(()=>e.value==="month"?"Notes for previous month":"Notes for previous week"),n=O(()=>e.value==="month"?"Notes for current month":"Notes for current week");return{notesLabelPrev:t,notesLabelCurr:o,notesLabelPrevTitle:a,notesLabelCurrTitle:n}}const Ql="opsdash.sidebarOpen";function D0(){if(typeof window>"u")return!0;try{const e=window.localStorage.getItem(Ql);return e==null?!0:e==="1"}catch{return!0}}function E0(){const e=Z(D0()),t=r=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Ql,r?"1":"0")}catch{}};Le(e,r=>{t(r),typeof window<"u"&&Yt(()=>{window.dispatchEvent(new Event("resize"))}).catch(()=>{})},{immediate:!1});const o=()=>{e.value=!e.value},a=O(()=>e.value?"Hide sidebar":"Show sidebar"),n=O(()=>e.value?"":"");return{navOpen:e,toggleNav:o,navToggleLabel:a,navToggleIcon:n}}const O0=[{id:"navigation",title:"Navigation",items:[{id:"nav-prev",label:"Previous period",combo:["Alt",""],description:"Go to the previous week or month"},{id:"nav-next",label:"Next period",combo:["Alt",""],description:"Go to the next week or month"},{id:"nav-toggle-range",label:"Toggle week/month",combo:["Alt","Shift","R"],description:"Switch between week and month range"}]},{id:"notes",title:"Notes",items:[{id:"notes-toggle",label:"Open Notes pane",combo:["Alt","N"],description:"Show the Notes tab in the sidebar"},{id:"notes-save",label:"Save note",combo:["Ctrl / ","S"],description:"Persist the current note draft"}]},{id:"targets",title:"Targets",items:[{id:"targets-focus",label:"Open Config & Setup",combo:["Alt","T"],description:"Jump to preset + theme controls"}]},{id:"misc",title:"Misc",items:[{id:"shortcuts-open",label:"Open cheat sheet",combo:["?"],description:"Display this overlay"},{id:"widget-options",label:"Open widget options",combo:["Shift","C"],description:"Toggle options for the selected widget (edit mode)"},{id:"layout-edit",label:"Toggle edit layout",combo:["Shift","E"],description:"Enter or exit widget layout editing"}]}];function N0(e){const t=Z(!1),o=Z(null);let a=!1;const n=!!nn();function r(p,m="api"){var u;p&&(o.value=p),t.value=!0,(u=e.onOpen)==null||u.call(e,{source:m})}function i(){t.value=!1;const p=o.value;if(o.value=null,p&&typeof p.focus=="function")try{p.focus()}catch{}}function s(){typeof e.ensureSidebarVisible=="function"&&e.ensureSidebarVisible()}function d(p,m){m.preventDefault(),s(),p()}function c(p){var C;const m=p;if(!m)return!1;if(m.isContentEditable)return!0;const u=m.tagName;if(!u)return!1;if(["INPUT","TEXTAREA","SELECT"].includes(u))return!0;const x=(C=m.getAttribute)==null?void 0:C.call(m,"role");return!!(x&&["textbox","combobox"].includes(x))}function f(p){if(p.defaultPrevented)return;const m=c(p.target);if((p.key==="Escape"||p.key==="Esc")&&t.value){p.preventDefault(),i();return}if(!p.altKey&&!p.ctrlKey&&!p.metaKey&&!m&&(p.key==="?"||p.shiftKey&&p.key==="/")){p.preventDefault(),r(p.target instanceof HTMLElement?p.target:null,"keyboard");return}if(p.altKey&&!p.ctrlKey&&!p.metaKey){const u=p.key;if(u==="ArrowLeft"){d(e.goPrevious,p);return}if(u==="ArrowRight"){d(e.goNext,p);return}if(p.shiftKey&&(u==="R"||u==="r")){d(e.toggleRange,p);return}if(u==="N"||u==="n"){e.openNotesPanel&&(p.preventDefault(),s(),e.openNotesPanel());return}if(u==="T"||u==="t"){e.openConfigPanel&&(p.preventDefault(),s(),e.openConfigPanel());return}}if(p.shiftKey&&!p.altKey&&!p.metaKey&&!p.ctrlKey){if((p.key==="e"||p.key==="E")&&e.toggleEditLayout&&!m){p.preventDefault(),e.toggleEditLayout();return}if((p.key==="c"||p.key==="C")&&e.openWidgetOptions&&!m){p.preventDefault(),e.openWidgetOptions();return}}}function g(){a||typeof document>"u"||(document.addEventListener("keydown",f),a=!0)}function b(){!a||typeof document>"u"||(document.removeEventListener("keydown",f),a=!1)}return g(),n&&(It(()=>{g()}),Rt(()=>{b()})),{shortcutsOpen:t,openShortcuts:r,closeShortcuts:i,shortcutGroups:O0,unbindShortcuts:b}}function L0(e){const t=Z(!1),o=Z(!1),a=Z(null);async function n(s){var d,c;try{t.value=!0,a.value=null,e.setThemePreference(s.themePreference,{persist:!1}),await e.postJson(e.route("persist"),{cals:s.selected,groups:s.groups,targets_week:s.targetsWeek,targets_month:s.targetsMonth,targets_config:s.targetsConfig,theme_preference:s.themePreference,deck_settings:s.deckSettings,reporting_config:s.reportingConfig,targets_config_activity:s.activityCard,onboarding:{completed:!0,version:zo,strategy:s.strategy,dashboardMode:s.dashboardMode,completed_at:new Date().toISOString()}}),e.setSelected(s.selected),e.setTargetsWeek(s.targetsWeek),e.setTargetsMonth(s.targetsMonth),e.setTargetsConfig(s.targetsConfig),e.setGroupsById(s.groups),(d=e.setDashboardMode)==null||d.call(e,s.dashboardMode),(c=e.setOnboardingState)==null||c.call(e,{completed:!0,version:zo,strategy:s.strategy,dashboardMode:s.dashboardMode,version_required:zo,resetRequested:!1}),await e.reloadAfterPersist(),e.notifySuccess("Onboarding saved")}catch(f){throw console.error(f),e.notifyError("Failed to save onboarding"),f}finally{t.value=!1}}async function r(){var s;try{t.value=!0,a.value=null,await e.postJson(e.route("persist"),{onboarding:{completed:!0,version:zo,strategy:((s=e.onboardingState.value)==null?void 0:s.strategy)??"total_only",completed_at:new Date().toISOString()}}),await e.reloadAfterPersist(),e.notifySuccess("You can revisit onboarding from the Targets tab any time.")}catch(d){throw console.error(d),e.notifyError("Failed to update onboarding state"),d}finally{t.value=!1}}async function i(){try{o.value=!0,a.value=null;const d=`Before onboarding ${new Date().toISOString().slice(0,16).replace("T"," ")}`;await e.savePreset(d),a.value={type:"success",message:`Preset "${d}" saved  find it under Config & Setup.`}}catch(s){throw console.error("[opsdash] preset backup failed",s),a.value={type:"error",message:"Failed to save preset backup. Please try again."},s}finally{o.value=!1}}return{isOnboardingSaving:t,isSnapshotSaving:o,snapshotNotice:a,complete:n,skip:r,saveSnapshot:i}}function I0(e){const t=Z([]),o=Z(!1),a=Z(""),n=Z(null);let r=0;const i=new Map;let s="";function d(f,g){return`${f}::${g}`}async function c(f=!1){const g=(e.from.value||"").trim(),b=(e.to.value||"").trim();if(!g||!b){t.value=[],a.value="",o.value=!1,n.value=null,s="";return}const p=d(g,b);if(!f&&i.has(p)){const u=i.get(p);t.value=u.cards,n.value=u.fetchedAt,a.value="",o.value=!1,s=p;return}const m=++r;o.value=!0,a.value="";try{const u=await Sv({from:g,to:b});if(m===r){const x=new Date().toISOString();t.value=u,n.value=x,i.set(p,{cards:u,fetchedAt:x}),s=p}}catch(u){m===r&&(t.value=[],a.value=u instanceof Error?u.message:"deck_fetch_failed",e.notifyError&&e.notifyError("Unable to fetch Deck cards. Check the Deck app or try again."))}finally{m===r&&(o.value=!1)}}return Le(()=>[e.from.value,e.to.value],([f,g],[b,p])=>{if(!f||!g){t.value=[];return}f===b&&g===p||c()}),{deckCards:t,deckLoading:o,deckError:a,deckLastFetchedAt:n,refreshDeck:c}}function Nr(e){return["all","mine","open_all","open_mine","done_all","done_mine","archived_all","archived_mine"].includes(e)?e:"all"}function ed(e,t,o){const a=e.status;return t==="open"?a==="active":t==="archived"?a==="archived":t==="done"?a==="done"?!0:o&&a==="archived":!1}function B0(e){const{deckSettings:t,deckCards:o,uid:a,root:n}=e,r=Z(Nr(t.value.defaultFilter));Le(()=>t.value.defaultFilter,p=>{const m=Nr(p);m!==r.value&&(r.value=m)});const i=O(()=>{const p=new Set((t.value.hiddenBoards||[]).map(m=>Number(m)).filter(m=>Number.isFinite(m)));return(o.value||[]).filter(m=>!p.has(Number(m.boardId)))}),s=O(()=>{const p=t.value.mineMode??"assignee",m=(a.value||"").trim().toLowerCase();return u=>{if(!m)return!1;const x=(u.assignees||[]).some(S=>typeof S.uid=="string"&&S.uid.toLowerCase()===m),C=typeof u.createdBy=="string"?u.createdBy.trim().toLowerCase():"",h=C&&C===m,k=typeof u.doneBy=="string"?u.doneBy.trim().toLowerCase():"",v=k&&k===m;return p==="creator"?h||v:p==="assignee"?x||v:x||h||v}}),d=O(()=>{const p=s.value,m=t.value.solvedIncludesArchived!==!1,u=r.value,x=i.value;if(u==="all")return x;if(u==="mine")return x.filter(k=>p(k));const[C,h]=u.split("_");return x.filter(k=>{const v=ed(k,C,m),S=h==="all"?!0:p(k);return v&&S})}),c=O(()=>{const p=s.value,m=t.value.solvedIncludesArchived!==!1,u=i.value,x=[];return[{key:"open_all",label:"Open  All",status:"open",mine:!1},{key:"open_mine",label:"Open  Mine",status:"open",mine:!0},{key:"done_all",label:"Done  All",status:"done",mine:!1},{key:"done_mine",label:"Done  Mine",status:"done",mine:!0},{key:"archived_all",label:"Archived  All",status:"archived",mine:!1},{key:"archived_mine",label:"Archived  Mine",status:"archived",mine:!0}].forEach(h=>{const k=u.filter(N=>{const A=ed(N,h.status,m),$=h.mine?p(N):!0;return A&&$}),v=new Map;k.forEach(N=>{if(N.boardId==null)return;const A=Number(N.boardId),$=v.get(A)||{count:0,title:N.boardTitle||"",color:N.boardColor};$.count+=1,$.title=N.boardTitle||$.title,$.color=N.boardColor??$.color,v.set(A,$)});let S;if(v.size){const N=Array.from(v.entries()).sort((A,$)=>$[1].count-A[1].count);S={title:N[0][1].title,color:N[0][1].color}}x.push({key:h.key,label:h.label,titles:k.map(N=>N.title||`Card ${N.id}`),count:k.length,board:S})}),x}),f=O(()=>{const p=t.value.ticker||{autoScroll:!0,intervalSeconds:5},m=Math.min(10,Math.max(3,Number(p.intervalSeconds??5)||5));return{autoScroll:p.autoScroll!==!1,intervalSeconds:m}}),g=O(()=>t.value.filtersEnabled&&t.value.enabled&&!!(a.value||"").trim()),b=O(()=>`${n.value||""}/apps/deck/`);return{deckFilter:r,deckVisibleCards:i,deckMineMatcher:s,deckFilteredCards:d,deckSummaryBuckets:c,deckTickerConfig:f,deckCanFilterMine:g,deckUrl:b}}function P0(e){const{storageKey:t,widgetsRegistry:o,createDefaultWidgets:a,normalizeWidgetLayout:n,createDashboardPreset:r,dashboardMode:i,deckEnabled:s,hasInitialLoad:d,queueSaveRef:c}=e;function f(){try{if(typeof localStorage>"u")return a();const W=localStorage.getItem(t);if(!W)return a();const B=JSON.parse(W);return n(B,a()).filter(E=>!!o[E.type])}catch(W){return console.warn("[opsdash] widget layout load failed",W),a()}}const g=Z(f()),b=Z(!1),p=Z(!1),m=Z("");function u(){var W;d.value&&b.value&&((W=c.value)==null||W.call(c,!1),b.value=!1)}Le(()=>g.value,W=>{try{if(typeof localStorage>"u")return;localStorage.setItem(t,JSON.stringify(W))}catch(B){console.warn("[opsdash] widget layout save failed",B)}},{deep:!0});const x=O(()=>{const W=g.value;return s.value?W:W.filter(B=>B.type!=="deck")}),C=O(()=>Object.keys(o).map(W=>{var B;return{type:W,label:((B=o[W])==null?void 0:B.label)||W}}));function h(W){i.value=W,g.value=r(W),b.value=!0,u()}function k(W,B){g.value=g.value.map(E=>E.id===W?B({...E,layout:{...E.layout}}):E),b.value=!0,u()}function v(W){const B=["quarter","half","full"];k(W,E=>{const U=B.indexOf(E.layout.width),R=B[(U+1)%B.length];return{...E,layout:{...E.layout,width:R}}})}function S(W){const B=["s","m","l"];k(W,E=>{const U=B.indexOf(E.layout.height),R=B[(U+1)%B.length];return{...E,layout:{...E.layout,height:R}}})}function N(W,B){const E=[...g.value].sort((V,J)=>(V.layout.order||0)-(J.layout.order||0)),U=E.findIndex(V=>V.id===W);if(U<0)return;const R=B==="up"?U-1:U+1;if(R<0||R>=E.length)return;const ie=E[U].layout.order;E[U].layout.order=E[R].layout.order,E[R].layout.order=ie,g.value=E,b.value=!0,u()}function A(W){g.value=g.value.filter(B=>B.id!==W),b.value=!0,u()}function $(W){const B=o[W];if(!B)return;const E=g.value.reduce((R,ie)=>Math.max(R,ie.layout.order||0),0),U={id:`widget-${W}-${Date.now()}`,type:W,options:{},layout:{...B.defaultLayout,order:E+10},version:1};g.value=[...g.value,U],m.value="",b.value=!0,u()}function T(W,B){const E=o[W];if(!E)return;const U=g.value.reduce((V,J)=>Math.max(V,J.layout.order||0),0);let R=Number.isFinite(B)?Number(B):U+10;for(Number.isFinite(R)||(R=U+10);g.value.some(V=>V.layout.order===R);)R+=.1;const ie={id:`widget-${W}-${Date.now()}`,type:W,options:{},layout:{...E.defaultLayout,order:R},version:1};g.value=[...g.value,ie],b.value=!0,u()}function j(W,B){if(!Number.isFinite(B??NaN))return;const E=Number(B),U=g.value.map(R=>R.id===W?{...R,layout:{...R.layout,order:E}}:{...R});U.sort((R,ie)=>(R.layout.order||0)-(ie.layout.order||0)),g.value=U.map((R,ie)=>({...R,layout:{...R.layout,order:(ie+1)*10}})),b.value=!0,u()}function L(W,B,E){g.value=g.value.map(U=>{if(U.id!==W)return U;const R={...U.options||{}};if(B.includes(".")){const ie=B.split("."),V={...R};let J=V;for(let z=0;z<ie.length-1;z+=1){const fe=ie[z];J[fe]={...J[fe]||{}},J=J[fe]}return J[ie[ie.length-1]]=E,{...U,options:V}}return R[B]=E,{...U,options:R}}),b.value=!0,u()}function F(){g.value=r(i.value),b.value=!0,u()}return{layoutWidgets:g,widgetsDirty:b,isLayoutEditing:p,newWidgetType:m,widgets:x,availableWidgetTypes:C,persistWidgets:u,applyDashboardPreset:h,updateWidget:k,cycleWidth:v,cycleHeight:S,moveWidget:N,removeWidget:A,addWidget:$,addWidgetAt:T,reorderWidget:j,updateWidgetOptions:L,resetWidgets:F}}function F0(e){const{performLoad:t,refreshPresets:o,range:a,offset:n,onboardingState:r,hasInitialLoad:i,evaluateOnboarding:s,dashboardMode:d}=e;Le(r,c=>{i.value&&s(c)}),Le(r,c=>{const f=c==null?void 0:c.dashboardMode;(f==="quick"||f==="standard"||f==="pro")&&(d.value=f)}),It(async()=>{console.info("[opsdash] start");try{await t()}catch(c){console.error(c),alert("Initial load failed")}o().catch(c=>console.warn("[opsdash] presets fetch failed",c))}),Le(a,()=>{n.value=0,t().catch(console.error)})}function W0(e){return Array.from(e.reduce((t,o)=>(o.boardId==null||t.has(o.boardId)||t.set(o.boardId,{id:o.boardId,title:o.boardTitle,color:o.boardColor}),t),new Map).values())}function H0(e){return{widgetContext:O(()=>{var o,a;return{summary:e.timeSummary.value,activeDayMode:e.activeDayMode.value,targetsSummary:e.targetsSummary.value,targetsConfig:e.targetsConfig.value,stats:e.stats,byDay:e.byDay.value,byCal:e.byCal.value,groupsById:e.groupsById.value,groups:e.calendarGroupsWithToday.value,balanceOverview:e.balanceOverview.value,balanceConfig:e.balanceCardConfig.value,rangeLabel:e.rangeLabel.value,rangeMode:e.range.value,from:e.from.value,to:e.to.value,lookbackWeeks:e.trendLookbackWeeks.value,balanceNote:e.balanceNote.value,activitySummary:e.activitySummary.value,activityConfig:e.activityCardConfig.value,activityDayOffTrend:e.activityDayOffTrend.value,activityTrendUnit:e.range.value==="month"?"mo":"wk",activityDayOffLookback:e.trendLookbackWeeks.value,deckBuckets:e.deckSummaryBuckets.value,deckRangeLabel:e.rangeLabel.value,deckLoading:e.deckLoading.value,deckError:e.deckError.value,deckTicker:e.deckTickerConfig.value,deckShowBoardBadges:((a=(o=e.deckSettings.value)==null?void 0:o.ticker)==null?void 0:a.showBoardBadges)!==!1,deckUrl:e.deckUrl.value,deckCards:e.deckCards.value,deckBoards:W0(e.deckCards.value||[]),uid:e.uid.value,notesPrev:e.notesPrev.value,notesCurr:e.notesCurrDraft.value,notesLabelPrev:e.notesLabelPrev.value,notesLabelCurr:e.notesLabelCurr.value,notesLabelPrevTitle:e.notesLabelPrevTitle.value,notesLabelCurrTitle:e.notesLabelCurrTitle.value,isSavingNote:e.isSavingNote.value,onSaveNote:()=>e.saveNotes(),onUpdateNotes:n=>{e.notesCurrDraft.value=n}}})}}function td(){var t;if(typeof window>"u")return!1;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function R0(e,t={}){var a,n,r,i,s,d;if(typeof window>"u")return;const o=window;try{if((n=(a=o==null?void 0:o.OCA)==null?void 0:a.Analytics)!=null&&n.trackEvent){o.OCA.Analytics.trackEvent("opsdash",e,t);return}if((i=(r=o==null?void 0:o.OCA)==null?void 0:r.Analytics)!=null&&i.track){o.OCA.Analytics.track("opsdash",e,t);return}if((d=(s=o==null?void 0:o.OC)==null?void 0:s.eventBus)!=null&&d.emit){o.OC.eventBus.emit("opsdash:telemetry",{app:"opsdash",event:e,payload:t});return}}catch(c){td()&&console.warn("[opsdash] telemetry emit failed",e,c);return}td()&&console.debug("[opsdash] telemetry (noop)",e,t)}const z0={version:"0.4.8"},j0={class:"app-shell"},U0={class:"app-main"},V0={class:"app-container"},K0={key:0,class:"range-toolbar",role:"toolbar","aria-label":"Collapsed range controls"},q0=["aria-expanded","aria-label"],G0=["disabled"],J0=["disabled","aria-pressed"],Y0={class:"range-toolbar__group",role:"group","aria-label":"Navigate periods"},Z0=["disabled"],X0=["title"],Q0=["disabled"],ek={class:"appbar"},tk={class:"title"},ok=["src"],ak=["textContent"],nk={class:"hint appbar-meta"},rk=["textContent"],sk={key:1,title:"Results truncated for performance"},ik=["title"],lk={class:"cards-toolbar"},dk={key:0,class:"cards-toolbar__add"},ck=["value"],uk=["disabled"],fk={class:"cards"},pk={class:"tabs"},gk={class:"card full tab-panel"},mk={key:0,class:"chart-section"},hk={class:"grid2 mt-12"},vk={class:"card chart-card"},bk={class:"card chart-card"},yk={key:1,class:"chart-section"},kk={key:0,class:"category-chart-block"},wk={class:"category-chart-header"},xk={class:"name"},_k={class:"grid2 mt-8"},Ck={class:"card chart-card"},Sk={class:"card chart-card"},$k={class:"card full tab-panel"},Tk={class:"card full tab-panel"},Mk={class:"card full tab-panel"},Ak={key:2,class:"card full tab-panel"},Dk={class:"hint footer"},Ek=Ee({__name:"App",setup(e){function t(Q){var Ye,ye;const re=window;(ye=(Ye=re.OC)==null?void 0:Ye.Notification)!=null&&ye.showTemporary?re.OC.Notification.showTemporary(Q):console.log("SUCCESS:",Q)}function o(Q){var Ye,ye;const re=window;(ye=(Ye=re.OC)==null?void 0:Ye.Notification)!=null&&ye.showTemporary?re.OC.Notification.showTemporary(Q):(console.error("ERROR:",Q),alert(Q))}const{navOpen:a,toggleNav:n,navToggleLabel:r,navToggleIcon:i}=E0(),s=Z(null);function d(){a.value||n()}const c=Z("cal"),f=Z("week"),g=Z(0),b=O(()=>{const Q=ge.value;if(!Q)return"Partial data due to caps";const re=[];return Q.maxPerCal!=null&&re.push(`cap per calendar: ${Q.maxPerCal}`),Q.maxTotal!=null&&re.push(`cap total: ${Q.maxTotal}`),Q.totalProcessed!=null&&re.push(`processed: ${Q.totalProcessed}`),re.join("  ")}),p=Z(!1),{scheduleDraw:m}=Q1(),{route:u,getJson:x,postJson:C,deleteJson:h,root:k}=o0(),{calendarDayLink:v,fetchDavColors:S}=n0({root:k,isDebug:es}),N=H1({range:f,offset:g,route:Q=>u(Q),getJson:x,postJson:C,notifySuccess:t,notifyError:o}),{notesPrev:A,notesCurrDraft:$,isSavingNote:T,fetchNotes:j,saveNotes:L}=N,F=Z(!1),W=Z("standard"),B=Z(null),E=Z(!0),{layoutWidgets:U,isLayoutEditing:R,newWidgetType:ie,widgets:V,availableWidgetTypes:J,applyDashboardPreset:z,cycleWidth:fe,cycleHeight:G,moveWidget:P,removeWidget:H,addWidget:oe,addWidgetAt:ee,reorderWidget:X,updateWidgetOptions:le,resetWidgets:we}=P0({storageKey:"opsdash.widgets.v1",widgetsRegistry:jo,createDefaultWidgets:$r,normalizeWidgetLayout:Sr,createDashboardPreset:zl,dashboardMode:W,deckEnabled:E,hasInitialLoad:F,queueSaveRef:B}),{calendars:He,colorsByName:M,colorsById:I,groupsById:K,selected:ne,isLoading:ae,isTruncated:se,truncLimits:ge,uid:ue,from:ce,to:te,stats:$e,byCal:me,byDay:pe,longest:he,charts:ke,targetsWeek:be,targetsMonth:_e,targetsConfig:xe,onboarding:Ie,load:Pe,themePreference:Fe,reportingConfig:Ze,deckSettings:Ue}=K1({range:f,offset:g,userChangedSelection:p,route:Q=>u(Q),getJson:x,notifyError:o,scheduleDraw:m,fetchNotes:j,isDebug:es,fetchDavColors:S,widgets:U});function Oe(Q){Ze.value=yr(Q,Ze.value),mo(!1)}function Re(Q){Ue.value=kr(Q,Ue.value);const re=Nr(Ue.value.defaultFilter);$a.value=re,mo(!1)}Le(()=>Ue.value.enabled,Q=>{E.value=Q,!Q&&c.value==="deck"&&(c.value="cal")},{immediate:!0});const{deckCards:go,deckLoading:Mo,deckLastFetchedAt:Ir,deckError:wn,refreshDeck:Br}=I0({from:ce,to:te,notifyError:o}),{deckFilter:$a,deckFilteredCards:Pr,deckSummaryBuckets:Fr,deckTickerConfig:Wr,deckCanFilterMine:xn,deckUrl:Ta}=B0({deckSettings:Ue,deckCards:go,uid:ue,root:k}),Ao=Ie,{themePreference:Vo,effectiveTheme:Hr,systemTheme:_n,setThemePreference:Ma}=w0({serverPreference:Fe,route:Q=>u(Q),postJson:C,notifySuccess:t,notifyError:o});function Rr(Q){sd(Q||"categories")}const{exportSidebarConfig:zr,importSidebarConfig:Cn}=T0({selected:ne,groupsById:K,targetsWeek:be,targetsMonth:_e,targetsConfig:xe,themePreference:Vo,onboardingState:Ao,widgets:U,setThemePreference:Ma,postJson:C,route:Q=>u(Q),performLoad:()=>ho(),notifySuccess:t,notifyError:o}),{queueSave:mo,isSaving:Y}=q1({route:Q=>u(Q),postJson:C,notifyError:o,notifySuccess:t,onReload:()=>ho(),selected:ne,groupsById:K,targetsWeek:be,targetsMonth:_e,targetsConfig:xe,themePreference:Vo,reportingConfig:Ze,deckSettings:Ue,widgets:U});B.value=mo;const{toggleCalendar:ve,setGroup:Me,setTarget:nt,updateTargetsConfig:st,selectAll:jr}=Z1({calendars:He,selected:ne,groupsById:K,targetsWeek:be,targetsMonth:_e,targetsConfig:xe,range:f,queueSave:mo,userChangedSelection:p}),{presets:F_,presetsLoading:W_,presetSaving:H_,presetApplying:R_,presetWarnings:z_,refreshPresets:nd,savePreset:rd,loadPreset:j_,deletePreset:U_,clearPresetWarnings:V_}=X1({route:(Q,re)=>u(Q,re),getJson:x,postJson:C,deleteJson:h,notifyError:o,notifySuccess:t,queueSave:mo,selected:ne,groupsById:K,targetsWeek:be,targetsMonth:_e,targetsConfig:xe,userChangedSelection:p}),K_=L0({onboardingState:Ao,route:Q=>u(Q),postJson:C,notifySuccess:t,notifyError:o,setThemePreference:Ma,savePreset:rd,reloadAfterPersist:()=>ho(),setSelected:Q=>{ne.value=[...Q]},setTargetsWeek:Q=>{be.value={...Q}},setTargetsMonth:Q=>{_e.value={...Q}},setTargetsConfig:Q=>{xe.value=Ut(Q)},setGroupsById:Q=>{K.value={...Q}},setOnboardingState:Q=>{Ie.value={...Ie.value||{},...Q}},setDashboardMode:Q=>{W.value=Q}}),{autoWizardNeeded:q_,onboardingRunId:G_,onboardingWizardVisible:J_,openWizardFromSidebar:sd,wizardStartStep:Y_,hasExistingConfig:Z_,wizardCalendars:X_,wizardInitialSelection:Q_,wizardInitialStrategy:e2,wizardInitialAllDayHours:t2,wizardInitialTotalHours:o2,wizardInitialDeckSettings:a2,wizardInitialReportingConfig:n2,wizardInitialDashboardMode:r2,isOnboardingSaving:s2,isSnapshotSaving:i2,snapshotNotice:l2,evaluateOnboarding:id,handleWizardComplete:d2,handleWizardSkip:c2,handleWizardClose:u2,handleWizardSaveSnapshot:f2}=x0({onboardingState:Ao,calendars:He,selected:ne,targetsConfig:xe,deckSettings:Ue,reportingConfig:Ze,hasInitialLoad:F,actions:K_}),p2=async Q=>{await d2(Q),Q!=null&&Q.dashboardMode&&z(Q.dashboardMode)};async function ho(){await Pe(),F.value||(F.value=!0),id()}const{showCollapsedRangeControls:g2,rangeToggleLabel:m2,rangeDateLabel:ld,loadCurrent:dd,toggleRangeCollapsed:Ur,goPrevious:Vr,goNext:Kr}=_0({navOpen:a,range:f,offset:g,from:ce,to:te,isLoading:ae,performLoad:()=>ho()});function cd(Q){var re;d(),(re=s.value)==null||re.openTab(Q)}const{shortcutsOpen:h2,openShortcuts:v2,closeShortcuts:b2,shortcutGroups:y2}=N0({goPrevious:Vr,goNext:Kr,toggleRange:Ur,saveNotes:()=>L(),openNotesPanel:()=>cd("notes"),openConfigPanel:()=>cd("config"),toggleEditLayout:()=>{R.value=!R.value},openWidgetOptions:()=>{if(R.value){if(!Gr.value&&V.value.length){Jr.value=V.value[0].id,Gr.value=V.value[0].id;return}Jr.value&&(Gr.value=Jr.value)}},ensureSidebarVisible:d,onOpen:({source:Q})=>R0("shortcuts_opened",{source:Q})}),ud=Z("active"),qr=O(()=>f.value==="month"?"Month":"Week"),Gr=Z(null),Jr=Z(null),Yr=O(()=>{const Q=Ut(xe.value);return f.value==="month"&&(Q.totalHours=ka(Q.totalHours),Q.categories=Q.categories.map(re=>({...re,targetHours:ka(re.targetHours)}))),Q}),fd=O(()=>{const Q=Yr.value;try{return gl({config:Q,stats:$e,byDay:pe.value||[],byCal:me.value||[],groupsById:K.value||{},range:f.value,from:ce.value,to:te.value})}catch(re){return console.error("[opsdash] targets summary failed",re),pl(Q)}}),Zr=O(()=>{if(f.value==="month"){const Q=_e.value||{};if(Q&&Object.keys(Q).length>0)return Q;const re=be.value||{},Ye={};return Object.entries(re).forEach(([ye,_t])=>{const Qe=Number(_t);Number.isFinite(Qe)&&(Ye[ye]=ka(Qe))}),Ye}return be.value||{}}),Xr=O(()=>{var Q;return{...$o(),...((Q=xe.value)==null?void 0:Q.activityCard)??{}}}),Qr=O(()=>{var Ye;const Q=Ro(),re=((Ye=xe.value)==null?void 0:Ye.balance)??Q;return{...Q,...re,thresholds:{...Q.thresholds,...re.thresholds??{}},relations:{...Q.relations,...re.relations??{}},trend:{...Q.trend,...re.trend??{}},dayparts:{...Q.dayparts,...re.dayparts??{}},ui:{...Q.ui,...re.ui??{}}}}),k2=O(()=>({showNotes:!!Qr.value.ui.showNotes})),w2=O(()=>{var Q;return Math.max(1,Math.min(12,((Q=Qr.value.trend)==null?void 0:Q.lookbackWeeks)??1))}),x2=O(()=>{if(!Qr.value.ui.showNotes)return"";const Q=($.value??"").trim();return Q||(A.value??"").trim()}),{categoryLabelById:_2,categoryColorMap:pd,calendarCategoryMap:gd,calendarGroups:Ko}=p0({calendars:He,selected:ne,groupsById:K,colorsById:I,targetsConfig:Yr,targetsSummary:fd,byCal:me,currentTargets:Zr,isDebug:es}),{balanceOverview:C2}=m0({stats:$e,categoryColorMap:pd});O(()=>{var Ye,ye;if(!Xr.value.showHint)return"";const re=(Array.isArray((ye=(Ye=xe.value)==null?void 0:Ye.balance)==null?void 0:ye.categories)?xe.value.balance.categories:[]).map(_t=>{const Qe=String(_t??"").trim();if(!Qe)return"";const Et=_2.value[Qe];return Et||Qe.toUpperCase()}).filter(_t=>_t);return re.length?`Mapping via Sidebar  ${re.join(" / ")}`:""});const{calendarChartData:qo,categoryChartsById:Sn}=r0({charts:ke,colorsById:I,calendarGroups:Ko,calendarCategoryMap:gd,targetsConfig:Yr,currentTargets:Zr,activityCardConfig:Xr}),S2=O(()=>{var _t;const Q=(_t=qo.value)==null?void 0:_t.stacked;if(!Q||!Array.isArray(Q.labels)||!Array.isArray(Q.series))return{};const re=vd(new Date),Ye=Q.labels.findIndex(Qe=>String(Qe??"")===re);if(Ye<0)return{};const ye={};return Q.series.forEach(Qe=>{var Go;const Et=String((Qe==null?void 0:Qe.id)??""),Ct=Number(((Go=Qe==null?void 0:Qe.data)==null?void 0:Go[Ye])??0),os=Number.isFinite(Ct)?Math.max(0,Ct):0;Et&&(ye[Et]=(ye[Et]||0)+os)}),ye}),$2=O(()=>{var Et;const Q=(Et=qo.value)==null?void 0:Et.stacked,re=Q==null?void 0:Q.labels,Ye=Q==null?void 0:Q.series;if(!Q||!Array.isArray(re)||!Array.isArray(Ye))return{};const ye=vd(new Date),_t=re.findIndex(Ct=>String(Ct??"")===ye);if(_t<0)return{};const Qe={};return Ye.forEach(Ct=>{var yd,kd;const os=String((Ct==null?void 0:Ct.id)??""),Go=(yd=gd.value)==null?void 0:yd[os];if(!Go)return;const bd=Number(((kd=Ct==null?void 0:Ct.data)==null?void 0:kd[_t])??0),z2=Number.isFinite(bd)?Math.max(0,bd):0;Qe[Go]=(Qe[Go]||0)+z2}),Qe}),T2=O(()=>Ko.value.map(Q=>({...Q,todayHours:$2.value[Q.id]||0}))),M2=O(()=>{const Q=Ko.value||[];return Q.length&&[...Q].sort((Ye,ye)=>(ye.summary.actualHours||0)-(Ye.summary.actualHours||0))[0]||null}),{timeSummary:A2,activitySummary:D2,activityDayOffTrend:E2}=g0({stats:$e,byDay:pe,charts:ke,calendars:He,selected:ne,rangeLabel:qr,activeDayMode:ud,topCategory:M2}),{detailsIndex:O2,toggle:N2}=M0();function es(){return!1}const{iconSrc:L2,onIconError:md,appVersion:hd}=a0({pingUrl:()=>u("ping"),getJson:x,pkgVersion:String(z0.version),root:k}),{notesLabelPrev:I2,notesLabelCurr:B2,notesLabelPrevTitle:P2,notesLabelCurrTitle:F2}=A0(f),{widgetContext:W2}=H0({timeSummary:A2,activeDayMode:ud,targetsSummary:fd,targetsConfig:xe,stats:$e,byDay:pe,byCal:me,groupsById:K,calendarGroupsWithToday:T2,balanceOverview:C2,balanceCardConfig:k2,rangeLabel:qr,range:f,from:ce,to:te,trendLookbackWeeks:w2,balanceNote:x2,activitySummary:D2,activityCardConfig:Xr,activityDayOffTrend:E2,deckSummaryBuckets:Fr,deckLoading:Mo,deckError:wn,deckTickerConfig:Wr,deckSettings:Ue,deckUrl:Ta,deckCards:go,uid:ue,notesPrev:A,notesCurrDraft:$,notesLabelPrev:I2,notesLabelCurr:B2,notesLabelPrevTitle:P2,notesLabelCurrTitle:F2,isSavingNote:T,saveNotes:L}),H2=O(()=>W.value==="quick"?"Quick preset":W.value==="pro"?"Pro preset":"Standard preset");function ts(Q){return Number(Q??0).toFixed(2)}function vd(Q){const re=Q.getFullYear(),Ye=`${Q.getMonth()+1}`.padStart(2,"0"),ye=`${Q.getDate()}`.padStart(2,"0");return`${re}-${Ye}-${ye}`}function R2(Q){v2(Q??null,"button")}return F0({performLoad:ho,refreshPresets:nd,range:f,offset:g,onboardingState:Ao,hasInitialLoad:F,evaluateOnboarding:id,dashboardMode:W}),(Q,re)=>{const Ye=Lc("NcAppSidebarToggle");return w(),_("div",{id:"opsdash",class:Te(["opsdash",{"is-nav-collapsed":!y(a)}])},[(w(),Je(Zv,{key:y(G_),visible:y(J_),calendars:y(X_),"initial-selection":y(Q_),"initial-strategy":y(e2),"onboarding-version":y(zo),closable:!y(q_),"initial-theme-preference":y(Vo),"system-theme":y(_n),"initial-all-day-hours":y(t2),"initial-total-hours":y(o2),"initial-deck-settings":y(a2),"initial-reporting-config":y(n2),"initial-dashboard-mode":y(r2),"start-step":y(Y_),"has-existing-config":y(Z_),saving:y(s2),"snapshot-saving":y(i2),"snapshot-notice":y(l2),onClose:y(u2),onSkip:y(c2),onComplete:p2,onSaveCurrentConfig:y(f2)},null,8,["visible","calendars","initial-selection","initial-strategy","onboarding-version","closable","initial-theme-preference","system-theme","initial-all-day-hours","initial-total-hours","initial-deck-settings","initial-reporting-config","initial-dashboard-mode","start-step","has-existing-config","saving","snapshot-saving","snapshot-notice","onClose","onSkip","onSaveCurrentConfig"])),Se(y(sf),{"app-name":"Operational Dashboard","show-navigation":y(a)},{navigation:je(()=>[Se(Pm,{ref_key:"sidebarRef",ref:s,id:"opsdash-sidebar",calendars:y(He),selected:y(ne),"groups-by-id":y(K),"is-loading":y(ae),range:f.value,offset:g.value,from:y(ce),to:y(te),"targets-week":y(be),"targets-month":y(_e),"targets-config":y(xe),"nav-toggle-label":y(r),"nav-toggle-icon":y(i),presets:y(F_),"presets-loading":y(W_),"preset-saving":y(H_),"preset-applying":y(R_),"preset-warnings":y(z_),"theme-preference":y(Vo),"effective-theme":y(Hr),"system-theme":y(_n),"reporting-config":y(Ze),"deck-settings":y(Ue),"reporting-saving":y(Y),"dashboard-mode":W.value,onLoad:ho,"onUpdate:range":re[0]||(re[0]=ye=>{f.value=ye,g.value=0,ho()}),"onUpdate:offset":re[1]||(re[1]=ye=>{g.value=ye,ho()}),onSelectAll:re[2]||(re[2]=ye=>y(jr)(ye)),onToggleCalendar:re[3]||(re[3]=ye=>y(ve)(ye)),onSetGroup:re[4]||(re[4]=ye=>y(Me)(ye.id,ye.n)),onSetTarget:re[5]||(re[5]=ye=>y(nt)(ye.id,ye.h)),"onUpdate:targetsConfig":y(st),onToggleNav:y(n),onSavePreset:y(rd),onLoadPreset:y(j_),onDeletePreset:y(U_),onRefreshPresets:y(nd),onClearPresetWarnings:y(V_),onRerunOnboarding:y(sd),onSetThemePreference:y(Ma),onExportConfig:y(zr),onImportConfig:y(Cn),onOpenShortcuts:R2,onSaveReporting:Oe,onSaveDeckSettings:Re},null,8,["calendars","selected","groups-by-id","is-loading","range","offset","from","to","targets-week","targets-month","targets-config","nav-toggle-label","nav-toggle-icon","presets","presets-loading","preset-saving","preset-applying","preset-warnings","theme-preference","effective-theme","system-theme","reporting-config","deck-settings","reporting-saving","dashboard-mode","onUpdate:targetsConfig","onToggleNav","onSavePreset","onLoadPreset","onDeletePreset","onRefreshPresets","onClearPresetWarnings","onRerunOnboarding","onSetThemePreference","onExportConfig","onImportConfig"])]),"sidebar-toggle":je(()=>[Se(Ye,{open:y(a),onToggle:y(n)},null,8,["open","onToggle"])]),default:je(()=>[l("div",j0,[l("div",U0,[l("div",V0,[y(g2)?(w(),_("div",K0,[l("button",{class:"range-toolbar__btn",type:"button",onClick:re[6]||(re[6]=(...ye)=>y(n)&&y(n)(...ye)),"aria-expanded":y(a),"aria-controls":"opsdash-sidebar","aria-label":y(r)},D(y(i)),9,q0),l("button",{class:"range-toolbar__btn",type:"button",disabled:y(ae),onClick:re[7]||(re[7]=(...ye)=>y(dd)&&y(dd)(...ye))}," Refresh ",8,G0),re[24]||(re[24]=l("div",{class:"range-toolbar__divider","aria-hidden":"true"},null,-1)),l("button",{class:"range-toolbar__btn",type:"button",disabled:y(ae),onClick:re[8]||(re[8]=(...ye)=>y(Ur)&&y(Ur)(...ye)),"aria-pressed":f.value==="month"},D(y(m2)),9,J0),l("div",Y0,[l("button",{class:"range-toolbar__btn",type:"button",disabled:y(ae),onClick:re[9]||(re[9]=(...ye)=>y(Vr)&&y(Vr)(...ye))},"  ",8,Z0),l("span",{class:"range-toolbar__label",title:y(ld)},D(y(ld)),9,X0),l("button",{class:"range-toolbar__btn",type:"button",disabled:y(ae),onClick:re[10]||(re[10]=(...ye)=>y(Kr)&&y(Kr)(...ye))},"  ",8,Q0)])])):q("",!0),l("div",ek,[l("div",tk,[l("img",{src:y(L2),onError:re[11]||(re[11]=(...ye)=>y(md)&&y(md)(...ye)),class:"app-icon",alt:"","aria-hidden":"true"},null,40,ok),re[25]||(re[25]=l("span",null,"Operational Dashboard",-1)),l("span",{class:"chip",textContent:D(f.value.toUpperCase())},null,8,ak)]),l("div",nk,[y(ae)?(w(),Je(y(pr),{key:0,size:16})):q("",!0),l("span",{textContent:D(y(ue))},null,8,rk),y(se)?(w(),_("span",sk," Partial data")):q("",!0)])]),y(se)?(w(),_("div",{key:1,class:"banner warn",title:b.value},[re[26]||(re[26]=Ae(" Showing partial data to keep things fast. ",-1)),y(ge)&&y(ge).totalProcessed!=null?(w(),_(de,{key:0},[Ae(" Processed "+D(y(ge).totalProcessed)+" items. ",1)],64)):q("",!0)],8,ik)):q("",!0),l("div",lk,[l("button",{type:"button",class:"ghost-btn",onClick:re[12]||(re[12]=ye=>R.value=!y(R))},D(y(R)?"Done editing":"Edit layout"),1),y(R)?(w(),_("div",dk,[yo(l("select",{"onUpdate:modelValue":re[13]||(re[13]=ye=>at(ie)?ie.value=ye:null)},[re[27]||(re[27]=l("option",{value:"",disabled:""},"Select widget",-1)),(w(!0),_(de,null,Ce(y(J),ye=>(w(),_("option",{key:ye.type,value:ye.type},D(ye.label),9,ck))),128))],512),[[Zu,y(ie)]]),l("button",{type:"button",class:"ghost-btn",disabled:!y(ie),onClick:re[14]||(re[14]=ye=>y(oe)(y(ie)))}," Add ",8,uk),l("button",{type:"button",class:"ghost-btn",onClick:re[15]||(re[15]=(...ye)=>y(we)&&y(we)(...ye))}," Reset ")])):q("",!0)]),l("div",fk,[Se(W1,{widgets:y(V),context:y(W2),editable:y(R),"widget-types":y(J),"preset-label":H2.value,"onEdit:width":y(fe),"onEdit:height":y(G),"onEdit:remove":y(H),"onEdit:move":y(P),"onEdit:options":y(le),"onEdit:add":y(ee),"onEdit:reorder":y(X),"onOpen:onboarding":Rr,"onReset:preset":re[16]||(re[16]=ye=>y(z)(W.value.value))},null,8,["widgets","context","editable","widget-types","preset-label","onEdit:width","onEdit:height","onEdit:remove","onEdit:move","onEdit:options","onEdit:add","onEdit:reorder"])]),l("div",pk,[l("a",{href:"#",class:Te({active:c.value==="cal"}),onClick:re[17]||(re[17]=ot(ye=>c.value="cal",["prevent"]))},"By Calendar",2),l("a",{href:"#",class:Te({active:c.value==="day"}),onClick:re[18]||(re[18]=ot(ye=>c.value="day",["prevent"]))},"By Day",2),l("a",{href:"#",class:Te({active:c.value==="top"}),onClick:re[19]||(re[19]=ot(ye=>c.value="top",["prevent"]))},"Longest Tasks",2),l("a",{href:"#",class:Te({active:c.value==="heat"}),onClick:re[20]||(re[20]=ot(ye=>c.value="heat",["prevent"]))},"Heatmap",2),y(Ue).enabled?(w(),_("a",{key:0,href:"#",class:Te({active:c.value==="deck"}),onClick:re[21]||(re[21]=ot(ye=>c.value="deck",["prevent"]))}," Deck ",2)):q("",!0)]),yo(l("div",gk,[y(me).length===0?(w(),Je(y(ya),{key:0,name:"No data",description:"Try changing the range or calendars"})):(w(),_(de,{key:1},[Se(Nf,{rows:y(me),n2:ts,targets:Zr.value,groups:y(Ko),"today-hours":S2.value},null,8,["rows","targets","groups","today-hours"]),y(xe).ui.showCalendarCharts&&(y(qo).pie||y(qo).stacked)?(w(),_("div",mk,[re[30]||(re[30]=l("h3",{class:"section-title"},"Calendars (all)",-1)),l("div",hk,[l("div",vk,[re[28]||(re[28]=l("div",{class:"chart-card__title"},"Distribution by calendar",-1)),Se(ul,{data:y(qo).pie,"colors-by-id":y(I),"colors-by-name":y(M)},null,8,["data","colors-by-id","colors-by-name"])]),l("div",bk,[re[29]||(re[29]=l("div",{class:"chart-card__title"},"Hours per day",-1)),Se(fl,{stacked:y(qo).stacked,legacy:y(ke).perDay,"colors-by-id":y(I)},null,8,["stacked","legacy","colors-by-id"])])])])):q("",!0),y(xe).ui.showCategoryCharts&&y(Ko).length?(w(),_("div",yk,[re[33]||(re[33]=l("h3",{class:"section-title"},"Categories",-1)),(w(!0),_(de,null,Ce(y(Ko),ye=>{var _t,Qe,Et,Ct;return w(),_(de,{key:"cat-charts-"+ye.id},[(_t=y(Sn)[ye.id])!=null&&_t.pie||(Qe=y(Sn)[ye.id])!=null&&Qe.stacked?(w(),_("div",kk,[l("div",wk,[l("span",{class:"dot",style:Be({background:y(pd)[ye.id]||"var(--brand)"})},null,4),l("span",xk,D(ye.label),1)]),l("div",_k,[l("div",Ck,[re[31]||(re[31]=l("div",{class:"chart-card__title"},"Calendar share",-1)),Se(ul,{data:(Et=y(Sn)[ye.id])==null?void 0:Et.pie,"colors-by-id":y(I),"colors-by-name":y(M)},null,8,["data","colors-by-id","colors-by-name"])]),l("div",Sk,[re[32]||(re[32]=l("div",{class:"chart-card__title"},"Hours per day",-1)),Se(fl,{stacked:(Ct=y(Sn)[ye.id])==null?void 0:Ct.stacked,legacy:null,"colors-by-id":y(I)},null,8,["stacked","colors-by-id"])])])])):q("",!0)],64)}),128))])):q("",!0)],64))],512),[[va,c.value==="cal"]]),yo(l("div",$k,[y(pe).length===0?(w(),Je(y(ya),{key:0,name:"No data",description:"Try changing the range or calendars"})):(w(),Je(Wf,{key:1,rows:y(pe),n2:ts,link:y(v)},null,8,["rows","link"]))],512),[[va,c.value==="day"]]),yo(l("div",Tk,[y(he).length===0?(w(),Je(y(ya),{key:0,name:"No data",description:"Try changing the range or calendars"})):(w(),Je(Jf,{key:1,rows:y(he),n2:ts,"details-index":y(O2),onToggle:y(N2)},null,8,["rows","details-index","onToggle"]))],512),[[va,c.value==="top"]]),yo(l("div",Mk,[!y(ke).hod||!y(ke).hod.matrix||y(ke).hod.matrix.length===0?(w(),Je(y(ya),{key:0,name:"No data",description:"Try changing the range or calendars"})):(w(),_(de,{key:1},[Se(cf,{hod:y(ke).hod},null,8,["hod"]),re[34]||(re[34]=l("div",{class:"hint"},"247 Heatmap: cumulated hours by weekday (rows) and hour (columns).",-1))],64))],512),[[va,c.value==="heat"]]),y(Ue).enabled?yo((w(),_("div",Ak,[Se(Sl,{cards:y(Pr),loading:y(Mo),"range-label":qr.value,"last-fetched-at":y(Ir),"deck-url":y(Ta),error:y(wn),filter:y($a),"can-filter-mine":y(xn),"filters-enabled":y(Ue).filtersEnabled&&y(Ue).enabled,onRefresh:re[22]||(re[22]=ye=>y(Br)(!0)),"onUpdate:filter":re[23]||(re[23]=ye=>$a.value=ye)},null,8,["cards","loading","range-label","last-fetched-at","deck-url","error","filter","can-filter-mine","filters-enabled"])],512)),[[va,c.value==="deck"]]):q("",!0),l("div",Dk,[y(hd)?(w(),_(de,{key:0},[Ae(" Operational Dashboard  v"+D(y(hd))+"  Built by Blade34242 @ Gellert Innovation ",1)],64)):(w(),_(de,{key:1},[Ae(" Operational Dashboard  v0.4.4  Built by Blade34242 @ Gellert Innovation ")],64))])])])])]),_:1},8,["show-navigation"]),Se(nb,{visible:y(h2),groups:y(y2),onClose:y(b2)},null,8,["visible","groups","onClose"])],2)}}});function Lr(){const e=document.getElementById("app");if(e){try{console.log("[opsdash] booting");const t=af(Ek);t.config.errorHandler=(n,r,i)=>{const s=r!=null&&r.type&&r.type.name?r.type.name:"",d={err:n,info:i,name:s,stack:n instanceof Error?n.stack:void 0},c=window;Array.isArray(c.__opsdashErrors)||(c.__opsdashErrors=[]),c.__opsdashErrors.push(d),console.error("[opsdash] Vue error",d)};const o=t.mount(e),a=window;a.__opsdashApp=t,a.__opsdashRoot=o,R1(),console.log("[opsdash] mounted")}catch(t){console.error("Mount failed",t)}return}document.readyState==="complete"||document.readyState==="interactive"?setTimeout(Lr,50):window.addEventListener("DOMContentLoaded",Lr,{once:!0})}Lr();const Ok={class:"activity-card__header"},Nk={key:0,class:"pill"},Lk={key:0,class:"activity-card__hero"},Ik={key:1,class:"activity-card__subline"},Bk={key:2,class:"activity-card__meta"},Pk={key:3,class:"activity-card__extra"},Fk={key:4,class:"activity-card__trend"},Wk={class:"dayoff-header"},Hk={key:0,class:"dayoff-meta"},Rk={class:"dayoff-heatmap"},zk=["title"],jk={class:"dayoff-tile__label"},Uk={class:"dayoff-tile__value"},Vk={class:"dayoff-tile__meta"},Kk={key:5,class:"activity-card__hint"},qk=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"ActivityScheduleCard",props:{summary:{},rangeLabel:{},categoryHint:{},config:{},dayOffTrend:{},trendUnit:{},dayOffLookback:{},title:{},cardBg:{}},setup(e){const t=$o(),o=e,a=O(()=>Object.assign({},t,o.config??{})),n=O(()=>o.title||"Activity & Schedule"),r=O(()=>({background:o.cardBg||void 0})),i=O(()=>{const v=[];v.push(`Events ${o.summary.events}`),o.summary.activeDays!=null&&v.push(`Active Days ${o.summary.activeDays}`);const S=m(o.summary.typicalStart,o.summary.typicalEnd);return S&&v.push(`Typical ${S}`),v.join("  ")}),s=O(()=>{const v=[];return a.value.showWeekendShare&&o.summary.weekendShare!=null&&v.push(`Weekend ${u(o.summary.weekendShare)}`),a.value.showEveningShare&&o.summary.eveningShare!=null&&v.push(`Evening ${u(o.summary.eveningShare)}`),v.join("  ")}),d=O(()=>{const v=[];if(a.value.showEarliestLatest){const S=x(o.summary.earliestStart),N=x(o.summary.latestEnd);(S||N)&&v.push({label:"Earliest/Late",value:`${S||""} / ${N||""}`})}return a.value.showOverlaps&&o.summary.overlapEvents!=null&&v.push({label:"Overlaps",value:o.summary.overlapEvents.toString()}),v}),c=O(()=>{const v=[];return a.value.showLongestSession&&o.summary.longestSession!=null&&o.summary.longestSession>0&&v.push({label:"Longest Session",value:`${Number(o.summary.longestSession).toFixed(1)} h`}),a.value.showLastDayOff&&o.summary.lastDayOff&&v.push({label:"Last day off",value:C(o.summary.lastDayOff)}),a.value.showLastDayOff&&o.summary.lastHalfDayOff&&v.push({label:"Last half day",value:C(o.summary.lastHalfDayOff)}),v}),f=O(()=>{const v=typeof o.dayOffLookback=="number"?o.dayOffLookback:null;if(v!=null)return Math.max(0,Math.min(12,Math.floor(v)));const S=(o.dayOffTrend??[]).filter(N=>Number((N==null?void 0:N.offset)??0)>0);return Math.max(0,Math.min(12,S.length))}),g=O(()=>{const v=Array.isArray(o.dayOffTrend)?o.dayOffTrend:[],S=new Map;v.forEach(L=>{const F=Number((L==null?void 0:L.offset)??0)||0;S.set(F,{offset:F,label:(L==null?void 0:L.label)??"",from:(L==null?void 0:L.from)??"",to:(L==null?void 0:L.to)??"",totalDays:Number((L==null?void 0:L.totalDays)??(L==null?void 0:L.total_days)??0)||0,daysOff:Number((L==null?void 0:L.daysOff)??(L==null?void 0:L.days_off)??0)||0,daysWorked:Number((L==null?void 0:L.daysWorked)??(L==null?void 0:L.days_worked)??0)||0})});const N=o.trendUnit==="mo"?"mo":"wk",A=o.trendUnit==="mo"?"This month":"This week",$=[],T=S.get(0)??{offset:0,label:A,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};$.push(T);const j=f.value;for(let L=1;L<=j;L+=1){const F=S.get(L)??{offset:L,label:`-${L} ${N}`,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};$.push(F)}return $}),b=O(()=>g.value.map(v=>{const S=Math.max(0,Number(v.totalDays)||0),N=Math.max(0,Math.min(S,Number(v.daysOff)||0)),A=S>0?N/S:0;return{...v,share:A,tone:k(A)}})),p=O(()=>{const v=f.value;if(v<=0)return"";const S=o.trendUnit==="mo"?"month":"week";return`${v} ${v===1?S:`${S}s`}`});function m(v,S){return v&&S?`${v}${S}`:v?`${v}`:S?`${S}`:""}function u(v){return`${Number(v||0).toFixed(1)}%`}function x(v){return v?v.length>=16?v.slice(11,16):v.length>=5?v.slice(0,5):null:null}function C(v){const S=v.trim();if(!S)return"";if(S.split("-").length>=2){const A=new Date(S.length===10?`${S}T00:00:00`:S);if(!Number.isNaN(A.getTime()))return new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}).format(A)}return S}function h(v){const S=Math.max(0,Math.min(1,v));return`${Math.round(S*100)}% off`}function k(v){return v>=.5?"high":v>=.25?"mid":"low"}return(v,S)=>(w(),_("div",{class:"card activity-card",style:Be(r.value)},[l("div",Ok,[l("span",null,D(n.value)+" ("+D(v.rangeLabel)+")",1),v.summary.rangeLabel?(w(),_("span",Nk,D(v.summary.rangeLabel),1)):q("",!0)]),i.value?(w(),_("div",Lk,[l("span",null,D(i.value),1)])):q("",!0),s.value?(w(),_("div",Ik,[l("span",null,D(s.value),1)])):q("",!0),d.value.length?(w(),_("div",Bk,[(w(!0),_(de,null,Ce(d.value,N=>(w(),_("span",{key:N.label},[l("strong",null,D(N.label),1),Ae(" "+D(N.value),1)]))),128))])):q("",!0),c.value.length?(w(),_("div",Pk,[(w(!0),_(de,null,Ce(c.value,N=>(w(),_("span",{key:N.label},[l("strong",null,D(N.label),1),Ae(" "+D(N.value),1)]))),128))])):q("",!0),a.value.showDayOffTrend&&b.value.length?(w(),_("div",Fk,[l("div",Wk,[S[0]||(S[0]=l("span",null,"Days off trend",-1)),p.value?(w(),_("span",Hk," Last "+D(p.value),1)):q("",!0)]),l("div",Rk,[(w(!0),_(de,null,Ce(b.value,N=>(w(),_("div",{key:N.offset,class:Te(["dayoff-tile",[`dayoff-tile--${N.tone}`,{"dayoff-tile--current":N.offset===0}]]),title:`${N.label}  ${h(N.share)}`},[l("div",jk,D(N.label),1),l("div",Uk,D(h(N.share)),1),l("div",Vk,D(N.daysOff)+" off  "+D(N.daysWorked)+" on ",1)],10,zk))),128))])])):q("",!0),a.value.showHint&&v.categoryHint?(w(),_("div",Kk,D(v.categoryHint),1)):q("",!0)],4))}}),[["__scopeId","data-v-10697283"]])},Symbol.toStringTag,{value:"Module"})),Gk={class:"balance-card__header"},Jk={key:0,class:"balance-card__activity"},Yk={class:"activity-hero"},Zk={key:0,class:"activity-hero__line"},Xk={key:1,class:"activity-subline"},Qk={key:2,class:"activity-meta"},ew={key:3,class:"activity-meta activity-meta--extra"},tw={key:0,class:"activity-dayoff"},ow={class:"dayoff-header"},aw={key:0,class:"dayoff-meta"},nw={class:"dayoff-heatmap"},rw=["title"],sw={class:"dayoff-tile__label"},iw={class:"dayoff-tile__value"},lw={class:"dayoff-tile__meta"},dw={key:1,class:"balance-card__mix"},cw={class:"mix-header"},uw={class:"mix-subtitle"},fw={key:0,class:"mix-badge"},pw={class:"mix-column-label mix-column-label--current"},gw={class:"mix-list"},mw={class:"mix-label"},hw=["title"],vw={class:"mix-cell__value"},bw={key:2,class:"balance-card__warnings"},yw={key:3,class:"balance-card__note"},kw=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"BalanceOverviewCard",props:{overview:{},rangeLabel:{},rangeMode:{},lookbackWeeks:{},config:{},note:{},activitySummary:{},activityConfig:{},activityDayOffTrend:{},activityTrendUnit:{},activityDayOffLookback:{},title:{},cardBg:{}},setup(e){const t=$o(),o=e;O(()=>Object.assign({},o.config??{}));const a=O(()=>(o.note??"").trim()),n=O(()=>Object.assign({},t,o.activityConfig??{})),r=O(()=>o.title||"Activity & Balance"),i=O(()=>({background:o.cardBg||void 0})),s=O(()=>{if(!o.activitySummary)return"";const V=[];V.push(`Events ${o.activitySummary.events}`),o.activitySummary.activeDays!=null&&V.push(`Active Days ${o.activitySummary.activeDays}`);const J=B(o.activitySummary.typicalStart,o.activitySummary.typicalEnd);return J&&V.push(`Typical ${J}`),V.join("  ")}),d=O(()=>{if(!o.activitySummary)return"";const V=[];return n.value.showWeekendShare&&o.activitySummary.weekendShare!=null&&V.push(`Weekend ${W(o.activitySummary.weekendShare)}`),n.value.showEveningShare&&o.activitySummary.eveningShare!=null&&V.push(`Evening ${W(o.activitySummary.eveningShare)}`),V.join("  ")}),c=O(()=>{if(!o.activitySummary)return[];const V=[];if(n.value.showEarliestLatest){const J=E(o.activitySummary.earliestStart),z=E(o.activitySummary.latestEnd);(J||z)&&V.push({label:"Earliest/Late",value:`${J||""} / ${z||""}`})}return n.value.showOverlaps&&o.activitySummary.overlapEvents!=null&&V.push({label:"Overlaps",value:o.activitySummary.overlapEvents.toString()}),V}),f=O(()=>{if(!o.activitySummary)return[];const V=[];return n.value.showLongestSession&&o.activitySummary.longestSession!=null&&o.activitySummary.longestSession>0&&V.push({label:"Longest Session",value:`${Number(o.activitySummary.longestSession).toFixed(1)} h`}),n.value.showLastDayOff&&o.activitySummary.lastDayOff&&V.push({label:"Last day off",value:U(o.activitySummary.lastDayOff)}),n.value.showLastDayOff&&o.activitySummary.lastHalfDayOff&&V.push({label:"Last half day",value:U(o.activitySummary.lastHalfDayOff)}),V}),g=O(()=>{const V=typeof o.activityDayOffLookback=="number"?o.activityDayOffLookback:null;if(V!=null)return Math.max(0,Math.min(12,Math.floor(V)));const J=(o.activityDayOffTrend??[]).filter(z=>Number((z==null?void 0:z.offset)??0)>0);return Math.max(0,Math.min(12,J.length))}),b=O(()=>{const V=Array.isArray(o.activityDayOffTrend)?o.activityDayOffTrend:[],J=new Map;V.forEach(G=>{const P=Number((G==null?void 0:G.offset)??0)||0;P<=0||J.set(P,{offset:P,label:(G==null?void 0:G.label)??"",from:(G==null?void 0:G.from)??"",to:(G==null?void 0:G.to)??"",totalDays:Number((G==null?void 0:G.totalDays)??(G==null?void 0:G.total_days)??0)||0,daysOff:Number((G==null?void 0:G.daysOff)??(G==null?void 0:G.days_off)??0)||0,daysWorked:Number((G==null?void 0:G.daysWorked)??(G==null?void 0:G.days_worked)??0)||0})});const z=o.activityTrendUnit==="mo"?"mo":"wk",fe=g.value||0;return Array.from(J.entries()).filter(([G])=>G<=fe||fe===0).map(([,G])=>({...G,label:`-${G.offset} ${z}`})).sort((G,P)=>P.offset-G.offset)}),p=O(()=>b.value.map(V=>{const J=Math.max(0,Number(V.totalDays)||0),z=Math.max(0,Math.min(J,Number(V.daysOff)||0)),fe=J>0?z/J:0;return{...V,share:fe,tone:ie(fe)}})),m=O(()=>{const V=g.value;if(V<=0)return"";const J=o.activityTrendUnit==="mo"?"month":"week";return`${V} ${V===1?J:`${J}s`}`}),u=O(()=>{var V;return((V=o.overview)==null?void 0:V.warnings)??[]}),x=O(()=>{var V,J;return((J=(V=o.overview)==null?void 0:V.trend)==null?void 0:J.badge)??""}),C=O(()=>`CU. ${k.value}`),h=O(()=>Math.max(1,Math.min(4,o.lookbackWeeks||1))),k=O(()=>o.rangeMode==="month"?"MO":"WE"),v=O(()=>{var J,z,fe;const V=((z=(J=o.overview)==null?void 0:J.trend)==null?void 0:z.history)??((fe=o.overview)==null?void 0:fe.trendHistory)??[];return Array.isArray(V)?V.map(G=>({offset:Number((G==null?void 0:G.offset)??(G==null?void 0:G.step)??0)||0,label:String((G==null?void 0:G.label)??""),categories:Array.isArray(G==null?void 0:G.categories)?G.categories.map(P=>({id:String((P==null?void 0:P.id)??""),label:String((P==null?void 0:P.label)??""),share:Number((P==null?void 0:P.share)??0)||0})):[]})).filter(G=>G.offset>0):[]}),S=V=>`-${V} ${k.value}`,N=O(()=>{if(!o.overview)return[];const V=h.value,J=new Map;return v.value.forEach(z=>{const fe=Math.max(1,Math.min(12,Math.round(z.offset)));if(!fe||fe>V)return;const G={};z.categories.forEach(P=>{P.id&&(G[P.id]=Number.isFinite(P.share)?P.share:0)}),J.set(fe,{offset:fe,label:S(fe),shares:G})}),Array.from(J.values()).sort((z,fe)=>fe.offset-z.offset)}),A=O(()=>N.value.length+1),$=O(()=>({gridTemplateColumns:`52px repeat(${Math.max(A.value,1)}, minmax(32px, 1fr))`})),T=V=>V>1?"up":V<-1?"down":"flat",j=O(()=>o.overview?(o.overview.categories??[]).map(J=>{const z=N.value.map(H=>({label:H.label,share:H.shares[J.id]??0,isCurrent:!1})),fe=typeof J.share=="number"?J.share:0,G=[...z,{label:C.value,share:fe,isCurrent:!0}],P=G.map((H,oe)=>{const ee=oe===0?H.share:G[oe-1].share,X=H.share-ee;return{label:H.label,share:H.share,isCurrent:!!H.isCurrent,trend:oe===0?"flat":T(X)}});return{id:J.id,label:J.label,cells:P}}):[]),L=O(()=>{var J;const V=h.value;if(V>1){const z=o.rangeMode==="month"?"months":"weeks";return`History  last ${V} ${z}`}return V===1&&N.value.length?((J=N.value[N.value.length-1])==null?void 0:J.label)||S(1):S(V||1)}),F=V=>`${Math.max(0,Math.round(V))}%`;function W(V){return V==null?"0%":`${Math.max(0,Math.min(100,Number(V))).toFixed(1)}%`}function B(V,J){const z=E(V),fe=E(J);return!z&&!fe?"":z&&fe?`${z}${fe}`:z||fe||""}function E(V){if(!V)return"";const J=new Date(V);return Number.isNaN(J.getTime())?"":J.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function U(V){const J=V.trim();if(!J)return"";if(J.split("-").length>=2){const fe=new Date(J.length===10?`${J}T00:00:00`:J);if(!Number.isNaN(fe.getTime()))return new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}).format(fe)}return J}function R(V){const J=Math.max(0,Math.min(1,V));return`${Math.round(J*100)}% off`}function ie(V){return V>=.5?"high":V>=.25?"mid":"low"}return(V,J)=>(w(),_("div",{class:"card balance-card",style:Be(i.value)},[l("div",Gk,[l("span",null,D(r.value)+" ("+D(V.rangeLabel)+")",1)]),V.activitySummary?(w(),_("div",Jk,[l("div",Yk,[J[0]||(J[0]=l("div",{class:"activity-hero__title"},"Activity & Schedule",-1)),s.value?(w(),_("div",Zk,D(s.value),1)):q("",!0),d.value?(w(),_("div",Xk,D(d.value),1)):q("",!0),c.value.length?(w(),_("div",Qk,[(w(!0),_(de,null,Ce(c.value,z=>(w(),_("span",{key:z.label},[l("strong",null,D(z.label),1),Ae(" "+D(z.value),1)]))),128))])):q("",!0),f.value.length?(w(),_("div",ew,[(w(!0),_(de,null,Ce(f.value,z=>(w(),_("span",{key:z.label},[l("strong",null,D(z.label),1),Ae(" "+D(z.value),1)]))),128))])):q("",!0)]),n.value.showDayOffTrend&&p.value.length?(w(),_("div",tw,[l("div",ow,[J[1]||(J[1]=l("span",null,"Days off trend",-1)),m.value?(w(),_("span",aw,"Last "+D(m.value),1)):q("",!0)]),l("div",nw,[(w(!0),_(de,null,Ce(p.value,z=>(w(),_("div",{key:z.offset,class:Te(["dayoff-tile",[`dayoff-tile--${z.tone}`,{"dayoff-tile--current":z.offset===0}]]),title:`${z.label}  ${R(z.share)}`},[l("div",sw,D(z.label),1),l("div",iw,D(R(z.share)),1),l("div",lw,D(z.daysOff)+" off  "+D(z.daysWorked)+" on ",1)],10,rw))),128))])])):q("",!0)])):q("",!0),j.value.length?(w(),_("div",dw,[l("div",cw,[l("div",null,[J[2]||(J[2]=l("div",{class:"mix-title"},"Category mix trend",-1)),l("div",uw,D(L.value),1)]),x.value?(w(),_("span",fw,D(x.value),1)):q("",!0)]),l("div",{class:"mix-columns",style:Be($.value)},[J[3]||(J[3]=l("span",{class:"mix-column-label mix-column-label--label"},"CAT",-1)),(w(!0),_(de,null,Ce(N.value,z=>(w(),_("span",{key:`col-${z.offset}`,class:"mix-column-label"},D(z.label),1))),128)),l("span",pw,D(C.value),1)],4),l("ul",gw,[(w(!0),_(de,null,Ce(j.value,z=>(w(),_("li",{key:z.id,class:"mix-row"},[l("span",mw,D(z.label)+":",1),l("div",{class:"mix-cells",style:Be($.value)},[(w(!0),_(de,null,Ce(z.cells,(fe,G)=>(w(),_("div",{key:`${z.id}-cell-${G}`,class:Te(["mix-cell",[`mix-cell--trend-${fe.trend}`,{"mix-cell--current":fe.isCurrent}]]),title:`${z.label}  ${fe.label}  ${F(fe.share)}`},[l("span",vw,D(F(fe.share)),1)],10,hw))),128))],4)]))),128))])])):q("",!0),u.value.length?(w(),_("ul",bw,[(w(!0),_(de,null,Ce(u.value,z=>(w(),_("li",{key:z}," "+D(z),1))),128))])):q("",!0),a.value?(w(),_("div",yw,"  "+D(a.value),1)):q("",!0)],4))}}),[["__scopeId","data-v-1b1b4dd2"]])},Symbol.toStringTag,{value:"Module"}));function ww(e){var s;const t=e.basis||"category";if(t==="off")return 0;const o={},a=(s=e.targets)!=null&&s.length?e.targets.reduce((d,c)=>d+(c.targetHours??0),0):0;t!=="calendar"&&a>0&&e.targets.forEach(d=>{const c=(d.targetHours??0)/a;o[d.id]=c});const n=new Set;if(Object.keys(e.shares||{}).forEach(d=>n.add(d)),Object.keys(o).forEach(d=>n.add(d)),n.size===0)return 0;let r=0;n.forEach(d=>{var b;const c=Number(((b=e.shares)==null?void 0:b[d])??0),f=t==="calendar"?1/n.size:o[d]??0,g=Math.abs(c-f);g>r&&(r=g)});const i=1-r;return Math.max(0,Math.min(1,Number(i.toFixed(2))))}function xw(e){var i;const t=Array.isArray(e.history)?e.history:[],o=Math.max(1,Math.min(e.lookback||4,52)),a=((i=e.targetsConfig)==null?void 0:i.categories)||[],r=t.slice(0,o).slice().map((s,d)=>{const c={};Array.isArray(s.categories)&&s.categories.forEach(u=>{c[String(u.id)]=Number(u.share??0)});const f=Object.values(c),g=f.length?Math.max(...f):0,b=f.reduce((u,x)=>u+x,0);(g>1||b>1.5)&&Object.keys(c).forEach(u=>{c[u]=c[u]/100});const p=Object.values(c).reduce((u,x)=>u+x,0);return p>1.0001&&p>0&&Object.keys(c).forEach(u=>{c[u]=c[u]/p}),{index:ww({shares:c,targets:a,basis:e.basis}),label:s.label||"",offset:d}});return r.reverse(),r.forEach((s,d)=>{s.offset=d}),typeof e.currentIndex=="number"&&(!r.length||Math.abs((r[0].index??0)-e.currentIndex)>1e-4?(r.unshift({index:e.currentIndex,label:"Current",offset:0}),r.forEach((s,d)=>{s.offset=d})):r[0].index=e.currentIndex),r.slice(0,o)}const _w={class:"title-row"},Cw={class:"title"},Sw={class:"index-value"},$w={key:0,class:"trend"},Tw=["title"],Mw={class:"trend-line-row"},Aw={class:"trend-value"},Dw={class:"trend-range"},Ew={class:"trend-offset"},Ow={key:1,class:"messages"},Nw={key:2,class:"config"},Lw={key:3,class:"empty"},Iw=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"BalanceIndexCard",props:{overview:{},rangeLabel:{},showBadge:{type:Boolean},showTrend:{type:Boolean},showMessages:{type:Boolean},showConfig:{type:Boolean},messageLimit:{},lookbackWeeks:{},loopbackCount:{},indexBasis:{},showCurrent:{type:Boolean},labelMode:{},reverseTrend:{type:Boolean},from:{},to:{},rangeMode:{},thresholds:{},title:{},cardBg:{},targetsCategories:{},trendColor:{}},setup(e){const t=e,o=O(()=>t.title||"Balance Index"),a=O(()=>{var V,J,z,fe;const E=[...Array.isArray((J=(V=t.overview)==null?void 0:V.trend)==null?void 0:J.history)?t.overview.trend.history:Array.isArray((z=t.overview)==null?void 0:z.trendHistory)?t.overview.trendHistory:[]],U=Math.max(1,Number.isFinite(t.loopbackCount)&&t.loopbackCount?Number(t.loopbackCount):Number.isFinite(t.lookbackWeeks)&&t.lookbackWeeks?Number(t.lookbackWeeks):5),R=t.targetsCategories||[];return xw({history:E,targetsConfig:{categories:R},basis:t.indexBasis,lookback:U,currentIndex:typeof((fe=t.overview)==null?void 0:fe.index)=="number"?t.overview.index:void 0}).slice()}),n=O(()=>{let B=a.value.slice();return t.showCurrent===!1&&(B=B.filter(E=>((E==null?void 0:E.offset)??0)!==0)),t.reverseTrend?B.slice().reverse():B}),r=O(()=>n.value.length>0),i=O(()=>{var B;return((B=t.overview)==null?void 0:B.warnings)||[]}),s=O(()=>{const B=i.value,E=Number.isFinite(t.messageLimit)?Number(t.messageLimit):1/0;return!Number.isFinite(E)||E<=0?B:B.slice(0,E)}),d=O(()=>({background:t.cardBg||void 0})),c=O(()=>{var U,R,ie,V,J;const B=Ro(),E={noticeAbove:((U=t.thresholds)==null?void 0:U.noticeAbove)??B.thresholds.noticeAbove,noticeBelow:((R=t.thresholds)==null?void 0:R.noticeBelow)??B.thresholds.noticeBelow,warnAbove:((ie=t.thresholds)==null?void 0:ie.warnAbove)??B.thresholds.warnAbove,warnBelow:((V=t.thresholds)==null?void 0:V.warnBelow)??B.thresholds.warnBelow,warnIndex:((J=t.thresholds)==null?void 0:J.warnIndex)??B.thresholds.warnIndex};return{basis:t.indexBasis||B.index.basis,...E}}),f=O(()=>{const B=t.showTrend===!1||!r.value,E=t.showMessages===!1||s.value.length===0,U=t.showConfig===!1;return B&&E&&U}),g=B=>Number.isFinite(B)?B.toFixed(2):"",b=O(()=>t.trendColor||"#2563EB"),p=O(()=>{const B=(t.labelMode||"period").toString().toLowerCase();return B==="date"||B==="offset"?B:"period"}),m=O(()=>({gridTemplateColumns:`repeat(auto-fit, minmax(${p.value==="date"?108:88}px, 1fr))`}));function u(B,E){const U=B.replace("#",""),R=parseInt(U.substring(0,2),16),ie=parseInt(U.substring(2,4),16),V=parseInt(U.substring(4,6),16),J=z=>Math.max(0,Math.min(255,Math.round(z*(1-E))));return`rgb(${J(R)}, ${J(ie)}, ${J(V)})`}const x=B=>{const E=b.value,U=n.value[B],R=Number((U==null?void 0:U.index)??0),ie=Math.min(1,Math.max(0,1-R)),V=u(E,ie*.6);return{background:V,boxShadow:B===0?`0 0 0 2px color-mix(in oklab, ${V}, #ffffff 60%)`:void 0}},C=B=>{if(p.value!=="date")return"";const E=n.value[B],U=((E==null?void 0:E.offset)??0)===0;return(E==null?void 0:E.label)||U&&t.rangeLabel||""},h=B=>!!C(B),k=B=>{var U;if(p.value!=="offset")return"";const E=((U=n.value[B])==null?void 0:U.offset)??B;return E===0?"Current":`-${E}`},v=B=>{var R;if(p.value!=="date")return"";const E=C(B);return E||((((R=n.value[B])==null?void 0:R.offset)??B)===0&&t.rangeLabel?t.rangeLabel:"")};function S(B){const E=new Date(Date.UTC(B.getFullYear(),B.getMonth(),B.getDate())),U=E.getUTCDay()||7;E.setUTCDate(E.getUTCDate()+4-U);const R=new Date(Date.UTC(E.getUTCFullYear(),0,1));return Math.ceil(((E.getTime()-R.getTime())/864e5+1)/7)}const N=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"2-digit"});function A(B,E){const U=new Date(B);return U.setDate(U.getDate()+E),U}function $(B,E){const U=new Date(B);return U.setMonth(U.getMonth()+E),U}function T(B){return new Date(B.getFullYear(),B.getMonth()+1,0)}function j(B){return B?/^-\d+\s*wk$/i.test(B.trim()):!0}function L(B,E){if(!B||!E)return"";const U=N.format(B),R=N.format(E);return U===R?U:`${U}${R}`}function F(B){var z,fe;const E=((z=n.value[B])==null?void 0:z.offset)??B;if(!t.from||!t.to){const G=(fe=n.value[B])==null?void 0:fe.label;return j(G)?"":G||""}const U=(t.rangeMode||"").toLowerCase(),R=new Date(t.from),ie=new Date(t.to);if(Number.isNaN(R.getTime())||Number.isNaN(ie.getTime()))return"";if(U==="month"){const G=$(R,-E),P=T(G);return L(G,P)}const V=A(R,-7*E),J=A(ie,-7*E);return L(V,J)}function W(B){var z;const E=((z=n.value[B])==null?void 0:z.offset)??B,U=(t.rangeMode||"").toLowerCase();if(!t.from)return E===0?"Current":`- ${E} wk`;const R=U==="month"?$(new Date(t.from),-E):A(new Date(t.from),-7*E);if(Number.isNaN(R.getTime()))return E===0?"Current":`- ${E} wk`;if(U==="month"){R.getMonth()+1;const fe=new Date(R),G=new Date(t.from).getMonth()+1;return`MONTH ${E===0?G:fe.getMonth()+1}`}const ie=S(R),V=S(new Date(t.from));return`WEEK ${E===0?V:ie}`}return(B,E)=>(w(),_("div",{class:"balance-card",style:Be(d.value)},[l("div",{class:Te(["header",{compact:f.value}])},[l("div",_w,[l("span",Cw,D(o.value),1)]),B.overview?(w(),_("div",{key:0,class:Te(["index",{centered:f.value}])},[l("div",Sw,D(g(B.overview.index)),1),E[0]||(E[0]=l("div",{class:"index-label"},"Balance index",-1))],2)):q("",!0)],2),B.showTrend&&r.value?(w(),_("div",$w,[l("div",{class:"trend-line",style:Be(m.value)},[(w(!0),_(de,null,Ce(n.value,(U,R)=>(w(),_("div",{key:R,class:Te(["trend-block",{current:R===n.value.length-1,"no-range":!h(R)}]),title:U.label||"",style:Be(x(R))},[l("div",Mw,[l("span",Aw,D(g(U.index)),1),l("span",Dw,D(p.value==="date"?F(R)||v(R):""),1),l("span",Ew,[p.value==="period"?(w(),_(de,{key:0},[Ae(D(W(R)),1)],64)):p.value==="offset"?(w(),_(de,{key:1},[Ae(D(k(R)),1)],64)):q("",!0)])])],14,Tw))),128))],4)])):q("",!0),B.showMessages&&s.value.length?(w(),_("div",Ow,[E[1]||(E[1]=l("div",{class:"section-title"},"Messages",-1)),l("ul",null,[(w(!0),_(de,null,Ce(s.value,(U,R)=>(w(),_("li",{key:R},D(U),1))),128))])])):q("",!0),B.showConfig?(w(),_("div",Nw,[l("div",null,"Basis: "+D(c.value.basis),1),l("div",null,"Notice : +"+D(c.value.noticeAbove??"")+" / -"+D(c.value.noticeBelow??""),1),l("div",null,"Warn : +"+D(c.value.warnAbove??"")+" / -"+D(c.value.warnBelow??""),1),l("div",null,"Warn index: "+D(c.value.warnIndex??""),1)])):q("",!0),B.overview?q("",!0):(w(),_("div",Lw,"No balance data."))],4))}}),[["__scopeId","data-v-10378521"]])},Symbol.toStringTag,{value:"Module"})),Bw={class:"mix-header"},Pw={class:"mix-title"},Fw={class:"mix-subtitle"},Ww={key:0,class:"mix-badge"},Hw={class:"mix-column-label mix-column-label--current"},Rw={key:1,class:"mix-list"},zw={class:"mix-label"},jw=["title"],Uw={class:"mix-cell__value"},Vw={key:2,class:"hint"},Kw=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"CategoryMixTrendCard",props:{overview:{},rangeMode:{},lookbackWeeks:{},showBadge:{type:Boolean},title:{},cardBg:{},toneLowColor:{},toneHighColor:{}},setup(e){const t=e,o=O(()=>{var $,T;return t.showBadge===!1?"":((T=($=t.overview)==null?void 0:$.trend)==null?void 0:T.badge)??""}),a=O(()=>t.rangeMode==="month"?"MO":"WE"),n=O(()=>`CU. ${a.value}`),r=O(()=>Math.max(1,Math.min(4,t.lookbackWeeks||1))),i=O(()=>t.title||"Category mix trend"),s=O(()=>({background:t.cardBg||void 0})),d=O(()=>{var T,j,L;const $=((j=(T=t.overview)==null?void 0:T.trend)==null?void 0:j.history)??((L=t.overview)==null?void 0:L.trendHistory)??[];return Array.isArray($)?$.map(F=>({offset:Number((F==null?void 0:F.offset)??(F==null?void 0:F.step)??0)||0,label:String((F==null?void 0:F.label)??""),categories:Array.isArray(F==null?void 0:F.categories)?F.categories.map(W=>({id:String((W==null?void 0:W.id)??""),label:String((W==null?void 0:W.label)??""),share:Number((W==null?void 0:W.share)??0)||0})):[]})).filter(F=>F.offset>0):[]}),c=$=>`-${$} ${a.value}`,f=O(()=>{if(!t.overview)return[];const $=r.value,T=new Map;return d.value.forEach(j=>{const L=Math.max(1,Math.min(12,Math.round(j.offset)));if(!L||L>$)return;const F={};j.categories.forEach(W=>{W.id&&(F[W.id]=Number.isFinite(W.share)?W.share:0)}),T.set(L,{offset:L,label:c(L),shares:F})}),Array.from(T.values()).sort((j,L)=>L.offset-j.offset)}),g=O(()=>f.value.length+1),b=O(()=>({gridTemplateColumns:`52px repeat(${Math.max(g.value,1)}, minmax(32px, 1fr))`})),p=O(()=>{const $=h(t.toneLowColor)||"#e11d48",T=h(t.toneHighColor)||"#10b981",j=k($,T,.5);return{down:N($),flat:N(j),up:N(T)}}),m=$=>$>1?"up":$<-1?"down":"flat",u=O(()=>t.overview?(t.overview.categories??[]).map(T=>{const j=f.value.map(B=>({label:B.label,share:B.shares[T.id]??0,isCurrent:!1})),L=typeof T.share=="number"?T.share:0,F=[...j,{label:n.value,share:L,isCurrent:!0}],W=F.map((B,E)=>{const U=E===0?B.share:F[E-1].share,R=B.share-U;return{label:B.label,share:B.share,isCurrent:!!B.isCurrent,trend:E===0?"flat":m(R)}});return{id:T.id,label:T.label,cells:W}}):[]),x=O(()=>{var T;const $=r.value;if($>1){const j=t.rangeMode==="month"?"months":"weeks";return`History  last ${$} ${j}`}return $===1&&f.value.length?((T=f.value[f.value.length-1])==null?void 0:T.label)||c(1):c($||1)}),C=$=>`${Math.max(0,Math.round($))}%`;function h($){if(!$||typeof $!="string")return null;const T=$.trim();return/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(T)?T:null}function k($,T,j=.5){const L=v($),F=v(T);if(!L||!F)return $;const W=A(Math.round(L.r+(F.r-L.r)*j),0,255),B=A(Math.round(L.g+(F.g-L.g)*j),0,255),E=A(Math.round(L.b+(F.b-L.b)*j),0,255);return`rgb(${W}, ${B}, ${E})`}function v($){const T=$.replace("#","");if(T.length===3){const[j,L,F]=T.split("").map(W=>parseInt(W.repeat(2),16));return{r:j,g:L,b:F}}if(T.length===6){const j=parseInt(T.slice(0,2),16),L=parseInt(T.slice(2,4),16),F=parseInt(T.slice(4,6),16);return{r:j,g:L,b:F}}return null}function S($){const T=v($);return T?(.2126*T.r+.7152*T.g+.0722*T.b)/255:0}function N($){const T=S($)>.6?"#0f172a":"#fff";return{background:$,color:T}}function A($,T,j){return Math.min(j,Math.max(T,$))}return($,T)=>(w(),_("div",{class:"card mix-card",style:Be(s.value)},[l("div",Bw,[l("div",null,[l("div",Pw,D(i.value),1),l("div",Fw,D(x.value),1)]),o.value?(w(),_("span",Ww,D(o.value),1)):q("",!0)]),f.value.length||u.value.length?(w(),_("div",{key:0,class:"mix-columns",style:Be(b.value)},[T[0]||(T[0]=l("span",{class:"mix-column-label mix-column-label--label"},"CAT",-1)),(w(!0),_(de,null,Ce(f.value,j=>(w(),_("span",{key:`col-${j.offset}`,class:"mix-column-label"},D(j.label),1))),128)),l("span",Hw,D(n.value),1)],4)):q("",!0),u.value.length?(w(),_("ul",Rw,[(w(!0),_(de,null,Ce(u.value,j=>(w(),_("li",{key:j.id,class:"mix-row"},[l("span",zw,D(j.label)+":",1),l("div",{class:"mix-cells",style:Be(b.value)},[(w(!0),_(de,null,Ce(j.cells,(L,F)=>(w(),_("div",{key:`${j.id}-cell-${F}`,class:Te(["mix-cell",[`mix-cell--trend-${L.trend}`,{"mix-cell--current":L.isCurrent}]]),style:Be({"--mix-bg":p.value[L.trend].background,"--mix-fg":p.value[L.trend].color,background:p.value[L.trend].background,color:p.value[L.trend].color}),title:`${j.label}  ${L.label}  ${C(L.share)}`},[l("span",Uw,D(C(L.share)),1)],14,jw))),128))],4)]))),128))])):(w(),_("div",Vw,"No category mix history."))],4))}}),[["__scopeId","data-v-d71ef484"]])},Symbol.toStringTag,{value:"Module"})),qw={class:"dayoff-card__header"},Gw={key:0,class:"pill"},Jw={key:0,class:"dayoff-heatmap"},Yw=["title"],Zw={class:"dayoff-tile__label"},Xw={class:"dayoff-tile__value"},Qw={class:"dayoff-tile__meta"},ex={key:1,class:"hint"},tx=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"DayOffTrendCard",props:{trend:{},unit:{},lookback:{},title:{},cardBg:{},toneLowColor:{},toneHighColor:{}},setup(e){const t=e,o=O(()=>{const h=typeof t.lookback=="number"?t.lookback:null;if(h!=null)return Math.max(0,Math.min(12,Math.floor(h)));const k=(t.trend??[]).filter(v=>Number((v==null?void 0:v.offset)??0)>0);return Math.max(0,Math.min(12,k.length))}),a=O(()=>{const h=Array.isArray(t.trend)?t.trend:[],k=new Map;h.forEach(T=>{const j=Number((T==null?void 0:T.offset)??0)||0;k.set(j,{offset:j,label:(T==null?void 0:T.label)??"",from:(T==null?void 0:T.from)??"",to:(T==null?void 0:T.to)??"",totalDays:Number((T==null?void 0:T.totalDays)??(T==null?void 0:T.total_days)??0)||0,daysOff:Number((T==null?void 0:T.daysOff)??(T==null?void 0:T.days_off)??0)||0,daysWorked:Number((T==null?void 0:T.daysWorked)??(T==null?void 0:T.days_worked)??0)||0})});const v=t.unit==="mo"?"mo":"wk",S=t.unit==="mo"?"This month":"This week",N=[],A=k.get(0)??{offset:0,label:S,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};N.push(A);const $=o.value;for(let T=1;T<=$;T+=1){const j=k.get(T)??{offset:T,label:`-${T} ${v}`,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};N.push(j)}return N}),n=O(()=>a.value.map(h=>{const k=Math.max(0,Number(h.totalDays)||0),v=Math.max(0,Math.min(k,Number(h.daysOff)||0)),S=k>0?v/k:0;return{...h,share:S,tone:g(S)}})),r=O(()=>{const h=o.value;if(h<=0)return"";const k=t.unit==="mo"?"month":"week";return`Last ${h} ${h===1?k:`${k}s`}`}),i=O(()=>t.title||"Days off trend"),s=O(()=>({background:t.cardBg||void 0})),d=O(()=>{const h=b(t.toneLowColor)||"#dc2626",k=b(t.toneHighColor)||"#16a34a",v=p(h,k,.5);return{low:x(h),mid:x(v),high:x(k)}});function c(h){const k=Math.max(0,Math.min(1,h));return`${Math.round(k*100)}% off`}function f(h){const k=d.value[h];return{"--tile-bg":k.background,"--tile-fg":k.color,background:k.background,color:k.color}}function g(h){return h>=.5?"high":h>=.25?"mid":"low"}function b(h){if(!h||typeof h!="string")return null;const k=h.trim();return/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(k)?k:null}function p(h,k,v=.5){const S=m(h),N=m(k);if(!S||!N)return h;const A=C(Math.round(S.r+(N.r-S.r)*v),0,255),$=C(Math.round(S.g+(N.g-S.g)*v),0,255),T=C(Math.round(S.b+(N.b-S.b)*v),0,255);return`rgb(${A}, ${$}, ${T})`}function m(h){const k=h.replace("#","");if(k.length===3){const[v,S,N]=k.split("").map(A=>parseInt(A.repeat(2),16));return{r:v,g:S,b:N}}if(k.length===6){const v=parseInt(k.slice(0,2),16),S=parseInt(k.slice(2,4),16),N=parseInt(k.slice(4,6),16);return{r:v,g:S,b:N}}return null}function u(h){const k=m(h);return k?(.2126*k.r+.7152*k.g+.0722*k.b)/255:0}function x(h){const k=u(h)>.6?"#0f172a":"#fff";return{background:h,color:k}}function C(h,k,v){return Math.min(v,Math.max(k,h))}return(h,k)=>(w(),_("div",{class:"card dayoff-card",style:Be(s.value)},[l("div",qw,[l("span",null,D(i.value),1),r.value?(w(),_("span",Gw,D(r.value),1)):q("",!0)]),n.value.length?(w(),_("div",Jw,[(w(!0),_(de,null,Ce(n.value,v=>(w(),_("div",{key:v.offset,class:Te(["dayoff-tile",[`dayoff-tile--${v.tone}`,{"dayoff-tile--current":v.offset===0}]]),style:Be(f(v.tone)),title:`${v.label}  ${c(v.share)}`},[l("div",Zw,D(v.label),1),l("div",Xw,D(c(v.share)),1),l("div",Qw,D(v.daysOff)+" off  "+D(v.daysWorked)+" on ",1)],14,Yw))),128))])):(w(),_("div",ex,"No day-off history for this range."))],4))}}),[["__scopeId","data-v-252bd4c8"]])},Symbol.toStringTag,{value:"Module"})),ox={class:"deck-summary-card__header"},ax={class:"deck-summary-card__title"},nx={class:"deck-summary-card__subtitle"},rx={class:"deck-summary-card__meta"},sx={key:0},ix={key:1},lx={key:0,class:"deck-summary-card__loading"},dx={key:1,class:"deck-summary-card__error"},cx={key:2,class:"deck-summary-card__empty"},ux={class:"deck-summary-card__row-head"},fx={class:"bucket-label"},px={class:"bucket-count"},gx={class:"deck-summary-card__row-body"},mx={class:"bucket-titles"},hx={key:0,class:"bucket-title bucket-title--muted"},vx=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"DeckSummaryCard",props:{buckets:{},rangeLabel:{},loading:{type:Boolean},error:{},ticker:{},showBoardBadges:{type:Boolean},title:{},cardBg:{}},setup(e){const t=e,o=Z(0),a=Z(!1);let n=null;const r=O(()=>t.buckets.some(p=>p.count>0)),i=O(()=>t.title||"Deck summary"),s=O(()=>({background:t.cardBg||void 0}));function d(p){if(!p.titles.length)return[];const m=t.ticker.autoScroll?o.value%p.titles.length:0,u=Math.min(4,p.titles.length),x=[];for(let C=0;C<u;C+=1){const h=(m+C)%p.titles.length;x.push(p.titles[h])}return x}function c(){n&&(clearInterval(n),n=null)}function f(){if(c(),!t.ticker.autoScroll)return;const p=Math.max(3e3,Math.min(1e4,(t.ticker.intervalSeconds||5)*1e3));n=setInterval(()=>{a.value||(o.value+=1)},p)}function g(){a.value=!0}function b(){a.value=!1}return Le(()=>[t.ticker.autoScroll,t.ticker.intervalSeconds],()=>{f()},{immediate:!0}),Rt(()=>{c()}),(p,m)=>(w(),_("div",{class:"card deck-summary-card",style:Be(s.value)},[l("div",ox,[l("div",null,[l("div",ax,D(i.value),1),l("div",nx,"Showing "+D(p.rangeLabel.toLowerCase())+" selection",1)]),l("div",rx,[p.ticker.autoScroll?(w(),_("span",sx,"Auto-scroll  "+D(p.ticker.intervalSeconds)+"s",1)):(w(),_("span",ix,"Auto-scroll off"))])]),p.loading?(w(),_("div",lx,[Se(y(pr),{size:18}),m[0]||(m[0]=l("span",null,"Loading Deck cards",-1))])):p.error?(w(),_("div",dx,D(p.error),1)):r.value?(w(),_("ul",{key:3,class:"deck-summary-card__rows",onMouseenter:g,onMouseleave:b},[(w(!0),_(de,null,Ce(p.buckets,u=>(w(),_("li",{key:u.key,class:"deck-summary-card__row"},[l("div",ux,[l("span",fx,D(u.label),1),l("span",px,D(u.count),1)]),l("div",gx,[p.showBoardBadges&&u.board?(w(),_("span",{key:0,class:"bucket-board",style:Be({borderColor:u.board.color||"var(--brand)"})},D(u.board.title),5)):q("",!0),l("div",mx,[u.titles.length===0?(w(),_("span",hx,"No cards")):(w(!0),_(de,{key:1},Ce(d(u),(x,C)=>(w(),_("span",{key:`${u.key}-${C}-${x}`,class:"bucket-title"},D(x),1))),128))])])]))),128))],32)):(w(),_("div",cx," No Deck data "))],4))}}),[["__scopeId","data-v-cad91ee6"]])},Symbol.toStringTag,{value:"Module"})),bx=Object.freeze(Object.defineProperty({__proto__:null,default:Ee({__name:"DeckCardsWidget",props:{cards:{},rangeLabel:{},from:{},to:{},uid:{},deckUrl:{},lastFetchedAt:{},loading:{type:Boolean},error:{},boardIds:{},filters:{},defaultFilter:{},allowMine:{type:Boolean},mineMode:{},includeArchived:{type:Boolean},includeCompleted:{type:Boolean},autoScroll:{type:Boolean},intervalSeconds:{},showCount:{type:Boolean}},emits:["refresh"],setup(e){const t=e,o=["all","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","created_today_all","created_today_mine"],a=O(()=>{const u=(t.filters&&t.filters.length?t.filters:o).filter(Boolean),x={all:"All cards",mine:"Mine (any status)",open_all:"Open  All",open_mine:"Open  Mine",done_all:"Done  All",done_mine:"Done  Mine",archived_all:"Archived  All",archived_mine:"Archived  Mine",created_today_all:"Created today  All",created_today_mine:"Created today  Mine",created_range_all:"Created this range  All",created_range_mine:"Created this range  Mine"};return u.map(C=>({value:C,label:x[C]||C,mine:C.endsWith("_mine")||C==="mine"}))}),n=Z(c());Le(()=>t.defaultFilter,()=>{n.value=c()});const r=O(()=>{const u=(t.boardIds||[]).map(x=>Number(x)).filter(x=>Number.isInteger(x));return new Set(u)}),i=O(()=>a.value.length>1),s=O(()=>t.allowMine!==!1&&!!(t.uid||"").trim()),d=O(()=>{const x=(t.cards||[]).filter(S=>r.value.size?S.boardId!=null&&r.value.has(Number(S.boardId)):!0).filter(S=>(t.includeArchived!==!1||S.status!=="archived")&&(t.includeCompleted!==!1||S.status!=="done")),C=n.value,h=g(t.uid||"",t.mineMode||"assignee"),k=t.includeArchived!==!1,v=t.includeCompleted!==!1;if(C==="all")return x;if(C==="mine")return x.filter(S=>h(S));if(C.startsWith("created_today"))return x.filter(S=>(C.endsWith("_mine")?h(S):!0)&&p(S));if(C.startsWith("created_range"))return x.filter(S=>(C.endsWith("_mine")?h(S):!0)&&m(S,t.from,t.to));if(C.includes("_")){const[S,N]=C.split("_");return x.filter(A=>{const $=b(A,S,k,v),T=N==="all"?!0:h(A);return $&&T})}return x});function c(){const u=a.value.map(C=>C.value),x=t.defaultFilter||u[0]||"all";return u.includes(x)?x:u[0]||"all"}function f(u){n.value=u}function g(u,x){const C=u.trim().toLowerCase();return h=>{if(!C)return!1;const k=(h.assignees||[]).some(N=>typeof N.uid=="string"&&N.uid.toLowerCase()===C),v=typeof h.createdBy=="string"&&h.createdBy.trim().toLowerCase()===C,S=typeof h.doneBy=="string"&&h.doneBy.trim().toLowerCase()===C;return x==="creator"?v||S:x==="assignee"?k||S:k||v||S}}function b(u,x,C,h){return x==="open"?u.status==="active":x==="archived"?u.status==="archived":x==="done"&&h?u.status==="done"?!0:C&&u.status==="archived"&&h:!1}function p(u){if(!u.createdTs)return!1;const x=new Date,C=new Date(x.getFullYear(),x.getMonth(),x.getDate()).getTime(),h=C+24*60*60*1e3;return u.createdTs>=C&&u.createdTs<h}function m(u,x,C){if(!u.createdTs||!x||!C)return!1;const h=Date.parse(x),k=Date.parse(C);return!Number.isFinite(h)||!Number.isFinite(k)?!1:u.createdTs>=h&&u.createdTs<=k}return(u,x)=>(w(),Je(Sl,{cards:d.value,loading:u.loading,"range-label":u.rangeLabel,"last-fetched-at":u.lastFetchedAt,"deck-url":u.deckUrl,error:u.error,filter:n.value,"filters-enabled":i.value,"can-filter-mine":s.value,"allow-mine-override":s.value,"filter-options":a.value,"auto-scroll":t.autoScroll!==!1,"interval-seconds":t.intervalSeconds,"show-count":t.showCount!==!1,onRefresh:x[0]||(x[0]=C=>u.$emit("refresh")),"onUpdate:filter":f},null,8,["cards","loading","range-label","last-fetched-at","deck-url","error","filter","filters-enabled","can-filter-mine","allow-mine-override","filter-options","auto-scroll","interval-seconds","show-count"]))}})},Symbol.toStringTag,{value:"Module"})),yx={class:"note-header"},kx={class:"title"},wx=["disabled"],xx={class:"field"},_x={class:"label"},Cx=["value"],Sx={class:"field"},$x={class:"label"},Tx=["value","disabled"],Mx=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"NoteEditorWidget",props:{previous:{},modelValue:{},prevLabel:{},currLabel:{},saving:{type:Boolean},title:{},cardBg:{}},emits:["update:modelValue","save"],setup(e,{emit:t}){const o=e,a=t,n=o.title||"Notes",r=o.prevLabel||"Previous",i=o.currLabel||"Current",s={background:o.cardBg||void 0};function d(f){a("update:modelValue",f.target.value)}function c(){a("save")}return(f,g)=>(w(),_("div",{class:"note-card",style:s},[l("div",yx,[l("div",kx,D(y(n)),1),l("button",{class:"btn",type:"button",disabled:f.saving,onClick:c},"Save",8,wx)]),l("label",xx,[l("span",_x,D(y(r)),1),l("textarea",{class:"note",value:f.previous,readonly:""},null,8,Cx)]),l("label",Sx,[l("span",$x,D(y(i)),1),l("textarea",{class:"note",value:f.modelValue,disabled:f.saving,onInput:d},null,40,Tx)])]))}}),[["__scopeId","data-v-68087d2d"]])},Symbol.toStringTag,{value:"Module"})),Ax={key:0,class:"body"},Dx={key:1,class:"body empty"},Ex=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"NoteSnippetWidget",props:{notesCurr:{},notesPrev:{},title:{},cardBg:{}},setup(e){const t=e,o=O(()=>{const r=(t.notesCurr||"").trim();return r||(t.notesPrev||"").trim()||""}),a=O(()=>t.title||"Note"),n=O(()=>({background:t.cardBg||void 0}));return(r,i)=>(w(),_("div",{class:"text-card",style:Be(n.value)},[l("h3",null,D(a.value),1),o.value?(w(),_("p",Ax,D(o.value),1)):(w(),_("p",Dx,""))],4))}}),[["__scopeId","data-v-26f50d1f"]])},Symbol.toStringTag,{value:"Module"})),Ox=["title"],Nx=["value","aria-label"],Lx=["title"],Ix=["value","placeholder","aria-label"],Bx={class:"notes-actions"},Px=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"NotesPanel",props:{previous:{},modelValue:{},prevLabel:{},currLabel:{},prevTitle:{},currTitle:{},saving:{type:Boolean},cardBg:{}},emits:["update:modelValue","save"],setup(e){const t=e,o=O(()=>({background:t.cardBg||void 0}));return(a,n)=>(w(),_("div",{class:"notes-section",style:Be(o.value)},[l("div",{class:"hint",title:a.prevTitle},D(a.prevLabel),9,Ox),l("textarea",{value:a.previous,readonly:"",rows:"5",class:"notes-textarea","aria-label":y(Vt)("Previous notes")},null,8,Nx),l("div",{class:"hint",title:a.currTitle},D(a.currLabel),9,Lx),l("textarea",{value:a.modelValue,onInput:n[0]||(n[0]=r=>a.$emit("update:modelValue",r.target.value)),rows:"5",class:"notes-textarea notes-textarea--editable",placeholder:y(Vt)("Write your notes"),"aria-label":y(Vt)("Current notes")},null,40,Ix),l("div",Bx,[Se(y(et),{type:"tertiary",disabled:a.saving,onClick:n[1]||(n[1]=r=>a.$emit("save"))},{default:je(()=>[Ae(D(y(Vt)("Save")),1)]),_:1},8,["disabled"])])],4))}}),[["__scopeId","data-v-893077b2"]])},Symbol.toStringTag,{value:"Module"})),Fx={class:"targets-header"},Wx={key:0,class:"hint"},Hx={class:"targets-main"},Rx={class:"line total-line"},zx={class:"value"},jx={key:0,class:"line"},Ux={key:1,class:"line"},Vx={key:2,class:"line forecast"},Kx={class:"hint"},qx={key:0,class:"targets-badges"},Gx={key:1,class:"targets-categories"},Jx={class:"cat-top"},Yx={class:"cat-label"},Zx={class:"name"},Xx={class:"cat-meta"},Qx={class:"percent"},e_={class:"cat-progress"},t_={class:"bar"},o_={class:"today-label"},a_={class:"cat-metrics"},n_={class:"hint"},r_={key:1,class:"hint"},s_={key:0,class:"cat-footer"},i_={class:"hint"},od=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"TimeTargetsCard",props:{summary:{},config:{},groups:{},showPace:{type:Boolean,default:!0},showForecast:{type:Boolean,default:!0},title:{default:"Targets"},cardBg:{default:null}},setup(e){const t=e,o=O(()=>{var p;return((p=t.summary)==null?void 0:p.total)??c("total","Total")}),a=O(()=>{var m;return Array.isArray(t.groups)&&t.groups.length?t.groups.map(u=>({id:u.id,label:u.label,summary:u.summary??c(u.id,u.label),color:u.color,rows:u.rows})):(((m=t.summary)==null?void 0:m.categories)??[]).map(u=>({id:u.id,label:u.label,summary:u,color:void 0,rows:[]}))}),n=O(()=>({background:t.cardBg||void 0})),r=O(()=>a.value.map(p=>{const m=p.summary??c(p.id,p.label),u=Number(p.todayHours??0),x=m.targetHours,C=Math.max(0,m.actualHours-x),h=Math.min(C,u),k=x>0?u/x*100:0,v=f(m.percent,0,200);return{id:p.id,label:p.label||m.label,actualHours:m.actualHours,targetHours:x,percent:m.percent,deltaHours:m.deltaHours,needPerDay:m.needPerDay,daysLeft:m.daysLeft,calendarPercent:m.calendarPercent,gap:m.gap,status:m.status,statusLabel:m.statusLabel,color:p.color,calendarCount:Array.isArray(p.rows)?p.rows.length:0,progress:v,todayHours:u,overToday:h,todayWidth:x>0?f(k,2,200):0,todayRight:Math.max(0,100-v),chipLeft:Math.min(100,v),chipText:h>0?`Today ${i(u)} (+${i(h)})`:`Today ${i(u)}`,todayColor:p.color?b(p.color,.65):"var(--brand)",todayBorder:p.color?b(p.color,.35,!0):"var(--brand)",calendarLabel:Array.isArray(p.rows)&&p.rows.length===1?"calendar":"calendars"}}).filter(p=>p.targetHours>0||p.actualHours>0||p.calendarCount>0));function i(p){if(!isFinite(p))return"0";const m=Math.round(p*10)/10;return Math.abs(m-Math.round(m))<.05?String(Math.round(m)):m.toFixed(1)}function s(p){return!isFinite(p)||Math.abs(p)<.005?"0.0":(p>=0?"+":"")+i(Math.abs(p))}function d(p){switch(p){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function c(p,m){return{id:p,label:m,actualHours:0,targetHours:0,percent:0,deltaHours:0,remainingHours:0,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"}}function f(p,m,u){return!isFinite(p)||p<m?m:p>u?u:p}function g(p){return p==="momentum"?"Momentum":"Linear"}function b(p,m=.5,u=!1){const x=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(p||"");if(!x)return p;const C=parseInt(x[1],16),h=parseInt(x[2],16),k=parseInt(x[3],16),v=Math.max(0,Math.min(1,m));return u?`rgb(${Math.round(C*(1-v))},${Math.round(h*(1-v))},${Math.round(k*(1-v))})`:`rgb(${Math.round(C+(255-C)*v)},${Math.round(h+(255-h)*v)},${Math.round(k+(255-k)*v)})`}return(p,m)=>(w(),_("div",{class:"card targets-card",style:Be(n.value)},[l("div",Fx,[l("strong",null,D(p.title||"Targets"),1),o.value.targetHours>0?(w(),_("span",Wx,D(o.value.percent.toFixed(0))+"%",1)):q("",!0)]),l("div",Hx,[l("div",Rx,[l("span",zx,[l("strong",null,D(i(o.value.actualHours)),1),Ae(" / "+D(i(o.value.targetHours))+" h",1)]),p.config.ui.showTotalDelta&&o.value.targetHours>0?(w(),_("span",{key:0,class:Te(["delta",o.value.deltaHours>=0?"pos":"neg"])},"  "+D(s(o.value.deltaHours))+"h ",3)):q("",!0)]),p.config.ui.showNeedPerDay&&o.value.targetHours>0?(w(),_("div",jx," Days left "+D(o.value.daysLeft)+"  Need "+D(i(o.value.needPerDay))+" h/day ",1)):q("",!0),p.showPace&&o.value.targetHours>0?(w(),_("div",Ux,[Ae(" Pace: "+D(o.value.percent.toFixed(0))+"% vs "+D(o.value.calendarPercent.toFixed(0))+"%  ",1),l("span",{class:Te(["status-label",d(o.value.status)])},D(o.value.statusLabel),3)])):q("",!0),p.showForecast?(w(),_("div",Vx,[Ae(" Forecast: "+D(p.summary.forecast.text)+" ",1),l("span",Kx," Linear "+D(i(p.summary.forecast.linear))+"h  Momentum "+D(i(p.summary.forecast.momentum))+"h  Primary: "+D(g(p.summary.forecast.primaryMethod)),1)])):q("",!0)]),p.config.ui.badges&&o.value.targetHours>0?(w(),_("div",qx,[l("span",{class:Te(["badge",d(o.value.status)])},D(o.value.statusLabel),3)])):q("",!0),p.config.ui.showCategoryBlocks&&r.value.length?(w(),_("div",Gx,[(w(!0),_(de,null,Ce(r.value,u=>(w(),_("div",{class:"category",key:u.id},[l("div",Jx,[l("div",Yx,[l("span",{class:"dot",style:Be({background:u.color||"var(--brand)"})},null,4),l("span",Zx,D(u.label),1)]),l("div",Xx,[l("span",Qx,D(u.percent.toFixed(0))+"%",1),p.config.ui.badges&&u.targetHours>0?(w(),_("span",{key:0,class:Te(["badge",d(u.status)])},D(u.statusLabel),3)):q("",!0)])]),l("div",e_,[l("div",t_,[l("div",{class:"fill",style:Be({width:u.progress+"%",background:u.color||"var(--brand)"})},null,4),u.todayWidth>0?(w(),_("div",{key:0,class:"today-overlay",style:Be({width:u.todayWidth+"%",right:u.todayRight+"%",background:u.todayColor,borderColor:u.todayBorder})},null,4)):q("",!0),u.todayWidth>0?(w(),_("div",{key:1,class:"today-chip",style:Be({left:u.chipLeft+"%",background:u.todayColor,borderColor:u.todayBorder})},[l("span",o_,D(u.chipText),1)],4)):q("",!0)])]),l("div",a_,[l("strong",null,D(i(u.actualHours))+"h",1),l("span",n_,"/ "+D(i(u.targetHours))+"h",1),u.targetHours>0?(w(),_("span",{key:0,class:Te(["delta",u.deltaHours>=0?"pos":"neg"])},"  "+D(s(u.deltaHours))+"h ",3)):q("",!0),p.config.ui.showNeedPerDay&&u.targetHours>0?(w(),_("span",r_," Need "+D(i(u.needPerDay))+"h/day  "+D(u.daysLeft)+" days left ",1)):q("",!0)]),u.calendarCount>0?(w(),_("div",s_,[l("span",i_,D(u.calendarCount)+" "+D(u.calendarLabel),1)])):q("",!0)]))),128))])):q("",!0)],4))}}),[["__scopeId","data-v-4ca3e5c0"]])},Symbol.toStringTag,{value:"Module"})),l_={key:0},d_={key:1,class:"body"},c_={key:0,class:"label"},u_={key:1,class:"value"},f_=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"TextBlockWidget",props:{title:{},body:{},textSize:{},dense:{type:Boolean},items:{}},setup(e){const t=e,o=O(()=>t.textSize??"md"),a=O(()=>t.dense??!1),n=O(()=>t.title??""),r=O(()=>t.body??""),i=O(()=>t.items??[]);return(s,d)=>(w(),_("div",{class:Te(["text-card",[`text-${o.value}`,{dense:a.value}]])},[n.value?(w(),_("h3",l_,D(n.value),1)):q("",!0),r.value?(w(),_("p",d_,D(r.value),1)):q("",!0),i.value.length?(w(!0),_(de,{key:2},Ce(i.value,c=>(w(),_("div",{key:c.key,class:"line"},[c.label?(w(),_("span",c_,D(c.label),1)):q("",!0),c.value?(w(),_("span",u_,D(c.value),1)):q("",!0)]))),128)):q("",!0)],2))}}),[["__scopeId","data-v-6a33ad0d"]])},Symbol.toStringTag,{value:"Module"})),p_={class:"time-summary-firstline"},g_={key:0,class:"today-highlight"},m_={class:"today-value"},h_={key:1,class:"today-cats"},v_={class:"name"},b_={class:"value"},y_={class:"time-summary-metrics"},k_={key:0},w_={key:1},x_={key:2},__={key:3},C_={key:4},S_={key:2,class:"time-summary-row"},$_={key:3,class:"time-summary-row"},T_={key:0,class:"share"},M_={key:4,class:"time-summary-row calendars"},A_={class:"label"},D_={class:"text"},E_={key:5,class:"time-summary-row top-category"},O_={class:"text"},N_={key:6,class:"time-summary-row"},L_={key:7,class:"time-summary-activity"},I_={class:"time-summary-activity__line"},B_={class:"time-summary-activity__line"},P_={class:"time-summary-activity__line"},ad=Object.freeze(Object.defineProperty({__proto__:null,default:qe(Ee({__name:"TimeSummaryCard",props:{summary:{},mode:{},config:{},todayGroups:{},title:{},cardBg:{}},setup(e){const t={showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},o=e,a=O(()=>Object.assign({},t,o.config??{})),n=O(()=>o.mode==="active"?"active days":"all days"),r=O(()=>(o.todayGroups||[]).filter(h=>Number(h.todayHours)>0).map(h=>({...h,todayHours:Number(h.todayHours)||0,color:h.color||"var(--brand)"}))),i=O(()=>{var k;if(r.value.length)return r.value.reduce((v,S)=>v+S.todayHours,0);const h=(k=o.summary)==null?void 0:k.todayHours;return typeof h=="number"&&Number.isFinite(h)?h:null}),s=O(()=>o.title||"Time Summary"),d=O(()=>({background:o.cardBg||void 0})),c=O(()=>{if(!a.value.showWeekendShare)return"";const h=o.summary.weekendShare;return h==null?"":`${m(h)}%`}),f=O(()=>{if(!a.value.showTopCategory)return null;const h=o.summary.topCategory;if(!h)return null;const k=u(h.actualHours),v=Number(h.percent??0).toFixed(0),S=h.targetHours>0?` (${v}% of ${u(h.targetHours)} h)`:"";return{text:`${h.label}  ${k} h${S}`,badge:h.statusLabel||"",badgeClass:x(h.status)}}),g=O(()=>{if(!a.value.showBusiest)return"";const h=o.summary.busiest;if(!h||!h.date)return"";const k=Number(h.hours??0);return`Busiest ${h.date}  ${u(k)} h`}),b=O(()=>o.activitySummary??null),p=O(()=>{var h;return((h=b.value)==null?void 0:h.lastDayOff)||""});function m(h){return Number(h??0).toFixed(1)}function u(h){return Number(h??0).toFixed(2)}function x(h){switch(h){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function C(h){return h==null?"0.0%":`${Math.max(0,Math.min(100,Number(h))).toFixed(1)}%`}return(h,k)=>(w(),_("div",{class:"card time-summary compact",style:Be(d.value)},[l("div",p_,[l("em",null,D(s.value)+"  "+D(h.summary.rangeLabel),1)]),i.value!==null?(w(),_("div",g_,[k[0]||(k[0]=l("div",{class:"today-label"},"Today",-1)),l("div",m_,D(u(i.value))+" h",1)])):q("",!0),r.value.length?(w(),_("div",h_,[(w(!0),_(de,null,Ce(r.value,v=>(w(),_("div",{class:"today-cat",key:v.id},[l("span",{class:"dot",style:Be({background:v.color||"var(--brand)"})},null,4),l("span",v_,D(v.label),1),l("span",b_,D(u(v.todayHours))+" h",1)]))),128))])):q("",!0),l("ul",y_,[a.value.showTotal?(w(),_("li",k_,[l("strong",null,D(u(h.summary.totalHours))+" h",1),k[1]||(k[1]=Ae(" total",-1))])):q("",!0),a.value.showAverage?(w(),_("li",w_,[l("strong",null,D(u(h.summary.avgDay))+" h/day",1),Ae(" ("+D(n.value)+")",1)])):q("",!0),a.value.showAverage?(w(),_("li",x_,D(u(h.summary.avgEvent))+" h/event",1)):q("",!0),a.value.showMedian?(w(),_("li",__,D(u(h.summary.medianDay))+" h median/day",1)):q("",!0),a.value.showBusiest&&g.value?(w(),_("li",C_,D(g.value),1)):q("",!0)]),a.value.showWorkday?(w(),_("div",S_,[k[2]||(k[2]=l("span",{class:"label"},"Workdays",-1)),Ae(" "+D(u(h.summary.workdayAvg))+" h avg  "+D(u(h.summary.workdayMedian))+" h median ",1)])):q("",!0),a.value.showWeekend?(w(),_("div",$_,[k[3]||(k[3]=l("span",{class:"label"},"Weekend",-1)),Ae(" "+D(u(h.summary.weekendAvg))+" h avg  "+D(u(h.summary.weekendMedian))+" h median ",1),a.value.showWeekendShare&&c.value?(w(),_("span",T_,"("+D(c.value)+")",1)):q("",!0)])):q("",!0),a.value.showCalendarSummary?(w(),_("div",M_,[l("span",A_,D(h.summary.activeCalendars)+" calendars",1),h.summary.calendarSummary?(w(),_(de,{key:0},[k[4]||(k[4]=l("span",{class:"sep"},"",-1)),l("span",D_,D(h.summary.calendarSummary),1)],64)):q("",!0)])):q("",!0),a.value.showTopCategory&&f.value?(w(),_("div",E_,[k[5]||(k[5]=l("span",{class:"label"},"Top category",-1)),l("span",O_,D(f.value.text),1),f.value.badge?(w(),_("span",{key:0,class:Te(["summary-badge",f.value.badgeClass])},D(f.value.badge),3)):q("",!0)])):q("",!0),a.value.showBalance&&h.summary.balanceIndex!=null?(w(),_("div",N_,[k[6]||(k[6]=l("span",{class:"label"},"Balance",-1)),Ae(" "+D(u(h.summary.balanceIndex))+" ",1),k[7]||(k[7]=l("span",{class:"hint"},"(1 = perfekt)",-1))])):q("",!0),b.value?(w(),_("div",L_,[k[8]||(k[8]=l("div",{class:"time-summary-activity__title"},"Activity & Schedule",-1)),l("div",I_," Events "+D(b.value.events)+"  Active Days "+D(b.value.activeDays??0),1),l("div",B_," Weekend "+D(C(b.value.weekendShare))+"  Evening "+D(C(b.value.eveningShare)),1),l("div",P_," Overlaps "+D(b.value.overlapEvents??0)+"  Last day off "+D(p.value),1)])):q("",!0)],4))}}),[["__scopeId","data-v-a719de3e"]])},Symbol.toStringTag,{value:"Module"}))})();
