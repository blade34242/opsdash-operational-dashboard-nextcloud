(function(){"use strict";var Us=document.createElement("style");Us.textContent=`.sidebar-toggle-btn[data-v-087101c8]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:14px;border:1px solid color-mix(in oklab,var(--brand),transparent 55%);background:color-mix(in oklab,var(--brand),transparent 86%);color:var(--brand);width:26px;height:26px;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 14px #0f172a1f;cursor:pointer;font-size:11px}.sidebar-toggle-btn[data-v-087101c8]:hover{background:color-mix(in oklab,var(--brand),transparent 76%);border-color:color-mix(in oklab,var(--brand),transparent 40%)}.sidebar-toggle-btn[data-v-087101c8]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand),transparent 40%);outline-offset:2px}.app-opsdash #app-navigation,.app-opsdash .app-navigation{position:relative;display:flex;flex-direction:column;height:100%;overflow:visible!important}.app-opsdash .app-content{padding-left:0!important;padding-top:0!important}.app-opsdash .app-content__navigation{padding-left:0!important;padding-top:0!important;margin-left:-4px;overflow:visible!important}.app-opsdash .app-navigation__content{display:flex;flex-direction:column;flex:1;min-height:100%;overflow:visible!important;max-height:none!important}.rangebar[data-v-087101c8]{margin-top:0!important;padding-top:0!important}.sidebar-toggle-btn--corner[data-v-087101c8]{position:absolute;top:-10px;right:-10px;border-color:color-mix(in oklab,var(--brand),var(--line) 70%);background:color-mix(in oklab,var(--card),transparent 10%);box-shadow:0 6px 16px #0f172a1f,inset 0 0 0 1px color-mix(in oklab,var(--brand),transparent 82%)}.sidebar-shortcuts[data-v-087101c8]{margin:8px 0 4px}.sidebar-shortcuts--bottom[data-v-087101c8]{display:flex;flex-direction:column;align-items:center;margin-top:auto;padding-bottom:10px;gap:8px}.onboarding-hint[data-v-087101c8]{margin:1px 0 4px;font-size:11px;line-height:1.2;color:color-mix(in oklab,var(--text),transparent 40%);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar-icon-row[data-v-087101c8]{display:flex;gap:10px;align-items:center;justify-content:center}.sidebar-icon-btn[data-v-087101c8]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:999px;border:1px solid color-mix(in oklab,var(--brand),var(--line) 70%);background:color-mix(in oklab,var(--brand),var(--card) 90%);color:var(--brand);width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;box-shadow:0 6px 14px #0f172a1f;cursor:pointer}.sidebar-icon-btn[data-v-087101c8]:hover{background:color-mix(in oklab,var(--brand),var(--card) 80%);border-color:color-mix(in oklab,var(--brand),var(--line) 50%)}.sidebar-icon-btn.active[data-v-087101c8]{background:color-mix(in oklab,var(--brand),var(--card) 70%);border-color:color-mix(in oklab,var(--brand),var(--line) 40%);box-shadow:0 8px 16px #0f172a29}.sidebar-icon-btn[data-v-087101c8]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand),transparent 40%);outline-offset:2px}.sidebar-icon[data-v-087101c8]{width:20px;height:20px}.sidebar-icon-btn--profile[data-v-087101c8]{width:46px;height:46px}.sidebar-icon--profile[data-v-087101c8]{width:24px;height:24px}.sidebar-block[data-v-087101c8]{margin:8px 0 12px}.sidebar-block--framed[data-v-087101c8]{border:1px solid color-mix(in oklab,var(--brand),var(--line) 70%);border-radius:14px;background:color-mix(in oklab,var(--card),transparent 10%);padding:12px 14px;box-shadow:0 6px 16px #0f172a1f,inset 0 0 0 1px color-mix(in oklab,var(--brand),transparent 82%)}.rerun-btn__icon[data-v-087101c8]{display:inline-flex;margin-right:6px;font-size:12px;line-height:1}.onboarding-jumps[data-v-087101c8]{display:grid;gap:2px;margin:4px 0 2px;padding-left:18px;font-size:12px;color:var(--muted, #6b7280);list-style:decimal;list-style-position:inside}.onboarding-jumps .link[data-v-087101c8]{background:transparent;border:0;padding:0;color:inherit;text-align:left;text-decoration:none;cursor:pointer}.onboarding-jumps .link[data-v-087101c8]:hover{color:var(--color-primary-text);text-decoration:underline}.onboarding-help[data-v-087101c8]{font-size:12px;color:var(--muted, #6b7280);margin-top:2px;margin-bottom:4px}.onboarding-fade-enter-active,.onboarding-fade-leave-active{transition:opacity .2s ease}.onboarding-fade-enter-from,.onboarding-fade-leave-to{opacity:0}.onboarding-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2000;display:flex;align-items:center;justify-content:center;padding:24px}.onboarding-backdrop{position:absolute;top:0;right:0;bottom:0;left:0;background:#0f172a73}.onboarding-panel{position:relative;z-index:1;width:min(960px,100%);max-height:calc(100vh - 48px);background:var(--color-main-background, #fff);border:1px solid color-mix(in oklab,var(--brand, #2563eb),var(--line, #e2e8f0) 70%);border-radius:14px;box-shadow:0 18px 48px #0f172a59,inset 0 0 0 1px color-mix(in oklab,var(--brand, #2563eb),transparent 82%);display:flex;flex-direction:column;padding:24px 28px}.onboarding-panel.theme-light{color:#0f172a;background:#fff}.onboarding-panel.theme-dark{--color-main-background: #0f172a;--color-background-contrast: #111827;--color-text: #e5e7eb;--color-text-maxcontrast: #e5e7eb;--color-text-light: #94a3b8;--color-border: #1f2937;--color-primary-element: #60a5fa;--color-primary: #60a5fa;color:#e5e7eb;background:#0f172a;box-shadow:0 18px 48px #00000080,inset 0 0 0 1px color-mix(in oklab,var(--brand, #60a5fa),transparent 82%)}.onboarding-panel.theme-dark .hint,.onboarding-panel.theme-dark .subtitle,.onboarding-panel.theme-dark .step-pill{color:#94a3b8}.onboarding-panel.theme-dark h2,.onboarding-panel.theme-dark h3,.onboarding-panel.theme-dark h4,.onboarding-panel.theme-dark p,.onboarding-panel.theme-dark li{color:#e5e7eb}.onboarding-panel.theme-dark .step-pill{background:#111827;border-color:#1f2937}.onboarding-panel.theme-dark .step-pill.active{color:#93c5fd;border-color:#60a5fa99;background:#60a5fa2e}.onboarding-panel.theme-dark input,.onboarding-panel.theme-dark select,.onboarding-panel.theme-dark textarea{background:#111827;color:#e5e7eb;border:1px solid #1f2937}.onboarding-panel.theme-dark .calendar-item{background:#0b1220;border-color:#1f2937}.onboarding-panel.theme-dark .category-card,.onboarding-panel.theme-dark .pref-card,.onboarding-panel.theme-dark .strategy-card,.onboarding-panel.theme-dark .mode-card,.onboarding-panel.theme-dark .input-unit,.onboarding-panel.theme-dark .empty-state{background:#111827;border-color:#1f2937}.onboarding-panel.theme-dark .mode-card.active{border-color:#60a5fa99;box-shadow:0 12px 24px #0006}.onboarding-panel.theme-dark .input-unit .unit{background:#0b1220;color:#94a3b8}.onboarding-panel.theme-dark .config-warning{border-color:#fb923c80;background:#fb923c1f}.onboarding-panel.theme-dark .config-warning p{color:#fde68a}.onboarding-panel.theme-dark .snapshot-notice--success{background:#22c55e2e;color:#bbf7d0}.onboarding-panel.theme-dark .snapshot-notice--error{background:#ef444433;color:#fecaca}.onboarding-panel.theme-dark .close-btn{color:#cbd5f5}.onboarding-panel.theme-dark .close-btn:hover{color:#93c5fd}.onboarding-panel.theme-dark .color-popover{background:#0b1220;border-color:#1f2937}.onboarding-panel.theme-dark .color-link{color:#93c5fd}.onboarding-panel.theme-dark .review-grid h5{color:#e2e8f0}.onboarding-panel.theme-dark .warning{background:#f871711f;border-color:#f8717166;color:#fecaca}.onboarding-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:16px}.onboarding-actions{display:flex;align-items:center;gap:12px}.onboarding-title h2{margin:0;font-size:1.6rem}.onboarding-title .subtitle{margin:4px 0 0;color:var(--color-text-light)}.onboarding-overlay .skip-link{background:none;border:none;color:var(--color-primary);cursor:pointer;font-size:.95rem}.onboarding-overlay .close-btn{background:none;border:none;font-size:1.4rem;line-height:1;cursor:pointer;color:var(--color-text-light)}.onboarding-overlay .close-btn:hover{color:var(--color-primary)}.onboarding-step-nav{display:flex;flex-wrap:wrap;gap:8px;margin:0 0 12px}.onboarding-overlay .step-pill{border:1px solid var(--color-border);background:var(--color-background-contrast);padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer;color:var(--color-text)}.onboarding-overlay .step-pill.active{border-color:var(--color-primary);color:var(--color-primary);background:#2563eb14}.onboarding-overlay .step-pill:disabled{opacity:.6;cursor:default}.onboarding-body{flex:1;overflow-y:auto;padding-right:8px;margin-right:-8px}.onboarding-step h3{margin-top:0}.onboarding-overlay .highlights{padding-left:18px}.onboarding-overlay .config-warning{border:1px solid color-mix(in srgb,var(--color-warning, #f97316) 35%,transparent);background:color-mix(in srgb,var(--color-warning, #f97316) 12%,transparent);border-radius:8px;padding:12px;margin:12px 0;display:flex;flex-direction:column;gap:8px}.onboarding-overlay .config-warning p{margin:0;font-size:.95rem;color:var(--color-text)}.onboarding-overlay .hint{color:var(--color-text-light);margin-top:12px}.onboarding-overlay .snapshot-notice{margin-top:12px;padding:10px 12px;border-radius:8px;font-size:.9rem}.onboarding-overlay .snapshot-notice--success{background:color-mix(in srgb,#22c55e 15%,transparent);color:#14532d}.onboarding-overlay .snapshot-notice--error{background:color-mix(in srgb,#ef4444 15%,transparent);color:#7f1d1d}.onboarding-overlay .strategy-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.onboarding-overlay .strategy-card{border:1px solid var(--color-border);border-radius:8px;padding:16px;cursor:pointer;display:flex;flex-direction:column;gap:8px;transition:border-color .15s ease,box-shadow .15s ease}.onboarding-overlay .strategy-card.active{border-color:var(--color-primary);box-shadow:0 0 0 2px #3b82f633}.onboarding-overlay .strategy-card h4{margin:0}.onboarding-overlay .strategy-card .subtitle{color:var(--color-text-light);margin:0}.onboarding-overlay .strategy-card footer{margin-top:auto;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .calendar-list{display:grid;gap:8px;margin-top:8px}.onboarding-overlay .calendar-item{display:grid;grid-template-columns:auto auto 1fr;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--color-border);border-radius:6px}.onboarding-overlay .calendar-item.checked{border-color:var(--color-primary)}.onboarding-overlay .calendar-item input{margin:0}.onboarding-overlay .calendar-item .dot{width:12px;height:12px;border-radius:50%}.onboarding-overlay .warning{color:var(--color-error);margin-top:12px}.onboarding-overlay .review-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .review-grid h5{margin:0 0 8px;font-size:.95rem;color:var(--color-text-light)}.onboarding-overlay .review-profile{display:grid;gap:8px}.onboarding-overlay .onboarding-mode{margin:16px 0}.onboarding-overlay .mode-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .mode-card{border:1px solid var(--color-border);background:var(--color-background-contrast);border-radius:10px;padding:12px 14px;text-align:left;cursor:pointer;display:grid;gap:6px;transition:border-color .2s ease,box-shadow .2s ease,transform .2s ease}.onboarding-overlay .mode-card strong{font-size:.98rem}.onboarding-overlay .mode-card span{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .mode-card.active{border-color:color-mix(in oklab,var(--color-primary),transparent 35%);box-shadow:0 12px 24px #0f172a26;transform:translateY(-1px)}.onboarding-overlay .mode-card:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .categories-editor{display:grid;gap:16px}.onboarding-overlay .category-presets{display:grid;gap:8px;margin-bottom:16px}.onboarding-overlay .preset-grid{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .preset-card{text-align:left;border:1px solid var(--color-border);background:var(--color-background-contrast);border-radius:12px;padding:12px 14px;display:grid;gap:6px;cursor:pointer;transition:border-color .2s ease,box-shadow .2s ease,transform .2s ease}.onboarding-overlay .preset-card:hover{border-color:color-mix(in oklab,var(--color-primary),transparent 40%);box-shadow:0 8px 18px #0f172a1f;transform:translateY(-1px)}.onboarding-overlay .preset-card:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .preset-title{font-weight:600}.onboarding-overlay .preset-desc{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .preset-swatches{display:flex;gap:6px;align-items:center}.onboarding-overlay .preset-swatch{width:14px;height:14px;border-radius:50%;border:1px solid color-mix(in oklab,var(--color-border),transparent 30%)}.onboarding-overlay .empty-state{padding:12px 14px;border-radius:10px;border:1px dashed color-mix(in oklab,var(--color-border),transparent 30%);background:color-mix(in oklab,var(--color-background-contrast),transparent 20%);color:var(--color-text-light)}.onboarding-overlay .category-card{border:1px solid var(--color-border);border-radius:8px;padding:16px;background:var(--color-main-background, #fff);display:flex;flex-direction:column;gap:12px}.onboarding-overlay .category-card__header{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.onboarding-overlay .category-color-indicator{width:14px;height:14px;border-radius:50%;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);flex-shrink:0}.onboarding-overlay .category-name{flex:1;padding:6px 8px;border:1px solid var(--color-border);border-radius:4px;min-width:180px}.onboarding-overlay .category-actions{display:flex;gap:8px}.onboarding-overlay .remove-category{background:none;border:none;color:var(--color-text-light);cursor:pointer;font-size:1.1rem}.onboarding-overlay .remove-category:disabled{opacity:.4;cursor:default}.onboarding-overlay .remove-category:not(:disabled):hover{color:var(--color-error)}.onboarding-overlay .category-card__fields{display:flex;flex-wrap:wrap;gap:16px}.onboarding-overlay .color-field{display:flex;flex-direction:column;gap:6px;position:relative}.onboarding-overlay .color-button{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--color-border);background:var(--color-background-contrast);padding:4px 8px;border-radius:999px;font-size:12px;color:var(--color-text);cursor:pointer}.onboarding-overlay .color-button:hover{border-color:color-mix(in oklab,var(--color-primary),transparent 35%)}.onboarding-overlay .color-button:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .color-button .category-color-indicator{width:12px;height:12px}.onboarding-overlay .color-link{align-self:flex-start;border:none;background:transparent;padding:0;font-size:12px;color:var(--brand, #2563eb);text-decoration:underline;cursor:pointer}.onboarding-overlay .color-link:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .color-popover{position:absolute;top:calc(100% + 6px);left:0;z-index:30;min-width:160px;padding:10px;border-radius:10px;border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);background:var(--color-main-background, #fff);box-shadow:0 12px 32px #0f172a40;display:flex;flex-direction:column;gap:8px}.onboarding-overlay .color-popover:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .swatch-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,20px));justify-content:flex-start;gap:6px}.onboarding-overlay .color-swatch{width:18px;height:18px;aspect-ratio:1 / 1;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.onboarding-overlay .color-swatch.active{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 55%)}.onboarding-overlay .color-swatch:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:1px}.onboarding-overlay .custom-color{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .color-input{width:44px;height:26px;padding:0;border-radius:6px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:transparent}.onboarding-overlay .add-category{justify-self:flex-start}.onboarding-overlay .category-total{font-size:.9rem;color:var(--color-text-light)}.onboarding-overlay .input-unit{display:grid;grid-template-columns:1fr auto;align-items:center;border:1px solid var(--color-border);border-radius:8px;overflow:hidden;background:var(--color-background-contrast)}.onboarding-overlay .input-unit input{border:none;padding:7px 10px;background:transparent}.onboarding-overlay .input-unit .unit{padding:6px 10px;font-size:.75rem;color:var(--color-text-light);background:color-mix(in oklab,var(--color-border),transparent 70%);white-space:nowrap}.onboarding-overlay .field{display:flex;flex-direction:column;gap:6px}.onboarding-overlay .field .label{font-size:.8rem;color:var(--color-text-light)}.onboarding-overlay .field-hint{display:block;margin-top:4px;font-size:.75rem;color:var(--color-text-light)}.onboarding-overlay .calendar-assignments{margin-top:24px;display:grid;gap:12px}.onboarding-overlay .calendar-targets{margin-top:16px;display:grid;gap:12px}.onboarding-overlay .assignment-row{display:grid;grid-template-columns:1fr minmax(160px,220px) auto;gap:12px;align-items:center}.onboarding-overlay .target-row{display:grid;grid-template-columns:1fr minmax(150px,200px);gap:12px;align-items:center}.onboarding-overlay .assignment-row select{padding:6px 8px}.onboarding-overlay .cal-name{font-size:.95rem}.onboarding-overlay .assignment-warning{font-size:.75rem;color:var(--color-error)}.onboarding-overlay .assignment-row.is-unassigned select{border-color:color-mix(in oklab,var(--color-error),transparent 50%)}.onboarding-footer{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.onboarding-overlay .preferences-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}.onboarding-overlay .pref-card{border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);border-radius:10px;padding:12px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:12px}.onboarding-overlay .pref-card h4{margin:0}.onboarding-overlay .toggle-row{display:flex;gap:10px;align-items:center;font-size:.95rem}.onboarding-overlay .toggle-row input[type=checkbox]{transform:scale(1.05)}.onboarding-overlay .pref-card--deck .toggle-row{display:flex;gap:10px;align-items:center;font-size:.95rem}.onboarding-overlay .pref-card--deck input[type=checkbox]{transform:scale(1.05)}.onboarding-overlay .deck-board-list{border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);border-radius:8px;padding:10px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:8px}.onboarding-overlay .deck-board-options{display:flex;flex-direction:column;gap:6px}.onboarding-overlay .deck-board-option{display:flex;gap:8px;align-items:center;font-size:.9rem}.onboarding-overlay .deck-status{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .deck-status--error{color:var(--color-error)}.onboarding-overlay .pref-desc{margin:0;font-size:.9rem;color:var(--color-text-light)}.onboarding-overlay .pref-hint{margin:0;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .theme-options{display:flex;flex-direction:column;gap:8px}.onboarding-overlay .theme-option{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:color-mix(in oklab,var(--color-main-background, #fff),transparent 8%)}.onboarding-overlay .theme-option input[type=radio]{margin-top:4px}.onboarding-overlay .theme-copy{display:flex;flex-direction:column;gap:2px;font-size:.9rem}.onboarding-overlay .theme-option__title{font-weight:600;color:var(--color-text)}.onboarding-overlay .theme-option__desc{color:var(--color-text-light);font-size:.85rem}.onboarding-overlay .theme-preview{font-size:.85rem;color:var(--color-text-light)}:global(body.opsdash-onboarding-lock){overflow:hidden}.sb-description[data-v-191b3c25]{font-size:12px;color:var(--text-color-tertiary);margin:0 0 10px}.setup-actions[data-v-191b3c25]{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:12px}.setup-actions .import-input[data-v-191b3c25]{display:none}.preset-form[data-v-191b3c25]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.preset-label[data-v-191b3c25]{font-size:12px;font-weight:600}.preset-form input[data-v-191b3c25]{width:100%;padding:6px 8px;border-radius:4px;border:1px solid var(--color-border);background:var(--color-main-background);color:var(--color-main-text)}.preset-save[data-v-191b3c25]{align-self:flex-start}.preset-error[data-v-191b3c25]{color:var(--color-error);font-size:12px}.preset-warnings[data-v-191b3c25]{border:1px solid var(--color-warning);background:color-mix(in srgb,var(--color-warning) 10%,transparent);border-radius:6px;padding:8px;margin-bottom:12px}.warnings-title[data-v-191b3c25]{font-weight:600;margin-bottom:4px}.preset-warnings ul[data-v-191b3c25]{padding-left:18px;margin:0 0 6px}.preset-clear[data-v-191b3c25]{padding:2px 6px}.preset-header[data-v-191b3c25]{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.preset-header h3[data-v-191b3c25]{margin:0;font-size:15px;font-weight:600}.preset-empty[data-v-191b3c25]{font-size:12px;color:var(--text-color-tertiary)}.preset-list[data-v-191b3c25]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}.preset-item[data-v-191b3c25]{border:1px solid color-mix(in oklab,var(--brand),var(--line) 60%);border-radius:6px;padding:8px;display:flex;flex-direction:column;gap:6px;background:color-mix(in oklab,var(--brand),var(--card) 92%);color:var(--color-main-text);box-shadow:0 8px 16px #0f172a14,inset 0 0 0 1px color-mix(in oklab,var(--brand),transparent 85%)}.preset-meta[data-v-191b3c25]{display:flex;flex-direction:column;gap:2px}.preset-name[data-v-191b3c25]{font-weight:600}.preset-info[data-v-191b3c25]{display:flex;flex-wrap:wrap;gap:8px;font-size:11px;color:var(--color-text-lighter)}#opsdash.opsdash-theme-dark .preset-item{background:color-mix(in oklab,var(--brand),#0b1220 82%);border-color:color-mix(in oklab,var(--brand),#0b1220 35%);color:var(--color-main-text);box-shadow:0 10px 18px #00000047,inset 0 0 0 1px color-mix(in oklab,var(--brand),transparent 70%)}.preset-actions[data-v-191b3c25]{display:flex;gap:6px}.profiles-overlay__body[data-v-753c1068]{padding-right:4px;margin-right:-4px}.shortcuts-panel[data-v-5510efeb]{width:min(720px,100%);max-height:90vh;overflow:auto;display:flex;flex-direction:column;gap:16px}.shortcuts-hint[data-v-5510efeb]{margin:4px 0 0;font-size:13px;color:var(--color-text-light)}.shortcuts-body[data-v-5510efeb]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}.shortcuts-group h3[data-v-5510efeb]{margin:0 0 8px;font-size:14px;text-transform:uppercase;color:var(--color-text-light);letter-spacing:.06em}.shortcuts-group ul[data-v-5510efeb]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}.shortcuts-group li[data-v-5510efeb]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 0;border-bottom:1px solid var(--color-border)}.shortcuts-group li[data-v-5510efeb]:last-child{border-bottom:none}.shortcut-label[data-v-5510efeb]{font-weight:600;display:flex;flex-direction:column;gap:2px}.shortcut-label small[data-v-5510efeb]{font-weight:400;font-size:12px;color:var(--color-text-light)}.shortcut-combo[data-v-5510efeb]{display:inline-flex;gap:6px}kbd[data-v-5510efeb]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;padding:4px 8px;border-radius:6px;border:1px solid var(--color-border);background:var(--color-background-contrast);color:var(--color-text);box-shadow:inset 0 -1px #fff9}.shortcuts-footer[data-v-5510efeb]{display:flex;justify-content:flex-end}@media (max-width: 600px){.shortcuts-panel[data-v-5510efeb]{padding:16px}.shortcuts-body[data-v-5510efeb]{grid-template-columns:1fr}}.layout-grid[data-v-9017abee]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:100%;position:relative;--grid-row: 24px;grid-auto-rows:var(--grid-row);grid-auto-flow:row}.layout-item[data-v-9017abee]{position:relative}.layout-item.is-loading[data-v-9017abee]>:not(.widget-loading){opacity:.35;filter:saturate(.85)}.widget-loading[data-v-9017abee]{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;background:color-mix(in oklab,var(--card),transparent 20%);border-radius:16px;z-index:2}.widget-loading__spinner[data-v-9017abee]{width:20px;height:20px;border-radius:50%;border:2px solid color-mix(in oklab,var(--brand),transparent 65%);border-top-color:var(--brand);animation:widget-spin-9017abee .8s linear infinite}.widget-loading__label[data-v-9017abee]{font-size:12px;font-weight:600;color:var(--muted, #6b7280)}@keyframes widget-spin-9017abee{to{transform:rotate(360deg)}}.layout-grid.show-guides[data-v-9017abee]{background-image:linear-gradient(to right,rgba(148,163,184,.15) 1px,transparent 1px),linear-gradient(to bottom,rgba(148,163,184,.12) 1px,transparent 1px);background-size:calc((100% - 36px)/4) 100%,100% var(--grid-row);background-position:0 0,0 0}.layout-grid.show-guides[data-v-9017abee]:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.layout-item[data-v-9017abee]{min-width:0;position:relative;display:flex;padding:0;cursor:grab;align-self:stretch;overflow:hidden;--widget-scale:1;--widget-space:1;--widget-density:1;--widget-text-scale: var(--widget-scale);--widget-pad: calc(12px * var(--widget-space));--widget-gap: calc(8px * var(--widget-space));--widget-gap-tight: calc(6px * var(--widget-space));--widget-font: calc(14px * var(--widget-scale))}.layout-item[data-v-9017abee]>*{flex:1 1 auto;min-width:0;min-height:0;height:100%;overflow:auto}.w-quarter[data-v-9017abee]{grid-column:span 1}.w-half[data-v-9017abee]{grid-column:span 2}.w-full[data-v-9017abee]{grid-column:span 4}.h-s[data-v-9017abee]{grid-row-end:span 4}.h-m[data-v-9017abee]{grid-row-end:span 8}.h-l[data-v-9017abee]{grid-row-end:span 13}.h-xl[data-v-9017abee]{grid-row-end:span 22}.is-editable[data-v-9017abee]{outline:1px dashed rgba(107,114,128,.5);border-radius:10px}.is-selected[data-v-9017abee]{outline:2px solid var(--color-primary,#2563EB)}.is-dragging[data-v-9017abee]{opacity:.6}.scale-sm[data-v-9017abee]{--widget-scale:.85}.scale-md[data-v-9017abee]{--widget-scale:1}.scale-lg[data-v-9017abee]{--widget-scale:1.2}.scale-xl[data-v-9017abee]{--widget-scale:1.4}@media (max-width: 1024px){.w-quarter[data-v-9017abee],.w-half[data-v-9017abee]{grid-column:span 2}.w-full[data-v-9017abee]{grid-column:span 4}}@media (max-width: 768px){.w-quarter[data-v-9017abee],.w-half[data-v-9017abee],.w-full[data-v-9017abee]{grid-column:span 4}}.options-wrapper[data-v-adf460eb]{position:relative}.options-pop[data-v-adf460eb]{position:absolute;bottom:calc(100% + 6px);right:0;top:auto;background:color-mix(in oklab,#111827,#1f2937 60%);border:1px solid color-mix(in oklab,#4b5563,transparent 20%);border-radius:8px;box-shadow:0 10px 22px #00000038;padding:8px;width:33vw;z-index:30;max-height:360px;overflow:auto;overflow-x:hidden}.opt-row[data-v-adf460eb]{display:grid;grid-template-columns:minmax(120px,1fr) minmax(140px,1fr);align-items:center;gap:10px;margin-bottom:6px}.opt-row[data-v-adf460eb]:last-child{margin-bottom:0}.opt-row--footer[data-v-adf460eb]{grid-template-columns:1fr;justify-items:end}.opt-row--footer[data-v-adf460eb]{justify-content:flex-end}.link-btn[data-v-adf460eb]{border:none;background:transparent;color:var(--brand,#2563eb);cursor:pointer;font-size:12px;text-decoration:underline}.opt-row label[data-v-adf460eb]{font-size:17px;color:#e5e7eb}.opt-row input[type='"number"'][data-v-adf460eb],.opt-row select[data-v-adf460eb],.opt-row input[type='"text"'][data-v-adf460eb]{width:100%;background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:6px 8px;font-size:15px}.opt-row input[type='"checkbox"'][data-v-adf460eb]{width:12px;height:12px;transform:scale(.85);transform-origin:center;align-self:center}.opt-row textarea[data-v-adf460eb]{width:100%;background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:7px}.opt-section[data-v-adf460eb]{margin-bottom:10px;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);background:color-mix(in oklab,#0f172a,#111827 75%)}.opt-section[data-v-adf460eb]:last-child{margin-bottom:0}.opt-section__title[data-v-adf460eb]{font-size:15px;text-transform:uppercase;letter-spacing:.04em;color:#9ca3af;margin-bottom:8px;font-weight:700}.colorlist[data-v-adf460eb]{display:flex;align-items:center;gap:6px;flex-wrap:wrap}.colorlist__item input[type=color][data-v-adf460eb]{width:38px;height:28px;padding:0;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);background:#0f172a}.multi[data-v-adf460eb]{display:grid;gap:6px;grid-template-columns:repeat(2,minmax(0,1fr))}.multi__item[data-v-adf460eb]{display:flex;align-items:center;gap:6px;font-size:16px}.multi__item input[type='"checkbox"'][data-v-adf460eb]{width:12px;height:12px;transform:scale(.85);transform-origin:center}.multi__item span[data-v-adf460eb]{color:#e5e7eb}.taglist[data-v-adf460eb]{display:flex;flex-direction:column;gap:6px}.taglist__hint[data-v-adf460eb]{font-size:12px;color:#9ca3af;line-height:1.35}.taglist__item[data-v-adf460eb]{display:flex;align-items:center;justify-content:space-between;gap:10px;font-size:15px}.taglist__meta[data-v-adf460eb]{display:flex;align-items:center;gap:6px}.taglist__label[data-v-adf460eb]{color:#e5e7eb}.taglist__count[data-v-adf460eb]{font-size:12px;color:#9ca3af}.filter-builder[data-v-adf460eb]{display:flex;flex-direction:column;gap:8px;width:100%}.filter-builder__row[data-v-adf460eb]{display:grid;grid-template-columns:minmax(120px,1fr) minmax(140px,1fr) minmax(140px,1fr) auto;gap:6px;align-items:center}.filter-builder__hint[data-v-adf460eb]{font-size:12px;color:#9ca3af;line-height:1.35}.filter-builder__hint code[data-v-adf460eb]{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:10px;color:#e5e7eb;background:#0f172acc;padding:1px 4px;border-radius:4px}.filter-builder__label[data-v-adf460eb],.filter-builder__input[data-v-adf460eb]{background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:4px 6px;font-size:13px}@media (max-width: 720px){.filter-builder__row[data-v-adf460eb]{grid-template-columns:1fr;align-items:stretch}.filter-builder__row .ghost[data-v-adf460eb]{justify-self:end}}.ghost[data-v-c1764b36]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.ghost.danger[data-v-c1764b36]{color:#b91c1c;border-color:#fca5a5}.widget-toolbar-layer[data-v-c1764b36]{position:fixed;inset:auto 24px 10px calc(24px + var(--opsdash-nav-offset, 0px));pointer-events:none;z-index:2147480000;display:flex;align-items:flex-end;justify-content:center;padding:0;background:none}.widget-toolbar[data-v-c1764b36]{pointer-events:auto;position:relative;margin-top:0;padding:7px 10px;border:1px solid rgba(59,130,246,.55);background:#0b1222;border:1px solid color-mix(in oklab,var(--color-primary,#2563eb),transparent 20%);background:linear-gradient(180deg,#0f172afa,#020617fa);border-radius:8px;display:flex;align-items:center;justify-content:space-between;gap:6px;box-shadow:0 8px 20px #0f172a8c,0 0 0 1px #3b82f62e;max-width:1200px;width:min(100%,1200px);opacity:1;z-index:2147480001;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);transition:background .14s ease,box-shadow .14s ease,transform .14s ease}.widget-toolbar[data-v-c1764b36]:hover{background:linear-gradient(180deg,#1e293bfa,#0f172afa);box-shadow:0 10px 24px #0f172a99,0 0 0 1px #3b82f640}.toolbar-title[data-v-c1764b36]{font-weight:600;font-size:13px;color:#e5e7eb}.toolbar-actions[data-v-c1764b36],.toolbar-quick[data-v-c1764b36]{display:flex;gap:6px;flex-wrap:wrap;align-items:center}.toolbar-field[data-v-c1764b36]{display:flex;align-items:center;gap:6px;font-size:12px;color:#e5e7eb}.toolbar-field span[data-v-c1764b36]{opacity:.75}.toolbar-field input[type=text][data-v-c1764b36],.toolbar-field select[data-v-c1764b36]{border-radius:6px;border:1px solid color-mix(in oklab,#4b5563,transparent 35%);background:color-mix(in oklab,#0f172a,#111827 70%);color:#e2e8f0;padding:3px 6px;font-size:12px;min-width:88px}.toolbar-field input[type=color][data-v-c1764b36]{width:26px;height:20px;padding:0;border:1px solid color-mix(in oklab,#4b5563,transparent 35%);border-radius:6px;background:transparent}.toolbar-field--toggle[data-v-c1764b36]{gap:4px}.widget-toolbar .ghost[data-v-c1764b36]{padding:5px 8px;font-size:12px;background:#0f172a;border-color:#4b5563;background:color-mix(in oklab,#111827,#1f2937 80%);border-color:color-mix(in oklab,#4b5563,transparent 35%);color:#f1f5f9}.widget-toolbar .ghost[data-v-c1764b36]:hover{background:#1e3a8a;border-color:#2563eb;background:color-mix(in oklab,#2563EB,#111827 85%);border-color:color-mix(in oklab,#2563EB,transparent 50%)}.cat-header[data-v-1e606590]{display:flex;align-items:center;gap:8px}.cat-color-indicator[data-v-1e606590]{width:12px;height:12px;border-radius:50%;border:1px solid color-mix(in oklab,var(--fg),transparent 80%);flex-shrink:0}.cat-header .cat-name[data-v-1e606590]{flex:1;padding:6px 8px;border:1px solid var(--line);border-radius:6px;background:color-mix(in oklab,var(--card),transparent 5%);color:var(--fg)}.color-trigger-wrapper[data-v-1e606590]{position:relative;display:inline-flex;align-items:center}.color-link[data-v-1e606590]{border:none;background:transparent;padding:0;font-size:12px;color:var(--brand, #2563eb);text-decoration:underline;cursor:pointer}.color-link[data-v-1e606590]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 40%);outline-offset:2px}.swatch-grid[data-v-1e606590]{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,20px));justify-content:flex-start;gap:6px}.color-swatch[data-v-1e606590]{width:18px!important;height:18px!important;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0!important;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}.color-swatch.active[data-v-1e606590]{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 60%)}.color-swatch[data-v-1e606590]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 40%);outline-offset:1px}.ghost[data-v-539a10f9]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.ghost.primary[data-v-539a10f9]{border-color:var(--color-primary, #2563EB);color:var(--color-primary, #2563EB)}.advanced-overlay[data-v-539a10f9]{position:fixed;top:0;right:0;bottom:0;left:0;background:#0006;display:flex;align-items:flex-start;justify-content:center;padding:48px 16px;z-index:50}.advanced-panel[data-v-539a10f9]{background:var(--color-main-background, #fff);color:var(--color-main-text, #0f172a);width:min(960px,100%);max-height:calc(100vh - 96px);border-radius:12px;box-shadow:0 20px 60px #00000040;overflow:hidden;display:flex;flex-direction:column;border:1px solid var(--color-border, #e5e7eb)}.advanced-panel>.sb-pane[data-v-539a10f9]{flex:1 1 auto;overflow:auto;padding:16px}.overlay-header[data-v-539a10f9]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--color-border, #e5e7eb);background:var(--color-background-hover, #f8fafc)}.overlay-title[data-v-539a10f9]{font-weight:600;font-size:16px}.overlay-subtitle[data-v-539a10f9]{font-size:12px;color:var(--muted, #6b7280);margin-top:2px}.overlay-actions[data-v-539a10f9]{display:flex;justify-content:space-between;align-items:center;gap:8px;padding:12px 16px;border-top:1px solid var(--color-border, #e5e7eb);background:var(--color-background-hover, #f8fafc)}.overlay-actions__left[data-v-539a10f9],.overlay-actions__right[data-v-539a10f9]{display:flex;gap:8px;flex-wrap:wrap}@media (max-width: 640px){.advanced-overlay[data-v-539a10f9]{padding:16px;align-items:flex-start}}.layout-wrapper[data-v-98fee2cd]{position:relative}.layout-wrapper.editable-mode[data-v-98fee2cd]{padding-bottom:120px;overflow:visible}:root{--widget-scale:1;--widget-space:1;--widget-density:1;--widget-text-scale:1}.balance-card[data-v-e115cf77]{background:var(--card,#fff);border:1px solid var(--color-border,#e5e7eb);border-radius:calc(12px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg,#0f172a);display:flex;flex-direction:column;gap:var(--widget-gap, 10px);font-size:calc(14px * var(--widget-scale, 1))}.header[data-v-e115cf77]{display:flex;align-items:center;justify-content:space-between;gap:var(--widget-gap, 10px)}.header.compact[data-v-e115cf77]{justify-content:center}.title-row[data-v-e115cf77]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1))}.title[data-v-e115cf77]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.pill[data-v-e115cf77]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(10px * var(--widget-scale, 1));border-radius:999px;background:color-mix(in srgb,var(--brand, #2563eb) 15%,white);color:var(--brand, #2563eb);text-transform:uppercase;letter-spacing:.06em}.index[data-v-e115cf77]{text-align:right}.index.centered[data-v-e115cf77]{text-align:center;width:100%}.index-badge[data-v-e115cf77]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));padding:calc(6px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(12px * var(--widget-space, 1));background:color-mix(in oklab,var(--index-color, #2563eb) 14%,transparent);box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--index-color, #2563eb) 35%,transparent)}.index-badge__ring[data-v-e115cf77]{width:calc(44px * var(--widget-scale, 1));height:calc(44px * var(--widget-scale, 1));border-radius:999px;background:conic-gradient(var(--index-color, #2563eb) var(--index-fill, 0%),color-mix(in srgb,var(--color-border, #e5e7eb),transparent 40%) 0);display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.index-badge__ring[data-v-e115cf77]:after{content:"";position:absolute;inset:calc(5px * var(--widget-space, 1));border-radius:999px;background:var(--color-main-background, #fff);box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--index-color, #2563eb) 22%,transparent)}.index-badge__value[data-v-e115cf77]{position:relative;z-index:1;font-weight:700;font-size:calc(14px * var(--widget-scale, 1));font-variant-numeric:tabular-nums;color:var(--fg,#0f172a)}.index-badge__meta[data-v-e115cf77]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1));text-align:left}.index-badge__label[data-v-e115cf77]{font-size:calc(9px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.08em;color:var(--muted)}.index-badge__range[data-v-e115cf77]{font-size:calc(11px * var(--widget-scale, 1));color:var(--fg);white-space:nowrap}.trend[data-v-e115cf77]{display:flex;align-items:center;gap:var(--widget-gap, 10px)}.trend-line[data-v-e115cf77]{flex:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(92px * var(--widget-scale, 1)),1fr));gap:calc(6px * var(--widget-space, 1));justify-content:flex-start}.trend-block[data-v-e115cf77]{min-width:0;background:color-mix(in oklab,var(--color-primary,#2563eb),#e5e7eb 50%);border-radius:calc(8px * var(--widget-space, 1));padding:calc(4px * var(--widget-space, 1)) calc(5px * var(--widget-space, 1));display:flex;align-items:center;justify-content:center;position:relative;color:#fff;font-size:calc(11px * var(--widget-scale, 1));border:none;cursor:default}.trend-block.no-range[data-v-e115cf77]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1)) calc(5px * var(--widget-space, 1))}.trend-block.no-range.no-offset[data-v-e115cf77]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1))}.trend-block.no-offset[data-v-e115cf77]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.trend-block.current[data-v-e115cf77]{background:var(--color-primary,#2563eb);box-shadow:0 0 0 2px color-mix(in oklab,var(--color-primary,#2563eb),#ffffff 60%)}.trend-line-row[data-v-e115cf77]{display:flex;align-items:center;justify-content:space-between;gap:calc(4px * var(--widget-space, 1));width:100%}.trend-value[data-v-e115cf77]{font-weight:700;font-size:calc(13px * var(--widget-scale, 1));text-align:left;white-space:nowrap}.trend-range[data-v-e115cf77]{flex:1;text-align:center;font-size:calc(10px * var(--widget-scale, 1));color:#e5e7eb;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.trend-offset[data-v-e115cf77]{min-width:calc(52px * var(--widget-scale, 1));text-align:right;font-size:calc(10px * var(--widget-scale, 1));color:#cbd5f5;white-space:nowrap}.trend-delta[data-v-e115cf77]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted);display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.trend-left[data-v-e115cf77]{font-weight:700;color:var(--fg,#0f172a)}.trend-center[data-v-e115cf77]{flex:1;text-align:center;font-size:calc(11px * var(--widget-scale, 1))}.trend-right[data-v-e115cf77]{min-width:calc(56px * var(--widget-scale, 1));text-align:right;font-size:calc(11px * var(--widget-scale, 1))}.section-title[data-v-e115cf77]{font-weight:600;font-size:calc(13px * var(--widget-scale, 1));margin-bottom:calc(4px * var(--widget-space, 1))}.messages ul[data-v-e115cf77]{margin:0;padding-left:calc(18px * var(--widget-space, 1));color:var(--muted);font-size:calc(13px * var(--widget-scale, 1))}.messages li[data-v-e115cf77]{margin-bottom:calc(2px * var(--widget-space, 1))}.messages li[data-v-e115cf77]:last-child{margin-bottom:0}.config[data-v-e115cf77]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted);display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(140px * var(--widget-scale, 1)),1fr));gap:calc(6px * var(--widget-space, 1))}.empty[data-v-e115cf77]{text-align:center;color:var(--muted);font-size:calc(13px * var(--widget-scale, 1))}.mix-card[data-v-56c9c298]{display:flex;flex-direction:column;gap:var(--widget-gap, 10px);--mix-label-width: clamp(34px, calc(52px * var(--widget-scale, 1)), 64px);--mix-gap: clamp(2px, calc(6px * var(--widget-space, 1)), 8px);--mix-row-gap: clamp(4px, calc(8px * var(--widget-space, 1)), 12px);--mix-cell-padding: clamp(2px, calc(6px * var(--widget-space, 1)), 8px);--mix-cell-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 14px);--mix-label-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 13px);--mix-column-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 12px);--mix-cell-min: clamp(18px, calc(30px * var(--widget-scale, 1)), 36px);--mix-radius: clamp(4px, calc(8px * var(--widget-space, 1)), 10px)}.mix-card--dense[data-v-56c9c298]{gap:calc(6px * var(--widget-space, 1));--mix-label-width: clamp(28px, calc(40px * var(--widget-scale, 1)), 52px);--mix-gap: clamp(1px, calc(3px * var(--widget-space, 1)), 6px);--mix-row-gap: clamp(3px, calc(5px * var(--widget-space, 1)), 8px);--mix-cell-padding: clamp(1px, calc(3px * var(--widget-space, 1)), 5px);--mix-cell-font: clamp(8px, calc(10px * var(--widget-scale, 1)), 12px);--mix-label-font: clamp(8px, calc(10px * var(--widget-scale, 1)), 11px);--mix-column-font: clamp(8px, calc(9px * var(--widget-scale, 1)), 10px);--mix-cell-min: clamp(16px, calc(22px * var(--widget-scale, 1)), 30px);--mix-radius: clamp(3px, calc(5px * var(--widget-space, 1)), 8px)}.mix-card--no-header[data-v-56c9c298]{gap:calc(6px * var(--widget-space, 1))}.mix-header[data-v-56c9c298]{display:flex;justify-content:space-between;align-items:center}.mix-title[data-v-56c9c298]{font-weight:700;color:var(--fg);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.mix-subtitle[data-v-56c9c298]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.mix-badge[data-v-56c9c298]{padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));font-weight:600;background:color-mix(in oklab,var(--brand),transparent 80%);border:1px solid color-mix(in oklab,var(--brand),transparent 60%);color:var(--brand)}.mix-list[data-v-56c9c298]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:var(--mix-row-gap)}.mix-row[data-v-56c9c298]{display:grid;grid-template-columns:var(--mix-label-width) 1fr;gap:var(--mix-gap);align-items:center}.mix-label[data-v-56c9c298]{font-weight:600;color:var(--fg);font-size:var(--mix-label-font);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mix-columns[data-v-56c9c298]{display:grid;gap:var(--mix-gap);align-items:center;justify-content:start;font-size:var(--mix-column-font);color:var(--muted)}.mix-column-label[data-v-56c9c298]{text-align:center;white-space:nowrap;font-variant-numeric:tabular-nums;line-height:1.1;overflow:hidden;text-overflow:ellipsis}.mix-column-label--label[data-v-56c9c298]{text-align:left}.mix-column-label--current[data-v-56c9c298]{font-weight:700;color:var(--fg)}.mix-cells[data-v-56c9c298]{display:grid;gap:var(--mix-gap);align-items:stretch;justify-content:start;width:100%;min-width:0}.mix-cell[data-v-56c9c298]{position:relative;border-radius:var(--mix-radius);padding:var(--mix-cell-padding);background:linear-gradient(135deg,color-mix(in oklab,var(--mix-bg),var(--brand) 18%),color-mix(in oklab,var(--mix-bg),var(--card) 10%));color:var(--mix-fg, var(--fg));text-align:center;font-size:var(--mix-cell-font);border:1px solid color-mix(in oklab,var(--mix-bg),var(--brand) 22%);box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--mix-bg),transparent 55%);min-height:var(--mix-cell-min);display:flex;align-items:center;justify-content:center}#opsdash.opsdash-theme-dark .mix-cell{background:linear-gradient(135deg,color-mix(in oklab,var(--mix-bg),#0b1220 78%),color-mix(in oklab,var(--mix-bg),#0b1220 90%));border-color:color-mix(in oklab,var(--mix-bg),#0b1220 45%);color:color-mix(in oklab,var(--mix-fg),#e2e8f0 80%);box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--mix-bg),transparent 72%)}.mix-cell--current[data-v-56c9c298]{outline:1px solid color-mix(in oklab,var(--brand),transparent 35%);outline-offset:1px}.mix-cell--mode-hybrid[data-v-56c9c298]{box-shadow:inset 0 -3px color-mix(in oklab,var(--mix-accent),transparent 30%)}.mix-cell--mode-share[data-v-56c9c298]{box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--mix-bg),transparent 40%)}.mix-card--square .mix-cell[data-v-56c9c298]{aspect-ratio:1 / 1;min-height:0}.mix-cell__value[data-v-56c9c298]{font-weight:700;font-variant-numeric:tabular-nums;white-space:nowrap}.pill[data-v-56c9c298]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;font-size:11px;border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.hint[data-v-56c9c298]{font-size:12px;color:var(--muted)}.chart-widget[data-v-05ee383b]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-05ee383b]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-05ee383b]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-05ee383b]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-05ee383b]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-05ee383b]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-05ee383b]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.chart-widget__legend .dot[data-v-05ee383b]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.heatmap-lookback[data-v-d04eb3d7]{display:flex;flex-direction:column;gap:calc(10px * var(--widget-space, 1))}.heatmap-lookback__stacked[data-v-d04eb3d7]{display:grid;gap:calc(12px * var(--widget-space, 1))}.heatmap-lookback__panel[data-v-d04eb3d7]{display:grid;gap:calc(6px * var(--widget-space, 1))}.heatmap-lookback__label[data-v-d04eb3d7]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.heatmap-lookback__label .dot[data-v-d04eb3d7],.heatmap-lookback__legend-weeks .dot[data-v-d04eb3d7]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%;flex:0 0 auto}.heatmap-lookback__legend[data-v-d04eb3d7]{display:grid;gap:calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.heatmap-lookback__legend-scale[data-v-d04eb3d7]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.heatmap-lookback__legend-bar[data-v-d04eb3d7]{flex:1;height:calc(8px * var(--widget-space, 1));border-radius:999px;background:linear-gradient(90deg,var(--heatmap-low),var(--heatmap-high))}.heatmap-lookback__legend-meta[data-v-d04eb3d7]{font-size:calc(10px * var(--widget-scale, 1));color:var(--muted)}.heatmap-lookback__legend-weeks[data-v-d04eb3d7]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1))}.heatmap-lookback__legend-weeks li[data-v-d04eb3d7]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.chart-widget[data-v-639549e5]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-639549e5]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-639549e5]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-639549e5]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-639549e5]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__hint[data-v-639549e5],.chart-widget__meta[data-v-639549e5]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.chart-widget--hod[data-v-639549e5]{--heatmap-low: color-mix(in srgb, var(--brand, #2563eb) 10%, var(--card, #ffffff));--heatmap-high: color-mix(in srgb, var(--brand, #2563eb) 80%, var(--card, #ffffff))}.chart-widget[data-v-66cec46a]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-66cec46a]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-66cec46a]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-66cec46a]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-66cec46a]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-66cec46a]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-66cec46a]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.chart-widget__legend .dot[data-v-66cec46a]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.chart[data-v-0b0f384d]{cursor:pointer}.chart-widget[data-v-1a53cec2]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-1a53cec2]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-1a53cec2]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-1a53cec2]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-1a53cec2]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-1a53cec2]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-1a53cec2]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1));transition:color .15s ease,background .15s ease;cursor:pointer}.chart-widget__legend li.hovered[data-v-1a53cec2]{color:var(--brand);background:color-mix(in oklab,var(--brand),transparent 90%)}.chart-widget__legend .dot[data-v-1a53cec2]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.chart-widget__legend .val[data-v-1a53cec2]{margin-left:auto;color:var(--muted)}.chart[data-v-4bcde162]{cursor:pointer}.chart-widget[data-v-20b54b56]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-20b54b56]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-20b54b56]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-20b54b56]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-20b54b56]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-20b54b56]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-20b54b56]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1));transition:color .15s ease,background .15s ease;cursor:pointer}.chart-widget__legend li.hovered[data-v-20b54b56]{color:var(--brand);background:color-mix(in oklab,var(--brand),transparent 90%)}.chart-widget__legend .dot[data-v-20b54b56]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}table[data-v-2efa83d5]{width:100%;border-collapse:collapse;font-size:13px}thead th[data-v-2efa83d5]{text-align:left;padding:6px 8px;font-weight:600;color:var(--muted);border-bottom:1px solid var(--line)}thead th.num[data-v-2efa83d5]{text-align:right}tbody td[data-v-2efa83d5]{padding:6px 8px;border-top:1px solid var(--line);vertical-align:top}.col-w-42[data-v-2efa83d5]{width:42%}.col-w-12[data-v-2efa83d5]{width:12%}.col-w-14[data-v-2efa83d5]{width:14%}.col-w-18[data-v-2efa83d5]{width:18%}.group-row td[data-v-2efa83d5]{padding-top:12px;padding-bottom:8px;background:color-mix(in srgb,var(--muted) 6%,transparent)}.group-header[data-v-2efa83d5]{display:flex;justify-content:space-between;align-items:center;gap:12px;font-size:12px}.group-label[data-v-2efa83d5]{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--fg)}.group-label .dot[data-v-2efa83d5]{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 12%,transparent)}.group-meta[data-v-2efa83d5]{display:flex;align-items:center;gap:8px;flex-wrap:wrap;color:var(--muted)}.group-meta .summary[data-v-2efa83d5]{font-size:12px}.group-meta .summary-percent[data-v-2efa83d5]{font-variant-numeric:tabular-nums;color:var(--fg);font-weight:600}.badge[data-v-2efa83d5]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-2efa83d5]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-2efa83d5]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-2efa83d5]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-2efa83d5]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-2efa83d5]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.cell[data-v-2efa83d5]{display:flex;flex-direction:column;gap:4px}.row-name[data-v-2efa83d5]{font-weight:600;color:var(--fg)}.progress[data-v-2efa83d5]{position:relative;height:6px;background:color-mix(in srgb,var(--muted) 22%,transparent);border-radius:999px;overflow:hidden}.progress-bar[data-v-2efa83d5]{height:100%;border-radius:999px;background:var(--brand);transition:width .2s ease}.progress-today[data-v-2efa83d5]{position:absolute;top:-2px;height:10px;border-radius:8px;opacity:.9;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 4px #0000001f}.progress-chip[data-v-2efa83d5]{font-size:10px;font-weight:700;color:#fff;padding:0 6px;white-space:nowrap;text-shadow:0 1px 3px rgba(0,0,0,.25)}.num[data-v-2efa83d5]{text-align:right;font-variant-numeric:tabular-nums;color:var(--fg)}.hint[data-v-2efa83d5]{color:var(--muted);font-size:11px}.delta[data-v-2efa83d5]{font-weight:600}.delta.pos[data-v-2efa83d5]{color:var(--pos)}.delta.neg[data-v-2efa83d5]{color:var(--neg)}.empty-row td.empty[data-v-2efa83d5]{font-style:italic;color:var(--muted);text-align:center}.table-widget[data-v-e75cc444]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.table-widget__header[data-v-e75cc444]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.table-widget__title[data-v-e75cc444]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.table-widget__subtitle[data-v-e75cc444]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.table-widget__empty[data-v-e75cc444]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.dayoff-card[data-v-443671a9]{display:flex;flex-direction:column;gap:var(--widget-gap, 10px)}.dayoff-card__header[data-v-443671a9]{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fg);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.dayoff-heatmap[data-v-443671a9]{display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(110px * var(--widget-scale, 1)),1fr));gap:var(--widget-gap, 8px)}.dayoff-tile[data-v-443671a9]{border-radius:calc(10px * var(--widget-space, 1));padding:calc(10px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1));text-align:center;background:var(--tile-bg, color-mix(in oklab, var(--muted), transparent 85%));color:var(--tile-fg, var(--fg));transition:transform .2s ease,background .2s ease}.dayoff-tile--current[data-v-443671a9]{outline:1px solid color-mix(in oklab,var(--brand),transparent 30%);outline-offset:1px}.dayoff-tile--low[data-v-443671a9]{background:var(--tile-bg, color-mix(in oklab, #dc2626, white 70%));color:var(--tile-fg, #7f1d1d)}.dayoff-tile--mid[data-v-443671a9]{background:var(--tile-bg, color-mix(in oklab, #f97316, white 68%));color:var(--tile-fg, #7c2d12)}.dayoff-tile--high[data-v-443671a9]{background:var(--tile-bg, color-mix(in oklab, #16a34a, white 65%));color:var(--tile-fg, #14532d)}.dayoff-tile__label[data-v-443671a9]{font-size:calc(11px * var(--widget-scale, 1));font-weight:600}.dayoff-tile__value[data-v-443671a9]{font-size:calc(14px * var(--widget-scale, 1));font-weight:700;font-variant-numeric:tabular-nums}.dayoff-tile__meta[data-v-443671a9]{font-size:calc(10px * var(--widget-scale, 1));color:color-mix(in oklab,currentColor,transparent 55%);font-variant-numeric:tabular-nums}.pill[data-v-443671a9]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.hint[data-v-443671a9]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.deck-panel[data-v-4ebb7081]{display:flex;flex-direction:column;gap:calc(16px * var(--widget-space, 1));height:100%;min-height:0;font-size:var(--widget-font, 14px)}.deck-panel__header[data-v-4ebb7081]{display:flex;align-items:center;justify-content:space-between}.deck-panel__title[data-v-4ebb7081]{font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)));font-weight:600}.deck-panel__subtitle[data-v-4ebb7081]{font-size:calc(14px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-panel__actions[data-v-4ebb7081]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1))}.deck-panel__count[data-v-4ebb7081]{font-size:calc(14px * var(--widget-scale, 1));background:var(--color-background-darker);border:1px solid var(--color-border-dark);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(12px * var(--widget-space, 1))}.deck-panel__refresh[data-v-4ebb7081]{border:1px solid var(--color-primary);background:transparent;color:var(--color-primary);border-radius:999px;padding:calc(4px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));font-size:calc(14px * var(--widget-scale, 1));cursor:pointer}.deck-panel__refresh[data-v-4ebb7081]:disabled{opacity:.6;cursor:default}.deck-panel__link[data-v-4ebb7081]{font-size:calc(14px * var(--widget-scale, 1));text-decoration:none;color:var(--color-text-maxcontrast)}.deck-panel__loading[data-v-4ebb7081]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));color:var(--color-text-maxcontrast)}.deck-panel__filters[data-v-4ebb7081]{display:flex;gap:calc(8px * var(--widget-space, 1));flex-wrap:wrap}.deck-panel--compact[data-v-4ebb7081]{gap:calc(10px * var(--widget-space, 1))}.deck-panel--compact .deck-panel__filters[data-v-4ebb7081]{gap:calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card-list[data-v-4ebb7081]{gap:calc(10px * var(--widget-space, 1))}.deck-panel--compact .deck-card[data-v-4ebb7081]{padding:calc(6px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));gap:0;border-radius:calc(8px * var(--widget-space, 1))}.deck-panel--compact .deck-card__row[data-v-4ebb7081]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));white-space:nowrap;overflow-x:auto;padding-bottom:2px}.deck-panel--compact .deck-card__row[data-v-4ebb7081]::-webkit-scrollbar{height:6px}.deck-panel--compact .deck-card__row[data-v-4ebb7081]::-webkit-scrollbar-thumb{background:color-mix(in oklab,var(--color-border),transparent 30%);border-radius:999px}.deck-panel--compact .deck-card__status-row[data-v-4ebb7081]{font-size:calc(12px * var(--widget-scale, 1));gap:calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card__status[data-v-4ebb7081]{font-size:calc(11px * var(--widget-scale, 1));letter-spacing:.04em}.deck-panel--compact .deck-card__time[data-v-4ebb7081]{font-size:calc(11px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-panel--compact .deck-card__title[data-v-4ebb7081]{font-size:calc(13px * var(--widget-scale, 1));font-weight:600}.deck-panel--compact .deck-card__meta[data-v-4ebb7081]{font-size:calc(11px * var(--widget-scale, 1));gap:calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card__board[data-v-4ebb7081]{padding:calc(1px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1));font-size:calc(10px * var(--widget-scale, 1))}.deck-panel--compact .deck-card__labels[data-v-4ebb7081]{gap:calc(4px * var(--widget-space, 1));flex-wrap:nowrap}.deck-panel--compact .deck-card__label[data-v-4ebb7081]{font-size:calc(10px * var(--widget-scale, 1));padding:calc(1px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card__assignees[data-v-4ebb7081]{font-size:calc(11px * var(--widget-scale, 1));gap:calc(4px * var(--widget-space, 1));flex-wrap:nowrap}.deck-panel__body[data-v-4ebb7081]{flex:1;min-height:0;overflow:auto;padding-right:calc(4px * var(--widget-space, 1))}.deck-filter-btn[data-v-4ebb7081]{border:1px solid var(--color-border-maxcontrast);background:var(--color-main-background);border-radius:999px;padding:calc(3px * var(--widget-space, 1)) calc(14px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1));cursor:pointer;display:inline-flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.deck-filter-btn.is-draggable[data-v-4ebb7081]{cursor:grab}.deck-filter-btn.is-draggable[data-v-4ebb7081]:active{cursor:grabbing}.deck-filter-btn.active[data-v-4ebb7081]{border-color:var(--color-primary);color:var(--color-primary)}.deck-filter-count[data-v-4ebb7081]{font-size:calc(11px * var(--widget-scale, 1));opacity:.7}.deck-filter-btn[data-v-4ebb7081]:disabled{opacity:.5;cursor:not-allowed}.deck-panel__error[data-v-4ebb7081]{padding:calc(12px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));background:var(--color-error-hover);color:var(--color-error-text)}.deck-card-list[data-v-4ebb7081]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:calc(16px * var(--widget-space, 1))}.deck-card[data-v-4ebb7081]{border:1px solid var(--color-border);border-radius:calc(12px * var(--widget-space, 1));padding:calc(14px * var(--widget-space, 1));background:var(--color-main-background);display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1))}.deck-card__status-row[data-v-4ebb7081]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));font-size:calc(14px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-card__status[data-v-4ebb7081]{font-weight:600;text-transform:uppercase;font-size:calc(12px * var(--widget-scale, 1));letter-spacing:.05em}.deck-card__status.done[data-v-4ebb7081]{color:var(--color-success)}.deck-card__status.archived[data-v-4ebb7081]{color:var(--color-text-maxcontrast)}.deck-card__title[data-v-4ebb7081]{font-size:calc(16px * var(--widget-scale, 1));font-weight:600;color:var(--color-text)}.deck-card__meta[data-v-4ebb7081]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1))}.deck-card__board[data-v-4ebb7081]{border:2px solid var(--color-border);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;text-transform:uppercase;font-size:calc(11px * var(--widget-scale, 1))}.deck-card__stack[data-v-4ebb7081]{color:var(--color-text-maxcontrast)}.deck-card__labels[data-v-4ebb7081]{display:flex;gap:calc(6px * var(--widget-space, 1));flex-wrap:wrap}.deck-card__label[data-v-4ebb7081]{color:#fff;font-size:calc(11px * var(--widget-scale, 1));padding:calc(2px * var(--widget-space, 1)) calc(7px * var(--widget-space, 1));border-radius:999px}.deck-card__assignees[data-v-4ebb7081]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.deck-card__assignees-label[data-v-4ebb7081]{color:var(--color-text-maxcontrast)}.deck-card__assignee[data-v-4ebb7081]{font-weight:500}.note-card[data-v-5e293970]{background:var(--card,#fff);border:1px solid var(--color-border,#d1d5db);border-radius:calc(10px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg,#0f172a);display:flex;flex-direction:column;gap:var(--widget-gap, 10px);font-size:var(--widget-font, 14px)}.note-header[data-v-5e293970]{display:flex;align-items:center;justify-content:space-between}.title[data-v-5e293970]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.btn[data-v-5e293970]{padding:calc(6px * var(--widget-space, 1)) calc(10px * var(--widget-space, 1));border-radius:calc(6px * var(--widget-space, 1));border:1px solid var(--color-border,#d1d5db);background:var(--card,#fff);cursor:pointer;font-size:calc(12px * var(--widget-scale, 1))}.field[data-v-5e293970]{display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1))}.field-head[data-v-5e293970]{display:flex;align-items:center;justify-content:space-between;gap:calc(6px * var(--widget-space, 1))}.label[data-v-5e293970]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.note[data-v-5e293970]{width:100%;min-height:calc(80px * var(--widget-scale, 1));border:1px solid var(--color-border,#d1d5db);border-radius:calc(6px * var(--widget-space, 1));padding:calc(8px * var(--widget-space, 1));resize:vertical;font-size:calc(13px * var(--widget-scale, 1))}.note--compact[data-v-5e293970]{min-height:calc(60px * var(--widget-scale, 1));font-size:calc(12px * var(--widget-scale, 1))}.note-select[data-v-5e293970]{max-width:55%;padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(6px * var(--widget-space, 1));border:1px solid var(--color-border,#d1d5db);background:var(--card,#fff);color:var(--fg,#0f172a);font-size:calc(12px * var(--widget-scale, 1))}.text-card[data-v-01eb6d28]{background:var(--card, #fff);border:1px solid var(--color-border, #d1d5db);border-radius:calc(10px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg, #0f172a);line-height:calc(1.4 * var(--widget-density, 1));font-size:var(--widget-font, 14px)}.text-card h3[data-v-01eb6d28]{margin:0 0 calc(6px * var(--widget-space, 1)) 0;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.text-card .body[data-v-01eb6d28]{margin:0;white-space:pre-wrap;font-size:calc(.95em * var(--widget-scale, 1))}.text-card .body.empty[data-v-01eb6d28]{color:var(--muted)}.targets-card[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px);font-size:var(--widget-font, 14px)}.targets-header[data-v-9ee23cb0]{display:flex;justify-content:space-between;align-items:center}.targets-header strong[data-v-9ee23cb0]{font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.targets-main[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1))}.targets-main .line[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.targets-main .line.forecast[data-v-9ee23cb0]{flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.targets-main .line .value[data-v-9ee23cb0]{display:flex;gap:calc(6px * var(--widget-space, 1));align-items:center}.targets-badges[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.targets-categories[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(10px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px solid var(--line)}.category[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));padding:calc(4px * var(--widget-space, 1)) 0}.category .cat-top[data-v-9ee23cb0]{display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.category .cat-label[data-v-9ee23cb0]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-weight:600;color:var(--fg)}.category .cat-label .dot[data-v-9ee23cb0]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 10%,transparent)}.category .cat-label .name[data-v-9ee23cb0]{color:var(--fg)}.category .cat-meta[data-v-9ee23cb0]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-weight:600;color:var(--muted)}.category .cat-meta .percent[data-v-9ee23cb0]{font-variant-numeric:tabular-nums;color:var(--fg)}.cat-progress .bar[data-v-9ee23cb0]{position:relative;width:100%;height:calc(8px * var(--widget-space, 1));border-radius:999px;background:color-mix(in srgb,var(--muted) 20%,transparent);overflow:hidden}.cat-progress .bar .fill[data-v-9ee23cb0]{height:100%;border-radius:999px;transition:width .2s ease;max-width:100%}.cat-progress .bar .today-overlay[data-v-9ee23cb0]{position:absolute;top:calc(-2px * var(--widget-space, 1));height:calc(12px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));opacity:.85;border:1px solid transparent;pointer-events:none}.today-chip[data-v-9ee23cb0]{position:absolute;top:calc(-22px * var(--widget-space, 1));transform:translate(-50%);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(10px * var(--widget-scale, 1));font-weight:700;color:#fff;border:1px solid transparent;white-space:nowrap;box-shadow:0 2px 6px #0000001f}.today-label[data-v-9ee23cb0]{font-size:calc(10px * var(--widget-scale, 1));line-height:1.2}.category .cat-metrics[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1));align-items:center;color:var(--fg)}.cat-footer[data-v-9ee23cb0]{display:flex;justify-content:space-between;align-items:center}.hint[data-v-9ee23cb0]{color:var(--muted);font-size:calc(12px * var(--widget-scale, 1))}.badge[data-v-9ee23cb0]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(11px * var(--widget-scale, 1));font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-label[data-v-9ee23cb0]{font-weight:600}.status-on[data-v-9ee23cb0]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-9ee23cb0]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-9ee23cb0]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-9ee23cb0]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-9ee23cb0]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.delta[data-v-9ee23cb0]{font-weight:600}.delta.pos[data-v-9ee23cb0]{color:var(--pos)}.delta.neg[data-v-9ee23cb0]{color:var(--neg)}.cat-metrics .hint[data-v-9ee23cb0],.cat-footer .hint[data-v-9ee23cb0]{font-size:calc(11px * var(--widget-scale, 1))}.cat-progress[data-v-9ee23cb0]{padding:calc(2px * var(--widget-space, 1)) 0}.cat-meta .badge[data-v-9ee23cb0]{font-size:calc(10px * var(--widget-scale, 1))}.card.time-summary[data-v-2f547f8a]{display:flex;flex-direction:column;gap:var(--widget-gap, 6px);font-size:var(--widget-font, 13px);color:var(--muted);--widget-pad: calc(14px * var(--widget-space, 1));padding:var(--widget-pad, 14px)}.today-highlight[data-v-2f547f8a]{display:flex;align-items:center;justify-content:space-between;padding:calc(10px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));border-radius:calc(10px * var(--widget-space, 1));background:color-mix(in oklab,var(--brand, #2563eb) 14%,transparent);border:1px solid color-mix(in oklab,var(--brand, #2563eb),transparent 70%);color:var(--fg)}.today-label[data-v-2f547f8a]{font-size:calc(12px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.04em;color:color-mix(in oklab,var(--fg),transparent 35%)}.today-value[data-v-2f547f8a]{font-size:calc(18px * var(--widget-scale, 1));font-weight:700;letter-spacing:-.02em}.today-cats[data-v-2f547f8a]{display:flex;flex-wrap:wrap;gap:calc(8px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--fg)}.today-cat[data-v-2f547f8a]{display:inline-flex;align-items:center;gap:calc(6px * var(--widget-space, 1));padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));background:color-mix(in oklab,var(--card, #fff),transparent 6%);border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 30%)}.today-cat .dot[data-v-2f547f8a]{width:calc(9px * var(--widget-space, 1));height:calc(9px * var(--widget-space, 1));border-radius:50%;box-shadow:0 0 0 1px color-mix(in oklab,var(--fg) 10%,transparent)}.today-cat .name[data-v-2f547f8a]{font-weight:600}.today-cat .value[data-v-2f547f8a]{color:var(--muted)}.time-summary-firstline[data-v-2f547f8a]{display:flex;align-items:center;justify-content:space-between;gap:var(--widget-gap, 8px);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)));color:var(--fg);font-weight:600}.mode-pill[data-v-2f547f8a]{display:inline-flex;align-items:center;padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));font-weight:600;border-radius:999px;background:color-mix(in srgb,var(--brand) 18%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.time-summary-metrics[data-v-2f547f8a]{display:grid;gap:calc(4px * var(--widget-space, 1));margin:0;padding:0;list-style:none}.time-summary-metrics li[data-v-2f547f8a]{display:flex;flex-wrap:wrap;gap:calc(4px * var(--widget-space, 1));color:var(--muted)}.time-summary-metrics strong[data-v-2f547f8a]{color:var(--fg);font-size:calc(14px * var(--widget-scale, 1))}.time-summary-inline[data-v-2f547f8a]{font-size:calc(13px * var(--widget-scale, 1));color:var(--fg)}.time-summary-row[data-v-2f547f8a]{display:flex;flex-wrap:wrap;gap:calc(4px * var(--widget-space, 1));line-height:1.4;color:var(--muted)}.time-summary-row .label[data-v-2f547f8a]{color:var(--fg);font-weight:600}.time-summary-row.calendars[data-v-2f547f8a]{word-break:break-word}.time-summary-row .sep[data-v-2f547f8a],.time-summary-row .hint[data-v-2f547f8a],.time-summary-row .share[data-v-2f547f8a]{color:var(--muted)}.time-summary-row.top-category[data-v-2f547f8a]{align-items:center;gap:calc(6px * var(--widget-space, 1))}.time-summary-activity[data-v-2f547f8a]{margin-top:calc(6px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px solid var(--line);display:grid;gap:calc(2px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.time-summary-activity__title[data-v-2f547f8a]{font-weight:600;color:var(--fg)}.time-summary-activity__line[data-v-2f547f8a]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.time-summary-activity__delta[data-v-2f547f8a]{color:var(--muted)}.time-summary-delta[data-v-2f547f8a]{margin-top:calc(6px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px dashed color-mix(in oklab,var(--muted),transparent 70%);font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.time-summary-history[data-v-2f547f8a]{margin-top:calc(8px * var(--widget-space, 1));padding-top:calc(8px * var(--widget-space, 1));border-top:1px solid var(--line);display:grid;gap:calc(8px * var(--widget-space, 1))}.time-summary-history__header[data-v-2f547f8a]{display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.time-summary-history__title[data-v-2f547f8a]{font-weight:600;color:var(--fg)}.time-summary-history__mode[data-v-2f547f8a]{font-size:calc(11px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.08em;color:var(--muted)}.time-summary-history__list[data-v-2f547f8a]{display:grid;gap:calc(10px * var(--widget-space, 1))}.history-entry[data-v-2f547f8a]{border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 20%);border-radius:calc(12px * var(--widget-space, 1));padding:calc(10px * var(--widget-space, 1));background:color-mix(in oklab,var(--card, #fff),transparent 6%)}.history-entry__header[data-v-2f547f8a]{display:flex;flex-wrap:wrap;align-items:center;gap:calc(6px * var(--widget-space, 1)) calc(10px * var(--widget-space, 1));margin-bottom:calc(8px * var(--widget-space, 1))}.history-entry__title[data-v-2f547f8a]{font-weight:600;color:var(--fg)}.history-entry__range[data-v-2f547f8a]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.history-entry__metrics[data-v-2f547f8a]{display:grid;gap:calc(6px * var(--widget-space, 1));grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}.history-entry__metric[data-v-2f547f8a]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.history-entry__metric-label[data-v-2f547f8a]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted);text-transform:uppercase;letter-spacing:.05em}.history-entry__metric-value[data-v-2f547f8a]{font-size:calc(12px * var(--widget-scale, 1));color:var(--fg)}.time-summary-history__pills[data-v-2f547f8a]{display:grid;gap:calc(10px * var(--widget-space, 1))}.history-pill[data-v-2f547f8a]{border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 20%);border-radius:calc(999px * var(--widget-space, 1));padding:calc(8px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));background:color-mix(in oklab,var(--card, #fff),transparent 6%);display:grid;gap:calc(6px * var(--widget-space, 1))}.history-pill__title[data-v-2f547f8a]{font-weight:600;color:var(--fg);font-size:calc(12px * var(--widget-scale, 1))}.history-pill__metrics[data-v-2f547f8a]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.history-pill__metric[data-v-2f547f8a]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;background:color-mix(in oklab,var(--card, #fff),transparent 12%);border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 35%)}.history-pill__metric-label[data-v-2f547f8a]{font-size:calc(10px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.06em;color:var(--muted)}.history-pill__metric-value[data-v-2f547f8a]{font-size:calc(11px * var(--widget-scale, 1));color:var(--fg);font-weight:600}.summary-badge[data-v-2f547f8a]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(11px * var(--widget-scale, 1));font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-2f547f8a]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-2f547f8a]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-2f547f8a]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-2f547f8a]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-2f547f8a]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}
/*$vite$:1*/`,document.head.appendChild(Us);/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function cn(e){const t=Object.create(null);for(const a of e.split(","))t[a]=1;return a=>a in t}const Qe={},Ja=[],ra=()=>{},Vs=()=>!1,ir=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),dn=e=>e.startsWith("onUpdate:"),ht=Object.assign,un=(e,t)=>{const a=e.indexOf(t);a>-1&&e.splice(a,1)},pd=Object.prototype.hasOwnProperty,qe=(e,t)=>pd.call(e,t),Ee=Array.isArray,Ya=e=>yo(e)==="[object Map]",cr=e=>yo(e)==="[object Set]",Ks=e=>yo(e)==="[object Date]",Oe=e=>typeof e=="function",lt=e=>typeof e=="string",Zt=e=>typeof e=="symbol",et=e=>e!==null&&typeof e=="object",qs=e=>(et(e)||Oe(e))&&Oe(e.then)&&Oe(e.catch),Gs=Object.prototype.toString,yo=e=>Gs.call(e),hd=e=>yo(e).slice(8,-1),Js=e=>yo(e)==="[object Object]",fn=e=>lt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,wo=cn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dr=e=>{const t=Object.create(null);return a=>t[a]||(t[a]=e(a))},md=/-(\w)/g,Ut=dr(e=>e.replace(md,(t,a)=>a?a.toUpperCase():"")),vd=/\B([A-Z])/g,Sa=dr(e=>e.replace(vd,"-$1").toLowerCase()),ur=dr(e=>e.charAt(0).toUpperCase()+e.slice(1)),gn=dr(e=>e?`on${ur(e)}`:""),$a=(e,t)=>!Object.is(e,t),fr=(e,...t)=>{for(let a=0;a<e.length;a++)e[a](...t)},Ys=(e,t,a,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:a})},gr=e=>{const t=parseFloat(e);return isNaN(t)?e:t},bd=e=>{const t=lt(e)?Number(e):NaN;return isNaN(t)?e:t};let Zs;const pr=()=>Zs||(Zs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Le(e){if(Ee(e)){const t={};for(let a=0;a<e.length;a++){const o=e[a],r=lt(o)?_d(o):Le(o);if(r)for(const n in r)t[n]=r[n]}return t}else if(lt(e)||et(e))return e}const yd=/;(?![^(]*\))/g,wd=/:([^]+)/,kd=/\/\*[^]*?\*\//g;function _d(e){const t={};return e.replace(kd,"").split(yd).forEach(a=>{if(a){const o=a.split(wd);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Ne(e){let t="";if(lt(e))t=e;else if(Ee(e))for(let a=0;a<e.length;a++){const o=Ne(e[a]);o&&(t+=o+" ")}else if(et(e))for(const a in e)e[a]&&(t+=a+" ");return t.trim()}const xd=cn("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Xs(e){return!!e||e===""}function Cd(e,t){if(e.length!==t.length)return!1;let a=!0;for(let o=0;a&&o<e.length;o++)a=hr(e[o],t[o]);return a}function hr(e,t){if(e===t)return!0;let a=Ks(e),o=Ks(t);if(a||o)return a&&o?e.getTime()===t.getTime():!1;if(a=Zt(e),o=Zt(t),a||o)return e===t;if(a=Ee(e),o=Ee(t),a||o)return a&&o?Cd(e,t):!1;if(a=et(e),o=et(t),a||o){if(!a||!o)return!1;const r=Object.keys(e).length,n=Object.keys(t).length;if(r!==n)return!1;for(const s in e){const i=e.hasOwnProperty(s),l=t.hasOwnProperty(s);if(i&&!l||!i&&l||!hr(e[s],t[s]))return!1}}return String(e)===String(t)}function Sd(e,t){return e.findIndex(a=>hr(a,t))}const Qs=e=>!!(e&&e.__v_isRef===!0),H=e=>lt(e)?e:e==null?"":Ee(e)||et(e)&&(e.toString===Gs||!Oe(e.toString))?Qs(e)?H(e.value):JSON.stringify(e,el,2):String(e),el=(e,t)=>Qs(t)?el(e,t.value):Ya(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((a,[o,r],n)=>(a[pn(o,n)+" =>"]=r,a),{})}:cr(t)?{[`Set(${t.size})`]:[...t.values()].map(a=>pn(a))}:Zt(t)?pn(t):et(t)&&!Ee(t)&&!Js(t)?String(t):t,pn=(e,t="")=>{var a;return Zt(e)?`Symbol(${(a=e.description)!=null?a:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Lt;class $d{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Lt,!t&&Lt&&(this.index=(Lt.scopes||(Lt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].pause();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].resume();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].resume()}}run(t){if(this._active){const a=Lt;try{return Lt=this,t()}finally{Lt=a}}}on(){++this._on===1&&(this.prevScope=Lt,Lt=this)}off(){this._on>0&&--this._on===0&&(Lt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let a,o;for(a=0,o=this.effects.length;a<o;a++)this.effects[a].stop();for(this.effects.length=0,a=0,o=this.cleanups.length;a<o;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,o=this.scopes.length;a<o;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Td(){return Lt}let ot;const hn=new WeakSet;class tl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Lt&&Lt.active&&Lt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,hn.has(this)&&(hn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ol(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,il(this),rl(this);const t=ot,a=Xt;ot=this,Xt=!0;try{return this.fn()}finally{nl(this),ot=t,Xt=a,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)yn(t);this.deps=this.depsTail=void 0,il(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?hn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){bn(this)&&this.run()}get dirty(){return bn(this)}}let al=0,ko,_o;function ol(e,t=!1){if(e.flags|=8,t){e.next=_o,_o=e;return}e.next=ko,ko=e}function mn(){al++}function vn(){if(--al>0)return;if(_o){let t=_o;for(_o=void 0;t;){const a=t.next;t.next=void 0,t.flags&=-9,t=a}}let e;for(;ko;){let t=ko;for(ko=void 0;t;){const a=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=a}}if(e)throw e}function rl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function nl(e){let t,a=e.depsTail,o=a;for(;o;){const r=o.prevDep;o.version===-1?(o===a&&(a=r),yn(o),Md(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=r}e.deps=t,e.depsTail=a}function bn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(sl(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function sl(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===xo)||(e.globalVersion=xo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!bn(e))))return;e.flags|=2;const t=e.dep,a=ot,o=Xt;ot=e,Xt=!0;try{rl(e);const r=e.fn(e._value);(t.version===0||$a(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{ot=a,Xt=o,nl(e),e.flags&=-3}}function yn(e,t=!1){const{dep:a,prevSub:o,nextSub:r}=e;if(o&&(o.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=o,e.nextSub=void 0),a.subs===e&&(a.subs=o,!o&&a.computed)){a.computed.flags&=-5;for(let n=a.computed.deps;n;n=n.nextDep)yn(n,!0)}!t&&!--a.sc&&a.map&&a.map.delete(a.key)}function Md(e){const{prevDep:t,nextDep:a}=e;t&&(t.nextDep=a,e.prevDep=void 0),a&&(a.prevDep=t,e.nextDep=void 0)}let Xt=!0;const ll=[];function na(){ll.push(Xt),Xt=!1}function sa(){const e=ll.pop();Xt=e===void 0?!0:e}function il(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const a=ot;ot=void 0;try{t()}finally{ot=a}}}let xo=0;class Ad{constructor(t,a){this.sub=t,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class wn{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!ot||!Xt||ot===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==ot)a=this.activeLink=new Ad(ot,this),ot.deps?(a.prevDep=ot.depsTail,ot.depsTail.nextDep=a,ot.depsTail=a):ot.deps=ot.depsTail=a,cl(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const o=a.nextDep;o.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=o),a.prevDep=ot.depsTail,a.nextDep=void 0,ot.depsTail.nextDep=a,ot.depsTail=a,ot.deps===a&&(ot.deps=o)}return a}trigger(t){this.version++,xo++,this.notify(t)}notify(t){mn();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{vn()}}}function cl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)cl(o)}const a=e.dep.subs;a!==e&&(e.prevSub=a,a&&(a.nextSub=e)),e.dep.subs=e}}const mr=new WeakMap,Pa=Symbol(""),kn=Symbol(""),Co=Symbol("");function xt(e,t,a){if(Xt&&ot){let o=mr.get(e);o||mr.set(e,o=new Map);let r=o.get(a);r||(o.set(a,r=new wn),r.map=o,r.key=a),r.track()}}function pa(e,t,a,o,r,n){const s=mr.get(e);if(!s){xo++;return}const i=l=>{l&&l.trigger()};if(mn(),t==="clear")s.forEach(i);else{const l=Ee(e),c=l&&fn(a);if(l&&a==="length"){const d=Number(o);s.forEach((p,m)=>{(m==="length"||m===Co||!Zt(m)&&m>=d)&&i(p)})}else switch((a!==void 0||s.has(void 0))&&i(s.get(a)),c&&i(s.get(Co)),t){case"add":l?c&&i(s.get("length")):(i(s.get(Pa)),Ya(e)&&i(s.get(kn)));break;case"delete":l||(i(s.get(Pa)),Ya(e)&&i(s.get(kn)));break;case"set":Ya(e)&&i(s.get(Pa));break}}vn()}function Dd(e,t){const a=mr.get(e);return a&&a.get(t)}function Za(e){const t=Ue(e);return t===e?t:(xt(t,"iterate",Co),Vt(e)?t:t.map(wt))}function vr(e){return xt(e=Ue(e),"iterate",Co),e}const Ed={__proto__:null,[Symbol.iterator](){return _n(this,Symbol.iterator,wt)},concat(...e){return Za(this).concat(...e.map(t=>Ee(t)?Za(t):t))},entries(){return _n(this,"entries",e=>(e[1]=wt(e[1]),e))},every(e,t){return ha(this,"every",e,t,void 0,arguments)},filter(e,t){return ha(this,"filter",e,t,a=>a.map(wt),arguments)},find(e,t){return ha(this,"find",e,t,wt,arguments)},findIndex(e,t){return ha(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ha(this,"findLast",e,t,wt,arguments)},findLastIndex(e,t){return ha(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ha(this,"forEach",e,t,void 0,arguments)},includes(...e){return xn(this,"includes",e)},indexOf(...e){return xn(this,"indexOf",e)},join(e){return Za(this).join(e)},lastIndexOf(...e){return xn(this,"lastIndexOf",e)},map(e,t){return ha(this,"map",e,t,void 0,arguments)},pop(){return So(this,"pop")},push(...e){return So(this,"push",e)},reduce(e,...t){return dl(this,"reduce",e,t)},reduceRight(e,...t){return dl(this,"reduceRight",e,t)},shift(){return So(this,"shift")},some(e,t){return ha(this,"some",e,t,void 0,arguments)},splice(...e){return So(this,"splice",e)},toReversed(){return Za(this).toReversed()},toSorted(e){return Za(this).toSorted(e)},toSpliced(...e){return Za(this).toSpliced(...e)},unshift(...e){return So(this,"unshift",e)},values(){return _n(this,"values",wt)}};function _n(e,t,a){const o=vr(e),r=o[t]();return o!==e&&!Vt(e)&&(r._next=r.next,r.next=()=>{const n=r._next();return n.value&&(n.value=a(n.value)),n}),r}const Ld=Array.prototype;function ha(e,t,a,o,r,n){const s=vr(e),i=s!==e&&!Vt(e),l=s[t];if(l!==Ld[t]){const p=l.apply(e,n);return i?wt(p):p}let c=a;s!==e&&(i?c=function(p,m){return a.call(this,wt(p),m,e)}:a.length>2&&(c=function(p,m){return a.call(this,p,m,e)}));const d=l.call(s,c,o);return i&&r?r(d):d}function dl(e,t,a,o){const r=vr(e);let n=a;return r!==e&&(Vt(e)?a.length>3&&(n=function(s,i,l){return a.call(this,s,i,l,e)}):n=function(s,i,l){return a.call(this,s,wt(i),l,e)}),r[t](n,...o)}function xn(e,t,a){const o=Ue(e);xt(o,"iterate",Co);const r=o[t](...a);return(r===-1||r===!1)&&Sn(a[0])?(a[0]=Ue(a[0]),o[t](...a)):r}function So(e,t,a=[]){na(),mn();const o=Ue(e)[t].apply(e,a);return vn(),sa(),o}const Nd=cn("__proto__,__v_isRef,__isVue"),ul=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Zt));function Id(e){Zt(e)||(e=String(e));const t=Ue(this);return xt(t,"has",e),t.hasOwnProperty(e)}class fl{constructor(t=!1,a=!1){this._isReadonly=t,this._isShallow=a}get(t,a,o){if(a==="__v_skip")return t.__v_skip;const r=this._isReadonly,n=this._isShallow;if(a==="__v_isReactive")return!r;if(a==="__v_isReadonly")return r;if(a==="__v_isShallow")return n;if(a==="__v_raw")return o===(r?n?bl:vl:n?ml:hl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const s=Ee(t);if(!r){let l;if(s&&(l=Ed[a]))return l;if(a==="hasOwnProperty")return Id}const i=Reflect.get(t,a,gt(t)?t:o);return(Zt(a)?ul.has(a):Nd(a))||(r||xt(t,"get",a),n)?i:gt(i)?s&&fn(a)?i:i.value:et(i)?r?yl(i):Xa(i):i}}class gl extends fl{constructor(t=!1){super(!1,t)}set(t,a,o,r){let n=t[a];if(!this._isShallow){const l=Ta(n);if(!Vt(o)&&!Ta(o)&&(n=Ue(n),o=Ue(o)),!Ee(t)&&gt(n)&&!gt(o))return l||(n.value=o),!0}const s=Ee(t)&&fn(a)?Number(a)<t.length:qe(t,a),i=Reflect.set(t,a,o,gt(t)?t:r);return t===Ue(r)&&(s?$a(o,n)&&pa(t,"set",a,o):pa(t,"add",a,o)),i}deleteProperty(t,a){const o=qe(t,a);t[a];const r=Reflect.deleteProperty(t,a);return r&&o&&pa(t,"delete",a,void 0),r}has(t,a){const o=Reflect.has(t,a);return(!Zt(a)||!ul.has(a))&&xt(t,"has",a),o}ownKeys(t){return xt(t,"iterate",Ee(t)?"length":Pa),Reflect.ownKeys(t)}}class pl extends fl{constructor(t=!1){super(!0,t)}set(t,a){return!0}deleteProperty(t,a){return!0}}const Bd=new gl,Od=new pl,Pd=new gl(!0),Fd=new pl(!0),Cn=e=>e,br=e=>Reflect.getPrototypeOf(e);function Hd(e,t,a){return function(...o){const r=this.__v_raw,n=Ue(r),s=Ya(n),i=e==="entries"||e===Symbol.iterator&&s,l=e==="keys"&&s,c=r[e](...o),d=a?Cn:t?_r:wt;return!t&&xt(n,"iterate",l?kn:Pa),{next(){const{value:p,done:m}=c.next();return m?{value:p,done:m}:{value:i?[d(p[0]),d(p[1])]:d(p),done:m}},[Symbol.iterator](){return this}}}}function yr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Wd(e,t){const a={get(r){const n=this.__v_raw,s=Ue(n),i=Ue(r);e||($a(r,i)&&xt(s,"get",r),xt(s,"get",i));const{has:l}=br(s),c=t?Cn:e?_r:wt;if(l.call(s,r))return c(n.get(r));if(l.call(s,i))return c(n.get(i));n!==s&&n.get(r)},get size(){const r=this.__v_raw;return!e&&xt(Ue(r),"iterate",Pa),r.size},has(r){const n=this.__v_raw,s=Ue(n),i=Ue(r);return e||($a(r,i)&&xt(s,"has",r),xt(s,"has",i)),r===i?n.has(r):n.has(r)||n.has(i)},forEach(r,n){const s=this,i=s.__v_raw,l=Ue(i),c=t?Cn:e?_r:wt;return!e&&xt(l,"iterate",Pa),i.forEach((d,p)=>r.call(n,c(d),c(p),s))}};return ht(a,e?{add:yr("add"),set:yr("set"),delete:yr("delete"),clear:yr("clear")}:{add(r){!t&&!Vt(r)&&!Ta(r)&&(r=Ue(r));const n=Ue(this);return br(n).has.call(n,r)||(n.add(r),pa(n,"add",r,r)),this},set(r,n){!t&&!Vt(n)&&!Ta(n)&&(n=Ue(n));const s=Ue(this),{has:i,get:l}=br(s);let c=i.call(s,r);c||(r=Ue(r),c=i.call(s,r));const d=l.call(s,r);return s.set(r,n),c?$a(n,d)&&pa(s,"set",r,n):pa(s,"add",r,n),this},delete(r){const n=Ue(this),{has:s,get:i}=br(n);let l=s.call(n,r);l||(r=Ue(r),l=s.call(n,r)),i&&i.call(n,r);const c=n.delete(r);return l&&pa(n,"delete",r,void 0),c},clear(){const r=Ue(this),n=r.size!==0,s=r.clear();return n&&pa(r,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(r=>{a[r]=Hd(r,e,t)}),a}function wr(e,t){const a=Wd(e,t);return(o,r,n)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?o:Reflect.get(qe(a,r)&&r in o?a:o,r,n)}const zd={get:wr(!1,!1)},Rd={get:wr(!1,!0)},jd={get:wr(!0,!1)},Ud={get:wr(!0,!0)},hl=new WeakMap,ml=new WeakMap,vl=new WeakMap,bl=new WeakMap;function Vd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Kd(e){return e.__v_skip||!Object.isExtensible(e)?0:Vd(hd(e))}function Xa(e){return Ta(e)?e:kr(e,!1,Bd,zd,hl)}function qd(e){return kr(e,!1,Pd,Rd,ml)}function yl(e){return kr(e,!0,Od,jd,vl)}function iS(e){return kr(e,!0,Fd,Ud,bl)}function kr(e,t,a,o,r){if(!et(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=Kd(e);if(n===0)return e;const s=r.get(e);if(s)return s;const i=new Proxy(e,n===2?o:a);return r.set(e,i),i}function Qa(e){return Ta(e)?Qa(e.__v_raw):!!(e&&e.__v_isReactive)}function Ta(e){return!!(e&&e.__v_isReadonly)}function Vt(e){return!!(e&&e.__v_isShallow)}function Sn(e){return e?!!e.__v_raw:!1}function Ue(e){const t=e&&e.__v_raw;return t?Ue(t):e}function Gd(e){return!qe(e,"__v_skip")&&Object.isExtensible(e)&&Ys(e,"__v_skip",!0),e}const wt=e=>et(e)?Xa(e):e,_r=e=>et(e)?yl(e):e;function gt(e){return e?e.__v_isRef===!0:!1}function le(e){return Jd(e,!1)}function Jd(e,t){return gt(e)?e:new Yd(e,t)}class Yd{constructor(t,a){this.dep=new wn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?t:Ue(t),this._value=a?t:wt(t),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(t){const a=this._rawValue,o=this.__v_isShallow||Vt(t)||Ta(t);t=o?t:Ue(t),$a(t,a)&&(this._rawValue=t,this._value=o?t:wt(t),this.dep.trigger())}}function L(e){return gt(e)?e.value:e}const Zd={get:(e,t,a)=>t==="__v_raw"?e:L(Reflect.get(e,t,a)),set:(e,t,a,o)=>{const r=e[t];return gt(r)&&!gt(a)?(r.value=a,!0):Reflect.set(e,t,a,o)}};function wl(e){return Qa(e)?e:new Proxy(e,Zd)}function Xd(e){const t=Ee(e)?new Array(e.length):{};for(const a in e)t[a]=eu(e,a);return t}class Qd{constructor(t,a,o){this._object=t,this._key=a,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Dd(Ue(this._object),this._key)}}function eu(e,t,a){const o=e[t];return gt(o)?o:new Qd(e,t,a)}class tu{constructor(t,a,o){this.fn=t,this.setter=a,this._value=void 0,this.dep=new wn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=xo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&ot!==this)return ol(this,!0),!0}get value(){const t=this.dep.track();return sl(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function au(e,t,a=!1){let o,r;return Oe(e)?o=e:(o=e.get,r=e.set),new tu(o,r,a)}const xr={},Cr=new WeakMap;let Fa;function ou(e,t=!1,a=Fa){if(a){let o=Cr.get(a);o||Cr.set(a,o=[]),o.push(e)}}function ru(e,t,a=Qe){const{immediate:o,deep:r,once:n,scheduler:s,augmentJob:i,call:l}=a,c=T=>r?T:Vt(T)||r===!1||r===0?ma(T,1):ma(T);let d,p,m,h,u=!1,f=!1;if(gt(e)?(p=()=>e.value,u=Vt(e)):Qa(e)?(p=()=>c(e),u=!0):Ee(e)?(f=!0,u=e.some(T=>Qa(T)||Vt(T)),p=()=>e.map(T=>{if(gt(T))return T.value;if(Qa(T))return c(T);if(Oe(T))return l?l(T,2):T()})):Oe(e)?t?p=l?()=>l(e,2):e:p=()=>{if(m){na();try{m()}finally{sa()}}const T=Fa;Fa=d;try{return l?l(e,3,[h]):e(h)}finally{Fa=T}}:p=ra,t&&r){const T=p,O=r===!0?1/0:r;p=()=>ma(T(),O)}const y=Td(),x=()=>{d.stop(),y&&y.active&&un(y.effects,d)};if(n&&t){const T=t;t=(...O)=>{T(...O),x()}}let S=f?new Array(e.length).fill(xr):xr;const M=T=>{if(!(!(d.flags&1)||!d.dirty&&!T))if(t){const O=d.run();if(r||u||(f?O.some((I,w)=>$a(I,S[w])):$a(O,S))){m&&m();const I=Fa;Fa=d;try{const w=[O,S===xr?void 0:f&&S[0]===xr?[]:S,h];S=O,l?l(t,3,w):t(...w)}finally{Fa=I}}}else d.run()};return i&&i(M),d=new tl(p),d.scheduler=s?()=>s(M,!1):M,h=T=>ou(T,!1,d),m=d.onStop=()=>{const T=Cr.get(d);if(T){if(l)l(T,4);else for(const O of T)O();Cr.delete(d)}},t?o?M(!0):S=d.run():s?s(M.bind(null,!0),!0):d.run(),x.pause=d.pause.bind(d),x.resume=d.resume.bind(d),x.stop=x,x}function ma(e,t=1/0,a){if(t<=0||!et(e)||e.__v_skip||(a=a||new Set,a.has(e)))return e;if(a.add(e),t--,gt(e))ma(e.value,t,a);else if(Ee(e))for(let o=0;o<e.length;o++)ma(e[o],t,a);else if(cr(e)||Ya(e))e.forEach(o=>{ma(o,t,a)});else if(Js(e)){for(const o in e)ma(e[o],t,a);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&ma(e[o],t,a)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const $o=[];let $n=!1;function cS(e,...t){if($n)return;$n=!0,na();const a=$o.length?$o[$o.length-1].component:null,o=a&&a.appContext.config.warnHandler,r=nu();if(o)eo(o,a,11,[e+t.map(n=>{var s,i;return(i=(s=n.toString)==null?void 0:s.call(n))!=null?i:JSON.stringify(n)}).join(""),a&&a.proxy,r.map(({vnode:n})=>`at <${Ti(a,n.type)}>`).join(`
`),r]);else{const n=[`[Vue warn]: ${e}`,...t];r.length&&n.push(`
`,...su(r)),console.warn(...n)}sa(),$n=!1}function nu(){let e=$o[$o.length-1];if(!e)return[];const t=[];for(;e;){const a=t[0];a&&a.vnode===e?a.recurseCount++:t.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return t}function su(e){const t=[];return e.forEach((a,o)=>{t.push(...o===0?[]:[`
`],...lu(a))}),t}function lu({vnode:e,recurseCount:t}){const a=t>0?`... (${t} recursive calls)`:"",o=e.component?e.component.parent==null:!1,r=` at <${Ti(e.component,e.type,o)}`,n=">"+a;return e.props?[r,...iu(e.props),n]:[r+n]}function iu(e){const t=[],a=Object.keys(e);return a.slice(0,3).forEach(o=>{t.push(...kl(o,e[o]))}),a.length>3&&t.push(" ..."),t}function kl(e,t,a){return lt(t)?(t=JSON.stringify(t),a?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?a?t:[`${e}=${t}`]:gt(t)?(t=kl(e,Ue(t.value),!0),a?t:[`${e}=Ref<`,t,">"]):Oe(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Ue(t),a?t:[`${e}=`,t])}function eo(e,t,a,o){try{return o?e(...o):e()}catch(r){To(r,t,a)}}function Qt(e,t,a,o){if(Oe(e)){const r=eo(e,t,a,o);return r&&qs(r)&&r.catch(n=>{To(n,t,a)}),r}if(Ee(e)){const r=[];for(let n=0;n<e.length;n++)r.push(Qt(e[n],t,a,o));return r}}function To(e,t,a,o=!0){const r=t?t.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||Qe;if(t){let i=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${a}`;for(;i;){const d=i.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,l,c)===!1)return}i=i.parent}if(n){na(),eo(n,null,10,[e,l,c]),sa();return}}cu(e,a,r,o,s)}function cu(e,t,a,o=!0,r=!1){if(r)throw e;console.error(e)}const $t=[];let la=-1;const to=[];let Ma=null,ao=0;const _l=Promise.resolve();let Sr=null;function ea(e){const t=Sr||_l;return e?t.then(this?e.bind(this):e):t}function du(e){let t=la+1,a=$t.length;for(;t<a;){const o=t+a>>>1,r=$t[o],n=Mo(r);n<e||n===e&&r.flags&2?t=o+1:a=o}return t}function Tn(e){if(!(e.flags&1)){const t=Mo(e),a=$t[$t.length-1];!a||!(e.flags&2)&&t>=Mo(a)?$t.push(e):$t.splice(du(t),0,e),e.flags|=1,xl()}}function xl(){Sr||(Sr=_l.then($l))}function uu(e){Ee(e)?to.push(...e):Ma&&e.id===-1?Ma.splice(ao+1,0,e):e.flags&1||(to.push(e),e.flags|=1),xl()}function Cl(e,t,a=la+1){for(;a<$t.length;a++){const o=$t[a];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;$t.splice(a,1),a--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Sl(e){if(to.length){const t=[...new Set(to)].sort((a,o)=>Mo(a)-Mo(o));if(to.length=0,Ma){Ma.push(...t);return}for(Ma=t,ao=0;ao<Ma.length;ao++){const a=Ma[ao];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}Ma=null,ao=0}}const Mo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function $l(e){try{for(la=0;la<$t.length;la++){const t=$t[la];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),eo(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;la<$t.length;la++){const t=$t[la];t&&(t.flags&=-2)}la=-1,$t.length=0,Sl(),Sr=null,($t.length||to.length)&&$l()}}let kt=null,Tl=null;function $r(e){const t=kt;return kt=e,Tl=e&&e.type.__scopeId||null,t}function Je(e,t=kt,a){if(!t||e._n)return e;const o=(...r)=>{o._d&&bi(-1);const n=$r(t);let s;try{s=e(...r)}finally{$r(n),o._d&&bi(1)}return s};return o._n=!0,o._c=!0,o._d=!0,o}function oo(e,t){if(kt===null)return e;const a=Fr(kt),o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[n,s,i,l=Qe]=t[r];n&&(Oe(n)&&(n={mounted:n,updated:n}),n.deep&&ma(s),o.push({dir:n,instance:a,value:s,oldValue:void 0,arg:i,modifiers:l}))}return e}function Ha(e,t,a,o){const r=e.dirs,n=t&&t.dirs;for(let s=0;s<r.length;s++){const i=r[s];n&&(i.oldValue=n[s].value);let l=i.dir[o];l&&(na(),Qt(l,a,8,[e.el,i,e,t]),sa())}}const Ml=Symbol("_vte"),Al=e=>e.__isTeleport,Ao=e=>e&&(e.disabled||e.disabled===""),Dl=e=>e&&(e.defer||e.defer===""),El=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Ll=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Mn=(e,t)=>{const a=e&&e.to;return lt(a)?t?t(a):null:a},Nl={name:"Teleport",__isTeleport:!0,process(e,t,a,o,r,n,s,i,l,c){const{mc:d,pc:p,pbc:m,o:{insert:h,querySelector:u,createText:f,createComment:y}}=c,x=Ao(t.props);let{shapeFlag:S,children:M,dynamicChildren:T}=t;if(e==null){const O=t.el=f(""),I=t.anchor=f("");h(O,a,o),h(I,a,o);const w=(P,W)=>{S&16&&(r&&r.isCE&&(r.ce._teleportTarget=P),d(M,P,W,r,n,s,i,l))},E=()=>{const P=t.target=Mn(t.props,u),W=Il(P,t,f,h);P&&(s!=="svg"&&El(P)?s="svg":s!=="mathml"&&Ll(P)&&(s="mathml"),x||(w(P,W),Mr(t,!1)))};x&&(w(a,I),Mr(t,!0)),Dl(t.props)?(t.el.__isMounted=!1,At(()=>{E(),delete t.el.__isMounted},n)):E()}else{if(Dl(t.props)&&e.el.__isMounted===!1){At(()=>{Nl.process(e,t,a,o,r,n,s,i,l,c)},n);return}t.el=e.el,t.targetStart=e.targetStart;const O=t.anchor=e.anchor,I=t.target=e.target,w=t.targetAnchor=e.targetAnchor,E=Ao(e.props),P=E?a:I,W=E?O:w;if(s==="svg"||El(I)?s="svg":(s==="mathml"||Ll(I))&&(s="mathml"),T?(m(e.dynamicChildren,T,P,r,n,s,i),Rn(e,t,!0)):l||p(e,t,P,W,r,n,s,i,!1),x)E?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Tr(t,a,O,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const Z=t.target=Mn(t.props,u);Z&&Tr(t,Z,null,c,0)}else E&&Tr(t,I,w,c,1);Mr(t,x)}},remove(e,t,a,{um:o,o:{remove:r}},n){const{shapeFlag:s,children:i,anchor:l,targetStart:c,targetAnchor:d,target:p,props:m}=e;if(p&&(r(c),r(d)),n&&r(l),s&16){const h=n||!Ao(m);for(let u=0;u<i.length;u++){const f=i[u];o(f,t,a,h,!!f.dynamicChildren)}}},move:Tr,hydrate:fu};function Tr(e,t,a,{o:{insert:o},m:r},n=2){n===0&&o(e.targetAnchor,t,a);const{el:s,anchor:i,shapeFlag:l,children:c,props:d}=e,p=n===2;if(p&&o(s,t,a),(!p||Ao(d))&&l&16)for(let m=0;m<c.length;m++)r(c[m],t,a,2);p&&o(i,t,a)}function fu(e,t,a,o,r,n,{o:{nextSibling:s,parentNode:i,querySelector:l,insert:c,createText:d}},p){const m=t.target=Mn(t.props,l);if(m){const h=Ao(t.props),u=m._lpa||m.firstChild;if(t.shapeFlag&16)if(h)t.anchor=p(s(e),t,i(e),a,o,r,n),t.targetStart=u,t.targetAnchor=u&&s(u);else{t.anchor=s(e);let f=u;for(;f;){if(f&&f.nodeType===8){if(f.data==="teleport start anchor")t.targetStart=f;else if(f.data==="teleport anchor"){t.targetAnchor=f,m._lpa=t.targetAnchor&&s(t.targetAnchor);break}}f=s(f)}t.targetAnchor||Il(m,t,d,c),p(u&&s(u),t,m,a,o,r,n)}Mr(t,h)}return t.anchor&&s(t.anchor)}const gu=Nl;function Mr(e,t){const a=e.ctx;if(a&&a.ut){let o,r;for(t?(o=e.el,r=e.anchor):(o=e.targetStart,r=e.targetAnchor);o&&o!==r;)o.nodeType===1&&o.setAttribute("data-v-owner",a.uid),o=o.nextSibling;a.ut()}}function Il(e,t,a,o){const r=t.targetStart=a(""),n=t.targetAnchor=a("");return r[Ml]=n,e&&(o(r,e),o(n,e)),n}const va=Symbol("_leaveCb"),Ar=Symbol("_enterCb");function pu(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Tt(()=>{e.isMounted=!0}),Ct(()=>{e.isUnmounting=!0}),e}const Kt=[Function,Array],Bl={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Kt,onEnter:Kt,onAfterEnter:Kt,onEnterCancelled:Kt,onBeforeLeave:Kt,onLeave:Kt,onAfterLeave:Kt,onLeaveCancelled:Kt,onBeforeAppear:Kt,onAppear:Kt,onAfterAppear:Kt,onAppearCancelled:Kt},Ol=e=>{const t=e.subTree;return t.component?Ol(t.component):t},hu={name:"BaseTransition",props:Bl,setup(e,{slots:t}){const a=Or(),o=pu();return()=>{const r=t.default&&Wl(t.default(),!0);if(!r||!r.length)return;const n=Pl(r),s=Ue(e),{mode:i}=s;if(o.isLeaving)return Dn(n);const l=Hl(n);if(!l)return Dn(n);let c=An(l,s,o,a,p=>c=p);l.type!==St&&Do(l,c);let d=a.subTree&&Hl(a.subTree);if(d&&d.type!==St&&!za(l,d)&&Ol(a).type!==St){let p=An(d,s,o,a);if(Do(d,p),i==="out-in"&&l.type!==St)return o.isLeaving=!0,p.afterLeave=()=>{o.isLeaving=!1,a.job.flags&8||a.update(),delete p.afterLeave,d=void 0},Dn(n);i==="in-out"&&l.type!==St?p.delayLeave=(m,h,u)=>{const f=Fl(o,d);f[String(d.key)]=d,m[va]=()=>{h(),m[va]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{u(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return n}}};function Pl(e){let t=e[0];if(e.length>1){for(const a of e)if(a.type!==St){t=a;break}}return t}const mu=hu;function Fl(e,t){const{leavingVNodes:a}=e;let o=a.get(t.type);return o||(o=Object.create(null),a.set(t.type,o)),o}function An(e,t,a,o,r){const{appear:n,mode:s,persisted:i=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:m,onLeave:h,onAfterLeave:u,onLeaveCancelled:f,onBeforeAppear:y,onAppear:x,onAfterAppear:S,onAppearCancelled:M}=t,T=String(e.key),O=Fl(a,e),I=(P,W)=>{P&&Qt(P,o,9,W)},w=(P,W)=>{const Z=W[1];I(P,W),Ee(P)?P.every(F=>F.length<=1)&&Z():P.length<=1&&Z()},E={mode:s,persisted:i,beforeEnter(P){let W=l;if(!a.isMounted)if(n)W=y||l;else return;P[va]&&P[va](!0);const Z=O[T];Z&&za(e,Z)&&Z.el[va]&&Z.el[va](),I(W,[P])},enter(P){let W=c,Z=d,F=p;if(!a.isMounted)if(n)W=x||c,Z=S||d,F=M||p;else return;let C=!1;const v=P[Ar]=b=>{C||(C=!0,b?I(F,[P]):I(Z,[P]),E.delayedLeave&&E.delayedLeave(),P[Ar]=void 0)};W?w(W,[P,v]):v()},leave(P,W){const Z=String(e.key);if(P[Ar]&&P[Ar](!0),a.isUnmounting)return W();I(m,[P]);let F=!1;const C=P[va]=v=>{F||(F=!0,W(),v?I(f,[P]):I(u,[P]),P[va]=void 0,O[Z]===e&&delete O[Z])};O[Z]=e,h?w(h,[P,C]):C()},clone(P){const W=An(P,t,a,o,r);return r&&r(W),W}};return E}function Dn(e){if(Lo(e))return e=Aa(e),e.children=null,e}function Hl(e){if(!Lo(e))return Al(e.type)&&e.children?Pl(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:a}=e;if(a){if(t&16)return a[0];if(t&32&&Oe(a.default))return a.default()}}function Do(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Do(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Wl(e,t=!1,a){let o=[],r=0;for(let n=0;n<e.length;n++){let s=e[n];const i=a==null?s.key:String(a)+String(s.key!=null?s.key:n);s.type===he?(s.patchFlag&128&&r++,o=o.concat(Wl(s.children,t,i))):(t||s.type!==St)&&o.push(i!=null?Aa(s,{key:i}):s)}if(r>1)for(let n=0;n<o.length;n++)o[n].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function Ie(e,t){return Oe(e)?ht({name:e.name},t,{setup:e}):e}function En(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Eo(e,t,a,o,r=!1){if(Ee(e)){e.forEach((u,f)=>Eo(u,t&&(Ee(t)?t[f]:t),a,o,r));return}if(ro(o)&&!r){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Eo(e,t,a,o.component.subTree);return}const n=o.shapeFlag&4?Fr(o.component):o.el,s=r?null:n,{i,r:l}=e,c=t&&t.r,d=i.refs===Qe?i.refs={}:i.refs,p=i.setupState,m=Ue(p),h=p===Qe?Vs:u=>qe(m,u);if(c!=null&&c!==l){if(lt(c))d[c]=null,h(c)&&(p[c]=null);else if(gt(c)){c.value=null;const u=t;u.k&&(d[u.k]=null)}}if(Oe(l))eo(l,i,12,[s,d]);else{const u=lt(l),f=gt(l);if(u||f){const y=()=>{if(e.f){const x=u?h(l)?p[l]:d[l]:l.value;if(r)Ee(x)&&un(x,n);else if(Ee(x))x.includes(n)||x.push(n);else if(u)d[l]=[n],h(l)&&(p[l]=d[l]);else{const S=[n];l.value=S,e.k&&(d[e.k]=S)}}else u?(d[l]=s,h(l)&&(p[l]=s)):f&&(l.value=s,e.k&&(d[e.k]=s))};s?(y.id=-1,At(y,a)):y()}}}const zl=e=>e.nodeType===8;pr().requestIdleCallback,pr().cancelIdleCallback;function vu(e,t){if(zl(e)&&e.data==="["){let a=1,o=e.nextSibling;for(;o;){if(o.nodeType===1){if(t(o)===!1)break}else if(zl(o))if(o.data==="]"){if(--a===0)break}else o.data==="["&&a++;o=o.nextSibling}}else t(e)}const ro=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Nt(e){Oe(e)&&(e={loader:e});const{loader:t,loadingComponent:a,errorComponent:o,delay:r=200,hydrate:n,timeout:s,suspensible:i=!0,onError:l}=e;let c=null,d,p=0;const m=()=>(p++,c=null,h()),h=()=>{let u;return c||(u=c=t().catch(f=>{if(f=f instanceof Error?f:new Error(String(f)),l)return new Promise((y,x)=>{l(f,()=>y(m()),()=>x(f),p+1)});throw f}).then(f=>u!==c&&c?c:(f&&(f.__esModule||f[Symbol.toStringTag]==="Module")&&(f=f.default),d=f,f)))};return Ie({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(u,f,y){let x=!1;(f.bu||(f.bu=[])).push(()=>x=!0);const S=()=>{x||y()},M=n?()=>{const T=n(S,O=>vu(u,O));T&&(f.bum||(f.bum=[])).push(T)}:S;d?M():h().then(()=>!f.isUnmounted&&M())},get __asyncResolved(){return d},setup(){const u=_t;if(En(u),d)return()=>Ln(d,u);const f=M=>{c=null,To(M,u,13,!o)};if(i&&u.suspense||so)return h().then(M=>()=>Ln(M,u)).catch(M=>(f(M),()=>o?Ae(o,{error:M}):null));const y=le(!1),x=le(),S=le(!!r);return r&&setTimeout(()=>{S.value=!1},r),s!=null&&setTimeout(()=>{if(!y.value&&!x.value){const M=new Error(`Async component timed out after ${s}ms.`);f(M),x.value=M}},s),h().then(()=>{y.value=!0,u.parent&&Lo(u.parent.vnode)&&u.parent.update()}).catch(M=>{f(M),x.value=M}),()=>{if(y.value&&d)return Ln(d,u);if(x.value&&o)return Ae(o,{error:x.value});if(a&&!S.value)return Ae(a)}}})}function Ln(e,t){const{ref:a,props:o,children:r,ce:n}=t.vnode,s=Ae(e,o,r);return s.ref=a,s.ce=n,delete t.vnode.ce,s}const Lo=e=>e.type.__isKeepAlive;function bu(e,t){Rl(e,"a",t)}function yu(e,t){Rl(e,"da",t)}function Rl(e,t,a=_t){const o=e.__wdc||(e.__wdc=()=>{let r=a;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Dr(t,o,a),a){let r=a.parent;for(;r&&r.parent;)Lo(r.parent.vnode)&&wu(o,t,a,r),r=r.parent}}function wu(e,t,a,o){const r=Dr(t,e,o,!0);Nn(()=>{un(o[t],r)},a)}function Dr(e,t,a=_t,o=!1){if(a){const r=a[e]||(a[e]=[]),n=t.__weh||(t.__weh=(...s)=>{na();const i=Fo(a),l=Qt(t,a,e,s);return i(),sa(),l});return o?r.unshift(n):r.push(n),n}}const ba=e=>(t,a=_t)=>{(!so||e==="sp")&&Dr(e,(...o)=>t(...o),a)},ku=ba("bm"),Tt=ba("m"),_u=ba("bu"),xu=ba("u"),Ct=ba("bum"),Nn=ba("um"),Cu=ba("sp"),Su=ba("rtg"),$u=ba("rtc");function Tu(e,t=_t){Dr("ec",e,t)}const jl="components";function Mu(e,t){return Vl(jl,e,!0,t)||e}const Ul=Symbol.for("v-ndc");function Au(e){return lt(e)?Vl(jl,e,!1)||e:e||Ul}function Vl(e,t,a=!0,o=!1){const r=kt||_t;if(r){const n=r.type;{const i=$i(n,!1);if(i&&(i===t||i===Ut(t)||i===ur(Ut(t))))return n}const s=Kl(r[e]||n[e],t)||Kl(r.appContext[e],t);return!s&&o?n:s}}function Kl(e,t){return e&&(e[t]||e[Ut(t)]||e[ur(Ut(t))])}function $e(e,t,a,o){let r;const n=a,s=Ee(e);if(s||lt(e)){const i=s&&Qa(e);let l=!1,c=!1;i&&(l=!Vt(e),c=Ta(e),e=vr(e)),r=new Array(e.length);for(let d=0,p=e.length;d<p;d++)r[d]=t(l?c?_r(wt(e[d])):wt(e[d]):e[d],d,void 0,n)}else if(typeof e=="number"){r=new Array(e);for(let i=0;i<e;i++)r[i]=t(i+1,i,void 0,n)}else if(et(e))if(e[Symbol.iterator])r=Array.from(e,(i,l)=>t(i,l,void 0,n));else{const i=Object.keys(e);r=new Array(i.length);for(let l=0,c=i.length;l<c;l++){const d=i[l];r[l]=t(e[d],d,l,n)}}else r=[];return r}function Du(e,t,a={},o,r){if(kt.ce||kt.parent&&ro(kt.parent)&&kt.parent.ce)return a.name=t,k(),it(he,null,[Ae("slot",a,o)],64);let n=e[t];n&&n._c&&(n._d=!1),k();const s=n&&ql(n(a)),i=a.key||s&&s.key,l=it(he,{key:(i&&!Zt(i)?i:`_${t}`)+(!s&&o?"_fb":"")},s||[],s&&e._===1?64:-2);return n&&n._c&&(n._d=!0),l}function ql(e){return e.some(t=>Po(t)?!(t.type===St||t.type===he&&!ql(t.children)):!0)?e:null}const In=e=>e?xi(e)?Fr(e):In(e.parent):null,No=ht(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>In(e.parent),$root:e=>In(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Zl(e),$forceUpdate:e=>e.f||(e.f=()=>{Tn(e.update)}),$nextTick:e=>e.n||(e.n=ea.bind(e.proxy)),$watch:e=>Xu.bind(e)}),Bn=(e,t)=>e!==Qe&&!e.__isScriptSetup&&qe(e,t),Eu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:a,setupState:o,data:r,props:n,accessCache:s,type:i,appContext:l}=e;let c;if(t[0]!=="$"){const h=s[t];if(h!==void 0)switch(h){case 1:return o[t];case 2:return r[t];case 4:return a[t];case 3:return n[t]}else{if(Bn(o,t))return s[t]=1,o[t];if(r!==Qe&&qe(r,t))return s[t]=2,r[t];if((c=e.propsOptions[0])&&qe(c,t))return s[t]=3,n[t];if(a!==Qe&&qe(a,t))return s[t]=4,a[t];On&&(s[t]=0)}}const d=No[t];let p,m;if(d)return t==="$attrs"&&xt(e.attrs,"get",""),d(e);if((p=i.__cssModules)&&(p=p[t]))return p;if(a!==Qe&&qe(a,t))return s[t]=4,a[t];if(m=l.config.globalProperties,qe(m,t))return m[t]},set({_:e},t,a){const{data:o,setupState:r,ctx:n}=e;return Bn(r,t)?(r[t]=a,!0):o!==Qe&&qe(o,t)?(o[t]=a,!0):qe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=a,!0)},has({_:{data:e,setupState:t,accessCache:a,ctx:o,appContext:r,propsOptions:n,type:s}},i){let l,c;return!!(a[i]||e!==Qe&&i[0]!=="$"&&qe(e,i)||Bn(t,i)||(l=n[0])&&qe(l,i)||qe(o,i)||qe(No,i)||qe(r.config.globalProperties,i)||(c=s.__cssModules)&&c[i])},defineProperty(e,t,a){return a.get!=null?e._.accessCache[t]=0:qe(a,"value")&&this.set(e,t,a.value,null),Reflect.defineProperty(e,t,a)}};function Gl(e){return Ee(e)?e.reduce((t,a)=>(t[a]=null,t),{}):e}let On=!0;function Lu(e){const t=Zl(e),a=e.proxy,o=e.ctx;On=!1,t.beforeCreate&&Jl(t.beforeCreate,e,"bc");const{data:r,computed:n,methods:s,watch:i,provide:l,inject:c,created:d,beforeMount:p,mounted:m,beforeUpdate:h,updated:u,activated:f,deactivated:y,beforeDestroy:x,beforeUnmount:S,destroyed:M,unmounted:T,render:O,renderTracked:I,renderTriggered:w,errorCaptured:E,serverPrefetch:P,expose:W,inheritAttrs:Z,components:F,directives:C,filters:v}=t;if(c&&Nu(c,o,null),s)for(const R in s){const Y=s[R];Oe(Y)&&(o[R]=Y.bind(a))}if(r){const R=r.call(a,a);et(R)&&(e.data=Xa(R))}if(On=!0,n)for(const R in n){const Y=n[R],ne=Oe(Y)?Y.bind(a,a):Oe(Y.get)?Y.get.bind(a,a):ra,X=!Oe(Y)&&Oe(Y.set)?Y.set.bind(a):ra,oe=D({get:ne,set:X});Object.defineProperty(o,R,{enumerable:!0,configurable:!0,get:()=>oe.value,set:se=>oe.value=se})}if(i)for(const R in i)Yl(i[R],o,a,R);if(l){const R=Oe(l)?l.call(a):l;Reflect.ownKeys(R).forEach(Y=>{Hu(Y,R[Y])})}d&&Jl(d,e,"c");function j(R,Y){Ee(Y)?Y.forEach(ne=>R(ne.bind(a))):Y&&R(Y.bind(a))}if(j(ku,p),j(Tt,m),j(_u,h),j(xu,u),j(bu,f),j(yu,y),j(Tu,E),j($u,I),j(Su,w),j(Ct,S),j(Nn,T),j(Cu,P),Ee(W))if(W.length){const R=e.exposed||(e.exposed={});W.forEach(Y=>{Object.defineProperty(R,Y,{get:()=>a[Y],set:ne=>a[Y]=ne,enumerable:!0})})}else e.exposed||(e.exposed={});O&&e.render===ra&&(e.render=O),Z!=null&&(e.inheritAttrs=Z),F&&(e.components=F),C&&(e.directives=C),P&&En(e)}function Nu(e,t,a=ra){Ee(e)&&(e=Pn(e));for(const o in e){const r=e[o];let n;et(r)?"default"in r?n=Lr(r.from||o,r.default,!0):n=Lr(r.from||o):n=Lr(r),gt(n)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>n.value,set:s=>n.value=s}):t[o]=n}}function Jl(e,t,a){Qt(Ee(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,a)}function Yl(e,t,a,o){let r=o.includes(".")?gi(a,o):()=>a[o];if(lt(e)){const n=t[e];Oe(n)&&De(r,n)}else if(Oe(e))De(r,e.bind(a));else if(et(e))if(Ee(e))e.forEach(n=>Yl(n,t,a,o));else{const n=Oe(e.handler)?e.handler.bind(a):t[e.handler];Oe(n)&&De(r,n,e)}}function Zl(e){const t=e.type,{mixins:a,extends:o}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:s}}=e.appContext,i=n.get(t);let l;return i?l=i:!r.length&&!a&&!o?l=t:(l={},r.length&&r.forEach(c=>Er(l,c,s,!0)),Er(l,t,s)),et(t)&&n.set(t,l),l}function Er(e,t,a,o=!1){const{mixins:r,extends:n}=t;n&&Er(e,n,a,!0),r&&r.forEach(s=>Er(e,s,a,!0));for(const s in t)if(!(o&&s==="expose")){const i=Iu[s]||a&&a[s];e[s]=i?i(e[s],t[s]):t[s]}return e}const Iu={data:Xl,props:Ql,emits:Ql,methods:Io,computed:Io,beforeCreate:Mt,created:Mt,beforeMount:Mt,mounted:Mt,beforeUpdate:Mt,updated:Mt,beforeDestroy:Mt,beforeUnmount:Mt,destroyed:Mt,unmounted:Mt,activated:Mt,deactivated:Mt,errorCaptured:Mt,serverPrefetch:Mt,components:Io,directives:Io,watch:Ou,provide:Xl,inject:Bu};function Xl(e,t){return t?e?function(){return ht(Oe(e)?e.call(this,this):e,Oe(t)?t.call(this,this):t)}:t:e}function Bu(e,t){return Io(Pn(e),Pn(t))}function Pn(e){if(Ee(e)){const t={};for(let a=0;a<e.length;a++)t[e[a]]=e[a];return t}return e}function Mt(e,t){return e?[...new Set([].concat(e,t))]:t}function Io(e,t){return e?ht(Object.create(null),e,t):t}function Ql(e,t){return e?Ee(e)&&Ee(t)?[...new Set([...e,...t])]:ht(Object.create(null),Gl(e),Gl(t??{})):t}function Ou(e,t){if(!e)return t;if(!t)return e;const a=ht(Object.create(null),e);for(const o in t)a[o]=Mt(e[o],t[o]);return a}function ei(){return{app:null,config:{isNativeTag:Vs,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Pu=0;function Fu(e,t){return function(o,r=null){Oe(o)||(o=ht({},o)),r!=null&&!et(r)&&(r=null);const n=ei(),s=new WeakSet,i=[];let l=!1;const c=n.app={_uid:Pu++,_component:o,_props:r,_container:null,_context:n,_instance:null,version:wf,get config(){return n.config},set config(d){},use(d,...p){return s.has(d)||(d&&Oe(d.install)?(s.add(d),d.install(c,...p)):Oe(d)&&(s.add(d),d(c,...p))),c},mixin(d){return n.mixins.includes(d)||n.mixins.push(d),c},component(d,p){return p?(n.components[d]=p,c):n.components[d]},directive(d,p){return p?(n.directives[d]=p,c):n.directives[d]},mount(d,p,m){if(!l){const h=c._ceVNode||Ae(o,r);return h.appContext=n,m===!0?m="svg":m===!1&&(m=void 0),e(h,d,m),l=!0,c._container=d,d.__vue_app__=c,Fr(h.component)}},onUnmount(d){i.push(d)},unmount(){l&&(Qt(i,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(d,p){return n.provides[d]=p,c},runWithContext(d){const p=no;no=c;try{return d()}finally{no=p}}};return c}}let no=null;function Hu(e,t){if(_t){let a=_t.provides;const o=_t.parent&&_t.parent.provides;o===a&&(a=_t.provides=Object.create(o)),a[e]=t}}function Lr(e,t,a=!1){const o=Or();if(o||no){let r=no?no._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return a&&Oe(t)?t.call(o&&o.proxy):t}}const ti={},ai=()=>Object.create(ti),oi=e=>Object.getPrototypeOf(e)===ti;function Wu(e,t,a,o=!1){const r={},n=ai();e.propsDefaults=Object.create(null),ri(e,t,r,n);for(const s in e.propsOptions[0])s in r||(r[s]=void 0);a?e.props=o?r:qd(r):e.type.props?e.props=r:e.props=n,e.attrs=n}function zu(e,t,a,o){const{props:r,attrs:n,vnode:{patchFlag:s}}=e,i=Ue(r),[l]=e.propsOptions;let c=!1;if((o||s>0)&&!(s&16)){if(s&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let m=d[p];if(Nr(e.emitsOptions,m))continue;const h=t[m];if(l)if(qe(n,m))h!==n[m]&&(n[m]=h,c=!0);else{const u=Ut(m);r[u]=Fn(l,i,u,h,e,!1)}else h!==n[m]&&(n[m]=h,c=!0)}}}else{ri(e,t,r,n)&&(c=!0);let d;for(const p in i)(!t||!qe(t,p)&&((d=Sa(p))===p||!qe(t,d)))&&(l?a&&(a[p]!==void 0||a[d]!==void 0)&&(r[p]=Fn(l,i,p,void 0,e,!0)):delete r[p]);if(n!==i)for(const p in n)(!t||!qe(t,p))&&(delete n[p],c=!0)}c&&pa(e.attrs,"set","")}function ri(e,t,a,o){const[r,n]=e.propsOptions;let s=!1,i;if(t)for(let l in t){if(wo(l))continue;const c=t[l];let d;r&&qe(r,d=Ut(l))?!n||!n.includes(d)?a[d]=c:(i||(i={}))[d]=c:Nr(e.emitsOptions,l)||(!(l in o)||c!==o[l])&&(o[l]=c,s=!0)}if(n){const l=Ue(a),c=i||Qe;for(let d=0;d<n.length;d++){const p=n[d];a[p]=Fn(r,l,p,c[p],e,!qe(c,p))}}return s}function Fn(e,t,a,o,r,n){const s=e[a];if(s!=null){const i=qe(s,"default");if(i&&o===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&Oe(l)){const{propsDefaults:c}=r;if(a in c)o=c[a];else{const d=Fo(r);o=c[a]=l.call(null,t),d()}}else o=l;r.ce&&r.ce._setProp(a,o)}s[0]&&(n&&!i?o=!1:s[1]&&(o===""||o===Sa(a))&&(o=!0))}return o}const Ru=new WeakMap;function ni(e,t,a=!1){const o=a?Ru:t.propsCache,r=o.get(e);if(r)return r;const n=e.props,s={},i=[];let l=!1;if(!Oe(e)){const d=p=>{l=!0;const[m,h]=ni(p,t,!0);ht(s,m),h&&i.push(...h)};!a&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!n&&!l)return et(e)&&o.set(e,Ja),Ja;if(Ee(n))for(let d=0;d<n.length;d++){const p=Ut(n[d]);si(p)&&(s[p]=Qe)}else if(n)for(const d in n){const p=Ut(d);if(si(p)){const m=n[d],h=s[p]=Ee(m)||Oe(m)?{type:m}:ht({},m),u=h.type;let f=!1,y=!0;if(Ee(u))for(let x=0;x<u.length;++x){const S=u[x],M=Oe(S)&&S.name;if(M==="Boolean"){f=!0;break}else M==="String"&&(y=!1)}else f=Oe(u)&&u.name==="Boolean";h[0]=f,h[1]=y,(f||qe(h,"default"))&&i.push(p)}}const c=[s,i];return et(e)&&o.set(e,c),c}function si(e){return e[0]!=="$"&&!wo(e)}const Hn=e=>e==="_"||e==="_ctx"||e==="$stable",Wn=e=>Ee(e)?e.map(ia):[ia(e)],ju=(e,t,a)=>{if(t._n)return t;const o=Je((...r)=>Wn(t(...r)),a);return o._c=!1,o},li=(e,t,a)=>{const o=e._ctx;for(const r in e){if(Hn(r))continue;const n=e[r];if(Oe(n))t[r]=ju(r,n,o);else if(n!=null){const s=Wn(n);t[r]=()=>s}}},ii=(e,t)=>{const a=Wn(t);e.slots.default=()=>a},ci=(e,t,a)=>{for(const o in t)(a||!Hn(o))&&(e[o]=t[o])},Uu=(e,t,a)=>{const o=e.slots=ai();if(e.vnode.shapeFlag&32){const r=t._;r?(ci(o,t,a),a&&Ys(o,"_",r,!0)):li(t,o)}else t&&ii(e,t)},Vu=(e,t,a)=>{const{vnode:o,slots:r}=e;let n=!0,s=Qe;if(o.shapeFlag&32){const i=t._;i?a&&i===1?n=!1:ci(r,t,a):(n=!t.$stable,li(t,r)),s=t}else t&&(ii(e,t),s={default:1});if(n)for(const i in r)!Hn(i)&&s[i]==null&&delete r[i]},At=nf;function Ku(e){return qu(e)}function qu(e,t){const a=pr();a.__VUE__=!0;const{insert:o,remove:r,patchProp:n,createElement:s,createText:i,createComment:l,setText:c,setElementText:d,parentNode:p,nextSibling:m,setScopeId:h=ra,insertStaticContent:u}=e,f=($,z,N,U=null,G=null,Q=null,pe=void 0,ge=null,de=!!z.dynamicChildren)=>{if($===z)return;$&&!za($,z)&&(U=A($),se($,G,Q,!0),$=null),z.patchFlag===-2&&(de=!1,z.dynamicChildren=null);const{type:ue,ref:ye,shapeFlag:me}=z;switch(ue){case Ir:y($,z,N,U);break;case St:x($,z,N,U);break;case jn:$==null&&S(z,N,U,pe);break;case he:F($,z,N,U,G,Q,pe,ge,de);break;default:me&1?O($,z,N,U,G,Q,pe,ge,de):me&6?C($,z,N,U,G,Q,pe,ge,de):(me&64||me&128)&&ue.process($,z,N,U,G,Q,pe,ge,de,re)}ye!=null&&G?Eo(ye,$&&$.ref,Q,z||$,!z):ye==null&&$&&$.ref!=null&&Eo($.ref,null,Q,$,!0)},y=($,z,N,U)=>{if($==null)o(z.el=i(z.children),N,U);else{const G=z.el=$.el;z.children!==$.children&&c(G,z.children)}},x=($,z,N,U)=>{$==null?o(z.el=l(z.children||""),N,U):z.el=$.el},S=($,z,N,U)=>{[$.el,$.anchor]=u($.children,z,N,U,$.el,$.anchor)},M=({el:$,anchor:z},N,U)=>{let G;for(;$&&$!==z;)G=m($),o($,N,U),$=G;o(z,N,U)},T=({el:$,anchor:z})=>{let N;for(;$&&$!==z;)N=m($),r($),$=N;r(z)},O=($,z,N,U,G,Q,pe,ge,de)=>{z.type==="svg"?pe="svg":z.type==="math"&&(pe="mathml"),$==null?I(z,N,U,G,Q,pe,ge,de):P($,z,G,Q,pe,ge,de)},I=($,z,N,U,G,Q,pe,ge)=>{let de,ue;const{props:ye,shapeFlag:me,transition:ve,dirs:we}=$;if(de=$.el=s($.type,Q,ye&&ye.is,ye),me&8?d(de,$.children):me&16&&E($.children,de,null,U,G,zn($,Q),pe,ge),we&&Ha($,null,U,"created"),w(de,$,$.scopeId,pe,U),ye){for(const xe in ye)xe!=="value"&&!wo(xe)&&n(de,xe,null,ye[xe],Q,U);"value"in ye&&n(de,"value",null,ye.value,Q),(ue=ye.onVnodeBeforeMount)&&ca(ue,U,$)}we&&Ha($,null,U,"beforeMount");const Se=Gu(G,ve);Se&&ve.beforeEnter(de),o(de,z,N),((ue=ye&&ye.onVnodeMounted)||Se||we)&&At(()=>{ue&&ca(ue,U,$),Se&&ve.enter(de),we&&Ha($,null,U,"mounted")},G)},w=($,z,N,U,G)=>{if(N&&h($,N),U)for(let Q=0;Q<U.length;Q++)h($,U[Q]);if(G){let Q=G.subTree;if(z===Q||vi(Q.type)&&(Q.ssContent===z||Q.ssFallback===z)){const pe=G.vnode;w($,pe,pe.scopeId,pe.slotScopeIds,G.parent)}}},E=($,z,N,U,G,Q,pe,ge,de=0)=>{for(let ue=de;ue<$.length;ue++){const ye=$[ue]=ge?Da($[ue]):ia($[ue]);f(null,ye,z,N,U,G,Q,pe,ge)}},P=($,z,N,U,G,Q,pe)=>{const ge=z.el=$.el;let{patchFlag:de,dynamicChildren:ue,dirs:ye}=z;de|=$.patchFlag&16;const me=$.props||Qe,ve=z.props||Qe;let we;if(N&&Wa(N,!1),(we=ve.onVnodeBeforeUpdate)&&ca(we,N,z,$),ye&&Ha(z,$,N,"beforeUpdate"),N&&Wa(N,!0),(me.innerHTML&&ve.innerHTML==null||me.textContent&&ve.textContent==null)&&d(ge,""),ue?W($.dynamicChildren,ue,ge,N,U,zn(z,G),Q):pe||Y($,z,ge,null,N,U,zn(z,G),Q,!1),de>0){if(de&16)Z(ge,me,ve,N,G);else if(de&2&&me.class!==ve.class&&n(ge,"class",null,ve.class,G),de&4&&n(ge,"style",me.style,ve.style,G),de&8){const Se=z.dynamicProps;for(let xe=0;xe<Se.length;xe++){const Te=Se[xe],Me=me[Te],Be=ve[Te];(Be!==Me||Te==="value")&&n(ge,Te,Me,Be,G,N)}}de&1&&$.children!==z.children&&d(ge,z.children)}else!pe&&ue==null&&Z(ge,me,ve,N,G);((we=ve.onVnodeUpdated)||ye)&&At(()=>{we&&ca(we,N,z,$),ye&&Ha(z,$,N,"updated")},U)},W=($,z,N,U,G,Q,pe)=>{for(let ge=0;ge<z.length;ge++){const de=$[ge],ue=z[ge],ye=de.el&&(de.type===he||!za(de,ue)||de.shapeFlag&198)?p(de.el):N;f(de,ue,ye,null,U,G,Q,pe,!0)}},Z=($,z,N,U,G)=>{if(z!==N){if(z!==Qe)for(const Q in z)!wo(Q)&&!(Q in N)&&n($,Q,z[Q],null,G,U);for(const Q in N){if(wo(Q))continue;const pe=N[Q],ge=z[Q];pe!==ge&&Q!=="value"&&n($,Q,ge,pe,G,U)}"value"in N&&n($,"value",z.value,N.value,G)}},F=($,z,N,U,G,Q,pe,ge,de)=>{const ue=z.el=$?$.el:i(""),ye=z.anchor=$?$.anchor:i("");let{patchFlag:me,dynamicChildren:ve,slotScopeIds:we}=z;we&&(ge=ge?ge.concat(we):we),$==null?(o(ue,N,U),o(ye,N,U),E(z.children||[],N,ye,G,Q,pe,ge,de)):me>0&&me&64&&ve&&$.dynamicChildren?(W($.dynamicChildren,ve,N,G,Q,pe,ge),(z.key!=null||G&&z===G.subTree)&&Rn($,z,!0)):Y($,z,N,ye,G,Q,pe,ge,de)},C=($,z,N,U,G,Q,pe,ge,de)=>{z.slotScopeIds=ge,$==null?z.shapeFlag&512?G.ctx.activate(z,N,U,pe,de):v(z,N,U,G,Q,pe,de):b($,z,de)},v=($,z,N,U,G,Q,pe)=>{const ge=$.component=ff($,U,G);if(Lo($)&&(ge.ctx.renderer=re),gf(ge,!1,pe),ge.asyncDep){if(G&&G.registerDep(ge,j,pe),!$.el){const de=ge.subTree=Ae(St);x(null,de,z,N),$.placeholder=de.el}}else j(ge,$,z,N,G,Q,pe)},b=($,z,N)=>{const U=z.component=$.component;if(of($,z,N))if(U.asyncDep&&!U.asyncResolved){R(U,z,N);return}else U.next=z,U.update();else z.el=$.el,U.vnode=z},j=($,z,N,U,G,Q,pe)=>{const ge=()=>{if($.isMounted){let{next:me,bu:ve,u:we,parent:Se,vnode:xe}=$;{const ze=di($);if(ze){me&&(me.el=xe.el,R($,me,pe)),ze.asyncDep.then(()=>{$.isUnmounted||ge()});return}}let Te=me,Me;Wa($,!1),me?(me.el=xe.el,R($,me,pe)):me=xe,ve&&fr(ve),(Me=me.props&&me.props.onVnodeBeforeUpdate)&&ca(Me,Se,me,xe),Wa($,!0);const Be=hi($),Pe=$.subTree;$.subTree=Be,f(Pe,Be,p(Pe.el),A(Pe),$,G,Q),me.el=Be.el,Te===null&&rf($,Be.el),we&&At(we,G),(Me=me.props&&me.props.onVnodeUpdated)&&At(()=>ca(Me,Se,me,xe),G)}else{let me;const{el:ve,props:we}=z,{bm:Se,m:xe,parent:Te,root:Me,type:Be}=$,Pe=ro(z);Wa($,!1),Se&&fr(Se),!Pe&&(me=we&&we.onVnodeBeforeMount)&&ca(me,Te,z),Wa($,!0);{Me.ce&&Me.ce._def.shadowRoot!==!1&&Me.ce._injectChildStyle(Be);const ze=$.subTree=hi($);f(null,ze,N,U,$,G,Q),z.el=ze.el}if(xe&&At(xe,G),!Pe&&(me=we&&we.onVnodeMounted)){const ze=z;At(()=>ca(me,Te,ze),G)}(z.shapeFlag&256||Te&&ro(Te.vnode)&&Te.vnode.shapeFlag&256)&&$.a&&At($.a,G),$.isMounted=!0,z=N=U=null}};$.scope.on();const de=$.effect=new tl(ge);$.scope.off();const ue=$.update=de.run.bind(de),ye=$.job=de.runIfDirty.bind(de);ye.i=$,ye.id=$.uid,de.scheduler=()=>Tn(ye),Wa($,!0),ue()},R=($,z,N)=>{z.component=$;const U=$.vnode.props;$.vnode=z,$.next=null,zu($,z.props,U,N),Vu($,z.children,N),na(),Cl($),sa()},Y=($,z,N,U,G,Q,pe,ge,de=!1)=>{const ue=$&&$.children,ye=$?$.shapeFlag:0,me=z.children,{patchFlag:ve,shapeFlag:we}=z;if(ve>0){if(ve&128){X(ue,me,N,U,G,Q,pe,ge,de);return}else if(ve&256){ne(ue,me,N,U,G,Q,pe,ge,de);return}}we&8?(ye&16&&J(ue,G,Q),me!==ue&&d(N,me)):ye&16?we&16?X(ue,me,N,U,G,Q,pe,ge,de):J(ue,G,Q,!0):(ye&8&&d(N,""),we&16&&E(me,N,U,G,Q,pe,ge,de))},ne=($,z,N,U,G,Q,pe,ge,de)=>{$=$||Ja,z=z||Ja;const ue=$.length,ye=z.length,me=Math.min(ue,ye);let ve;for(ve=0;ve<me;ve++){const we=z[ve]=de?Da(z[ve]):ia(z[ve]);f($[ve],we,N,null,G,Q,pe,ge,de)}ue>ye?J($,G,Q,!0,!1,me):E(z,N,U,G,Q,pe,ge,de,me)},X=($,z,N,U,G,Q,pe,ge,de)=>{let ue=0;const ye=z.length;let me=$.length-1,ve=ye-1;for(;ue<=me&&ue<=ve;){const we=$[ue],Se=z[ue]=de?Da(z[ue]):ia(z[ue]);if(za(we,Se))f(we,Se,N,null,G,Q,pe,ge,de);else break;ue++}for(;ue<=me&&ue<=ve;){const we=$[me],Se=z[ve]=de?Da(z[ve]):ia(z[ve]);if(za(we,Se))f(we,Se,N,null,G,Q,pe,ge,de);else break;me--,ve--}if(ue>me){if(ue<=ve){const we=ve+1,Se=we<ye?z[we].el:U;for(;ue<=ve;)f(null,z[ue]=de?Da(z[ue]):ia(z[ue]),N,Se,G,Q,pe,ge,de),ue++}}else if(ue>ve)for(;ue<=me;)se($[ue],G,Q,!0),ue++;else{const we=ue,Se=ue,xe=new Map;for(ue=Se;ue<=ve;ue++){const He=z[ue]=de?Da(z[ue]):ia(z[ue]);He.key!=null&&xe.set(He.key,ue)}let Te,Me=0;const Be=ve-Se+1;let Pe=!1,ze=0;const vt=new Array(Be);for(ue=0;ue<Be;ue++)vt[ue]=0;for(ue=we;ue<=me;ue++){const He=$[ue];if(Me>=Be){se(He,G,Q,!0);continue}let tt;if(He.key!=null)tt=xe.get(He.key);else for(Te=Se;Te<=ve;Te++)if(vt[Te-Se]===0&&za(He,z[Te])){tt=Te;break}tt===void 0?se(He,G,Q,!0):(vt[tt-Se]=ue+1,tt>=ze?ze=tt:Pe=!0,f(He,z[tt],N,null,G,Q,pe,ge,de),Me++)}const nt=Pe?Ju(vt):Ja;for(Te=nt.length-1,ue=Be-1;ue>=0;ue--){const He=Se+ue,tt=z[He],oa=z[He+1],ct=He+1<ye?oa.el||oa.placeholder:U;vt[ue]===0?f(null,tt,N,ct,G,Q,pe,ge,de):Pe&&(Te<0||ue!==nt[Te]?oe(tt,N,ct,2):Te--)}}},oe=($,z,N,U,G=null)=>{const{el:Q,type:pe,transition:ge,children:de,shapeFlag:ue}=$;if(ue&6){oe($.component.subTree,z,N,U);return}if(ue&128){$.suspense.move(z,N,U);return}if(ue&64){pe.move($,z,N,re);return}if(pe===he){o(Q,z,N);for(let me=0;me<de.length;me++)oe(de[me],z,N,U);o($.anchor,z,N);return}if(pe===jn){M($,z,N);return}if(U!==2&&ue&1&&ge)if(U===0)ge.beforeEnter(Q),o(Q,z,N),At(()=>ge.enter(Q),G);else{const{leave:me,delayLeave:ve,afterLeave:we}=ge,Se=()=>{$.ctx.isUnmounted?r(Q):o(Q,z,N)},xe=()=>{Q._isLeaving&&Q[va](!0),me(Q,()=>{Se(),we&&we()})};ve?ve(Q,Se,xe):xe()}else o(Q,z,N)},se=($,z,N,U=!1,G=!1)=>{const{type:Q,props:pe,ref:ge,children:de,dynamicChildren:ue,shapeFlag:ye,patchFlag:me,dirs:ve,cacheIndex:we}=$;if(me===-2&&(G=!1),ge!=null&&(na(),Eo(ge,null,N,$,!0),sa()),we!=null&&(z.renderCache[we]=void 0),ye&256){z.ctx.deactivate($);return}const Se=ye&1&&ve,xe=!ro($);let Te;if(xe&&(Te=pe&&pe.onVnodeBeforeUnmount)&&ca(Te,z,$),ye&6)V($.component,N,U);else{if(ye&128){$.suspense.unmount(N,U);return}Se&&Ha($,null,z,"beforeUnmount"),ye&64?$.type.remove($,z,N,re,U):ue&&!ue.hasOnce&&(Q!==he||me>0&&me&64)?J(ue,z,N,!1,!0):(Q===he&&me&384||!G&&ye&16)&&J(de,z,N),U&&fe($)}(xe&&(Te=pe&&pe.onVnodeUnmounted)||Se)&&At(()=>{Te&&ca(Te,z,$),Se&&Ha($,null,z,"unmounted")},N)},fe=$=>{const{type:z,el:N,anchor:U,transition:G}=$;if(z===he){ce(N,U);return}if(z===jn){T($);return}const Q=()=>{r(N),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if($.shapeFlag&1&&G&&!G.persisted){const{leave:pe,delayLeave:ge}=G,de=()=>pe(N,Q);ge?ge($.el,Q,de):de()}else Q()},ce=($,z)=>{let N;for(;$!==z;)N=m($),r($),$=N;r(z)},V=($,z,N)=>{const{bum:U,scope:G,job:Q,subTree:pe,um:ge,m:de,a:ue}=$;ui(de),ui(ue),U&&fr(U),G.stop(),Q&&(Q.flags|=8,se(pe,$,z,N)),ge&&At(ge,z),At(()=>{$.isUnmounted=!0},z)},J=($,z,N,U=!1,G=!1,Q=0)=>{for(let pe=Q;pe<$.length;pe++)se($[pe],z,N,U,G)},A=$=>{if($.shapeFlag&6)return A($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const z=m($.anchor||$.el),N=z&&z[Ml];return N?m(N):z};let B=!1;const q=($,z,N)=>{$==null?z._vnode&&se(z._vnode,null,null,!0):f(z._vnode||null,$,z,null,null,null,N),z._vnode=$,B||(B=!0,Cl(),Sl(),B=!1)},re={p:f,um:se,m:oe,r:fe,mt:v,mc:E,pc:Y,pbc:W,n:A,o:e};return{render:q,hydrate:void 0,createApp:Fu(q)}}function zn({type:e,props:t},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:a}function Wa({effect:e,job:t},a){a?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Gu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Rn(e,t,a=!1){const o=e.children,r=t.children;if(Ee(o)&&Ee(r))for(let n=0;n<o.length;n++){const s=o[n];let i=r[n];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=r[n]=Da(r[n]),i.el=s.el),!a&&i.patchFlag!==-2&&Rn(s,i)),i.type===Ir&&i.patchFlag!==-1&&(i.el=s.el),i.type===St&&!i.el&&(i.el=s.el)}}function Ju(e){const t=e.slice(),a=[0];let o,r,n,s,i;const l=e.length;for(o=0;o<l;o++){const c=e[o];if(c!==0){if(r=a[a.length-1],e[r]<c){t[o]=r,a.push(o);continue}for(n=0,s=a.length-1;n<s;)i=n+s>>1,e[a[i]]<c?n=i+1:s=i;c<e[a[n]]&&(n>0&&(t[o]=a[n-1]),a[n]=o)}}for(n=a.length,s=a[n-1];n-- >0;)a[n]=s,s=t[s];return a}function di(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:di(t)}function ui(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Yu=Symbol.for("v-scx"),Zu=()=>Lr(Yu);function De(e,t,a){return fi(e,t,a)}function fi(e,t,a=Qe){const{immediate:o,deep:r,flush:n,once:s}=a,i=ht({},a),l=t&&o||!t&&n!=="post";let c;if(so){if(n==="sync"){const h=Zu();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!l){const h=()=>{};return h.stop=ra,h.resume=ra,h.pause=ra,h}}const d=_t;i.call=(h,u,f)=>Qt(h,d,u,f);let p=!1;n==="post"?i.scheduler=h=>{At(h,d&&d.suspense)}:n!=="sync"&&(p=!0,i.scheduler=(h,u)=>{u?h():Tn(h)}),i.augmentJob=h=>{t&&(h.flags|=4),p&&(h.flags|=2,d&&(h.id=d.uid,h.i=d))};const m=ru(e,t,i);return so&&(c?c.push(m):l&&m()),m}function Xu(e,t,a){const o=this.proxy,r=lt(e)?e.includes(".")?gi(o,e):()=>o[e]:e.bind(o,o);let n;Oe(t)?n=t:(n=t.handler,a=t);const s=Fo(this),i=fi(r,n.bind(o),a);return s(),i}function gi(e,t){const a=t.split(".");return()=>{let o=e;for(let r=0;r<a.length&&o;r++)o=o[a[r]];return o}}const Qu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ut(t)}Modifiers`]||e[`${Sa(t)}Modifiers`];function ef(e,t,...a){if(e.isUnmounted)return;const o=e.vnode.props||Qe;let r=a;const n=t.startsWith("update:"),s=n&&Qu(o,t.slice(7));s&&(s.trim&&(r=a.map(d=>lt(d)?d.trim():d)),s.number&&(r=a.map(gr)));let i,l=o[i=gn(t)]||o[i=gn(Ut(t))];!l&&n&&(l=o[i=gn(Sa(t))]),l&&Qt(l,e,6,r);const c=o[i+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Qt(c,e,6,r)}}function pi(e,t,a=!1){const o=t.emitsCache,r=o.get(e);if(r!==void 0)return r;const n=e.emits;let s={},i=!1;if(!Oe(e)){const l=c=>{const d=pi(c,t,!0);d&&(i=!0,ht(s,d))};!a&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!n&&!i?(et(e)&&o.set(e,null),null):(Ee(n)?n.forEach(l=>s[l]=null):ht(s,n),et(e)&&o.set(e,s),s)}function Nr(e,t){return!e||!ir(t)?!1:(t=t.slice(2).replace(/Once$/,""),qe(e,t[0].toLowerCase()+t.slice(1))||qe(e,Sa(t))||qe(e,t))}function dS(){}function hi(e){const{type:t,vnode:a,proxy:o,withProxy:r,propsOptions:[n],slots:s,attrs:i,emit:l,render:c,renderCache:d,props:p,data:m,setupState:h,ctx:u,inheritAttrs:f}=e,y=$r(e);let x,S;try{if(a.shapeFlag&4){const T=r||o,O=T;x=ia(c.call(O,T,d,p,h,m,u)),S=i}else{const T=t;x=ia(T.length>1?T(p,{attrs:i,slots:s,emit:l}):T(p,null)),S=t.props?i:tf(i)}}catch(T){Bo.length=0,To(T,e,1),x=Ae(St)}let M=x;if(S&&f!==!1){const T=Object.keys(S),{shapeFlag:O}=M;T.length&&O&7&&(n&&T.some(dn)&&(S=af(S,n)),M=Aa(M,S,!1,!0))}return a.dirs&&(M=Aa(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(a.dirs):a.dirs),a.transition&&Do(M,a.transition),x=M,$r(y),x}const tf=e=>{let t;for(const a in e)(a==="class"||a==="style"||ir(a))&&((t||(t={}))[a]=e[a]);return t},af=(e,t)=>{const a={};for(const o in e)(!dn(o)||!(o.slice(9)in t))&&(a[o]=e[o]);return a};function of(e,t,a){const{props:o,children:r,component:n}=e,{props:s,children:i,patchFlag:l}=t,c=n.emitsOptions;if(t.dirs||t.transition)return!0;if(a&&l>=0){if(l&1024)return!0;if(l&16)return o?mi(o,s,c):!!s;if(l&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const m=d[p];if(s[m]!==o[m]&&!Nr(c,m))return!0}}}else return(r||i)&&(!i||!i.$stable)?!0:o===s?!1:o?s?mi(o,s,c):!0:!!s;return!1}function mi(e,t,a){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const n=o[r];if(t[n]!==e[n]&&!Nr(a,n))return!0}return!1}function rf({vnode:e,parent:t},a){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=a,t=t.parent;else break}}const vi=e=>e.__isSuspense;function nf(e,t){t&&t.pendingBranch?Ee(e)?t.effects.push(...e):t.effects.push(e):uu(e)}const he=Symbol.for("v-fgt"),Ir=Symbol.for("v-txt"),St=Symbol.for("v-cmt"),jn=Symbol.for("v-stc"),Bo=[];let Wt=null;function k(e=!1){Bo.push(Wt=e?null:[])}function sf(){Bo.pop(),Wt=Bo[Bo.length-1]||null}let Oo=1;function bi(e,t=!1){Oo+=e,e<0&&Wt&&t&&(Wt.hasOnce=!0)}function yi(e){return e.dynamicChildren=Oo>0?Wt||Ja:null,sf(),Oo>0&&Wt&&Wt.push(e),e}function _(e,t,a,o,r,n){return yi(g(e,t,a,o,r,n,!0))}function it(e,t,a,o,r){return yi(Ae(e,t,a,o,r,!0))}function Po(e){return e?e.__v_isVNode===!0:!1}function za(e,t){return e.type===t.type&&e.key===t.key}const wi=({key:e})=>e??null,Br=({ref:e,ref_key:t,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?lt(e)||gt(e)||Oe(e)?{i:kt,r:e,k:t,f:!!a}:e:null);function g(e,t=null,a=null,o=0,r=null,n=e===he?0:1,s=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&wi(t),ref:t&&Br(t),scopeId:Tl,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:kt};return i?(Un(l,a),n&128&&e.normalize(l)):a&&(l.shapeFlag|=lt(a)?8:16),Oo>0&&!s&&Wt&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&Wt.push(l),l}const Ae=lf;function lf(e,t=null,a=null,o=0,r=null,n=!1){if((!e||e===Ul)&&(e=St),Po(e)){const i=Aa(e,t,!0);return a&&Un(i,a),Oo>0&&!n&&Wt&&(i.shapeFlag&6?Wt[Wt.indexOf(e)]=i:Wt.push(i)),i.patchFlag=-2,i}if(yf(e)&&(e=e.__vccOpts),t){t=cf(t);let{class:i,style:l}=t;i&&!lt(i)&&(t.class=Ne(i)),et(l)&&(Sn(l)&&!Ee(l)&&(l=ht({},l)),t.style=Le(l))}const s=lt(e)?1:vi(e)?128:Al(e)?64:et(e)?4:Oe(e)?2:0;return g(e,t,a,o,r,s,n,!0)}function cf(e){return e?Sn(e)||oi(e)?ht({},e):e:null}function Aa(e,t,a=!1,o=!1){const{props:r,ref:n,patchFlag:s,children:i,transition:l}=e,c=t?ki(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&wi(c),ref:t&&t.ref?a&&n?Ee(n)?n.concat(Br(t)):[n,Br(t)]:Br(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==he?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Aa(e.ssContent),ssFallback:e.ssFallback&&Aa(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&o&&Do(d,l.clone(d)),d}function Fe(e=" ",t=0){return Ae(Ir,null,e,t)}function ae(e="",t=!1){return t?(k(),it(St,null,e)):Ae(St,null,e)}function ia(e){return e==null||typeof e=="boolean"?Ae(St):Ee(e)?Ae(he,null,e.slice()):Po(e)?Da(e):Ae(Ir,null,String(e))}function Da(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Aa(e)}function Un(e,t){let a=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(Ee(t))a=16;else if(typeof t=="object")if(o&65){const r=t.default;r&&(r._c&&(r._d=!1),Un(e,r()),r._c&&(r._d=!0));return}else{a=32;const r=t._;!r&&!oi(t)?t._ctx=kt:r===3&&kt&&(kt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Oe(t)?(t={default:t,_ctx:kt},a=32):(t=String(t),o&64?(a=16,t=[Fe(t)]):a=8);e.children=t,e.shapeFlag|=a}function ki(...e){const t={};for(let a=0;a<e.length;a++){const o=e[a];for(const r in o)if(r==="class")t.class!==o.class&&(t.class=Ne([t.class,o.class]));else if(r==="style")t.style=Le([t.style,o.style]);else if(ir(r)){const n=t[r],s=o[r];s&&n!==s&&!(Ee(n)&&n.includes(s))&&(t[r]=n?[].concat(n,s):s)}else r!==""&&(t[r]=o[r])}return t}function ca(e,t,a,o=null){Qt(e,t,7,[a,o])}const df=ei();let uf=0;function ff(e,t,a){const o=e.type,r=(t?t.appContext:e.appContext)||df,n={uid:uf++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $d(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ni(o,r),emitsOptions:pi(o,r),emit:null,emitted:null,propsDefaults:Qe,inheritAttrs:o.inheritAttrs,ctx:Qe,data:Qe,props:Qe,attrs:Qe,slots:Qe,refs:Qe,setupState:Qe,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=ef.bind(null,n),e.ce&&e.ce(n),n}let _t=null;const Or=()=>_t||kt;let Pr,Vn;{const e=pr(),t=(a,o)=>{let r;return(r=e[a])||(r=e[a]=[]),r.push(o),n=>{r.length>1?r.forEach(s=>s(n)):r[0](n)}};Pr=t("__VUE_INSTANCE_SETTERS__",a=>_t=a),Vn=t("__VUE_SSR_SETTERS__",a=>so=a)}const Fo=e=>{const t=_t;return Pr(e),e.scope.on(),()=>{e.scope.off(),Pr(t)}},_i=()=>{_t&&_t.scope.off(),Pr(null)};function xi(e){return e.vnode.shapeFlag&4}let so=!1;function gf(e,t=!1,a=!1){t&&Vn(t);const{props:o,children:r}=e.vnode,n=xi(e);Wu(e,o,n,t),Uu(e,r,a||t);const s=n?pf(e,t):void 0;return t&&Vn(!1),s}function pf(e,t){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Eu);const{setup:o}=a;if(o){na();const r=e.setupContext=o.length>1?mf(e):null,n=Fo(e),s=eo(o,e,0,[e.props,r]),i=qs(s);if(sa(),n(),(i||e.sp)&&!ro(e)&&En(e),i){if(s.then(_i,_i),t)return s.then(l=>{Ci(e,l)}).catch(l=>{To(l,e,0)});e.asyncDep=s}else Ci(e,s)}else Si(e)}function Ci(e,t,a){Oe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:et(t)&&(e.setupState=wl(t)),Si(e)}function Si(e,t,a){const o=e.type;e.render||(e.render=o.render||ra);{const r=Fo(e);na();try{Lu(e)}finally{sa(),r()}}}const hf={get(e,t){return xt(e,"get",""),e[t]}};function mf(e){const t=a=>{e.exposed=a||{}};return{attrs:new Proxy(e.attrs,hf),slots:e.slots,emit:e.emit,expose:t}}function Fr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(wl(Gd(e.exposed)),{get(t,a){if(a in t)return t[a];if(a in No)return No[a](e)},has(t,a){return a in t||a in No}})):e.proxy}const vf=/(?:^|[-_])(\w)/g,bf=e=>e.replace(vf,t=>t.toUpperCase()).replace(/[-_]/g,"");function $i(e,t=!0){return Oe(e)?e.displayName||e.name:e.name||t&&e.__name}function Ti(e,t,a=!1){let o=$i(t);if(!o&&t.__file){const r=t.__file.match(/([^/\\]+)\.\w+$/);r&&(o=r[1])}if(!o&&e&&e.parent){const r=n=>{for(const s in n)if(n[s]===t)return s};o=r(e.components||e.parent.type.components)||r(e.appContext.components)}return o?bf(o):a?"App":"Anonymous"}function yf(e){return Oe(e)&&"__vccOpts"in e}const D=(e,t)=>au(e,t,so);function It(e,t,a){const o=arguments.length;return o===2?et(t)&&!Ee(t)?Po(t)?Ae(e,null,[t]):Ae(e,t):Ae(e,null,t):(o>3?a=Array.prototype.slice.call(arguments,2):o===3&&Po(a)&&(a=[a]),Ae(e,t,a))}const wf="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Kn;const Mi=typeof window<"u"&&window.trustedTypes;if(Mi)try{Kn=Mi.createPolicy("vue",{createHTML:e=>e})}catch{}const Ai=Kn?e=>Kn.createHTML(e):e=>e,kf="http://www.w3.org/2000/svg",_f="http://www.w3.org/1998/Math/MathML",ya=typeof document<"u"?document:null,Di=ya&&ya.createElement("template"),xf={insert:(e,t,a)=>{t.insertBefore(e,a||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,a,o)=>{const r=t==="svg"?ya.createElementNS(kf,e):t==="mathml"?ya.createElementNS(_f,e):a?ya.createElement(e,{is:a}):ya.createElement(e);return e==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:e=>ya.createTextNode(e),createComment:e=>ya.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ya.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,a,o,r,n){const s=a?a.previousSibling:t.lastChild;if(r&&(r===n||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),a),!(r===n||!(r=r.nextSibling)););else{Di.innerHTML=Ai(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const i=Di.content;if(o==="svg"||o==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,a)}return[s?s.nextSibling:t.firstChild,a?a.previousSibling:t.lastChild]}},Ea="transition",Ho="animation",Wo=Symbol("_vtc"),Ei={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Cf=ht({},Bl,Ei),qn=(e=>(e.displayName="Transition",e.props=Cf,e))((e,{slots:t})=>It(mu,Sf(e),t)),Ra=(e,t=[])=>{Ee(e)?e.forEach(a=>a(...t)):e&&e(...t)},Li=e=>e?Ee(e)?e.some(t=>t.length>1):e.length>1:!1;function Sf(e){const t={};for(const F in e)F in Ei||(t[F]=e[F]);if(e.css===!1)return t;const{name:a="v",type:o,duration:r,enterFromClass:n=`${a}-enter-from`,enterActiveClass:s=`${a}-enter-active`,enterToClass:i=`${a}-enter-to`,appearFromClass:l=n,appearActiveClass:c=s,appearToClass:d=i,leaveFromClass:p=`${a}-leave-from`,leaveActiveClass:m=`${a}-leave-active`,leaveToClass:h=`${a}-leave-to`}=e,u=$f(r),f=u&&u[0],y=u&&u[1],{onBeforeEnter:x,onEnter:S,onEnterCancelled:M,onLeave:T,onLeaveCancelled:O,onBeforeAppear:I=x,onAppear:w=S,onAppearCancelled:E=M}=t,P=(F,C,v,b)=>{F._enterCancelled=b,ja(F,C?d:i),ja(F,C?c:s),v&&v()},W=(F,C)=>{F._isLeaving=!1,ja(F,p),ja(F,h),ja(F,m),C&&C()},Z=F=>(C,v)=>{const b=F?w:S,j=()=>P(C,F,v);Ra(b,[C,j]),Ni(()=>{ja(C,F?l:n),wa(C,F?d:i),Li(b)||Ii(C,o,f,j)})};return ht(t,{onBeforeEnter(F){Ra(x,[F]),wa(F,n),wa(F,s)},onBeforeAppear(F){Ra(I,[F]),wa(F,l),wa(F,c)},onEnter:Z(!1),onAppear:Z(!0),onLeave(F,C){F._isLeaving=!0;const v=()=>W(F,C);wa(F,p),F._enterCancelled?(wa(F,m),Pi()):(Pi(),wa(F,m)),Ni(()=>{F._isLeaving&&(ja(F,p),wa(F,h),Li(T)||Ii(F,o,y,v))}),Ra(T,[F,v])},onEnterCancelled(F){P(F,!1,void 0,!0),Ra(M,[F])},onAppearCancelled(F){P(F,!0,void 0,!0),Ra(E,[F])},onLeaveCancelled(F){W(F),Ra(O,[F])}})}function $f(e){if(e==null)return null;if(et(e))return[Gn(e.enter),Gn(e.leave)];{const t=Gn(e);return[t,t]}}function Gn(e){return bd(e)}function wa(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.add(a)),(e[Wo]||(e[Wo]=new Set)).add(t)}function ja(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const a=e[Wo];a&&(a.delete(t),a.size||(e[Wo]=void 0))}function Ni(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Tf=0;function Ii(e,t,a,o){const r=e._endId=++Tf,n=()=>{r===e._endId&&o()};if(a!=null)return setTimeout(n,a);const{type:s,timeout:i,propCount:l}=Mf(e,t);if(!s)return o();const c=s+"end";let d=0;const p=()=>{e.removeEventListener(c,m),n()},m=h=>{h.target===e&&++d>=l&&p()};setTimeout(()=>{d<l&&p()},i+1),e.addEventListener(c,m)}function Mf(e,t){const a=window.getComputedStyle(e),o=u=>(a[u]||"").split(", "),r=o(`${Ea}Delay`),n=o(`${Ea}Duration`),s=Bi(r,n),i=o(`${Ho}Delay`),l=o(`${Ho}Duration`),c=Bi(i,l);let d=null,p=0,m=0;t===Ea?s>0&&(d=Ea,p=s,m=n.length):t===Ho?c>0&&(d=Ho,p=c,m=l.length):(p=Math.max(s,c),d=p>0?s>c?Ea:Ho:null,m=d?d===Ea?n.length:l.length:0);const h=d===Ea&&/\b(transform|all)(,|$)/.test(o(`${Ea}Property`).toString());return{type:d,timeout:p,propCount:m,hasTransform:h}}function Bi(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((a,o)=>Oi(a)+Oi(e[o])))}function Oi(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Pi(){return document.body.offsetHeight}function Af(e,t,a){const o=e[Wo];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):a?e.setAttribute("class",t):e.className=t}const Hr=Symbol("_vod"),Fi=Symbol("_vsh"),Hi={name:"show",beforeMount(e,{value:t},{transition:a}){e[Hr]=e.style.display==="none"?"":e.style.display,a&&t?a.beforeEnter(e):zo(e,t)},mounted(e,{value:t},{transition:a}){a&&t&&a.enter(e)},updated(e,{value:t,oldValue:a},{transition:o}){!t!=!a&&(o?t?(o.beforeEnter(e),zo(e,!0),o.enter(e)):o.leave(e,()=>{zo(e,!1)}):zo(e,t))},beforeUnmount(e,{value:t}){zo(e,t)}};function zo(e,t){e.style.display=t?e[Hr]:"none",e[Fi]=!t}const Df=Symbol(""),Ef=/(^|;)\s*display\s*:/;function Lf(e,t,a){const o=e.style,r=lt(a);let n=!1;if(a&&!r){if(t)if(lt(t))for(const s of t.split(";")){const i=s.slice(0,s.indexOf(":")).trim();a[i]==null&&Wr(o,i,"")}else for(const s in t)a[s]==null&&Wr(o,s,"");for(const s in a)s==="display"&&(n=!0),Wr(o,s,a[s])}else if(r){if(t!==a){const s=o[Df];s&&(a+=";"+s),o.cssText=a,n=Ef.test(a)}}else t&&e.removeAttribute("style");Hr in e&&(e[Hr]=n?o.display:"",e[Fi]&&(o.display="none"))}const Wi=/\s*!important$/;function Wr(e,t,a){if(Ee(a))a.forEach(o=>Wr(e,t,o));else if(a==null&&(a=""),t.startsWith("--"))e.setProperty(t,a);else{const o=Nf(e,t);Wi.test(a)?e.setProperty(Sa(o),a.replace(Wi,""),"important"):e[o]=a}}const zi=["Webkit","Moz","ms"],Jn={};function Nf(e,t){const a=Jn[t];if(a)return a;let o=Ut(t);if(o!=="filter"&&o in e)return Jn[t]=o;o=ur(o);for(let r=0;r<zi.length;r++){const n=zi[r]+o;if(n in e)return Jn[t]=n}return t}const Ri="http://www.w3.org/1999/xlink";function ji(e,t,a,o,r,n=xd(t)){o&&t.startsWith("xlink:")?a==null?e.removeAttributeNS(Ri,t.slice(6,t.length)):e.setAttributeNS(Ri,t,a):a==null||n&&!Xs(a)?e.removeAttribute(t):e.setAttribute(t,n?"":Zt(a)?String(a):a)}function Ui(e,t,a,o,r){if(t==="innerHTML"||t==="textContent"){a!=null&&(e[t]=t==="innerHTML"?Ai(a):a);return}const n=e.tagName;if(t==="value"&&n!=="PROGRESS"&&!n.includes("-")){const i=n==="OPTION"?e.getAttribute("value")||"":e.value,l=a==null?e.type==="checkbox"?"on":"":String(a);(i!==l||!("_value"in e))&&(e.value=l),a==null&&e.removeAttribute(t),e._value=a;return}let s=!1;if(a===""||a==null){const i=typeof e[t];i==="boolean"?a=Xs(a):a==null&&i==="string"?(a="",s=!0):i==="number"&&(a=0,s=!0)}try{e[t]=a}catch{}s&&e.removeAttribute(r||t)}function Ua(e,t,a,o){e.addEventListener(t,a,o)}function If(e,t,a,o){e.removeEventListener(t,a,o)}const Vi=Symbol("_vei");function Bf(e,t,a,o,r=null){const n=e[Vi]||(e[Vi]={}),s=n[t];if(o&&s)s.value=o;else{const[i,l]=Of(t);if(o){const c=n[t]=Hf(o,r);Ua(e,i,c,l)}else s&&(If(e,i,s,l),n[t]=void 0)}}const Ki=/(?:Once|Passive|Capture)$/;function Of(e){let t;if(Ki.test(e)){t={};let o;for(;o=e.match(Ki);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Sa(e.slice(2)),t]}let Yn=0;const Pf=Promise.resolve(),Ff=()=>Yn||(Pf.then(()=>Yn=0),Yn=Date.now());function Hf(e,t){const a=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=a.attached)return;Qt(Wf(o,a.value),t,5,[o])};return a.value=e,a.attached=Ff(),a}function Wf(e,t){if(Ee(t)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},t.map(o=>r=>!r._stopped&&o&&o(r))}else return t}const qi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,zf=(e,t,a,o,r,n)=>{const s=r==="svg";t==="class"?Af(e,o,s):t==="style"?Lf(e,a,o):ir(t)?dn(t)||Bf(e,t,a,o,n):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Rf(e,t,o,s))?(Ui(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ji(e,t,o,s,n,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!lt(o))?Ui(e,Ut(t),o,n,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),ji(e,t,o,s))};function Rf(e,t,a,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&qi(t)&&Oe(a));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return qi(t)&&lt(a)?!1:t in e}const zr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ee(t)?a=>fr(t,a):t};function jf(e){e.target.composing=!0}function Gi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const lo=Symbol("_assign"),Ji={created(e,{modifiers:{lazy:t,trim:a,number:o}},r){e[lo]=zr(r);const n=o||r.props&&r.props.type==="number";Ua(e,t?"change":"input",s=>{if(s.target.composing)return;let i=e.value;a&&(i=i.trim()),n&&(i=gr(i)),e[lo](i)}),a&&Ua(e,"change",()=>{e.value=e.value.trim()}),t||(Ua(e,"compositionstart",jf),Ua(e,"compositionend",Gi),Ua(e,"change",Gi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:a,modifiers:{lazy:o,trim:r,number:n}},s){if(e[lo]=zr(s),e.composing)return;const i=(n||e.type==="number")&&!/^0\d/.test(e.value)?gr(e.value):e.value,l=t??"";i!==l&&(document.activeElement===e&&e.type!=="range"&&(o&&t===a||r&&e.value.trim()===l)||(e.value=l))}},Yi={deep:!0,created(e,{value:t,modifiers:{number:a}},o){const r=cr(t);Ua(e,"change",()=>{const n=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>a?gr(Rr(s)):Rr(s));e[lo](e.multiple?r?new Set(n):n:n[0]),e._assigning=!0,ea(()=>{e._assigning=!1})}),e[lo]=zr(o)},mounted(e,{value:t}){Zi(e,t)},beforeUpdate(e,t,a){e[lo]=zr(a)},updated(e,{value:t}){e._assigning||Zi(e,t)}};function Zi(e,t){const a=e.multiple,o=Ee(t);if(!(a&&!o&&!cr(t))){for(let r=0,n=e.options.length;r<n;r++){const s=e.options[r],i=Rr(s);if(a)if(o){const l=typeof i;l==="string"||l==="number"?s.selected=t.some(c=>String(c)===String(i)):s.selected=Sd(t,i)>-1}else s.selected=t.has(i);else if(hr(Rr(s),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!a&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Rr(e){return"_value"in e?e._value:e.value}const Uf=["ctrl","shift","alt","meta"],Vf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Uf.some(a=>e[`${a}Key`]&&!t.includes(a))},dt=(e,t)=>{const a=e._withMods||(e._withMods={}),o=t.join(".");return a[o]||(a[o]=(r,...n)=>{for(let s=0;s<t.length;s++){const i=Vf[t[s]];if(i&&i(r,t))return}return e(r,...n)})},Kf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},io=(e,t)=>{const a=e._withKeys||(e._withKeys={}),o=t.join(".");return a[o]||(a[o]=r=>{if(!("key"in r))return;const n=Sa(r.key);if(t.some(s=>s===n||Kf[s]===n))return e(r)})},qf=ht({patchProp:zf},xf);let Xi;function Gf(){return Xi||(Xi=Ku(qf))}const Jf=(...e)=>{const t=Gf().createApp(...e),{mount:a}=t;return t.mount=o=>{const r=Zf(o);if(!r)return;const n=t._component;!Oe(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const s=a(r,!1,Yf(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t};function Yf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Zf(e){return lt(e)?document.querySelector(e):e}const Xf=Ie({name:"NcAppContent",props:{appName:{type:String,default:""},showNavigation:{type:Boolean,default:!0}},setup(e,{slots:t,attrs:a}){return()=>{const o=e.showNavigation!==!1,r={...a,class:[a.class,"app-content",o?null:"app-content--navigation-hidden"]},n={class:"app-content__navigation","aria-label":e.appName||"App navigation","aria-hidden":o?"false":"true"};return It("div",r,[It("aside",n,t.navigation?t.navigation():[]),It("section",{class:"app-content__main",role:"main"},t.default?t.default():[])])}}}),Qf=Ie({name:"NcAppNavigation",setup(e,{slots:t,attrs:a}){return()=>{const o={...a,class:[a.class,"app-navigation"]};"role"in o||(o.role="navigation");const r=[];return t.actions&&r.push(It("div",{class:"app-navigation__actions"},t.actions())),t.default&&r.push(...t.default()),It("nav",o,r)}}}),mt=Ie({name:"NcButton",props:{type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t,slots:a,attrs:o}){return()=>{const r={...o,class:[o.class,"btn",e.type],disabled:e.disabled,onClick:()=>t("click")};return"type"in r||(r.type="button"),It("button",r,a.default?a.default():[])}}}),eg=Ie({name:"NcEmptyContent",props:{name:{type:String,default:""},description:{type:String,default:""}},setup(e,{attrs:t}){return()=>It("div",{...t,class:[t.class,"card empty"]},[It("div",{class:"value"},e.name),It("div",{class:"hint"},e.description)])}}),Qi=Ie({name:"NcCheckboxRadioSwitch",props:{type:{type:String,default:"checkbox"},name:{type:String,default:""},checked:{type:Boolean,default:!1}},emits:["update:checked"],setup(e,{emit:t,slots:a,attrs:o}){const r=s=>{var i;return t("update:checked",!!((i=s==null?void 0:s.target)!=null&&i.checked))},n={...o,class:[o.class,"nc-checkbox-radio-switch"]};return()=>It("label",n,[It("input",{type:e.type,name:e.name,checked:e.checked,onInput:r}),It("span",{},a.default?a.default():[])])}}),tg=Ie({name:"NcLoadingIcon",props:{size:{type:[String,Number],default:16}},setup(e,{attrs:t}){return()=>It("span",{...t,class:[t.class,"nc-loading-icon"],style:`width:${e.size}px;height:${e.size}px;border:2px solid var(--line);border-top-color:var(--brand);border-radius:50%;display:inline-block;animation:spin 1s linear infinite`})}}),ag={class:"rangebar",title:"Time range"},og=["aria-label","title"],rg={class:"range-toggle"},ng={class:"range-nav"},sg={class:"range-dates"},lg={class:"range-refresh"},ig=["disabled"],cg={class:"sidebar-block sidebar-block--framed"},dg={class:"sb-actions sb-actions--secondary"},ug={class:"onboarding-jumps"},fg={key:0,class:"onboarding-hint"},gg={key:0,class:"onboarding-hint"},pg={key:0,class:"onboarding-hint"},hg={key:0,class:"onboarding-hint"},mg={key:0,class:"onboarding-hint"},vg={class:"sidebar-shortcuts sidebar-shortcuts--bottom"},bg={class:"sidebar-icon-row"},yg=Ie({__name:"Sidebar",props:{isLoading:{type:Boolean},range:{},offset:{},from:{},to:{},navToggleLabel:{},navToggleIcon:{},dashboardMode:{},guidedHints:{}},emits:["load","update:range","update:offset","toggle-nav","open-profiles","open-shortcuts","rerun-onboarding"],setup(e,{emit:t}){const a=e,o=t;return(r,n)=>(k(),it(L(Qf),null,{default:Je(()=>{var s,i,l,c,d;return[Du(r.$slots,"actions",{},void 0,!0),g("div",ag,[g("button",{class:"sidebar-toggle-btn sidebar-toggle-btn--corner",type:"button",onClick:n[0]||(n[0]=p=>r.$emit("toggle-nav")),"aria-label":r.navToggleLabel,title:r.navToggleLabel},H(r.navToggleIcon),9,og),g("div",rg,[Ae(L(Qi),{type:"radio",name:"range-week",checked:r.range==="week","onUpdate:checked":n[1]||(n[1]=p=>{p&&r.$emit("update:range","week")})},{default:Je(()=>[...n[14]||(n[14]=[Fe("Week",-1)])]),_:1},8,["checked"]),Ae(L(Qi),{type:"radio",name:"range-month",checked:r.range==="month","onUpdate:checked":n[2]||(n[2]=p=>{p&&r.$emit("update:range","month")})},{default:Je(()=>[...n[15]||(n[15]=[Fe("Month",-1)])]),_:1},8,["checked"])]),g("div",ng,[Ae(L(mt),{class:"nav-btn",type:"tertiary",disabled:r.isLoading,onClick:n[3]||(n[3]=p=>r.$emit("update:offset",r.offset-1)),title:"Previous"},{default:Je(()=>[...n[16]||(n[16]=[Fe("",-1)])]),_:1},8,["disabled"]),g("span",sg,H(r.from)+"  "+H(r.to),1),Ae(L(mt),{class:"nav-btn",type:"tertiary",disabled:r.isLoading,onClick:n[4]||(n[4]=p=>r.$emit("update:offset",r.offset+1)),title:"Next"},{default:Je(()=>[...n[17]||(n[17]=[Fe("",-1)])]),_:1},8,["disabled"])]),g("div",lg,[g("button",{class:"sidebar-action-btn",type:"button",disabled:r.isLoading,onClick:n[5]||(n[5]=p=>r.$emit("load"))}," Refresh ",8,ig)])]),g("div",cg,[n[19]||(n[19]=g("div",{class:"sb-title"},"Guided Setup",-1)),g("div",dg,[Ae(L(mt),{type:"primary",size:"small",class:"rerun-btn",title:"Open the setup wizard again",onClick:n[6]||(n[6]=p=>r.$emit("rerun-onboarding"))},{default:Je(()=>[...n[18]||(n[18]=[g("span",{class:"rerun-btn__icon","aria-hidden":"true"},"",-1),Fe(" Setup wizard ",-1)])]),_:1})]),n[20]||(n[20]=g("div",{class:"onboarding-help"}," Revisit the setup wizard to adjust your dashboard step by step. ",-1)),g("ol",ug,[g("li",null,[g("button",{type:"button",class:"link",onClick:n[7]||(n[7]=p=>r.$emit("rerun-onboarding","dashboard"))},"Dashboard"),(s=r.guidedHints)!=null&&s.dashboard?(k(),_("div",fg,H(r.guidedHints.dashboard),1)):ae("",!0)]),g("li",null,[g("button",{type:"button",class:"link",onClick:n[8]||(n[8]=p=>r.$emit("rerun-onboarding","calendars"))},"Calendars"),(i=r.guidedHints)!=null&&i.calendars?(k(),_("div",gg,H(r.guidedHints.calendars),1)):ae("",!0)]),g("li",null,[g("button",{type:"button",class:"link",onClick:n[9]||(n[9]=p=>r.$emit("rerun-onboarding","categories"))},"Targets"),(l=r.guidedHints)!=null&&l.categories?(k(),_("div",pg,H(r.guidedHints.categories),1)):ae("",!0)]),g("li",null,[g("button",{type:"button",class:"link",onClick:n[10]||(n[10]=p=>r.$emit("rerun-onboarding","preferences"))},"Preferences"),(c=r.guidedHints)!=null&&c.preferences?(k(),_("div",hg,H(r.guidedHints.preferences),1)):ae("",!0)]),g("li",null,[g("button",{type:"button",class:"link",onClick:n[11]||(n[11]=p=>r.$emit("rerun-onboarding","review"))},"Review"),(d=r.guidedHints)!=null&&d.review?(k(),_("div",mg,H(r.guidedHints.review),1)):ae("",!0)])])]),g("div",vg,[g("div",bg,[g("button",{type:"button",class:"sidebar-icon-btn",title:"Keyboard shortcuts","aria-label":"Keyboard shortcuts",onClick:n[12]||(n[12]=p=>o("open-shortcuts",p.currentTarget))},[...n[21]||(n[21]=[g("svg",{class:"sidebar-icon",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{fill:"currentColor",d:"M4.25 6.5A2.75 2.75 0 0 1 7 3.75h10a2.75 2.75 0 0 1 2.75 2.75v10.5A2.75 2.75 0 0 1 17 19.75H7A2.75 2.75 0 0 1 4.25 17V6.5zm2.75-.75a.75.75 0 0 0-.75.75V17c0 .41.34.75.75.75h10a.75.75 0 0 0 .75-.75V6.5a.75.75 0 0 0-.75-.75H7zm1.5 2.25h2v2h-2v-2zm3 0h2v2h-2v-2zm3 0h2v2h-2v-2zm-6 3h7v2h-7v-2z"})],-1)])]),a.dashboardMode!=="quick"?(k(),_("button",{key:0,type:"button",class:"sidebar-icon-btn sidebar-icon-btn--profile",title:"Profiles","aria-label":"Profiles",onClick:n[13]||(n[13]=p=>o("open-profiles"))},[...n[22]||(n[22]=[g("svg",{class:"sidebar-icon sidebar-icon--profile",viewBox:"0 0 24 24","aria-hidden":"true"},[g("path",{fill:"currentColor",d:"M12 4.25a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm0 1.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zm0 7.5c3.18 0 5.75 1.57 5.75 3.5v1.5c0 .41-.34.75-.75.75H7a.75.75 0 0 1-.75-.75v-1.5c0-1.93 2.57-3.5 5.75-3.5zm0 1.5c-2.44 0-4.25 1.05-4.25 2v.75h8.5V16.75c0-.95-1.81-2-4.25-2z"})],-1)])])):ae("",!0)])])]}),_:3}))}}),Ye=(e,t)=>{const a=e.__vccOpts||e;for(const[o,r]of t)a[o]=r;return a},wg=Ye(yg,[["__scopeId","data-v-087101c8"]]),kg={key:0,class:"onboarding-mode"},_g={class:"mode-grid"},xg={key:1,class:"config-warning"},Cg=Ie({__name:"OnboardingIntroStep",props:{hasExistingConfig:{type:Boolean},snapshotSaving:{type:Boolean},saving:{type:Boolean},snapshotNotice:{},profileMode:{},setProfileMode:{type:Function},onSaveCurrentConfig:{type:Function}},setup(e){return(t,a)=>(k(),_(he,null,[a[7]||(a[7]=g("h3",null,"Opsdash visualises your calendar time and keeps goals on track.",-1)),a[8]||(a[8]=g("ul",{class:"highlights"},[g("li",null,"Targets  stay aligned with your weekly/monthly goals."),g("li",null,"Balance  ensure your focus areas get the right attention."),g("li",null,"Notes  capture insights and the story behind the numbers.")],-1)),t.hasExistingConfig?(k(),_("div",kg,[a[4]||(a[4]=g("p",{class:"hint"},"Choose how to start.",-1)),g("div",_g,[g("button",{type:"button",class:Ne(["mode-card",{active:t.profileMode==="existing"}]),onClick:a[0]||(a[0]=o=>t.setProfileMode("existing"))},[...a[2]||(a[2]=[g("strong",null,"Edit current setup",-1),g("span",null,"Start from your existing calendars, targets, widgets, and theme.",-1)])],2),g("button",{type:"button",class:Ne(["mode-card",{active:t.profileMode==="new"}]),onClick:a[1]||(a[1]=o=>t.setProfileMode("new"))},[...a[3]||(a[3]=[g("strong",null,"Create new profile",-1),g("span",null,"Start with empty selections and build a fresh layout.",-1)])],2)])])):ae("",!0),t.hasExistingConfig?(k(),_("div",xg,[a[6]||(a[6]=g("p",null," You already have a dashboard configuration. Save a profile backup of widgets/tabs, targets, deck, reporting, and theme before onboarding applies changes. ",-1)),Ae(L(mt),{type:"tertiary",size:"small",disabled:t.snapshotSaving||t.saving,"aria-busy":t.snapshotSaving,onClick:t.onSaveCurrentConfig},{default:Je(()=>[...a[5]||(a[5]=[Fe(" Save current setup as profile ",-1)])]),_:1},8,["disabled","aria-busy","onClick"])])):ae("",!0),a[9]||(a[9]=g("p",{class:"hint"},"You can change configuration later from the Sidebar.",-1)),t.snapshotNotice?(k(),_("div",{key:2,class:Ne(["snapshot-notice",`snapshot-notice--${t.snapshotNotice.type}`]),role:"status"},H(t.snapshotNotice.message),3)):ae("",!0)],64))}}),Sg={class:"preferences-grid"},$g={class:"pref-card"},Tg={class:"theme-options",role:"radiogroup","aria-label":"Theme preference"},Mg={class:"theme-option"},Ag=["checked"],Dg={class:"theme-copy"},Eg={class:"theme-option__desc"},Lg={class:"theme-option"},Ng=["checked"],Ig={class:"theme-option"},Bg=["checked"],Og={class:"theme-preview"},Pg={class:"pref-card"},Fg={class:"field"},Hg=["value","disabled"],Wg={key:0,class:"pref-hint"},zg={class:"pref-card"},Rg={class:"field"},jg=["value"],Ug={class:"pref-card"},Vg={class:"field"},Kg=["value"],qg={class:"pref-card pref-card--deck"},Gg={class:"toggle-row"},Jg=["checked"],Yg={class:"deck-board-list"},Zg={key:0,class:"deck-status"},Xg={key:1,class:"deck-status deck-status--error"},Qg={key:0,class:"deck-status"},ep={key:1,class:"deck-board-options",role:"list"},tp=["checked","onChange"],ap={class:"pref-card pref-card--reporting"},op={class:"toggle-row"},rp=["checked"],np={class:"field"},sp=["value"],lp={class:"field"},ip=["value"],cp={class:"field checkbox toggle-row"},dp=["checked"],up={class:"pref-card pref-card--activity"},fp={class:"toggle-row"},gp=["checked"],pp=Ie({__name:"OnboardingPreferencesStep",props:{themePreference:{},systemThemeLabel:{},previewTheme:{},setThemePreference:{type:Function},totalHoursInput:{},categoryTotalHours:{},categoriesEnabled:{type:Boolean},onTotalHoursChange:{type:Function},allDayHoursInput:{},onAllDayHoursChange:{type:Function},trendLookbackInput:{},onTrendLookbackChange:{type:Function},deckSettingsDraft:{},setDeckEnabled:{type:Function},deckBoards:{},deckBoardsLoading:{type:Boolean},deckBoardsError:{},isDeckBoardVisible:{type:Function},toggleDeckBoard:{type:Function},reportingDraft:{},setReportingEnabled:{type:Function},setReportingSchedule:{type:Function},setReportingInterim:{type:Function},updateReporting:{type:Function},activityDraft:{},setActivityDayOff:{type:Function}},setup(e){return(t,a)=>(k(),_(he,null,[a[44]||(a[44]=g("h3",null,"Final tweaks",-1)),a[45]||(a[45]=g("p",{class:"hint"},"You can change these options later from Config & Setup.",-1)),g("div",Sg,[g("article",$g,[a[15]||(a[15]=g("h4",null,"Theme & appearance",-1)),a[16]||(a[16]=g("p",{class:"pref-desc"},"Choose how Opsdash reacts to your Nextcloud theme. Charts keep their calendar colors.",-1)),g("div",Tg,[g("label",Mg,[g("input",{type:"radio",name:"onboarding-theme",value:"auto",checked:t.themePreference==="auto",onChange:a[0]||(a[0]=o=>t.setThemePreference("auto"))},null,40,Ag),g("div",Dg,[a[12]||(a[12]=g("div",{class:"theme-option__title"},"Follow Nextcloud",-1)),g("div",Eg,"Matches your account theme (currently "+H(t.systemThemeLabel)+").",1)])]),g("label",Lg,[g("input",{type:"radio",name:"onboarding-theme",value:"light",checked:t.themePreference==="light",onChange:a[1]||(a[1]=o=>t.setThemePreference("light"))},null,40,Ng),a[13]||(a[13]=g("div",{class:"theme-copy"},[g("div",{class:"theme-option__title"},"Force light"),g("div",{class:"theme-option__desc"},"Always use the light palette, even if Nextcloud switches to dark.")],-1))]),g("label",Ig,[g("input",{type:"radio",name:"onboarding-theme",value:"dark",checked:t.themePreference==="dark",onChange:a[2]||(a[2]=o=>t.setThemePreference("dark"))},null,40,Bg),a[14]||(a[14]=g("div",{class:"theme-copy"},[g("div",{class:"theme-option__title"},"Force dark"),g("div",{class:"theme-option__desc"},"Keep Opsdash dark, even when Nextcloud stays light.")],-1))])]),g("div",Og,"Preview: "+H(t.previewTheme==="dark"?"Dark":"Light")+" mode",1)]),g("article",Pg,[a[18]||(a[18]=g("h4",null,"Total weekly target",-1)),a[19]||(a[19]=g("p",{class:"pref-desc"},"Set your overall weekly goal. You can fine-tune per-category targets later.",-1)),g("label",Fg,[a[17]||(a[17]=g("span",{class:"label"},"Total target (h / week)",-1)),g("input",{type:"number",value:t.totalHoursInput??t.categoryTotalHours,disabled:t.categoriesEnabled,min:"0",max:"1000",step:"0.5",onInput:a[3]||(a[3]=o=>t.onTotalHoursChange(o.target))},null,40,Hg)]),t.categoriesEnabled?(k(),_("p",Wg," Using categories  total derives from category targets ("+H(t.categoryTotalHours.toFixed(1))+" h). ",1)):ae("",!0)]),g("article",zg,[a[21]||(a[21]=g("h4",null,"All-day events",-1)),a[22]||(a[22]=g("p",{class:"pref-desc"},"Tell Opsdash how many hours an all-day calendar event should contribute per day.",-1)),g("label",Rg,[a[20]||(a[20]=g("span",{class:"label"},"All-day hours per day",-1)),g("input",{type:"number",value:t.allDayHoursInput,min:"0",max:"24",step:"0.25",onInput:a[4]||(a[4]=o=>t.onAllDayHoursChange(o.target))},null,40,jg)]),a[23]||(a[23]=g("p",{class:"pref-hint"},"Default is 8 h  adjust if your organisation tracks different durations.",-1))]),g("article",Ug,[a[25]||(a[25]=g("h4",null,"Trend lookback (global)",-1)),a[26]||(a[26]=g("p",{class:"pref-desc"},"Controls lookback for Balance, Day-off, and Category mix trends.",-1)),g("label",Vg,[a[24]||(a[24]=g("span",{class:"label"},"Lookback (weeks / months)",-1)),g("input",{type:"number",value:t.trendLookbackInput,min:"1",max:"6",step:"1",onInput:a[5]||(a[5]=o=>t.onTrendLookbackChange(o.target))},null,40,Kg)]),a[27]||(a[27]=g("p",{class:"pref-hint"},"Applies to both week and month views.",-1))]),g("article",qg,[a[30]||(a[30]=g("h4",null,"Deck cards",-1)),a[31]||(a[31]=g("p",{class:"pref-desc"},"Bring Deck boards into Opsdash. Cards remain read-only so you can focus on status.",-1)),g("label",Gg,[g("input",{type:"checkbox",checked:t.deckSettingsDraft.enabled,onChange:a[6]||(a[6]=o=>t.setDeckEnabled(o.target.checked))},null,40,Jg),a[28]||(a[28]=g("span",null,"Enable Deck cards on dashboard",-1))]),t.deckSettingsDraft.enabled?(k(),_(he,{key:0},[a[29]||(a[29]=g("p",{class:"pref-hint"},"Select which boards appear. Deck permissions still apply.",-1)),g("div",Yg,[t.deckBoardsLoading?(k(),_("p",Zg,"Loading Deck boards")):t.deckBoardsError?(k(),_("p",Xg,H(t.deckBoardsError),1)):(k(),_(he,{key:2},[t.deckBoards.length?(k(),_("div",ep,[(k(!0),_(he,null,$e(t.deckBoards,o=>(k(),_("label",{key:o.id,class:"deck-board-option",role:"listitem"},[g("input",{type:"checkbox",checked:t.isDeckBoardVisible(o.id),onChange:r=>t.toggleDeckBoard(o.id,r.target.checked)},null,40,tp),g("span",null,H(o.title),1)]))),128))])):(k(),_("p",Qg,"Open the Deck app to create a board."))],64))])],64)):ae("",!0)]),g("article",ap,[a[38]||(a[38]=g("h4",null,"Weekly/monthly recap",-1)),a[39]||(a[39]=g("p",{class:"pref-desc"},"Opsdash can send a summary of targets, balance, and notes so you stay aligned.",-1)),g("label",op,[g("input",{type:"checkbox",checked:t.reportingDraft.enabled,onChange:a[7]||(a[7]=o=>t.setReportingEnabled(o.target.checked))},null,40,rp),a[32]||(a[32]=g("span",null,"Send a recap automatically",-1))]),t.reportingDraft.enabled?(k(),_(he,{key:0},[g("label",np,[a[34]||(a[34]=g("span",{class:"label"},"Schedule",-1)),g("select",{value:t.reportingDraft.schedule,onChange:a[8]||(a[8]=o=>t.setReportingSchedule(o.target.value))},[...a[33]||(a[33]=[g("option",{value:"week"},"Weekly",-1),g("option",{value:"month"},"Monthly",-1),g("option",{value:"both"},"Weekly + Monthly",-1)])],40,sp)]),g("label",lp,[a[36]||(a[36]=g("span",{class:"label"},"Mid-range reminders",-1)),g("select",{value:t.reportingDraft.interim,onChange:a[9]||(a[9]=o=>t.setReportingInterim(o.target.value))},[...a[35]||(a[35]=[g("option",{value:"none"},"No interim reminder",-1),g("option",{value:"midweek"},"Mid-week / mid-month only",-1),g("option",{value:"daily"},"Daily nudge while enabled",-1)])],40,ip)]),g("label",cp,[g("input",{type:"checkbox",checked:t.reportingDraft.alertOnRisk,onChange:a[10]||(a[10]=o=>t.updateReporting({alertOnRisk:o.target.checked}))},null,40,dp),a[37]||(a[37]=g("span",null,"Highlight when targets drift off-track",-1))])],64)):ae("",!0)]),g("article",up,[a[41]||(a[41]=g("h4",null,"Activity insights",-1)),a[42]||(a[42]=g("p",{class:"pref-desc"},"Choose whether the Activity & Schedule card shows the day-off heatmap.",-1)),g("label",fp,[g("input",{type:"checkbox",checked:t.activityDraft.showDayOffTrend,onChange:a[11]||(a[11]=o=>t.setActivityDayOff(o.target.checked))},null,40,gp),a[40]||(a[40]=g("span",null,"Show Days off trend heatmap",-1))]),a[43]||(a[43]=g("p",{class:"pref-hint"},"Helps you compare recent weeks/months at a glance.",-1))])])],64))}}),hp={class:"strategy-grid"},mp=["onClick"],vp={class:"subtitle"},bp=Ie({__name:"OnboardingDashboardStep",props:{dashboardMode:{},setDashboardMode:{type:Function},dashboardPresets:{}},setup(e){return(t,a)=>(k(),_(he,null,[a[0]||(a[0]=g("h3",null,"Dashboard layout",-1)),a[1]||(a[1]=g("p",{class:"hint"},"Pick how much you want to see by default. You can change widgets later.",-1)),g("div",hp,[(k(!0),_(he,null,$e(t.dashboardPresets,o=>(k(),_("article",{key:o.id,class:Ne(["strategy-card",{active:t.dashboardMode===o.id}]),onClick:r=>t.setDashboardMode(o.id)},[g("h4",null,H(o.title),1),g("p",vp,H(o.subtitle),1),g("ul",null,[(k(!0),_(he,null,$e(o.highlights,r=>(k(),_("li",{key:r},H(r),1))),128))]),g("footer",null,"Widgets: "+H(o.widgets),1)],10,mp))),128))])],64))}}),yp={class:"strategy-grid"},wp=["onClick"],kp={class:"subtitle"},_p=Ie({__name:"OnboardingStrategyStep",props:{strategies:{},selectedStrategy:{},setSelectedStrategy:{type:Function}},setup(e){return(t,a)=>(k(),_(he,null,[a[0]||(a[0]=g("h3",null,"Select a starting strategy",-1)),g("div",yp,[(k(!0),_(he,null,$e(t.strategies,o=>(k(),_("article",{key:o.id,class:Ne(["strategy-card",{active:t.selectedStrategy===o.id}]),onClick:r=>t.setSelectedStrategy(o.id)},[g("h4",null,H(o.title),1),g("p",kp,H(o.subtitle),1),g("ul",null,[(k(!0),_(he,null,$e(o.highlights,r=>(k(),_("li",{key:r},H(r),1))),128))]),g("footer",null,"Best for: "+H(o.recommendedFor),1)],10,wp))),128))]),a[1]||(a[1]=g("p",{class:"hint"},"Balanced and Power include a Targets step for categories and calendar assignments.",-1))],64))}}),xp={class:"calendar-list"},Cp=["value","checked","onChange"],Sp={key:0,class:"calendar-targets"},$p={class:"cal-name"},Tp={class:"input-unit"},Mp=["value","onInput"],Ap={key:1,class:"hint"},Dp={key:2,class:"warning"},Ep=Ie({__name:"OnboardingCalendarsStep",props:{calendars:{},localSelection:{},toggleCalendar:{type:Function},calendarTargets:{},getCalendarTarget:{type:Function},setCalendarTarget:{type:Function},showCalendarTargets:{type:Boolean}},setup(e){return(t,a)=>(k(),_(he,null,[a[3]||(a[3]=g("h3",null,"Choose calendars to include",-1)),a[4]||(a[4]=g("p",null,"Select the calendars you want to track. You can adjust later at any time.",-1)),g("div",xp,[(k(!0),_(he,null,$e(t.calendars,o=>(k(),_("label",{key:o.id,class:Ne(["calendar-item",{checked:t.localSelection.includes(o.id)}])},[g("input",{type:"checkbox",value:o.id,checked:t.localSelection.includes(o.id),onChange:r=>t.toggleCalendar(o.id,r.target)},null,40,Cp),g("span",{class:"dot",style:Le({backgroundColor:o.color||"#3B82F6"})},null,4),g("span",null,H(o.displayname),1)],2))),128))]),t.localSelection.length&&t.showCalendarTargets?(k(),_("div",Sp,[a[1]||(a[1]=g("h4",null,"Calendar targets (h / week)",-1)),a[2]||(a[2]=g("p",{class:"hint"},"Optional in Power mode  set only if you need per-calendar pacing.",-1)),(k(!0),_(he,null,$e(t.calendars.filter(o=>t.localSelection.includes(o.id)),o=>(k(),_("div",{key:`target-${o.id}`,class:"target-row"},[g("span",$p,H(o.displayname),1),g("div",Tp,[g("input",{type:"number",min:"0",step:"0.25",value:t.getCalendarTarget(o.id),onInput:r=>t.setCalendarTarget(o.id,r.target.value)},null,40,Mp),a[0]||(a[0]=g("span",{class:"unit"},"h / week",-1))])]))),128))])):t.localSelection.length&&!t.showCalendarTargets?(k(),_("p",Ap," Per-calendar targets are available in Power mode. ")):ae("",!0),t.localSelection.length?ae("",!0):(k(),_("div",Dp,"Select at least one calendar to continue."))],64))}}),Lp={key:0,class:"hint"},Np={class:"category-presets"},Ip={class:"preset-grid"},Bp=["onClick"],Op={class:"preset-title"},Pp={class:"preset-desc"},Fp={class:"preset-swatches"},Hp={class:"categories-editor"},Wp={key:0,class:"empty-state"},zp={class:"category-card__header"},Rp={class:"color-field","data-color-popover":""},jp=["aria-expanded","aria-label","onClick"],Up=["id"],Vp={class:"swatch-grid",role:"group","aria-label":"Preset colors"},Kp=["aria-label","onClick"],qp={class:"custom-color"},Gp=["value","onInput"],Jp=["value","onInput"],Yp={class:"category-actions"},Zp=["disabled","onClick"],Xp={class:"category-card__fields"},Qp={class:"field"},eh={class:"input-unit"},th=["value","onInput"],ah={class:"field"},oh=["value","onChange"],rh={class:"field checkbox"},nh=["checked","onChange"],sh={key:1,class:"category-total"},lh={key:0,class:"calendar-assignments"},ih={class:"cal-name"},ch=["value","onChange"],dh=["value"],uh={key:0,class:"assignment-warning"},fh={key:0,class:"warning"},gh={key:1,class:"calendar-targets"},ph={class:"cal-name"},hh={class:"input-unit"},mh=["value","onInput"],vh={key:2,class:"hint"},bh=Ie({__name:"OnboardingCategoriesStep",props:{categoriesEnabled:{type:Boolean},categories:{},categoryTotalHours:{},selectedCalendars:{},assignments:{},showCalendarTargets:{type:Boolean},calendarTargets:{},getCalendarTarget:{type:Function},setCalendarTarget:{type:Function},addCategory:{type:Function},removeCategory:{type:Function},setCategoryLabel:{type:Function},categoryPresets:{},applyCategoryPreset:{type:Function},setCategoryTarget:{type:Function},setCategoryPaceMode:{type:Function},toggleCategoryWeekend:{type:Function},assignCalendar:{type:Function},openColorId:{},toggleColorPopover:{type:Function},closeColorPopover:{type:Function},categoryColorPalette:{},resolvedColor:{type:Function},applyColor:{type:Function},onColorInput:{type:Function}},setup(e){return(t,a)=>(k(),_(he,null,[a[18]||(a[18]=g("h3",null,"Configure categories & targets",-1)),t.categoriesEnabled?(k(),_(he,{key:1},[g("div",Np,[a[1]||(a[1]=g("h4",null,"Quick start presets",-1)),a[2]||(a[2]=g("p",{class:"hint"},"Pick a preset to create categories fast. You can edit everything after.",-1)),g("div",Ip,[(k(!0),_(he,null,$e(t.categoryPresets,o=>(k(),_("button",{key:o.id,type:"button",class:"preset-card",onClick:r=>t.applyCategoryPreset(o)},[g("div",Op,H(o.title),1),g("div",Pp,H(o.description),1),g("div",Fp,[(k(!0),_(he,null,$e(o.colors,r=>(k(),_("span",{key:`${o.id}-${r}`,class:"preset-swatch",style:Le({backgroundColor:r}),"aria-hidden":"true"},null,4))),128))])],8,Bp))),128))])]),g("div",Hp,[t.categories.length?ae("",!0):(k(),_("div",Wp,[...a[3]||(a[3]=[g("p",null,"No categories yet. Add at least one to continue.",-1)])])),(k(!0),_(he,null,$e(t.categories,o=>(k(),_("article",{key:o.id,class:"category-card"},[g("header",zp,[g("div",Rp,[g("button",{type:"button",class:"color-button","aria-expanded":t.openColorId===o.id,"aria-label":`Choose color for ${o.label}`,onClick:dt(r=>t.toggleColorPopover(o.id),["stop"])},[g("span",{class:"category-color-indicator",style:Le({backgroundColor:t.resolvedColor(o)}),"aria-hidden":"true"},null,4),a[4]||(a[4]=g("span",null,"Color",-1))],8,jp),t.openColorId===o.id?(k(),_("div",{key:0,class:"color-popover",id:`onboarding-color-popover-${o.id}`,tabindex:"-1",onKeydown:a[0]||(a[0]=io(dt(r=>t.closeColorPopover(),["prevent"]),["esc"]))},[g("div",Vp,[(k(!0),_(he,null,$e(t.categoryColorPalette,r=>(k(),_("button",{key:`${o.id}-swatch-${r}`,type:"button",class:Ne(["color-swatch",{active:t.resolvedColor(o)===r}]),style:Le({backgroundColor:r}),"aria-label":`Use color ${r}`,onClick:n=>t.applyColor(o.id,r)},null,14,Kp))),128))]),g("label",qp,[a[5]||(a[5]=g("span",null,"Custom",-1)),g("input",{class:"color-input",type:"color",value:t.resolvedColor(o),"aria-label":"Pick custom color",onInput:r=>t.onColorInput(o.id,r.target.value)},null,40,Gp)])],40,Up)):ae("",!0)]),g("input",{class:"category-name",type:"text",value:o.label,placeholder:"Category name",onInput:r=>t.setCategoryLabel(o.id,r.target.value)},null,40,Jp),g("div",Yp,[g("button",{class:"remove-category",type:"button",disabled:t.categories.length<=1,title:"Remove category",onClick:r=>t.removeCategory(o.id)},"  ",8,Zp)])]),g("div",Xp,[g("label",Qp,[a[7]||(a[7]=g("span",{class:"label"},"Target",-1)),g("div",eh,[g("input",{type:"number",value:o.targetHours,min:"0",step:"0.5",onInput:r=>t.setCategoryTarget(o.id,r.target.value)},null,40,th),a[6]||(a[6]=g("span",{class:"unit"},"h / week",-1))])]),g("label",ah,[a[9]||(a[9]=g("span",{class:"label"},"Pacing",-1)),g("select",{value:o.paceMode,onChange:r=>t.setCategoryPaceMode(o.id,r.target.value)},[...a[8]||(a[8]=[g("option",{value:"days_only"},"Days only",-1),g("option",{value:"time_aware"},"Time aware",-1)])],40,oh),a[10]||(a[10]=g("span",{class:"field-hint"},"Time aware adjusts for time already logged.",-1))]),g("label",rh,[g("input",{type:"checkbox",checked:o.includeWeekend,onChange:r=>t.toggleCategoryWeekend(o.id,r.target.checked)},null,40,nh),a[11]||(a[11]=g("span",null,"Include weekend",-1))])])]))),128)),Ae(L(mt),{type:"tertiary",class:"add-category",onClick:t.addCategory},{default:Je(()=>[...a[12]||(a[12]=[Fe("Add category",-1)])]),_:1},8,["onClick"]),t.categories.length?(k(),_("div",sh,"Total weekly target: "+H(t.categoryTotalHours.toFixed(1))+" h",1)):ae("",!0)]),t.selectedCalendars.length?(k(),_("div",lh,[a[14]||(a[14]=g("h4",null,"Assign calendars",-1)),a[15]||(a[15]=g("p",{class:"hint"},"Every selected calendar must be assigned before you continue.",-1)),(k(!0),_(he,null,$e(t.selectedCalendars,o=>(k(),_("div",{key:o.id,class:Ne(["assignment-row",{"is-unassigned":!t.assignments[o.id]}])},[g("span",ih,H(o.displayname),1),g("select",{value:t.assignments[o.id],onChange:r=>t.assignCalendar(o.id,r.target.value)},[a[13]||(a[13]=g("option",{value:""},"Unassigned",-1)),(k(!0),_(he,null,$e(t.categories,r=>(k(),_("option",{key:r.id,value:r.id},H(r.label),9,dh))),128))],40,ch),t.assignments[o.id]?ae("",!0):(k(),_("span",uh,"Required"))],2))),128)),t.categories.length?ae("",!0):(k(),_("p",fh,"Add at least one category to assign calendars."))])):ae("",!0),t.selectedCalendars.length&&t.showCalendarTargets?(k(),_("div",gh,[a[17]||(a[17]=g("h4",null,"Calendar targets (h / week)",-1)),(k(!0),_(he,null,$e(t.selectedCalendars,o=>(k(),_("div",{key:`targets-${o.id}`,class:"target-row"},[g("span",ph,H(o.displayname),1),g("div",hh,[g("input",{type:"number",min:"0",step:"0.25",value:t.getCalendarTarget(o.id),onInput:r=>t.setCalendarTarget(o.id,r.target.value)},null,40,mh),a[16]||(a[16]=g("span",{class:"unit"},"h / week",-1))])]))),128))])):ae("",!0),t.selectedCalendars.length?ae("",!0):(k(),_("p",vh,"Select at least one calendar to continue."))],64)):(k(),_("p",Lp,"This strategy does not require categories."))],64))}}),yh={class:"review-grid"},wh={class:"hint"},kh={key:1},_h={key:0},xh={key:0},Ch={key:0,class:"review-profile"},Sh={class:"toggle-row"},$h=["checked"],Th={key:0,class:"field"},Mh=["value"],Ah=Ie({__name:"OnboardingReviewStep",props:{strategyTitle:{},categoriesEnabled:{type:Boolean},selectedCalendars:{},draftTargetsCategories:{},draftTotalHours:{},totalHoursInput:{},categoryTotalHours:{},deckReviewSummary:{},deckEnabled:{type:Boolean},deckVisibleBoards:{},reportingEnabled:{type:Boolean},reportingSummary:{},showDayOffTrend:{type:Boolean},themePreference:{},dashboardMode:{},saveProfile:{type:Boolean},profileName:{},showSaveProfile:{type:Boolean},setSaveProfile:{type:Function},setProfileName:{type:Function}},setup(e){const t=e,a=D(()=>Number.isFinite(t.totalHoursInput??NaN)?Number(t.totalHoursInput):Number.isFinite(t.draftTotalHours)?Number(t.draftTotalHours):0),o=D(()=>t.dashboardMode==="quick"?"Quick layout":t.dashboardMode==="pro"?"Pro layout":"Standard layout"),r=D(()=>t.themePreference==="light"?"Light theme":t.themePreference==="dark"?"Dark theme":"Follow Nextcloud theme");return(n,s)=>(k(),_(he,null,[s[14]||(s[14]=g("h3",null,"Review your setup",-1)),g("div",yh,[g("div",null,[s[2]||(s[2]=g("h5",null,"Strategy",-1)),g("p",null,H(n.strategyTitle),1)]),g("div",null,[s[3]||(s[3]=g("h5",null,"Calendars",-1)),g("ul",null,[(k(!0),_(he,null,$e(n.selectedCalendars,i=>(k(),_("li",{key:i.id},H(i.displayname),1))),128))])]),g("div",null,[s[4]||(s[4]=g("h5",null,"Targets preview",-1)),n.categoriesEnabled&&n.draftTargetsCategories.length?(k(),_(he,{key:0},[g("ul",null,[(k(!0),_(he,null,$e(n.draftTargetsCategories,i=>(k(),_("li",{key:i.id},H(i.label)+"  "+H(i.targetHours)+" h",1))),128))]),g("p",wh,"Total weekly target: "+H(n.categoryTotalHours.toFixed(1))+" h",1)],64)):(k(),_("p",kh,"Total target: "+H(a.value)+" h per week",1))]),g("div",null,[s[5]||(s[5]=g("h5",null,"Dashboard",-1)),g("p",null,H(o.value),1)]),g("div",null,[s[6]||(s[6]=g("h5",null,"Theme",-1)),g("p",null,H(r.value),1)]),g("div",null,[s[7]||(s[7]=g("h5",null,"Deck tab",-1)),g("p",null,H(n.deckReviewSummary),1),n.deckEnabled&&n.deckVisibleBoards.length?(k(),_("ul",_h,[(k(!0),_(he,null,$e(n.deckVisibleBoards.slice(0,3),i=>(k(),_("li",{key:i.id},H(i.title),1))),128)),n.deckVisibleBoards.length>3?(k(),_("li",xh,"+"+H(n.deckVisibleBoards.length-3)+" more",1)):ae("",!0)])):ae("",!0)]),g("div",null,[s[8]||(s[8]=g("h5",null,"Reporting",-1)),g("p",null,H(n.reportingEnabled?n.reportingSummary:"Recap disabled"),1)]),g("div",null,[s[9]||(s[9]=g("h5",null,"Activity card",-1)),g("p",null,H(n.showDayOffTrend?"Days-off heatmap enabled":"Heatmap hidden"),1)]),n.showSaveProfile?(k(),_("div",Ch,[s[12]||(s[12]=g("h5",null,"Save profile",-1)),g("label",Sh,[g("input",{type:"checkbox",checked:n.saveProfile,onChange:s[0]||(s[0]=i=>n.setSaveProfile(i.target.checked))},null,40,$h),s[10]||(s[10]=g("span",null,"Save as new profile",-1))]),n.saveProfile?(k(),_("div",Th,[s[11]||(s[11]=g("span",{class:"label"},"Profile name",-1)),g("input",{type:"text",value:n.profileName,placeholder:"e.g. Team workload",onInput:s[1]||(s[1]=i=>n.setProfileName(i.target.value))},null,40,Mh)])):ae("",!0),s[13]||(s[13]=g("p",{class:"hint"},"Profiles store widgets/tabs, targets, theme, Deck, and reporting settings.",-1))])):ae("",!0)]),s[15]||(s[15]=g("p",{class:"hint"},"You can fine-tune categories, goals, and pacing once the dashboard loads.",-1))],64))}});function Dh(){const e=le(!1),t=le(!1),a=le(0),o=le(null),r=D(()=>e.value||t.value);async function n(s){a.value+=1,o.value=s??null,e.value=!1,t.value=!0,await ea()}return{autoWizardNeeded:e,manualWizardOpen:t,onboardingRunId:a,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:o}}const Zn=24*60*60*1e3;function ta(e,t,a){const o=Number(e);return Number.isFinite(o)?Math.min(a,Math.max(t,Math.round(o*100)/100)):t}function Eh(e,t,a){const o=Number(e);if(!Number.isFinite(o))return t;const r=Math.round(o);return r<t?t:r>a?a:r}function Bt(e){return Number.isFinite(e)?Number(e.toFixed(2)):0}function Xn(e){return Number.isFinite(e)?Math.max(0,Math.min(999,Number(e.toFixed(2)))):0}function Qn(e){if(!Number.isFinite(e))return"0";const t=Bt(Math.max(0,e));return Math.abs(t-Math.round(t))<.05?Math.round(t).toString():t.toFixed(1)}function Ro(e){const t=Number(e);if(!Number.isFinite(t))return 0;const a=Math.min(1e4,Math.max(0,t));return Number(a.toFixed(2))}function ka(e){return Ro(Number(e)*4)}function ec(){return{showWeekendShare:!0,showEveningShare:!0,showEarliestLatest:!0,showOverlaps:!0,showLongestSession:!0,showLastDayOff:!0,showDayOffTrend:!0,showHint:!0,forecastMode:"total"}}function co(){return{categories:["work","hobby","sport"],useCategoryMapping:!0,index:{method:"simple_range",basis:"category"},thresholds:{noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6},relations:{displayMode:"ratio"},trend:{lookbackWeeks:3},dayparts:{enabled:!1},ui:{showNotes:!1}}}function da(){return{totalHours:48,categories:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",color:"#2563EB",groupIds:[1]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#F97316",groupIds:[2]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#10B981",groupIds:[3]}],pace:{includeWeekendTotal:!0,mode:"days_only",thresholds:{onTrack:-2,atRisk:-10}},forecast:{methodPrimary:"linear",momentumLastNDays:2,padding:1.5},ui:{showTotalDelta:!0,showNeedPerDay:!0,showCategoryBlocks:!0,badges:!0,includeWeekendToggle:!0,showCalendarCharts:!0,showCategoryCharts:!0},allDayHours:8,timeSummary:{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},activityCard:ec(),balance:co(),includeZeroDaysInStats:!1}}function ua(e){return JSON.parse(JSON.stringify(Dt(e)))}function Dt(e){var s,i,l,c,d,p,m,h,u,f,y,x,S,M,T,O,I,w,E,P,W,Z,F,C,v;if(typeof e=="string")try{const b=JSON.parse(e);return Dt(b)}catch{return Dt(void 0)}const t=da(),a=JSON.parse(JSON.stringify(e??{}));if(typeof a!="object"||a===null||Array.isArray(a))return t;Array.isArray(a.categories)||(a.categories=[]);const o=a.categories.map(b=>{const j=(b!=null&&b.id&&typeof b.id=="string"?b.id:"")||Oh(String((b==null?void 0:b.label)??"cat")),R=typeof(b==null?void 0:b.label)=="string"&&b.label.trim()!==""?b.label.trim():Bh(j),Y=ta(b==null?void 0:b.targetHours,0,1e4),ne=!!(b!=null&&b.includeWeekend),X=(b==null?void 0:b.paceMode)==="time_aware"?"time_aware":"days_only",oe=Ih(b==null?void 0:b.color),se=Array.isArray(b==null?void 0:b.groupIds)?b.groupIds.map(fe=>Number(fe)).filter(fe=>Number.isFinite(fe)&&fe>=0&&fe<=9):[];return{id:j,label:R,targetHours:Y,includeWeekend:ne,paceMode:X,color:oe,groupIds:se}}),r=o.length?o:t.categories;return{totalHours:ta(a.totalHours,0,1e4),categories:r,pace:{includeWeekendTotal:!!(((s=a.pace)==null?void 0:s.includeWeekendTotal)??t.pace.includeWeekendTotal),mode:((i=a.pace)==null?void 0:i.mode)==="time_aware"?"time_aware":t.pace.mode,thresholds:{onTrack:ta(((c=(l=a.pace)==null?void 0:l.thresholds)==null?void 0:c.onTrack)??t.pace.thresholds.onTrack,-100,100),atRisk:ta(((p=(d=a.pace)==null?void 0:d.thresholds)==null?void 0:p.atRisk)??t.pace.thresholds.atRisk,-100,100)}},forecast:{methodPrimary:((m=a.forecast)==null?void 0:m.methodPrimary)==="momentum"?"momentum":"linear",momentumLastNDays:(()=>{var j;const b=Math.round(((j=a.forecast)==null?void 0:j.momentumLastNDays)??t.forecast.momentumLastNDays);return Math.min(14,Math.max(1,Number.isFinite(b)?b:t.forecast.momentumLastNDays))})(),padding:ta(((h=a.forecast)==null?void 0:h.padding)??t.forecast.padding,0,100)},ui:{showTotalDelta:!!(((u=a.ui)==null?void 0:u.showTotalDelta)??t.ui.showTotalDelta),showNeedPerDay:!!(((f=a.ui)==null?void 0:f.showNeedPerDay)??t.ui.showNeedPerDay),showCategoryBlocks:!!(((y=a.ui)==null?void 0:y.showCategoryBlocks)??t.ui.showCategoryBlocks),badges:!!(((x=a.ui)==null?void 0:x.badges)??t.ui.badges),includeWeekendToggle:!!(((S=a.ui)==null?void 0:S.includeWeekendToggle)??t.ui.includeWeekendToggle),showCalendarCharts:((M=a.ui)==null?void 0:M.showCalendarCharts)===void 0?t.ui.showCalendarCharts:!!a.ui.showCalendarCharts,showCategoryCharts:((T=a.ui)==null?void 0:T.showCategoryCharts)===void 0?t.ui.showCategoryCharts:!!a.ui.showCategoryCharts},allDayHours:ta(a.allDayHours??t.allDayHours,0,24),timeSummary:{showTotal:((O=a.timeSummary)==null?void 0:O.showTotal)===void 0?t.timeSummary.showTotal:!!a.timeSummary.showTotal,showAverage:((I=a.timeSummary)==null?void 0:I.showAverage)===void 0?t.timeSummary.showAverage:!!a.timeSummary.showAverage,showMedian:((w=a.timeSummary)==null?void 0:w.showMedian)===void 0?t.timeSummary.showMedian:!!a.timeSummary.showMedian,showBusiest:((E=a.timeSummary)==null?void 0:E.showBusiest)===void 0?t.timeSummary.showBusiest:!!a.timeSummary.showBusiest,showWorkday:((P=a.timeSummary)==null?void 0:P.showWorkday)===void 0?t.timeSummary.showWorkday:!!a.timeSummary.showWorkday,showWeekend:((W=a.timeSummary)==null?void 0:W.showWeekend)===void 0?t.timeSummary.showWeekend:!!a.timeSummary.showWeekend,showWeekendShare:((Z=a.timeSummary)==null?void 0:Z.showWeekendShare)===void 0?t.timeSummary.showWeekendShare:!!a.timeSummary.showWeekendShare,showCalendarSummary:((F=a.timeSummary)==null?void 0:F.showCalendarSummary)===void 0?t.timeSummary.showCalendarSummary:!!a.timeSummary.showCalendarSummary,showTopCategory:((C=a.timeSummary)==null?void 0:C.showTopCategory)===void 0?t.timeSummary.showTopCategory:!!a.timeSummary.showTopCategory,showBalance:((v=a.timeSummary)==null?void 0:v.showBalance)===void 0?t.timeSummary.showBalance:!!a.timeSummary.showBalance},activityCard:Lh(a.activityCard,t.activityCard),balance:Nh(a.balance,r,t.balance),includeZeroDaysInStats:!!(a.includeZeroDaysInStats??t.includeZeroDaysInStats)}}function Lh(e,t){const a={...t};if(!e||typeof e!="object")return a;["showWeekendShare","showEveningShare","showEarliestLatest","showOverlaps","showLongestSession","showLastDayOff","showDayOffTrend","showHint"].forEach(n=>{Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=!!e[n])});const r=e==null?void 0:e.forecastMode;if(typeof r=="string"){const n=r.toLowerCase();(n==="off"||n==="total"||n==="calendar"||n==="category")&&(a.forecastMode=n)}return a}function Nh(e,t,a){var d,p,m;const o=t.map(h=>h.id),r=new Set([...o,"__uncategorized__"]),n=Array.isArray(e==null?void 0:e.categories)?e.categories:a.categories,s=[];for(const h of n){const u=typeof h=="string"?h.trim():String(h??"").trim();u&&(r.size&&!r.has(u)||s.includes(u)||s.push(u))}s.length||(o.length?s.push(...o.slice(0,a.categories.length)):s.push(...a.categories));const i=(e==null?void 0:e.thresholds)??{},l=(e==null?void 0:e.ui)??{},c=(e==null?void 0:e.index)??{};return{categories:s,useCategoryMapping:!!((e==null?void 0:e.useCategoryMapping)??a.useCategoryMapping),index:{method:(c==null?void 0:c.method)==="shannon_evenness"?"shannon_evenness":a.index.method,basis:(c==null?void 0:c.basis)==="calendar"||(c==null?void 0:c.basis)==="both"||(c==null?void 0:c.basis)==="off"?c.basis:a.index.basis},thresholds:{noticeAbove:ta(i.noticeAbove??a.thresholds.noticeAbove,0,1),noticeBelow:ta(i.noticeBelow??a.thresholds.noticeBelow,0,1),warnAbove:ta(i.warnAbove??a.thresholds.warnAbove,0,1),warnBelow:ta(i.warnBelow??a.thresholds.warnBelow,0,1),warnIndex:ta(i.warnIndex??a.thresholds.warnIndex,0,1)},relations:{displayMode:((d=e==null?void 0:e.relations)==null?void 0:d.displayMode)==="factor"?"factor":a.relations.displayMode},trend:{lookbackWeeks:Eh(((p=e==null?void 0:e.trend)==null?void 0:p.lookbackWeeks)??a.trend.lookbackWeeks,1,6)},dayparts:{enabled:!!(((m=e==null?void 0:e.dayparts)==null?void 0:m.enabled)??a.dayparts.enabled)},ui:{showNotes:!!(l.showNotes??a.ui.showNotes)}}}function Ih(e){if(typeof e!="string")return;const t=e.trim();if(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t)){if(t.length===4){const[,a,o,r]=t;return`#${a}${a}${o}${o}${r}${r}`.toUpperCase()}return t.toUpperCase()}}function Bh(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function Oh(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return`cat-${Math.abs(t)}`}function Ph(e){const t=e.pace.totalEligible>0?e.pace.elapsedEligible/e.pace.totalEligible:0,a=t>0?e.totalProgress.actualHours/t:e.totalProgress.actualHours,o=Math.max(0,Math.ceil(e.pace.daysLeft)),r=Fh(e.dailyHours,e.config.forecast.momentumLastNDays),n=e.totalProgress.actualHours+r*o,s=Math.max(0,Math.min(a,n)-e.config.forecast.padding),i=Math.max(a,n)+e.config.forecast.padding,l=e.config.forecast.methodPrimary==="momentum"?"momentum":"linear",c=l==="momentum"?n:a,d=Math.max(0,c-e.config.forecast.padding),p=Math.max(0,c+e.config.forecast.padding),m=l==="momentum"?"Momentum":"Linear";return{linear:Bt(a),momentum:Bt(n),low:Bt(Math.max(0,s)),high:Bt(Math.max(0,i)),text:`${m} ${Qn(e.config.forecast.padding)}h  ${Qn(d)}${Qn(p)} h`,primaryMethod:l,primary:Bt(c),bandLow:Bt(d),bandHigh:Bt(p)}}function Fh(e,t){if(t<=0)return 0;const a=Array.from(e.entries());if(!a.length)return 0;a.sort((n,s)=>n[0].localeCompare(s[0]));const o=a.slice(-t),r=o.reduce((n,[,s])=>n+Math.max(0,s||0),0);return o.length?r/o.length:0}function Hh(e,t){var o,r;if(typeof window<"u"){const n=window;try{if(typeof(n==null?void 0:n.t)=="function")return n.t("opsdash",e,t||{});if(typeof((r=(o=n==null?void 0:n.OC)==null?void 0:o.L10N)==null?void 0:r.translate)=="function")return n.OC.L10N.translate("opsdash",e,t||{})}catch(s){n!=null&&n.console&&console.warn("[opsdash] translate failed",s)}}let a=e;return t&&Object.entries(t).forEach(([n,s])=>{a=a.replace(new RegExp(`{${n}}`,"g"),String(s))}),a}const uo=Hh;function tc(e){const t=e?Dt(e):da(),a=(t==null?void 0:t.totalHours)??0,o=(t==null?void 0:t.categories)??[],r={id:"total",label:uo("Total"),actualHours:0,targetHours:a,percent:0,deltaHours:0,remainingHours:a,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"};return{total:r,categories:o.map(n=>({...r,id:n.id,label:n.label,targetHours:n.targetHours,remainingHours:n.targetHours})),forecast:{linear:0,momentum:0,low:0,high:0,text:"~00 h",primaryMethod:(t==null?void 0:t.forecast.methodPrimary)??"linear",primary:0,bandLow:0,bandHigh:0}}}function ac(e){const t=e.config,a=nc(e.from),o=nc(e.to),r=jh(e.byDay),n=(e.byCal||[]).reduce((p,m)=>{const h=Number((m==null?void 0:m.total_hours)??(m==null?void 0:m.hours)??0);return Number.isFinite(h)?p+h:p},0),s=t.totalHours||0,i=oc({includeWeekend:t.pace.includeWeekendTotal,mode:t.pace.mode,includeZeroDays:t.includeZeroDaysInStats,start:a,end:o,dailyHours:r}),l=rc({id:"total",label:uo("Total"),actual:n,target:s,pace:i,thresholds:t.pace.thresholds,includeWeekend:t.pace.includeWeekendTotal,paceMode:t.pace.mode}),c=t.categories.map(p=>{const m=Rh(p,e.byCal,e.groupsById),h=p.paceMode||t.pace.mode,u=oc({includeWeekend:p.includeWeekend,mode:h,includeZeroDays:t.includeZeroDaysInStats,start:a,end:o,dailyHours:r});return rc({id:p.id,label:p.label,actual:m,target:p.targetHours,pace:u,thresholds:t.pace.thresholds,includeWeekend:p.includeWeekend,paceMode:h})}),d=Ph({config:t,totalProgress:l,dailyHours:r,pace:i});return{total:l,categories:c,forecast:d}}function oc(e){const{start:t,end:a}=e;if(!t||!a)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};const o=jr(new Date),r=La(t),n=La(a),s=Uh(t,a).filter(p=>e.includeWeekend||!Vh(p)),i=s.length;if(i===0)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};if(La(o)>n)return{totalEligible:i,elapsedEligible:i,daysLeft:0,calendarPercent:100};if(La(o)<r)return{totalEligible:i,elapsedEligible:0,daysLeft:i,calendarPercent:0};let l=0;for(const p of s){const m=La(p),h=e.dailyHours.get(m)??0;if(!(!e.includeZeroDays&&h<=0&&m!==La(o))){if(m<La(o))l+=1;else if(m===La(o))if(e.mode==="time_aware"){const f=Math.min(new Date().getTime(),p.getTime()+Zn)-p.getTime(),y=Math.max(0,Math.min(1,f/Zn));(e.includeZeroDays||h>0||y>0)&&(l+=y)}else(e.includeZeroDays||h>0)&&(l+=1)}}const c=Xn(l/i*100),d=Math.max(0,i-l);return{totalEligible:i,elapsedEligible:l,daysLeft:d,calendarPercent:c}}function rc(e){const t=Math.max(0,e.target||0),a=Math.max(0,e.actual||0),o=t>0?Xn(a/t*100):0,r=t-a,n=a-t,s=e.pace.daysLeft>0?Math.max(0,r)/e.pace.daysLeft:0,i=o-e.pace.calendarPercent,l=Wh({percent:o,target:t,gap:i,thresholds:e.thresholds});return{id:e.id,label:e.label,actualHours:Bt(a),targetHours:Bt(t),percent:o,deltaHours:Bt(n),remainingHours:Bt(Math.max(0,r)),needPerDay:Bt(s),daysLeft:Math.max(0,Math.ceil(e.pace.daysLeft)),calendarPercent:Xn(e.pace.calendarPercent),gap:Bt(i),status:l,statusLabel:zh(l),includeWeekend:e.includeWeekend,paceMode:e.paceMode}}function Wh(e){return e.target<=0?"none":e.percent>=100?"done":e.gap>=e.thresholds.onTrack?"on_track":e.gap>=e.thresholds.atRisk?"at_risk":"behind"}function zh(e){switch(e){case"on_track":return uo("On Track");case"at_risk":return uo("At Risk");case"behind":return uo("Behind");case"done":return uo("Done");default:return""}}function Rh(e,t,a){if(!Array.isArray(t))return 0;const o=Array.isArray(e.groupIds)&&e.groupIds.length?new Set(e.groupIds):null;let r=0;for(const n of t){const s=Number((n==null?void 0:n.total_hours)??(n==null?void 0:n.hours)??0);if(!Number.isFinite(s)||s<=0)continue;const i=String((n==null?void 0:n.id)??(n==null?void 0:n.calendar)??""),l=Number((n==null?void 0:n.group)??(n==null?void 0:n.group_id)??(a==null?void 0:a[i])??0);o&&!o.has(l)||(r+=s)}return r}function jh(e){const t=new Map;if(!Array.isArray(e))return t;for(const a of e){const o=String((a==null?void 0:a.date)??(a==null?void 0:a.day)??"");if(!o)continue;const r=Number((a==null?void 0:a.total_hours)??(a==null?void 0:a.hours)??0);Number.isFinite(r)&&t.set(o,r)}return t}function Uh(e,t){const a=[];let o=jr(e);const r=jr(t).getTime();for(;o.getTime()<=r;)a.push(new Date(o)),o=new Date(o.getTime()+Zn);return a}function nc(e){if(!e)return null;const t=e.split("-").map(o=>Number(o));if(t.length!==3||t.some(o=>!Number.isInteger(o)))return null;const a=new Date(Date.UTC(t[0],t[1]-1,t[2]));return Number.isNaN(a.getTime())?null:jr(a)}function jr(e){const t=new Date(e);return t.setUTCHours(0,0,0,0),t}function La(e){return e.toISOString().slice(0,10)}function Vh(e){const t=e.getUTCDay();return t===0||t===6}const Na=1,Kh=[{id:"total_only",title:"Focused",subtitle:"Keep it simple with one total goal",highlights:["Single weekly/monthly target","Great for personal overview","Upgradable later"],layers:{total:!0,categories:!1,calendars:!1},recommendedFor:"Individuals tracking a single workload"},{id:"total_plus_categories",title:"Balanced",subtitle:"Track balance across a few life areas",highlights:["Total goal plus key categories","Automatic category summaries","Calendar grouping suggestions"],layers:{total:!0,categories:!0,calendars:!1},recommendedFor:"Work/life blend with a handful of focus areas"},{id:"full_granular",title:"Power",subtitle:"Targets per category and calendar",highlights:["Detailed per-calendar goals","Category dashboards & pacing","Best for multi-project oversight"],layers:{total:!0,categories:!0,calendars:!0},recommendedFor:"Power users managing several project calendars"}],sc=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1"];function qh(e){const t={};return Object.entries(e).forEach(([a,o])=>{t[a]=Number((o*4).toFixed(2))}),t}function Ur(e){if(typeof e!="string")return null;const t=e.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t))return null;if(t.length===4){const[,a,o,r]=t;return`#${a}${a}${o}${o}${r}${r}`.toUpperCase()}return t.toUpperCase()}function Gh(e){const t=new Set,a=[];return e.forEach((o,r)=>{const n=((o==null?void 0:o.id)||`cat_${r}`).trim()||`cat_${r}`;t.has(n)||(t.add(n),a.push({id:n,label:((o==null?void 0:o.label)||n).trim()||`Category ${r+1}`,targetHours:Number.isFinite(o==null?void 0:o.targetHours)?Number(o.targetHours):0,includeWeekend:!!(o!=null&&o.includeWeekend),paceMode:(o==null?void 0:o.paceMode)==="time_aware"?"time_aware":"days_only",color:Ur(o==null?void 0:o.color)??null}))}),a}function Jh(e,t,a){const o={};if(!t.length)return o;const r=new Set(t.map(n=>n.id));return e.forEach(n=>{const s=a[n];r.has(s)&&(o[n]=s)}),o}function lc(){return Kh}function ic(e,t,a){const o=[...new Set(a.filter(r=>t.some(n=>n.id===r)))];return e==="total_only"?{categories:[],assignments:{}}:{categories:[],assignments:Object.fromEntries(o.map(r=>[r,""]))}}function es(e,t,a,o){var y;const r=[...new Set(a.filter(x=>t.some(S=>S.id===x)))],n=Dt(da()),s={},i={};if(e==="total_only"){const x=ua(n);return x.totalHours=x.totalHours||40,x.categories=[],x.ui.showCategoryBlocks=!1,x.ui.showCategoryCharts=!1,x.ui.showCalendarCharts=!1,{selected:r,targetsConfig:Dt(x),groups:s,targetsWeek:i,targetsMonth:{}}}const l=ic(e,t,r),c=Gh((y=o==null?void 0:o.categories)!=null&&y.length?o.categories:l.categories),d=Jh(r,c.length?c:l.categories,(o==null?void 0:o.assignments)??l.assignments),p=ua(n),m=new Map;let h=0;const u=x=>{const S=Ur(x.color);if(S)return S;const M=t.find(O=>d[O.id]===x.id&&Ur(O.color));if(M)return Ur(M.color)??null;const T=sc[h%sc.length];return h+=1,T??null};p.categories=c.map((x,S)=>{const M=S+1;return m.set(x.id,M),{id:x.id,label:x.label,targetHours:Number(x.targetHours.toFixed(2)),includeWeekend:x.includeWeekend,paceMode:x.paceMode,color:u(x),groupIds:[M]}}),p.totalHours=p.categories.reduce((x,S)=>x+S.targetHours,0),p.totalHours<=0&&(p.totalHours=40),p.ui.showCategoryBlocks=p.categories.length>0,p.ui.showCategoryCharts=p.categories.length>0,p.ui.showCalendarCharts=e==="full_granular",p.includeZeroDaysInStats=!1,p.balance.categories=p.categories.map(x=>x.id),p.balance.useCategoryMapping=!0;const f={};return Object.values(d).forEach(x=>{f[x]=(f[x]??0)+1}),Object.entries(d).forEach(([x,S])=>{const M=m.get(S);if(M&&(s[x]=M,e==="full_granular")){const T=p.categories.find(w=>w.id===S);if(!T)return;const O=f[S]||1,I=Number((T.targetHours/O).toFixed(2));i[x]=I}}),{selected:r,targetsConfig:Dt(p),groups:s,targetsWeek:i,targetsMonth:qh(i)}}function jo(){return{enabled:!1,schedule:"both",interim:"none",reminderLead:"1d",alertOnRisk:!0,riskThreshold:.85,notifyEmail:!0,notifyNotification:!0}}function ts(e,t){const a=t??jo();if(!e||typeof e!="object")return{...a};const o=e.schedule==="week"||e.schedule==="month"?e.schedule:"both",r=e.interim==="midweek"||e.interim==="daily"?e.interim:"none",n=e.reminderLead==="1d"||e.reminderLead==="2d"?e.reminderLead:"none",s=Number(e.riskThreshold),i=Number.isFinite(s)&&s>=0&&s<=1?s:a.riskThreshold;return{enabled:!!e.enabled,schedule:o,interim:r,reminderLead:n,alertOnRisk:e.alertOnRisk!==!1,riskThreshold:i,notifyEmail:e.notifyEmail!==!1,notifyNotification:!!e.notifyNotification}}function Uo(){return{enabled:!0,filtersEnabled:!0,defaultFilter:"all",hiddenBoards:[],mineMode:"assignee",solvedIncludesArchived:!0,ticker:{autoScroll:!0,intervalSeconds:5,showBoardBadges:!0}}}function as(e,t){var p,m,h;const a=t??Uo();if(!e||typeof e!="object")return{...a};const o=(u,f)=>{if(typeof u=="boolean")return u;if(typeof u=="number")return u===1?!0:u===0?!1:f;if(typeof u=="string"){const y=u.trim().toLowerCase();if(["1","true","yes","on"].includes(y))return!0;if(["0","false","no","off","null",""].includes(y))return!1}return f},r=u=>{const f=Number(u);return!Number.isInteger(f)||f<=0||f>1e5?null:f},s=["all","mine","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine"].includes(e.defaultFilter)?e.defaultFilter:"all",i=e.mineMode==="creator"||e.mineMode==="both"?e.mineMode:"assignee",l=o(e.solvedIncludesArchived,a.solvedIncludesArchived),c={autoScroll:o((p=e.ticker)==null?void 0:p.autoScroll,a.ticker.autoScroll),intervalSeconds:Yh((m=e.ticker)==null?void 0:m.intervalSeconds,a.ticker.intervalSeconds),showBoardBadges:o((h=e.ticker)==null?void 0:h.showBoardBadges,a.ticker.showBoardBadges)},d=Array.isArray(e.hiddenBoards)?Array.from(new Set(e.hiddenBoards.map(u=>r(u)).filter(u=>Number.isInteger(u)&&u>0))):a.hiddenBoards.slice();return{enabled:o(e.enabled,a.enabled),filtersEnabled:o(e.filtersEnabled,a.filtersEnabled),defaultFilter:s,hiddenBoards:d,mineMode:i,solvedIncludesArchived:l,ticker:c}}function Yh(e,t){const a=Number(e);return Number.isFinite(a)?Math.min(10,Math.max(3,Math.trunc(a))):t}class os extends Error{constructor(t,a,o){super(t),this.status=a,this.body=o}}async function Zh(e){const t=Date.parse(e.from),a=Date.parse(e.to);if(!Number.isFinite(t)||!Number.isFinite(a)||t>a)return[];const o=e.includeCompleted!==!1,r=e.includeArchived!==!1,n=await cc();if(n.length===0)return[];const s=new Map;n.forEach(l=>{l.id!=null&&s.set(l.id,{id:l.id,title:l.title||`Board ${l.id}`,color:fc(l.color)})});const i=[];for(const l of n){if(l.id==null)continue;let c;const d=r?{details:1,archived:1,includeArchived:1}:{details:1};try{c=await Kr(qr(`/apps/deck/api/v1/boards/${l.id}/stacks`,d))}catch(u){if(gc(u))continue;if(u instanceof os&&u.status===400){const f=r?{archived:1,includeArchived:1}:void 0;c=await Kr(qr(`/apps/deck/api/v1/boards/${l.id}/stacks`,f))}else throw u}const p=dc(c);let m=[];if(r)try{const u=await Kr(qr(`/apps/deck/api/v1/boards/${l.id}/stacks/archived`));m=dc(u)}catch{}const h=[...p.map(u=>({stack:u,forceArchived:!1})),...m.map(u=>({stack:u,forceArchived:!0}))];for(const{stack:u,forceArchived:f}of h){if(u.cards==null||u.id==null)continue;const y=u.title||`Stack ${u.id}`;for(const x of u.cards){const S=Qh(x,s.get(l.id),{stackId:u.id,stackTitle:y},{forceArchived:f});if(!S)continue;if(!(S.dueTs!=null||S.doneTs!=null)){if(S.status==="archived"&&!r)continue;i.push({...S,match:"due"});continue}if(S.status==="archived"&&!r)continue;const T=S.dueTs!=null&&uc(S.dueTs,t,a),O=o&&S.doneTs!=null&&uc(S.doneTs,t,a),I=S.status!=="active",w=o&&(O||I&&T);!(T&&!w)&&!w||i.push({...S,match:w?"completed":"due"})}}}return i.sort((l,c)=>{const d=Number.MAX_SAFE_INTEGER,p=l.match==="due"?l.dueTs??l.doneTs??d:l.doneTs??l.dueTs??d,m=c.match==="due"?c.dueTs??c.doneTs??d:c.doneTs??c.dueTs??d;return p!==m?p-m:l.boardId!==c.boardId?l.boardId-c.boardId:l.id-c.id})}async function cc(){let e;try{e=await Kr(qr("/apps/deck/api/v1/boards",{details:0}))}catch(t){if(gc(t))return[];throw t}return Xh(e)}function Xh(e){if(Array.isArray(e))return e;if(e&&typeof e=="object"){if(Array.isArray(e.data))return e.data;if(e.ocs&&Array.isArray(e.ocs.data))return e.ocs.data}return[]}function dc(e){if(Array.isArray(e))return e;if(e&&typeof e=="object"){if(Array.isArray(e.data))return e.data;if(e.ocs&&Array.isArray(e.ocs.data))return e.ocs.data}return[]}function Qh(e,t,a,o){var p,m,h,u;if(!e||typeof e!="object"||e.id==null||!a)return null;const r=rs(e.duedate),n=rs(e.done),s=rs(e.createdAt??e.created),i=e.boardId||(t==null?void 0:t.id);if(i==null)return null;const l=!!e.archived||!!(o!=null&&o.forceArchived),c=l?"archived":n!=null?"done":"active",d=(t==null?void 0:t.title)||`Board ${i}`;return{id:e.id,title:e.title||`Card ${e.id}`,description:e.description||"",boardId:i,boardTitle:d,boardColor:t==null?void 0:t.color,stackTitle:a.stackTitle,stackId:a.stackId,due:r!=null?new Date(r).toISOString():void 0,dueTs:r??void 0,done:n!=null?new Date(n).toISOString():void 0,doneTs:n??void 0,archived:l,status:c,created:s!=null?new Date(s).toISOString():void 0,createdTs:s??void 0,createdBy:(p=Vr(e.owner??e.createdBy??e.creator))==null?void 0:p.uid,createdByDisplay:(m=Vr(e.owner??e.createdBy??e.creator))==null?void 0:m.displayName,doneBy:(h=Vr(e.doneBy??e.completedBy??e.lastEditor))==null?void 0:h.uid,doneByDisplay:(u=Vr(e.doneBy??e.completedBy??e.lastEditor))==null?void 0:u.displayName,labels:Array.isArray(e.labels)?e.labels.filter(f=>!!(f&&typeof f=="object")).map(f=>({id:f.id,title:f.title||`Label ${f.id??""}`.trim(),color:fc(f.color)})):[],assignees:Array.isArray(e.assignedUsers)?e.assignedUsers.map(f=>em(f)).filter(Boolean):[],match:"due"}}function em(e){if(!e)return null;const t=e.participant;if(t&&typeof t=="object"){const a=typeof t.uid=="string"?t.uid:void 0,o=typeof t.displayname=="string"?t.displayname:void 0;if(a||o)return{id:e.id,uid:a,displayName:o}}return typeof t=="string"?{id:e.id,uid:t}:null}function Vr(e){if(!e)return null;if(typeof e=="string"){const t=e.trim();return t?{uid:t}:null}if(typeof e=="object"){const t=typeof e.uid=="string"?e.uid:typeof e.participant=="string"?e.participant:void 0,a=typeof e.displayname=="string"?e.displayname:typeof e.id=="string"||typeof e.id=="number"?String(e.id):void 0;if(t||a)return{uid:t,displayName:a}}return null}function rs(e){if(typeof e=="number"&&Number.isFinite(e))return e>1e12?Math.trunc(e):e*1e3;if(typeof e=="string"&&e.trim()!==""){const t=Date.parse(e);return Number.isFinite(t)?t:null}return null}function uc(e,t,a){return e>=t&&e<=a}function fc(e){if(!e||typeof e!="string")return;const t=e.trim();if(t!=="")return t.startsWith("#")?t:`#${t}`}async function Kr(e){const t={Accept:"application/json","OCS-APIREQUEST":"true"},a=am();a&&(t.requesttoken=a);const o=await fetch(e,{credentials:"same-origin",headers:t}),r=await o.text();if(!o.ok)throw new os(`Deck request failed (${o.status})`,o.status,r);return r?JSON.parse(r):null}function qr(e,t){var i,l,c;const a=e.startsWith("/")?e:`/${e}`,o=t?tm(t):"",r=typeof window<"u"?window:{};if(r.OC&&typeof r.OC.generateUrl=="function"){const d=r.OC.generateUrl(a);return o?`${d}?${o}`:d}const n=r.OC&&(r.OC.webroot||((l=(i=r.OC).getRootPath)==null?void 0:l.call(i)))||r._oc_webroot||"",s=typeof((c=r.location)==null?void 0:c.origin)=="string"?r.location.origin:"";return n?o?`${n}${a}?${o}`:`${n}${a}`:s?o?`${s}${a}?${o}`:`${s}${a}`:o?`${a}?${o}`:a}function tm(e){const t=new URLSearchParams;return Object.entries(e).forEach(([a,o])=>{o!=null&&t.append(a,String(o))}),t.toString()}function am(){var a;const e=typeof window<"u"?window:{},t=((a=e.OC)==null?void 0:a.requestToken)||e.oc_requesttoken;return typeof t=="string"?t:void 0}function gc(e){return e instanceof os&&(e.status===404||e.status===401||e.status===503)}function om(e){var rn,nn;const{props:t,emit:a}=e,o=["intro","strategy","dashboard","calendars","categories","preferences","review"],r=le(0),n=le("total_only"),s=le(t.initialDashboardMode||"standard"),i=le(t.hasExistingConfig?"existing":"new"),l=le(!1),c=le(""),d=le([]),p=le([]),m=le({}),h=le({}),u=le("auto"),f=le(8),y=le(null),x=le(3),S=le(bt(t.initialDeckSettings??Uo())),M=le({...t.initialReportingConfig??jo()}),T=le({showDayOffTrend:((nn=(rn=t.initialTargetsConfig)==null?void 0:rn.activityCard)==null?void 0:nn.showDayOffTrend)??!0}),O=le([]),I=le(!1),w=le(""),E=[{id:"quick",title:"Quick",subtitle:"Minimal, KPI-first layout",highlights:["Time summary + targets","Balance index","Days-off trend"],widgets:"4 widgets"},{id:"standard",title:"Standard",subtitle:"Balanced layout with charts",highlights:["Targets + time summary","Balance & category mix","Calendar table + charts"],widgets:"11 widgets"},{id:"pro",title:"Pro",subtitle:"Full layout with everything",highlights:["Everything in Standard","Deck cards + notes editor","Extended charts"],widgets:"13 widgets"}],P=[{id:"work_hobby_sport",title:"Work / Hobby / Sport",description:"Simple split for work, play, and fitness.",categories:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",color:"#2563EB"},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#F97316"},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#10B981"}],colors:["#2563EB","#F97316","#10B981"]},{id:"focus_personal_recovery",title:"Focus / Personal / Recovery",description:"Balance deep work, personal time, and rest.",categories:[{id:"focus",label:"Focus",targetHours:30,includeWeekend:!1,paceMode:"days_only",color:"#6366F1"},{id:"personal",label:"Personal",targetHours:8,includeWeekend:!0,paceMode:"days_only",color:"#EC4899"},{id:"recovery",label:"Recovery",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#14B8A6"}],colors:["#6366F1","#EC4899","#14B8A6"]},{id:"client_internal_learning",title:"Client / Internal / Learning",description:"Great for agency or team workloads.",categories:[{id:"client",label:"Client",targetHours:28,includeWeekend:!1,paceMode:"days_only",color:"#0EA5E9"},{id:"internal",label:"Internal",targetHours:8,includeWeekend:!1,paceMode:"days_only",color:"#F59E0B"},{id:"learning",label:"Learning",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#22C55E"}],colors:["#0EA5E9","#F59E0B","#22C55E"]}],W=D(()=>{if(!S.value.enabled)return[];const ee=new Set(S.value.hiddenBoards||[]);return O.value.filter(te=>!ee.has(te.id))}),Z=D(()=>{if(!S.value.enabled)return"Deck tab disabled";if(I.value)return"Deck tab enabled  loading boards";if(w.value)return"Deck tab enabled  open Deck to finish setup.";if(!O.value.length)return"Deck tab enabled  create a Deck board to see cards.";if(!W.value.length)return"Deck tab enabled  all boards hidden";if(W.value.length===O.value.length){const ee=W.value.length;return ee===1?"Showing 1 board":`Showing all ${ee} boards`}return W.value.length===1?`Showing ${W.value[0].title}`:W.value.length===2?`Showing ${W.value[0].title} and ${W.value[1].title}`:`Showing ${W.value.length} boards`}),F=D(()=>{if(!M.value.enabled)return"Recap disabled";const ee=M.value.schedule==="both"?"Weekly + monthly recap":M.value.schedule==="week"?"Weekly recap":"Monthly recap",te=M.value.interim==="daily"?"Daily reminder":M.value.interim==="midweek"?"Mid-range reminder":"No interim reminder";return`${ee}  ${te}`}),C=le(null),v=D(()=>u.value==="auto"?t.systemTheme==="dark"?"dark":"light":u.value),b=D(()=>t.systemTheme==="dark"?"dark":"light"),j=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],R=D(()=>p.value.reduce((ee,te)=>ee+(Number.isFinite(te.targetHours)?te.targetHours:0),0)),Y=D(()=>{const ee=new Set,te=ke=>{const st=tt(ke);st&&ee.add(st)};return t.calendars.forEach(ke=>te(ke.color)),p.value.forEach(ke=>te(ke.color)),j.forEach(ke=>ee.add(ke)),Array.from(ee)}),ne=lc(),X=D(()=>ne.find(ee=>ee.id===n.value)??ne[0]),oe=D(()=>X.value.layers.categories),se=D(()=>X.value.layers.calendars),fe=D(()=>t.closable!==!1),ce=D(()=>o.filter(ee=>ee==="categories"?oe.value:!0)),V=D(()=>ce.value[Math.min(r.value,ce.value.length-1)]),J=D(()=>r.value+1),A=D(()=>ce.value.length),B=D(()=>t.saving===!0),q=D(()=>t.snapshotSaving===!0),re=D(()=>t.snapshotNotice??null),be="opsdash-onboarding-lock";function $(ee){if(typeof document>"u")return;const te=document.body;te&&(ee?(te.classList.add(be),te.dataset.opsdashOnboarding="1"):(te.classList.remove(be),delete te.dataset.opsdashOnboarding))}De(()=>t.visible,ee=>{ee&&(z(),nt()),$(ee)},{immediate:!0}),Tt(()=>{typeof document<"u"&&document.addEventListener("click",He),Gt().catch(ee=>{console.error("[opsdash] deck board load failed",ee)})}),Nn(()=>{typeof document<"u"&&document.removeEventListener("click",He),$(!1)});function z(ee){var We,Yt,sr;const te=ee??(t.hasExistingConfig?"existing":"new");i.value=te;const ke=te==="existing";r.value=0,n.value=ke?t.initialStrategy??"total_only":"total_only",s.value=ke&&t.initialDashboardMode||"standard";const st=ke?[...t.initialSelection??[]]:[];d.value=Array.from(new Set(st.filter(Ga=>t.calendars.some(lr=>lr.id===Ga)))),u.value=ke?t.initialThemePreference??"auto":"auto",f.value=je(ke?t.initialAllDayHours??8:8),y.value=at(ke?t.initialTotalHours??null:null),x.value=ft(ke?((We=t.initialTargetsConfig)==null?void 0:We.balanceTrendLookback)??3:3),h.value={},ke&&Object.entries(t.initialTargetsWeek??{}).forEach(([Ga,lr])=>{t.calendars.some(As=>As.id===Ga)&&(h.value[Ga]=Ro(lr))}),S.value=bt(ke?t.initialDeckSettings??Uo():Uo()),M.value={...ke?t.initialReportingConfig??jo():jo()},T.value={showDayOffTrend:ke?((sr=(Yt=t.initialTargetsConfig)==null?void 0:Yt.activityCard)==null?void 0:sr.showDayOffTrend)??!0:!0},t.hasExistingConfig?(l.value=te==="new",c.value=""):(l.value=!1,c.value=""),Q(),oe.value?p.value.length?y.value=at(R.value):y.value=null:y.value===null&&ke&&(y.value=at(t.initialTotalHours??40)),me()}function N(ee){i.value!==ee&&z(ee)}function U(ee){l.value=ee,ee||(c.value="")}function G(ee){c.value=ee}function Q(){var ee;if(!oe.value){p.value=[],m.value={},ye();return}if(i.value==="existing"&&((ee=t.initialCategories)!=null&&ee.length))p.value=oa(t.initialCategories),m.value={...t.initialAssignments??{}};else{const te=ic(n.value,t.calendars,d.value);p.value=te.categories.map(ke=>({...ke})),m.value={...te.assignments}}pe(),ye()}function pe(){if(!oe.value||!p.value.length){m.value={};return}const ee=new Set(p.value.map(ke=>ke.id)),te={};d.value.forEach(ke=>{const st=m.value[ke];te[ke]=ee.has(st)?st:""}),m.value=te}const ge=D(()=>t.calendars.filter(ee=>d.value.includes(ee.id))),de=D(()=>es(n.value,t.calendars,d.value,oe.value?{categories:p.value,assignments:m.value}:void 0)),ue=D(()=>X.value.title);function ye(){if(oe.value){y.value=at(R.value);return}y.value===null&&(y.value=i.value==="existing"?at(t.initialTotalHours??40):null)}function me(){if(!t.startStep)return;const ee=ce.value.indexOf(t.startStep);ee>=0&&(r.value=ee)}function ve(ee){const te=ce.value.indexOf(ee);te>=0&&(r.value=te)}function we(ee){switch(ee){case"intro":return"Intro";case"strategy":return"Modes";case"dashboard":return"Dashboard";case"calendars":return"Calendars";case"categories":return"Targets";case"preferences":return"Preferences";case"review":return"Review";default:return ee}}De(n,()=>{Q(),r.value=Math.min(r.value,ce.value.length-1)}),De(ce,ee=>{r.value>=ee.length&&(r.value=Math.max(ee.length-1,0))}),De(()=>t.startStep,me),De(oe,()=>{ye()}),De(R,ee=>{oe.value&&(y.value=at(ee))}),De(V,ee=>{ee!=="categories"&&nt()}),De(()=>t.visible,ee=>{ee||nt()}),De(d,()=>{const ee=new Set(d.value),te={};Object.entries(h.value).forEach(([ke,st])=>{ee.has(ke)&&(te[ke]=st)}),h.value=te,pe()},{deep:!0}),De(p,()=>{pe()},{deep:!0});function Se(){const ee=`cat_${Date.now().toString(36)}_${p.value.length}`;p.value=[...p.value,{id:ee,label:`Category ${p.value.length+1}`,targetHours:8,includeWeekend:!1,paceMode:"days_only"}],pe()}function xe(ee){p.value.length<=1||(p.value=p.value.filter(te=>te.id!==ee),pe())}function Te(ee,te){p.value=p.value.map(ke=>ke.id===ee?{...ke,label:te}:ke)}function Me(ee){p.value=ee.categories.map((te,ke)=>({id:String(te.id||`cat_${ke}`),label:te.label||`Category ${ke+1}`,targetHours:Number.isFinite(te.targetHours)?Number(te.targetHours):0,includeWeekend:!!te.includeWeekend,paceMode:te.paceMode==="time_aware"?"time_aware":"days_only",color:tt(te.color)??null})),m.value={},pe(),ye()}function Be(ee,te){const ke=Number(te),st=Number.isFinite(ke)?Math.max(0,Math.min(1e3,ke)):void 0;p.value=p.value.map(We=>We.id===ee?{...We,targetHours:st??We.targetHours}:We)}function Pe(ee,te){p.value=p.value.map(ke=>ke.id===ee?{...ke,includeWeekend:te}:ke)}function ze(ee,te){m.value={...m.value,[ee]:te}}function vt(ee){if(C.value===ee){nt();return}C.value=ee,ea(()=>{const te=document.getElementById(`onboarding-color-popover-${ee}`);te==null||te.focus()})}function nt(){C.value=null}function He(ee){const te=ee.target;te!=null&&te.closest("[data-color-popover]")||nt()}function tt(ee){if(typeof ee!="string")return null;const te=ee.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(te))return null;if(te.length===4){const[,ke,st,We]=te;return`#${ke}${ke}${st}${st}${We}${We}`.toUpperCase()}return te.toUpperCase()}function oa(ee){return Array.isArray(ee)?ee.map((te,ke)=>({id:String((te==null?void 0:te.id)??`cat_${ke}`).trim()||`cat_${ke}`,label:String((te==null?void 0:te.label)??`Category ${ke+1}`).trim()||`Category ${ke+1}`,targetHours:Number.isFinite(te==null?void 0:te.targetHours)?Number(te.targetHours):0,includeWeekend:!!(te!=null&&te.includeWeekend),paceMode:(te==null?void 0:te.paceMode)==="time_aware"?"time_aware":"days_only",color:tt(te==null?void 0:te.color)??null})):[]}function ct(ee){return tt(ee==null?void 0:ee.color)??rt.value}const rt=D(()=>Y.value[0]??"#2563EB");function Ke(ee,te){p.value=p.value.map(ke=>ke.id===ee?{...ke,color:te}:ke)}function pt(ee,te){const ke=tt(te);Ke(ee,ke??rt.value)}function Rt(ee,te){const ke=tt(te);Ke(ee,ke??rt.value),nt()}function je(ee){if(!Number.isFinite(ee))return 8;const te=Math.max(0,Math.min(24,ee));return Math.round(te*100)/100}function at(ee){if(!Number.isFinite(ee))return null;const te=Math.max(0,Math.min(1e3,Number(ee)));return Math.round(te*100)/100}function ft(ee){return Number.isFinite(ee)?Math.max(1,Math.min(6,Math.round(ee))):3}function bt(ee){return JSON.parse(JSON.stringify(ee))}async function Gt(){if(I.value=!0,w.value="",!(typeof window<"u"&&typeof window.OC<"u")){I.value=!1,O.value=[];return}try{const te=await cc();O.value=te,w.value=""}catch{w.value="Unable to load Deck boards. Open Deck to create one.",O.value=[]}finally{I.value=!1}}function Ba(ee){S.value={...S.value,enabled:ee}}function xa(ee){return!(S.value.hiddenBoards||[]).includes(ee)}function fa(ee,te){const ke=new Set(S.value.hiddenBoards||[]);te?ke.delete(ee):ke.add(ee),S.value={...S.value,hiddenBoards:Array.from(ke).sort((st,We)=>st-We)}}function Et(ee,te){p.value=p.value.map(ke=>ke.id===ee?{...ke,paceMode:te}:ke)}function Xe(ee){if(oe.value)return;const te=Number(ee.value);if(!Number.isFinite(te)){y.value=null;return}y.value=at(te)}function Re(ee){const te=Number(ee.value);f.value=je(Number.isFinite(te)?te:f.value)}function ga(ee){const te=Number(ee.value);Number.isFinite(te)&&(x.value=ft(te))}function tr(ee){M.value={...M.value,enabled:ee}}function ar(ee){M.value={...M.value,schedule:ee}}function Ca(ee){M.value={...M.value,interim:ee}}function Jt(ee){M.value={...M.value,...ee}}function or(ee){T.value={...T.value,showDayOffTrend:ee}}const an=D(()=>r.value>0),on=D(()=>r.value<ce.value.length-1),rr=D(()=>{if(V.value==="strategy")return!n.value;if(V.value==="calendars")return d.value.length===0;if(V.value==="categories"&&oe.value){if(!d.value.length||!p.value.length)return!0;const ee=new Set(p.value.map(te=>te.id));if(d.value.some(te=>!ee.has(m.value[te]||"")))return!0}return!!(V.value==="preferences"&&(!oe.value&&(y.value===null||y.value<0)||f.value<0||f.value>24)||V.value==="review"&&l.value&&c.value.trim()==="")});function _s(){on.value&&!rr.value&&r.value++}function xs(){an.value&&r.value--}function Cs(){a("skip")}function Ss(){fe.value&&a("close")}function qa(){const ee=es(n.value,t.calendars,d.value,oe.value?{categories:p.value.map(We=>({...We})),assignments:{...m.value}}:void 0),te=ee.targetsConfig;if(te.allDayHours=je(f.value),te.balance||(te.balance={basis:"events",trend:{lookbackWeeks:x.value}}),te.balance.trend||(te.balance.trend={lookbackWeeks:x.value}),te.balance.trend.lookbackWeeks=ft(x.value),oe.value){const We=at(R.value);We!=null&&(te.totalHours=We)}else if(y.value!=null){const We=at(y.value);We!=null&&(te.totalHours=We)}const ke={...ee.targetsWeek};Object.entries(h.value).forEach(([We,Yt])=>{d.value.includes(We)&&(ke[We]=Ro(Yt))});const st=Object.fromEntries(Object.entries(ke).map(([We,Yt])=>[We,ka(Yt)]));Object.keys(ke).length&&(te.ui.showCalendarCharts=!0),a("complete",{strategy:n.value,selected:[...d.value],targetsConfig:te,groups:ee.groups,targetsWeek:ke,targetsMonth:st,themePreference:u.value,deckSettings:bt(S.value),reportingConfig:{...M.value},activityCard:{...T.value},dashboardMode:s.value,saveProfile:l.value,profileName:l.value?c.value.trim():""})}function mo(){const ee=es(n.value,t.calendars,d.value,oe.value?{categories:p.value.map(We=>({...We})),assignments:{...m.value}}:void 0),te=ee.targetsConfig;if(te.allDayHours=je(f.value),te.balance||(te.balance={basis:"events",trend:{lookbackWeeks:x.value}}),te.balance.trend||(te.balance.trend={lookbackWeeks:x.value}),te.balance.trend.lookbackWeeks=ft(x.value),oe.value){const We=at(R.value);We!=null&&(te.totalHours=We)}else if(y.value!=null){const We=at(y.value);We!=null&&(te.totalHours=We)}const ke={...ee.targetsWeek};Object.entries(h.value).forEach(([We,Yt])=>{d.value.includes(We)&&(ke[We]=Ro(Yt))});const st=Object.fromEntries(Object.entries(ke).map(([We,Yt])=>[We,ka(Yt)]));return Object.keys(ke).length&&(te.ui.showCalendarCharts=!0),{targetsConfig:te,groups:ee.groups,targetsWeek:ke,targetsMonth:st,selected:[...d.value]}}function vo(){return{completed:!1,version:t.onboardingVersion,strategy:n.value,completed_at:"",dashboardMode:s.value}}function $s(ee){const te=mo(),ke=vo();return ee==="intro"?{onboarding:ke}:ee==="strategy"?{onboarding:ke,targets_config:te.targetsConfig,groups:te.groups,targets_week:te.targetsWeek,targets_month:te.targetsMonth}:ee==="dashboard"?{onboarding:ke,dashboardMode:s.value}:ee==="calendars"?{cals:te.selected}:ee==="categories"?{targets_config:te.targetsConfig,groups:te.groups,targets_week:te.targetsWeek,targets_month:te.targetsMonth}:ee==="preferences"?{targets_config:te.targetsConfig,theme_preference:u.value,deck_settings:bt(S.value),reporting_config:{...M.value},targets_config_activity:{...T.value}}:{cals:te.selected,targets_config:te.targetsConfig,groups:te.groups,targets_week:te.targetsWeek,targets_month:te.targetsMonth,theme_preference:u.value,deck_settings:bt(S.value),reporting_config:{...M.value},targets_config_activity:{...T.value},onboarding:ke}}function nr(ee,te){if(te.checked){d.value.includes(ee)||(d.value=[...d.value,ee]);return}d.value=d.value.filter(ke=>ke!==ee)}function Ts(ee,te){const ke=Number(te);if(!Number.isFinite(ke)){const st={...h.value};delete st[ee],h.value=st;return}h.value={...h.value,[ee]:Ro(ke)}}function Ms(ee){return Number.isFinite(h.value[ee])?h.value[ee]:""}return{stepOrder:o,stepIndex:r,selectedStrategy:n,dashboardMode:s,profileMode:i,saveProfile:l,profileName:c,localSelection:d,categories:p,assignments:m,calendarTargets:h,themePreference:u,allDayHoursInput:f,totalHoursInput:y,trendLookbackInput:x,deckSettingsDraft:S,reportingDraft:M,activityDraft:T,deckBoards:O,deckBoardsLoading:I,deckBoardsError:w,dashboardPresets:E,deckVisibleBoards:W,deckReviewSummary:Z,reportingSummary:F,openColorId:C,previewTheme:v,systemThemeLabel:b,categoryTotalHours:R,categoryColorPalette:Y,categoryPresets:P,strategies:ne,categoriesEnabled:oe,calendarTargetsEnabled:se,isClosable:fe,enabledSteps:ce,currentStep:V,stepNumber:J,totalSteps:A,saving:B,snapshotSaving:q,snapshotNotice:re,selectedCalendars:ge,draft:de,strategyTitle:ue,setProfileMode:N,setSaveProfile:U,setProfileName:G,applyStartStep:me,goToStep:ve,stepLabel:we,addCategory:Se,removeCategory:xe,setCategoryLabel:Te,applyCategoryPreset:Me,setCategoryTarget:Be,toggleCategoryWeekend:Pe,assignCalendar:ze,setCalendarTarget:Ts,getCalendarTarget:Ms,toggleColorPopover:vt,closeColorPopover:nt,resolvedColor:ct,applyColor:Rt,onColorInput:pt,setDeckEnabled:Ba,isDeckBoardVisible:xa,toggleDeckBoard:fa,setCategoryPaceMode:Et,onTotalHoursChange:Xe,onAllDayHoursChange:Re,onTrendLookbackChange:ga,setReportingEnabled:tr,setReportingSchedule:ar,setReportingInterim:Ca,updateReporting:Jt,setActivityDayOff:or,canGoBack:an,canGoNext:on,nextDisabled:rr,nextStep:_s,prevStep:xs,handleSkip:Cs,handleClose:Ss,emitComplete:qa,toggleCalendar:nr,resetWizard:z,buildStepPayload:$s}}const rm={key:0,class:"onboarding-overlay",role:"dialog","aria-modal":"true"},nm={class:"onboarding-header"},sm={class:"onboarding-title"},lm={class:"subtitle"},im={class:"onboarding-actions"},cm=["disabled"],dm=["disabled"],um={class:"onboarding-step-nav","aria-label":"Onboarding steps"},fm=["disabled","onClick"],gm={class:"onboarding-body"},pm={key:0,class:"onboarding-step"},hm={key:1,class:"onboarding-step"},mm={key:2,class:"onboarding-step"},vm={key:3,class:"onboarding-step"},bm={key:4,class:"onboarding-step"},ym={key:5,class:"onboarding-step"},wm={key:6,class:"onboarding-step"},km={class:"onboarding-footer"},_m=Ie({__name:"OnboardingWizard",props:{visible:{type:Boolean},calendars:{},initialSelection:{},initialStrategy:{},startStep:{},onboardingVersion:{},saving:{type:Boolean},closable:{type:Boolean},initialThemePreference:{},systemTheme:{},initialAllDayHours:{},initialTotalHours:{},initialDeckSettings:{},initialReportingConfig:{},hasExistingConfig:{type:Boolean},initialCategories:{},initialAssignments:{},snapshotSaving:{type:Boolean},snapshotNotice:{},initialDashboardMode:{},initialTargetsWeek:{},initialTargetsConfig:{}},emits:["close","skip","complete","save-step","save-current-config"],setup(e,{emit:t}){const a=e,o=t,{stepNumber:r,totalSteps:n,enabledSteps:s,currentStep:i,isClosable:l,saving:c,stepLabel:d,goToStep:p,handleClose:m,handleSkip:h,canGoBack:u,canGoNext:f,nextDisabled:y,prevStep:x,nextStep:S,emitComplete:M,profileMode:T,saveProfile:O,profileName:I,themePreference:w,systemThemeLabel:E,previewTheme:P,totalHoursInput:W,categoryTotalHours:Z,categoriesEnabled:F,calendarTargetsEnabled:C,onTotalHoursChange:v,allDayHoursInput:b,onAllDayHoursChange:j,trendLookbackInput:R,onTrendLookbackChange:Y,deckSettingsDraft:ne,setDeckEnabled:X,deckBoards:oe,deckBoardsLoading:se,deckBoardsError:fe,isDeckBoardVisible:ce,toggleDeckBoard:V,reportingDraft:J,setReportingEnabled:A,setReportingSchedule:B,setReportingInterim:q,updateReporting:re,activityDraft:be,setActivityDayOff:$,dashboardMode:z,dashboardPresets:N,strategies:U,selectedStrategy:G,localSelection:Q,toggleCalendar:pe,categories:ge,selectedCalendars:de,assignments:ue,calendarTargets:ye,addCategory:me,removeCategory:ve,setCategoryLabel:we,setCategoryTarget:Se,setCategoryPaceMode:xe,toggleCategoryWeekend:Te,assignCalendar:Me,setCalendarTarget:Be,getCalendarTarget:Pe,openColorId:ze,toggleColorPopover:vt,closeColorPopover:nt,categoryColorPalette:He,categoryPresets:tt,resolvedColor:oa,applyColor:ct,onColorInput:rt,draft:Ke,strategyTitle:pt,applyCategoryPreset:Rt,deckReviewSummary:je,deckVisibleBoards:at,reportingSummary:ft,setProfileMode:bt,setSaveProfile:Gt,setProfileName:Ba,buildStepPayload:xa}=om({props:a,emit:o});function fa(){o("save-step",xa(i.value))}return(Et,Xe)=>(k(),it(qn,{name:"onboarding-fade"},{default:Je(()=>[Et.visible?(k(),_("div",rm,[g("div",{class:"onboarding-backdrop",onClick:Xe[0]||(Xe[0]=(...Re)=>L(m)&&L(m)(...Re))}),g("div",{class:Ne(["onboarding-panel",`theme-${L(P)}`]),onClick:Xe[3]||(Xe[3]=dt(()=>{},["stop"]))},[g("header",nm,[g("div",sm,[Xe[4]||(Xe[4]=g("h2",null,"Welcome to Opsdash",-1)),g("p",lm,"Step "+H(L(r))+" of "+H(L(n)),1)]),g("div",im,[g("button",{type:"button",class:"skip-link",onClick:Xe[1]||(Xe[1]=(...Re)=>L(h)&&L(h)(...Re)),disabled:L(c)},"Maybe later",8,cm),L(l)?(k(),_("button",{key:0,type:"button",class:"close-btn",disabled:L(c),onClick:Xe[2]||(Xe[2]=(...Re)=>L(m)&&L(m)(...Re)),"aria-label":"Close onboarding"},"  ",8,dm)):ae("",!0)])]),g("nav",um,[(k(!0),_(he,null,$e(L(s),Re=>(k(),_("button",{key:Re,type:"button",class:Ne(["step-pill",{active:Re===L(i)}]),disabled:L(c),onClick:ga=>L(p)(Re)},H(L(d)(Re)),11,fm))),128))]),g("main",gm,[L(i)==="intro"?(k(),_("section",pm,[Ae(Cg,{"has-existing-config":a.hasExistingConfig??!1,"snapshot-saving":a.snapshotSaving??!1,saving:L(c),"snapshot-notice":a.snapshotNotice??null,"profile-mode":L(T),"set-profile-mode":L(bt),"on-save-current-config":()=>o("save-current-config")},null,8,["has-existing-config","snapshot-saving","saving","snapshot-notice","profile-mode","set-profile-mode","on-save-current-config"])])):L(i)==="preferences"?(k(),_("section",hm,[Ae(pp,{"theme-preference":L(w),"system-theme-label":L(E),"preview-theme":L(P),"set-theme-preference":Re=>w.value=Re,"total-hours-input":L(W),"category-total-hours":L(Z),"categories-enabled":L(F),"on-total-hours-change":L(v),"all-day-hours-input":L(b),"on-all-day-hours-change":L(j),"trend-lookback-input":L(R),"on-trend-lookback-change":L(Y),"deck-settings-draft":L(ne),"set-deck-enabled":L(X),"deck-boards":L(oe),"deck-boards-loading":L(se),"deck-boards-error":L(fe),"is-deck-board-visible":L(ce),"toggle-deck-board":L(V),"reporting-draft":L(J),"set-reporting-enabled":L(A),"set-reporting-schedule":L(B),"set-reporting-interim":L(q),"update-reporting":L(re),"activity-draft":L(be),"set-activity-day-off":L($)},null,8,["theme-preference","system-theme-label","preview-theme","set-theme-preference","total-hours-input","category-total-hours","categories-enabled","on-total-hours-change","all-day-hours-input","on-all-day-hours-change","trend-lookback-input","on-trend-lookback-change","deck-settings-draft","set-deck-enabled","deck-boards","deck-boards-loading","deck-boards-error","is-deck-board-visible","toggle-deck-board","reporting-draft","set-reporting-enabled","set-reporting-schedule","set-reporting-interim","update-reporting","activity-draft","set-activity-day-off"])])):L(i)==="dashboard"?(k(),_("section",mm,[Ae(bp,{"dashboard-mode":L(z),"set-dashboard-mode":Re=>z.value=Re,"dashboard-presets":L(N)},null,8,["dashboard-mode","set-dashboard-mode","dashboard-presets"])])):L(i)==="strategy"?(k(),_("section",vm,[Ae(_p,{strategies:L(U),"selected-strategy":L(G),"set-selected-strategy":Re=>G.value=Re},null,8,["strategies","selected-strategy","set-selected-strategy"])])):L(i)==="calendars"?(k(),_("section",bm,[Ae(Ep,{calendars:Et.calendars,"local-selection":L(Q),"toggle-calendar":L(pe),"calendar-targets":L(ye),"get-calendar-target":L(Pe),"set-calendar-target":L(Be),"show-calendar-targets":L(C)},null,8,["calendars","local-selection","toggle-calendar","calendar-targets","get-calendar-target","set-calendar-target","show-calendar-targets"])])):L(i)==="categories"?(k(),_("section",ym,[Ae(bh,{"categories-enabled":L(F),categories:L(ge),"category-total-hours":L(Z),"selected-calendars":L(de),assignments:L(ue),"show-calendar-targets":L(C),"calendar-targets":L(ye),"get-calendar-target":L(Pe),"set-calendar-target":L(Be),"add-category":L(me),"remove-category":L(ve),"set-category-label":L(we),"category-presets":L(tt),"apply-category-preset":L(Rt),"set-category-target":L(Se),"set-category-pace-mode":L(xe),"toggle-category-weekend":L(Te),"assign-calendar":L(Me),"open-color-id":L(ze),"toggle-color-popover":L(vt),"close-color-popover":L(nt),"category-color-palette":L(He),"resolved-color":L(oa),"apply-color":L(ct),"on-color-input":L(rt)},null,8,["categories-enabled","categories","category-total-hours","selected-calendars","assignments","show-calendar-targets","calendar-targets","get-calendar-target","set-calendar-target","add-category","remove-category","set-category-label","category-presets","apply-category-preset","set-category-target","set-category-pace-mode","toggle-category-weekend","assign-calendar","open-color-id","toggle-color-popover","close-color-popover","category-color-palette","resolved-color","apply-color","on-color-input"])])):L(i)==="review"?(k(),_("section",wm,[Ae(Ah,{"strategy-title":L(pt),"categories-enabled":L(F),"selected-calendars":L(de),"draft-targets-categories":L(Ke).targetsConfig.categories,"draft-total-hours":L(Ke).targetsConfig.totalHours,"total-hours-input":L(W),"category-total-hours":L(Z),"deck-review-summary":L(je),"deck-enabled":L(ne).enabled,"deck-visible-boards":L(at),"reporting-enabled":L(J).enabled,"reporting-summary":L(ft),"show-day-off-trend":L(be).showDayOffTrend,"theme-preference":L(w),"dashboard-mode":L(z),"save-profile":L(O),"profile-name":L(I),"show-save-profile":a.hasExistingConfig??!1,"set-save-profile":L(Gt),"set-profile-name":L(Ba)},null,8,["strategy-title","categories-enabled","selected-calendars","draft-targets-categories","draft-total-hours","total-hours-input","category-total-hours","deck-review-summary","deck-enabled","deck-visible-boards","reporting-enabled","reporting-summary","show-day-off-trend","theme-preference","dashboard-mode","save-profile","profile-name","show-save-profile","set-save-profile","set-profile-name"])])):ae("",!0)]),g("footer",km,[L(u)?(k(),it(L(mt),{key:0,type:"tertiary",disabled:L(c),onClick:L(x)},{default:Je(()=>[...Xe[5]||(Xe[5]=[Fe("Back",-1)])]),_:1},8,["disabled","onClick"])):ae("",!0),Ae(L(mt),{type:"tertiary",disabled:L(c)||L(y),onClick:fa},{default:Je(()=>[...Xe[6]||(Xe[6]=[Fe("Save step",-1)])]),_:1},8,["disabled"]),L(f)?(k(),it(L(mt),{key:1,type:"primary",disabled:L(y)||L(c),onClick:L(S)},{default:Je(()=>[...Xe[7]||(Xe[7]=[Fe("Continue",-1)])]),_:1},8,["disabled","onClick"])):(k(),it(L(mt),{key:2,type:"primary",disabled:L(c)||L(y),onClick:L(M)},{default:Je(()=>[...Xe[8]||(Xe[8]=[Fe(" Start dashboard ",-1)])]),_:1},8,["disabled","onClick"]))])],2)])):ae("",!0)]),_:1}))}}),xm=["id","role","aria-labelledby"],Cm={key:0,class:"sb-title"},Sm={key:1,class:"sb-description"},$m={class:"setup-actions"},Tm={class:"preset-form"},Mm=["disabled"],Am={key:0,class:"preset-error"},Dm={key:2,class:"preset-warnings"},Em={class:"preset-header"},Lm={key:3,class:"preset-empty"},Nm={key:4,class:"preset-list"},Im={class:"preset-meta"},Bm={class:"preset-name"},Om={class:"preset-info"},Pm={key:0},Fm={class:"preset-actions"},Hm=Ye(Ie({__name:"SidebarProfilesPane",props:{presets:{},isLoading:{type:Boolean},isSaving:{type:Boolean},isApplying:{type:Boolean},warnings:{},showHeader:{type:Boolean},asPanel:{type:Boolean}},emits:["save","load","delete","refresh","clear-warnings","export-config","import-config"],setup(e,{emit:t}){const a=e,o=t,r=le(""),n=le(null),s=le(null),i=D(()=>a.showHeader!==!1),l=D(()=>a.asPanel===!1?void 0:"opsdash-sidebar-pane-profiles"),c=D(()=>a.asPanel===!1?void 0:"tabpanel"),d=D(()=>a.asPanel===!1?void 0:"opsdash-sidebar-tab-profiles");function p(){const x=r.value.trim();if(!x){n.value="Enter a profile name";return}n.value=null,o("save",x),r.value=""}function m(x){o("load",x)}function h(x){window.confirm(`Delete profile "${x}"?`)&&o("delete",x)}function u(){var x;(x=s.value)==null||x.click()}function f(x){var T;const S=x.target,M=(T=S==null?void 0:S.files)==null?void 0:T[0];M&&o("import-config",M),S&&(S.value="")}function y(x){if(!x)return"";const S=new Date(x);if(Number.isNaN(S.getTime()))return x;const T=new Date().getTime()-S.getTime(),O=Math.round(T/6e4);if(O<1)return"just now";if(O<60)return`${O} min ago`;const I=Math.round(O/60);if(I<24)return`${I}h ago`;const w=Math.round(I/24);if(w<7)return`${w}d ago`;const E=Math.round(w/7);return E<5?`${E}w ago`:S.toLocaleDateString()}return(x,S)=>(k(),_("div",{id:l.value,class:"sb-pane",role:c.value,"aria-labelledby":d.value},[i.value?(k(),_("div",Cm,"Profiles")):ae("",!0),i.value?(k(),_("p",Sm," Export/import full configs or save/load named profiles (calendars, groups, targets, widgets, settings). ")):ae("",!0),g("div",$m,[Ae(L(mt),{type:"tertiary",size:"small",onClick:S[0]||(S[0]=M=>o("export-config"))},{default:Je(()=>[...S[4]||(S[4]=[Fe(" Export configuration ",-1)])]),_:1}),Ae(L(mt),{type:"tertiary",size:"small",onClick:u},{default:Je(()=>[...S[5]||(S[5]=[Fe(" Import configuration ",-1)])]),_:1}),g("input",{ref_key:"fileInput",ref:s,type:"file",accept:"application/json",class:"import-input",onChange:f},null,544)]),g("div",Tm,[S[6]||(S[6]=g("label",{class:"preset-label",for:"preset-name"},"Profile name",-1)),oo(g("input",{id:"preset-name","onUpdate:modelValue":S[1]||(S[1]=M=>r.value=M),type:"text",placeholder:"e.g. Focus week",disabled:x.isSaving,onKeyup:io(p,["enter"])},null,40,Mm),[[Ji,r.value]]),n.value?(k(),_("div",Am,H(n.value),1)):ae("",!0),Ae(L(mt),{class:"preset-save",type:"primary",disabled:x.isSaving||!r.value.trim(),onClick:p},{default:Je(()=>[Fe(H(x.isSaving?"Saving":"Save current configuration"),1)]),_:1},8,["disabled"])]),x.warnings.length?(k(),_("div",Dm,[S[8]||(S[8]=g("div",{class:"warnings-title"},"Warnings",-1)),g("ul",null,[(k(!0),_(he,null,$e(x.warnings,(M,T)=>(k(),_("li",{key:T},H(M),1))),128))]),Ae(L(mt),{type:"tertiary",class:"preset-clear",onClick:S[2]||(S[2]=M=>o("clear-warnings"))},{default:Je(()=>[...S[7]||(S[7]=[Fe(" Clear warnings ",-1)])]),_:1})])):ae("",!0),g("div",Em,[S[9]||(S[9]=g("h3",null,"Saved profiles",-1)),Ae(L(mt),{type:"tertiary",disabled:x.isLoading,onClick:S[3]||(S[3]=M=>o("refresh"))},{default:Je(()=>[Fe(H(x.isLoading?"Refreshing":"Refresh list"),1)]),_:1},8,["disabled"])]),!x.presets.length&&!x.isLoading?(k(),_("div",Lm," No profiles yet. Save one above to get started. ")):(k(),_("ul",Nm,[(k(!0),_(he,null,$e(x.presets,M=>(k(),_("li",{key:M.name,class:"preset-item"},[g("div",Im,[g("div",Bm,H(M.name),1),g("div",Om,[g("span",null,H(M.selectedCount)+" calendars",1),g("span",null,H(M.calendarCount)+" groups",1),M.updatedAt?(k(),_("span",Pm,"Updated "+H(y(M.updatedAt)),1)):ae("",!0)])]),g("div",Fm,[Ae(L(mt),{type:"primary",disabled:x.isApplying,onClick:T=>m(M.name)},{default:Je(()=>[Fe(H(x.isApplying?"Applying":"Load"),1)]),_:2},1032,["disabled","onClick"]),Ae(L(mt),{type:"tertiary",disabled:x.isApplying,onClick:T=>h(M.name)},{default:Je(()=>[...S[10]||(S[10]=[Fe(" Delete ",-1)])]),_:2},1032,["disabled","onClick"])])]))),128))]))],8,xm))}}),[["__scopeId","data-v-191b3c25"]]),Wm={key:0,class:"onboarding-overlay profiles-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"profiles-overlay-title"},zm={class:"onboarding-header profiles-overlay__header"},Rm={class:"onboarding-actions"},jm={class:"onboarding-body profiles-overlay__body"},Um=Ye(Ie({__name:"ProfilesOverlay",props:{visible:{type:Boolean},theme:{},presets:{},isLoading:{type:Boolean},isSaving:{type:Boolean},isApplying:{type:Boolean},warnings:{}},emits:["close","save","load","delete","refresh","clear-warnings","export-config","import-config"],setup(e,{emit:t}){const a=t;return(o,r)=>(k(),it(qn,{name:"onboarding-fade"},{default:Je(()=>[o.visible?(k(),_("div",Wm,[g("div",{class:"onboarding-backdrop",onClick:r[0]||(r[0]=n=>a("close"))}),g("div",{class:Ne(["onboarding-panel",`theme-${o.theme}`]),onClick:r[9]||(r[9]=dt(()=>{},["stop"]))},[g("header",zm,[r[10]||(r[10]=g("div",{class:"onboarding-title"},[g("h2",{id:"profiles-overlay-title"},"Profiles"),g("p",{class:"subtitle"}," Export/import full configs or save/load named profiles (calendars, groups, targets, widgets, settings). ")],-1)),g("div",Rm,[g("button",{type:"button",class:"close-btn","aria-label":"Close profiles",onClick:r[1]||(r[1]=n=>a("close"))}," x ")])]),g("main",jm,[Ae(Hm,{presets:o.presets,"is-loading":o.isLoading,"is-saving":o.isSaving,"is-applying":o.isApplying,warnings:o.warnings,"show-header":!1,"as-panel":!1,onSave:r[2]||(r[2]=n=>a("save",n)),onLoad:r[3]||(r[3]=n=>a("load",n)),onDelete:r[4]||(r[4]=n=>a("delete",n)),onRefresh:r[5]||(r[5]=()=>a("refresh")),onClearWarnings:r[6]||(r[6]=()=>a("clear-warnings")),onExportConfig:r[7]||(r[7]=()=>a("export-config")),onImportConfig:r[8]||(r[8]=n=>a("import-config",n))},null,8,["presets","is-loading","is-saving","is-applying","warnings"])])],2)])):ae("",!0)]),_:1}))}}),[["__scopeId","data-v-753c1068"]]),Vm={key:0,class:"onboarding-overlay shortcuts-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"opsdash-shortcuts-title"},Km=["onKeydown"],qm={class:"onboarding-body shortcuts-body"},Gm={class:"shortcut-label"},Jm={key:0},Ym={class:"shortcut-combo","aria-hidden":"true"},Zm={class:"shortcuts-footer"},Xm=Ye(Ie({__name:"KeyboardShortcutsModal",props:{visible:{type:Boolean},groups:{},theme:{}},emits:["close"],setup(e,{emit:t}){const a=e,o=t,r=le(null),n=D(()=>a.theme==="dark"?"dark":"light");function s(){o("close")}return De(()=>a.visible,i=>{i&&ea(()=>{var l;(l=r.value)==null||l.focus()}).catch(()=>{})}),(i,l)=>(k(),it(qn,{name:"onboarding-fade"},{default:Je(()=>[i.visible?(k(),_("div",Vm,[g("div",{class:"onboarding-backdrop",onClick:s}),g("div",{ref_key:"panelRef",ref:r,class:Ne(["onboarding-panel shortcuts-panel",`theme-${n.value}`]),tabindex:"-1",onKeydown:io(dt(s,["prevent"]),["esc"])},[g("header",{class:"onboarding-header shortcuts-header"},[l[0]||(l[0]=g("div",{class:"onboarding-title shortcuts-title"},[g("h2",{id:"opsdash-shortcuts-title"},"Keyboard Shortcuts"),g("p",{class:"shortcuts-hint"},"Press Esc to close or ? to reopen.")],-1)),g("button",{type:"button",class:"close-btn shortcuts-close","aria-label":"Close shortcuts overlay",onClick:s},"  ")]),g("div",qm,[(k(!0),_(he,null,$e(i.groups,c=>(k(),_("section",{key:c.id,class:"shortcuts-group"},[g("h3",null,H(c.title),1),g("ul",null,[(k(!0),_(he,null,$e(c.items,d=>(k(),_("li",{key:d.id},[g("span",Gm,[Fe(H(d.label)+" ",1),d.description?(k(),_("small",Jm,H(d.description),1)):ae("",!0)]),g("span",Ym,[(k(!0),_(he,null,$e(d.combo,(p,m)=>(k(),_("kbd",{key:m},H(p),1))),128))])]))),128))])]))),128))]),g("footer",Zm,[Ae(L(mt),{type:"primary",size:"small",onClick:s},{default:Je(()=>[...l[1]||(l[1]=[Fe(" Close ",-1)])]),_:1})])],42,Km)])):ae("",!0)]),_:1}))}}),[["__scopeId","data-v-5510efeb"]]),hS="modulepreload",mS=function(e){return"/"+e},vS={},Ot=function(t,a,o){let r=Promise.resolve();function n(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return r.then(s=>{for(const i of s||[])i.status==="rejected"&&n(i.reason);return t().catch(n)})};function Qm(e,t){const a=JSON.parse(JSON.stringify(e||{}));return t==="month"&&(a.totalHours=ka(a.totalHours??0),a.categories=(a.categories||[]).map(o=>({...o,targetHours:ka(o.targetHours??0)}))),a}function ev(e){return{...e,ui:{...(e==null?void 0:e.ui)??{}}}}function tv(e,t){try{return ac({config:e,stats:t.stats,byDay:t.byDay||[],byCal:t.byCal||[],groupsById:t.groupsById||{},range:t.rangeMode==="month"?"month":"week",from:t.from||"",to:t.to||""})}catch(a){return console.error("[opsdash] targets widget local summary failed",a),tc(e)}}function Pt(e,t){if(!t)return e;const a=String(t).trim();return a?`${a}  ${e}`:e}function Vo(e,t){if(t!=null&&t!==""){const o=Number(t);if(Number.isFinite(o))return o}const a=Number(e);return Number.isFinite(a)?a:void 0}function ns(e){return Array.isArray(e)?Array.from(new Set(e.map(t=>Number(t)).filter(t=>Number.isInteger(t)&&t>0))):typeof e=="string"?ns(e.split(",")):[]}function pc(e){return Array.isArray(e)?e.map(t=>String(t).trim()).filter(Boolean):typeof e=="string"?e.split(",").map(t=>t.trim()).filter(Boolean):["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"]}function Ft(e){switch(e){case"all":return"All cards";case"mine":return"Mine (any status)";case"open_all":return"Open  All";case"open_mine":return"Open  Mine";case"done_all":return"Done  All";case"done_mine":return"Done  Mine";case"archived_all":return"Archived  All";case"archived_mine":return"Archived  Mine";case"due_all":return"Due  All";case"due_mine":return"Due  Mine";case"due_today_all":return"Due today  All";case"due_today_mine":return"Due today  Mine";case"created_today_all":return"Created today  All";case"created_today_mine":return"Created today  Mine";case"created_range_all":return"Created this range  All";case"created_range_mine":return"Created this range  Mine";default:return e}}const av=Nt(()=>Ot(()=>Promise.resolve().then(()=>Y0),void 0).then(e=>e.default)),hc="Balance Index",ov={component:av,defaultLayout:{width:"half",height:"s",order:32},label:"Balance Index",baseTitle:hc,configurable:!0,supportsColors:!0,defaultOptions:(()=>{const e=co();return{showTrend:!0,showMessages:!0,showConfig:!0,indexBasis:e.index.basis,noticeAbove:e.thresholds.noticeAbove,noticeBelow:e.thresholds.noticeBelow,warnAbove:e.thresholds.warnAbove,warnBelow:e.thresholds.warnBelow,warnIndex:e.thresholds.warnIndex,lookbackWeeks:e.trend.lookbackWeeks,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1}})(),controls:[{key:"showConfig",label:"Show config summary",type:"toggle"},{key:"showTrend",label:"Show trend",type:"toggle"},{key:"showMessages",label:"Show messages",type:"toggle"},{key:"lookbackWeeks",label:"Trend lookback (weeks)",type:"number",min:1,max:6,step:1},{key:"messageDensity",label:"Messages shown",type:"select",options:[{value:"few",label:"Few"},{value:"normal",label:"Normal"},{value:"many",label:"Many"}]},{key:"indexBasis",label:"Index basis",type:"select",options:[{value:"off",label:"Disabled"},{value:"category",label:"Total categories"},{value:"calendar",label:"Total calendars"},{value:"both",label:"Categories + calendars"}]},{key:"noticeAbove",label:"Notice above target",type:"number",min:0,max:1,step:.01},{key:"noticeBelow",label:"Notice below target",type:"number",min:0,max:1,step:.01},{key:"warnAbove",label:"Warn above target",type:"number",min:0,max:1,step:.01},{key:"warnBelow",label:"Warn below target",type:"number",min:0,max:1,step:.01},{key:"warnIndex",label:"Warn index",type:"number",min:0,max:1,step:.01},{key:"trendColor",label:"Trend color",type:"color"},{key:"showCurrent",label:"Show current period",type:"toggle"},{key:"reverseTrend",label:"Oldest first (reverse)",type:"toggle"},{key:"labelMode",label:"Trend label",type:"select",options:[{value:"date",label:"Date range"},{value:"period",label:"Week/Month"},{value:"offset",label:"Offset only"}]}],buildProps:(e,t)=>{var f,y,x,S,M,T,O,I,w,E,P,W,Z,F,C,v,b,j,R,Y,ne,X,oe,se,fe,ce,V,J,A,B,q,re,be,$,z;const a=t.balanceConfig?JSON.parse(JSON.stringify(t.balanceConfig)):co(),o=co(),r=((f=e.options)==null?void 0:f.showBadge)!==!1,n=((y=e.options)==null?void 0:y.showTrend)!==!1,s=((x=e.options)==null?void 0:x.showMessages)??((S=a.ui)==null?void 0:S.showMessages)??!0,i=((M=e.options)==null?void 0:M.messageDensity)||"normal",l=i==="few"?1:i==="many"?1/0:3,c=Number.isFinite((T=e.options)==null?void 0:T.lookbackWeeks)?Number((O=e.options)==null?void 0:O.lookbackWeeks):Number.isFinite(t.lookbackWeeks)?Number(t.lookbackWeeks):((I=o.trend)==null?void 0:I.lookbackWeeks)??3,d={noticeAbove:Vo((w=a==null?void 0:a.thresholds)==null?void 0:w.noticeAbove,(E=e.options)==null?void 0:E.noticeAbove),noticeBelow:Vo((P=a==null?void 0:a.thresholds)==null?void 0:P.noticeBelow,(W=e.options)==null?void 0:W.noticeBelow),warnAbove:Vo((Z=a==null?void 0:a.thresholds)==null?void 0:Z.warnAbove,(F=e.options)==null?void 0:F.warnAbove),warnBelow:Vo((C=a==null?void 0:a.thresholds)==null?void 0:C.warnBelow,(v=e.options)==null?void 0:v.warnBelow),warnIndex:Vo((b=a==null?void 0:a.thresholds)==null?void 0:b.warnIndex,(j=e.options)==null?void 0:j.warnIndex)},p=((R=e.options)==null?void 0:R.indexBasis)||((Y=a==null?void 0:a.index)==null?void 0:Y.basis)||"category",m=typeof((ne=e.options)==null?void 0:ne.trendColor)=="string"&&((X=e.options)!=null&&X.trendColor.trim())?e.options.trendColor.trim():"#2563EB",h=Number.isFinite((oe=e.options)==null?void 0:oe.loopbackCount)?Number((se=e.options)==null?void 0:se.loopbackCount):void 0,u=Number.isFinite(h)?Number(h):Number.isFinite(c)?Number(c):((fe=o.trend)==null?void 0:fe.lookbackWeeks)??4;return{overview:t.balanceOverview,targetsCategories:((ce=t.targetsConfig)==null?void 0:ce.categories)||[],rangeLabel:t.rangeLabel,showBadge:r,showTrend:n,showMessages:s,showHeader:((V=e.options)==null?void 0:V.showHeader)!==!1,showConfig:((J=e.options)==null?void 0:J.showConfig)!==!1,messageLimit:l,lookbackWeeks:u,loopbackCount:u,showCurrent:((A=e.options)==null?void 0:A.showCurrent)!==!1,labelMode:((B=e.options)==null?void 0:B.labelMode)||"period",reverseTrend:((q=e.options)==null?void 0:q.reverseTrend)===!0,indexBasis:p,thresholds:d,title:Pt(hc,(re=e.options)==null?void 0:re.titlePrefix),cardBg:(($=(be=e.options)==null?void 0:be.colors)==null?void 0:$.background)??((z=e.options)==null?void 0:z.cardBg),trendColor:m,from:t.from,to:t.to,rangeMode:t.rangeMode}}},rv=Nt(()=>Ot(()=>Promise.resolve().then(()=>lw),void 0).then(e=>e.default)),mc="Category Mix Trend",nv={component:rv,defaultLayout:{width:"half",height:"m",order:47},label:"Category Mix Trend",baseTitle:mc,defaultOptions:{lookbackWeeks:3,density:"normal",labelMode:"period",colorMode:"hybrid",squareCells:!1,showHeader:!0,showBadge:!0},configurable:!0,controls:[{key:"lookbackWeeks",label:"Lookback (weeks)",type:"number",min:1,max:4,step:1},{key:"density",label:"Density",type:"select",options:[{value:"normal",label:"Normal"},{value:"dense",label:"Dense"}]},{key:"squareCells",label:"Square cells",type:"toggle"},{key:"labelMode",label:"History label",type:"select",options:[{value:"period",label:"Week/Month"},{value:"date",label:"Date range"},{value:"compact",label:"Compact (W-4)"},{value:"offset",label:"Offset only"},{value:"label",label:"Use server label"}]},{key:"colorMode",label:"Color mode",type:"select",options:[{value:"hybrid",label:"Hybrid (share + trend)"},{value:"share",label:"Share heatmap"},{value:"trend",label:"Trend only"}]},{key:"shareLowColor",label:"Share low",type:"color"},{key:"shareHighColor",label:"Share high",type:"color"},{key:"showBadge",label:"Show badge",type:"toggle"},{key:"toneLowColor",label:"Low color",type:"color"},{key:"toneHighColor",label:"High color",type:"color"}],buildProps:(e,t)=>{var a,o,r,n,s,i,l,c,d,p,m,h,u;return{overview:t.balanceOverview,rangeMode:t.rangeMode,rangeLabel:t.rangeLabel,from:t.from,to:t.to,lookbackWeeks:((a=e.options)==null?void 0:a.lookbackWeeks)??t.lookbackWeeks??3,showBadge:((o=e.options)==null?void 0:o.showBadge)??!0,showHeader:((r=e.options)==null?void 0:r.showHeader)!==!1,density:(n=e.options)==null?void 0:n.density,labelMode:(s=e.options)==null?void 0:s.labelMode,squareCells:((i=e.options)==null?void 0:i.squareCells)===!0,colorMode:(l=e.options)==null?void 0:l.colorMode,title:Pt(mc,(c=e.options)==null?void 0:c.titlePrefix),cardBg:(d=e.options)==null?void 0:d.cardBg,toneLowColor:(p=e.options)==null?void 0:p.toneLowColor,toneHighColor:(m=e.options)==null?void 0:m.toneHighColor,shareLowColor:(h=e.options)==null?void 0:h.shareLowColor,shareHighColor:(u=e.options)==null?void 0:u.shareHighColor}}},vc=["#2563eb","#f97316","#10b981","#a855f7","#ec4899","#14b8a6"];function ss(e){return vc[e%vc.length]||"#60a5fa"}function Gr(e){return e.slice().sort((t,a)=>{const o=Number((t==null?void 0:t.offset)??0),r=Number((a==null?void 0:a.offset)??0);return o-r})}function Jr(e,t){const a=String(t||"").toLowerCase()==="month"?"Month":"Week",o=Number((e==null?void 0:e.offset)??0),r=o===0?`Current ${a.toLowerCase()}`:`${a} -${o}`,n=String((e==null?void 0:e.from)??"").trim(),s=String((e==null?void 0:e.to)??"").trim();return n&&s?`${r} (${n} to ${s})`:n?`${r} (${n})`:r}function aa(e){return Array.isArray(e)?e.map(t=>String(t??"").trim()).filter(Boolean):typeof e=="string"?e.split(",").map(t=>t.trim()).filter(Boolean):[]}function sv(e,t){if(!e||!Array.isArray(e.data))return null;if(!t.size)return e;const a=e.ids||[],o=e.labels||[],r=e.data||[],n=e.colors||[],s=a.map((i,l)=>t.has(String(i))?l:-1).filter(i=>i>=0);return s.length?{ids:s.map(i=>String(a[i]??"")),labels:s.map(i=>String(o[i]??"")),data:s.map(i=>Number(r[i]??0)),colors:s.map(i=>n[i])}:null}function Ko(e,t){if(!e||!Array.isArray(e.series))return null;if(!t.size)return e;const a=e.series.filter(o=>t.has(String((o==null?void 0:o.id)??"")));return a.length?{labels:e.labels||[],series:a}:null}function qo(e,t,a,o){if(!e||!Array.isArray(e.series))return null;const r=e.labels||[],n=new Map;if(e.series.forEach(i=>{const l=String((i==null?void 0:i.id)??""),c=String((t==null?void 0:t[l])??"");if(!c||a.size&&!a.has(c))return;n.has(c)||n.set(c,Array.from({length:r.length},()=>0));const d=n.get(c),p=Array.isArray(i==null?void 0:i.data)?i.data:[];d&&r.forEach((m,h)=>{d[h]+=Math.max(0,Number(p[h]??0))})}),!n.size)return null;const s=Array.from(n.entries()).map(([i,l])=>({id:i,name:i,label:i,color:o==null?void 0:o[i],data:l}));return{labels:r,series:s}}function Yr(e){if(!e||!Array.isArray(e.series))return null;const t=e.labels||[],a=t.map((o,r)=>e.series.reduce((n,s)=>{var i;return n+Math.max(0,Number(((i=s==null?void 0:s.data)==null?void 0:i[r])??0))},0));return{labels:t,data:a}}function bc(e){if(!e)return null;const t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],a=new Map;return t.forEach(o=>a.set(o,0)),e.labels.forEach((o,r)=>{const n=iv(o);n&&a.set(n,(a.get(n)||0)+Math.max(0,Number(e.data[r]??0)))}),{labels:t,data:t.map(o=>a.get(o)||0)}}function lv(e,t,a){if(!Array.isArray(e)||!e.length)return null;const o=e.filter(r=>!r||!r.id?!1:t.size?t.has(String(r.id)):!0);return o.length?{ids:o.map(r=>String(r.id)),labels:o.map(r=>String(r.label??r.id)),data:o.map(r=>{var n;return Math.max(0,Number(((n=r.summary)==null?void 0:n.actualHours)??0))}),colors:o.map(r=>r.color||(a==null?void 0:a[String(r.id)]))}:null}function Go(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const a=t.labels.map(f=>String(f??"")),o=t.series.map(f=>{const y=String((f==null?void 0:f.id)??"");return{...f,id:y,name:String((f==null?void 0:f.name)??(f==null?void 0:f.label)??y),color:String((f==null?void 0:f.color)??""),data:a.map((x,S)=>{var T;const M=Number(((T=f==null?void 0:f.data)==null?void 0:T[S])??0);return Number.isFinite(M)?Math.max(0,M):0})}}),r=uv(e.forecastMode),n=fv(new Date),s=a.map(f=>cv.test(f)&&f>n),i=[];if(s.forEach((f,y)=>{f&&i.push(y)}),!i.length||r==="off")return{labels:a,series:o};const l=e.targetsConfig??da(),c=pv(e.currentTargets),d=e.calendarCategoryMap??{},p=i.length,m=new Map;o.forEach(f=>{let y=0;f.data.forEach((x,S)=>{s[S]||(y+=Math.max(0,x))}),m.set(f.id,y)});const h=Array.from(m.values()).reduce((f,y)=>f+y,0),u=new Map;if(o.forEach(f=>{u.set(f.id,gv(a.length))}),r==="total"){const f=Math.max(0,Number(l.totalHours??0)),y=Math.max(0,f-h);if(y>1e-4){const x=y/p,S=o.map(T=>T.id),M=yc(S,m,c);S.forEach(T=>{const O=M[T]??0;if(O<=0)return;const I=u.get(T);I&&i.forEach(w=>{I[w]=Zr(x*O)})})}}else if(r==="calendar")o.forEach(f=>{const y=c[f.id]??0;if(y<=0)return;const x=Math.max(0,m.get(f.id)??0),S=Math.max(0,y-x);if(S<=1e-4)return;const M=S/p,T=u.get(f.id);T&&i.forEach(O=>{T[O]=Zr(M)})});else if(r==="category"){const f=new Set,y=Array.isArray(l.categories)?l.categories:[],x=new Map;y.forEach(M=>{x.set(String(M.id),Math.max(0,Number(M.targetHours??0)))});const S=new Map;o.forEach(M=>{const T=d==null?void 0:d[M.id],O=T?String(T):dv;S.has(O)||S.set(O,[]),S.get(O).push(M.id)}),S.forEach((M,T)=>{if(!M.length)return;const O=x.get(T)??0;if(O<=0)return;const I=M.reduce((Z,F)=>Z+Math.max(0,m.get(F)??0),0),w=Math.max(0,O-I);if(w<=1e-4)return;const E=w/p,P={};M.forEach(Z=>{P[Z]=c[Z]??0});const W=yc(M,m,P);M.forEach(Z=>{const F=W[Z]??0;if(F<=0)return;const C=u.get(Z);C&&(i.forEach(v=>{C[v]=Zr(E*F)}),f.add(Z))})}),o.forEach(M=>{if(f.has(M.id))return;const T=c[M.id]??0;if(T<=0)return;const O=Math.max(0,m.get(M.id)??0),I=Math.max(0,T-O);if(I<=1e-4)return;const w=I/p,E=u.get(M.id);E&&i.forEach(P=>{E[P]=Zr(w)})})}return o.forEach(f=>{const y=u.get(f.id);y&&y.some(x=>x>1e-4)&&(f.forecast=y)}),{labels:a,series:o}}function iv(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(String(e));if(!t)return null;const a=new Date(`${t[1]}-${t[2]}-${t[3]}T00:00:00`);if(Number.isNaN(a.getTime()))return null;const r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a.getDay()];return r?r==="Sun"?"Sun":r:null}const cv=/^\d{4}-\d{2}-\d{2}$/,dv="__uncategorized__";function uv(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function fv(e){const t=e.getFullYear(),a=`${e.getMonth()+1}`.padStart(2,"0"),o=`${e.getDate()}`.padStart(2,"0");return`${t}-${a}-${o}`}function gv(e){return Array.from({length:e},()=>0)}function Zr(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function pv(e){const t={};return e&&Object.entries(e).forEach(([a,o])=>{const r=Number(o);Number.isFinite(r)&&r>0&&(t[String(a)]=r)}),t}function yc(e,t,a){const o={},r=e.reduce((i,l)=>i+Math.max(0,t.get(l)??0),0);if(r>1e-4)return e.forEach(i=>{const l=Math.max(0,t.get(i)??0);o[i]=l/r}),o;const n=e.reduce((i,l)=>i+Math.max(0,(a==null?void 0:a[l])??0),0);if(n>1e-4)return e.forEach(i=>{const l=Math.max(0,(a==null?void 0:a[i])??0);o[i]=l/n}),o;const s=e.length?1/e.length:0;return e.forEach(i=>{o[i]=s}),o}const hv=Nt(()=>Ot(()=>Promise.resolve().then(()=>pw),void 0).then(e=>e.default)),wc="Day-of-Week Chart",mv={component:hv,defaultLayout:{width:"half",height:"m",order:84},label:"Day-of-Week Chart",baseTitle:wc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLabels:!0,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var p,m,h,u,f,y,x,S,M,T,O;const a=((p=e.options)==null?void 0:p.scope)==="category"?"category":"calendar",o=new Set(aa((m=e.options)==null?void 0:m.calendarFilter)),r=new Set(aa((h=e.options)==null?void 0:h.categoryFilter)),n=t.categoryColorMap||{},i=(Number.isFinite(t.lookbackWeeks)?Math.max(1,Math.min(6,Number(t.lookbackWeeks))):1)>1&&Array.isArray((u=t.charts)==null?void 0:u.perDaySeriesByOffset)?t.charts.perDaySeriesByOffset:null;let l=null,c=null,d=[];if(i&&i.length){const I=Gr(i),w=[],E=[];d=[],I.forEach((P,W)=>{var Y;const Z={labels:P.labels||[],series:P.series||[]},F=Go({perDaySeries:Z,forecastMode:(Y=e.options)==null?void 0:Y.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),C=a==="category"?qo(F,t.calendarCategoryMap||{},r,n):Ko(F,o),v=Yr(C),b=bc(v);if(!b)return;w.length||w.push(...b.labels||[]);const j=ss(W),R=Jr(P,t.rangeMode);E.push({id:`offset-${P.offset??W}`,name:R,label:R,color:j,data:b.data||[]}),d.push({id:`offset-${P.offset??W}`,label:R,color:j})}),c=w.length&&E.length?{labels:w,series:E}:null}else{const I=(f=t.charts)==null?void 0:f.perDaySeries,w=Go({perDaySeries:I,forecastMode:(y=e.options)==null?void 0:y.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),E=a==="category"?qo(w,t.calendarCategoryMap||{},r,n):Ko(w,o),P=Yr(E);l=bc(P)}return{title:Pt(wc,(x=e.options)==null?void 0:x.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(S=e.options)==null?void 0:S.cardBg,showHeader:((M=e.options)==null?void 0:M.showHeader)!==!1,showLabels:((T=e.options)==null?void 0:T.showLabels)!==!1,compact:((O=e.options)==null?void 0:O.compact)===!0,xLabel:"Weekday",yLabel:"Hours (h)",chartData:l,groupedData:c,legendItems:d}}},vv=Nt(()=>Ot(()=>Promise.resolve().then(()=>Aw),void 0).then(e=>e.default)),kc="Time-of-Day Chart",bv={component:vv,defaultLayout:{width:"full",height:"l",order:86},label:"Time-of-Day Chart",baseTitle:kc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showHint:!1,showLegend:!0,lookbackMode:"stacked",compact:!1},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"lookbackMode",label:"Lookback view",type:"select",options:[{value:"stacked",label:"Stacked weeks"},{value:"overlay",label:"Overlay stripes"}]},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showHint",label:"Show hint",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var d,p,m,h,u,f,y,x,S,M,T;const a=aa((d=e.options)==null?void 0:d.calendarFilter),o=aa((p=e.options)==null?void 0:p.categoryFilter),r=a.length>0||o.length>0,n=Number.isFinite(t.lookbackWeeks)?Math.max(1,Math.min(6,Number(t.lookbackWeeks))):1,s=n>1&&Array.isArray((m=t.charts)==null?void 0:m.hodByOffset)?t.charts.hodByOffset:null,l=(s?Gr(s):[]).map((O,I)=>{const w=ss(I);return{id:`offset-${O.offset??I}`,label:Jr(O,t.rangeMode),color:w,hod:{dows:O.dows||[],hours:O.hours||[],matrix:O.matrix||[]}}}),c=n>1&&((h=t.charts)!=null&&h.hodLookback)?t.charts.hodLookback:((u=t.charts)==null?void 0:u.hod)||null;return{title:Pt(kc,(f=e.options)==null?void 0:f.titlePrefix),subtitle:r?"Filters currently not applied":void 0,cardBg:(y=e.options)==null?void 0:y.cardBg,showHeader:((x=e.options)==null?void 0:x.showHeader)!==!1,showHint:((S=e.options)==null?void 0:S.showHint)===!0,showLegend:((M=e.options)==null?void 0:M.showLegend)!==!1,lookbackMode:(T=e.options)==null?void 0:T.lookbackMode,lookbackWeeks:t.lookbackWeeks,rangeMode:t.rangeMode,hodData:c,lookbackEntries:l}}},yv=Nt(()=>Ot(()=>Promise.resolve().then(()=>Bw),void 0).then(e=>e.default)),_c="Daily Chart",wv={component:yv,defaultLayout:{width:"half",height:"m",order:82},label:"Daily Chart",baseTitle:_c,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLabels:!1,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var d,p,m,h,u,f,y,x,S,M,T;const a=((d=e.options)==null?void 0:d.scope)==="category"?"category":"calendar",o=new Set(aa((p=e.options)==null?void 0:p.calendarFilter)),r=new Set(aa((m=e.options)==null?void 0:m.categoryFilter)),n=t.categoryColorMap||{},i=(Number.isFinite(t.lookbackWeeks)?Math.max(1,Math.min(6,Number(t.lookbackWeeks))):1)>1&&Array.isArray((h=t.charts)==null?void 0:h.perDaySeriesByOffset)?t.charts.perDaySeriesByOffset:null;let l=null,c=[];if(i&&i.length){const O=Gr(i),I=[],w=[],E=[];c=[],O.forEach((P,W)=>{var j;const Z={labels:P.labels||[],series:P.series||[]},F=Go({perDaySeries:Z,forecastMode:(j=e.options)==null?void 0:j.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),C=a==="category"?qo(F,t.calendarCategoryMap||{},r,n):Ko(F,o),v=Yr(C);if(!v)return;const b=ss(W);I.push(...v.labels),w.push(...v.data),E.push(...v.data.map(()=>b)),c.push({id:`offset-${P.offset??W}`,label:Jr(P,t.rangeMode),color:b})}),l=I.length?{labels:I,data:w,colors:E}:null}else{const O=Go({perDaySeries:(u=t.charts)==null?void 0:u.perDaySeries,forecastMode:(f=e.options)==null?void 0:f.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),I=a==="category"?qo(O,t.calendarCategoryMap||{},r,n):Ko(O,o);l=Yr(I)}return{title:Pt(_c,(y=e.options)==null?void 0:y.titlePrefix),subtitle:a==="category"?"Totals by category":"Totals by calendar",cardBg:(x=e.options)==null?void 0:x.cardBg,showHeader:((S=e.options)==null?void 0:S.showHeader)!==!1,showLabels:((M=e.options)==null?void 0:M.showLabels)===!0,compact:((T=e.options)==null?void 0:T.compact)===!0,xLabel:"Date",yLabel:"Hours (h)",chartData:l,legendItems:c}}},kv=Nt(()=>Ot(()=>Promise.resolve().then(()=>Uw),void 0).then(e=>e.default)),xc="Pie Chart",_v={component:kv,defaultLayout:{width:"half",height:"m",order:75},label:"Pie Chart",baseTitle:xc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLegend:!0,showLabels:!0,compact:!1},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var c,d,p,m,h,u,f,y,x,S;const a=((c=e.options)==null?void 0:c.scope)==="category"?"category":"calendar",o=new Set(aa((d=e.options)==null?void 0:d.calendarFilter)),r=new Set(aa((p=e.options)==null?void 0:p.categoryFilter)),n=t.colorsById||{},s=t.colorsByName||{},i=t.categoryColorMap||{},l=a==="category"?lv(t.calendarGroups||[],r,i):sv(((m=t.calendarChartData)==null?void 0:m.pie)||null,o);return{title:Pt(xc,(h=e.options)==null?void 0:h.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(u=e.options)==null?void 0:u.cardBg,showHeader:((f=e.options)==null?void 0:f.showHeader)!==!1,compact:((y=e.options)==null?void 0:y.compact)===!0,showLegend:((x=e.options)==null?void 0:x.showLegend)!==!1,showLabels:((S=e.options)==null?void 0:S.showLabels)!==!1,chartData:l,colorsById:n,colorsByName:s}}},xv=Nt(()=>Ot(()=>Promise.resolve().then(()=>Xw),void 0).then(e=>e.default)),Cc="Stacked Chart",Cv={component:xv,defaultLayout:{width:"full",height:"l",order:80},label:"Stacked Chart",baseTitle:Cc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLegend:!0,showLabels:!1,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var l,c,d,p,m,h,u,f,y,x,S;const a=((l=e.options)==null?void 0:l.scope)==="category"?"category":"calendar",o=new Set(aa((c=e.options)==null?void 0:c.calendarFilter)),r=new Set(aa((d=e.options)==null?void 0:d.categoryFilter)),n=t.categoryColorMap||{},s=Go({perDaySeries:(p=t.charts)==null?void 0:p.perDaySeries,forecastMode:(m=e.options)==null?void 0:m.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),i=a==="category"?qo(s,t.calendarCategoryMap||{},r,n):Ko(s,o);return{title:Pt(Cc,(h=e.options)==null?void 0:h.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(u=e.options)==null?void 0:u.cardBg,showHeader:((f=e.options)==null?void 0:f.showHeader)!==!1,compact:((y=e.options)==null?void 0:y.compact)===!0,showLegend:((x=e.options)==null?void 0:x.showLegend)!==!1,showLabels:((S=e.options)==null?void 0:S.showLabels)===!0,stacked:i,colorsById:t.colorsById||{}}}},Sv=Nt(()=>Ot(()=>Promise.resolve().then(()=>Sk),void 0).then(e=>e.default)),Sc="Calendar Table",$v={component:Sv,defaultLayout:{width:"full",height:"l",order:70},label:"Calendar Table",baseTitle:Sc,configurable:!0,defaultOptions:{calendarFilter:[],compact:!1},dynamicControls:(e,t)=>[{key:"calendarFilter",label:"Calendars",type:"multiselect",options:Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(o=>({value:o.id,label:o.displayname||o.name||o.id})):[]},{key:"compact",label:"Compact",type:"toggle"}],buildProps:(e,t)=>{var n,s,i,l;const a=new Set(aa((n=e.options)==null?void 0:n.calendarFilter)),o=Array.isArray(t.byCal)?t.byCal:[],r=a.size?o.filter(c=>a.has(String((c==null?void 0:c.id)??(c==null?void 0:c.calendar_id)??(c==null?void 0:c.calendar)??""))):o;return{title:Pt(Sc,(s=e.options)==null?void 0:s.titlePrefix),subtitle:a.size?"Filtered calendars":void 0,cardBg:(i=e.options)==null?void 0:i.cardBg,showHeader:((l=e.options)==null?void 0:l.showHeader)!==!1,rows:r,targets:t.currentTargets||{},groups:t.calendarGroups||[],todayHours:t.calendarTodayHours||{}}}},Tv=Nt(()=>Ot(()=>Promise.resolve().then(()=>Ik),void 0).then(e=>e.default)),$c="Time Off Trend",Mv={component:Tv,defaultLayout:{width:"quarter",height:"s",order:45},label:"Time Off Trend",baseTitle:$c,configurable:!0,defaultOptions:{lookback:3,showBadges:!0,labelMode:"period",toneLowColor:"#dc2626",toneHighColor:"#16a34a"},controls:[{key:"lookback",label:"Lookback (periods)",type:"number",min:1,max:6,step:1},{key:"showBadges",label:"Show badges",type:"toggle"},{key:"labelMode",label:"Trend label",type:"select",options:[{value:"date",label:"Date range"},{value:"period",label:"Week/Month"},{value:"offset",label:"Offset only"}]},{key:"toneLowColor",label:"Low color",type:"color"},{key:"toneHighColor",label:"High color",type:"color"}],buildProps:(e,t)=>{var a,o,r,n,s,i,l,c;return{trend:t.activityDayOffTrend,unit:t.activityTrendUnit??"wk",lookback:((a=e.options)==null?void 0:a.lookback)??t.activityDayOffLookback??3,showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,showBadges:((r=e.options)==null?void 0:r.showBadges)!==!1,labelMode:(n=e.options)==null?void 0:n.labelMode,title:Pt($c,(s=e.options)==null?void 0:s.titlePrefix),cardBg:(i=e.options)==null?void 0:i.cardBg,toneLowColor:(l=e.options)==null?void 0:l.toneLowColor,toneHighColor:(c=e.options)==null?void 0:c.toneHighColor}}};function Tc(e){const t=typeof e.title=="string"?e.title.trim():"";if(!t)return null;const o=(e.id!=null?String(e.id).trim():"")||Dv(t);return o?`tag_${o}`:null}function Mc(e){const t=new Map;return e.forEach(a=>{const o=new Set;(Array.isArray(a.labels)?a.labels:[]).forEach(n=>{const s=Tc(n),i=typeof n.title=="string"?n.title.trim():"";if(!s||!i||o.has(s))return;o.add(s);const l=t.get(s)||{label:i,count:0};l.count+=1,t.set(s,l)})}),Array.from(t.entries()).map(([a,o])=>({value:a,label:o.label,count:o.count})).sort((a,o)=>o.count-a.count||a.label.localeCompare(o.label))}function Av(e,t){return(Array.isArray(e.labels)?e.labels:[]).some(o=>Tc(o)===t)}function Dv(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}const Ev=Nt(()=>Ot(()=>Promise.resolve().then(()=>g_),void 0).then(e=>e.default)),Ac="Deck cards",Lv={component:Ev,defaultLayout:{width:"half",height:"m",order:52},label:"Deck cards",baseTitle:Ac,configurable:!0,defaultOptions:{allowMine:!0,includeArchived:!0,includeCompleted:!0,autoScroll:!0,intervalSeconds:5,showCount:!0,autoTagsEnabled:!0,compactList:!1,customFilters:[],filters:["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],defaultFilter:"open_all",mineMode:"assignee"},controls:[{key:"boardIds",label:"Boards to include",type:"multiselect",options:[]},{key:"filters",label:"Filters to show",type:"multiselect",options:[]},{key:"autoTagsEnabled",label:"Auto tag filters",type:"toggle"},{key:"allowMine",label:"Allow mine filters",type:"toggle"},{key:"mineMode",label:"Mine mode",type:"select",options:[{value:"assignee",label:"Assignee"},{value:"creator",label:"Creator"},{value:"both",label:"Assignee + Creator"}]},{key:"includeArchived",label:"Include archived cards",type:"toggle"},{key:"includeCompleted",label:"Include completed cards",type:"toggle"},{key:"autoScroll",label:"Auto-scroll list",type:"toggle"},{key:"intervalSeconds",label:"Scroll every (s)",type:"number",min:3,max:10,step:1},{key:"showCount",label:"Show count pill",type:"toggle"},{key:"compactList",label:"Compact list",type:"toggle"},{key:"customFilters",label:"Custom filters",type:"filterbuilder"}],dynamicControls:(e,t)=>{var u;const o={key:"defaultFilter",label:"Default filter",type:"select",options:pc(e.filters??((u=e.defaultOptions)==null?void 0:u.filters)).map(f=>({value:f,label:Ft(f)}))},r=[{value:"all",label:Ft("all")},{value:"open_all",label:Ft("open_all")},{value:"open_mine",label:Ft("open_mine")},{value:"done_all",label:Ft("done_all")},{value:"done_mine",label:Ft("done_mine")},{value:"archived_all",label:Ft("archived_all")},{value:"archived_mine",label:Ft("archived_mine")},{value:"due_all",label:Ft("due_all")},{value:"due_mine",label:Ft("due_mine")},{value:"due_today_all",label:Ft("due_today_all")},{value:"due_today_mine",label:Ft("due_today_mine")},{value:"created_today_all",label:Ft("created_today_all")},{value:"created_today_mine",label:Ft("created_today_mine")}],n=Array.isArray(t.deckBoards)?t.deckBoards.map(f=>({value:f.id,label:f.title||`Board ${f.id}`})):[],s=Array.isArray(e.boardIds)?e.boardIds:ns(e.boardIds),i=e.includeArchived!==!1,l=e.includeCompleted!==!1,c=new Set(s.map(f=>Number(f)).filter(f=>Number.isInteger(f))),p=(Array.isArray(t.deckCards)?t.deckCards:[]).filter(f=>!(c.size&&!((f==null?void 0:f.boardId)!=null&&c.has(Number(f.boardId)))||!i&&(f==null?void 0:f.status)==="archived"||!l&&(f==null?void 0:f.status)==="done")),m=Mc(p),h=[];return e.autoTagsEnabled!==!1&&m.length&&h.push({key:"autoTagSelection",label:"Tag filters",type:"taglist",options:m,hint:"Uncheck tags to hide their filters. Counts reflect the current cards."}),[{key:"filters",label:"Filters",type:"multiselect",options:r},o,{key:"boardIds",label:"Boards",type:"multiselect",options:n},...h]},buildProps:(e,t)=>{var s,i,l,c,d,p,m,h,u,f,y,x,S,M,T,O,I,w,E,P,W,Z;const a=pc(((s=e.options)==null?void 0:s.filters)??((l=(i=e.options)==null?void 0:i.defaultOptions)==null?void 0:l.filters)),o=Array.isArray((c=e.options)==null?void 0:c.boardIds)?e.options.boardIds:ns((d=e.options)==null?void 0:d.boardIds),r=a.includes((p=e.options)==null?void 0:p.defaultFilter)?(m=e.options)==null?void 0:m.defaultFilter:a[0]||"all",n=Nv((h=e.options)==null?void 0:h.customFilters);return{title:Pt(Ac,(u=e.options)==null?void 0:u.titlePrefix),cardBg:(f=e.options)==null?void 0:f.cardBg,cards:t.deckCards||[],rangeLabel:t.deckRangeLabel||t.rangeLabel||"",from:t.from,to:t.to,uid:t.uid,deckUrl:t.deckUrl,lastFetchedAt:t.deckRangeLabel,loading:t.deckLoading,error:t.deckError,boardIds:o,filters:a,defaultFilter:r,allowMine:((y=e.options)==null?void 0:y.allowMine)!==!1,mineMode:((x=e.options)==null?void 0:x.mineMode)||"assignee",includeArchived:((S=e.options)==null?void 0:S.includeArchived)!==!1,includeCompleted:((M=e.options)==null?void 0:M.includeCompleted)!==!1,autoScroll:((T=e.options)==null?void 0:T.autoScroll)!==!1,intervalSeconds:((O=e.options)==null?void 0:O.intervalSeconds)??5,showCount:((I=e.options)==null?void 0:I.showCount)!==!1,compactList:((w=e.options)==null?void 0:w.compactList)===!0,autoTagsEnabled:((E=e.options)==null?void 0:E.autoTagsEnabled)!==!1,autoTagSelection:Array.isArray((P=e.options)==null?void 0:P.autoTagSelection)?(W=e.options)==null?void 0:W.autoTagSelection:void 0,showHeader:((Z=e.options)==null?void 0:Z.showHeader)!==!1,customFilters:n,editable:t.isLayoutEditing===!0,onUpdateFilters:F=>{var C;return(C=t.onUpdateWidgetOptions)==null?void 0:C.call(t,e.id,"filters",F)}}}};function Nv(e){let t=[];if(Array.isArray(e))t=e;else if(typeof e=="string"&&e.trim()!=="")try{const a=JSON.parse(e);Array.isArray(a)&&(t=a)}catch{t=[]}return t.map(a=>{if(!a||typeof a!="object")return null;const o=String(a.label||a.name||"").trim();if(!o)return null;const r=Iv(String(a.id||o)),n=Array.isArray(a.labelIds)?a.labelIds.map(l=>String(l).trim()).filter(Boolean):[],s=Array.isArray(a.labels)?a.labels.map(l=>String(l).trim()).filter(Boolean):[],i=Array.isArray(a.assignees)?a.assignees.map(l=>String(l).trim()).filter(Boolean):[];return{id:r,label:o,labelIds:n,labels:s,assignees:i}}).filter(Boolean)}function Iv(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}const Bv=Nt(()=>Ot(()=>Promise.resolve().then(()=>$_),void 0).then(e=>e.default)),Dc="Notes",Ov={component:Bv,defaultLayout:{width:"half",height:"m",order:69},label:"Notes editor",baseTitle:Dc,configurable:!0,controls:[{key:"prevLabel",label:"Prev label",type:"text"},{key:"currLabel",label:"Current label",type:"text"}],buildProps:(e,t)=>{var a,o,r,n,s;return{title:Pt(Dc,(a=e.options)==null?void 0:a.titlePrefix),showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,cardBg:(r=e.options)==null?void 0:r.cardBg,prevLabel:((n=e.options)==null?void 0:n.prevLabel)||(t.notesLabelPrev??"Previous"),currLabel:((s=e.options)==null?void 0:s.currLabel)||(t.notesLabelCurr??"Current"),previous:t.notesPrev??"",history:t.notesHistory??[],modelValue:t.notesCurr??"",saving:t.isSavingNote??!1,onSave:t.onSaveNote,onUpdateModelValue:t.onUpdateNotes}}},Pv=Nt(()=>Ot(()=>Promise.resolve().then(()=>D_),void 0).then(e=>e.default)),Ec="Note",Fv={component:Pv,defaultLayout:{width:"quarter",height:"s",order:68},label:"Notes snippet",baseTitle:Ec,configurable:!0,controls:[],buildProps:(e,t)=>{var a,o,r;return{notesCurr:t.notesCurr??"",notesPrev:t.notesPrev??"",title:Pt(Ec,(a=e.options)==null?void 0:a.titlePrefix),showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,cardBg:(r=e.options)==null?void 0:r.cardBg}}},Hv=Nt(()=>Ot(()=>Promise.resolve().then(()=>tx),void 0).then(e=>e.default)),Lc="Targets",Wv={component:Hv,defaultLayout:{width:"half",height:"m",order:18},label:"Targets",baseTitle:Lc,configurable:!0,defaultOptions:{showForecast:!0,showPace:!0,useLocalConfig:!1,localConfig:null},controls:[{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showDelta",label:"Show delta",type:"toggle"},{key:"showForecast",label:"Show forecast",type:"toggle"},{key:"showPace",label:"Show pace line",type:"toggle"},{key:"showToday",label:"Show today overlay",type:"toggle"},{key:"useLocalConfig",label:"Use custom targets for this widget",type:"toggle"},{key:"showTotalDelta",label:"Show total delta",type:"toggle"},{key:"showNeedPerDay",label:"Show need per day",type:"toggle"},{key:"showCategoryBlocks",label:"Show categories",type:"toggle"},{key:"badges",label:"Status badges",type:"toggle"},{key:"includeWeekendToggle",label:"Weekend toggle",type:"toggle"},{key:"includeZeroDaysInStats",label:"Include zero days in pace",type:"toggle"}],buildProps:(e,t)=>{var l,c,d,p,m,h,u,f,y,x,S;const a=!!((l=e.options)!=null&&l.useLocalConfig),o=a&&((c=e.options)!=null&&c.localConfig)?JSON.parse(JSON.stringify(e.options.localConfig)):t.targetsConfig?JSON.parse(JSON.stringify(t.targetsConfig)):da(),r=ev(Qm(o,t.rangeMode)),n=(M,T)=>{var O;((O=e.options)==null?void 0:O[M])!==void 0&&T(!!e.options[M])};n("showTotalDelta",M=>{r.ui.showTotalDelta=M}),n("showNeedPerDay",M=>{r.ui.showNeedPerDay=M}),n("showCategoryBlocks",M=>{r.ui.showCategoryBlocks=M}),n("badges",M=>{r.ui.badges=M}),n("includeWeekendToggle",M=>{r.ui.includeWeekendToggle=M}),n("includeZeroDaysInStats",M=>{r.includeZeroDaysInStats=M});const s=a&&t.stats?tv(r,t):t.targetsSummary??t.summary,i=a?null:((d=e.props)==null?void 0:d.groups)??t.groups;return{summary:s,config:r,groups:i,showHeader:((p=e.options)==null?void 0:p.showHeader)!==!1,showLegend:((m=e.options)==null?void 0:m.showLegend)!==!1,showDelta:((h=e.options)==null?void 0:h.showDelta)!==!1,showForecast:((u=e.options)==null?void 0:u.showForecast)!==!1,showPace:((f=e.options)==null?void 0:f.showPace)!==!1,showToday:((y=e.options)==null?void 0:y.showToday)!==!1,title:Pt(Lc,(x=e.options)==null?void 0:x.titlePrefix),cardBg:(S=e.options)==null?void 0:S.cardBg}}};function Nc(e){var i;const t=e.basis||"category";if(t==="off")return 0;const a={},o=(i=e.targets)!=null&&i.length?e.targets.reduce((l,c)=>l+(c.targetHours??0),0):0;t!=="calendar"&&o>0&&e.targets.forEach(l=>{const c=(l.targetHours??0)/o;a[l.id]=c});const r=new Set;if(Object.keys(e.shares||{}).forEach(l=>r.add(l)),Object.keys(a).forEach(l=>r.add(l)),r.size===0)return 0;let n=0;r.forEach(l=>{var m;const c=Number(((m=e.shares)==null?void 0:m[l])??0),d=t==="calendar"?1/r.size:a[l]??0,p=Math.abs(c-d);p>n&&(n=p)});const s=1-n;return Math.max(0,Math.min(1,Number(s.toFixed(2))))}const zv=Nt(()=>Ot(()=>Promise.resolve().then(()=>jx),void 0).then(e=>e.default)),Ic="Time Summary",Rv={component:zv,defaultLayout:{width:"half",height:"s",order:9},label:"Time Summary",baseTitle:Ic,configurable:!0,defaultOptions:{...da().timeSummary,mode:"active",showHistory:!0,historyView:"list",showActivityDetails:!0},controls:[{key:"mode",label:"Average mode",type:"select",options:[{value:"active",label:"Active days"},{value:"all",label:"All days"}]},{key:"showHistory",label:"Show history",type:"toggle"},{key:"historyView",label:"History layout",type:"select",options:[{value:"list",label:"List"},{value:"pills",label:"Pills"}]},{key:"showActivityDetails",label:"Activity details",type:"toggle"},{key:"showTotal",label:"Total hours",type:"toggle"},{key:"showAverage",label:"Average per day",type:"toggle"},{key:"showMedian",label:"Median per day",type:"toggle"},{key:"showBusiest",label:"Busiest day",type:"toggle"},{key:"showWorkday",label:"Workdays row",type:"toggle"},{key:"showWeekend",label:"Weekend row",type:"toggle"},{key:"showWeekendShare",label:"Weekend share",type:"toggle"},{key:"showCalendarSummary",label:"Top calendars",type:"toggle"},{key:"showTopCategory",label:"Top category",type:"toggle"},{key:"showBalance",label:"Balance index",type:"toggle"}],buildProps:(e,t)=>{var p,m,h,u,f,y,x,S,M,T,O;const a=t.targetsConfig?JSON.parse(JSON.stringify(t.targetsConfig)):da(),o={...a,timeSummary:{...a.timeSummary}},r=String(t.rangeMode||"week").toLowerCase()==="month"?"month":"week",n=((p=e.options)==null?void 0:p.mode)??t.activeDayMode??"active",s=((m=e.options)==null?void 0:m.showHistory)!==!1,i=((h=e.options)==null?void 0:h.historyView)==="pills"?"pills":"list",l=((u=e.options)==null?void 0:u.showActivityDetails)!==!1,c=I=>{var w;((w=e.options)==null?void 0:w[I])!==void 0&&(o.timeSummary[I]=!!e.options[I])};["showTotal","showAverage","showMedian","showBusiest","showWorkday","showWeekend","showWeekendShare","showCalendarSummary","showTopCategory","showBalance"].forEach(c);const d=s&&Number(t.lookbackWeeks)>1?jv({mode:n,rangeMode:r,lookbackWeeks:Number(t.lookbackWeeks),perDaySeriesByOffset:(f=t.charts)==null?void 0:f.perDaySeriesByOffset,hodByOffset:(y=t.charts)==null?void 0:y.hodByOffset,summaryByOffset:(x=t.charts)==null?void 0:x.summaryByOffset,targetsConfig:Uv(o,r),calendarCategoryMap:t.calendarCategoryMap||{},calendarGroups:Array.isArray(t.calendarGroups)?t.calendarGroups:[],categoryColorMap:t.categoryColorMap||{}}):[];return{summary:t.summary,activitySummary:t.activitySummary,mode:n,config:o.timeSummary,todayGroups:((S=e.props)==null?void 0:S.todayGroups)??t.groups,title:Pt(Ic,(M=e.options)==null?void 0:M.titlePrefix),cardBg:(T=e.options)==null?void 0:T.cardBg,rangeMode:t.rangeMode,rangeStart:t.from,rangeEnd:t.to,offset:t.offset,showHeader:((O=e.options)==null?void 0:O.showHeader)!==!1,showHistory:s,historyView:i,showActivityDetails:l,history:d}}};function jv(e){const t=Array.isArray(e.perDaySeriesByOffset)?e.perDaySeriesByOffset:[];if(!t.length)return[];const a=Array.isArray(e.hodByOffset)?e.hodByOffset:[],o=Array.isArray(e.summaryByOffset)?e.summaryByOffset:[],r=new Map;t.forEach(d=>{const p=Number((d==null?void 0:d.offset)??0);Number.isFinite(p)&&r.set(p,d)});const n=new Map;a.forEach(d=>{const p=Number((d==null?void 0:d.offset)??0);Number.isFinite(p)&&n.set(p,d)});const s=new Map;o.forEach(d=>{const p=Number((d==null?void 0:d.offset)??0);Number.isFinite(p)&&s.set(p,d)});const i=Math.max(0,Math.min(6,Math.floor(e.lookbackWeeks)-1));if(i<=0)return[];const l=Gr(t).map(d=>Number((d==null?void 0:d.offset)??0)).filter(d=>Number.isFinite(d)&&d>0&&d<=i),c=new Map;return e.calendarGroups.forEach(d=>{const p=String((d==null?void 0:d.id)??"").trim();p&&c.set(p,String((d==null?void 0:d.label)??p))}),e.targetsConfig.categories.forEach(d=>{const p=String((d==null?void 0:d.id)??"").trim();p&&!c.has(p)&&c.set(p,String((d==null?void 0:d.label)??p))}),l.map(d=>{const p=r.get(d);if(!p)return null;const m=Vv(p),h=s.get(d),u=n.get(d),f=zt(m.totalHours),y=Number((h==null?void 0:h.events)??(h==null?void 0:h.eventsCount)??0)||0,x=Number((h==null?void 0:h.overlap_events)??(h==null?void 0:h.overlapEvents)??0)||0,S=Number((h==null?void 0:h.longest_session)??(h==null?void 0:h.longestSession)??0)||0,M=Bc((h==null?void 0:h.earliest_start)??(h==null?void 0:h.earliestStart)),T=Bc((h==null?void 0:h.latest_end)??(h==null?void 0:h.latestEnd)),O=u?Kv(u,f):null,I=m.activeDays,w=zt(ls(m.filteredTotals(e.mode))),E=zt(is(m.filteredTotals(e.mode))),P=y>0?zt(f/y):0,W=zt(ls(m.filteredWorkdayTotals(e.mode))),Z=zt(is(m.filteredWorkdayTotals(e.mode))),F=zt(ls(m.filteredWeekendTotals(e.mode))),C=zt(is(m.filteredWeekendTotals(e.mode))),v=(O==null?void 0:O.weekendShare)??m.weekendShare,b=qv(m.calendarTotals,f),j=Gv({calendarTotals:m.calendarTotals,categoryLabelById:c,categoryColorMap:e.categoryColorMap,calendarCategoryMap:e.calendarCategoryMap,targetsConfig:e.targetsConfig}),R=Jv({totalHours:f,calendarTotals:m.calendarTotals,calendarCategoryMap:e.calendarCategoryMap,targetsConfig:e.targetsConfig});return{offset:d,label:Jr({offset:d,from:p==null?void 0:p.from,to:p==null?void 0:p.to},e.rangeMode),rangeStart:String((p==null?void 0:p.from)??""),rangeEnd:String((p==null?void 0:p.to)??""),totalHours:f,avgDay:w,avgEvent:P,medianDay:E,busiest:m.busiest,workdayAvg:W,workdayMedian:Z,weekendAvg:F,weekendMedian:C,weekendShare:v,activeCalendars:m.activeCalendars,calendarSummary:b,topCategory:j,balanceIndex:R,activity:{events:y,activeDays:I,typicalStart:(O==null?void 0:O.typicalStart)??null,typicalEnd:(O==null?void 0:O.typicalEnd)??null,weekendShare:(O==null?void 0:O.weekendShare)??null,eveningShare:(O==null?void 0:O.eveningShare)??null,earliestStart:M,latestEnd:T,overlapEvents:x,longestSession:zt(S),lastDayOff:m.lastDayOff,lastHalfDayOff:m.lastHalfDayOff}}}).filter(d=>!!d)}function Uv(e,t){const a=JSON.parse(JSON.stringify(e));return t==="month"&&(a.totalHours=ka(a.totalHours),a.categories=a.categories.map(o=>({...o,targetHours:ka(o.targetHours)}))),a}function Vv(e){const t=Array.isArray(e==null?void 0:e.labels)?e.labels.map(u=>String(u??"")):[],a=Array.isArray(e==null?void 0:e.series)?e.series:[],o=t.map((u,f)=>a.reduce((y,x)=>{var M;const S=Number(((M=x==null?void 0:x.data)==null?void 0:M[f])??0);return y+(Number.isFinite(S)?Math.max(0,S):0)},0)),r=a.map(u=>{const f=String((u==null?void 0:u.id)??""),y=String((u==null?void 0:u.name)??(u==null?void 0:u.label)??f),x=Array.isArray(u==null?void 0:u.data)?u.data.reduce((S,M)=>{const T=Number(M??0);return S+(Number.isFinite(T)?Math.max(0,T):0)},0):0;return{id:f,name:y,total:zt(x),color:u!=null&&u.color?String(u.color):void 0}}),n=o.reduce((u,f)=>u+f,0),s=r.filter(u=>u.total>0).length,i=(()=>{if(!t.length)return null;let u=-1,f=-1;return o.forEach((y,x)=>{y>u&&(u=y,f=x)}),f<0||u<=0?null:{date:t[f],hours:zt(u)}})(),l=[],c=[];o.forEach((u,f)=>{const y=Yv(t[f]);y!=null&&(y===0||y===6?c.push(u):l.push(u))});const d=n>0?Jo(c.reduce((u,f)=>u+f,0)/n*100):null,{lastDayOff:p,lastHalfDayOff:m}=Zv(t,o),h=o.filter(u=>u>.01).length;return{labels:t,totals:o,totalHours:n,activeCalendars:s,busiest:i,workdayTotals:l,weekendTotals:c,weekendShare:d,lastDayOff:p,lastHalfDayOff:m,activeDays:h,filteredTotals:u=>u==="active"?o.filter(f=>f>0):o,filteredWorkdayTotals:u=>u==="active"?l.filter(f=>f>0):l,filteredWeekendTotals:u=>u==="active"?c.filter(f=>f>0):c,calendarTotals:r}}function Kv(e,t){const a=Array.isArray(e==null?void 0:e.dows)?e.dows.map(h=>String(h??"")):[],o=Array.isArray(e==null?void 0:e.matrix)?e.matrix:[],r=new Map;a.forEach((h,u)=>{const f=Array.isArray(o[u])?o[u]:[];r.set(h,f.map(y=>Number(y??0)))});const n=Array.from({length:24},(h,u)=>Array.from(r.values()).reduce((f,y)=>f+Number(y[u]??0),0)),s=.25;let i=null,l=null;for(let h=0;h<24;h+=1)if(n[h]>=s){i=`${String(h).padStart(2,"0")}:00`;break}for(let h=23;h>=0;h-=1)if(n[h]>=s){l=`${String(h+1).padStart(2,"0")}:00`;break}const c=(r.get("Sat")||[]).reduce((h,u)=>h+Number(u??0),0)+(r.get("Sun")||[]).reduce((h,u)=>h+Number(u??0),0);let d=0;r.forEach(h=>{for(let u=18;u<24;u+=1)d+=Number(h[u]??0)});const p=t>0?Jo(c/t*100):null,m=t>0?Jo(d/t*100):null;return{typicalStart:i,typicalEnd:l,weekendShare:p,eveningShare:m}}function qv(e,t){return t<=0?"":e.slice().sort((o,r)=>r.total-o.total).filter(o=>o.total>0).slice(0,3).map(o=>`${o.name} ${Jo(o.total/t*100)}%`).join(", ")}function Gv(e){var i;const t=new Map;if(e.calendarTotals.forEach(l=>{var d;const c=String(((d=e.calendarCategoryMap)==null?void 0:d[l.id])??"");c&&t.set(c,(t.get(c)||0)+l.total)}),!t.size)return null;let a="",o=-1;if(t.forEach((l,c)=>{l>o&&(o=l,a=c)}),!a)return null;const r=e.targetsConfig.categories.find(l=>String(l.id)===a),n=Number((r==null?void 0:r.targetHours)??0)||0,s=n>0?Jo(o/n*100):0;return{label:e.categoryLabelById.get(a)||a,actualHours:zt(o),targetHours:zt(n),percent:s,color:(i=e.categoryColorMap)==null?void 0:i[a]}}function Jv(e){var o,r;if(e.totalHours<=0)return null;const t=((r=(o=e.targetsConfig.balance)==null?void 0:o.index)==null?void 0:r.basis)||"category";if(t==="off")return null;const a={};if(t==="calendar")e.calendarTotals.forEach(n=>{n.total<=0||(a[n.id]=n.total/e.totalHours)});else{const n=new Map;e.calendarTotals.forEach(s=>{var l;const i=String(((l=e.calendarCategoryMap)==null?void 0:l[s.id])??"");i&&n.set(i,(n.get(i)||0)+s.total)}),n.forEach((s,i)=>{s<=0||(a[i]=s/e.totalHours)})}return Object.keys(a).length?Nc({shares:a,targets:e.targetsConfig.categories,basis:t}):null}function ls(e){return e.length?e.reduce((t,a)=>t+a,0)/e.length:0}function is(e){if(!e.length)return 0;const t=[...e].sort((o,r)=>o-r),a=Math.floor(t.length/2);return t.length%2?t[a]:(t[a-1]+t[a])/2}function Yv(e){if(!e)return null;const t=new Date(`${e}T00:00:00`);return Number.isNaN(t.getTime())?null:t.getDay()}function Zv(e,t){let a=null,o=null;const r=4;for(let n=e.length-1;n>=0;n-=1){const s=t[n]??0;if(!a&&s<=.01&&(a=e[n]),!o&&s>.01&&s<=r&&(o=e[n]),a&&o)break}return{lastDayOff:a,lastHalfDayOff:o}}function Jo(e){return Math.round(e*10)/10}function zt(e){return Math.round(e*100)/100}function Bc(e){if(e==null)return null;const t=String(e).trim();return t||null}const Va={time_summary_v2:Rv,targets_v2:Wv,balance_index:ov,dayoff_trend:Mv,category_mix_trend:nv,chart_pie:_v,chart_stacked:Cv,chart_per_day:wv,chart_dow:mv,chart_hod:bv,calendar_table:$v,deck_cards:Lv,note_snippet:Fv,note_editor:Ov};function Oc(e,t){if(!Array.isArray(e))return t;const a=[];return e.forEach((o,r)=>{const n=String((o==null?void 0:o.type)??"");if(!n)return;const s=Va[n];if(!s)return;const i=String((o==null?void 0:o.id)??"")||`widget-${n}-${r+1}`,l=(o==null?void 0:o.layout)??{},c=l.width==="quarter"||l.width==="half"?l.width:"full",d=l.height==="s"||l.height==="l"||l.height==="xl"?l.height:"m",p=Number(l.order??0),h={...s.defaultOptions||{},...o!=null&&o.options&&typeof o.options=="object"?o.options:{}};h.scale==null&&h.textSize!=null&&(h.scale=h.textSize,delete h.textSize),a.push({id:i,type:n,options:h,layout:{width:c,height:d,order:Number.isFinite(p)?p:0},version:Number((o==null?void 0:o.version)??1)||1})}),a.length?a:t}function Pc(){return cs("standard")}function Yo(e){const t=[{id:"tab-1",label:"Overview",widgets:cs(e)}];return{tabs:t,defaultTabId:t[0].id}}function Zo(e,t){var l,c,d,p;if(Array.isArray(e)){const m=Oc(e,((l=t.tabs[0])==null?void 0:l.widgets)||Pc()),h=((c=t.tabs[0])==null?void 0:c.id)||"tab-1";return{tabs:[{id:h,label:((d=t.tabs[0])==null?void 0:d.label)||"Overview",widgets:m}],defaultTabId:h}}if(!e||typeof e!="object")return t;const a=Array.isArray(e.tabs)?e.tabs:[],o=t.tabs||[],r=a.map((m,h)=>{var M,T;const u=String((m==null?void 0:m.id)??"").trim()||`tab-${h+1}`,f=String((m==null?void 0:m.label)??"").trim(),y=f?f.slice(0,48):`Tab ${h+1}`,x=((M=o[h])==null?void 0:M.widgets)||((T=o[0])==null?void 0:T.widgets)||Pc(),S=Oc(m==null?void 0:m.widgets,x);return{id:u,label:y,widgets:S}}),n=r.length?r:o,s=String(e.defaultTabId??e.defaultTab??e.active??""),i=n.some(m=>m.id===s)?s:((p=n[0])==null?void 0:p.id)||"tab-1";return{tabs:n,defaultTabId:i}}function Xv(e,t){const a=t.hasInitialLoad===!1||!!t.isLoading;return e.type==="deck_cards"?a||!!t.deckLoading:a}function Qv(e,t){const a=Va[e.type];if(!a)return null;const o=a.buildProps(e,t)||{},r=Xv(e,t);return{component:a.component,props:o,loading:r}}function Ze(e,t={},a){const o=Va[e],r=(o==null?void 0:o.defaultLayout)??{width:"half",height:"s",order:50},n=(o==null?void 0:o.defaultOptions)||{};return{id:`widget-${e}-${Math.random().toString(36).slice(2,8)}`,type:e,options:{...n,...t||{}},layout:{...r,...a||{}},version:1}}function cs(e){return e==="quick"?[Ze("time_summary_v2",{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0,mode:"active",scale:"xl"},{width:"full",height:"xl",order:5}),Ze("targets_v2",{showForecast:!0,showHeader:!1,showLegend:!0,showDelta:!0,showPace:!0,showToday:!0,scale:"lg"},{width:"full",height:"xl",order:10}),Ze("balance_index",{showTrend:!0,showMessages:!0,showConfig:!1,indexBasis:"category",noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6,lookbackWeeks:3,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1},{width:"full",height:"m",order:20}),Ze("dayoff_trend",{},{width:"full",height:"s",order:30})]:e==="pro"?[Ze("targets_v2",{showForecast:!0,showPace:!0,useLocalConfig:!1,localConfig:null,showCategoryBlocks:!0},{width:"half",height:"xl",order:10}),Ze("time_summary_v2",{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0,mode:"active",scale:"md"},{width:"half",height:"xl",order:30}),Ze("balance_index",{showTrend:!0,showMessages:!0,showConfig:!1,indexBasis:"category",noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6,lookbackWeeks:3,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1},{width:"half",height:"m",order:40}),Ze("dayoff_trend",{},{width:"half",height:"s",order:50}),Ze("category_mix_trend",{lookbackWeeks:3,density:"normal",labelMode:"period",colorMode:"hybrid",squareCells:!1,showHeader:!0,showBadge:!0},{width:"full",height:"l",order:55}),Ze("calendar_table",{},{width:"full",height:"l",order:56}),Ze("chart_pie",{scope:"calendar",showLegend:!0,showLabels:!0},{width:"half",height:"m",order:57}),Ze("chart_stacked",{scope:"calendar",showLegend:!0,showLabels:!1},{width:"full",height:"l",order:58}),Ze("chart_per_day",{scope:"calendar",showLabels:!1},{width:"half",height:"m",order:59}),Ze("chart_dow",{scope:"calendar",showLabels:!0},{width:"half",height:"m",order:59.5}),Ze("chart_hod",{showHint:!1},{width:"full",height:"l",order:59.8}),Ze("deck_cards",{allowMine:!0,includeArchived:!0,includeCompleted:!0,autoScroll:!0,intervalSeconds:5,showCount:!0,filters:["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],defaultFilter:"open_all",mineMode:"assignee"},{width:"half",height:"xl",order:60}),Ze("note_editor",{},{width:"half",height:"l",order:70})]:[Ze("targets_v2",{showForecast:!0,showHeader:!1,showLegend:!0,showDelta:!0,showPace:!0,showToday:!0,scale:"lg"},{width:"half",height:"l",order:10}),Ze("time_summary_v2",{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0,mode:"active",scale:"md"},{width:"half",height:"xl",order:20}),Ze("balance_index",{showTrend:!0,showMessages:!0,showConfig:!1,indexBasis:"category",noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6,lookbackWeeks:3,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1},{width:"half",height:"m",order:30}),Ze("dayoff_trend",{},{width:"half",height:"s",order:40}),Ze("category_mix_trend",{lookbackWeeks:3,density:"normal",labelMode:"period",colorMode:"hybrid",squareCells:!1,showHeader:!0,showBadge:!0},{width:"full",height:"l",order:50}),Ze("calendar_table",{},{width:"full",height:"l",order:55}),Ze("chart_pie",{scope:"calendar",showLegend:!0,showLabels:!0},{width:"half",height:"m",order:56}),Ze("chart_stacked",{scope:"calendar",showLegend:!0,showLabels:!1},{width:"full",height:"l",order:57}),Ze("chart_per_day",{scope:"calendar",showLabels:!1},{width:"half",height:"m",order:58}),Ze("chart_dow",{scope:"calendar",showLabels:!0},{width:"half",height:"m",order:58.5}),Ze("chart_hod",{showHint:!1},{width:"full",height:"l",order:59})]}const eb=["draggable","aria-busy","onClick","onDragstart"],tb={key:0,class:"widget-loading","aria-live":"polite"},ab=Ye(Ie({__name:"DashboardGrid",props:{ordered:{},editable:{type:Boolean},selectedId:{},widgetTypeList:{}},emits:["select","add","reorder","select-cell"],setup(e,{emit:t}){const a=e,o=t,r=le(null),n=le(null),s=le(null),i=D(()=>a.widgetTypeList||[]),l=D(()=>{const w=[];let E={items:[],col:1,remaining:4};const P=()=>{E.items.length&&w.push({items:E.items}),E={items:[],col:1,remaining:4}};return a.ordered.forEach(W=>{const Z=d(W.layout.width);Z>E.remaining&&P();const F=E.col;E.items.push({...W,span:Z,start:F}),E.col+=Z,E.remaining-=Z}),P(),w});function c(w){switch(w){case"quarter":return"w-quarter";case"half":return"w-half";default:return"w-full"}}function d(w){return w==="quarter"?1:w==="half"?2:4}function p(w){switch(w){case"s":return"h-s";case"l":return"h-l";case"xl":return"h-xl";default:return"h-m"}}function m(w){const E=(w==null?void 0:w.scale)||(w==null?void 0:w.textSize)||"md";return E==="sm"?"scale-sm":E==="lg"?"scale-lg":E==="xl"?"scale-xl":"scale-md"}function h(w){const E=(w==null?void 0:w.scale)||(w==null?void 0:w.textSize)||"md",P=E==="sm"?.85:E==="lg"?1.35:E==="xl"?1.6:1.1,W=w!=null&&w.dense?.72:1,Z=P*W,F=18*P;return{"--widget-scale":String(P),"--widget-space":String(Z),"--widget-density":String(W),"--widget-title-size":`${F}px`}}function u(w){const E=r.value;if(!E)return{row:0,col:1};const P=E.getBoundingClientRect(),W=12,F=(P.width-W*3)/4,C=Math.max(0,Math.min(P.width,w.clientX-P.left)),v=Math.min(3,Math.max(0,Math.floor(C/(F+W))))+1,b=Math.max(0,Math.min(P.height+400,w.clientY-P.top)),j=Number.parseFloat(getComputedStyle(E).getPropertyValue("--grid-row"))||24;return{row:Math.max(0,Math.floor(b/(j+W))),col:v}}function f(w,E){var v,b,j,R;const P=l.value,W=P[w]||P[P.length-1]||{items:[]},Z=[...W.items||[]].filter(Y=>Y.start<E).sort((Y,ne)=>Y.start-ne.start).pop(),F=[...W.items||[]].filter(Y=>Y.start>=E).sort((Y,ne)=>Y.start-ne.start)[0];if(Z&&F)return(Z.layout.order+F.layout.order)/2;if(Z)return(Z.layout.order||0)+5;if(F)return(F.layout.order||0)-5;const C=P[w-1]||P[P.length-1];return C&&C.items.length?(C.items[C.items.length-1].layout.order||0)+10:((((R=(j=(b=(v=P[0])==null?void 0:v.items)==null?void 0:b[0])==null?void 0:j.layout)==null?void 0:R.order)??0)||0)-10}function y(w){if(!a.editable||!i.value.length)return;const{row:E,col:P}=u(w),W=f(E,P);o("select-cell",W)}function x(w){a.editable&&(w.target.closest(".layout-item")||y(w))}function S(w){a.editable&&(w.target.closest(".layout-item")||y(w))}function M(w){if(!a.editable||!n.value)return;const{row:E,col:P}=u(w);s.value=f(E,P)}function T(){if(!a.editable||!n.value)return;const w=n.value,E=s.value??void 0;n.value=null,s.value=null,o("reorder",w,E)}function O(w){a.editable&&(n.value=w,s.value=null)}function I(){n.value=null,s.value=null}return(w,E)=>(k(),_("div",{ref_key:"gridEl",ref:r,class:Ne(["layout-grid",{"show-guides":w.editable}]),onClick:x,onContextmenu:dt(S,["prevent"]),onDragover:dt(M,["prevent"]),onDrop:dt(T,["prevent"])},[(k(!0),_(he,null,$e(w.ordered,P=>(k(),_("div",{key:P.id,class:Ne(["layout-item",[c(P.layout.width),p(P.layout.height),m(P.options),{"is-editable":w.editable,"is-selected":w.editable&&w.selectedId===P.id,"is-dragging":w.editable&&n.value===P.id,"is-loading":!!P.loading}]]),style:Le(h(P.options)),draggable:w.editable,"aria-busy":P.loading?"true":"false",onClick:dt(W=>o("select",P.id),["stop"]),onDragstart:W=>O(P.id),onDragend:I},[P.loading?(k(),_("div",tb,[...E[0]||(E[0]=[g("span",{class:"widget-loading__spinner","aria-hidden":"true"},null,-1),g("span",{class:"widget-loading__label"},"Loading",-1)])])):ae("",!0),(k(),it(Au(P.component),ki({ref_for:!0},P.props),null,16))],46,eb))),128))],34))}}),[["__scopeId","data-v-9017abee"]]),ob={key:0,class:"options-pop"},rb={class:"opt-section"},nb=["for"],sb=["id","min","max","step","value","onInput"],lb=["id","value","onChange"],ib=["value"],cb=["id","checked","onChange"],db=["id","value","onInput"],ub=["id","value","onInput"],fb={key:0,class:"opt-section"},gb=["for"],pb=["id","min","max","step","value","onInput"],hb=["id","value","onChange"],mb=["value"],vb=["id","checked","onChange"],bb=["id","value","onInput"],yb=["id","value","onInput"],wb={key:5,class:"colorlist"},kb=["value","onInput"],_b=["onClick"],xb={key:6,class:"multi"},Cb=["value","checked","onChange"],Sb={key:7,class:"taglist"},$b={key:0,class:"taglist__hint"},Tb={key:1,class:"taglist__hint"},Mb={class:"taglist__meta"},Ab=["value","checked","onChange"],Db={class:"taglist__label"},Eb={key:0,class:"taglist__count"},Lb=["id","value","onInput"],Nb={key:9,class:"filter-builder"},Ib=["value","onInput"],Bb=["value","onInput"],Ob=["value","onInput"],Pb=["onClick"],Fb=["onClick"],Hb={key:1,class:"opt-row opt-row--footer"},Wb=Ye(Ie({__name:"WidgetOptionsMenu",props:{entry:{},options:{},open:{type:Boolean},showAdvanced:{type:Boolean},context:{}},emits:["change","toggle","open-advanced"],setup(e,{emit:t}){const a=e,o=t,r=le({}),n=[{key:"titlePrefix",label:"Title prefix",type:"text"},{key:"showHeader",label:"Show title",type:"toggle"},{key:"cardBg",label:"Card background",type:"color",hint:"Pick a card fill; leave empty for default."},{key:"scale",label:"Scale",type:"select",options:[{value:"sm",label:"Small"},{value:"md",label:"Normal"},{value:"lg",label:"Large"},{value:"xl",label:"Extra large"}]},{key:"dense",label:"Dense mode",type:"toggle"}],s=D(()=>{var j,R;const F=new Set(n.map(Y=>Y.key)),C=((j=a.entry)==null?void 0:j.controls)||[],v=typeof((R=a.entry)==null?void 0:R.dynamicControls)=="function"?a.entry.dynamicControls(a.options||{},a.context||{}):[];return[...C,...v].filter(Y=>!F.has(Y.key))});De(()=>a.options,F=>{var v;const C=((v=a.entry)==null?void 0:v.defaultOptions)||{};r.value={...C,...F||{}}},{immediate:!0,deep:!0});const i=D({get:()=>!!a.open,set:F=>o("toggle",F)});function l(F,C){const v=Number(C.target.value);o("change",F,v)}function c(F,C){const v=C.target.value;o("change",F,v)}function d(F,C){const v=C.target.checked;o("change",F,v)}function p(F,C){const v=C.target.value;o("change",F,v)}function m(F,C,v){const b=v.target.checked,j=Array.isArray(r.value[F])?[...r.value[F]]:[],R=new Set(j);b?R.add(C):R.delete(C),o("change",F,Array.from(R))}function h(F){return Array.isArray(F==null?void 0:F.options)?F.options.map(C=>String((C==null?void 0:C.value)??"")).filter(Boolean):[]}function u(F,C){const v=x(F.key);return(Array.isArray(v)?v.map(j=>String(j)):h(F)).includes(String(C))}function f(F){return!Array.isArray(x(F.key))}function y(F,C,v){const b=v.target.checked,j=h(F),R=x(F.key),Y=Array.isArray(R)?R.map(se=>String(se)):j,ne=new Set(Y),X=String(C);b?ne.add(X):ne.delete(X);const oe=j.filter(se=>ne.has(se));o("change",F.key,oe)}function x(F){if(F==="scale")return r.value.scale??r.value.textSize;if(!F.includes("."))return r.value[F];const C=F.split(".");let v=r.value;for(const b of C){if(v==null)return;v=v[b]}return v}function S(F){const C=x(F);return Array.isArray(C)&&C.length?C:typeof C=="string"&&C.trim()?C.split(",").map(v=>v.trim()).filter(Boolean):O.slice(0,5)}function M(F,C,v){const b=v.target.value,j=[...S(F)];j[C]=b,o("change",F,j)}function T(F){const C=[...S(F),"#cccccc"];o("change",F,C)}const O=["#2563EB","#F97316","#10B981","#A855F7","#EC4899"];function I(F){const C=x(F);if(Array.isArray(C))return C.map(v=>({label:String((v==null?void 0:v.label)||""),labels:Array.isArray(v==null?void 0:v.labels)?v.labels.join(", "):String((v==null?void 0:v.labels)||""),assignees:Array.isArray(v==null?void 0:v.assignees)?v.assignees.join(", "):String((v==null?void 0:v.assignees)||"")}));if(typeof C=="string"&&C.trim())try{const v=JSON.parse(C);if(Array.isArray(v))return v.map(b=>({label:String((b==null?void 0:b.label)||""),labels:Array.isArray(b==null?void 0:b.labels)?b.labels.join(", "):String((b==null?void 0:b.labels)||""),assignees:Array.isArray(b==null?void 0:b.assignees)?b.assignees.join(", "):String((b==null?void 0:b.assignees)||"")}))}catch{return[]}return[]}function w(F){const C=[...I(F),{label:"",labels:"",assignees:""}];o("change",F,W(C))}function E(F,C){const v=I(F).filter((b,j)=>j!==C);o("change",F,W(v))}function P(F,C,v,b){const j=b.target.value,R=I(F).map((Y,ne)=>ne===C?{...Y,[v]:j}:Y);o("change",F,W(R))}function W(F){return F.map(C=>({label:C.label.trim(),labels:Z(C.labels),assignees:Z(C.assignees)}))}function Z(F){return F.split(",").map(C=>C.trim()).filter(Boolean)}return(F,C)=>(k(),_("div",{class:"options-wrapper",onKeydown:C[2]||(C[2]=dt(()=>{},["stop"]))},[g("button",{type:"button",class:"ghost",title:"Configure widget",onClick:C[0]||(C[0]=dt(v=>i.value=!i.value,["stop"]))},""),i.value?(k(),_("div",ob,[g("div",rb,[C[3]||(C[3]=g("div",{class:"opt-section__title"},"Layout & title",-1)),(k(),_(he,null,$e(n,v=>g("div",{key:v.key,class:"opt-row"},[g("label",{for:`opt-${v.key}`},H(v.label),9,nb),v.type==="number"?(k(),_("input",{key:0,id:`opt-${v.key}`,type:"number",min:v.min,max:v.max,step:v.step||1,value:x(v.key)??"",onInput:b=>l(v.key,b)},null,40,sb)):v.type==="select"?(k(),_("select",{key:1,id:`opt-${v.key}`,value:x(v.key),onChange:b=>c(v.key,b)},[(k(!0),_(he,null,$e(v.options||[],b=>(k(),_("option",{key:b.value,value:b.value},H(b.label),9,ib))),128))],40,lb)):v.type==="toggle"?(k(),_("input",{key:2,id:`opt-${v.key}`,type:"checkbox",checked:!!x(v.key),onChange:b=>d(v.key,b)},null,40,cb)):v.type==="text"?(k(),_("input",{key:3,id:`opt-${v.key}`,type:"text",value:x(v.key)??"",onInput:b=>p(v.key,b)},null,40,db)):v.type==="color"?(k(),_("input",{key:4,id:`opt-${v.key}`,type:"color",value:x(v.key)||"#000000",onInput:b=>p(v.key,b)},null,40,ub)):ae("",!0)])),64))]),s.value.length?(k(),_("div",fb,[C[5]||(C[5]=g("div",{class:"opt-section__title"},"Widget options",-1)),(k(!0),_(he,null,$e(s.value,v=>(k(),_("div",{key:v.key,class:"opt-row"},[g("label",{for:`opt-${v.key}`},H(v.label),9,gb),v.type==="number"?(k(),_("input",{key:0,id:`opt-${v.key}`,type:"number",min:v.min,max:v.max,step:v.step||1,value:x(v.key)??"",onInput:b=>l(v.key,b)},null,40,pb)):v.type==="select"?(k(),_("select",{key:1,id:`opt-${v.key}`,value:x(v.key),onChange:b=>c(v.key,b)},[(k(!0),_(he,null,$e(v.options||[],b=>(k(),_("option",{key:b.value,value:b.value},H(b.label),9,mb))),128))],40,hb)):v.type==="toggle"?(k(),_("input",{key:2,id:`opt-${v.key}`,type:"checkbox",checked:!!x(v.key),onChange:b=>d(v.key,b)},null,40,vb)):v.type==="text"?(k(),_("input",{key:3,id:`opt-${v.key}`,type:"text",value:x(v.key)??"",onInput:b=>p(v.key,b)},null,40,bb)):v.type==="color"?(k(),_("input",{key:4,id:`opt-${v.key}`,type:"color",value:x(v.key)||"#000000",onInput:b=>p(v.key,b)},null,40,yb)):v.type==="colorlist"?(k(),_("div",wb,[(k(!0),_(he,null,$e(S(v.key),(b,j)=>(k(),_("div",{key:`${v.key}-${j}`,class:"colorlist__item"},[g("input",{type:"color",value:b,onInput:R=>M(v.key,j,R)},null,40,kb)]))),128)),g("button",{type:"button",class:"ghost sm",onClick:b=>T(v.key)},"+",8,_b)])):v.type==="multiselect"?(k(),_("div",xb,[(k(!0),_(he,null,$e(v.options||[],b=>(k(),_("label",{key:`${v.key}-${b.value}`,class:"multi__item"},[g("input",{type:"checkbox",value:b.value,checked:Array.isArray(x(v.key))?x(v.key).includes(b.value):!1,onChange:j=>m(v.key,b.value,j)},null,40,Cb),g("span",null,H(b.label),1)]))),128))])):v.type==="taglist"?(k(),_("div",Sb,[v.hint?(k(),_("div",$b,H(v.hint),1)):f(v)?(k(),_("div",Tb," All tags are active by default. Uncheck to hide a filter. ")):ae("",!0),(k(!0),_(he,null,$e(v.options||[],b=>(k(),_("label",{key:`${v.key}-${b.value}`,class:"taglist__item"},[g("span",Mb,[g("input",{type:"checkbox",value:b.value,checked:u(v,b.value),onChange:j=>y(v,b.value,j)},null,40,Ab),g("span",Db,H(b.label),1)]),typeof b.count=="number"?(k(),_("span",Eb,H(b.count),1)):ae("",!0)]))),128))])):v.type==="textarea"?(k(),_("textarea",{key:8,id:`opt-${v.key}`,rows:"3",value:x(v.key)??"",onInput:b=>p(v.key,b)},null,40,Lb)):v.type==="filterbuilder"?(k(),_("div",Nb,[C[4]||(C[4]=g("div",{class:"filter-builder__hint"},[Fe(" Tags and assigned can be used independentlyleave one empty to ignore it. Use commas. Special assignees: "),g("code",null,"me"),Fe(", "),g("code",null,"unassigned"),Fe(". ")],-1)),(k(!0),_(he,null,$e(I(v.key),(b,j)=>(k(),_("div",{key:`${v.key}-row-${j}`,class:"filter-builder__row"},[g("input",{type:"text",class:"filter-builder__label",value:b.label,placeholder:"Filter label",onInput:R=>P(v.key,j,"label",R)},null,40,Ib),g("input",{type:"text",class:"filter-builder__input",value:b.labels,placeholder:"Tags (comma separated)",onInput:R=>P(v.key,j,"labels",R)},null,40,Bb),g("input",{type:"text",class:"filter-builder__input",value:b.assignees,placeholder:"Assigned (comma separated)",onInput:R=>P(v.key,j,"assignees",R)},null,40,Ob),g("button",{type:"button",class:"ghost sm",onClick:R=>E(v.key,j)},"",8,Pb)]))),128)),g("button",{type:"button",class:"ghost sm",onClick:b=>w(v.key)},"+ Add filter",8,Fb)])):ae("",!0)]))),128))])):ae("",!0),F.showAdvanced?(k(),_("div",Hb,[g("button",{type:"button",class:"link-btn",title:"Opens a full targets editor for this widget only. Use the reset inside to go back to global.",onClick:C[1]||(C[1]=dt(v=>o("open-advanced"),["stop"]))}," Advanced targets (widget only) ")])):ae("",!0)])):ae("",!0)],32))}}),[["__scopeId","data-v-adf460eb"]]),zb={key:0,class:"widget-toolbar-layer"},Rb={class:"widget-toolbar"},jb={class:"toolbar-title"},Ub={key:0,class:"toolbar-actions"},Vb={class:"toolbar-quick"},Kb={class:"toolbar-field"},qb=["value"],Gb={class:"toolbar-field"},Jb=["value"],Yb={class:"toolbar-field"},Zb=["value"],Xb={class:"toolbar-field toolbar-field--toggle"},Qb=["checked"],ey={class:"toolbar-field toolbar-field--toggle"},ty=["checked"],ay={key:1,class:"toolbar-actions"},oy=Ye(Ie({__name:"DashboardToolbar",props:{editable:{type:Boolean},selectedItem:{},openOptionsId:{},presetLabel:{},context:{}},emits:["select-first","move","cycle-width","cycle-height","remove","reset-preset","toggle-options","open-advanced","edit-options"],setup(e){const t=e,a=D(()=>{var d,p,m;const l=((p=(d=t.selectedItem)==null?void 0:d.props)==null?void 0:p.title)||"";if(l)return l;const c=t.selectedItem?Va[t.selectedItem.type]:null;return(c==null?void 0:c.label)||((m=t.selectedItem)==null?void 0:m.type)||"Widget"});function o(l){var c,d;return(d=(c=t.selectedItem)==null?void 0:c.options)==null?void 0:d[l]}function r(l){return Va[l]}function n(l){var c;return!!((c=Va[l])!=null&&c.configurable)}function s(l){return l==="quarter"?"":l==="half"?"":"1"}function i(l){return l==="s"?"S":l==="l"?"L":l==="xl"?"XL":"M"}return(l,c)=>(k(),it(gu,{to:"body"},[l.editable?(k(),_("div",zb,[g("div",Rb,[g("div",jb,[l.selectedItem?(k(),_(he,{key:0},[Fe(H(a.value),1)],64)):(k(),_(he,{key:1},[Fe("Click a widget to edit")],64))]),l.selectedItem?(k(),_("div",Ub,[g("button",{type:"button",class:"ghost",title:"Move earlier",onClick:c[0]||(c[0]=d=>l.$emit("move","up"))},""),g("button",{type:"button",class:"ghost",title:"Move later",onClick:c[1]||(c[1]=d=>l.$emit("move","down"))},""),g("button",{type:"button",class:"ghost",title:"Cycle width",onClick:c[2]||(c[2]=d=>l.$emit("cycle-width"))},H(s(l.selectedItem.layout.width)),1),g("button",{type:"button",class:"ghost",title:"Cycle height",onClick:c[3]||(c[3]=d=>l.$emit("cycle-height"))},H(i(l.selectedItem.layout.height)),1),g("div",Vb,[g("label",Kb,[c[15]||(c[15]=g("span",null,"Title",-1)),g("input",{type:"text",value:o("titlePrefix")||"",placeholder:"Prefix",onInput:c[4]||(c[4]=d=>l.$emit("edit-options",l.selectedItem.id,"titlePrefix",d.target.value))},null,40,qb)]),g("label",Gb,[c[16]||(c[16]=g("span",null,"Card",-1)),g("input",{type:"color",value:o("cardBg")||"#ffffff",onInput:c[5]||(c[5]=d=>l.$emit("edit-options",l.selectedItem.id,"cardBg",d.target.value))},null,40,Jb)]),g("label",Yb,[c[18]||(c[18]=g("span",null,"Scale",-1)),g("select",{value:o("scale")||"md",onChange:c[6]||(c[6]=d=>l.$emit("edit-options",l.selectedItem.id,"scale",d.target.value))},[...c[17]||(c[17]=[g("option",{value:"sm"},"Small",-1),g("option",{value:"md"},"Normal",-1),g("option",{value:"lg"},"Large",-1),g("option",{value:"xl"},"Extra large",-1)])],40,Zb)]),g("label",Xb,[g("input",{type:"checkbox",checked:o("showHeader")!==!1,onChange:c[7]||(c[7]=d=>l.$emit("edit-options",l.selectedItem.id,"showHeader",d.target.checked))},null,40,Qb),c[19]||(c[19]=g("span",null,"Show title",-1))]),g("label",ey,[g("input",{type:"checkbox",checked:!!o("dense"),onChange:c[8]||(c[8]=d=>l.$emit("edit-options",l.selectedItem.id,"dense",d.target.checked))},null,40,ty),c[20]||(c[20]=g("span",null,"Dense",-1))])]),l.selectedItem&&n(l.selectedItem.type)?(k(),it(Wb,{key:0,entry:r(l.selectedItem.type),options:l.selectedItem.options,open:l.openOptionsId===l.selectedItem.id,"show-advanced":l.selectedItem.type==="targets_v2",context:l.context,onToggle:c[9]||(c[9]=d=>l.$emit("toggle-options",l.selectedItem.id,d)),onOpenAdvanced:c[10]||(c[10]=d=>l.$emit("open-advanced",l.selectedItem.id)),onChange:c[11]||(c[11]=(d,p)=>l.$emit("edit-options",l.selectedItem.id,d,p))},null,8,["entry","options","open","show-advanced","context"])):ae("",!0),l.presetLabel?(k(),_("button",{key:1,type:"button",class:"ghost",title:"Reset widgets to preset",onClick:c[12]||(c[12]=d=>l.$emit("reset-preset"))}," Reset "+H(l.presetLabel),1)):ae("",!0),g("button",{type:"button",class:"ghost danger",title:"Remove widget",onClick:c[13]||(c[13]=d=>l.$emit("remove"))},"")])):(k(),_("div",ay,[g("button",{type:"button",class:"ghost",onClick:c[14]||(c[14]=d=>l.$emit("select-first"))},"Select first widget")]))])])):ae("",!0)]))}}),[["__scopeId","data-v-c1764b36"]]),ry={id:"opsdash-sidebar-pane-targets",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-targets"},ny={class:"target-config"},sy={class:"field"},ly=["value","aria-invalid"],iy={class:"field"},cy=["value","aria-invalid"],dy={class:"cat-header"},uy=["value","onInput"],fy=["disabled","onClick"],gy={class:"cat-fields"},py={class:"field"},hy=["value","aria-invalid","onInput"],my={class:"field"},vy=["value","onChange"],by={class:"field checkbox"},yy=["checked","onChange"],wy={class:"field color-field"},ky=["aria-expanded","aria-label","onClick"],_y=["id"],xy={class:"swatch-grid",role:"group","aria-label":"Preset colors"},Cy=["aria-label","onClick"],Sy={class:"custom-color"},$y=["value","onInput"],Ty={class:"target-section"},My={class:"field checkbox"},Ay=["checked"],Dy={class:"field"},Ey=["value"],Ly={class:"field"},Ny=["value","aria-invalid"],Iy={class:"field"},By=["value","aria-invalid"],Oy={class:"target-section"},Py={class:"field"},Fy=["value"],Hy={class:"field"},Wy=["value","aria-invalid"],zy={class:"field"},Ry=["value","aria-invalid"],jy={class:"target-section"},Uy={class:"field checkbox"},Vy=["checked"],Ky={class:"field checkbox"},qy=["checked"],Gy=Ye(Ie({__name:"SidebarTargetsPane",props:{targets:{},categoryOptions:{},totalTargetMessage:{},allDayHoursMessage:{},categoryTargetMessages:{},paceThresholdMessages:{},forecastMomentumMessage:{},forecastPaddingMessage:{},canAddCategory:{type:Boolean},colorPalette:{}},emits:["total-target-input","set-all-day-hours","set-category-label","remove-category","set-category-target","set-category-pace","set-category-weekend","set-category-color","add-category","set-include-weekend-total","set-pace-mode","set-threshold","set-forecast-method","set-forecast-momentum","set-forecast-padding","set-ui-option"],setup(e,{emit:t}){const a=e,{targets:o,categoryOptions:r,totalTargetMessage:n,allDayHoursMessage:s,categoryTargetMessages:i,paceThresholdMessages:l,forecastMomentumMessage:c,forecastPaddingMessage:d,canAddCategory:p,colorPalette:m}=Xd(a),h=t,u=D(()=>{var w;return M((w=m.value)==null?void 0:w[0])??"#2563EB"}),f=le(null);function y(w){const E=w.target;E!=null&&E.closest("[data-color-popover]")||S()}Tt(()=>{document.addEventListener("click",y)}),Ct(()=>{document.removeEventListener("click",y)});function x(w){if(f.value===w){S();return}f.value=w,ea(()=>{const E=document.getElementById(`opsdash-color-popover-${w}`);E==null||E.focus()})}function S(){f.value=null}function M(w){if(typeof w!="string")return null;const E=w.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(E))return null;if(E.length===4){const[,P,W,Z]=E;return`#${P}${P}${W}${W}${Z}${Z}`.toUpperCase()}return E.toUpperCase()}function T(w){return M(w==null?void 0:w.color)??u.value}function O(w,E){const P=M(E)??u.value;h("set-category-color",{id:w,color:P})}function I(w,E){const P=M(E)??u.value;h("set-category-color",{id:w,color:P}),S()}return(w,E)=>{var P,W,Z,F,C,v,b,j,R,Y,ne,X;return k(),_("div",ry,[E[36]||(E[36]=g("div",{class:"sb-title"},"Target Settings",-1)),g("div",ny,[g("div",sy,[E[14]||(E[14]=g("span",{class:"label"},"Total target (h)",-1)),g("input",{type:"number",value:L(o).totalHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!L(n),onInput:E[0]||(E[0]=oe=>w.$emit("total-target-input",oe.target.value))},null,40,ly),L(n)?(k(),_("div",{key:0,class:Ne(["input-message",(P=L(n))==null?void 0:P.tone])},H((W=L(n))==null?void 0:W.text),3)):ae("",!0)]),g("div",iy,[E[15]||(E[15]=g("span",{class:"label"},"All-day event (h per day)",-1)),g("input",{type:"number",value:L(o).allDayHours,min:"0",max:"24",step:"0.25","aria-invalid":!!L(s),onInput:E[1]||(E[1]=oe=>w.$emit("set-all-day-hours",oe.target.value))},null,40,cy),L(s)?(k(),_("div",{key:0,class:Ne(["input-message",(Z=L(s))==null?void 0:Z.tone])},H((F=L(s))==null?void 0:F.text),3)):ae("",!0)]),(k(!0),_(he,null,$e(L(r),oe=>{var se,fe;return k(),_("div",{class:"target-category",key:oe.id},[g("div",dy,[g("span",{class:"cat-color-indicator",style:Le({backgroundColor:T(oe)}),"aria-hidden":"true"},null,4),g("input",{class:"cat-name",type:"text",value:oe.label,placeholder:"Category name",onInput:ce=>w.$emit("set-category-label",{id:oe.id,label:ce.target.value})},null,40,uy),g("button",{class:"remove-cat",type:"button",disabled:L(r).length<=1,title:"Remove category",onClick:ce=>w.$emit("remove-category",oe.id)},"  ",8,fy)]),g("div",gy,[g("label",py,[E[16]||(E[16]=g("span",{class:"label"},"Target (h)",-1)),g("input",{type:"number",value:oe.targetHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!L(i)[oe.id],onInput:ce=>w.$emit("set-category-target",{id:oe.id,value:ce.target.value})},null,40,hy),L(i)[oe.id]?(k(),_("div",{key:0,class:Ne(["input-message",(se=L(i)[oe.id])==null?void 0:se.tone])},H((fe=L(i)[oe.id])==null?void 0:fe.text),3)):ae("",!0)]),g("label",my,[E[18]||(E[18]=g("span",{class:"label"},"Pace mode",-1)),g("select",{value:oe.paceMode||L(o).pace.mode,onChange:ce=>w.$emit("set-category-pace",{id:oe.id,mode:ce.target.value})},[...E[17]||(E[17]=[g("option",{value:"days_only"},"Days only",-1),g("option",{value:"time_aware"},"Time aware",-1)])],40,vy)]),g("label",by,[g("input",{type:"checkbox",checked:oe.includeWeekend,onChange:ce=>w.$emit("set-category-weekend",{id:oe.id,value:ce.target.checked})},null,40,yy),E[19]||(E[19]=g("span",null,"Weekend",-1))]),g("div",wy,[g("div",{class:"color-trigger-wrapper","data-color-popover":"",onClick:E[3]||(E[3]=dt(()=>{},["stop"]))},[g("button",{type:"button",class:"color-link","aria-expanded":f.value===oe.id,"aria-label":`Choose color for ${oe.label}`,onClick:ce=>x(oe.id)}," Color ",8,ky),f.value===oe.id?(k(),_("div",{key:0,class:"color-popover",id:`opsdash-color-popover-${oe.id}`,tabindex:"-1",onKeydown:E[2]||(E[2]=io(dt(ce=>S(),["prevent"]),["esc"]))},[g("div",xy,[(k(!0),_(he,null,$e(L(m),ce=>(k(),_("button",{key:`${oe.id}-swatch-${ce}`,type:"button",class:Ne(["color-swatch",{active:T(oe)===ce}]),style:Le({backgroundColor:ce}),"aria-label":`Use color ${ce}`,onClick:V=>I(oe.id,ce)},null,14,Cy))),128))]),g("label",Sy,[E[20]||(E[20]=g("span",null,"Custom",-1)),g("input",{class:"color-input",type:"color",value:T(oe),"aria-label":"Pick custom color",onInput:ce=>O(oe.id,ce.target.value)},null,40,$y)])],40,_y)):ae("",!0)])])])])}),128)),Ae(L(mt),{type:"tertiary",class:"add-category",disabled:!L(p),onClick:E[4]||(E[4]=oe=>w.$emit("add-category"))},{default:Je(()=>[...E[21]||(E[21]=[Fe(" Add category ",-1)])]),_:1},8,["disabled"]),g("div",Ty,[E[27]||(E[27]=g("div",{class:"section-title"},"Pace",-1)),g("label",My,[g("input",{type:"checkbox",checked:L(o).pace.includeWeekendTotal,onChange:E[5]||(E[5]=oe=>w.$emit("set-include-weekend-total",oe.target.checked))},null,40,Ay),E[22]||(E[22]=g("span",null,"Count weekend in total pace",-1))]),g("label",Dy,[E[24]||(E[24]=g("span",{class:"label"},"Mode",-1)),g("select",{value:L(o).pace.mode,onChange:E[6]||(E[6]=oe=>w.$emit("set-pace-mode",oe.target.value))},[...E[23]||(E[23]=[g("option",{value:"days_only"},"Days only",-1),g("option",{value:"time_aware"},"Time aware",-1)])],40,Ey)]),g("label",Ly,[E[25]||(E[25]=g("span",{class:"label"},"On track  gap (%)",-1)),g("input",{type:"number",value:L(o).pace.thresholds.onTrack,step:"0.1","aria-invalid":!!L(l).onTrack,onInput:E[7]||(E[7]=oe=>w.$emit("set-threshold",{key:"onTrack",value:oe.target.value}))},null,40,Ny),L(l).onTrack?(k(),_("div",{key:0,class:Ne(["input-message",(C=L(l).onTrack)==null?void 0:C.tone])},H((v=L(l).onTrack)==null?void 0:v.text),3)):ae("",!0)]),g("label",Iy,[E[26]||(E[26]=g("span",{class:"label"},"At risk  gap (%)",-1)),g("input",{type:"number",value:L(o).pace.thresholds.atRisk,step:"0.1","aria-invalid":!!L(l).atRisk,onInput:E[8]||(E[8]=oe=>w.$emit("set-threshold",{key:"atRisk",value:oe.target.value}))},null,40,By),L(l).atRisk?(k(),_("div",{key:0,class:Ne(["input-message",(b=L(l).atRisk)==null?void 0:b.tone])},H((j=L(l).atRisk)==null?void 0:j.text),3)):ae("",!0)])]),g("div",Oy,[E[32]||(E[32]=g("div",{class:"section-title"},"Forecast",-1)),g("label",Py,[E[29]||(E[29]=g("span",{class:"label"},"Primary method",-1)),g("select",{value:L(o).forecast.methodPrimary,onChange:E[9]||(E[9]=oe=>w.$emit("set-forecast-method",oe.target.value))},[...E[28]||(E[28]=[g("option",{value:"linear"},"Linear",-1),g("option",{value:"momentum"},"Momentum",-1)])],40,Fy)]),g("label",Hy,[E[30]||(E[30]=g("span",{class:"label"},"Momentum window (days)",-1)),g("input",{type:"number",value:L(o).forecast.momentumLastNDays,min:"1",max:"14",step:"1","aria-invalid":!!L(c),onInput:E[10]||(E[10]=oe=>w.$emit("set-forecast-momentum",oe.target.value))},null,40,Wy),L(c)?(k(),_("div",{key:0,class:Ne(["input-message",(R=L(c))==null?void 0:R.tone])},H((Y=L(c))==null?void 0:Y.text),3)):ae("",!0)]),g("label",zy,[E[31]||(E[31]=g("span",{class:"label"},"Padding (h)",-1)),g("input",{type:"number",value:L(o).forecast.padding,min:"0",step:"0.1","aria-invalid":!!L(d),onInput:E[11]||(E[11]=oe=>w.$emit("set-forecast-padding",oe.target.value))},null,40,Ry),L(d)?(k(),_("div",{key:0,class:Ne(["input-message",(ne=L(d))==null?void 0:ne.tone])},H((X=L(d))==null?void 0:X.text),3)):ae("",!0)])]),g("div",jy,[E[35]||(E[35]=g("div",{class:"section-title"},"Display",-1)),g("label",Uy,[g("input",{type:"checkbox",checked:L(o).ui.showCalendarCharts,onChange:E[12]||(E[12]=oe=>w.$emit("set-ui-option",{key:"showCalendarCharts",value:oe.target.checked}))},null,40,Vy),E[33]||(E[33]=g("span",null,"Show calendar charts",-1))]),g("label",Ky,[g("input",{type:"checkbox",checked:L(o).ui.showCategoryCharts,onChange:E[13]||(E[13]=oe=>w.$emit("set-ui-option",{key:"showCategoryCharts",value:oe.target.checked}))},null,40,qy),E[34]||(E[34]=g("span",null,"Show category charts",-1))])])])])}}}),[["__scopeId","data-v-1e606590"]]);function Jy(e,t){const{allowEmpty:a=!1}=t;if(e===""||e===null||e===void 0)return a?{value:null}:{value:null,error:"Enter a number"};const o=Number(e);if(!Number.isFinite(o))return{value:null,error:"Enter a valid number"};let r=o,n;if(typeof t.min=="number"&&r<t.min&&(r=t.min,n=ds(t)),typeof t.max=="number"&&r>t.max&&(r=t.max,n=ds(t)),typeof t.step=="number"&&t.step>0){const i=Zy(r,t.step);i!==r&&(r=i,n=ds(t))}const s=Fc(t);return typeof s=="number"&&(r=Number(r.toFixed(s))),{value:r,warning:n}}function Yy(e,t){const a=Jy(e,t),o=[];return a.error&&o.push({severity:"error",message:a.error}),a.warning&&o.push({severity:"warning",message:a.warning}),{value:a.value,issues:o}}function Zy(e,t){const a=Fc({step:t}),o=Math.round(e/t)*t;return typeof a=="number"?Number(o.toFixed(a)):o}function Fc(e){if(typeof e.decimals=="number")return e.decimals;if(typeof e.step=="number")return Xy(e.step)}function Xy(e){const t=e.toString();if(t.includes("e-")){const[,o]=t.split("e-");return Number(o)}const[,a=""]=t.split(".");return a.length}function ds(e){const t=[];return typeof e.min=="number"&&typeof e.max=="number"?t.push(`Allowed range ${e.min}  ${e.max}`):typeof e.min=="number"?t.push(`Minimum ${e.min}`):typeof e.max=="number"&&t.push(`Maximum ${e.max}`),typeof e.step=="number"&&e.step>0&&t.push(`step ${e.step}`),`Adjusted to allowed value (${t.join(", ")})`}function Qy(e,t,a="Enter a valid number"){const o=Yy(e,t),r=o.issues.find(i=>i.severity==="error"),n=o.issues.find(i=>i.severity==="warning");let s=null;return r||o.value===null?s={text:(r==null?void 0:r.message)??a,tone:"error"}:n&&(s={text:n.message,tone:"warning"}),{ok:!r&&o.value!==null,value:o.value,message:s}}function fo(e,t,a,o,r){const{ok:n,value:s,message:i}=Qy(e,t,r);return a(i),!n||s===null?!1:(o(s),!0)}const e1={key:0,class:"advanced-overlay",role:"dialog","aria-modal":"true","aria-label":"Targets configuration"},t1={class:"advanced-panel"},a1=Ye(Ie({__name:"DashboardAdvancedTargetsOverlay",props:{widgetId:{},widgets:{},contextTargetsConfig:{}},emits:["close","save","use-global","open-onboarding"],setup(e,{emit:t}){const a=e,o=t,r=le(null),n=le(null),s=le(null),i=le(null),l=le(null),c=Xa({onTrack:null,atRisk:null}),d=Xa({}),p=Dt(void 0);De(()=>a.widgetId,A=>{if(!A){r.value=null,y();return}const B=a.widgets.find(be=>be.id===A),q=(B==null?void 0:B.options)||{},re=q.useLocalConfig&&q.localConfig?Dt(q.localConfig):Dt(a.contextTargetsConfig);r.value=ua(re),y()},{immediate:!0});const m=D(()=>{var A;return((A=r.value)==null?void 0:A.categories)??[]}),h=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],u=D(()=>{const A=new Set,B=q=>{const re=O(q);re&&A.add(re)};return m.value.forEach(q=>B(q.color)),h.forEach(q=>A.add(q)),Array.from(A)}),f=D(()=>{const A=r.value;return A?I(A)!==null:!1});function y(){n.value=null,s.value=null,i.value=null,l.value=null,c.onTrack=null,c.atRisk=null,Object.keys(d).forEach(A=>{delete d[A]})}function x(){o("close")}function S(){!a.widgetId||!r.value||o("save",a.widgetId,ua(r.value))}function M(){a.widgetId&&o("use-global",a.widgetId)}function T(){o("open-onboarding","categories")}function O(A){if(typeof A!="string")return null;const B=A.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(B))return null;if(B.length===4){const[,q,re,be]=B;return`#${q}${q}${re}${re}${be}${be}`.toUpperCase()}return B.toUpperCase()}function I(A){const B=new Set;A.categories.forEach(q=>{(q.groupIds||[]).forEach(re=>{const be=Number(re);Number.isFinite(be)&&B.add(be)})});for(let q=1;q<=9;q++)if(!B.has(q))return q;return null}function w(){return`cat-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`}function E(A){const B=new Set;A.categories.forEach(q=>{const re=O(q==null?void 0:q.color);re&&B.add(re)});for(const q of h)if(!B.has(q))return q;return h[0]??null}function P(A){if(!r.value)return;const B=ua(r.value);A(B),r.value=B}function W(A,B){P(q=>{const re=q.categories.find(be=>be.id===A);re&&B(re)})}function Z(A){fo(A,{min:0,max:1e3,step:.5,decimals:2},B=>{n.value=B},B=>P(q=>{q.totalHours=B}))}function F(A){fo(A,{min:0,max:24,step:.25,decimals:2},B=>{s.value=B},B=>P(q=>{q.allDayHours=B}),"024 hours per day")}function C(A,B){fo(B,{min:0,max:1e3,step:.5,decimals:2},q=>{d[A]=q},q=>W(A,re=>{re.targetHours=q}))}function v(A,B){W(A,q=>{q.label=B.trim()||q.label})}function b(A,B){W(A,q=>{q.includeWeekend=B})}function j(A,B){const q=O(B);W(A,re=>{re.color=q??null})}function R(A,B){B!=="days_only"&&B!=="time_aware"||W(A,q=>{q.paceMode=B})}function Y(A){P(B=>{B.pace.includeWeekendTotal=A})}function ne(A){A!=="days_only"&&A!=="time_aware"||P(B=>{B.pace.mode=A})}function X(A,B){fo(B,{min:-100,max:100,step:.1,decimals:1},q=>{c[A]=q},q=>P(re=>{re.pace.thresholds[A]=q}))}function oe(A){const B=A==="momentum"?"momentum":"linear";P(q=>{q.forecast.methodPrimary=B})}function se(A){fo(A,{min:1,max:14,step:1,decimals:0},B=>{i.value=B},B=>P(q=>{q.forecast.momentumLastNDays=B}))}function fe(A){fo(A,{min:0,max:100,step:.1,decimals:1},B=>{l.value=B},B=>P(q=>{q.forecast.padding=B}))}function ce(A,B){P(q=>{q.ui||(q.ui={...p.ui}),q.ui[A]=B})}function V(){const A=r.value;if(!A)return;const B=I(A);B!==null&&P(q=>{const re=E(q);q.categories=[...q.categories,{id:w(),label:`Category ${q.categories.length+1}`,targetHours:0,includeWeekend:!0,paceMode:"days_only",color:re,groupIds:[B]}]})}function J(A){const B=r.value;!B||B.categories.length<=1||(P(q=>{q.categories=q.categories.filter(re=>re.id!==A)}),delete d[A])}return(A,B)=>A.widgetId&&r.value?(k(),_("div",e1,[g("div",t1,[g("div",{class:"overlay-header"},[B[7]||(B[7]=g("div",null,[g("div",{class:"overlay-title"},"Targets (this widget only)"),g("div",{class:"overlay-subtitle"},"Starts from global targets; saving keeps a local copy for this widget.")],-1)),g("button",{type:"button",class:"ghost danger",onClick:x,"aria-label":"Close"},"")]),Ae(Gy,{targets:r.value,"category-options":m.value,"total-target-message":n.value,"all-day-hours-message":s.value,"category-target-messages":d,"pace-threshold-messages":c,"forecast-momentum-message":i.value,"forecast-padding-message":l.value,"color-palette":u.value,"can-add-category":f.value,onTotalTargetInput:Z,onSetAllDayHours:F,onSetCategoryTarget:B[0]||(B[0]=({id:q,value:re})=>C(q,re)),onSetCategoryLabel:B[1]||(B[1]=({id:q,label:re})=>v(q,re)),onSetCategoryWeekend:B[2]||(B[2]=({id:q,value:re})=>b(q,re)),onSetCategoryPace:B[3]||(B[3]=({id:q,mode:re})=>R(q,re)),onSetCategoryColor:B[4]||(B[4]=({id:q,color:re})=>j(q,re)),onAddCategory:V,onRemoveCategory:J,onSetIncludeWeekendTotal:Y,onSetPaceMode:ne,onSetThreshold:B[5]||(B[5]=({key:q,value:re})=>X(q,re)),onSetForecastMethod:oe,onSetForecastMomentum:se,onSetForecastPadding:fe,onSetUiOption:B[6]||(B[6]=({key:q,value:re})=>ce(q,re))},null,8,["targets","category-options","total-target-message","all-day-hours-message","category-target-messages","pace-threshold-messages","forecast-momentum-message","forecast-padding-message","color-palette","can-add-category"]),g("div",{class:"overlay-actions"},[g("div",{class:"overlay-actions__left"},[g("button",{type:"button",class:"ghost",onClick:M},"Use global targets"),g("button",{type:"button",class:"ghost",onClick:T},"Edit via onboarding")]),g("div",{class:"overlay-actions__right"},[g("button",{type:"button",class:"ghost",onClick:x},"Cancel"),g("button",{type:"button",class:"ghost primary",onClick:S},"Save")])])])])):ae("",!0)}}),[["__scopeId","data-v-539a10f9"]]),o1=Ye(Ie({__name:"DashboardLayout",props:{widgets:{},context:{},editable:{type:Boolean},widgetTypes:{},presetLabel:{}},emits:["edit:width","edit:height","edit:remove","edit:move","edit:options","edit:add","edit:reorder","open:onboarding","reset:preset","select:cell"],setup(e,{expose:t,emit:a}){const o=e,r=a,n=le(null),s=le(null),i=le(null),l=D(()=>(o.widgets||[]).slice().sort((W,Z)=>(W.layout.order||0)-(Z.layout.order||0)).map(W=>{const Z=Qv(W,o.context);if(!Z)return null;const F=W.options||{};return{...Z,id:W.id,layout:W.layout,type:W.type,options:F}}).filter(Boolean)),c=D(()=>l.value.find(W=>W.id===i.value)||null),d=D(()=>o.widgetTypes||[]);De(()=>o.editable,W=>{W||(i.value=null,n.value=null,s.value=null)},{immediate:!0}),De(()=>l.value.map(W=>W.id).join("|"),()=>{i.value&&!l.value.find(W=>W.id===i.value)&&(i.value=null)});function p(W,Z){n.value=Z?W:null,!Z&&s.value===W&&(s.value=null)}function m(W){i.value=W,n.value=null}function h(){l.value.length&&(i.value=l.value[0].id)}function u(){i.value=null,n.value=null,s.value=null}function f(){i.value&&r("edit:width",i.value)}function y(){i.value&&r("edit:height",i.value)}function x(W){i.value&&r("edit:move",i.value,W)}function S(){i.value&&r("edit:remove",i.value)}function M(W){i.value=W,n.value=W,s.value=W}function T(){n.value=null,s.value=null}function O(W,Z){r("edit:options",W,"localConfig",Z),r("edit:options",W,"useLocalConfig",!0),T()}function I(W){r("edit:options",W,"useLocalConfig",!1),r("edit:options",W,"localConfig",null),T()}function w(W){T(),r("open:onboarding",W)}function E(){i.value&&(n.value=i.value)}function P(W){r("select:cell",W)}return t({openOptionsForSelected:E}),(W,Z)=>(k(),_("div",{class:Ne(["layout-wrapper",{"editable-mode":W.editable}]),onClick:dt(u,["self"])},[Ae(ab,{ordered:l.value,editable:W.editable,"selected-id":i.value,"widget-type-list":d.value,onSelect:m,onSelectCell:P,onAdd:Z[0]||(Z[0]=(F,C)=>r("edit:add",F,C)),onReorder:Z[1]||(Z[1]=(F,C)=>r("edit:reorder",F,C))},null,8,["ordered","editable","selected-id","widget-type-list"]),Ae(oy,{editable:W.editable,"selected-item":c.value,"open-options-id":n.value,"preset-label":W.presetLabel,context:W.context,onSelectFirst:h,onMove:x,onCycleWidth:f,onCycleHeight:y,onRemove:S,onResetPreset:Z[2]||(Z[2]=F=>r("reset:preset")),onToggleOptions:p,onOpenAdvanced:M,onEditOptions:Z[3]||(Z[3]=(F,C,v)=>r("edit:options",F,C,v))},null,8,["editable","selected-item","open-options-id","preset-label","context"]),Ae(a1,{"widget-id":s.value,widgets:W.widgets,"context-targets-config":W.context.targetsConfig,onClose:T,onSave:O,onUseGlobal:I,onOpenOnboarding:w},null,8,["widget-id","widgets","context-targets-config"])],2))}}),[["__scopeId","data-v-98fee2cd"]]);function r1(e){const t=le(""),a=le(""),o=le(!1),r=le([]),n=(c,d,p)=>c==="month"?`Month of ${d?d.slice(0,7):`-${p}`}`:`Week of ${d||`-${p}`}`,s=(c,d)=>{const p=c==="month"?"Notes for month starting":"Notes for week starting";return d?`${p} ${d}`:p};async function i(){var p,m,h;const c=await e.getJson(e.route("notes"),{range:e.range.value,offset:e.offset.value|0});t.value=String(((p=c==null?void 0:c.notes)==null?void 0:p.previous)??""),a.value=String(((m=c==null?void 0:c.notes)==null?void 0:m.current)??"");const d=Array.isArray((h=c==null?void 0:c.notes)==null?void 0:h.history)?c.notes.history:[];r.value=d.map((u,f)=>{const y=Number((u==null?void 0:u.offset)??f+1),x=String((u==null?void 0:u.from)??"").trim(),S=String((u==null?void 0:u.content)??"");if(!S.trim())return null;const M=n(e.range.value,x,y),T=s(e.range.value,x);return{id:`offset-${y}-${x||f}`,label:M,title:T,content:S,from:x||void 0,offset:y}}).filter(Boolean)}async function l(){try{o.value=!0,await e.postJson(e.route("notesSave"),{range:e.range.value,offset:e.offset.value|0,content:a.value??""}),e.notifySuccess("Notes saved"),await i()}catch(c){console.error(c),e.notifyError("Failed to save notes")}finally{o.value=!1}}return{notesPrev:t,notesCurrDraft:a,isSavingNote:o,notesHistory:r,fetchNotes:i,saveNotes:l}}let Xo=null,us=null,Hc=!1;function Wc(){var t;if(typeof document>"u")return null;const e=(t=document.getElementById("app"))==null?void 0:t.getAttribute("data-opsdash-theme-preference");return e==="auto"||e==="light"||e==="dark"?e:null}function n1(){if(!(typeof window>"u"))try{Xr(),s1()}catch(e){c1()&&console.warn("[opsdash] theme boot install failed",e)}}function s1(){if(Xo||us||Hc)return;const e=[];if(document.documentElement&&e.push(document.documentElement),document.body&&document.body!==document.documentElement&&e.push(document.body),e.length&&(Xo=new MutationObserver(()=>Xr()),e.forEach(t=>{Xo==null||Xo.observe(t,{attributes:!0,attributeFilter:["data-theme","class"]})})),window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>Xr();typeof t.addEventListener=="function"?(t.addEventListener("change",a),us=()=>t.removeEventListener("change",a)):typeof t.addListener=="function"&&(t.addListener(a),us=()=>{t.removeListener(a)})}window.addEventListener("oc:theme:changed",Xr),Hc=!0}function Xr(){const e=l1();if(!e)return;["icon","shortcut icon"].forEach(a=>{let o=document.querySelector(`link[rel="${a}"]`);o||(o=document.createElement("link"),o.rel=a,document.head.appendChild(o)),o.type="image/svg+xml",o.href=e})}function l1(){const e=fs()==="dark",t=i1(),a=t("favicon.svg");if(a)return a;if(e){const r=t("app-dark.svg");if(r)return r}const o=t(e?"app-dark.svg":"app.svg");return o||"/apps-extra/opsdash/img/favicon.svg"}function fs(){var o,r,n,s,i;const e=(o=document.documentElement)==null?void 0:o.getAttribute("data-theme");if(e==="dark"||e==="light")return e;const t=(r=document.body)==null?void 0:r.getAttribute("data-theme");if(t==="dark"||t==="light")return t;if((n=document.body)!=null&&n.classList.contains("theme--dark"))return"dark";if((s=document.body)!=null&&s.classList.contains("theme--light"))return"light";const a=(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: dark)");return a!=null&&a.matches?"dark":"light"}function i1(){const e=window;return t=>{var a;return typeof((a=e.OC)==null?void 0:a.imagePath)=="function"?e.OC.imagePath("opsdash",t):""}}function c1(){var t;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function d1(e){const t=le([]),a=le({}),o=le({}),r=le({}),n=le([]),s=le(!1),i=le(!1),l=le(null),c=le(""),d=le(""),p=le(""),m=Xa({}),h=le([]),u=le([]),f=le([]),y=le({}),x=le({}),S=le({}),M=le(Dt(da())),T=le(null),O=Wc()??"auto",I=le(O),w=le(jo()),E=le(Uo());let P=0;async function W(){var b,j,R,Y,ne,X,oe,se,fe,ce,V,J,A,B,q,re;const Z=++P;s.value=!0;const F={...o.value},C={...a.value};let v=!1;try{const be={range:e.range.value,offset:e.offset.value|0,save:!1},$=await e.getJson(e.route("load"),be);if(Z!==P){(b=e.isDebug)!=null&&b.call(e)&&console.warn("discarding stale load response",{currentSeq:Z,loadSeq:P});return}c.value=String(((j=$.meta)==null?void 0:j.uid)??""),d.value=String(((R=$.meta)==null?void 0:R.from)??""),p.value=String(((Y=$.meta)==null?void 0:Y.to)??""),i.value=!!((ne=$.meta)!=null&&ne.truncated),l.value=((X=$.meta)==null?void 0:X.limits)??null;const z=ve=>{const we={};return ve&&typeof ve=="object"&&Object.entries(ve).forEach(([Se,xe])=>{typeof xe=="string"&&xe.trim()!==""&&(we[String(Se)]=xe)}),we},N=Array.isArray($.calendars)?$.calendars:[],U=z((oe=$.colors)==null?void 0:oe.byId),G=z((se=$.colors)==null?void 0:se.byName),Q=N.map(ve=>{if(!ve||typeof ve!="object")return ve;const we={...ve},Se=String(we.id??""),xe=String(we.displayname??we.name??we.calendar??Se),Te=typeof we.color=="string"?we.color:"",Me=typeof we.color_src=="string"?we.color_src:"",Be=Se?U[Se]:"",Pe=xe?G[xe]:"",ze=Se?F[Se]:"",vt=xe?C[xe]:"",nt=ze||vt;let He=Te;return!He&&Be&&(He=Be),!He&&Pe&&(He=Pe),(!He||Me==="fallback")&&nt&&(He=nt),!He&&nt&&(He=nt),He&&(He!==Te&&(v=!0),we.color=He,Se&&(U[Se]=He),xe&&(G[xe]=He)),we});if(t.value=Q,a.value=G,o.value=U,T.value=$.onboarding?{...$.onboarding}:null,w.value=ts($.reportingConfig,w.value),E.value=as($.deckSettings,E.value),e.widgetTabs){const ve=e.widgetTabs.value||Yo("standard");e.widgetTabs.value=Zo($.widgets,ve)}const pe=()=>{var we,Se,xe,Te;let ve=!1;try{const Me=((we=y.value)==null?void 0:we.pie)||{},Be=Array.isArray(Me.ids)?Me.ids.map(Pe=>String(Pe??"")):[];if(Be.length){const Pe=Array.isArray(Me.colors)?Me.colors:[],ze=Be.map((vt,nt)=>o.value[vt]||Pe[nt]||"#60a5fa");y.value={...y.value||{},pie:{...Me,colors:ze}},ve=!0}}catch(Me){(Se=e.isDebug)!=null&&Se.call(e)&&console.warn("recompute pie colors failed",Me)}try{const Me=(xe=y.value)==null?void 0:xe.perDaySeries;if(Me&&Array.isArray(Me.series)){const Be=Me.series.map(Pe=>{const ze=String((Pe==null?void 0:Pe.id)??""),vt=o.value[ze]||Pe.color||"#60a5fa";return{...Pe,color:vt}});y.value={...y.value||{},perDaySeries:{labels:Me.labels,series:Be}},ve=!0}}catch(Me){(Te=e.isDebug)!=null&&Te.call(e)&&console.warn("recompute stacked colors failed",Me)}return ve},ge=((fe=$.groups)==null?void 0:fe.byId)??((ce=$.groups)==null?void 0:ce.byID)??((V=$.groups)==null?void 0:V.ids)??{},de={};t.value.forEach(ve=>{const we=String((ve==null?void 0:ve.id)??""),Se=Number((ge==null?void 0:ge[we])??0);de[we]=Number.isFinite(Se)?Math.max(0,Math.min(9,Math.trunc(Se))):0}),r.value=de;const ue=((J=$.targets)==null?void 0:J.week)??{},ye=((A=$.targets)==null?void 0:A.month)??{};x.value=ue&&typeof ue=="object"?ue:{},S.value=ye&&typeof ye=="object"?ye:{},M.value=Dt($.targetsConfig??da());const me=typeof $.themePreference=="string"?$.themePreference:"";if(I.value=me==="light"||me==="dark"?me:"auto",(B=e.isDebug)!=null&&B.call(e)&&(console.group("[opsdash] calendars/colors"),console.table((t.value||[]).map(ve=>({id:ve.id,name:ve.displayname,color:ve.color,raw:ve.color_raw,src:ve.color_src}))),console.log("colors.byId",o.value),console.log("colors.byName",a.value),$.calDebug&&console.log("server calDebug",$.calDebug),$.debug&&(console.group("[opsdash] server query debug"),console.log($.debug),console.groupEnd()),console.groupEnd()),t.value.length&&e.fetchDavColors&&t.value.filter(we=>!we.color||we.color_src==="fallback").length)try{const we=await e.fetchDavColors(c.value,t.value.map(xe=>String(xe.id)));let Se=!1;t.value=t.value.map(xe=>{const Te=we[xe.id];return Te&&Te!==xe.color&&(xe.color_src="dav"(xe).color_raw=Te,xe.color=Te,Se=!0),xe}),Object.entries(we).forEach(([xe,Te])=>{if(Te){const Me=String(Te);o.value[xe]=Me;const Be=t.value.find(ze=>String((ze==null?void 0:ze.id)??"")===xe);Be&&(Be.color=Me);const Pe=Be?String(Be.displayname??Be.name??""):"";Pe&&(a.value[Pe]=Me)}}),Se&&((q=e.isDebug)!=null&&q.call(e)&&console.log("[opsdash] dav colors applied",we),v=!0)}catch(we){(re=e.isDebug)!=null&&re.call(e)&&console.warn("dav colors failed",we)}n.value=Array.isArray($.selected)?$.selected.map(ve=>String(ve)):Array.isArray($.saved)?$.saved.map(ve=>String(ve)):[],e.userChangedSelection.value=!1,Object.assign(m,$.stats??{}),h.value=Array.isArray($.byCal)?$.byCal:[],u.value=Array.isArray($.byDay)?$.byDay:[],f.value=Array.isArray($.longest)?$.longest:[],y.value=$.charts??{},v&&pe(),await ea(),e.scheduleDraw(),await e.fetchNotes().catch(()=>{})}catch(be){console.error(be),e.notifyError("Failed to load data")}finally{s.value=!1}}return{calendars:t,colorsByName:a,colorsById:o,groupsById:r,selected:n,isLoading:s,isTruncated:i,truncLimits:l,uid:c,from:d,to:p,stats:m,byCal:h,byDay:u,longest:f,charts:y,targetsWeek:x,targetsMonth:S,targetsConfig:M,onboarding:T,load:W,themePreference:I,reportingConfig:w,deckSettings:E}}function u1(e){const t=le(!1);let a=null;function o(r=!0){a&&clearTimeout(a),a=setTimeout(async()=>{a=null;try{t.value=!0;const n=ua(e.targetsConfig.value),s={cals:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:n};e.themePreference&&(s.theme_preference=e.themePreference.value),e.reportingConfig&&(s.reporting_config=e.reportingConfig.value),e.deckSettings&&(s.deck_settings=e.deckSettings.value),e.widgetTabs&&(s.widgets=e.widgetTabs.value);const i=await e.postJson(e.route("persist"),s);Array.isArray(i.read)?e.selected.value=i.read.map(p=>String(p)):Array.isArray(i.saved)&&(e.selected.value=i.saved.map(p=>String(p)));const l=i.targets_config_read,c=i.targets_config_saved,d=g1(l??c,n);if(d&&(e.targetsConfig.value=d),e.themePreference){const p=f1(i.theme_preference_read??i.theme_preference_saved);p&&(e.themePreference.value=p)}if(e.reportingConfig){const p=ts(i.reporting_config_read??i.reporting_config_saved,e.reportingConfig.value);p&&(e.reportingConfig.value=p)}if(e.deckSettings){const p=as(i.deck_settings_read??i.deck_settings_saved,e.deckSettings.value);p&&(e.deckSettings.value=p)}if(e.widgetTabs){const p=i.widgets_read??i.widgets_saved??i.widgets,m=e.widgetTabs.value||Yo("standard");e.widgetTabs.value=Zo(p,m)}r&&e.onReload&&await e.onReload(),e.notifySuccess("Selection saved")}catch(n){console.error(n),e.notifyError("Failed to save selection")}finally{t.value=!1}},250)}return{queueSave:o,isSaving:t}}function f1(e){return e==="light"||e==="dark"||e==="auto"?e:null}function g1(e,t){if(!e)return;const a=JSON.parse(JSON.stringify(e)),o=Array.isArray(t==null?void 0:t.categories)?t.categories:[],r=new Map;return o.forEach(n=>{const s=String((n==null?void 0:n.id)??"");s&&r.set(s,n)}),Array.isArray(a.categories)&&(a.categories=a.categories.map(n=>{const s=String((n==null?void 0:n.id)??"");if(!s)return n;const i=r.get(s);return i&&((n==null?void 0:n.color)==null||n.color==="")&&typeof i.color=="string"&&i.color&&(n.color=i.color),n})),Dt(a)}function p1(e){const t=le([]),a=le(!1),o=le(!1),r=le(!1),n=le([]),s=le(null);async function i(){a.value=!0;try{const h=await e.getJson(e.route("presetsList"),{});t.value=Array.isArray(h==null?void 0:h.presets)?h.presets:[]}catch(h){console.error(h),e.notifyError("Failed to load presets")}finally{a.value=!1}}async function l(h){const u=h.trim();if(u===""){e.notifyError("Enter a preset name.");return}o.value=!0;try{const f={name:u,selected:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:e.targetsConfig.value,...e.widgetTabs?{widgets:e.widgetTabs.value}:{},...e.themePreference?{theme_preference:e.themePreference.value}:{},...e.reportingConfig?{reporting_config:e.reportingConfig.value}:{},...e.deckSettings?{deck_settings:e.deckSettings.value}:{}},y=await e.postJson(e.route("presetsSave"),f);t.value=Array.isArray(y==null?void 0:y.presets)?y.presets:t.value;const x=Array.isArray(y==null?void 0:y.warnings)?y.warnings:[];n.value=x,s.value=u,e.notifySuccess(`Profile "${u}" saved`)}catch(f){console.error(f),e.notifyError("Failed to save preset")}finally{o.value=!1}}function c(h){const u=Array.isArray(h==null?void 0:h.selected)?h.selected.map(x=>String(x)):[];e.selected.value=u;const f=h!=null&&h.groups&&typeof h.groups=="object"?h.groups:{};e.groupsById.value={...f},e.targetsWeek.value=h!=null&&h.targets_week&&typeof h.targets_week=="object"?h.targets_week:{},e.targetsMonth.value=h!=null&&h.targets_month&&typeof h.targets_month=="object"?h.targets_month:{};const y=h!=null&&h.targets_config&&typeof h.targets_config=="object"?Dt(h.targets_config):ua(e.targetsConfig.value);if(e.targetsConfig.value=y,e.themePreference&&(h!=null&&h.theme_preference)){const x=h.theme_preference;e.setThemePreference?e.setThemePreference(x,{persist:!1}):e.themePreference.value=x}if(e.reportingConfig&&(h!=null&&h.reporting_config)&&(e.reportingConfig.value=ts(h.reporting_config,e.reportingConfig.value)),e.deckSettings&&(h!=null&&h.deck_settings)&&(e.deckSettings.value=as(h.deck_settings,e.deckSettings.value)),e.widgetTabs&&(h!=null&&h.widgets)){const x=e.widgetTabs.value||Yo("standard");e.widgetTabs.value=Zo(h.widgets,x)}e.userChangedSelection.value=!1}async function d(h){const u=h.trim();if(u!==""){r.value=!0;try{const f=await e.getJson(e.route("presetsLoad",u),{}),y=(f==null?void 0:f.preset)??{},x=Array.isArray(y==null?void 0:y.warnings)?y.warnings:Array.isArray(f==null?void 0:f.warnings)?f.warnings:[];if(x.length){const S=`Some items in the saved profile are no longer available:

${x.map(M=>` ${M}`).join(`
`)}

Apply the remaining values?`;if(!window.confirm(S)){n.value=x,r.value=!1;return}}c(y),n.value=x,s.value=u,e.notifySuccess(`Profile "${u}" applied`),e.queueSave(!0),i().catch(S=>console.warn("[opsdash] refresh presets after load failed",S))}catch(f){console.error(f),e.notifyError("Failed to load preset")}finally{r.value=!1}}}async function p(h){const u=h.trim();if(u!=="")try{const f=await e.deleteJson(e.route("presetsDelete",u));t.value=Array.isArray(f==null?void 0:f.presets)?f.presets:t.value,e.notifySuccess(`Profile "${u}" deleted`),s.value===u&&(s.value=null)}catch(f){console.error(f),e.notifyError("Failed to delete preset")}}function m(){n.value=[]}return{presets:t,presetsLoading:a,presetSaving:o,presetApplying:r,presetWarnings:n,lastLoadedPreset:s,refreshPresets:i,savePreset:l,loadPreset:d,deletePreset:p,clearPresetWarnings:m}}function h1(){let e=null;function t(){typeof window>"u"||typeof window.requestAnimationFrame!="function"||(e!==null&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(()=>{e=null,window.dispatchEvent(new Event("resize"))}))}return Ct(()=>{e!==null&&typeof window<"u"&&typeof window.cancelAnimationFrame=="function"&&(window.cancelAnimationFrame(e),e=null)}),{scheduleDraw:t}}const m1={load:"/apps/opsdash/overview/load",persist:"/apps/opsdash/overview/persist",notes:"/apps/opsdash/overview/notes",notesSave:"/apps/opsdash/overview/notes",presetsList:"/apps/opsdash/overview/presets",presetsSave:"/apps/opsdash/overview/presets",presetsLoad:"/apps/opsdash/overview/presets",presetsDelete:"/apps/opsdash/overview/presets",ping:"/apps/opsdash/overview/ping"};function v1(){var t,a;const e=typeof window<"u"?window:{};return e.OC&&(e.OC.webroot||((a=(t=e.OC).getRootPath)==null?void 0:a.call(t)))||e._oc_webroot||""}function b1(){const e=D(()=>v1());function t(s,i){const l=typeof window<"u"?window:{},c=m1[s];if(s==="presetsLoad"||s==="presetsDelete"){const d=`${c}/${encodeURIComponent(String(i??""))}`;return l.OC&&typeof l.OC.generateUrl=="function"?l.OC.generateUrl(d):`${e.value}${d}`}return l.OC&&typeof l.OC.generateUrl=="function"?l.OC.generateUrl(c):`${e.value}${c}`}function a(s){const i=new URLSearchParams;return Object.entries(s||{}).forEach(([l,c])=>{Array.isArray(c)?c.forEach(d=>i.append(l,String(d))):c!=null&&i.set(l,String(c))}),i.toString()}async function o(s,i){const l=a(i),c=l?`${s}${s.includes("?")?"&":"?"}${l}`:s,d=await fetch(c,{method:"GET",credentials:"same-origin"});if(!d.ok)throw new Error(`HTTP ${d.status}`);return await d.json()}async function r(s,i){var m;const l=typeof window<"u"?window:{},c=((m=l.OC)==null?void 0:m.requestToken)||l.oc_requesttoken||"",d={"Content-Type":"application/json"};c&&(d.requesttoken=c);const p=await fetch(s,{method:"POST",credentials:"same-origin",headers:d,body:JSON.stringify(i||{})});if(!p.ok)throw new Error(`HTTP ${p.status}`);return await p.json()}async function n(s){var m;const i=typeof window<"u"?window:{},l=((m=i.OC)==null?void 0:m.requestToken)||i.oc_requesttoken||"",c={};l&&(c.requesttoken=l);const d=await fetch(s,{method:"DELETE",credentials:"same-origin",headers:c});if(!d.ok)throw new Error(`HTTP ${d.status}`);const p=await d.text();return p?JSON.parse(p):{}}return{route:t,getJson:o,postJson:r,deleteJson:n,root:e}}function zc(e){const t=typeof document<"u"?document.getElementById("app"):null;if(!t||!t.dataset)return"";const a=t.dataset;return a?String(a[e]??""):""}function y1(e){const t=le(0),a=D(()=>{var p;const l=[],c=typeof window<"u"?window:{};try{if((p=c.OC)!=null&&p.imagePath){const m=c.OC.imagePath("opsdash","app.svg");m&&l.push(m)}}catch{}const d=e.root.value;return l.push(`${d}/apps/opsdash/img/app.svg`),l.push(`${d}/apps-extra/opsdash/img/app.svg`),l.push(`${d}/apps-writable/opsdash/img/app.svg`),l}),o=D(()=>a.value[Math.min(t.value,a.value.length-1)]||"");function r(){t.value+1<a.value.length&&t.value++}const n=le(zc("opsdashVersion")||(e.pkgVersion?String(e.pkgVersion):"")),s=le(zc("opsdashChangelog"));async function i(){if(!(n.value&&s.value))try{const l=await e.getJson(e.pingUrl(),{});!n.value&&typeof(l==null?void 0:l.version)=="string"&&(n.value=l.version),!s.value&&typeof(l==null?void 0:l.changelog)=="string"&&(s.value=l.changelog)}catch{}}return i(),{iconSrc:o,onIconError:r,appVersion:n,changelogUrl:s}}function w1(e){function t(o){const r=typeof window<"u"?window:{};return r.OC&&typeof r.OC.generateUrl=="function"?r.OC.generateUrl(`/apps/calendar/timeGridDay/${o}`):`${e.root.value}/index.php/apps/calendar/timeGridDay/${o}`}async function a(o,r){var l,c,d;const n={};if(!o)return n;const s=((l=window.OC)==null?void 0:l.requestToken)||window.oc_requesttoken||"",i=e.root.value;for(const p of r)try{const m=`${i}/remote.php/dav/calendars/${encodeURIComponent(o)}/${encodeURIComponent(p)}/`,h=`<?xml version="1.0" encoding="UTF-8"?>
<d:propfind xmlns:d="DAV:" xmlns:ical="http://apple.com/ns/ical/">
  <d:prop><ical:calendar-color/></d:prop>
</d:propfind>`;(c=e.isDebug)!=null&&c.call(e)&&console.log("[opsdash] PROPFIND",{url:m,id:p});const u=await fetch(m,{method:"PROPFIND",credentials:"same-origin",headers:{Depth:"0","Content-Type":"application/xml",requesttoken:s},body:h});if(!u.ok)continue;const f=await u.text();(d=e.isDebug)!=null&&d.call(e)&&console.log("[opsdash] PROPFIND response",{id:p,status:u.status,length:f.length,sample:f.slice(0,400)});const y=f.match(/<[^>]*calendar-color[^>]*>(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{8}|rgb\([^<]+\))<\/[^>]*calendar-color>/i);y&&(n[p]=y[1])}catch{}return n}return{calendarDayLink:t,fetchDavColors:a}}function k1(e){const t=D(()=>{var r,n;return C1({perDaySeries:(r=e.charts.value)==null?void 0:r.perDaySeries,forecastMode:((n=e.activityCardConfig.value)==null?void 0:n.forecastMode)??"total",targetsConfig:e.targetsConfig.value,currentTargets:e.currentTargets.value,calendarCategoryMap:e.calendarCategoryMap.value})}),a=D(()=>{var r;return{pie:((r=e.charts.value)==null?void 0:r.pie)||null,stacked:t.value}}),o=D(()=>{var y,x;const r={},n=(y=e.charts.value)==null?void 0:y.pie,s=(x=e.charts.value)==null?void 0:x.perDaySeries,i=t.value||s,l=n&&Array.isArray(n.data)&&Array.isArray(n.ids),c=i&&Array.isArray(i.series)&&Array.isArray(i.labels),d=e.calendarCategoryMap.value,p=l?(n.ids||[]).map(S=>String(S??"")):[],m=l?(n.labels||[]).map(S=>String(S??"")):[],h=l?(n.data||[]).map(S=>Number(S)||0):[],u=l?n.colors||[]:[],f=c?i.series:[];return e.calendarGroups.value.forEach(S=>{const M=[];l&&p.forEach((w,E)=>{d[w]===S.id&&M.push(E)});const T=M.length?{ids:M.map(w=>p[w]),labels:M.map(w=>m[w]),data:M.map(w=>h[w]),colors:M.map(w=>{var E;return u[w]||((E=e.colorsById.value)==null?void 0:E[p[w]])||"#60a5fa"})}:null,O=c?f.filter(w=>d[String((w==null?void 0:w.id)??"")]===S.id):[],I=O.length?{labels:i.labels,series:O}:null;r[S.id]={pie:T,stacked:I}}),r});return{calendarChartData:a,categoryChartsById:o}}const _1=/^\d{4}-\d{2}-\d{2}$/,x1="__uncategorized__";function C1(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const a=t.labels.map(f=>String(f??"")),o=t.series.map(f=>{const y=String((f==null?void 0:f.id)??"");return{...f,id:y,name:String((f==null?void 0:f.name)??(f==null?void 0:f.label)??y),color:String((f==null?void 0:f.color)??""),data:a.map((x,S)=>{var T;const M=Number(((T=f==null?void 0:f.data)==null?void 0:T[S])??0);return Number.isFinite(M)?Math.max(0,M):0})}}),r=S1(e.forecastMode),n=$1(new Date),s=a.map(f=>_1.test(f)&&f>n),i=[];if(s.forEach((f,y)=>{f&&i.push(y)}),!i.length||r==="off")return{labels:a,series:o};const l=e.targetsConfig??da(),c=M1(e.currentTargets),d=e.calendarCategoryMap??{},p=i.length,m=new Map;o.forEach(f=>{let y=0;f.data.forEach((x,S)=>{s[S]||(y+=Math.max(0,x))}),m.set(f.id,y)});const h=Array.from(m.values()).reduce((f,y)=>f+y,0),u=new Map;if(o.forEach(f=>{u.set(f.id,T1(a.length))}),r==="total"){const f=Math.max(0,Number(l.totalHours??0)),y=Math.max(0,f-h);if(y>1e-4){const x=y/p,S=o.map(T=>T.id),M=Rc(S,m,c);S.forEach(T=>{const O=M[T]??0;if(O<=0)return;const I=u.get(T);I&&i.forEach(w=>{I[w]=Qr(x*O)})})}}else if(r==="calendar")o.forEach(f=>{const y=c[f.id]??0;if(y<=0)return;const x=Math.max(0,m.get(f.id)??0),S=Math.max(0,y-x);if(S<=1e-4)return;const M=S/p,T=u.get(f.id);T&&i.forEach(O=>{T[O]=Qr(M)})});else if(r==="category"){const f=new Set,y=Array.isArray(l.categories)?l.categories:[],x=new Map;y.forEach(M=>{x.set(String(M.id),Math.max(0,Number(M.targetHours??0)))});const S=new Map;o.forEach(M=>{const T=d==null?void 0:d[M.id],O=T?String(T):x1;S.has(O)||S.set(O,[]),S.get(O).push(M.id)}),S.forEach((M,T)=>{if(!M.length)return;const O=x.get(T)??0;if(O<=0)return;const I=M.reduce((Z,F)=>Z+Math.max(0,m.get(F)??0),0),w=Math.max(0,O-I);if(w<=1e-4)return;const E=w/p,P={};M.forEach(Z=>{P[Z]=c[Z]??0});const W=Rc(M,m,P);M.forEach(Z=>{const F=W[Z]??0;if(F<=0)return;const C=u.get(Z);C&&(i.forEach(v=>{C[v]=Qr(E*F)}),f.add(Z))})}),o.forEach(M=>{if(f.has(M.id))return;const T=c[M.id]??0;if(T<=0)return;const O=Math.max(0,m.get(M.id)??0),I=Math.max(0,T-O);if(I<=1e-4)return;const w=I/p,E=u.get(M.id);E&&i.forEach(P=>{E[P]=Qr(w)})})}return o.forEach(f=>{const y=u.get(f.id);y&&y.some(x=>x>1e-4)&&(f.forecast=y)}),{labels:a,series:o}}function S1(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function $1(e){const t=e.getFullYear(),a=`${e.getMonth()+1}`.padStart(2,"0"),o=`${e.getDate()}`.padStart(2,"0");return`${t}-${a}-${o}`}function T1(e){return Array.from({length:e},()=>0)}function Qr(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function M1(e){const t={};return e&&Object.entries(e).forEach(([a,o])=>{const r=Number(o);Number.isFinite(r)&&r>0&&(t[String(a)]=r)}),t}function Rc(e,t,a){const o={},r=e.reduce((i,l)=>i+Math.max(0,t.get(l)??0),0);if(r>1e-4)return e.forEach(i=>{const l=Math.max(0,t.get(i)??0);o[i]=l/r}),o;const n=e.reduce((i,l)=>i+Math.max(0,(a==null?void 0:a[l])??0),0);if(n>1e-4)return e.forEach(i=>{const l=Math.max(0,(a==null?void 0:a[i])??0);o[i]=l/n}),o;const s=e.length?1/e.length:0;return e.forEach(i=>{o[i]=s}),o}const _a="__uncategorized__",jc="Unassigned";function A1(e){const t=D(()=>{var d;const c=(d=e.targetsConfig.value)==null?void 0:d.categories;return Array.isArray(c)?c:[]}),a=D(()=>{const c={};return t.value.forEach(d=>{c[String(d.id)]=d.label||String(d.id)}),c}),o=D(()=>{var p;const c=new Map;return(((p=e.targetsSummary.value)==null?void 0:p.categories)||[]).forEach(m=>c.set(String(m.id),m)),c}),r=D(()=>{const c=new Map;return t.value.forEach(d=>{(Array.isArray(d.groupIds)?d.groupIds:[]).forEach(m=>{const h=Math.max(0,Math.min(9,Math.trunc(Number(m)||0)));c.set(h,String(d.id))})}),c}),n=D(()=>{var p;const c=e.calendars.value;if(!Array.isArray(c))return(p=e.isDebug)!=null&&p.call(e)&&console.warn("[opsdash] calendars not array",c),{};const d={};return c.forEach(m=>{var f;const h=String((m==null?void 0:m.id)??"");if(!h)return;const u=((f=e.colorsById.value)==null?void 0:f[h])||String((m==null?void 0:m.color)||"");d[h]={name:String((m==null?void 0:m.displayname)||(m==null?void 0:m.name)||(m==null?void 0:m.calendar)||h),color:u||void 0}}),d}),s=D(()=>{var u;const c={},d=r.value,p=e.groupsById.value||{},m=f=>{const y=p==null?void 0:p[f],x=Math.max(0,Math.min(9,Math.trunc(Number(y)||0))),S=d.get(x);c[f]=S||_a},h=e.calendars.value;return Array.isArray(h)?(h.forEach(f=>{const y=String((f==null?void 0:f.id)??"");y&&m(y)}),(e.selected.value||[]).forEach(f=>{const y=String(f??"");y&&(c[y]||m(y))}),c):((u=e.isDebug)!=null&&u.call(e)&&console.warn("[opsdash] calendarCategoryMap: calendars not array",h),c)}),i=D(()=>{const c=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"],d={};let p=0;const m=h=>{const u=String((h==null?void 0:h.id)??"");if(!u)return;if(d[u])return d[u];const f=typeof(h==null?void 0:h.color)=="string"&&h.color?h.color:void 0;if(f)return d[u]=f,f;const y=Object.entries(s.value).filter(([,S])=>S===u).map(([S])=>S);for(const S of y){const M=n.value[S];if(M!=null&&M.color)return d[u]=M.color,M.color}const x=c[p%c.length];return p+=1,d[u]=x,x};return t.value.forEach(h=>m(h)),Object.values(s.value||{}).some(h=>h===_a)&&m({id:_a}),d}),l=D(()=>{var O,I,w,E,P,W,Z,F,C,v;const c=[],d=s.value,p=o.value,m=e.byCal.value;if(!Array.isArray(m))return(O=e.isDebug)!=null&&O.call(e)&&console.warn("[opsdash] aggregateCategoryRows: byCal not array",m),c;const h=new Map;m.forEach(b=>{const j=String((b==null?void 0:b.id)??(b==null?void 0:b.calendar_id)??(b==null?void 0:b.calendar)??"");if(!j)return;const R=d[j]||_a;h.has(R)||h.set(R,[]),h.get(R).push({...b,calendarId:j})}),(I=e.isDebug)!=null&&I.call(e)&&console.log("[opsdash] aggregateCategoryRows",{rowsSourceIsArray:Array.isArray(m),rowsSourceLength:m.length,byCat:h,assignments:d});const u=((E=(w=e.targetsSummary.value)==null?void 0:w.total)==null?void 0:E.daysLeft)??0,f=((W=(P=e.targetsSummary.value)==null?void 0:P.total)==null?void 0:W.calendarPercent)??0,y=((F=(Z=e.targetsSummary.value)==null?void 0:Z.total)==null?void 0:F.paceMode)??((v=(C=e.targetsConfig.value)==null?void 0:C.pace)==null?void 0:v.mode)??"days_only",x=b=>Math.round(b*100)/100,S=e.currentTargets.value||{},M=(b,j,R)=>{const Y=R.reduce((J,A)=>{const B=Number(S[A.calendarId]??0);return Number.isFinite(B)?J+Math.max(0,B):J},0),ne=R.reduce((J,A)=>{const B=Number((A==null?void 0:A.total_hours)??(A==null?void 0:A.hours)??0);return Number.isFinite(B)?J+Math.max(0,B):J},0),X=Y>0?Math.max(0,Math.min(100,ne/Y*100)):0,oe=ne-Y,se=Math.max(0,Y-ne),fe=Y<=0?"none":X>=100?"done":oe>=0?"on_track":"behind",ce=fe==="done"?"Done":fe==="on_track"?"On Track":fe==="behind"?"Behind":"",V=u>0?se/u:0;return{id:b,label:j,actualHours:x(ne),targetHours:x(Y),percent:X,deltaHours:x(oe),remainingHours:x(se),needPerDay:x(V),daysLeft:u,calendarPercent:Math.max(0,Math.min(100,f)),gap:x(X-f),status:fe,statusLabel:ce,includeWeekend:!0,paceMode:y}};if(t.value.map(b=>String(b.id)).forEach(b=>{const j=a.value[b]||b,R=h.get(b)||[],Y=p.get(b)||M(b,j,R);c.push({id:b,label:j,rows:R,summary:Y,color:i.value[b]})}),h.has(_a)){const b=h.get(_a)||[];c.push({id:_a,label:jc,rows:b,summary:M(_a,jc,b),color:i.value[_a]})}return c});return{categoryConfigList:t,categoryLabelById:a,categoryColorMap:i,calendarCategoryMap:s,calendarGroups:l}}function gs(e){const t=Number(e);return Number.isFinite(t)?Math.round(t):0}function ut(e){const t=Number(e);return Number.isFinite(t)?t:null}function go(e){if(e==null)return null;const t=String(e).trim();return t===""?null:t}function D1(e){const t=D(()=>{var M;const u=(M=e.charts.value)==null?void 0:M.pie;if(!u||!Array.isArray(u.data)||!Array.isArray(u.labels))return[];const f=u.data.map(T=>Number(T)||0),y=u.labels.map(T=>String(T||"")),x=f.reduce((T,O)=>T+Math.max(0,O),0);if(x<=0)return[];const S=f.map((T,O)=>({name:y[O]||"",value:Math.max(0,T)}));return S.sort((T,O)=>O.value-T.value),S.slice(0,3).map(T=>({name:T.name,share:T.value/x*100}))}),a=D(()=>{var f;if(t.value.length)return t.value.map(y=>`${y.name} ${Vc(y.share)}`).join(", ");const u=(f=e.stats)==null?void 0:f.top_calendar;if(u&&u.calendar){const y=Number(u.share??0);return`${u.calendar} ${Vc(y)}`}return""}),o=D(()=>{var u;return e.selected.value.length||(((u=e.calendars.value)==null?void 0:u.length)??0)}),r=D(()=>(e.byDay.value||[]).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),n=D(()=>{const u=r.value.map(f=>Number(f)||0);return e.activeDayMode.value==="active"?u.filter(f=>f>0):u}),s=D(()=>(e.byDay.value||[]).filter(u=>{const f=Uc(String(u==null?void 0:u.date));return f>=1&&f<=5}).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),i=D(()=>(e.byDay.value||[]).filter(u=>{const f=Uc(String(u==null?void 0:u.date));return f===0||f===6}).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),l=D(()=>e.activeDayMode.value==="active"?s.value.filter(u=>u>0):s.value),c=D(()=>e.activeDayMode.value==="active"?i.value.filter(u=>u>0):i.value),d=D(()=>{var y,x,S,M;const u=((y=e.stats)==null?void 0:y.balance_index)??((x=e.stats)==null?void 0:x.balanceIndex)??((M=(S=e.stats)==null?void 0:S.balance_overview)==null?void 0:M.index),f=Number(u);return Number.isFinite(f)?f:null}),p=D(()=>{var u,f,y,x;return{rangeLabel:e.rangeLabel.value,rangeStart:e.rangeStart.value,rangeEnd:e.rangeEnd.value,offset:e.offset.value,totalHours:Number(((u=e.stats)==null?void 0:u.total_hours)??0),avgDay:ps(n.value),avgEvent:Number(((f=e.stats)==null?void 0:f.avg_per_event)??0),medianDay:hs(n.value),busiest:((y=e.stats)==null?void 0:y.busiest_day)??null,workdayAvg:ps(l.value),workdayMedian:hs(l.value),weekendAvg:ps(c.value),weekendMedian:hs(c.value),weekendShare:((x=e.stats)==null?void 0:x.weekend_share)??null,activeCalendars:o.value,calendarSummary:a.value,balanceIndex:d.value,delta:(()=>{var M;const S=(M=e.stats)==null?void 0:M.delta;return!S||typeof S!="object"?null:{totalHours:ut(S.total_hours)??0,avgPerDay:ut(S.avg_per_day)??0,avgPerEvent:ut(S.avg_per_event)??0,events:gs(S.events)}})(),topCategory:e.topCategory.value?{label:e.topCategory.value.label,actualHours:e.topCategory.value.summary.actualHours,targetHours:e.topCategory.value.summary.targetHours,percent:e.topCategory.value.summary.percent,statusLabel:e.topCategory.value.summary.statusLabel,status:e.topCategory.value.summary.status,color:e.topCategory.value.color}:null}}),m=D(()=>{const u=e.stats,f=u==null?void 0:u.delta,y=ut((f==null?void 0:f.weekend_share)??(f==null?void 0:f.weekendShare)),x=ut((f==null?void 0:f.evening_share)??(f==null?void 0:f.eveningShare)),S=y!=null||x!=null?{weekendShare:y,eveningShare:x}:null;return{rangeLabel:e.rangeLabel.value,events:gs(u.events),activeDays:ut(u.active_days),typicalStart:go(u.typical_start),typicalEnd:go(u.typical_end),weekendShare:ut(u.weekend_share),eveningShare:ut(u.evening_share),delta:S,earliestStart:go(u.earliest_start),latestEnd:go(u.latest_end),overlapEvents:ut(u.overlap_events),longestSession:ut(u.longest_session),lastDayOff:go(u.last_day_off),lastHalfDayOff:go(u.last_half_day_off)}}),h=D(()=>{var f;const u=(f=e.stats)==null?void 0:f.day_off_trend;return Array.isArray(u)?u.map(y=>{const x=Number((y==null?void 0:y.totalDays)??(y==null?void 0:y.total_days)??0),S=Number((y==null?void 0:y.daysOff)??(y==null?void 0:y.days_off)??0),M=Number((y==null?void 0:y.daysWorked)??(y==null?void 0:y.days_worked)??0);return{offset:Number((y==null?void 0:y.offset)??0)||0,label:String((y==null?void 0:y.label)??""),from:String((y==null?void 0:y.from)??""),to:String((y==null?void 0:y.to)??""),totalDays:Number.isFinite(x)?Math.max(0,x):0,daysOff:Number.isFinite(S)?Math.max(0,S):0,daysWorked:Number.isFinite(M)?Math.max(0,M):0}}).filter(y=>y.totalDays>0):[]});return{topThree:t,topCalendarsSummary:a,timeSummary:p,activitySummary:m,activityDayOffTrend:h}}function ps(e){return e.length?e.reduce((a,o)=>a+o,0)/e.length:0}function hs(e){if(!e.length)return 0;const t=[...e].sort((o,r)=>o-r),a=Math.floor(t.length/2);return t.length%2?t[a]:(t[a-1]+t[a])/2}function Uc(e){return new Date(`${e}T00:00:00Z`).getUTCDay()}function Vc(e){return`${Number(e||0).toFixed(1)}%`}function E1(e){return{balanceOverview:D(()=>{var d,p,m,h;const a=(d=e.stats)==null?void 0:d.balance_overview;if(!a||typeof a!="object")return null;const o=Array.isArray(a.categories)?a.categories.map(u=>({id:String((u==null?void 0:u.id)??""),label:String((u==null?void 0:u.label)??""),hours:ut(u==null?void 0:u.hours)??0,share:ut(u==null?void 0:u.share)??0,prevShare:ut(u==null?void 0:u.prev_share)??0,delta:ut(u==null?void 0:u.delta)??0,color:e.categoryColorMap.value[String((u==null?void 0:u.id)??"")]})):[],r=Array.isArray(a.relations)?a.relations.map(u=>({label:String((u==null?void 0:u.label)??""),value:String((u==null?void 0:u.value)??"")})):[],n=Array.isArray((p=a.trend)==null?void 0:p.history)?a.trend.history:Array.isArray(a==null?void 0:a.trendHistory)?a.trendHistory:[],s={delta:Array.isArray((m=a.trend)==null?void 0:m.delta)?a.trend.delta.map(u=>({id:String((u==null?void 0:u.id)??""),label:String((u==null?void 0:u.label)??""),delta:ut(u==null?void 0:u.delta)??0})):[],badge:String(((h=a.trend)==null?void 0:h.badge)??""),history:n.map(u=>({offset:gs(u==null?void 0:u.offset)??0,label:String((u==null?void 0:u.label)??""),categories:Array.isArray(u==null?void 0:u.categories)?u.categories.map(f=>({id:String((f==null?void 0:f.id)??""),label:String((f==null?void 0:f.label)??""),share:ut(f==null?void 0:f.share)??0})):[]}))},i=Array.isArray(a.daily)?a.daily.map(u=>({date:String((u==null?void 0:u.date)??""),weekday:String((u==null?void 0:u.weekday)??""),total_hours:ut(u==null?void 0:u.total_hours)??0,categories:Array.isArray(u==null?void 0:u.categories)?u.categories.map(f=>({id:String((f==null?void 0:f.id)??""),label:String((f==null?void 0:f.label)??""),hours:ut(f==null?void 0:f.hours)??0,share:ut(f==null?void 0:f.share)??0})):[]})):[],l=Array.isArray(a.warnings)?a.warnings.map(u=>String(u)):[];return{index:ut(a.index)??0,categories:o,relations:r,trend:s,daily:i,warnings:l}})}}const Qo=le("auto"),en=le("light"),Kc=le(!1),er=D(()=>Qo.value==="auto"?en.value:Qo.value);function L1(){return Wc()??"auto"}function tn(e){if(typeof document>"u")return;const a=[document.getElementById("opsdash"),document.body].filter(Boolean);a.length&&(a.forEach(o=>o.classList.remove("opsdash-theme-light","opsdash-theme-dark")),e==="dark"?a.forEach(o=>o.classList.add("opsdash-theme-dark")):a.forEach(o=>o.classList.add("opsdash-theme-light")))}function ms(){en.value=fs()}let qt=null,Ka=null;function N1(){typeof window>"u"||qt||(qt=window.matchMedia("(prefers-color-scheme: dark)"),Ka=()=>ms(),typeof qt.addEventListener=="function"?qt.addEventListener("change",Ka):typeof qt.addListener=="function"&&qt.addListener(Ka))}function I1(){qt&&(Ka&&(typeof qt.removeEventListener=="function"?qt.removeEventListener("change",Ka):typeof qt.removeListener=="function"&&qt.removeListener(Ka)),qt=null,Ka=null)}function B1(){Kc.value||(Qo.value=L1(),en.value=fs(),tn(er.value),Kc.value=!0),Tt(()=>{typeof window<"u"&&window.addEventListener("oc:theme:changed",ms),N1(),tn(er.value)}),Ct(()=>{typeof window<"u"&&window.removeEventListener("oc:theme:changed",ms),I1()}),De(er,t=>{tn(t)});function e(t){Qo.value=t,tn(er.value)}return{preference:Qo,effectiveTheme:er,systemTheme:en,setThemePreference:e}}const vs=e=>e==="light"||e==="dark"?e:"auto";function O1(e){const t=le(!1),a=le(vs(e.serverPreference.value));let o=null;const r=typeof e.debounceMs=="number"?e.debounceMs:250,n=()=>{o&&(clearTimeout(o),o=null)};Or()&&Ct(()=>{n()}),De(e.serverPreference,l=>{const c=vs(l);a.value=c,e.localPreference.value!==c&&(t.value=!0,e.applyLocalPreference(c),t.value=!1)},{immediate:!0});function s(l){t.value||l!==a.value&&(n(),o=setTimeout(async()=>{o=null;try{await e.postJson(e.route("persist"),{theme_preference:l}),a.value=l,e.notifySuccess("Theme preference saved")}catch(c){console.error(c),e.notifyError("Failed to save theme preference")}},r))}function i(l,c){const d=vs(l);e.applyLocalPreference(d),(c==null?void 0:c.persist)!==!1&&s(d)}return{setThemePreference:i}}function P1(e){const{preference:t,effectiveTheme:a,systemTheme:o,setThemePreference:r}=B1(),{setThemePreference:n}=O1({serverPreference:e.serverPreference,localPreference:t,applyLocalPreference:r,route:e.route,postJson:e.postJson,notifySuccess:e.notifySuccess,notifyError:e.notifyError});function s(i,l){n(i,l)}return{themePreference:t,effectiveTheme:a,systemTheme:o,setThemePreference:s}}function F1(e){const{autoWizardNeeded:t,manualWizardOpen:a,onboardingRunId:o,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:s}=Dh(),i=D(()=>{var C;return!!((C=e.onboardingState.value)!=null&&C.completed)}),l=e.actions.isOnboardingSaving,c=e.actions.isSnapshotSaving,d=e.actions.snapshotNotice,p=D(()=>(e.calendars.value||[]).map(C=>({id:String((C==null?void 0:C.id)??""),displayname:String((C==null?void 0:C.displayname)??(C==null?void 0:C.name)??(C==null?void 0:C.id)??""),color:typeof(C==null?void 0:C.color)=="string"?C.color:""})).filter(C=>C.id)),m=D(()=>[...e.selected.value]),h=D(()=>{var C;return((C=e.onboardingState.value)==null?void 0:C.strategy)??"total_only"}),u=D(()=>{var C;return((C=e.targetsConfig.value)==null?void 0:C.allDayHours)??8}),f=D(()=>{var C;return((C=e.targetsConfig.value)==null?void 0:C.totalHours)??40}),y=D(()=>{var C,v,b,j;return{activityCard:(C=e.targetsConfig.value)==null?void 0:C.activityCard,balanceTrendLookback:((j=(b=(v=e.targetsConfig.value)==null?void 0:v.balance)==null?void 0:b.trend)==null?void 0:j.lookbackWeeks)??3}}),x=C=>{if(typeof C!="string")return null;const v=C.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(v))return null;if(v.length===4){const[,b,j,R]=v;return`#${b}${b}${j}${j}${R}${R}`.toUpperCase()}return v.toUpperCase()},S=D(()=>{var v;return(Array.isArray((v=e.targetsConfig.value)==null?void 0:v.categories)?e.targetsConfig.value.categories:[]).map((b,j)=>({id:String((b==null?void 0:b.id)??`cat_${j}`),label:String((b==null?void 0:b.label)??`Category ${j+1}`),targetHours:Number.isFinite(b==null?void 0:b.targetHours)?Number(b.targetHours):0,includeWeekend:!!(b!=null&&b.includeWeekend),paceMode:(b==null?void 0:b.paceMode)==="time_aware"?"time_aware":"days_only",color:x(b==null?void 0:b.color)??null}))}),M=D(()=>{var R;const C={},v=new Map;(Array.isArray((R=e.targetsConfig.value)==null?void 0:R.categories)?e.targetsConfig.value.categories:[]).forEach(Y=>{const ne=Array.isArray(Y==null?void 0:Y.groupIds)?Number(Y.groupIds[0]):Number(Y==null?void 0:Y.groupId);Number.isFinite(ne)&&v.set(ne,String((Y==null?void 0:Y.id)??""))});const j=new Set(e.selected.value||[]);return Object.entries(e.groupsById.value||{}).forEach(([Y,ne])=>{if(!j.has(Y))return;const X=v.get(Number(ne));X&&(C[Y]=X)}),C}),T=D(()=>({...e.deckSettings.value||{}})),O=D(()=>({...e.reportingConfig.value||{}})),I=D(()=>{var C;return((C=e.onboardingState.value)==null?void 0:C.dashboardMode)||"standard"});function w(C){if(!C)return!0;const v=C.version_required??Na;return!C.completed||(C.version??0)<v}function E(C){const v=C??e.onboardingState.value;if(!e.hasInitialLoad.value&&!v)return;const b=w(v);t.value=b||!!(v!=null&&v.resetRequested),(b||v!=null&&v.resetRequested)&&(s.value=null),v!=null&&v.resetRequested&&(a.value=!0)}De(()=>e.onboardingState.value,C=>{e.hasInitialLoad.value&&E(C)});async function P(C){try{await e.actions.complete(C),a.value=!1,t.value=!1}catch(v){console.error("[opsdash] onboarding complete failed",v)}}async function W(){try{await e.actions.skip(),a.value=!1,t.value=!1}catch(C){console.error("[opsdash] onboarding skip failed",C)}}function Z(){t.value||(a.value=!1)}async function F(){try{await e.actions.saveSnapshot()}catch(C){console.error("[opsdash] onboarding snapshot failed",C)}}return{autoWizardNeeded:t,manualWizardOpen:a,onboardingRunId:o,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:s,hasExistingConfig:i,wizardCalendars:p,wizardInitialSelection:m,wizardInitialStrategy:h,wizardInitialCategories:S,wizardInitialAssignments:M,wizardInitialAllDayHours:u,wizardInitialTotalHours:f,wizardInitialTargetsConfig:y,wizardInitialDeckSettings:T,wizardInitialReportingConfig:O,wizardInitialDashboardMode:I,isOnboardingSaving:l,isSnapshotSaving:c,snapshotNotice:d,evaluateOnboarding:E,handleWizardComplete:P,handleWizardSkip:W,handleWizardClose:Z,handleWizardSaveSnapshot:F}}function H1(e){const t=D(()=>!e.navOpen.value),a=D(()=>e.range.value==="week"?"Switch to month":"Switch to week"),o=D(()=>!e.from.value||!e.to.value?"":`${e.from.value}  ${e.to.value}`);function r(){try{const c=e.performLoad();if(c&&typeof c.then=="function")return c.catch(d=>{console.error("[opsdash] range load failed",d)})}catch(c){console.error("[opsdash] range load failed",c)}}function n(){r()}function s(){e.range.value=e.range.value==="week"?"month":"week",e.offset.value=0,r()}function i(){e.offset.value=(e.offset.value||0)-1,r()}function l(){e.offset.value=(e.offset.value||0)+1,r()}return{showCollapsedRangeControls:t,rangeToggleLabel:a,rangeDateLabel:o,loadCurrent:n,toggleRangeCollapsed:s,goPrevious:i,goNext:l}}const qc=["cals","groups","targets_week","targets_month","targets_config","theme_preference","onboarding","widgets"],W1=new Set(["auto","light","dark"]);function z1(e){if(!e||typeof e!="object")return{cleaned:{},ignored:["<invalid-payload>"]};const t=e,a={},o=[];if(qc.forEach(r=>{t[r]!==void 0&&(a[r]=t[r])}),Object.keys(t).forEach(r=>{qc.includes(r)||o.push(r)}),a.cals&&!Array.isArray(a.cals)&&(o.push("cals"),delete a.cals),"groups"in a&&(!a.groups||typeof a.groups!="object")&&(o.push("groups"),delete a.groups),"targets_week"in a&&(!a.targets_week||typeof a.targets_week!="object")&&(o.push("targets_week"),delete a.targets_week),"targets_month"in a&&(!a.targets_month||typeof a.targets_month!="object")&&(o.push("targets_month"),delete a.targets_month),"targets_config"in a&&(!a.targets_config||typeof a.targets_config!="object")&&(o.push("targets_config"),delete a.targets_config),a.theme_preference&&!W1.has(String(a.theme_preference))&&(o.push("theme_preference"),delete a.theme_preference),"onboarding"in a&&(a.onboarding==null||typeof a.onboarding!="object")&&(o.push("onboarding"),delete a.onboarding),"widgets"in a){const r=a.widgets,n=Array.isArray(r),s=r&&typeof r=="object"&&Array.isArray(r.tabs);!n&&!s&&(o.push("widgets"),delete a.widgets)}return{cleaned:a,ignored:o}}function R1(e,t="0.4.4"){return{version:t,generated:new Date().toISOString(),payload:e}}function j1(e){function t(){const s={cals:[...e.selected.value],groups:{...e.groupsById.value},targets_week:{...e.targetsWeek.value},targets_month:{...e.targetsMonth.value},targets_config:ua(e.targetsConfig.value),theme_preference:e.themePreference.value};return e.onboardingState.value&&(s.onboarding={...e.onboardingState.value}),e.widgetTabs&&(s.widgets=e.widgetTabs.value),s}function a(s,i){if(e.createDownload){e.createDownload(s,i);return}const l=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),c=URL.createObjectURL(l),d=document.createElement("a");d.href=c,d.download=s,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c)}function o(){try{const s=t(),i=R1(s),l=`opsdash-config-${i.generated.slice(0,10)}.json`;a(l,i),e.notifySuccess("Configuration exported")}catch(s){console.error(s),e.notifyError("Failed to export configuration")}}async function r(s){const{cleaned:i,ignored:l}=z1(s);if(!Object.keys(i).length){e.notifyError("No recognised configuration keys found in file");return}if(i.cals&&(e.selected.value=i.cals.map(c=>String(c))),i.groups){const c={};Object.entries(i.groups).forEach(([d,p])=>{const m=Number(p);c[String(d)]=Number.isFinite(m)?m:0}),e.groupsById.value=c}if(i.targets_week){const c={};Object.entries(i.targets_week).forEach(([d,p])=>{const m=Number(p);Number.isFinite(m)&&(c[String(d)]=m)}),e.targetsWeek.value=c}if(i.targets_month){const c={};Object.entries(i.targets_month).forEach(([d,p])=>{const m=Number(p);Number.isFinite(m)&&(c[String(d)]=m)}),e.targetsMonth.value=c}if(i.targets_config&&(e.targetsConfig.value=Dt(i.targets_config)),i.theme_preference&&e.setThemePreference(i.theme_preference,{persist:!1}),i.onboarding&&typeof i.onboarding=="object"&&(e.onboardingState.value={...i.onboarding}),e.widgetTabs&&i.widgets){const c=e.widgetTabs.value||Yo("standard");e.widgetTabs.value=Zo(i.widgets,c)}await e.postJson(e.route("persist"),i),await e.performLoad(),l.length?e.notifyError(`Configuration imported with ignored keys: ${l.join(", ")}`):e.notifySuccess("Configuration imported")}async function n(s){try{const i=await s.text(),l=JSON.parse(i),c=l!=null&&l.payload&&typeof l.payload=="object"?l.payload:l;await r(c)}catch(i){console.error(i),e.notifyError("Failed to import configuration")}}return{collectSidebarPayload:t,exportSidebarConfig:o,importSidebarConfig:n,applyConfigSource:r}}function U1(e=null){const t=le(e);function a(o){t.value=t.value===o?null:o}return{detailsIndex:t,toggle:a}}function V1(e){const t=D(()=>e.value==="month"?"Last month":"Last week"),a=D(()=>e.value==="month"?"This month":"This week"),o=D(()=>e.value==="month"?"Notes for previous month":"Notes for previous week"),r=D(()=>e.value==="month"?"Notes for current month":"Notes for current week");return{notesLabelPrev:t,notesLabelCurr:a,notesLabelPrevTitle:o,notesLabelCurrTitle:r}}const Gc="opsdash.sidebarOpen";function K1(){var e;if(typeof window>"u")return!0;try{const t=(e=window.localStorage)==null?void 0:e.getItem(Gc);if(t==="true")return!0;if(t==="false")return!1}catch{return!0}return!0}function q1(){const e=le(K1());De(e,r=>{var n;if(typeof window<"u"){try{(n=window.localStorage)==null||n.setItem(Gc,r?"true":"false")}catch{}ea(()=>{window.dispatchEvent(new Event("resize"))}).catch(()=>{})}},{immediate:!1});const t=()=>{e.value=!e.value},a=D(()=>e.value?"Hide sidebar":"Show sidebar"),o=D(()=>e.value?"":"");return{navOpen:e,toggleNav:t,navToggleLabel:a,navToggleIcon:o}}const G1=[{id:"navigation",title:"Navigation",items:[{id:"nav-prev",label:"Previous period",combo:["Alt",""],description:"Go to the previous week or month"},{id:"nav-next",label:"Next period",combo:["Alt",""],description:"Go to the next week or month"},{id:"nav-toggle-range",label:"Toggle week/month",combo:["Alt","Shift","R"],description:"Switch between week and month range"}]},{id:"notes",title:"Notes",items:[{id:"notes-save",label:"Save note",combo:["Ctrl / ","S"],description:"Persist the current note draft"}]},{id:"targets",title:"Targets",items:[{id:"targets-focus",label:"Open Theme",combo:["Alt","T"],description:"Jump to theme controls"}]},{id:"misc",title:"Misc",items:[{id:"shortcuts-open",label:"Open cheat sheet",combo:["?"],description:"Display this overlay"},{id:"widget-options",label:"Open widget options",combo:["Shift","C"],description:"Toggle options for the selected widget (edit mode)"},{id:"layout-edit",label:"Toggle edit layout",combo:["Shift","E"],description:"Enter or exit widget layout editing"}]}];function J1(e){const t=le(!1),a=le(null);let o=!1;const r=!!Or();function n(h,u="api"){var f;h&&(a.value=h),t.value=!0,(f=e.onOpen)==null||f.call(e,{source:u})}function s(){t.value=!1;const h=a.value;if(a.value=null,h&&typeof h.focus=="function")try{h.focus()}catch{}}function i(){typeof e.ensureSidebarVisible=="function"&&e.ensureSidebarVisible()}function l(h,u){u.preventDefault(),i(),h()}function c(h){var x;const u=h;if(!u)return!1;if(u.isContentEditable)return!0;const f=u.tagName;if(!f)return!1;if(["INPUT","TEXTAREA","SELECT"].includes(f))return!0;const y=(x=u.getAttribute)==null?void 0:x.call(u,"role");return!!(y&&["textbox","combobox"].includes(y))}function d(h){if(h.defaultPrevented)return;const u=c(h.target);if((h.key==="Escape"||h.key==="Esc")&&t.value){h.preventDefault(),s();return}if(!h.altKey&&!h.ctrlKey&&!h.metaKey&&!u&&(h.key==="?"||h.shiftKey&&h.key==="/")){h.preventDefault(),n(h.target instanceof HTMLElement?h.target:null,"keyboard");return}if(h.altKey&&!h.ctrlKey&&!h.metaKey){const f=h.key;if(f==="ArrowLeft"){l(e.goPrevious,h);return}if(f==="ArrowRight"){l(e.goNext,h);return}if(h.shiftKey&&(f==="R"||f==="r")){l(e.toggleRange,h);return}if(f==="T"||f==="t"){e.openConfigPanel&&(h.preventDefault(),i(),e.openConfigPanel());return}}if(h.shiftKey&&!h.altKey&&!h.metaKey&&!h.ctrlKey){if((h.key==="e"||h.key==="E")&&e.toggleEditLayout&&!u){h.preventDefault(),e.toggleEditLayout();return}if((h.key==="c"||h.key==="C")&&e.openWidgetOptions&&!u){h.preventDefault(),e.openWidgetOptions();return}}}function p(){o||typeof document>"u"||(document.addEventListener("keydown",d),o=!0)}function m(){!o||typeof document>"u"||(document.removeEventListener("keydown",d),o=!1)}return p(),r&&(Tt(()=>{p()}),Ct(()=>{m()})),{shortcutsOpen:t,openShortcuts:n,closeShortcuts:s,shortcutGroups:G1,unbindShortcuts:m}}function Y1(e){const t=le(!1),a=le(!1),o=le(null);async function r(l){var c,d,p;try{t.value=!0,o.value=null,e.setThemePreference(l.themePreference,{persist:!1}),await e.postJson(e.route("persist"),{cals:l.selected,groups:l.groups,targets_week:l.targetsWeek,targets_month:l.targetsMonth,targets_config:l.targetsConfig,theme_preference:l.themePreference,deck_settings:l.deckSettings,reporting_config:l.reportingConfig,targets_config_activity:l.activityCard,onboarding:{completed:!0,version:Na,strategy:l.strategy,dashboardMode:l.dashboardMode,completed_at:new Date().toISOString()}}),e.setSelected(l.selected),e.setTargetsWeek(l.targetsWeek),e.setTargetsMonth(l.targetsMonth),e.setTargetsConfig(l.targetsConfig),e.setGroupsById(l.groups),(c=e.setDashboardMode)==null||c.call(e,l.dashboardMode),(d=e.setOnboardingState)==null||d.call(e,{completed:!0,version:Na,strategy:l.strategy,dashboardMode:l.dashboardMode,version_required:Na,resetRequested:!1});const m=(p=l.profileName)==null?void 0:p.trim();l.saveProfile&&m&&await e.savePreset(m),await e.reloadAfterPersist(),e.notifySuccess("Onboarding saved")}catch(m){throw console.error(m),e.notifyError("Failed to save onboarding"),m}finally{t.value=!1}}async function n(l){var c,d,p,m,h,u,f;try{t.value=!0,o.value=null,l.theme_preference&&e.setThemePreference(l.theme_preference,{persist:!1}),await e.postJson(e.route("persist"),l),l.cals&&e.setSelected(l.cals),l.targets_week&&e.setTargetsWeek(l.targets_week),l.targets_month&&e.setTargetsMonth(l.targets_month),l.targets_config&&e.setTargetsConfig(l.targets_config),l.groups&&e.setGroupsById(l.groups),l.deck_settings&&((c=e.setDeckSettings)==null||c.call(e,l.deck_settings)),l.reporting_config&&((d=e.setReportingConfig)==null||d.call(e,l.reporting_config)),l.onboarding&&((h=e.setOnboardingState)==null||h.call(e,{completed:l.onboarding.completed??!1,version:l.onboarding.version??Na,strategy:l.onboarding.strategy??((p=e.onboardingState.value)==null?void 0:p.strategy)??"total_only",completed_at:l.onboarding.completed_at??"",dashboardMode:l.onboarding.dashboardMode??((m=e.onboardingState.value)==null?void 0:m.dashboardMode),version_required:Na,resetRequested:!1})),l.dashboardMode&&((u=e.setDashboardMode)==null||u.call(e,l.dashboardMode)),l.widgets&&((f=e.setWidgetTabs)==null||f.call(e,l.widgets)),e.notifySuccess("Step saved")}catch(y){throw console.error(y),e.notifyError("Failed to save step"),y}finally{t.value=!1}}async function s(){var l;try{t.value=!0,o.value=null,await e.postJson(e.route("persist"),{onboarding:{completed:!0,version:Na,strategy:((l=e.onboardingState.value)==null?void 0:l.strategy)??"total_only",completed_at:new Date().toISOString()}}),await e.reloadAfterPersist(),e.notifySuccess("You can revisit onboarding from the Targets tab any time.")}catch(c){throw console.error(c),e.notifyError("Failed to update onboarding state"),c}finally{t.value=!1}}async function i(){try{a.value=!0,o.value=null;const c=`Before onboarding ${new Date().toISOString().slice(0,16).replace("T"," ")}`;await e.savePreset(c),o.value={type:"success",message:`Profile "${c}" saved  find it under Config & Setup.`}}catch(l){throw console.error("[opsdash] profile backup failed",l),o.value={type:"error",message:"Failed to save profile backup. Please try again."},l}finally{a.value=!1}}return{isOnboardingSaving:t,isSnapshotSaving:a,snapshotNotice:o,complete:r,saveStep:n,skip:s,saveSnapshot:i}}function Z1(e){const t=le([]),a=le(!1),o=le(""),r=le(null);let n=0;const s=new Map;let i="";function l(d,p){return`${d}::${p}`}async function c(d=!1){const p=(e.from.value||"").trim(),m=(e.to.value||"").trim();if(!p||!m){t.value=[],o.value="",a.value=!1,r.value=null,i="";return}const h=l(p,m);if(!d&&s.has(h)){const f=s.get(h);t.value=f.cards,r.value=f.fetchedAt,o.value="",a.value=!1,i=h;return}const u=++n;a.value=!0,o.value="";try{const f=await Zh({from:p,to:m});if(u===n){const y=new Date().toISOString();t.value=f,r.value=y,s.set(h,{cards:f,fetchedAt:y}),i=h}}catch(f){u===n&&(t.value=[],o.value=f instanceof Error?f.message:"deck_fetch_failed",e.notifyError&&e.notifyError("Unable to fetch Deck cards. Check the Deck app or try again."))}finally{u===n&&(a.value=!1)}}return De(()=>[e.from.value,e.to.value],([d,p],[m,h])=>{if(!d||!p){t.value=[];return}d===m&&p===h||c()}),{deckCards:t,deckLoading:a,deckError:o,deckLastFetchedAt:r,refreshDeck:c}}function bs(e){return["all","mine","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine"].includes(e)?e:"all"}function Ia(e,t,a){const o=e.status;return t==="open"?o==="active":t==="archived"?o==="archived":t==="done"?o==="done"?!0:a&&o==="archived":!1}function ys(e){return e.dueTs!=null||e.match==="due"}function ws(e){if(e.dueTs==null)return!1;const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),o=a+24*60*60*1e3;return e.dueTs>=a&&e.dueTs<o}function X1(e){const{deckSettings:t,deckCards:a,uid:o,root:r}=e,n=le(bs(t.value.defaultFilter));De(()=>t.value.defaultFilter,u=>{const f=bs(u);f!==n.value&&(n.value=f)});const s=D(()=>{const u=new Set((t.value.hiddenBoards||[]).map(f=>Number(f)).filter(f=>Number.isFinite(f)));return(a.value||[]).filter(f=>!u.has(Number(f.boardId)))}),i=D(()=>{const u=t.value.mineMode??"assignee",f=(o.value||"").trim().toLowerCase();return y=>{if(!f)return!1;const x=(y.assignees||[]).some(I=>typeof I.uid=="string"&&I.uid.toLowerCase()===f),S=typeof y.createdBy=="string"?y.createdBy.trim().toLowerCase():"",M=S&&S===f,T=typeof y.doneBy=="string"?y.doneBy.trim().toLowerCase():"",O=T&&T===f;return u==="creator"?M||O:u==="assignee"?x||O:x||M||O}}),l=D(()=>{const u=i.value,f=t.value.solvedIncludesArchived!==!1,y=n.value,x=s.value;if(y==="all")return x;if(y==="mine")return x.filter(T=>u(T));if(y.startsWith("due_today")){const T=y.endsWith("_mine");return x.filter(O=>{const I=ws(O),w=T?u(O):!0;return I&&w})}if(y.startsWith("due_")){const T=y.endsWith("_mine");return x.filter(O=>{const I=ys(O),w=T?u(O):!0;return I&&w})}const[S,M]=y.split("_");return x.filter(T=>{const O=Ia(T,S,f),I=M==="all"?!0:u(T);return O&&I})}),c=D(()=>{const u=i.value,f=t.value.solvedIncludesArchived!==!1,y=s.value;return[{value:"all",label:"All cards",mine:!1,matches:()=>!0},{value:"open_all",label:"Open  All",mine:!1,matches:S=>Ia(S,"open",f)},{value:"open_mine",label:"Open  Mine",mine:!0,matches:S=>Ia(S,"open",f)&&u(S)},{value:"done_all",label:"Done  All",mine:!1,matches:S=>Ia(S,"done",f)},{value:"done_mine",label:"Done  Mine",mine:!0,matches:S=>Ia(S,"done",f)&&u(S)},{value:"archived_all",label:"Archived  All",mine:!1,matches:S=>Ia(S,"archived",f)},{value:"archived_mine",label:"Archived  Mine",mine:!0,matches:S=>Ia(S,"archived",f)&&u(S)},{value:"due_all",label:"Due  All",mine:!1,matches:S=>ys(S)},{value:"due_mine",label:"Due  Mine",mine:!0,matches:S=>ys(S)&&u(S)},{value:"due_today_all",label:"Due today  All",mine:!1,matches:S=>ws(S)},{value:"due_today_mine",label:"Due today  Mine",mine:!0,matches:S=>ws(S)&&u(S)}].map(S=>({value:S.value,label:S.label,mine:S.mine,count:y.filter(S.matches).length}))}),d=D(()=>{const u=i.value,f=t.value.solvedIncludesArchived!==!1,y=s.value,x=[];return[{key:"open_all",label:"Open  All",status:"open",mine:!1},{key:"open_mine",label:"Open  Mine",status:"open",mine:!0},{key:"done_all",label:"Done  All",status:"done",mine:!1},{key:"done_mine",label:"Done  Mine",status:"done",mine:!0},{key:"archived_all",label:"Archived  All",status:"archived",mine:!1},{key:"archived_mine",label:"Archived  Mine",status:"archived",mine:!0}].forEach(M=>{const T=y.filter(w=>{const E=Ia(w,M.status,f),P=M.mine?u(w):!0;return E&&P}),O=new Map;T.forEach(w=>{if(w.boardId==null)return;const E=Number(w.boardId),P=O.get(E)||{count:0,title:w.boardTitle||"",color:w.boardColor};P.count+=1,P.title=w.boardTitle||P.title,P.color=w.boardColor??P.color,O.set(E,P)});let I;if(O.size){const w=Array.from(O.entries()).sort((E,P)=>P[1].count-E[1].count);I={title:w[0][1].title,color:w[0][1].color}}x.push({key:M.key,label:M.label,titles:T.map(w=>w.title||`Card ${w.id}`),count:T.length,board:I})}),x}),p=D(()=>{const u=t.value.ticker||{autoScroll:!0,intervalSeconds:5},f=Math.min(10,Math.max(3,Number(u.intervalSeconds??5)||5));return{autoScroll:u.autoScroll!==!1,intervalSeconds:f}}),m=D(()=>t.value.filtersEnabled&&t.value.enabled&&!!(o.value||"").trim()),h=D(()=>`${r.value||""}/apps/deck/`);return{deckFilter:n,deckVisibleCards:s,deckMineMatcher:i,deckFilteredCards:l,deckSummaryBuckets:d,deckTickerConfig:p,deckCanFilterMine:m,deckUrl:h,deckFilterOptions:c}}function Q1(e){const{widgetsRegistry:t,createDefaultTabs:a,normalizeWidgetTabs:o,createDashboardPreset:r,dashboardMode:n,deckEnabled:s,hasInitialLoad:i,queueSaveRef:l}=e;function c(){return a()}const d=le(c().tabs),p=le(c().defaultTabId),m=le(p.value),h=le(!1),u=le(!1),f=le("");function y(){var se;i.value&&h.value&&((se=l.value)==null||se.call(l,!1),h.value=!1)}De(()=>i.value,se=>{se&&h.value&&y()});const x=D(()=>d.value.find(se=>se.id===m.value)||d.value[0]);function S(se){d.value.some(fe=>fe.id===se)&&(m.value=se)}function M(se){d.value.some(fe=>fe.id===se)&&(p.value=se,m.value=se,h.value=!0,y())}const T=D(()=>{var fe;const se=((fe=x.value)==null?void 0:fe.widgets)||[];return s.value?se:se.filter(ce=>ce.type!=="deck")}),O=D(()=>Object.keys(t).map(se=>{var fe;return{type:se,label:((fe=t[se])==null?void 0:fe.label)||se}}));function I(se){var V;n.value=se;const fe=((V=x.value)==null?void 0:V.id)||"tab-1",ce=d.value.map(J=>J.id===fe?{...J,widgets:r(se)}:J);d.value=ce,h.value=!0,y()}function w(se,fe){d.value=d.value.map(ce=>ce.id===se?{...ce,widgets:fe([...ce.widgets])}:ce)}function E(se,fe){var V;const ce=(V=x.value)==null?void 0:V.id;ce&&(w(ce,J=>J.map(A=>A.id===se?fe({...A,layout:{...A.layout}}):A)),h.value=!0,y())}function P(se){const fe=["quarter","half","full"];E(se,ce=>{const V=fe.indexOf(ce.layout.width),J=fe[(V+1)%fe.length];return{...ce,layout:{...ce.layout,width:J}}})}function W(se){const fe=["s","m","l","xl"];E(se,ce=>{const V=fe.indexOf(ce.layout.height),J=fe[(V+1)%fe.length];return{...ce,layout:{...ce.layout,height:J}}})}function Z(se,fe){var q;const ce=[...T.value].sort((re,be)=>(re.layout.order||0)-(be.layout.order||0)),V=ce.findIndex(re=>re.id===se);if(V<0)return;const J=fe==="up"?V-1:V+1;if(J<0||J>=ce.length)return;const A=ce[V].layout.order;ce[V].layout.order=ce[J].layout.order,ce[J].layout.order=A;const B=(q=x.value)==null?void 0:q.id;B&&(w(B,()=>ce),h.value=!0,y())}function F(se){var ce;const fe=(ce=x.value)==null?void 0:ce.id;fe&&(w(fe,V=>V.filter(J=>J.id!==se)),h.value=!0,y())}function C(se){var A;const fe=t[se];if(!fe)return;const ce=T.value.reduce((B,q)=>Math.max(B,q.layout.order||0),0),V={id:`widget-${se}-${Date.now()}`,type:se,options:{},layout:{...fe.defaultLayout,order:ce+10},version:1},J=(A=x.value)==null?void 0:A.id;J&&(w(J,B=>[...B,V]),f.value="",h.value=!0,y())}function v(se,fe){var q;const ce=t[se];if(!ce)return;const V=T.value.reduce((re,be)=>Math.max(re,be.layout.order||0),0);let J=Number.isFinite(fe)?Number(fe):V+10;for(Number.isFinite(J)||(J=V+10);T.value.some(re=>re.layout.order===J);)J+=.1;const A={id:`widget-${se}-${Date.now()}`,type:se,options:{},layout:{...ce.defaultLayout,order:J},version:1},B=(q=x.value)==null?void 0:q.id;B&&(w(B,re=>[...re,A]),h.value=!0,y())}function b(se,fe){var A;if(!Number.isFinite(fe??NaN))return;const ce=Number(fe),V=T.value.map(B=>B.id===se?{...B,layout:{...B.layout,order:ce}}:{...B});V.sort((B,q)=>(B.layout.order||0)-(q.layout.order||0));const J=(A=x.value)==null?void 0:A.id;J&&(w(J,()=>V.map((B,q)=>({...B,layout:{...B.layout,order:(q+1)*10}}))),h.value=!0,y())}function j(se,fe,ce){var J;const V=(J=x.value)==null?void 0:J.id;V&&(w(V,A=>A.map(B=>{if(B.id!==se)return B;const q={...B.options||{}};if(fe.includes(".")){const re=fe.split("."),be={...q};let $=be;for(let z=0;z<re.length-1;z+=1){const N=re[z];$[N]={...$[N]||{}},$=$[N]}return $[re[re.length-1]]=ce,{...B,options:be}}return fe==="scale"?(q.scale=ce,"textSize"in q&&delete q.textSize,{...B,options:q}):(q[fe]=ce,{...B,options:q})})),h.value=!0,y())}function R(){var fe;const se=(fe=x.value)==null?void 0:fe.id;se&&(w(se,()=>r(n.value)),h.value=!0,y())}function Y(se){const fe=`tab-${Date.now().toString(36)}`,ce=String(se??"").trim()||`Tab ${d.value.length+1}`,V={id:fe,label:ce.slice(0,48),widgets:r(n.value)};d.value=[...d.value,V],m.value=V.id,h.value=!0,y()}function ne(se,fe){const ce=String(fe||"").trim().slice(0,48);ce&&(d.value=d.value.map(V=>V.id===se?{...V,label:ce}:V),h.value=!0,y())}function X(se){var fe,ce;d.value.length<=1||(d.value=d.value.filter(V=>V.id!==se),p.value===se&&(p.value=((fe=d.value[0])==null?void 0:fe.id)||""),m.value===se&&(m.value=((ce=d.value[0])==null?void 0:ce.id)||""),h.value=!0,y())}function oe(se){const fe=a(),ce=o(se,fe);d.value=ce.tabs,p.value=ce.defaultTabId;const V=m.value;V&&ce.tabs.some(J=>J.id===V)?m.value=V:m.value=ce.defaultTabId}return{layoutTabs:d,defaultTabId:p,activeTabId:m,widgetsDirty:h,isLayoutEditing:u,newWidgetType:f,widgets:T,availableWidgetTypes:O,persistWidgets:y,applyDashboardPreset:I,updateWidget:E,cycleWidth:P,cycleHeight:W,moveWidget:Z,removeWidget:F,addWidget:C,addWidgetAt:v,reorderWidget:b,updateWidgetOptions:j,resetWidgets:R,activeTab:x,setActiveTab:S,setDefaultTab:M,addTab:Y,renameTab:ne,removeTab:X,setTabsFromPayload:oe}}function e0(e){const{performLoad:t,refreshPresets:a,range:o,offset:r,onboardingState:n,hasInitialLoad:s,evaluateOnboarding:i,dashboardMode:l}=e;De(n,c=>{s.value&&i(c)}),De(n,c=>{const d=c==null?void 0:c.dashboardMode;(d==="quick"||d==="standard"||d==="pro")&&(l.value=d)}),Tt(async()=>{console.info("[opsdash] start");try{await t()}catch(c){console.error(c),alert("Initial load failed")}a().catch(c=>console.warn("[opsdash] presets fetch failed",c))}),De(o,()=>{r.value=0,t().catch(console.error)})}function t0(e){return Array.from(e.reduce((t,a)=>(a.boardId==null||t.has(a.boardId)||t.set(a.boardId,{id:a.boardId,title:a.boardTitle,color:a.boardColor}),t),new Map).values())}function a0(e){return{widgetContext:D(()=>{var a,o;return{summary:e.timeSummary.value,activeDayMode:e.activeDayMode.value,targetsSummary:e.targetsSummary.value,targetsConfig:e.targetsConfig.value,stats:e.stats,byDay:e.byDay.value,byCal:e.byCal.value,groupsById:e.groupsById.value,groups:e.calendarGroupsWithToday.value,balanceOverview:e.balanceOverview.value,balanceConfig:e.balanceCardConfig.value,rangeLabel:e.rangeLabel.value,rangeMode:e.range.value,offset:e.offset.value,from:e.from.value,to:e.to.value,lookbackWeeks:e.trendLookbackWeeks.value,balanceNote:e.balanceNote.value,activitySummary:e.activitySummary.value,activityConfig:e.activityCardConfig.value,activityDayOffTrend:e.activityDayOffTrend.value,activityTrendUnit:e.range.value==="month"?"mo":"wk",activityDayOffLookback:e.trendLookbackWeeks.value,deckBuckets:e.deckSummaryBuckets.value,deckRangeLabel:e.rangeLabel.value,deckLoading:e.deckLoading.value,deckError:e.deckError.value,deckTicker:e.deckTickerConfig.value,deckFilter:e.deckFilter.value,onDeckFilter:r=>e.setDeckFilter(r),deckShowBoardBadges:((o=(a=e.deckSettings.value)==null?void 0:a.ticker)==null?void 0:o.showBoardBadges)!==!1,deckUrl:e.deckUrl.value,deckCards:e.deckCards.value,deckBoards:t0(e.deckCards.value||[]),uid:e.uid.value,notesPrev:e.notesPrev.value,notesCurr:e.notesCurrDraft.value,notesHistory:e.notesHistory.value,notesLabelPrev:e.notesLabelPrev.value,notesLabelCurr:e.notesLabelCurr.value,notesLabelPrevTitle:e.notesLabelPrevTitle.value,notesLabelCurrTitle:e.notesLabelCurrTitle.value,isSavingNote:e.isSavingNote.value,onSaveNote:()=>e.saveNotes(),onUpdateNotes:r=>{e.notesCurrDraft.value=r},isLoading:e.isLoading.value,hasInitialLoad:e.hasInitialLoad.value,isLayoutEditing:e.isLayoutEditing.value,onUpdateWidgetOptions:(r,n,s)=>{e.updateWidgetOptions(r,n,s)},charts:e.charts.value,calendarChartData:e.calendarChartData.value,categoryChartsById:e.categoryChartsById.value,calendarGroups:e.calendarGroups.value,calendarCategoryMap:e.calendarCategoryMap.value,categoryColorMap:e.categoryColorMap.value,colorsById:e.colorsById.value,colorsByName:e.colorsByName.value,currentTargets:e.currentTargets.value,calendarTodayHours:e.calendarTodayHours.value}})}}function Jc(){var t;if(typeof window>"u")return!1;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function o0(e,t={}){var o,r,n,s,i,l;if(typeof window>"u")return;const a=window;try{if((r=(o=a==null?void 0:a.OCA)==null?void 0:o.Analytics)!=null&&r.trackEvent){a.OCA.Analytics.trackEvent("opsdash",e,t);return}if((s=(n=a==null?void 0:a.OCA)==null?void 0:n.Analytics)!=null&&s.track){a.OCA.Analytics.track("opsdash",e,t);return}if((l=(i=a==null?void 0:a.OC)==null?void 0:i.eventBus)!=null&&l.emit){a.OC.eventBus.emit("opsdash:telemetry",{app:"opsdash",event:e,payload:t});return}}catch(c){Jc()&&console.warn("[opsdash] telemetry emit failed",e,c);return}Jc()&&console.debug("[opsdash] telemetry (noop)",e,t)}const r0={version:"0.5.4"},n0={class:"app-shell"},s0={class:"app-main"},l0={class:"app-container"},i0={key:0,class:"range-toolbar",role:"toolbar","aria-label":"Collapsed range controls"},c0=["aria-expanded","aria-label"],d0=["disabled","aria-pressed"],u0={class:"range-toolbar__group",role:"group","aria-label":"Navigate periods"},f0=["disabled"],g0=["title"],p0=["disabled"],h0=["disabled"],m0=["title"],v0={class:"cards-toolbar"},b0={class:"cards-toolbar__tabs",role:"tablist","aria-label":"Dashboard tabs"},y0=["aria-selected","onClick","onContextmenu"],w0=["onKeydown"],k0={class:"tab-label"},_0={key:0,class:"tab-default"},x0={class:"cards-toolbar__center"},C0={class:"range-badge","aria-label":"Active range"},S0=["textContent"],$0=["textContent"],T0={key:0,class:"cards-toolbar__add"},M0=["value"],A0=["disabled"],D0={class:"cards"},E0={class:"hint footer"},L0=Ie({__name:"App",setup(e){function t(K){var _e,Ce;const ie=window;(Ce=(_e=ie.OC)==null?void 0:_e.Notification)!=null&&Ce.showTemporary?ie.OC.Notification.showTemporary(K):console.log("SUCCESS:",K)}function a(K){var _e,Ce;const ie=window;(Ce=(_e=ie.OC)==null?void 0:_e.Notification)!=null&&Ce.showTemporary?ie.OC.Notification.showTemporary(K):(console.error("ERROR:",K),alert(K))}const{navOpen:o,toggleNav:r,navToggleLabel:n,navToggleIcon:s}=q1(),i=le(!1);function l(){o.value||r()}De(()=>o.value,K=>{if(typeof document>"u")return;const ie=K?"var(--app-navigation-width, 300px)":"0px";document.body.style.setProperty("--opsdash-nav-offset",ie)},{immediate:!0}),Ct(()=>{typeof document>"u"||document.body.style.removeProperty("--opsdash-nav-offset")});const c=le("week"),d=le(0),p=D(()=>{const K=je.value;if(!K)return"Partial data due to caps";const ie=[];return K.maxPerCal!=null&&ie.push(`cap per calendar: ${K.maxPerCal}`),K.maxTotal!=null&&ie.push(`cap total: ${K.maxTotal}`),K.totalProcessed!=null&&ie.push(`processed: ${K.totalProcessed}`),ie.join("  ")}),m=le(!1),{scheduleDraw:h}=h1(),{route:u,getJson:f,postJson:y,deleteJson:x,root:S}=b1(),{fetchDavColors:M}=w1({root:S,isDebug:Ws}),T=r1({range:c,offset:d,route:K=>u(K),getJson:f,postJson:y,notifySuccess:t,notifyError:a}),{notesPrev:O,notesCurrDraft:I,notesHistory:w,isSavingNote:E,fetchNotes:P,saveNotes:W}=T,Z=le(!1),F=le("standard"),C=le(null),v=le(!0),{layoutTabs:b,defaultTabId:j,activeTabId:R,isLayoutEditing:Y,newWidgetType:ne,widgets:X,availableWidgetTypes:oe,activeTab:se,setActiveTab:fe,setDefaultTab:ce,addTab:V,renameTab:J,removeTab:A,setTabsFromPayload:B,applyDashboardPreset:q,cycleWidth:re,cycleHeight:be,moveWidget:$,removeWidget:z,addWidgetAt:N,reorderWidget:U,updateWidgetOptions:G,resetWidgets:Q}=Q1({widgetsRegistry:Va,createDefaultTabs:()=>Yo(F.value),normalizeWidgetTabs:Zo,createDashboardPreset:cs,dashboardMode:F,deckEnabled:v,hasInitialLoad:Z,queueSaveRef:C}),pe=D(()=>({tabs:b.value,defaultTabId:j.value})),ge=D({get:()=>pe.value,set:K=>{K&&B(K)}}),de=le(""),ue=le(null),ye=le({open:!1,x:0,y:0,tabId:null}),me=le(null);De(()=>R.value,()=>{var K;ue.value||(de.value=((K=se.value)==null?void 0:K.label)||"")},{immediate:!0}),De(()=>Y.value,K=>{K||(ue.value=null,ye.value={open:!1,x:0,y:0,tabId:null})});function ve(K){if(!Y.value){fe(K),me.value=null;return}if(R.value!==K){fe(K),ue.value=null,me.value=null;return}ue.value=K;const ie=b.value.find(_e=>_e.id===K);de.value=(ie==null?void 0:ie.label)||""}function we(K,ie){Y.value&&(ye.value={open:!0,x:K.clientX,y:K.clientY,tabId:ie})}function Se(){ye.value={open:!1,x:0,y:0,tabId:null}}function xe(){ye.value.tabId&&(ce(ye.value.tabId),Se())}function Te(){ye.value.tabId&&(A(ye.value.tabId),Se())}function Me(){if(!ye.value.tabId)return;ue.value=ye.value.tabId;const K=b.value.find(ie=>ie.id===ye.value.tabId);de.value=(K==null?void 0:K.label)||"",Se()}function Be(){if(!ue.value)return;const K=de.value.trim(),ie=b.value.find(_e=>_e.id===ue.value);if(!ie){ue.value=null;return}if(!K){de.value=ie.label,ue.value=null;return}K!==ie.label&&J(ie.id,K),ue.value=null}function Pe(){if(!ue.value)return;const K=b.value.find(ie=>ie.id===ue.value);de.value=(K==null?void 0:K.label)||"",ue.value=null}function ze(K){me.value=Number.isFinite(K??NaN)?Number(K):null}function vt(){if(!ne.value)return;const K=Number.isFinite(me.value??NaN)?me.value??void 0:void 0;N(ne.value,K),ne.value="",me.value=null}function nt(){Y.value=!Y.value,Y.value||(ue.value=null,ye.value={open:!1,x:0,y:0,tabId:null},me.value=null)}function He(K){if(!ye.value.open)return;const ie=K.target;ie&&(ie.closest(".tab-context-menu")||ie.closest(".tab-btn")||Se())}Tt(()=>{typeof window<"u"&&window.addEventListener("click",He)}),Ct(()=>{typeof window<"u"&&window.removeEventListener("click",He)});const{calendars:tt,colorsByName:oa,colorsById:ct,groupsById:rt,selected:Ke,isLoading:pt,isTruncated:Rt,truncLimits:je,uid:at,from:ft,to:bt,stats:Gt,byCal:Ba,byDay:xa,charts:fa,targetsWeek:Et,targetsMonth:Xe,targetsConfig:Re,onboarding:ga,load:tr,themePreference:ar,reportingConfig:Ca,deckSettings:Jt}=d1({range:c,offset:d,userChangedSelection:m,route:K=>u(K),getJson:f,notifyError:a,scheduleDraw:h,fetchNotes:P,isDebug:Ws,fetchDavColors:M,widgetTabs:ge});De(()=>Jt.value.enabled,K=>{v.value=K},{immediate:!0});const{deckCards:or,deckLoading:an,deckError:on}=Z1({from:ft,to:bt,notifyError:a}),{deckFilter:rr,deckSummaryBuckets:_s,deckTickerConfig:xs,deckUrl:Cs}=X1({deckSettings:Jt,deckCards:or,uid:at,root:S}),Ss=K=>{rr.value=bs(K)},qa=ga,{themePreference:mo,effectiveTheme:vo,systemTheme:$s,setThemePreference:nr}=P1({serverPreference:ar,route:K=>u(K),postJson:y,notifySuccess:t,notifyError:a}),Ts=D(()=>vo.value==="dark"?"opsdash-theme-dark":"opsdash-theme-light");function Ms(K){td(K||"categories")}const{exportSidebarConfig:rn,importSidebarConfig:nn}=j1({selected:Ke,groupsById:rt,targetsWeek:Et,targetsMonth:Xe,targetsConfig:Re,themePreference:mo,onboardingState:qa,widgetTabs:ge,setThemePreference:nr,postJson:y,route:K=>u(K),performLoad:()=>Oa(),notifySuccess:t,notifyError:a}),{queueSave:ee}=u1({route:K=>u(K),postJson:y,notifyError:a,notifySuccess:t,onReload:()=>Oa(),selected:Ke,groupsById:rt,targetsWeek:Et,targetsMonth:Xe,targetsConfig:Re,themePreference:mo,reportingConfig:Ca,deckSettings:Jt,widgetTabs:ge});C.value=ee;const{presets:te,presetsLoading:ke,presetSaving:st,presetApplying:We,presetWarnings:Yt,refreshPresets:sr,savePreset:Ga,loadPreset:lr,deletePreset:As,clearPresetWarnings:Ux}=p1({route:(K,ie)=>u(K,ie),getJson:f,postJson:y,deleteJson:x,notifyError:a,notifySuccess:t,queueSave:ee,selected:Ke,groupsById:rt,targetsWeek:Et,targetsMonth:Xe,targetsConfig:Re,themePreference:mo,setThemePreference:nr,reportingConfig:Ca,deckSettings:Jt,widgetTabs:ge,userChangedSelection:m}),ed=Y1({onboardingState:qa,route:K=>u(K),postJson:y,notifySuccess:t,notifyError:a,setThemePreference:nr,savePreset:Ga,reloadAfterPersist:()=>Oa(),setSelected:K=>{Ke.value=[...K]},setTargetsWeek:K=>{Et.value={...K}},setTargetsMonth:K=>{Xe.value={...K}},setTargetsConfig:K=>{Re.value=ua(K)},setGroupsById:K=>{rt.value={...K}},setDeckSettings:K=>{Jt.value={...K}},setReportingConfig:K=>{Ca.value={...K}},setOnboardingState:K=>{ga.value={...ga.value||{},...K}},setDashboardMode:K=>{F.value=K},setWidgetTabs:K=>{B(K)}}),{autoWizardNeeded:Vx,onboardingRunId:Kx,onboardingWizardVisible:qx,openWizardFromSidebar:td,wizardStartStep:Gx,hasExistingConfig:Jx,wizardCalendars:Yx,wizardInitialSelection:Zx,wizardInitialStrategy:Xx,wizardInitialAllDayHours:Qx,wizardInitialTotalHours:eC,wizardInitialTargetsConfig:tC,wizardInitialDeckSettings:aC,wizardInitialReportingConfig:oC,wizardInitialDashboardMode:rC,wizardInitialCategories:nC,wizardInitialAssignments:sC,isOnboardingSaving:lC,isSnapshotSaving:iC,snapshotNotice:cC,evaluateOnboarding:ad,handleWizardComplete:dC,handleWizardSkip:uC,handleWizardClose:fC,handleWizardSaveSnapshot:gC}=F1({onboardingState:qa,calendars:tt,selected:Ke,groupsById:rt,targetsConfig:Re,deckSettings:Jt,reportingConfig:Ca,hasInitialLoad:Z,actions:ed}),pC=async K=>{await dC(K),K!=null&&K.dashboardMode&&q(K.dashboardMode)},hC=async K=>{K!=null&&K.dashboardMode&&q(K.dashboardMode),await ed.saveStep(K)};async function Oa(){await tr(),Z.value||(Z.value=!0),ad()}const{showCollapsedRangeControls:mC,rangeToggleLabel:vC,rangeDateLabel:Ds,loadCurrent:od,toggleRangeCollapsed:Es,goPrevious:Ls,goNext:Ns}=H1({navOpen:o,range:c,offset:d,from:ft,to:bt,isLoading:pt,performLoad:()=>Oa()}),{shortcutsOpen:bC,openShortcuts:yC,closeShortcuts:wC,shortcutGroups:kC}=J1({goPrevious:Ls,goNext:Ns,toggleRange:Es,saveNotes:()=>W(),openConfigPanel:()=>l(),toggleEditLayout:()=>{Y.value=!Y.value},openWidgetOptions:()=>{var K,ie;Y.value&&((ie=(K=sd.value)==null?void 0:K.openOptionsForSelected)==null||ie.call(K))},ensureSidebarVisible:l,onOpen:({source:K})=>o0("shortcuts_opened",{source:K})}),rd=le("active"),nd=D(()=>c.value==="month"?"Month":"Week"),sd=le(null);function _C(K){const ie=new Date(Date.UTC(K.getFullYear(),K.getMonth(),K.getDate())),_e=ie.getUTCDay()||7;ie.setUTCDate(ie.getUTCDate()+4-_e);const Ce=new Date(Date.UTC(ie.getUTCFullYear(),0,1));return Math.ceil(((ie.getTime()-Ce.getTime())/864e5+1)/7)}const xC=D(()=>{const K=new Date(ft.value);return Number.isFinite(K.getTime())?c.value==="month"?`MONTH ${K.getMonth()+1}`:`WEEK ${_C(K)}`:c.value.toUpperCase()}),CC=D(()=>Ds.value),Is=D(()=>{const K=ua(Re.value);return c.value==="month"&&(K.totalHours=ka(K.totalHours),K.categories=K.categories.map(ie=>({...ie,targetHours:ka(ie.targetHours)}))),K}),ld=D(()=>{const K=Is.value;try{return ac({config:K,stats:Gt,byDay:xa.value||[],byCal:Ba.value||[],groupsById:rt.value||{},range:c.value,from:ft.value,to:bt.value})}catch(ie){return console.error("[opsdash] targets summary failed",ie),tc(K)}}),Bs=D(()=>{if(c.value==="month"){const K=Xe.value||{};if(K&&Object.keys(K).length>0)return K;const ie=Et.value||{},_e={};return Object.entries(ie).forEach(([Ce,Ge])=>{const Ve=Number(Ge);Number.isFinite(Ve)&&(_e[Ce]=ka(Ve))}),_e}return Et.value||{}}),Os=D(()=>{var K;return{...ec(),...((K=Re.value)==null?void 0:K.activityCard)??{}}}),Ps=D(()=>{var _e;const K=co(),ie=((_e=Re.value)==null?void 0:_e.balance)??K;return{...K,...ie,thresholds:{...K.thresholds,...ie.thresholds??{}},relations:{...K.relations,...ie.relations??{}},trend:{...K.trend,...ie.trend??{}},dayparts:{...K.dayparts,...ie.dayparts??{}},ui:{...K.ui,...ie.ui??{}}}}),SC=D(()=>({showNotes:!!Ps.value.ui.showNotes})),$C=D(()=>{var K;return Math.max(1,Math.min(6,((K=Ps.value.trend)==null?void 0:K.lookbackWeeks)??1))}),TC=D(()=>{if(!Ps.value.ui.showNotes)return"";const K=(I.value??"").trim();return K||(O.value??"").trim()}),{categoryLabelById:MC,categoryColorMap:id,calendarCategoryMap:Fs,calendarGroups:sn}=A1({calendars:tt,selected:Ke,groupsById:rt,colorsById:ct,targetsConfig:Is,targetsSummary:ld,byCal:Ba,currentTargets:Bs,isDebug:Ws}),{balanceOverview:AC}=E1({stats:Gt,categoryColorMap:id});D(()=>{var _e,Ce;if(!Os.value.showHint)return"";const ie=(Array.isArray((Ce=(_e=Re.value)==null?void 0:_e.balance)==null?void 0:Ce.categories)?Re.value.balance.categories:[]).map(Ge=>{const Ve=String(Ge??"").trim();if(!Ve)return"";const yt=MC.value[Ve];return yt||Ve.toUpperCase()}).filter(Ge=>Ge);return ie.length?`Mapping via Sidebar  ${ie.join(" / ")}`:""});const{calendarChartData:Hs,categoryChartsById:DC}=k1({charts:fa,colorsById:ct,calendarGroups:sn,calendarCategoryMap:Fs,targetsConfig:Is,currentTargets:Bs,activityCardConfig:Os}),EC=D(()=>{var Ge;const K=(Ge=Hs.value)==null?void 0:Ge.stacked;if(!K||!Array.isArray(K.labels)||!Array.isArray(K.series))return{};const ie=dd(new Date),_e=K.labels.findIndex(Ve=>String(Ve??"")===ie);if(_e<0)return{};const Ce={};return K.series.forEach(Ve=>{var bo;const yt=String((Ve==null?void 0:Ve.id)??""),jt=Number(((bo=Ve==null?void 0:Ve.data)==null?void 0:bo[_e])??0),js=Number.isFinite(jt)?Math.max(0,jt):0;yt&&(Ce[yt]=(Ce[yt]||0)+js)}),Ce}),LC=D(()=>{var yt;const K=(yt=Hs.value)==null?void 0:yt.stacked,ie=K==null?void 0:K.labels,_e=K==null?void 0:K.series;if(!K||!Array.isArray(ie)||!Array.isArray(_e))return{};const Ce=dd(new Date),Ge=ie.findIndex(jt=>String(jt??"")===Ce);if(Ge<0)return{};const Ve={};return _e.forEach(jt=>{var fd,gd;const js=String((jt==null?void 0:jt.id)??""),bo=(fd=Fs.value)==null?void 0:fd[js];if(!bo)return;const ud=Number(((gd=jt==null?void 0:jt.data)==null?void 0:gd[Ge])??0),sS=Number.isFinite(ud)?Math.max(0,ud):0;Ve[bo]=(Ve[bo]||0)+sS}),Ve}),NC=D(()=>sn.value.map(K=>({...K,todayHours:LC.value[K.id]||0}))),IC=D(()=>{const K=sn.value||[];return K.length&&[...K].sort((_e,Ce)=>(Ce.summary.actualHours||0)-(_e.summary.actualHours||0))[0]||null}),{timeSummary:BC,activitySummary:OC,activityDayOffTrend:PC}=D1({stats:Gt,byDay:xa,charts:fa,calendars:tt,selected:Ke,rangeLabel:nd,rangeStart:ft,rangeEnd:bt,offset:d,activeDayMode:rd,topCategory:IC});U1();function Ws(){return!1}const{appVersion:cd}=y1({pingUrl:()=>u("ping"),getJson:f,pkgVersion:String(r0.version),root:S}),{notesLabelPrev:FC,notesLabelCurr:HC,notesLabelPrevTitle:WC,notesLabelCurrTitle:zC}=V1(c),{widgetContext:RC}=a0({timeSummary:BC,activeDayMode:rd,targetsSummary:ld,targetsConfig:Re,stats:Gt,byDay:xa,byCal:Ba,groupsById:rt,calendarGroupsWithToday:NC,balanceOverview:AC,balanceCardConfig:SC,rangeLabel:nd,range:c,offset:d,from:ft,to:bt,trendLookbackWeeks:$C,balanceNote:TC,activitySummary:OC,activityCardConfig:Os,activityDayOffTrend:PC,deckSummaryBuckets:_s,deckLoading:an,deckError:on,deckTickerConfig:xs,deckFilter:rr,setDeckFilter:Ss,deckSettings:Jt,deckUrl:Cs,deckCards:or,uid:at,notesPrev:O,notesCurrDraft:I,notesHistory:w,notesLabelPrev:FC,notesLabelCurr:HC,notesLabelPrevTitle:WC,notesLabelCurrTitle:zC,isSavingNote:E,saveNotes:W,isLoading:pt,hasInitialLoad:Z,isLayoutEditing:Y,updateWidgetOptions:G,charts:fa,calendarChartData:Hs,categoryChartsById:DC,calendarGroups:sn,calendarCategoryMap:Fs,categoryColorMap:id,colorsById:ct,colorsByName:oa,currentTargets:Bs,calendarTodayHours:EC}),jC=D(()=>F.value==="quick"?"Quick preset":F.value==="pro"?"Pro preset":"Standard preset");function UC(K){return Number(K??0).toFixed(1)}function VC(K){const ie=Number(K??0);return Number.isFinite(ie)?Number.isInteger(ie)?String(ie):ie.toFixed(1):"0"}const zs=D(()=>{var _e;const K=(_e=qa.value)==null?void 0:_e.strategy;if(!K)return"";const ie=lc().find(Ce=>Ce.id===K);return(ie==null?void 0:ie.title)??String(K)}),KC=D(()=>{const K=new Map((tt.value||[]).map(_e=>[String((_e==null?void 0:_e.id)??""),String((_e==null?void 0:_e.displayname)??(_e==null?void 0:_e.name)??(_e==null?void 0:_e.calendar)??(_e==null?void 0:_e.id)??"Calendar")])),ie=(Ke.value||[]).map(_e=>K.get(String(_e))).filter(_e=>!!_e);return ie.length?ie:["None selected"]});function qC(K,ie,_e=", "){const Ce=K.filter(yt=>yt&&yt!=="None selected"),Ge=Ce.slice(0,ie),Ve=Ce.length-Ge.length;return Ge.length?Ve>0?`${Ge.join(_e)} +${Ve}`:Ge.join(_e):"None selected"}function ln(K,ie,_e="  "){const Ce=K.filter(Boolean),Ge=Ce.slice(0,ie),Ve=Ce.length-Ge.length;return Ge.length?Ve>0?`${Ge.join(_e)} +${Ve}`:Ge.join(_e):""}function GC(K){return K.replace(/\s+\s+/g," ").replace(/\s+h$/,"h")}const JC=D(()=>{var ie;const K=((ie=Re.value)==null?void 0:ie.categories)??[];return K.length?K.map(_e=>`${_e.label||_e.id}  ${VC(_e.targetHours)} h`):["No category targets"]}),YC=D(()=>{var K;return`${UC(((K=Re.value)==null?void 0:K.totalHours)??0)} h`}),ZC=D(()=>F.value==="pro"?"Pro layout":F.value==="quick"?"Quick layout":"Standard layout"),XC=D(()=>vo.value==="dark"?"Dark":"Light"),Rs=D(()=>{var Ge;if(!((Ge=Jt.value)!=null&&Ge.enabled))return{status:"Deck tab disabled",boards:[]};const K=new Set((Jt.value.hiddenBoards||[]).map(Ve=>Number(Ve))),ie=new Map;(or.value||[]).forEach(Ve=>{const yt=Number(Ve==null?void 0:Ve.boardId);if(!Number.isFinite(yt)||K.has(yt))return;const jt=String((Ve==null?void 0:Ve.boardTitle)??`Board ${yt}`);ie.has(yt)||ie.set(yt,jt)});const _e=Array.from(ie.values());return{status:`Showing ${_e.length} board${_e.length===1?"":"s"}`,boards:_e}}),QC=D(()=>{var K;return(K=Jt.value)!=null&&K.enabled?Rs.value.boards.length===1?`Deck  ${Rs.value.boards[0]}`:`Deck  ${Rs.value.boards.length} boards`:"Deck  off"}),eS=D(()=>{const K=JC.value;if(!K.length)return"";if(K.length===1&&K[0]==="No category targets")return"No targets";const ie=ln(K.map(GC),3);return ie?`${ie}  Total ${YC.value}`:""}),tS=D(()=>ln([zs.value&&zs.value!==""?`Strategy  ${zs.value}`:"",ZC.value],2)),aS=D(()=>qC(KC.value,2)),oS=D(()=>ln([`Theme  ${XC.value}`,QC.value],2)),rS=D(()=>{var K,ie,_e;return ln([(K=Ca.value)!=null&&K.enabled?"Recap on":"Recap off",(_e=(ie=Re.value)==null?void 0:ie.activityCard)!=null&&_e.showDayOffTrend?"Heatmap on":"Heatmap off"],2)}),nS=D(()=>({dashboard:tS.value,calendars:aS.value,categories:eS.value,preferences:oS.value,review:rS.value}));function dd(K){const ie=K.getFullYear(),_e=`${K.getMonth()+1}`.padStart(2,"0"),Ce=`${K.getDate()}`.padStart(2,"0");return`${ie}-${_e}-${Ce}`}return e0({performLoad:Oa,refreshPresets:sr,range:c,offset:d,onboardingState:qa,hasInitialLoad:Z,evaluateOnboarding:ad,dashboardMode:F}),(K,ie)=>{const _e=Mu("NcAppSidebarToggle");return k(),_("div",{id:"opsdash",class:Ne(["opsdash",[{"is-nav-collapsed":!L(o)},Ts.value]])},[(k(),it(_m,{key:L(Kx),visible:L(qx),calendars:L(Yx),"initial-selection":L(Zx),"initial-strategy":L(Xx),"onboarding-version":L(Na),closable:!L(Vx),"initial-theme-preference":L(mo),"system-theme":L($s),"initial-all-day-hours":L(Qx),"initial-total-hours":L(eC),"initial-targets-config":L(tC),"initial-targets-week":L(Et),"initial-deck-settings":L(aC),"initial-reporting-config":L(oC),"initial-dashboard-mode":L(rC),"initial-categories":L(nC),"initial-assignments":L(sC),"start-step":L(Gx),"has-existing-config":L(Jx),saving:L(lC),"snapshot-saving":L(iC),"snapshot-notice":L(cC),onClose:L(fC),onSkip:L(uC),onComplete:pC,onSaveCurrentConfig:L(gC),onSaveStep:hC},null,8,["visible","calendars","initial-selection","initial-strategy","onboarding-version","closable","initial-theme-preference","system-theme","initial-all-day-hours","initial-total-hours","initial-targets-config","initial-targets-week","initial-deck-settings","initial-reporting-config","initial-dashboard-mode","initial-categories","initial-assignments","start-step","has-existing-config","saving","snapshot-saving","snapshot-notice","onClose","onSkip","onSaveCurrentConfig"])),Ae(Um,{visible:i.value,theme:L(vo),presets:L(te),"is-loading":L(ke),"is-saving":L(st),"is-applying":L(We),warnings:L(Yt),onClose:ie[0]||(ie[0]=Ce=>i.value=!1),onSave:L(Ga),onLoad:L(lr),onDelete:L(As),onRefresh:L(sr),onClearWarnings:L(Ux),onExportConfig:L(rn),onImportConfig:L(nn)},null,8,["visible","theme","presets","is-loading","is-saving","is-applying","warnings","onSave","onLoad","onDelete","onRefresh","onClearWarnings","onExportConfig","onImportConfig"]),Ae(L(Xf),{"app-name":"Operational Dashboard","show-navigation":L(o)},{navigation:Je(()=>[Ae(wg,{id:"opsdash-sidebar","is-loading":L(pt),range:c.value,offset:d.value,from:L(ft),to:L(bt),"nav-toggle-label":L(n),"nav-toggle-icon":L(s),"dashboard-mode":F.value,"guided-hints":nS.value,onLoad:Oa,"onUpdate:range":ie[1]||(ie[1]=Ce=>{c.value=Ce,d.value=0,Oa()}),"onUpdate:offset":ie[2]||(ie[2]=Ce=>{d.value=Ce,Oa()}),onToggleNav:L(r),onRerunOnboarding:L(td),onOpenProfiles:ie[3]||(ie[3]=Ce=>i.value=!0),onOpenShortcuts:ie[4]||(ie[4]=Ce=>L(yC)(Ce,"button"))},null,8,["is-loading","range","offset","from","to","nav-toggle-label","nav-toggle-icon","dashboard-mode","guided-hints","onToggleNav","onRerunOnboarding"])]),"sidebar-toggle":Je(()=>[Ae(_e,{open:L(o),onToggle:L(r)},null,8,["open","onToggle"])]),default:Je(()=>[g("div",n0,[g("div",s0,[g("div",l0,[L(mC)?(k(),_("div",i0,[g("button",{class:"range-toolbar__btn range-toolbar__btn--icon sidebar-action-btn--icon",type:"button",onClick:ie[5]||(ie[5]=(...Ce)=>L(r)&&L(r)(...Ce)),"aria-expanded":L(o),"aria-controls":"opsdash-sidebar","aria-label":L(n)},H(L(s)),9,c0),g("button",{class:"range-toolbar__btn range-toolbar__btn--pill",type:"button",disabled:L(pt),onClick:ie[6]||(ie[6]=(...Ce)=>L(Es)&&L(Es)(...Ce)),"aria-pressed":c.value==="month"},H(L(vC)),9,d0),g("div",u0,[g("button",{class:"range-toolbar__btn sidebar-action-btn--icon",type:"button",disabled:L(pt),onClick:ie[7]||(ie[7]=(...Ce)=>L(Ls)&&L(Ls)(...Ce))},"  ",8,f0),g("span",{class:"range-toolbar__label range-toolbar__label--pill",title:L(Ds)},H(L(Ds)),9,g0),g("button",{class:"range-toolbar__btn sidebar-action-btn--icon",type:"button",disabled:L(pt),onClick:ie[8]||(ie[8]=(...Ce)=>L(Ns)&&L(Ns)(...Ce))},"  ",8,p0)]),g("button",{class:"range-toolbar__btn range-toolbar__btn--refresh sidebar-action-btn",type:"button",disabled:L(pt),onClick:ie[9]||(ie[9]=(...Ce)=>L(od)&&L(od)(...Ce))}," Refresh ",8,h0)])):ae("",!0),L(Rt)?(k(),_("div",{key:1,class:"banner warn",title:p.value},[ie[16]||(ie[16]=Fe(" Showing partial data to keep things fast. ",-1)),L(je)&&L(je).totalProcessed!=null?(k(),_(he,{key:0},[Fe(" Processed "+H(L(je).totalProcessed)+" items. ",1)],64)):ae("",!0)],8,m0)):ae("",!0),g("div",v0,[g("div",b0,[(k(!0),_(he,null,$e(L(b),Ce=>(k(),_("button",{key:Ce.id,type:"button",class:Ne(["tab-btn",{active:Ce.id===L(R),default:Ce.id===L(j)}]),role:"tab","aria-selected":Ce.id===L(R),onClick:Ge=>ve(Ce.id),onContextmenu:dt(Ge=>we(Ge,Ce.id),["prevent"])},[L(Y)&&ue.value===Ce.id?oo((k(),_("input",{key:0,class:"tab-input","onUpdate:modelValue":ie[10]||(ie[10]=Ge=>de.value=Ge),onBlur:Be,onKeydown:[io(dt(Be,["prevent"]),["enter"]),io(dt(Pe,["prevent"]),["esc"])],onClick:ie[11]||(ie[11]=dt(()=>{},["stop"]))},null,40,w0)),[[Ji,de.value]]):(k(),_(he,{key:1},[g("span",k0,H(Ce.label),1),Ce.id===L(j)?(k(),_("span",_0,"Default")):ae("",!0)],64))],42,y0))),128)),L(Y)?(k(),_("button",{key:0,type:"button",class:"tab-btn tab-btn--add",onClick:ie[12]||(ie[12]=Ce=>L(V)())}," + Tab ")):ae("",!0)]),g("div",x0,[g("button",{type:"button",class:"ghost-btn ghost-btn--edit",onClick:nt},[ie[17]||(ie[17]=g("span",{class:"ghost-btn__icon","aria-hidden":"true"},"",-1)),Fe(" "+H(L(Y)?"Done editing":"Edit layout"),1)]),g("span",C0,[g("span",{class:"range-badge__mode",textContent:H(xC.value)},null,8,S0),g("span",{class:"range-badge__span",textContent:H(CC.value)},null,8,$0)]),L(Y)?(k(),_("div",T0,[oo(g("select",{"onUpdate:modelValue":ie[13]||(ie[13]=Ce=>gt(ne)?ne.value=Ce:null),onChange:vt},[ie[18]||(ie[18]=g("option",{value:"",disabled:""},"Select widget",-1)),(k(!0),_(he,null,$e(L(oe),Ce=>(k(),_("option",{key:Ce.type,value:Ce.type},H(Ce.label),9,M0))),128))],544),[[Yi,L(ne)]]),g("button",{type:"button",class:"ghost-btn",onClick:ie[14]||(ie[14]=(...Ce)=>L(Q)&&L(Q)(...Ce))}," Reset ")])):ae("",!0)])]),ye.value.open?(k(),_("div",{key:2,class:"tab-context-menu",style:Le({top:`${ye.value.y}px`,left:`${ye.value.x}px`}),role:"menu"},[g("button",{type:"button",role:"menuitem",onClick:xe},"Set as default"),g("button",{type:"button",role:"menuitem",onClick:Me},"Rename"),g("button",{type:"button",role:"menuitem",disabled:L(b).length<=1,onClick:Te}," Remove ",8,A0)],4)):ae("",!0),g("div",D0,[Ae(o1,{ref_key:"layoutRef",ref:sd,widgets:L(X),context:L(RC),editable:L(Y),"widget-types":L(oe),"preset-label":jC.value,"onEdit:width":L(re),"onEdit:height":L(be),"onEdit:remove":L(z),"onEdit:move":L($),"onEdit:options":L(G),"onEdit:add":L(N),"onEdit:reorder":L(U),"onOpen:onboarding":Ms,"onReset:preset":ie[15]||(ie[15]=Ce=>L(q)(F.value.value)),"onSelect:cell":ze},null,8,["widgets","context","editable","widget-types","preset-label","onEdit:width","onEdit:height","onEdit:remove","onEdit:move","onEdit:options","onEdit:add","onEdit:reorder"])]),g("div",E0,[L(cd)?(k(),_(he,{key:0},[Fe(" Operational Dashboard  v"+H(L(cd))+"  Built by Blade34242 @ Gellert Innovation ",1)],64)):(k(),_(he,{key:1},[Fe(" Operational Dashboard  v0.4.4  Built by Blade34242 @ Gellert Innovation ")],64))])])])])]),_:1},8,["show-navigation"]),Ae(Xm,{visible:L(bC),groups:L(kC),theme:L(vo),onClose:L(wC)},null,8,["visible","groups","theme","onClose"])],2)}}});function ks(){const e=document.getElementById("app");if(e){try{console.log("[opsdash] booting");const t=Jf(L0);t.config.errorHandler=(r,n,s)=>{const i=n!=null&&n.type&&n.type.name?n.type.name:"",l={err:r,info:s,name:i,stack:r instanceof Error?r.stack:void 0},c=window;Array.isArray(c.__opsdashErrors)||(c.__opsdashErrors=[]),c.__opsdashErrors.push(l),console.error("[opsdash] Vue error",l)};const a=t.mount(e),o=window;o.__opsdashApp=t,o.__opsdashRoot=a,n1(),console.log("[opsdash] mounted")}catch(t){console.error("Mount failed",t)}return}document.readyState==="complete"||document.readyState==="interactive"?setTimeout(ks,50):window.addEventListener("DOMContentLoaded",ks,{once:!0})}ks();const N0={key:0,class:"title-row"},I0={class:"title"},B0={key:0,class:"pill"},O0=["title"],P0={class:"index-badge__ring","aria-hidden":"true"},F0={class:"index-badge__value"},H0={class:"index-badge__meta"},W0={key:0,class:"index-badge__range"},z0={key:0,class:"trend"},R0=["title"],j0={class:"trend-line-row"},U0={class:"trend-value"},V0={class:"trend-range"},K0={class:"trend-offset"},q0={key:1,class:"messages"},G0={key:2,class:"config"},J0={key:3,class:"empty"},Y0=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"BalanceIndexCard",props:{overview:{},rangeLabel:{},showBadge:{type:Boolean},showTrend:{type:Boolean},showMessages:{type:Boolean},showConfig:{type:Boolean},messageLimit:{},lookbackWeeks:{},loopbackCount:{},indexBasis:{},showCurrent:{type:Boolean,default:!0},labelMode:{},reverseTrend:{type:Boolean},from:{},to:{},rangeMode:{},thresholds:{},title:{},cardBg:{},showHeader:{type:Boolean},targetsCategories:{},trendColor:{}},setup(e){const t=e,a=D(()=>t.title||"Balance Index"),o=D(()=>t.showHeader!==!1),r=D(()=>(t.rangeMode||"").toLowerCase()==="month"?"mo":"wk"),n=D(()=>{var V,J,A;return Array.isArray((J=(V=t.overview)==null?void 0:V.trend)==null?void 0:J.history)?t.overview.trend.history:Array.isArray((A=t.overview)==null?void 0:A.trendHistory)?t.overview.trendHistory:[]}),s=D(()=>{const V=Number.isFinite(t.lookbackWeeks)?Number(t.lookbackWeeks):Number.isFinite(t.loopbackCount)?Number(t.loopbackCount):null;if(V!=null)return Math.max(0,Math.min(6,Math.floor(V)));const J=n.value.filter(A=>Number((A==null?void 0:A.offset)??0)>0);return Math.max(0,Math.min(6,J.length))}),i=D(()=>{const V=new Map,J=t.targetsCategories||[],A=t.indexBasis;return n.value.forEach((B,q)=>{const re=Number((B==null?void 0:B.offset)??(B==null?void 0:B.step)),be=Number.isFinite(re)&&re>0?Math.round(re):q+1,$={};Array.isArray(B==null?void 0:B.categories)&&B.categories.forEach(pe=>{$[String(pe.id)]=Number(pe.share??0)});const z=Object.values($),N=z.length?Math.max(...z):0,U=z.reduce((pe,ge)=>pe+ge,0);(N>1||U>1.5)&&Object.keys($).forEach(pe=>{$[pe]=$[pe]/100});const G=Object.values($).reduce((pe,ge)=>pe+ge,0);G>1.0001&&G>0&&Object.keys($).forEach(pe=>{$[pe]=$[pe]/G});const Q=Nc({shares:$,targets:J,basis:A});V.set(be,{index:Q,label:(B==null?void 0:B.label)||""})}),V}),l=D(()=>{var A;const V=[],J=s.value;for(let B=J;B>=1;B-=1){const q=i.value.get(B);V.push({offset:B,index:q==null?void 0:q.index,label:(q==null?void 0:q.label)||`-${B} ${r.value}`})}return V.push({offset:0,index:typeof((A=t.overview)==null?void 0:A.index)=="number"?t.overview.index:void 0,label:t.rangeLabel||""}),V}),c=D(()=>t.showCurrent!==!1),d=D(()=>{let V=l.value.slice();return c.value||(V=V.filter(J=>((J==null?void 0:J.offset)??0)!==0)),t.reverseTrend?V.slice().reverse():V}),p=D(()=>d.value.length>0),m=D(()=>{var V;return((V=t.overview)==null?void 0:V.warnings)||[]}),h=D(()=>{const V=m.value,J=Number.isFinite(t.messageLimit)?Number(t.messageLimit):1/0;return!Number.isFinite(J)||J<=0?V:V.slice(0,J)}),u=D(()=>({background:t.cardBg||void 0})),f=D(()=>{var A,B,q,re,be;const V=co(),J={noticeAbove:((A=t.thresholds)==null?void 0:A.noticeAbove)??V.thresholds.noticeAbove,noticeBelow:((B=t.thresholds)==null?void 0:B.noticeBelow)??V.thresholds.noticeBelow,warnAbove:((q=t.thresholds)==null?void 0:q.warnAbove)??V.thresholds.warnAbove,warnBelow:((re=t.thresholds)==null?void 0:re.warnBelow)??V.thresholds.warnBelow,warnIndex:((be=t.thresholds)==null?void 0:be.warnIndex)??V.thresholds.warnIndex};return{basis:t.indexBasis||V.index.basis,...J}}),y=D(()=>{const V=t.showTrend===!1||!p.value,J=t.showMessages===!1||h.value.length===0,A=t.showConfig===!1;return V&&J&&A}),x=D(()=>{const V=s.value;if(V<=0)return"";const J=r.value==="mo"?"month":"week";return`Last ${V} ${V===1?J:`${J}s`}`}),S=D(()=>{var A;const V=(A=t.overview)==null?void 0:A.index,J=typeof V=="number"?V:Number(V??NaN);return Number.isFinite(J)?Math.max(0,Math.min(1,J)):null}),M=D(()=>I(S.value??void 0)),T=D(()=>{const V=S.value;if(V==null)return{};const J=Math.round(V*100);let A="#dc2626";return V>=.8?A="#16a34a":V>=.65&&(A="#f59e0b"),{"--index-fill":`${J}%`,"--index-color":A}}),O=D(()=>S.value==null?"":`Balance index ${S.value.toFixed(2)}`),I=V=>Number.isFinite(V)?V.toFixed(2):"",w=D(()=>t.trendColor||"#2563EB"),E=D(()=>{const V=(t.labelMode||"period").toString().toLowerCase();return V==="date"||V==="offset"?V:"period"}),P=D(()=>({gridTemplateColumns:`repeat(auto-fit, minmax(${E.value==="date"?108:88}px, 1fr))`}));function W(V,J){const A=V.replace("#",""),B=parseInt(A.substring(0,2),16),q=parseInt(A.substring(2,4),16),re=parseInt(A.substring(4,6),16),be=$=>Math.max(0,Math.min(255,Math.round($*(1-J))));return`rgb(${be(B)}, ${be(q)}, ${be(re)})`}const Z=V=>{const J=w.value,A=d.value[V],B=Number((A==null?void 0:A.index)??0),q=Math.min(1,Math.max(0,1-B)),re=W(J,q*.6);return{background:re,boxShadow:V===0?`0 0 0 2px color-mix(in oklab, ${re}, #ffffff 60%)`:void 0}},F=V=>{if(E.value!=="date")return"";const J=d.value[V],A=((J==null?void 0:J.offset)??0)===0;return(J==null?void 0:J.label)||A&&t.rangeLabel||""},C=V=>!!F(V),v=V=>{var A;if(E.value!=="offset")return"";const J=((A=d.value[V])==null?void 0:A.offset)??V;return J===0?"Current":`-${J}`},b=V=>{var B;if(E.value!=="date")return"";const J=F(V);return J||((((B=d.value[V])==null?void 0:B.offset)??V)===0&&t.rangeLabel?t.rangeLabel:"")};function j(V){const J=new Date(Date.UTC(V.getFullYear(),V.getMonth(),V.getDate())),A=J.getUTCDay()||7;J.setUTCDate(J.getUTCDate()+4-A);const B=new Date(Date.UTC(J.getUTCFullYear(),0,1));return Math.ceil(((J.getTime()-B.getTime())/864e5+1)/7)}const R=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"2-digit"});function Y(V,J){const A=new Date(V);return A.setDate(A.getDate()+J),A}function ne(V,J){const A=new Date(V);return A.setMonth(A.getMonth()+J),A}function X(V){return new Date(V.getFullYear(),V.getMonth()+1,0)}function oe(V){return V?/^-\d+\s*(wk|mo)$/i.test(V.trim()):!0}function se(V,J){if(!V||!J)return"";const A=R.format(V),B=R.format(J);return A===B?A:`${A}${B}`}function fe(V){var $,z;const J=(($=d.value[V])==null?void 0:$.offset)??V;if(!t.from||!t.to){const N=(z=d.value[V])==null?void 0:z.label;return oe(N)?"":N||""}const A=(t.rangeMode||"").toLowerCase(),B=new Date(t.from),q=new Date(t.to);if(Number.isNaN(B.getTime())||Number.isNaN(q.getTime()))return"";if(A==="month"){const N=ne(B,-J),U=X(N);return se(N,U)}const re=Y(B,-7*J),be=Y(q,-7*J);return se(re,be)}function ce(V){var $;const J=(($=d.value[V])==null?void 0:$.offset)??V,A=(t.rangeMode||"").toLowerCase();if(!t.from)return J===0?"Current":`- ${J} wk`;const B=A==="month"?ne(new Date(t.from),-J):Y(new Date(t.from),-7*J);if(Number.isNaN(B.getTime()))return J===0?"Current":`- ${J} wk`;if(A==="month"){B.getMonth()+1;const z=new Date(B),N=new Date(t.from).getMonth()+1;return`MONTH ${J===0?N:z.getMonth()+1}`}const q=j(B),re=j(new Date(t.from));return`WEEK ${J===0?re:q}`}return(V,J)=>(k(),_("div",{class:"balance-card",style:Le(u.value)},[g("div",{class:Ne(["header",{compact:y.value}])},[o.value?(k(),_("div",N0,[g("span",I0,H(a.value),1),x.value&&V.showTrend?(k(),_("span",B0,H(x.value),1)):ae("",!0)])):ae("",!0),V.overview?(k(),_("div",{key:1,class:Ne(["index",{centered:y.value}])},[g("div",{class:"index-badge",style:Le(T.value),title:O.value},[g("div",P0,[g("span",F0,H(M.value),1)]),g("div",H0,[J[0]||(J[0]=g("div",{class:"index-badge__label"},"Current index",-1)),V.rangeLabel?(k(),_("div",W0,H(V.rangeLabel),1)):ae("",!0)])],12,O0)],2)):ae("",!0)],2),V.showTrend&&p.value?(k(),_("div",z0,[g("div",{class:"trend-line",style:Le(P.value)},[(k(!0),_(he,null,$e(d.value,(A,B)=>(k(),_("div",{key:B,class:Ne(["trend-block",{current:A.offset===0,"no-range":!C(B)}]),title:A.label||"",style:Le(Z(B))},[g("div",j0,[g("span",U0,H(I(A.index)),1),g("span",V0,H(E.value==="date"?fe(B)||b(B):""),1),g("span",K0,[E.value==="period"?(k(),_(he,{key:0},[Fe(H(ce(B)),1)],64)):E.value==="offset"?(k(),_(he,{key:1},[Fe(H(v(B)),1)],64)):ae("",!0)])])],14,R0))),128))],4)])):ae("",!0),V.showMessages&&h.value.length?(k(),_("div",q0,[J[1]||(J[1]=g("div",{class:"section-title"},"Messages",-1)),g("ul",null,[(k(!0),_(he,null,$e(h.value,(A,B)=>(k(),_("li",{key:B},H(A),1))),128))])])):ae("",!0),V.showConfig?(k(),_("div",G0,[g("div",null,"Basis: "+H(f.value.basis),1),g("div",null,"Notice : +"+H(f.value.noticeAbove??"")+" / -"+H(f.value.noticeBelow??""),1),g("div",null,"Warn : +"+H(f.value.warnAbove??"")+" / -"+H(f.value.warnBelow??""),1),g("div",null,"Warn index: "+H(f.value.warnIndex??""),1)])):ae("",!0),V.overview?ae("",!0):(k(),_("div",J0,"No balance data."))],4))}}),[["__scopeId","data-v-e115cf77"]])},Symbol.toStringTag,{value:"Module"})),Z0={key:0,class:"mix-header"},X0={class:"mix-title"},Q0={class:"mix-subtitle"},ew={key:0,class:"mix-badge"},tw={class:"mix-column-label mix-column-label--current"},aw={key:2,class:"mix-list"},ow={class:"mix-label"},rw=["title"],nw={class:"mix-cell__value"},sw={key:3,class:"hint"},lw=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"CategoryMixTrendCard",props:{overview:{},rangeMode:{},lookbackWeeks:{},showBadge:{type:Boolean},showHeader:{type:Boolean},colorMode:{},density:{},labelMode:{},squareCells:{type:Boolean},rangeLabel:{},from:{},to:{},title:{},cardBg:{},toneLowColor:{},toneHighColor:{},shareLowColor:{},shareHighColor:{}},setup(e){const t=e,a=D(()=>t.showHeader!==!1),o=D(()=>t.density==="dense"?"dense":"normal"),r=D(()=>{const A=(t.labelMode||"period").toString().toLowerCase();return A==="offset"||A==="label"||A==="compact"||A==="date"?A:"period"}),n=D(()=>t.squareCells===!0),s=D(()=>{const A=t.colorMode;return A==="trend"||A==="share"||A==="hybrid"?A:"hybrid"}),i=D(()=>{var A,B;return t.showBadge===!1?"":((B=(A=t.overview)==null?void 0:A.trend)==null?void 0:B.badge)??""}),l=D(()=>t.rangeMode==="month"?"MO":"WE"),c=D(()=>t.rangeMode==="month"?"M":"W"),d=D(()=>X()),p=D(()=>Math.max(1,Math.min(4,t.lookbackWeeks||1))),m=D(()=>t.title||"Category mix trend"),h=D(()=>({background:t.cardBg||void 0})),u=D(()=>{var B,q,re;const A=((q=(B=t.overview)==null?void 0:B.trend)==null?void 0:q.history)??((re=t.overview)==null?void 0:re.trendHistory)??[];return Array.isArray(A)?A.map(be=>({offset:Number((be==null?void 0:be.offset)??(be==null?void 0:be.step)??0)||0,label:String((be==null?void 0:be.label)??""),categories:Array.isArray(be==null?void 0:be.categories)?be.categories.map($=>({id:String(($==null?void 0:$.id)??""),label:String(($==null?void 0:$.label)??""),share:Number(($==null?void 0:$.share)??0)||0})):[]})).filter(be=>be.offset>0):[]}),f=A=>`-${A} ${l.value}`,y=(A,B)=>r.value==="label"&&B?B:r.value==="date"?Y(A,B)||f(A):r.value==="offset"?`-${A}`:r.value==="compact"?`${c.value}-${A}`:ne(A),x=D(()=>{if(!t.overview)return[];const A=p.value,B=new Map;return u.value.forEach(q=>{const re=Math.max(1,Math.min(12,Math.round(q.offset)));if(!re||re>A)return;const be={};q.categories.forEach($=>{$.id&&(be[$.id]=Number.isFinite($.share)?$.share:0)}),B.set(re,{offset:re,label:y(re,q.label),shares:be})}),Array.from(B.values()).sort((q,re)=>re.offset-q.offset)}),S=D(()=>x.value.length+1),M=D(()=>({gridTemplateColumns:`minmax(0, var(--mix-label-width, 52px)) repeat(${Math.max(S.value,1)}, minmax(0, 1fr))`})),T=D(()=>({gridTemplateColumns:`repeat(${Math.max(S.value,1)}, minmax(0, 1fr))`})),O=D(()=>{const A=oe(t.toneLowColor)||"#e11d48",B=oe(t.toneHighColor)||"#10b981",q=se(A,B,.5);return{down:V(A),flat:V(q),up:V(B)}}),I=D(()=>{const A=oe(t.shareLowColor)||"#e2e8f0",B=oe(t.shareHighColor)||"#60a5fa";return{low:A,high:B}}),w=A=>{const B=J(A,0,100)/100;return se(I.value.low,I.value.high,B)},E=A=>A>1?"up":A<-1?"down":"flat",P=D(()=>t.overview?(t.overview.categories??[]).map(B=>{const q=x.value.map(z=>({label:z.label,share:z.shares[B.id]??0,isCurrent:!1})),re=typeof B.share=="number"?B.share:0,be=[...q,{label:d.value,share:re,isCurrent:!0}],$=be.map((z,N)=>{const U=N===0?z.share:be[N-1].share,G=z.share-U,Q=N===0?"flat":E(G),pe=s.value,ge=O.value[Q],de=w(z.share),ue=V(de),ye=pe==="trend"?ge.background:de,me=pe==="trend"?ge.color:ue.color;return{label:z.label,share:z.share,isCurrent:!!z.isCurrent,trend:Q,style:{"--mix-bg":ye,"--mix-fg":me,"--mix-accent":ge.background}}});return{id:B.id,label:B.label,cells:$}}):[]),W=D(()=>{var B;const A=p.value;if(A>1){const q=t.rangeMode==="month"?"months":"weeks";return`History  last ${A} ${q}`}return A===1&&x.value.length?((B=x.value[x.value.length-1])==null?void 0:B.label)||f(1):f(A||1)}),Z=A=>`${Math.max(0,Math.round(A))}%`,F=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"2-digit"});function C(A,B){const q=new Date(A);return q.setDate(q.getDate()+B),q}function v(A,B){const q=new Date(A);return q.setMonth(q.getMonth()+B),q}function b(A){return new Date(A.getFullYear(),A.getMonth()+1,0)}function j(A){const B=new Date(Date.UTC(A.getFullYear(),A.getMonth(),A.getDate())),q=B.getUTCDay()||7;B.setUTCDate(B.getUTCDate()+4-q);const re=new Date(Date.UTC(B.getUTCFullYear(),0,1));return Math.ceil(((B.getTime()-re.getTime())/864e5+1)/7)}function R(A,B){if(!A||!B)return"";const q=F.format(A),re=F.format(B);return q===re?q:`${q}${re}`}function Y(A,B){if(!t.from||!t.to)return B||"";const q=(t.rangeMode||"").toLowerCase(),re=new Date(t.from),be=new Date(t.to);if(Number.isNaN(re.getTime())||Number.isNaN(be.getTime()))return B||"";if(q==="month"){const N=v(re,-A),U=b(N);return R(N,U)}const $=C(re,-7*A),z=C(be,-7*A);return R($,z)}function ne(A){const B=(t.rangeMode||"").toLowerCase();if(!t.from)return A===0?"Current":B==="month"?`-${A} mo`:`-${A} wk`;const q=B==="month"?v(new Date(t.from),-A):C(new Date(t.from),-7*A);if(Number.isNaN(q.getTime()))return A===0?"Current":B==="month"?`-${A} mo`:`-${A} wk`;if(B==="month"){const $=new Date(t.from).getMonth()+1;return`MONTH ${A===0?$:q.getMonth()+1}`}const re=j(new Date(t.from));return`WEEK ${A===0?re:j(q)}`}function X(){return r.value==="offset"?"Current":r.value==="compact"?"CUR":r.value==="label"?t.rangeLabel||(t.rangeMode==="month"?"This month":"This week"):r.value==="date"?Y(0,t.rangeLabel||"")||(t.rangeMode==="month"?"This month":"This week"):ne(0)}function oe(A){if(!A||typeof A!="string")return null;const B=A.trim();return/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(B)?B:null}function se(A,B,q=.5){const re=fe(A),be=fe(B);if(!re||!be)return A;const $=J(Math.round(re.r+(be.r-re.r)*q),0,255),z=J(Math.round(re.g+(be.g-re.g)*q),0,255),N=J(Math.round(re.b+(be.b-re.b)*q),0,255);return`#${[$,z,N].map(U=>U.toString(16).padStart(2,"0")).join("")}`}function fe(A){const B=A.replace("#","");if(B.length===3){const[q,re,be]=B.split("").map($=>parseInt($.repeat(2),16));return{r:q,g:re,b:be}}if(B.length===6){const q=parseInt(B.slice(0,2),16),re=parseInt(B.slice(2,4),16),be=parseInt(B.slice(4,6),16);return{r:q,g:re,b:be}}return null}function ce(A){const B=fe(A);return B?(.2126*B.r+.7152*B.g+.0722*B.b)/255:0}function V(A){const B=ce(A)>.6?"#0f172a":"#fff";return{background:A,color:B}}function J(A,B,q){return Math.min(q,Math.max(B,A))}return(A,B)=>(k(),_("div",{class:Ne(["card mix-card",{"mix-card--no-header":!a.value,"mix-card--dense":o.value==="dense","mix-card--square":n.value}]),style:Le(h.value)},[a.value?(k(),_("div",Z0,[g("div",null,[g("div",X0,H(m.value),1),g("div",Q0,H(W.value),1)]),i.value?(k(),_("span",ew,H(i.value),1)):ae("",!0)])):ae("",!0),x.value.length||P.value.length?(k(),_("div",{key:1,class:"mix-columns",style:Le(M.value)},[B[0]||(B[0]=g("span",{class:"mix-column-label mix-column-label--label"},"CAT",-1)),(k(!0),_(he,null,$e(x.value,q=>(k(),_("span",{key:`col-${q.offset}`,class:"mix-column-label"},H(q.label),1))),128)),g("span",tw,H(d.value),1)],4)):ae("",!0),P.value.length?(k(),_("ul",aw,[(k(!0),_(he,null,$e(P.value,q=>(k(),_("li",{key:q.id,class:"mix-row"},[g("span",ow,H(q.label)+":",1),g("div",{class:"mix-cells",style:Le(T.value)},[(k(!0),_(he,null,$e(q.cells,(re,be)=>(k(),_("div",{key:`${q.id}-cell-${be}`,class:Ne(["mix-cell",[`mix-cell--trend-${re.trend}`,`mix-cell--mode-${s.value}`,{"mix-cell--current":re.isCurrent}]]),style:Le(re.style),title:`${q.label}  ${re.label}  ${Z(re.share)}`},[g("span",nw,H(Z(re.share)),1)],14,rw))),128))],4)]))),128))])):(k(),_("div",sw,"No category mix history."))],6))}}),[["__scopeId","data-v-56c9c298"]])},Symbol.toStringTag,{value:"Module"}));function po(e){if(!e)return null;const t=window.devicePixelRatio||1,a=e.getBoundingClientRect();if(a.width<2||a.height<2)return null;const o=Math.floor(a.width*t),r=Math.floor(a.height*t);e.width!==o&&(e.width=o),e.height!==r&&(e.height=r);const n=e.getContext("2d");return n?(n.setTransform(t,0,0,t,0,0),n):null}function Ht(e,t,a){var s;if(typeof document>"u")return a;const o=((s=e==null?void 0:e.closest)==null?void 0:s.call(e,"#opsdash"))??document.getElementById("opsdash"),r=o?getComputedStyle(o):null;return(r==null?void 0:r.getPropertyValue(t).trim())||a}function ho(e){const t=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(e||"");return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Yc(e,t,a){const o=n=>Math.max(0,Math.min(255,Math.round(n))),r=n=>o(n).toString(16).padStart(2,"0");return`#${r(e)}${r(t)}${r(a)}`}function Zc(e){const a=Math.pow((h=>h<0?0:h>1?1:h)(e),.6),o=typeof document<"u"?document.getElementById("opsdash"):null,r=o?getComputedStyle(o):null,n=(r==null?void 0:r.getPropertyValue("--heatmap-low").trim())||"#e0f2fe",s=(r==null?void 0:r.getPropertyValue("--heatmap-high").trim())||"#7c3aed",i=ho(n),l=ho(s);if(!i||!l)return"#7c3aed";const c=(h,u,f)=>Math.round(h+(u-h)*f),d=c(i.r,l.r,a),p=c(i.g,l.g,a),m=c(i.b,l.b,a);return`rgb(${d}, ${p}, ${m})`}const iw=Ie({__name:"GroupedBars",props:{data:{},showLabels:{type:Boolean},xLabel:{},yLabel:{}},setup(e){const t=e,a=le(null);let o=null,r=null;function n(l){const c=Math.max(0,Number(l)||0);return(Math.round(c*10)/10).toFixed(1)}function s(){const l=a.value;if(!l||!t.data)return;const c=po(l);if(!c)return;const d=getComputedStyle(l),p=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-scale"))||1),m=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-space"))||p),h=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-density"))||1),u=p*h,f=l.clientWidth,y=l.clientHeight,x=28*m,S=x*1.4,M=y-x,T=f-x,O=Ht(l,"--line","#e5e7eb"),I=Ht(l,"--fg","#0f172a");c.clearRect(0,0,f,y),c.strokeStyle=O,c.lineWidth=1,c.beginPath(),c.moveTo(S,M),c.lineTo(T,M),c.moveTo(S,M),c.lineTo(S,x),c.stroke(),c.fillStyle=I,c.font=`${12*u}px ui-sans-serif,system-ui`;const w=String(t.xLabel??"").trim();if(w){const X=c.measureText(w).width,oe=Math.min(y-6*u,M+18*u);c.fillText(w,S+(T-S)/2-X/2,oe)}const E=String(t.yLabel??"").trim();E&&c.fillText(E,6*m,x*.8);const P=(t.data.labels||[]).map(X=>String(X??"")),W=Array.isArray(t.data.series)?t.data.series:[];if(!P.length||!W.length)return;const Z=[];W.forEach(X=>{(Array.isArray(X.data)?X.data:[]).forEach(se=>Z.push(Math.max(0,Number(se)||0)))});const F=Math.max(1,...Z),C=P.length,v=Math.max(1,W.length),b=10*m,j=4*m,R=Math.max(12*m,(T-S-b*(C+1))/C),Y=Math.max(4*m,(R-j*(v-1))/v),ne=(M-x)/F;P.forEach((X,oe)=>{const se=S+b+oe*(R+b);if(W.forEach((fe,ce)=>{var q;const V=Math.max(0,Number(((q=fe==null?void 0:fe.data)==null?void 0:q[oe])??0)),J=Math.max(0,V*ne),A=se+ce*(Y+j),B=M-J;if(c.fillStyle=(fe==null?void 0:fe.color)||"#93c5fd",c.fillRect(A,B,Y,J),t.showLabels!==!1&&J>14*u&&Y>20*u&&V>.01){c.fillStyle=I,c.font=`${12*u}px ui-sans-serif,system-ui`;const re=`${n(V)}h`,be=c.measureText(re).width;c.fillText(re,A+Y/2-be/2,B+J/2+4*u)}}),R>26*u){c.fillStyle=I,c.font=`${12*u}px ui-sans-serif,system-ui`;const fe=c.measureText(X).width;c.fillText(X,se+R/2-fe/2,M+14*u)}})}function i(){var l,c;try{o=new ResizeObserver(()=>s()),a.value&&o.observe(a.value)}catch{}try{const d=((l=a.value)==null?void 0:l.closest(".layout-item"))||((c=a.value)==null?void 0:c.parentElement);d&&(r=new MutationObserver(()=>s()),r.observe(d,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}return Tt(()=>{s(),i(),window.addEventListener("resize",s)}),Ct(()=>{try{window.removeEventListener("resize",s)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}o=null,r=null}),De(()=>t.data,()=>s(),{deep:!0}),De(()=>t.showLabels,()=>s()),(l,c)=>(k(),_("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),Xc=Ie({__name:"SimpleBars",props:{data:{},showLabels:{type:Boolean},xLabel:{},yLabel:{}},setup(e){const t=e,a=le(null);let o=null,r=null;function n(l){const c=Math.max(0,Number(l)||0);return(Math.round(c*10)/10).toFixed(1)}function s(){const l=a.value;if(!l||!t.data)return;const c=po(l);if(!c)return;const d=getComputedStyle(l),p=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-scale"))||1),m=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-space"))||p),h=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-density"))||1),u=p*h,f=l.clientWidth,y=l.clientHeight,x=28*m,S=x*1.4,M=y-x,T=f-x,O=Ht(l,"--line","#e5e7eb"),I=Ht(l,"--fg","#0f172a");c.clearRect(0,0,f,y),c.strokeStyle=O,c.lineWidth=1,c.beginPath(),c.moveTo(S,M),c.lineTo(T,M),c.moveTo(S,M),c.lineTo(S,x),c.stroke(),c.fillStyle=I,c.font=`${12*u}px ui-sans-serif,system-ui`;const w=String(t.xLabel??"").trim();if(w){const R=c.measureText(w).width,Y=Math.min(y-6*u,M+18*u);c.fillText(w,S+(T-S)/2-R/2,Y)}const E=String(t.yLabel??"").trim();E&&c.fillText(E,6*m,x*.8);const P=(t.data.labels||[]).map(R=>String(R??"")),W=(t.data.data||[]).map(R=>Math.max(0,Number(R)||0)),Z=Array.isArray(t.data.colors)?t.data.colors:[];if(!P.length||!W.length)return;const F=Math.max(1,...W),C=P.length,v=8*m,b=Math.max(6*m,(T-S-v*(C+1))/C),j=(M-x)/F;P.forEach((R,Y)=>{const ne=W[Y]??0,X=Math.max(0,ne*j),oe=S+v+Y*(b+v),se=M-X;if(c.fillStyle=Z[Y]||"#93c5fd",c.fillRect(oe,se,b,X),c.fillStyle=I,c.font=`${12*u}px ui-sans-serif,system-ui`,b>26){const fe=c.measureText(R).width;c.fillText(R,oe+b/2-fe/2,M+14*u)}if(t.showLabels!==!1&&X>14*u&&b>22*u&&ne>.01){const fe=`${n(ne)}h`,ce=c.measureText(fe).width;c.fillText(fe,oe+b/2-ce/2,se+X/2+4*u)}})}function i(){var l,c;try{o=new ResizeObserver(()=>s()),a.value&&o.observe(a.value)}catch{}try{const d=((l=a.value)==null?void 0:l.closest(".layout-item"))||((c=a.value)==null?void 0:c.parentElement);d&&(r=new MutationObserver(()=>s()),r.observe(d,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}return Tt(()=>{s(),i(),window.addEventListener("resize",s)}),Ct(()=>{try{window.removeEventListener("resize",s)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}o=null,r=null}),De(()=>t.data,()=>s(),{deep:!0}),De(()=>t.showLabels,()=>s()),(l,c)=>(k(),_("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),cw={key:0,class:"chart-widget__header"},dw={class:"chart-widget__title"},uw={key:0,class:"chart-widget__subtitle"},fw={key:3,class:"chart-widget__empty"},gw={key:4,class:"chart-widget__legend"},pw=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"ChartDowWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showLabels:{type:Boolean},xLabel:{},yLabel:{},chartData:{},groupedData:{},legendItems:{}},setup(e){const t=e,a=D(()=>t.showHeader!==!1),o=D(()=>t.title||"Day of week"),r=D(()=>({background:t.cardBg||void 0})),n=D(()=>t.legendItems||[]),s=D(()=>t.xLabel||""),i=D(()=>t.yLabel||"");return(l,c)=>(k(),_("div",{class:"card chart-widget",style:Le(r.value)},[a.value?(k(),_("div",cw,[g("div",dw,H(o.value),1),l.subtitle?(k(),_("div",uw,H(l.subtitle),1)):ae("",!0)])):ae("",!0),l.groupedData?(k(),it(iw,{key:1,data:l.groupedData,"show-labels":l.showLabels,"x-label":s.value,"y-label":i.value},null,8,["data","show-labels","x-label","y-label"])):l.chartData?(k(),it(Xc,{key:2,data:l.chartData,"show-labels":l.showLabels,"x-label":s.value,"y-label":i.value},null,8,["data","show-labels","x-label","y-label"])):(k(),_("div",fw,"No data")),n.value.length?(k(),_("ul",gw,[(k(!0),_(he,null,$e(n.value,d=>(k(),_("li",{key:d.id},[g("span",{class:"dot",style:Le({background:d.color})},null,4),g("span",null,H(d.label),1)]))),128))])):ae("",!0)],4))}}),[["__scopeId","data-v-05ee383b"]])},Symbol.toStringTag,{value:"Module"})),Qc=Ie({__name:"HeatmapCanvas",props:{hod:{},baseColor:{}},setup(e){const t=e,a=le(null);let o=null;function r(){var b;const n=a.value,s=t.hod;if(!n)return;if(!s){console.info("[opsdash] heatmap: no data provided");return}const i=po(n);if(!i)return;const l=getComputedStyle(n),c=Math.max(.5,Number.parseFloat(l.getPropertyValue("--widget-scale"))||1),d=Math.max(.5,Number.parseFloat(l.getPropertyValue("--widget-space"))||c),p=Math.max(.5,Number.parseFloat(l.getPropertyValue("--widget-density"))||1),m=c*p,h=n.clientWidth,u=n.clientHeight,f=s.dows||[],y=s.hours||[],x=s.matrix||[];i.clearRect(0,0,h,u);const S=36*d,M=S,T=S,O=h-S,I=u-S,w=(O-M)/Math.max(1,y.length),E=(I-T)/Math.max(1,f.length),P=Math.max(0,...x.flat())||1,W=typeof t.baseColor=="string"?t.baseColor.trim():"",Z=Ht(n,"--heatmap-low","#e0f2fe"),F=ho(Z),C=ho(W),v=j=>{const R=Math.max(0,Math.min(1,j)),Y=Math.pow(R,.6);if(!F||!C)return Zc(Y);const ne=(X,oe,se)=>Math.round(X+(oe-X)*se);return Yc(ne(F.r,C.r,Y),ne(F.g,C.g,Y),ne(F.b,C.b,Y))};f.length&&y.length&&console.info("[opsdash] heatmap draw",{rows:f.length,cols:y.length,vmax:P});for(let j=0;j<f.length;j++)for(let R=0;R<y.length;R++){const ne=(((b=x[j])==null?void 0:b[R])||0)/P,X=M+R*w,oe=T+j*E;i.fillStyle=v(ne),i.fillRect(X,oe,w-1,E-1)}i.fillStyle=Ht(n,"--fg","#0f172a"),i.font=`${12*m}px ui-sans-serif,system-ui`,f.forEach((j,R)=>i.fillText(j,8,T+R*E+12*m)),y.forEach((j,R)=>{R%2===0&&i.fillText(String(j),M+R*w+2,T-6*m)})}return Tt(async()=>{await ea(),r();try{o=new ResizeObserver(()=>r()),a.value&&o.observe(a.value)}catch{}window.addEventListener("resize",r)}),Ct(()=>{try{window.removeEventListener("resize",r)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}o=null}),De(()=>t.hod,()=>r(),{deep:!0}),(n,s)=>(k(),_("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),hw={class:"heatmap-lookback"},mw={class:"heatmap-lookback__stacked"},vw={class:"heatmap-lookback__label"},bw={key:0,class:"heatmap-lookback__legend"},yw={class:"heatmap-lookback__legend-scale"},ww={class:"heatmap-lookback__legend-meta"},kw={class:"heatmap-lookback__legend-weeks"},_w=Ye(Ie({__name:"HeatmapLookback",props:{entries:{},mode:{},showLegend:{type:Boolean}},setup(e){const t=e,a=le(null);let o=null;const r=D(()=>Array.isArray(t.entries)?t.entries:[]),n=D(()=>t.mode==="overlay"?"overlay":"stacked"),s=D(()=>t.showLegend!==!1),i=D(()=>{let h=0;return r.value.forEach(u=>{var f,y;(y=(f=u==null?void 0:u.hod)==null?void 0:f.matrix)==null||y.forEach(x=>{x.forEach(S=>{const M=Number(S);Number.isFinite(M)&&(h=Math.max(h,Math.max(0,M)))})})}),{max:h}}),l=D(()=>"Less hours"),c=D(()=>"More hours"),d=D(()=>{const h=i.value.max;return!Number.isFinite(h)||h<=0?"No activity yet":`0 to ${Number.isInteger(h)?String(h):h.toFixed(1)} h`});function p(){var ce;if(n.value!=="overlay")return;const h=r.value;if(!h.length)return;const u=a.value;if(!u)return;const f=po(u);if(!f)return;const y=getComputedStyle(u),x=Math.max(.5,Number.parseFloat(y.getPropertyValue("--widget-scale"))||1),S=Math.max(.5,Number.parseFloat(y.getPropertyValue("--widget-space"))||x),M=Math.max(.5,Number.parseFloat(y.getPropertyValue("--widget-density"))||1),T=x*M,O=u.clientWidth,I=u.clientHeight,w=(ce=h[0])==null?void 0:ce.hod,E=(w==null?void 0:w.dows)||[],P=(w==null?void 0:w.hours)||[];if(!E.length||!P.length)return;let W=0;h.forEach(V=>{var J,A;(A=(J=V.hod)==null?void 0:J.matrix)==null||A.forEach(B=>{B.forEach(q=>{W=Math.max(W,Math.max(0,Number(q)||0))})})}),W<=0&&(W=1);const Z=36*S,F=Z,C=Z,v=O-Z,b=I-Z,j=(v-F)/Math.max(1,P.length),R=(b-C)/Math.max(1,E.length),Y=Ht(u,"--heatmap-low","#e0f2fe"),ne=ho(Y),X=h.map(V=>ho(V.color)),oe=V=>Math.max(0,Math.min(1,V)),se=(V,J,A)=>Math.round(V+(J-V)*A),fe=Math.max(1,h.length);f.clearRect(0,0,O,I);for(let V=0;V<E.length;V++)for(let J=0;J<P.length;J++){const A=F+J*j,B=C+V*R,q=j/fe;h.forEach((re,be)=>{var Q,pe,ge;const $=Math.max(0,Number(((ge=(pe=(Q=re==null?void 0:re.hod)==null?void 0:Q.matrix)==null?void 0:pe[V])==null?void 0:ge[J])??0)),z=oe($/W),N=Math.pow(z,.6),U=X[be],G=ne&&U?Yc(se(ne.r,U.r,N),se(ne.g,U.g,N),se(ne.b,U.b,N)):Zc(N);f.fillStyle=G,f.fillRect(A+be*q,B,q,R-1)})}f.fillStyle=Ht(u,"--fg","#0f172a"),f.font=`${12*T}px ui-sans-serif,system-ui`,E.forEach((V,J)=>f.fillText(V,8,C+J*R+12*T)),P.forEach((V,J)=>{J%2===0&&f.fillText(String(V),F+J*j+2,C-6*T)})}function m(){try{o=new ResizeObserver(()=>p()),a.value&&o.observe(a.value)}catch{}window.addEventListener("resize",p)}return Tt(async()=>{await ea(),p(),m()}),Ct(()=>{try{window.removeEventListener("resize",p)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}o=null}),De(()=>[r.value,n.value],()=>{n.value==="overlay"&&ea().then(()=>p())},{deep:!0}),(h,u)=>(k(),_("div",hw,[oo(g("div",mw,[(k(!0),_(he,null,$e(r.value,f=>(k(),_("div",{key:f.id,class:"heatmap-lookback__panel"},[g("div",vw,[g("span",{class:"dot",style:Le({background:f.color})},null,4),g("span",null,H(f.label),1)]),Ae(Qc,{hod:f.hod,"base-color":f.color},null,8,["hod","base-color"])]))),128))],512),[[Hi,n.value==="stacked"]]),oo(g("canvas",{ref_key:"cv",ref:a,class:"chart heatmap-lookback__overlay"},null,512),[[Hi,n.value==="overlay"]]),s.value&&r.value.length?(k(),_("div",bw,[g("div",yw,[g("span",null,H(l.value),1),u[0]||(u[0]=g("span",{class:"heatmap-lookback__legend-bar","aria-hidden":"true"},null,-1)),g("span",null,H(c.value),1)]),g("div",ww,[g("span",null,H(d.value),1)]),g("ul",kw,[(k(!0),_(he,null,$e(r.value,f=>(k(),_("li",{key:f.id},[g("span",{class:"dot",style:Le({background:f.color})},null,4),g("span",null,H(f.label),1)]))),128))])])):ae("",!0)]))}}),[["__scopeId","data-v-d04eb3d7"]]),xw={key:0,class:"chart-widget__header"},Cw={class:"chart-widget__title"},Sw={key:0,class:"chart-widget__subtitle"},$w={key:1,class:"chart-widget__meta"},Tw={key:3,class:"chart-widget__empty"},Mw={key:4,class:"chart-widget__hint"},Aw=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"ChartHodWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showHint:{type:Boolean},showLegend:{type:Boolean},lookbackMode:{},lookbackWeeks:{},rangeMode:{},hodData:{},lookbackEntries:{}},setup(e){const t=e,a=D(()=>t.showHeader!==!1),o=D(()=>t.title||"Hours of day"),r=D(()=>({background:t.cardBg||void 0})),n=D(()=>t.lookbackEntries||[]),s=D(()=>t.showLegend!==!1),i=D(()=>t.lookbackMode||"stacked"),l=D(()=>{const c=typeof t.lookbackWeeks=="number"?Math.max(0,Math.round(t.lookbackWeeks)):0;if(!c)return"";const d=(t.rangeMode||"").toString().toLowerCase()==="month"?"month":"week";return`History  last ${c} ${c===1?d:`${d}s`}`});return(c,d)=>(k(),_("div",{class:"card chart-widget chart-widget--hod",style:Le(r.value)},[a.value?(k(),_("div",xw,[g("div",Cw,H(o.value),1),c.subtitle?(k(),_("div",Sw,H(c.subtitle),1)):ae("",!0),l.value?(k(),_("div",$w,H(l.value),1)):ae("",!0)])):ae("",!0),n.value.length?(k(),it(_w,{key:1,entries:n.value,mode:i.value,"show-legend":s.value},null,8,["entries","mode","show-legend"])):c.hodData?(k(),it(Qc,{key:2,hod:c.hodData},null,8,["hod"])):(k(),_("div",Tw,"No data")),c.showHint&&c.hodData?(k(),_("div",Mw,"247 Heatmap: hours by weekday and hour.")):ae("",!0)],4))}}),[["__scopeId","data-v-639549e5"]])},Symbol.toStringTag,{value:"Module"})),Dw={key:0,class:"chart-widget__header"},Ew={class:"chart-widget__title"},Lw={key:0,class:"chart-widget__subtitle"},Nw={key:2,class:"chart-widget__empty"},Iw={key:3,class:"chart-widget__legend"},Bw=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"ChartPerDayWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showLabels:{type:Boolean},xLabel:{},yLabel:{},chartData:{},legendItems:{}},setup(e){const t=e,a=D(()=>t.showHeader!==!1),o=D(()=>t.title||"Per-day totals"),r=D(()=>({background:t.cardBg||void 0})),n=D(()=>t.legendItems||[]),s=D(()=>t.xLabel||""),i=D(()=>t.yLabel||"");return(l,c)=>(k(),_("div",{class:"card chart-widget",style:Le(r.value)},[a.value?(k(),_("div",Dw,[g("div",Ew,H(o.value),1),l.subtitle?(k(),_("div",Lw,H(l.subtitle),1)):ae("",!0)])):ae("",!0),l.chartData?(k(),it(Xc,{key:1,data:l.chartData,"show-labels":l.showLabels,"x-label":s.value,"y-label":i.value},null,8,["data","show-labels","x-label","y-label"])):(k(),_("div",Nw,"No data")),n.value.length?(k(),_("ul",Iw,[(k(!0),_(he,null,$e(n.value,d=>(k(),_("li",{key:d.id},[g("span",{class:"dot",style:Le({background:d.color})},null,4),g("span",null,H(d.label),1)]))),128))])):ae("",!0)],4))}}),[["__scopeId","data-v-66cec46a"]])},Symbol.toStringTag,{value:"Module"})),Ow=Ye(Ie({__name:"PieChart",props:{data:{},colorsById:{},colorsByName:{},showLabels:{type:Boolean},highlightId:{}},setup(e){const t=e,a=le(null);let o=null,r=null,n=null;const s=le(null);function i(){const p=t.data,m=a.value;if(!m||!p)return;const h=po(m);if(!h)return;const u=getComputedStyle(m),f=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-scale"))||1),y=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-space"))||f),x=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-density"))||1),S=Math.max(.6,Number.parseFloat(u.getPropertyValue("--pie-scale"))||.85),M=f*x*S,T=m.clientWidth,O=m.clientHeight,I=T/2,w=O/2,E=Math.min(T,O)*(.35*y*S),P=p.data||[],W=p.labels||[],Z=p.ids||[],F=p.colors||[],C=[];for(let A=0;A<P.length;A++)(Number(P[A])||0)>0&&C.push(A);if(h.clearRect(0,0,T,O),C.length===0)return;const v=C.map(A=>Number(P[A])||0),b=C.map(A=>String(W[A]||"")),j=C.map(A=>String(Z[A]||"")),R=C.map(A=>F[A]),Y=v.reduce((A,B)=>A+Math.max(0,B),0)||1;let ne=-Math.PI/2;const X=Ht(m,"--line","#e5e7eb"),oe=Ht(m,"--fg","#0f172a"),se=Ht(m,"--bg","#ffffff");h.lineWidth=1,h.strokeStyle=X;const fe=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"];s.value&&!j.includes(s.value)&&(s.value=null);const ce=t.highlightId??s.value?String(t.highlightId??s.value):"",V=!!(ce&&j.includes(ce)),J=[];v.forEach((A,B)=>{var ge,de;const q=Math.max(0,A)/Y,re=ne+q*2*Math.PI,be=String((b==null?void 0:b[B])||""),$=String((j==null?void 0:j[B])||""),z=R[B],N=(ge=t.colorsById)==null?void 0:ge[$],U=(de=t.colorsByName)==null?void 0:de[be];let G=N||U||z||fe[B%fe.length];const Q=V&&$===ce,pe=V&&!Q;if(h.save(),pe&&(h.globalAlpha=.25),h.beginPath(),h.moveTo(I,w),h.arc(I,w,E,ne,re),h.closePath(),h.fillStyle=G,h.fill(),h.lineWidth=Q?2:1,h.strokeStyle=Q?"rgba(255,255,255,0.9)":X,h.stroke(),h.restore(),t.showLabels!==!1){const ue=(ne+re)/2,ye=I+Math.cos(ue)*(E+12*y*S),me=w+Math.sin(ue)*(E+12*y*S);h.save(),h.font=`${12*M}px ui-sans-serif,system-ui`,h.fillStyle=oe,h.strokeStyle=se,h.lineWidth=3,h.textAlign="center",h.textBaseline="middle";const ve=Math.max(0,Number(A)||0)/Y*100,we=`${b!=null&&b[B]?b[B]+" ":""}${Number(A).toFixed(2)}h  ${ve.toFixed(1)}%`;h.strokeText(we,ye,me),h.fillText(we,ye,me),h.restore()}J.push({start:ne,end:re,id:$}),ne=re}),n={cx:I,cy:w,r:E,segments:J}}function l(){var p,m;try{o=new ResizeObserver(()=>i()),a.value&&o.observe(a.value)}catch{}try{const h=((p=a.value)==null?void 0:p.closest(".layout-item"))||((m=a.value)==null?void 0:m.parentElement);h&&(r=new MutationObserver(()=>i()),r.observe(h,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}Tt(()=>{i(),l(),window.addEventListener("resize",i)}),Ct(()=>{try{window.removeEventListener("resize",i)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}try{const p=a.value;p&&(p.removeEventListener("mousemove",c),p.removeEventListener("mouseleave",d))}catch{}o=null,r=null}),De(()=>t.data,()=>i(),{deep:!0}),De(()=>t.colorsById,()=>i(),{deep:!0}),De(()=>t.showLabels,()=>i()),De(()=>t.highlightId,()=>i());function c(p){const m=a.value;if(!m||!n)return;const h=m.getBoundingClientRect(),u=p.clientX-h.left,f=p.clientY-h.top,y=u-n.cx,x=f-n.cy,S=Math.sqrt(y*y+x*x);if(!Number.isFinite(S)||S>n.r){s.value&&(s.value=null,i());return}let M=Math.atan2(x,y);M<-Math.PI/2&&(M+=Math.PI*2);const T=n.segments.find(I=>M>=I.start&&M<=I.end),O=T?T.id:null;O!==s.value&&(s.value=O,i())}function d(){s.value&&(s.value=null,i())}return De(()=>a.value,(p,m)=>{m&&(m.removeEventListener("mousemove",c),m.removeEventListener("mouseleave",d)),p&&(p.addEventListener("mousemove",c),p.addEventListener("mouseleave",d))},{immediate:!0}),(p,m)=>(k(),_("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),[["__scopeId","data-v-0b0f384d"]]),Pw={key:0,class:"chart-widget__header"},Fw={class:"chart-widget__title"},Hw={key:0,class:"chart-widget__subtitle"},Ww={key:2,class:"chart-widget__empty"},zw={key:3,class:"chart-widget__legend"},Rw=["onMouseenter","onFocus"],jw={class:"val"},Uw=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"ChartPieWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},compact:{type:Boolean},showLegend:{type:Boolean},showLabels:{type:Boolean},chartData:{},colorsById:{},colorsByName:{}},setup(e){const t=e,a=D(()=>t.showHeader!==!1),o=D(()=>t.title||"Pie chart"),r=D(()=>({background:t.cardBg||void 0})),n=D(()=>t.colorsById||{}),s=D(()=>t.colorsByName||{}),i=le(null),l=D(()=>{const c=t.chartData;if(!c||!Array.isArray(c.data))return[];const d=c.data.reduce((p,m)=>p+Math.max(0,Number(m)||0),0)||1;return c.data.map((p,m)=>{var S,M,T;const h=Math.max(0,Number(p)||0),u=String(((S=c.labels)==null?void 0:S[m])??""),f=String(((M=c.ids)==null?void 0:M[m])??u??m),y=((T=c.colors)==null?void 0:T[m])||n.value[f]||s.value[u]||"#60a5fa",x=h/d*100;return{id:f,label:u,color:y,value:`${h.toFixed(1)}h  ${x.toFixed(0)}%`}})});return(c,d)=>(k(),_("div",{class:"card chart-widget",style:Le(r.value)},[a.value?(k(),_("div",Pw,[g("div",Fw,H(o.value),1),c.subtitle?(k(),_("div",Hw,H(c.subtitle),1)):ae("",!0)])):ae("",!0),c.chartData?(k(),it(Ow,{key:1,data:c.chartData,"colors-by-id":n.value,"colors-by-name":s.value,"show-labels":c.showLabels,"highlight-id":i.value},null,8,["data","colors-by-id","colors-by-name","show-labels","highlight-id"])):(k(),_("div",Ww,"No data")),c.showLegend&&l.value.length?(k(),_("ul",zw,[(k(!0),_(he,null,$e(l.value,p=>(k(),_("li",{key:p.id,class:Ne({hovered:i.value===p.id}),onMouseenter:m=>i.value=p.id,onMouseleave:d[0]||(d[0]=m=>i.value=null),onFocus:m=>i.value=p.id,onBlur:d[1]||(d[1]=m=>i.value=null),tabindex:"0"},[g("span",{class:"dot",style:Le({background:p.color})},null,4),g("span",null,H(p.label),1),g("span",jw,H(p.value),1)],42,Rw))),128))])):ae("",!0)],4))}}),[["__scopeId","data-v-1a53cec2"]])},Symbol.toStringTag,{value:"Module"})),Vw=Ye(Ie({__name:"StackedBars",props:{stacked:{},colorsById:{},showLabels:{type:Boolean},highlightId:{}},setup(e){const t=e,a=le(null);let o=null,r=null,n=null;const s=le(null);function i(I,w,E,P,W){I.save(),W!=null&&W.font&&(I.font=W.font),W!=null&&W.align&&(I.textAlign=W.align),W!=null&&W.baseline&&(I.textBaseline=W.baseline),I.lineWidth=3,I.strokeStyle=(W==null?void 0:W.stroke)||"rgba(0,0,0,0.55)",I.strokeText(w,E,P),I.fillStyle=(W==null?void 0:W.fill)||"#ffffff",I.fillText(w,E,P),I.restore()}function l(I){const w=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(I||"");return w?{r:parseInt(w[1],16),g:parseInt(w[2],16),b:parseInt(w[3],16)}:null}function c(I,w){const E=l(I);return E&&(.2126*E.r+.7152*E.g+.0722*E.b)/255<.55?"#ffffff":w}function d(I){const w=Math.max(0,Number(I)||0);return(Math.round(w*10)/10).toFixed(1)}function p(I,w=.5){const E=l(I);if(!E)return I;const P=Math.max(0,Math.min(1,w)),W=Math.round(E.r+(255-E.r)*P),Z=Math.round(E.g+(255-E.g)*P),F=Math.round(E.b+(255-E.b)*P);return`rgb(${W},${Z},${F})`}function m(I,w=.5){const E=l(I);if(!E)return I;const P=Math.max(0,Math.min(1,w)),W=Math.round(E.r*(1-P)),Z=Math.round(E.g*(1-P)),F=Math.round(E.b*(1-P));return`rgb(${W},${Z},${F})`}function h(I,w){const{x:E,y:P,width:W,height:Z,baseColor:F,variant:C}=w,v=C==="mixed",b=Math.max(0,Math.min(1,Number(w.alphaScale))),j=Math.min(W*(v?.35:.22),6),R=Math.max(2,v?W*.45:W-j*2),Y=v?E+W-R-j:E+(W-R)/2,ne=p(F,v?.6:.45),X=m(F,v?.4:.35);I.save(),I.fillStyle=ne,I.globalAlpha=(v?.12:.16)*b,I.fillRect(Y,P,R,Z),I.restore(),I.save(),I.strokeStyle=X,I.lineWidth=v?1.25:1.5,I.globalAlpha=(v?.6:.75)*b,I.setLineDash([4,4]),I.strokeRect(Y,P,R,Z),I.restore(),I.save(),I.strokeStyle=X,I.globalAlpha=(v?.35:.45)*b,I.lineWidth=1,I.beginPath(),I.moveTo(Y,P),I.lineTo(Y+R,P),I.stroke(),I.restore()}function u(){const I=a.value;if(!I)return;const w=po(I);if(!w)return;const E=getComputedStyle(I),P=Math.max(.5,Number.parseFloat(E.getPropertyValue("--widget-scale"))||1),W=Math.max(.5,Number.parseFloat(E.getPropertyValue("--widget-space"))||P),Z=Math.max(.5,Number.parseFloat(E.getPropertyValue("--widget-density"))||1),F=Math.max(.6,Number.parseFloat(E.getPropertyValue("--stacked-scale"))||.85),C=P*Z*F,v=`${11*C}px ui-sans-serif,system-ui`,b=I.clientWidth,j=I.clientHeight,R=28*W,Y=R*1.4,ne=j-R,X=b-R,oe=Ht(I,"--line","#e5e7eb"),se=Ht(I,"--fg","#0f172a"),fe=Ht(I,"--bg","#ffffff");w.clearRect(0,0,b,j),w.strokeStyle=oe,w.lineWidth=1,w.beginPath(),w.moveTo(Y,ne),w.lineTo(X,ne),w.moveTo(Y,ne),w.lineTo(Y,R),w.stroke();const ce=t.stacked;if(ce&&ce.labels&&ce.series){const V=[];let J=ce.labels||[],A=ce.series||[];const B=S(J,A);J=B.labels,A=B.series;const q=A.map(xe=>String((xe==null?void 0:xe.id)??""));s.value&&!q.includes(s.value)&&(s.value=null);const re=t.highlightId??s.value?String(t.highlightId??s.value):"",be=!!(re&&q.includes(re)),$=J.map((xe,Te)=>A.reduce((Me,Be)=>{var Pe;return Me+Math.max(0,Number(((Pe=Be.data)==null?void 0:Pe[Te])||0))},0)),z=J.map((xe,Te)=>A.reduce((Me,Be)=>{var Pe;return Me+Math.max(0,Number(((Pe=Be.forecast)==null?void 0:Pe[Te])||0))},0)),N=$.map((xe,Te)=>xe+z[Te]),U=Math.max(1,...N),G=J.length||1,Q=8*W,pe=Math.max(6*W,(X-Y-Q*(G+1))/G),ge=Q*F,de=Math.max(4*W*F,pe*F),ue=de*G+ge*(G+1),ye=Y+Math.max(0,(X-Y-ue)/2),me=(ne-R)/U*F;let ve=0,we=0;J.forEach((xe,Te)=>{const Me=ye+ge+Te*(de+ge);let Be=ne,Pe=0;const ze=[];A.forEach(ct=>{var ft;const rt=Math.max(0,Number(((ft=ct.data)==null?void 0:ft[Te])||0)),Ke=rt*me;Be-=Ke;const pt=String(ct.id??""),Rt=t.colorsById[ct.id]||ct.color||"#93c5fd",je=be&&pt===re,at=be&&!je;if(Ke>.5&&(w.save(),at&&(w.globalAlpha=.25),w.fillStyle=Rt,w.fillRect(Me,Be,de,Ke),je&&(w.strokeStyle="rgba(255,255,255,0.9)",w.lineWidth=1.5,w.strokeRect(Me,Be,de,Ke)),w.restore()),t.showLabels!==!1&&rt>.01){const bt=d(rt);w.font=v;const Gt=w.measureText(bt).width;if(Ke>14*C&&de>Gt+6*C)w.save(),at&&(w.globalAlpha=.25),w.fillStyle=c(Rt,se),w.font=v,w.fillText(bt,Me+de/2-Gt/2,Be+Ke/2+4),w.restore();else if(Ke>.5){const xa=Be+Ke/2,fa=6*W,Et=Me+de+fa,Xe=Me-fa,Re=Et+Gt<=X,ga=Re?Et:Xe,tr=Re?"left":"right",ar=Re?Me+de:Me,Ca=Re?ga-4*W:ga+4*W;ze.push({y:xa,text:bt,align:tr,textX:ga,lineStartX:ar,lineEndX:Ca,alpha:at?.25:1})}}Ke>.5&&V.push({x:Me,y:Be,width:de,height:Ke,id:pt}),Pe+=rt});let nt=Be,He=0;if(A.forEach(ct=>{var ft;const rt=Math.max(0,Number(((ft=ct.forecast)==null?void 0:ft[Te])||0));if(rt<=0)return;const Ke=rt*me;if(nt-=Ke,He+=rt,Ke<=.5)return;const pt=String(ct.id??""),Rt=t.colorsById[ct.id]||ct.color||"#93c5fd",at=be&&!(be&&pt===re);h(w,{x:Me,y:nt,width:de,height:Ke,baseColor:Rt,variant:Pe>.01?"mixed":"future",alphaScale:at?.25:1})}),t.showLabels!==!1&&ze.length){const ct=12*C,rt=R+6*C,Ke=ne-6*C;ze.sort((je,at)=>je.y-at.y),ze.forEach((je,at)=>{at===0?je.y=Math.max(je.y,rt):je.y=Math.max(je.y,ze[at-1].y+ct)});const pt=ze[ze.length-1].y-Ke;pt>0&&ze.forEach(je=>{je.y-=pt});const Rt=rt-ze[0].y;Rt>0&&ze.forEach(je=>{je.y+=Rt}),w.save(),w.font=v,w.textBaseline="middle",ze.forEach(je=>{w.save(),w.globalAlpha=je.alpha,w.strokeStyle=oe,w.lineWidth=1,w.beginPath(),w.moveTo(je.lineStartX,je.y),w.lineTo(je.lineEndX,je.y),w.stroke(),w.fillStyle=se,w.textAlign=je.align,w.fillText(je.text,je.textX,je.y),w.restore()}),w.restore()}ve+=Pe,we+=He,w.fillStyle=se,w.font=`${12*C}px ui-sans-serif,system-ui`;const tt=M(String(J[Te]||""));if(de>26*C){const ct=w.measureText(tt).width;w.fillText(tt,Me+de/2-ct/2,ne+14*C)}const oa=He>.01?`~${d(Pe+He)}h`:Pe>.01?`${d(Pe)}h`:"";t.showLabels!==!1&&oa&&i(w,oa,Me+de/2,Math.max(R+4*C,nt-2),{align:"center",baseline:"bottom",font:`${11*C}px ui-sans-serif,system-ui`,fill:se,stroke:fe})});const Se=we>.01?`~${d(ve+we)}h expected`:`${d(ve)}h total`;t.showLabels!==!1&&i(w,Se,X-4,R+4*C,{align:"right",baseline:"top",font:`${12*C}px ui-sans-serif,system-ui`,fill:se,stroke:fe}),n={segments:V};return}n=null}function f(){var I,w;try{o=new ResizeObserver(()=>u()),a.value&&o.observe(a.value)}catch{}try{const E=((I=a.value)==null?void 0:I.closest(".layout-item"))||((w=a.value)==null?void 0:w.parentElement);E&&(r=new MutationObserver(()=>u()),r.observe(E,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}Tt(()=>{u(),f(),window.addEventListener("resize",u)}),Ct(()=>{try{window.removeEventListener("resize",u)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}try{const I=a.value;I&&(I.removeEventListener("mousemove",y),I.removeEventListener("mouseleave",x))}catch{}o=null,r=null}),De(()=>t.stacked,()=>u(),{deep:!0}),De(()=>t.colorsById,()=>u(),{deep:!0}),De(()=>t.showLabels,()=>u()),De(()=>t.highlightId,()=>u());function y(I){const w=a.value;if(!w||!n)return;const E=w.getBoundingClientRect(),P=I.clientX-E.left,W=I.clientY-E.top;let Z=null;for(let F=n.segments.length-1;F>=0;F-=1){const C=n.segments[F];if(P>=C.x&&P<=C.x+C.width&&W>=C.y&&W<=C.y+C.height){Z=C.id;break}}Z!==s.value&&(s.value=Z,u())}function x(){s.value&&(s.value=null,u())}De(()=>a.value,(I,w)=>{w&&(w.removeEventListener("mousemove",y),w.removeEventListener("mouseleave",x)),I&&(I.addEventListener("mousemove",y),I.addEventListener("mouseleave",x))},{immediate:!0});function S(I,w){if(!Array.isArray(I)||I.length!==7)return{labels:I,series:w};const E=I.map(b=>T(b));if(E.some(b=>!b))return{labels:I,series:w};const P=E.map(b=>O(b)),W=[1,2,3,4,5,6,7];if(P.join(",")===W.join(","))return{labels:I,series:w};const Z={};if(P.forEach((b,j)=>{Z[b]=j}),!W.every(b=>b in Z))return{labels:I,series:w};const F=W.map(b=>Z[b]),C=F.map(b=>I[b]),v=(w||[]).map(b=>{const j=Array.isArray(b.data)?b.data:[],R=Array.isArray(b.forecast)?b.forecast:null,Y=F.map(oe=>j[oe]??0),ne=R?F.map(oe=>R[oe]??0):void 0,X={...b,data:Y};return ne&&(X.forecast=ne),X});return{labels:C,series:v}}function M(I){const w=/^(\d{4})-(\d{2})-(\d{2})$/.exec(I);if(!w)return I;const E=new Date(`${w[1]}-${w[2]}-${w[3]}T00:00:00`);return["So","Mo","Di","Mi","Do","Fr","Sa"][E.getDay()]||I}function T(I){const w=/^(\d{4})-(\d{2})-(\d{2})$/.exec(I);if(!w)return null;const E=new Date(`${w[1]}-${w[2]}-${w[3]}T00:00:00`);return isNaN(E.getTime())?null:E}function O(I){const w=I.getDay();return w===0?7:w}return(I,w)=>(k(),_("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),[["__scopeId","data-v-4bcde162"]]),Kw={key:0,class:"chart-widget__header"},qw={class:"chart-widget__title"},Gw={key:0,class:"chart-widget__subtitle"},Jw={key:2,class:"chart-widget__empty"},Yw={key:3,class:"chart-widget__legend"},Zw=["onMouseenter","onFocus"],Xw=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"ChartStackedWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},compact:{type:Boolean},showLegend:{type:Boolean},showLabels:{type:Boolean},stacked:{},colorsById:{}},setup(e){const t=e,a=D(()=>t.showHeader!==!1),o=D(()=>t.title||"Stacked bars"),r=D(()=>({background:t.cardBg||void 0})),n=D(()=>t.colorsById||{}),s=le(null),i=D(()=>{var c;return(((c=t.stacked)==null?void 0:c.series)||[]).map(d=>{const p=String((d==null?void 0:d.id)??""),m=String((d==null?void 0:d.name)??(d==null?void 0:d.label)??p),h=(d==null?void 0:d.color)||n.value[p]||"#60a5fa";return{id:p,label:m,color:h}})});return(l,c)=>(k(),_("div",{class:"card chart-widget",style:Le(r.value)},[a.value?(k(),_("div",Kw,[g("div",qw,H(o.value),1),l.subtitle?(k(),_("div",Gw,H(l.subtitle),1)):ae("",!0)])):ae("",!0),l.stacked?(k(),it(Vw,{key:1,stacked:l.stacked,"colors-by-id":n.value,"show-labels":l.showLabels,"highlight-id":s.value},null,8,["stacked","colors-by-id","show-labels","highlight-id"])):(k(),_("div",Jw,"No data")),l.showLegend&&i.value.length?(k(),_("ul",Yw,[(k(!0),_(he,null,$e(i.value,d=>(k(),_("li",{key:d.id,class:Ne({hovered:s.value===d.id}),onMouseenter:p=>s.value=d.id,onMouseleave:c[0]||(c[0]=p=>s.value=null),onFocus:p=>s.value=d.id,onBlur:c[1]||(c[1]=p=>s.value=null),tabindex:"0"},[g("span",{class:"dot",style:Le({background:d.color})},null,4),g("span",null,H(d.label),1)],42,Zw))),128))])):ae("",!0)],4))}}),[["__scopeId","data-v-20b54b56"]])},Symbol.toStringTag,{value:"Module"})),Qw={class:"group-row"},ek={colspan:"5"},tk={class:"group-header"},ak={class:"group-label"},ok={class:"name"},rk={key:0,class:"group-meta"},nk={class:"summary"},sk={key:0,class:"summary-percent"},lk={key:1,class:"group-meta"},ik={class:"summary"},ck={key:0},dk=["title"],uk={class:"row-name"},fk={key:0,class:"progress"},gk={class:"progress-chip"},pk={class:"num"},hk={class:"num"},mk={class:"num"},vk={class:"num"},bk={key:0,class:"hint"},yk={key:0,class:"empty-row"},wk=Ye(Ie({__name:"ByCalendarTable",props:{rows:{},n2:{type:Function},targets:{},groups:{},todayHours:{}},setup(e){const t=e,a=D(()=>Array.isArray(t.groups)&&t.groups.length?t.groups.map(T=>({id:T.id,label:T.label,summary:T.summary??null,color:T.color,rows:(T.rows||[]).map(o)})):[{id:"__all__",label:"Calendars",summary:null,color:void 0,rows:(t.rows||[]).map(o)}]);function o(T){const O=r(T);return{...T,calendarId:O}}function r(T){return T?T.calendarId?String(T.calendarId):T.id?String(T.id):T.calendar_id?String(T.calendar_id):T.calendar?String(T.calendar):"":""}function n(T){return String(T.calendar||T.displayname||T.name||T.calendarId||"")}function s(T){return r(T)||n(T)}function i(T){const O=y(T);if(!O)return!1;const I=t.targets||{},w=Number(I[O]);return isFinite(w)&&w>0}function l(T){const O=y(T);if(!O)return 0;const I=t.targets||{},w=Number(I[O]);return isFinite(w)?w:0}function c(T){const O=l(T);return O>0?(Math.round(O*100)/100).toFixed(2):""}function d(T,O){return T-O>=0?"delta pos":"delta neg"}function p(T,O){const I=T-O,w=Math.abs(Math.round(I*100)/100).toFixed(2);return(I>=0?"+":"-")+w+"h"}function m(T,O){return Math.max(0,Math.min(100,O>0?T/O*100:0)).toFixed(0)+"%"}function h(T,O){return Math.max(0,Math.min(100,O>0?T/O*100:0))}function u(T){const O=y(T);if(!O)return 0;const I=t.todayHours||{},w=Number(I[O]??0);return Number.isFinite(w)?Math.max(0,w):0}function f(T){const O=l(r(T)),I=u(r(T));if(O<=0||I<=1e-4)return null;const w=Math.max(2,Math.min(120,I/O*100)),E=h(T.total_hours,O),P=Math.max(0,E-w);return{pct:w,left:P,text:I.toFixed(2)+"h"}}function y(T){return T==null?"":String(T)}function x(T){const O=T.summary;if(!O)return`${T.rows.length} calendar${T.rows.length===1?"":"s"}`;const I=t.n2(O.actualHours);return O.targetHours>0?`${I} h / ${t.n2(O.targetHours)} h`:`${I} h`}function S(T){const O=T.summary;return!O||O.targetHours<=0?"":`${Math.round(O.percent)}%`}function M(T){switch(T){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}return(T,O)=>(k(),_("table",null,[O[1]||(O[1]=g("colgroup",null,[g("col",{class:"col-w-42"}),g("col",{class:"col-w-12"}),g("col",{class:"col-w-14"}),g("col",{class:"col-w-14"}),g("col",{class:"col-w-18"})],-1)),O[2]||(O[2]=g("thead",null,[g("tr",null,[g("th",{class:"nowrap"},"Calendar"),g("th",{class:"num"},"Events"),g("th",{class:"num"},"Hours"),g("th",{class:"num"},"Target"),g("th",{class:"num"}," / %")])],-1)),g("tbody",null,[(k(!0),_(he,null,$e(a.value,I=>(k(),_(he,{key:I.id},[g("tr",Qw,[g("td",ek,[g("div",tk,[g("div",ak,[g("span",{class:"dot",style:Le({background:I.color||"var(--brand)"})},null,4),g("span",ok,H(I.label),1)]),I.summary?(k(),_("div",rk,[g("span",nk,H(x(I)),1),S(I)?(k(),_("span",sk,H(S(I)),1)):ae("",!0),I.summary.statusLabel?(k(),_("span",{key:1,class:Ne(["badge",M(I.summary.status)])},H(I.summary.statusLabel),3)):ae("",!0)])):(k(),_("div",lk,[g("span",ik,[Fe(H(I.rows.length)+" calendar",1),I.rows.length!==1?(k(),_("span",ck,"s")):ae("",!0)])]))])])]),(k(!0),_(he,null,$e(I.rows,w=>(k(),_("tr",{key:s(w)},[g("td",null,[g("div",{class:"cell",title:n(w)},[g("div",uk,H(n(w)),1),i(r(w))&&l(r(w))>0?(k(),_("div",fk,[g("div",{class:"progress-bar",style:Le({width:h(w.total_hours,l(r(w)))+"%",background:I.color||void 0})},null,4),f(w)?(k(),_("div",{key:0,class:"progress-today",style:Le({left:f(w).left+"%",width:f(w).pct+"%",background:I.color||"var(--brand)"})},[g("span",gk,H(f(w).text),1)],4)):ae("",!0)])):ae("",!0)],8,dk)]),g("td",pk,H(w.events_count),1),g("td",hk,H(T.n2(w.total_hours)),1),g("td",mk,H(c(r(w))),1),g("td",vk,[i(r(w))?(k(),_(he,{key:0},[g("span",{class:Ne(d(w.total_hours,l(r(w))))},H(p(w.total_hours,l(r(w)))),3),l(r(w))>0?(k(),_("span",bk," ("+H(m(w.total_hours,l(r(w))))+")",1)):ae("",!0)],64)):(k(),_(he,{key:1},[Fe("")],64))])]))),128)),I.rows.length?ae("",!0):(k(),_("tr",yk,[...O[0]||(O[0]=[g("td",{colspan:"5",class:"empty"},"No calendars assigned",-1)])]))],64))),128))])]))}}),[["__scopeId","data-v-2efa83d5"]]),kk={key:0,class:"table-widget__header"},_k={class:"table-widget__title"},xk={key:0,class:"table-widget__subtitle"},Ck={key:2,class:"table-widget__empty"},Sk=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"CalendarTableWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},rows:{},targets:{},groups:{},todayHours:{}},setup(e){const t=e,a=D(()=>t.showHeader!==!1),o=D(()=>t.title||"By calendar"),r=D(()=>({background:t.cardBg||void 0})),n=s=>Number(s??0).toFixed(2);return(s,i)=>(k(),_("div",{class:"card table-widget",style:Le(r.value)},[a.value?(k(),_("div",kk,[g("div",_k,H(o.value),1),s.subtitle?(k(),_("div",xk,H(s.subtitle),1)):ae("",!0)])):ae("",!0),s.rows&&s.rows.length?(k(),it(wk,{key:1,rows:s.rows,n2:n,targets:s.targets,groups:s.groups,"today-hours":s.todayHours},null,8,["rows","targets","groups","today-hours"])):(k(),_("div",Ck,"No data"))],4))}}),[["__scopeId","data-v-e75cc444"]])},Symbol.toStringTag,{value:"Module"})),$k={key:0,class:"dayoff-card__header"},Tk={key:0,class:"pill"},Mk={key:1,class:"dayoff-heatmap"},Ak=["title"],Dk={class:"dayoff-tile__label"},Ek={class:"dayoff-tile__value"},Lk={class:"dayoff-tile__meta"},Nk={key:2,class:"hint"},Ik=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"DayOffTrendCard",props:{trend:{},unit:{},lookback:{},title:{},cardBg:{},toneLowColor:{},toneHighColor:{},showHeader:{type:Boolean},labelMode:{}},setup(e){const t=e,a=D(()=>t.unit==="mo"?"mo":"wk"),o=D(()=>t.unit==="mo"?"This month":"This week"),r=D(()=>{const C=(t.labelMode||"period").toString().toLowerCase();return C==="date"||C==="offset"?C:"period"}),n=D(()=>{const C=typeof t.lookback=="number"?t.lookback:null;if(C!=null)return Math.max(0,Math.min(12,Math.floor(C)));const v=(t.trend??[]).filter(b=>Number((b==null?void 0:b.offset)??0)>0);return Math.max(0,Math.min(12,v.length))}),s=D(()=>{const C=Array.isArray(t.trend)?t.trend:[],v=new Map;C.forEach(X=>{const oe=Number((X==null?void 0:X.offset)??0)||0;v.set(oe,{offset:oe,label:(X==null?void 0:X.label)??"",from:(X==null?void 0:X.from)??"",to:(X==null?void 0:X.to)??"",totalDays:Number((X==null?void 0:X.totalDays)??(X==null?void 0:X.total_days)??0)||0,daysOff:Number((X==null?void 0:X.daysOff)??(X==null?void 0:X.days_off)??0)||0,daysWorked:Number((X==null?void 0:X.daysWorked)??(X==null?void 0:X.days_worked)??0)||0})});const b=a.value,j=o.value,R=[],Y=v.get(0)??{offset:0,label:j,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};R.push(Y);const ne=n.value;for(let X=1;X<=ne;X+=1){const oe=v.get(X)??{offset:X,label:`-${X} ${b}`,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};R.push(oe)}return R}),i=D(()=>s.value.map(C=>{const v=Math.max(0,Number(C.totalDays)||0),b=Math.max(0,Math.min(v,Number(C.daysOff)||0)),j=v>0?b/v:0;return{...C,label:I(C),share:j,tone:f(j)}})),l=D(()=>{const C=n.value;if(C<=0)return"";const v=t.unit==="mo"?"month":"week";return`Last ${C} ${C===1?v:`${v}s`}`}),c=D(()=>t.title||"Days off trend"),d=D(()=>({background:t.cardBg||void 0})),p=D(()=>t.showHeader!==!1),m=D(()=>{const C=w(t.toneLowColor)||"#dc2626",v=w(t.toneHighColor)||"#16a34a",b=E(C,v,.5);return{low:Z(C),mid:Z(b),high:Z(v)}});function h(C){const v=Math.max(0,Math.min(1,C));return`${Math.round(v*100)}% off`}function u(C){const v=m.value[C];return{"--tile-bg":v.background,"--tile-fg":v.color,background:v.background,color:v.color}}function f(C){return C>=.5?"high":C>=.25?"mid":"low"}const y=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"2-digit"});function x(C){if(!C)return null;const v=new Date(C);return Number.isNaN(v.getTime())?null:v}function S(C){const v=new Date(Date.UTC(C.getFullYear(),C.getMonth(),C.getDate())),b=v.getUTCDay()||7;v.setUTCDate(v.getUTCDate()+4-b);const j=new Date(Date.UTC(v.getUTCFullYear(),0,1));return Math.ceil(((v.getTime()-j.getTime())/864e5+1)/7)}function M(C,v){const b=x(C),j=x(v);if(!b||!j)return"";const R=y.format(b),Y=y.format(j);return R===Y?R:`${R}${Y}`}function T(C,v){return v||(C===0?o.value:`-${C} ${a.value}`)}function O(C){const v=x(C.from)||x(C.to);return v?a.value==="mo"?`MONTH ${v.getMonth()+1}`:`WEEK ${S(v)}`:T(C.offset,C.label)}function I(C){const v=Number(C.offset??0)||0;return r.value==="offset"?v===0?"Current":`-${v}`:r.value==="date"?M(C.from,C.to)||T(v,C.label):O(C)}function w(C){if(!C||typeof C!="string")return null;const v=C.trim();return/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(v)?v:null}function E(C,v,b=.5){const j=P(C),R=P(v);if(!j||!R)return C;const Y=F(Math.round(j.r+(R.r-j.r)*b),0,255),ne=F(Math.round(j.g+(R.g-j.g)*b),0,255),X=F(Math.round(j.b+(R.b-j.b)*b),0,255);return`rgb(${Y}, ${ne}, ${X})`}function P(C){const v=C.replace("#","");if(v.length===3){const[b,j,R]=v.split("").map(Y=>parseInt(Y.repeat(2),16));return{r:b,g:j,b:R}}if(v.length===6){const b=parseInt(v.slice(0,2),16),j=parseInt(v.slice(2,4),16),R=parseInt(v.slice(4,6),16);return{r:b,g:j,b:R}}return null}function W(C){const v=P(C);return v?(.2126*v.r+.7152*v.g+.0722*v.b)/255:0}function Z(C){const v=W(C)>.6?"#0f172a":"#fff";return{background:C,color:v}}function F(C,v,b){return Math.min(b,Math.max(v,C))}return(C,v)=>(k(),_("div",{class:"card dayoff-card",style:Le(d.value)},[p.value?(k(),_("div",$k,[g("span",null,H(c.value),1),l.value?(k(),_("span",Tk,H(l.value),1)):ae("",!0)])):ae("",!0),i.value.length?(k(),_("div",Mk,[(k(!0),_(he,null,$e(i.value,b=>(k(),_("div",{key:b.offset,class:Ne(["dayoff-tile",[`dayoff-tile--${b.tone}`,{"dayoff-tile--current":b.offset===0}]]),style:Le(u(b.tone)),title:`${b.label}  ${h(b.share)}`},[g("div",Dk,H(b.label),1),g("div",Ek,H(h(b.share)),1),g("div",Lk,H(b.daysOff)+" off  "+H(b.daysWorked)+" on ",1)],14,Ak))),128))])):(k(),_("div",Nk,"No day-off history for this range."))],4))}}),[["__scopeId","data-v-443671a9"]])},Symbol.toStringTag,{value:"Module"})),Bk={key:0,class:"deck-panel__header"},Ok={class:"deck-panel__heading"},Pk={class:"deck-panel__title"},Fk={key:0,class:"deck-panel__subtitle"},Hk={key:1,class:"deck-panel__subtitle"},Wk={class:"deck-panel__actions"},zk={key:0,class:"deck-panel__count"},Rk=["href"],jk=["disabled"],Uk={key:1,class:"deck-panel__filters",role:"group","aria-label":"Deck card filters"},Vk=["aria-pressed","disabled","draggable","onClick","onDragstart","onDragover","onDrop"],Kk={key:0,class:"deck-filter-count"},qk={key:0,class:"deck-panel__loading"},Gk={key:0,class:"deck-panel__error"},Jk=["data-idx"],Yk={key:0,class:"deck-card__row"},Zk={key:0,class:"deck-card__time"},Xk={key:1,class:"deck-card__time"},Qk={class:"deck-card__title"},e_={class:"deck-card__meta"},t_={class:"deck-card__stack"},a_={key:2,class:"deck-card__labels"},o_={key:3,class:"deck-card__assignees"},r_={class:"deck-card__status-row"},n_={key:0,class:"deck-card__time"},s_={key:1,class:"deck-card__time"},l_={class:"deck-card__title"},i_={class:"deck-card__meta"},c_={class:"deck-card__stack"},d_={key:0,class:"deck-card__labels"},u_={key:1,class:"deck-card__assignees"},f_=Ye(Ie({__name:"DeckCardsPanel",props:{cards:{},loading:{type:Boolean},rangeLabel:{},lastFetchedAt:{},deckUrl:{},error:{},filter:{},canFilterMine:{type:Boolean},filtersEnabled:{type:Boolean},filterOptions:{},orderableValues:{},editable:{type:Boolean},allowMineOverride:{type:Boolean},autoScroll:{type:Boolean},intervalSeconds:{},showCount:{type:Boolean},compact:{type:Boolean},title:{},cardBg:{},showHeader:{type:Boolean}},emits:["refresh","update:filter","reorder:filters"],setup(e,{emit:t}){const a=e,o=t,r=D(()=>a.filter??"all"),n=D(()=>a.title||"Deck cards"),s=D(()=>({background:a.cardBg||void 0})),i=D(()=>a.showHeader!==!1),l=D(()=>a.filtersEnabled!==!1&&d.value.length>1),c=D(()=>l.value&&a.canFilterMine!==!1&&a.allowMineOverride!==!1),d=D(()=>a.filterOptions&&a.filterOptions.length?a.filterOptions.map(C=>({...C,mine:!!C.mine})):[{value:"all",label:"All cards",mine:!1},{value:"open_all",label:"Open  All",mine:!1},{value:"open_mine",label:"Open  Mine",mine:!0},{value:"done_all",label:"Done  All",mine:!1},{value:"done_mine",label:"Done  Mine",mine:!0},{value:"archived_all",label:"Archived  All",mine:!1},{value:"archived_mine",label:"Archived  Mine",mine:!0},{value:"due_all",label:"Due  All",mine:!1},{value:"due_mine",label:"Due  Mine",mine:!0},{value:"due_today_all",label:"Due today  All",mine:!1},{value:"due_today_mine",label:"Due today  Mine",mine:!0}]),p=D(()=>a.orderableValues&&a.orderableValues.length?a.orderableValues:d.value.map(C=>C.value).filter(C=>!String(C).startsWith("custom_"))),m=le(null),h=le(null),u=le(null),f=le(null),y=le(0),x=D(()=>{const C=Math.max(3,Math.min(10,Number(a.intervalSeconds??5)))*1e3;return Number.isFinite(C)?C:5e3});De(()=>a.autoScroll,()=>{I(),w()}),De(()=>a.cards,()=>{y.value=0,I(),w()},{deep:!0}),Tt(()=>{w()}),Ct(()=>{I()});function S(C,v){!a.editable||!p.value.includes(C)||(m.value=C,v.dataTransfer&&(v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",String(C))))}function M(C){!a.editable||!m.value||p.value.includes(C)}function T(C){if(!a.editable||!m.value||!p.value.includes(C))return;const v=p.value.slice(),b=v.indexOf(m.value),j=v.indexOf(C);if(b<0||j<0||b===j){m.value=null;return}if(v.splice(b,1),v.splice(j,0,m.value),m.value=null,v.length){const R=d.value.map(ne=>ne.value).filter(ne=>String(ne).startsWith("custom_")),Y=[...v,...R];a.orderableValues&&a.orderableValues.length?o("reorder:filters",v):o("reorder:filters",Y)}}function O(){m.value=null}function I(){f.value&&(clearInterval(f.value),f.value=null)}function w(){!a.autoScroll||(a.cards||[]).length<=1||(I(),f.value=window.setInterval(()=>{const C=(a.cards||[]).length;y.value=(y.value+1)%C,E(y.value)},x.value))}function E(C){if(!h.value||!u.value)return;const v=u.value.querySelector(`[data-idx="${C}"]`);if(!v)return;const b=v.offsetTop-u.value.offsetTop;h.value.scrollTo({top:b,behavior:"smooth"})}const P=new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}),W=D(()=>{if(!a.lastFetchedAt)return"";try{return P.format(new Date(a.lastFetchedAt))}catch{return""}});function Z(C){try{return P.format(new Date(C))}catch{return C}}function F(C){return C==="done"?"Done":C==="archived"?"Archived":"Active"}return(C,v)=>(k(),_("div",{class:Ne(["deck-panel",{"deck-panel--compact":a.compact}]),style:Le(s.value)},[i.value?(k(),_("div",Bk,[g("div",Ok,[g("div",Pk,H(n.value),1),W.value?(k(),_("div",Fk," Updated "+H(W.value),1)):(k(),_("div",Hk," Showing "+H(C.rangeLabel.toLowerCase())+" selection ",1))]),g("div",Wk,[C.showCount?(k(),_("div",zk,H(C.cards.length)+" cards",1)):ae("",!0),C.deckUrl?(k(),_("a",{key:1,class:"deck-panel__link",href:C.deckUrl,target:"_blank",rel:"noopener"}," Open Deck  ",8,Rk)):ae("",!0),g("button",{type:"button",class:"deck-panel__refresh",onClick:v[0]||(v[0]=b=>C.$emit("refresh")),disabled:C.loading}," Refresh ",8,jk)])])):ae("",!0),l.value?(k(),_("div",Uk,[(k(!0),_(he,null,$e(d.value,b=>(k(),_("button",{key:b.value,type:"button",class:Ne(["deck-filter-btn",{active:r.value===b.value,"is-draggable":a.editable&&p.value.includes(b.value)}]),"aria-pressed":r.value===b.value,disabled:b.mine&&!c.value,draggable:a.editable&&p.value.includes(b.value),onClick:j=>C.$emit("update:filter",b.value),onDragstart:j=>S(b.value,j),onDragover:dt(j=>M(b.value),["prevent"]),onDrop:dt(j=>T(b.value),["prevent"]),onDragend:O},[g("span",null,H(b.label),1),typeof b.count=="number"?(k(),_("span",Kk,H(b.count),1)):ae("",!0)],42,Vk))),128))])):ae("",!0),g("div",{class:"deck-panel__body",ref_key:"bodyEl",ref:h},[C.loading?(k(),_("div",qk,[Ae(L(tg),{size:20}),v[1]||(v[1]=g("span",null,"Loading Deck cards",-1))])):(k(),_(he,{key:1},[C.error?(k(),_("div",Gk,H(C.error),1)):C.cards.length?(k(),_("ul",{key:2,class:"deck-card-list",ref_key:"listEl",ref:u},[(k(!0),_(he,null,$e(C.cards,(b,j)=>(k(),_("li",{key:b.id,class:"deck-card","data-idx":j},[a.compact?(k(),_("div",Yk,[g("span",{class:Ne(["deck-card__status",b.status])},H(F(b.status)),3),b.match==="due"&&b.due?(k(),_("span",Zk," Due "+H(Z(b.due)),1)):b.done?(k(),_("span",Xk," Completed "+H(Z(b.done)),1)):ae("",!0),g("span",Qk,H(b.title),1),g("span",e_,[g("span",{class:"deck-card__board",style:Le({borderColor:b.boardColor||"var(--color-primary)"})},H(b.boardTitle),5),g("span",t_,H(b.stackTitle),1)]),b.labels.length?(k(),_("span",a_,[(k(!0),_(he,null,$e(b.labels,R=>(k(),_("span",{key:`deck-label-${b.id}-${R.id??R.title}`,class:"deck-card__label",style:Le({background:R.color||"var(--color-background-darker)"})},H(R.title),5))),128))])):ae("",!0),b.assignees.length?(k(),_("span",o_,[v[2]||(v[2]=g("span",{class:"deck-card__assignees-label"},"Assigned:",-1)),(k(!0),_(he,null,$e(b.assignees,R=>(k(),_("span",{key:`deck-assignee-${b.id}-${R.uid??R.id}`,class:"deck-card__assignee"},H(R.displayName||R.uid),1))),128))])):ae("",!0)])):(k(),_(he,{key:1},[g("div",r_,[g("span",{class:Ne(["deck-card__status",b.status])},H(F(b.status)),3),b.match==="due"&&b.due?(k(),_("span",n_," Due "+H(Z(b.due)),1)):b.done?(k(),_("span",s_," Completed "+H(Z(b.done)),1)):ae("",!0)]),g("div",l_,H(b.title),1),g("div",i_,[g("span",{class:"deck-card__board",style:Le({borderColor:b.boardColor||"var(--color-primary)"})},H(b.boardTitle),5),g("span",c_,H(b.stackTitle),1)]),b.labels.length?(k(),_("div",d_,[(k(!0),_(he,null,$e(b.labels,R=>(k(),_("span",{key:`deck-label-${b.id}-${R.id??R.title}`,class:"deck-card__label",style:Le({background:R.color||"var(--color-background-darker)"})},H(R.title),5))),128))])):ae("",!0),b.assignees.length?(k(),_("div",u_,[v[3]||(v[3]=g("span",{class:"deck-card__assignees-label"},"Assigned:",-1)),(k(!0),_(he,null,$e(b.assignees,R=>(k(),_("span",{key:`deck-assignee-${b.id}-${R.uid??R.id}`,class:"deck-card__assignee"},H(R.displayName||R.uid),1))),128))])):ae("",!0)],64))],8,Jk))),128))],512)):(k(),it(L(eg),{key:1,name:"No Deck cards",description:`No cards matched this ${C.rangeLabel.toLowerCase()}. Confirm Deck due dates or rerun seeding.`},null,8,["description"]))],64))],512)],6))}}),[["__scopeId","data-v-4ebb7081"]]),g_=Object.freeze(Object.defineProperty({__proto__:null,default:Ie({__name:"DeckCardsWidget",props:{cards:{},rangeLabel:{},from:{},to:{},uid:{},deckUrl:{},lastFetchedAt:{},loading:{type:Boolean},error:{},boardIds:{},filters:{},defaultFilter:{},allowMine:{type:Boolean},mineMode:{},includeArchived:{type:Boolean},includeCompleted:{type:Boolean},autoScroll:{type:Boolean},intervalSeconds:{},showCount:{type:Boolean},showHeader:{type:Boolean},title:{},cardBg:{},customFilters:{},autoTagsEnabled:{type:Boolean,default:!0},autoTagSelection:{},compactList:{type:Boolean},editable:{type:Boolean},onUpdateFilters:{}},emits:["refresh"],setup(e){const t=e,a=["all","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],o=D(()=>{const v=(t.boardIds||[]).map(b=>Number(b)).filter(b=>Number.isInteger(b));return new Set(v)}),r=D(()=>(t.cards||[]).filter(b=>o.value.size?b.boardId!=null&&o.value.has(Number(b.boardId)):!0)),n=D(()=>{const v=t.includeArchived!==!1;return r.value.filter(b=>(v||b.status!=="archived")&&(t.includeCompleted!==!1||b.status!=="done"))}),s=D(()=>t.autoTagsEnabled===!1?[]:Mc(n.value)),i=D(()=>Array.isArray(t.autoTagSelection)?new Set(t.autoTagSelection.map(v=>String(v))):null),l=D(()=>{if(t.autoTagsEnabled===!1)return[];const v=s.value;if(!v.length)return[];const b=i.value;return b?v.filter(j=>b.has(j.value)):v}),c=D(()=>(t.customFilters||[]).map(v=>`custom_${v.id}`)),d=D(()=>{const v=t.filters&&t.filters.length?t.filters:a,b=l.value.map(j=>j.value);return[...v,...c.value,...b]}),p=D(()=>{const v=t.includeArchived!==!1,b=n.value,j=new Map;return d.value.forEach(R=>{j.set(R,F(R,b,v).length)}),j}),m=le(null),h=D(()=>m.value?m.value:(t.filters&&t.filters.length?t.filters:a).filter(Boolean)),u=D(()=>{const v=h.value,b={all:"All cards",mine:"Mine (any status)",open_all:"Open  All",open_mine:"Open  Mine",done_all:"Done  All",done_mine:"Done  Mine",archived_all:"Archived  All",archived_mine:"Archived  Mine",due_all:"Due  All",due_mine:"Due  Mine",due_today_all:"Due today  All",due_today_mine:"Due today  Mine",created_today_all:"Created today  All",created_today_mine:"Created today  Mine",created_range_all:"Created this range  All",created_range_mine:"Created this range  Mine"},j=p.value,R=v.map(X=>({value:X,label:b[X]||X,mine:X.endsWith("_mine")||X==="mine",count:j.get(X)??0})),Y=(t.customFilters||[]).filter(X=>X&&X.id&&X.label).map(X=>({value:`custom_${X.id}`,label:X.label,mine:!1,count:j.get(`custom_${X.id}`)??0})),ne=l.value.map(X=>({value:X.value,label:X.label,mine:!1,count:j.get(X.value)??X.count??0}));return[...R,...Y,...ne]}),f=le(M());De(()=>t.defaultFilter,()=>{f.value=M()}),De(()=>u.value.map(v=>v.value).join("|"),()=>{const v=u.value;v.length&&(v.some(b=>b.value===f.value)||(f.value=v[0].value))});const y=D(()=>u.value.length>1),x=D(()=>t.allowMine!==!1&&!!(t.uid||"").trim()),S=D(()=>{const v=t.includeArchived!==!1||f.value.startsWith("archived"),b=r.value.filter(j=>(v||j.status!=="archived")&&(t.includeCompleted!==!1||j.status!=="done"));return F(f.value,b,v)});function M(){const v=u.value.map(j=>j.value),b=t.defaultFilter||v[0]||"all";return v.includes(b)?b:v[0]||"all"}function T(v){f.value=v}function O(v){var b;v.length&&(m.value=[...v],(b=t.onUpdateFilters)==null||b.call(t,v),v.includes(f.value)||(f.value=v[0]))}function I(v,b){const j=v.trim().toLowerCase();return R=>{if(!j)return!1;const Y=(R.assignees||[]).some(oe=>typeof oe.uid=="string"&&oe.uid.toLowerCase()===j),ne=typeof R.createdBy=="string"&&R.createdBy.trim().toLowerCase()===j,X=typeof R.doneBy=="string"&&R.doneBy.trim().toLowerCase()===j;return b==="creator"?ne||X:b==="assignee"?Y||X:Y||ne||X}}function w(v,b,j,R){return b==="open"?v.status==="active":b==="archived"?v.status==="archived":b==="done"?R?v.status==="done"?!0:j&&v.status==="archived"&&R:!1:b==="due"?v.match==="due":!1}function E(v){if(!v.createdTs)return!1;const b=new Date,j=new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime(),R=j+24*60*60*1e3;return v.createdTs>=j&&v.createdTs<R}function P(v,b,j){if(!v.createdTs||!b||!j)return!1;const R=Date.parse(b),Y=Date.parse(j);return!Number.isFinite(R)||!Number.isFinite(Y)?!1:v.createdTs>=R&&v.createdTs<=Y}function W(v,b,j){if(!b||!j)return!1;const R=Date.parse(b),Y=Date.parse(j);if(!Number.isFinite(R)||!Number.isFinite(Y))return!1;const ne=v.dueTs??null;return ne!=null&&ne>=R&&ne<=Y}function Z(v){const b=v.dueTs??null;if(b==null)return!1;const j=new Date,R=new Date(j.getFullYear(),j.getMonth(),j.getDate()).getTime(),Y=R+24*60*60*1e3;return b>=R&&b<Y}function F(v,b,j){const R=I(t.uid||"",t.mineMode||"assignee"),Y=j,ne=t.includeCompleted!==!1;if(v==="all")return b;if(v==="mine")return b.filter(X=>R(X));if(v.startsWith("created_today"))return b.filter(X=>(v.endsWith("_mine")?R(X):!0)&&E(X));if(v.startsWith("created_range"))return b.filter(X=>(v.endsWith("_mine")?R(X):!0)&&P(X,t.from,t.to));if(v.startsWith("due_today"))return b.filter(X=>(v.endsWith("_mine")?R(X):!0)&&Z(X));if(v.startsWith("due_"))return b.filter(X=>(v.endsWith("_mine")?R(X):!0)&&W(X,t.from,t.to));if(v.startsWith("custom_")){const X=v.slice(7),oe=(t.customFilters||[]).find(se=>se.id===X);return oe?b.filter(se=>C(se,oe,R)):[]}if(v.startsWith("tag_"))return b.filter(X=>Av(X,v));if(v.includes("_")){const[X,oe]=v.split("_");return b.filter(se=>{const fe=w(se,X,Y,ne),ce=oe==="all"?!0:R(se);return fe&&ce})}return b}function C(v,b,j){const R=(b.labelIds||[]).map(V=>V.trim().toLowerCase()).filter(Boolean),Y=(b.labels||[]).map(V=>V.trim().toLowerCase()).filter(Boolean),ne=(b.assignees||[]).map(V=>V.trim().toLowerCase()).filter(Boolean),X=R.length>0,oe=Y.length>0,se=ne.length>0;if(!X&&!oe&&!se)return!1;let fe=!0;if(X||oe){const V=(v.labels||[]).map(A=>A.id!=null?String(A.id).trim().toLowerCase():"").filter(Boolean),J=(v.labels||[]).map(A=>String(A.title||"").trim().toLowerCase()).filter(Boolean);fe=(!X||R.some(A=>V.includes(A)))&&(!oe||Y.some(A=>J.includes(A)))}let ce=!0;if(se){const V=(v.assignees||[]).map(J=>String(J.uid||"").trim().toLowerCase()).filter(Boolean);ce=ne.some(J=>V.includes(J)),!ce&&ne.includes("me")&&(ce=j(v)),!ce&&ne.includes("unassigned")&&(ce=V.length===0)}return fe&&ce}return(v,b)=>(k(),it(f_,{cards:S.value,loading:v.loading,"range-label":v.rangeLabel,"last-fetched-at":v.lastFetchedAt,"deck-url":v.deckUrl,error:v.error,filter:f.value,"filters-enabled":y.value,"can-filter-mine":x.value,"allow-mine-override":x.value,"filter-options":u.value,"auto-scroll":t.autoScroll!==!1,"interval-seconds":t.intervalSeconds,"show-count":t.showCount!==!1,compact:t.compactList===!0,title:t.title,"card-bg":t.cardBg,"show-header":t.showHeader!==!1,editable:t.editable===!0,"orderable-values":h.value,onRefresh:b[0]||(b[0]=j=>v.$emit("refresh")),"onUpdate:filter":T,"onReorder:filters":O},null,8,["cards","loading","range-label","last-fetched-at","deck-url","error","filter","filters-enabled","can-filter-mine","allow-mine-override","filter-options","auto-scroll","interval-seconds","show-count","compact","title","card-bg","show-header","editable","orderable-values"]))}})},Symbol.toStringTag,{value:"Module"})),p_={class:"note-header"},h_={key:0,class:"title"},m_=["disabled"],v_={class:"field"},b_={class:"field-head"},y_={class:"label"},w_=["aria-label"],k_=["value"],__=["value"],x_={class:"field"},C_={class:"label"},S_=["value","disabled"],$_=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"NoteEditorWidget",props:{previous:{},history:{},modelValue:{},prevLabel:{},currLabel:{},saving:{type:Boolean},title:{},cardBg:{},showHeader:{type:Boolean}},emits:["update:modelValue","save"],setup(e,{emit:t}){const a=e,o=t,r=D(()=>a.title||"Notes"),n=D(()=>a.showHeader!==!1),s=a.prevLabel||"Previous",i=a.currLabel||"Current",l={background:a.cardBg||void 0},c=D(()=>(a.history||[]).filter(f=>f&&f.id&&f.label)),d=le("");De(()=>c.value,f=>{var y;d.value=((y=f[0])==null?void 0:y.id)||""},{immediate:!0});const p=D(()=>c.value.find(f=>f.id===d.value)||null),m=D(()=>{var f;return((f=p.value)==null?void 0:f.content)||a.previous||""});function h(f){o("update:modelValue",f.target.value)}function u(){o("save")}return(f,y)=>(k(),_("div",{class:"note-card",style:l},[g("div",p_,[n.value?(k(),_("div",h_,H(r.value),1)):ae("",!0),g("button",{class:"btn",type:"button",disabled:f.saving,onClick:u},"Save",8,m_)]),g("div",v_,[g("div",b_,[g("span",y_,H(L(s)),1),c.value.length?oo((k(),_("select",{key:0,"onUpdate:modelValue":y[0]||(y[0]=x=>d.value=x),class:"note-select","aria-label":`Select ${L(s)}`},[(k(!0),_(he,null,$e(c.value,x=>(k(),_("option",{key:x.id,value:x.id},H(x.label),9,k_))),128))],8,w_)),[[Yi,d.value]]):ae("",!0)]),g("textarea",{class:"note note--compact",value:m.value,readonly:""},null,8,__)]),g("label",x_,[g("span",C_,H(L(i)),1),g("textarea",{class:"note",value:f.modelValue,disabled:f.saving,onInput:h},null,40,S_)])]))}}),[["__scopeId","data-v-5e293970"]])},Symbol.toStringTag,{value:"Module"})),T_={key:0},M_={key:1,class:"body"},A_={key:2,class:"body empty"},D_=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"NoteSnippetWidget",props:{notesCurr:{},notesPrev:{},title:{},cardBg:{},showHeader:{type:Boolean}},setup(e){const t=e,a=D(()=>{const s=(t.notesCurr||"").trim();return s||(t.notesPrev||"").trim()||""}),o=D(()=>t.title||"Note"),r=D(()=>({background:t.cardBg||void 0})),n=D(()=>t.showHeader!==!1);return(s,i)=>(k(),_("div",{class:"text-card",style:Le(r.value)},[n.value?(k(),_("h3",T_,H(o.value),1)):ae("",!0),a.value?(k(),_("p",M_,H(a.value),1)):(k(),_("p",A_,""))],4))}}),[["__scopeId","data-v-01eb6d28"]])},Symbol.toStringTag,{value:"Module"})),E_={key:0,class:"targets-header"},L_={key:0,class:"hint"},N_={class:"targets-main"},I_={class:"line total-line"},B_={class:"value"},O_={key:0,class:"line"},P_={key:1,class:"line"},F_={key:2,class:"line forecast"},H_={class:"hint"},W_={key:1,class:"targets-badges"},z_={key:2,class:"targets-categories"},R_={class:"cat-top"},j_={class:"cat-label"},U_={class:"name"},V_={class:"cat-meta"},K_={class:"percent"},q_={class:"cat-progress"},G_={class:"bar"},J_={class:"today-label"},Y_={class:"cat-metrics"},Z_={class:"hint"},X_={key:1,class:"hint"},Q_={key:0,class:"cat-footer"},ex={class:"hint"},tx=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"TimeTargetsCard",props:{summary:{},config:{},groups:{},showPace:{type:Boolean,default:!0},showForecast:{type:Boolean,default:!0},showHeader:{type:Boolean},title:{default:"Targets"},cardBg:{default:null}},setup(e){const t=e,a=D(()=>{var u;return((u=t.summary)==null?void 0:u.total)??d("total","Total")}),o=D(()=>t.showHeader!==!1),r=D(()=>{var f;return Array.isArray(t.groups)&&t.groups.length?t.groups.map(y=>({id:y.id,label:y.label,summary:y.summary??d(y.id,y.label),color:y.color,rows:y.rows})):(((f=t.summary)==null?void 0:f.categories)??[]).map(y=>({id:y.id,label:y.label,summary:y,color:void 0,rows:[]}))}),n=D(()=>({background:t.cardBg||void 0})),s=D(()=>r.value.map(u=>{const f=u.summary??d(u.id,u.label),y=Number(u.todayHours??0),x=f.targetHours,S=Math.max(0,f.actualHours-x),M=Math.min(S,y),T=x>0?y/x*100:0,O=p(f.percent,0,200);return{id:u.id,label:u.label||f.label,actualHours:f.actualHours,targetHours:x,percent:f.percent,deltaHours:f.deltaHours,needPerDay:f.needPerDay,daysLeft:f.daysLeft,calendarPercent:f.calendarPercent,gap:f.gap,status:f.status,statusLabel:f.statusLabel,color:u.color,calendarCount:Array.isArray(u.rows)?u.rows.length:0,progress:O,todayHours:y,overToday:M,todayWidth:x>0?p(T,2,200):0,todayRight:Math.max(0,100-O),chipLeft:Math.min(100,O),chipText:M>0?`Today ${i(y)} (+${i(M)})`:`Today ${i(y)}`,todayColor:u.color?h(u.color,.65):"var(--brand)",todayBorder:u.color?h(u.color,.35,!0):"var(--brand)",calendarLabel:Array.isArray(u.rows)&&u.rows.length===1?"calendar":"calendars"}}).filter(u=>u.targetHours>0||u.actualHours>0||u.calendarCount>0));function i(u){if(!isFinite(u))return"0";const f=Math.round(u*10)/10;return Math.abs(f-Math.round(f))<.05?String(Math.round(f)):f.toFixed(1)}function l(u){return!isFinite(u)||Math.abs(u)<.005?"0.0":(u>=0?"+":"")+i(Math.abs(u))}function c(u){switch(u){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function d(u,f){return{id:u,label:f,actualHours:0,targetHours:0,percent:0,deltaHours:0,remainingHours:0,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"}}function p(u,f,y){return!isFinite(u)||u<f?f:u>y?y:u}function m(u){return u==="momentum"?"Momentum":"Linear"}function h(u,f=.5,y=!1){const x=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(u||"");if(!x)return u;const S=parseInt(x[1],16),M=parseInt(x[2],16),T=parseInt(x[3],16),O=Math.max(0,Math.min(1,f));return y?`rgb(${Math.round(S*(1-O))},${Math.round(M*(1-O))},${Math.round(T*(1-O))})`:`rgb(${Math.round(S+(255-S)*O)},${Math.round(M+(255-M)*O)},${Math.round(T+(255-T)*O)})`}return(u,f)=>(k(),_("div",{class:"card targets-card",style:Le(n.value)},[o.value?(k(),_("div",E_,[g("strong",null,H(u.title||"Targets"),1),a.value.targetHours>0?(k(),_("span",L_,H(a.value.percent.toFixed(0))+"%",1)):ae("",!0)])):ae("",!0),g("div",N_,[g("div",I_,[g("span",B_,[g("strong",null,H(i(a.value.actualHours)),1),Fe(" / "+H(i(a.value.targetHours))+" h",1)]),u.config.ui.showTotalDelta&&a.value.targetHours>0?(k(),_("span",{key:0,class:Ne(["delta",a.value.deltaHours>=0?"pos":"neg"])},"  "+H(l(a.value.deltaHours))+"h ",3)):ae("",!0)]),u.config.ui.showNeedPerDay&&a.value.targetHours>0?(k(),_("div",O_," Days left "+H(a.value.daysLeft)+"  Need "+H(i(a.value.needPerDay))+" h/day ",1)):ae("",!0),u.showPace&&a.value.targetHours>0?(k(),_("div",P_,[Fe(" Pace: "+H(a.value.percent.toFixed(0))+"% vs "+H(a.value.calendarPercent.toFixed(0))+"%  ",1),g("span",{class:Ne(["status-label",c(a.value.status)])},H(a.value.statusLabel),3)])):ae("",!0),u.showForecast?(k(),_("div",F_,[Fe(" Forecast: "+H(u.summary.forecast.text)+" ",1),g("span",H_," Linear "+H(i(u.summary.forecast.linear))+"h  Momentum "+H(i(u.summary.forecast.momentum))+"h  Primary: "+H(m(u.summary.forecast.primaryMethod)),1)])):ae("",!0)]),u.config.ui.badges&&a.value.targetHours>0?(k(),_("div",W_,[g("span",{class:Ne(["badge",c(a.value.status)])},H(a.value.statusLabel),3)])):ae("",!0),u.config.ui.showCategoryBlocks&&s.value.length?(k(),_("div",z_,[(k(!0),_(he,null,$e(s.value,y=>(k(),_("div",{class:"category",key:y.id},[g("div",R_,[g("div",j_,[g("span",{class:"dot",style:Le({background:y.color||"var(--brand)"})},null,4),g("span",U_,H(y.label),1)]),g("div",V_,[g("span",K_,H(y.percent.toFixed(0))+"%",1),u.config.ui.badges&&y.targetHours>0?(k(),_("span",{key:0,class:Ne(["badge",c(y.status)])},H(y.statusLabel),3)):ae("",!0)])]),g("div",q_,[g("div",G_,[g("div",{class:"fill",style:Le({width:y.progress+"%",background:y.color||"var(--brand)"})},null,4),y.todayWidth>0?(k(),_("div",{key:0,class:"today-overlay",style:Le({width:y.todayWidth+"%",right:y.todayRight+"%",background:y.todayColor,borderColor:y.todayBorder})},null,4)):ae("",!0),y.todayWidth>0?(k(),_("div",{key:1,class:"today-chip",style:Le({left:y.chipLeft+"%",background:y.todayColor,borderColor:y.todayBorder})},[g("span",J_,H(y.chipText),1)],4)):ae("",!0)])]),g("div",Y_,[g("strong",null,H(i(y.actualHours))+"h",1),g("span",Z_,"/ "+H(i(y.targetHours))+"h",1),y.targetHours>0?(k(),_("span",{key:0,class:Ne(["delta",y.deltaHours>=0?"pos":"neg"])},"  "+H(l(y.deltaHours))+"h ",3)):ae("",!0),u.config.ui.showNeedPerDay&&y.targetHours>0?(k(),_("span",X_," Need "+H(i(y.needPerDay))+"h/day  "+H(y.daysLeft)+" days left ",1)):ae("",!0)]),y.calendarCount>0?(k(),_("div",Q_,[g("span",ex,H(y.calendarCount)+" "+H(y.calendarLabel),1)])):ae("",!0)]))),128))])):ae("",!0)],4))}}),[["__scopeId","data-v-9ee23cb0"]])},Symbol.toStringTag,{value:"Module"})),ax={key:0,class:"time-summary-firstline"},ox={key:1,class:"today-highlight"},rx={class:"today-value"},nx={key:2,class:"today-cats"},sx={class:"name"},lx={class:"value"},ix={key:3,class:"time-summary-inline"},cx={key:4,class:"time-summary-inline"},dx={key:5,class:"time-summary-inline"},ux={key:6,class:"time-summary-row"},fx={key:7,class:"time-summary-row"},gx={key:0,class:"share"},px={key:8,class:"time-summary-row calendars"},hx={class:"label"},mx={class:"text"},vx={key:9,class:"time-summary-row top-category"},bx={class:"text"},yx={key:10,class:"time-summary-activity"},wx={class:"time-summary-activity__line"},kx={key:0,class:"time-summary-activity__line"},_x={key:0,class:"time-summary-activity__delta"},xx={key:1,class:"time-summary-activity__delta"},Cx={key:1,class:"time-summary-activity__line"},Sx={key:2,class:"time-summary-activity__line"},$x={key:3,class:"time-summary-activity__line"},Tx={key:11,class:"time-summary-history"},Mx={class:"time-summary-history__header"},Ax={class:"time-summary-history__mode"},Dx={key:0,class:"time-summary-history__pills"},Ex={class:"history-pill__title"},Lx={class:"history-pill__metrics"},Nx={class:"history-pill__metric-label"},Ix={class:"history-pill__metric-value"},Bx={key:1,class:"time-summary-history__list"},Ox={class:"history-entry__header"},Px={class:"history-entry__title"},Fx={key:0,class:"history-entry__range"},Hx={class:"history-entry__metrics"},Wx={class:"history-entry__metric-label"},zx={class:"history-entry__metric-value"},Rx={key:12,class:"time-summary-delta"},jx=Object.freeze(Object.defineProperty({__proto__:null,default:Ye(Ie({__name:"TimeSummaryCard",props:{summary:{},activitySummary:{},mode:{},config:{},todayGroups:{},title:{},cardBg:{},rangeMode:{},rangeStart:{},rangeEnd:{},offset:{},showHeader:{type:Boolean},history:{},showHistory:{type:Boolean},historyView:{},showActivityDetails:{type:Boolean}},setup(e){const t={showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},a=e,o=D(()=>Object.assign({},t,a.config??{})),r=D(()=>a.mode==="active"?"active days":"all days"),n=D(()=>(a.todayGroups||[]).filter(N=>Number(N.todayHours)>0).map(N=>({...N,todayHours:Number(N.todayHours)||0,color:N.color||"var(--brand)"}))),s=D(()=>{var U;if(n.value.length)return n.value.reduce((G,Q)=>G+Q.todayHours,0);const N=(U=a.summary)==null?void 0:U.todayHours;return typeof N=="number"&&Number.isFinite(N)?N:null}),i=D(()=>a.title||"Time Summary"),l=D(()=>{var G;const N=i.value,U=((G=a.summary)==null?void 0:G.rangeLabel)||"";return U?`${N}  ${U}`:N}),c=D(()=>({background:a.cardBg||void 0})),d=D(()=>a.showHeader!==!1),p=D(()=>a.showHistory!==!1),m=D(()=>a.historyView==="pills"?"pills":"list"),h=D(()=>m.value==="pills"?"Compact":"Detailed"),u=D(()=>a.showActivityDetails!==!1),f=D(()=>Number.isFinite(a.summary.offset)?a.summary.offset:a.offset??0),y=D(()=>f.value-1),x=D(()=>y.value-f.value),S=D(()=>J(y.value)),M=D(()=>V(x.value)),T=D(()=>f.value===0?"":` (offset ${J(f.value)})`),O=D(()=>{if(!o.value.showWeekendShare)return"";const N=a.summary.weekendShare;return N==null?"":`${Y(N)}%`}),I=D(()=>{if(!o.value.showTopCategory)return null;const N=a.summary.topCategory;if(!N)return null;const U=ne(N.actualHours),G=Number(N.percent??0).toFixed(0),Q=N.targetHours>0?` (${G}% of ${ne(N.targetHours)} h)`:"";return{text:`${N.label}  ${U} h${Q}`,badge:N.statusLabel||"",badgeClass:oe(N.status)}}),w=D(()=>{if(!o.value.showBusiest)return"";const N=a.summary.busiest;if(!N||!N.date)return"";const U=Number(N.hours??0);return`Busiest ${N.date}  ${ne(U)} h`}),E=D(()=>{const N=[];return o.value.showAverage&&(N.push(`${ne(a.summary.avgDay)} h/day (${r.value})`),N.push(`${ne(a.summary.avgEvent)} h/event`)),o.value.showMedian&&N.push(`${ne(a.summary.medianDay)} h median/day`),N.filter(Boolean).join("  ")}),P=D(()=>a.activitySummary??null),W=D(()=>{var N;return((N=P.value)==null?void 0:N.lastDayOff)||""}),Z=D(()=>{var G,Q;const N=X(((G=P.value)==null?void 0:G.typicalStart)??null),U=X(((Q=P.value)==null?void 0:Q.typicalEnd)??null);return N&&U?`${N}${U}`:N?`${N}`:U?`${U}`:""}),F=D(()=>{var G,Q;const N=X(((G=P.value)==null?void 0:G.earliestStart)??null),U=X(((Q=P.value)==null?void 0:Q.latestEnd)??null);return!N&&!U?"":`${N||""} / ${U||""}`}),C=D(()=>{var U;const N=(U=P.value)==null?void 0:U.longestSession;return N==null?"":`${Number(N).toFixed(1)} h`}),v=D(()=>{var N;return(N=P.value)!=null&&N.delta?z(P.value.weekendShare,P.value.delta.weekendShare):""}),b=D(()=>{var N;return(N=P.value)!=null&&N.delta?z(P.value.eveningShare,P.value.delta.eveningShare):""}),j=D(()=>p.value?(Array.isArray(a.history)?a.history:[]).map(U=>{var Q,pe,ge,de,ue,ye,me,ve,we,Se,xe,Te;const G=[];if(o.value.showTotal&&G.push({key:"total",label:"Total",value:`${ne(U.totalHours)} h`}),o.value.showAverage&&(G.push({key:"avg-day",label:`Avg/day (${r.value})`,value:`${ne(U.avgDay)} h`}),G.push({key:"avg-event",label:"Avg/event",value:`${ne(U.avgEvent)} h`})),o.value.showMedian&&G.push({key:"median",label:"Median/day",value:`${ne(U.medianDay)} h`}),o.value.showBusiest&&G.push({key:"busiest",label:"Busiest",value:B(U.busiest)}),o.value.showWorkday&&G.push({key:"workday",label:"Workdays",value:`${ne(U.workdayAvg)} h avg  ${ne(U.workdayMedian)} h median`}),o.value.showWeekend){const Me=o.value.showWeekendShare&&U.weekendShare!=null?` (${Y(U.weekendShare)}%)`:"";G.push({key:"weekend",label:"Weekend",value:`${ne(U.weekendAvg)} h avg  ${ne(U.weekendMedian)} h median${Me}`})}return o.value.showCalendarSummary&&G.push({key:"calendars",label:`${U.activeCalendars} calendars`,value:U.calendarSummary||""}),o.value.showTopCategory&&G.push({key:"top-category",label:"Top category",value:q(U.topCategory)}),o.value.showBalance&&G.push({key:"balance",label:"Balance index",value:U.balanceIndex==null?"":U.balanceIndex.toFixed(2)}),G.push({key:"events",label:"Events",value:String(((Q=U.activity)==null?void 0:Q.events)??0)}),G.push({key:"active-days",label:"Active days",value:String(((pe=U.activity)==null?void 0:pe.activeDays)??0)}),G.push({key:"typical",label:"Typical",value:re((ge=U.activity)==null?void 0:ge.typicalStart,(de=U.activity)==null?void 0:de.typicalEnd)}),u.value&&(G.push({key:"weekend-share",label:"Weekend share",value:((ue=U.activity)==null?void 0:ue.weekendShare)==null?"":`${Y(U.activity.weekendShare)}%`}),G.push({key:"evening-share",label:"Evening share",value:((ye=U.activity)==null?void 0:ye.eveningShare)==null?"":`${Y(U.activity.eveningShare)}%`}),G.push({key:"earliest-latest",label:"Earliest/Late",value:be((me=U.activity)==null?void 0:me.earliestStart,(ve=U.activity)==null?void 0:ve.latestEnd)}),G.push({key:"overlaps",label:"Overlaps",value:String(((we=U.activity)==null?void 0:we.overlapEvents)??0)}),G.push({key:"longest",label:"Longest",value:$((Se=U.activity)==null?void 0:Se.longestSession)}),G.push({key:"last-day-off",label:"Last day off",value:((xe=U.activity)==null?void 0:xe.lastDayOff)||""}),G.push({key:"last-half-day",label:"Last half day",value:((Te=U.activity)==null?void 0:Te.lastHalfDayOff)||""})),{offset:U.offset,label:U.label||`Offset ${J(U.offset)}`,range:A(U.rangeStart,U.rangeEnd),metrics:G}}):[]);D(()=>{const N=a.summary.rangeStart||a.rangeStart,U=a.summary.rangeEnd||a.rangeEnd;if(!N||!U)return"";const G=fe(N),Q=fe(U);if(!G||!Q)return"";const pe=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),ge=pe.format(G),de=pe.format(Q);return ge===de?ge:`${ge}${de}`});const R=D(()=>{const N=a.summary.delta;if(!N)return"";const G=a.summary.totalHours-N.totalHours,Q=G!==0?N.totalHours/G*100:0,pe=M.value,ge=N.totalHours>=0?"+":"",de=`${ge}${ne(Math.abs(N.totalHours))} h`,ue=`${ge}${Math.abs(Q).toFixed(1)}%`,ye=S.value,me=pe?` (${pe})`:"";return` vs. offset ${ye}${me}: ${de} / ${ue}`});function Y(N){return Number(N??0).toFixed(1)}function ne(N){return Number(N??0).toFixed(2)}function X(N){if(!N)return"";if(/^\d{2}:\d{2}$/.test(N))return N;const U=new Date(N);return Number.isNaN(U.getTime())?"":U.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function oe(N){switch(N){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function se(N){return N==null?"0.0%":`${Math.max(0,Math.min(100,Number(N))).toFixed(1)}%`}function fe(N){const U=N.trim();if(!U)return null;const G=new Date(U.length===10?`${U}T00:00:00`:U);return Number.isNaN(G.getTime())?null:G}function ce(N,U,G){const Q=new Date(N);return U==="month"?Q.setMonth(Q.getMonth()+G):Q.setDate(Q.getDate()+G*7),Q}function V(N){const U=(a.rangeMode||"week").toString().toLowerCase(),G=fe(a.summary.rangeStart||a.rangeStart||""),Q=fe(a.summary.rangeEnd||a.rangeEnd||"");if(!G||!Q)return"";const pe=ce(G,U,N),ge=ce(Q,U,N),de=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),ue=de.format(pe),ye=de.format(ge);return ue===ye?ue:`${ue}${ye}`}function J(N){return N===0?"0":N>0?`+${N}`:`${N}`}function A(N,U){const G=N?fe(N):null,Q=U?fe(U):null;if(!G||!Q)return"";const pe=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),ge=pe.format(G),de=pe.format(Q);return ge===de?ge:`${ge}${de}`}function B(N){if(!(N!=null&&N.date))return"";const U=Number((N==null?void 0:N.hours)??0);return`${N.date}  ${ne(U)} h`}function q(N){if(!N)return"";const U=N.targetHours>0?` (${Math.round(N.percent)}% of ${ne(N.targetHours)} h)`:"";return`${N.label}  ${ne(N.actualHours)} h${U}`}function re(N,U){const G=X(N||null),Q=X(U||null);return G&&Q?`${G}${Q}`:G?`${G}`:Q?`${Q}`:""}function be(N,U){const G=X(N||null),Q=X(U||null);return!G&&!Q?"":`${G||""} / ${Q||""}`}function $(N){return N==null?"":`${Number(N).toFixed(1)} h`}function z(N,U){if(U==null||N==null)return"";const G=N-U;return` vs. offset ${S.value}  ${se(G)}`}return(N,U)=>(k(),_("div",{class:"card time-summary compact",style:Le(c.value)},[d.value?(k(),_("div",ax,[g("span",null,H(l.value),1)])):ae("",!0),s.value!==null?(k(),_("div",ox,[U[0]||(U[0]=g("div",{class:"today-label"},"Total today",-1)),g("div",rx,H(ne(s.value))+" h",1)])):ae("",!0),n.value.length?(k(),_("div",nx,[(k(!0),_(he,null,$e(n.value,G=>(k(),_("div",{class:"today-cat",key:G.id},[g("span",{class:"dot",style:Le({background:G.color||"var(--brand)"})},null,4),g("span",sx,H(G.label),1),g("span",lx,H(ne(G.todayHours))+" h",1)]))),128))])):ae("",!0),o.value.showTotal?(k(),_("div",ix,[g("strong",null,H(ne(N.summary.totalHours))+" h",1),U[1]||(U[1]=Fe(" total ",-1))])):ae("",!0),E.value?(k(),_("div",cx,H(E.value),1)):ae("",!0),o.value.showBusiest&&w.value?(k(),_("div",dx,H(w.value),1)):ae("",!0),o.value.showWorkday?(k(),_("div",ux,[U[2]||(U[2]=g("span",{class:"label"},"Workdays",-1)),Fe(" "+H(ne(N.summary.workdayAvg))+" h avg  "+H(ne(N.summary.workdayMedian))+" h median ",1)])):ae("",!0),o.value.showWeekend?(k(),_("div",fx,[U[3]||(U[3]=g("span",{class:"label"},"Weekend",-1)),Fe(" "+H(ne(N.summary.weekendAvg))+" h avg  "+H(ne(N.summary.weekendMedian))+" h median ",1),o.value.showWeekendShare&&O.value?(k(),_("span",gx,"("+H(O.value)+")",1)):ae("",!0)])):ae("",!0),o.value.showCalendarSummary?(k(),_("div",px,[g("span",hx,H(N.summary.activeCalendars)+" calendars",1),N.summary.calendarSummary?(k(),_(he,{key:0},[U[4]||(U[4]=g("span",{class:"sep"},"",-1)),g("span",mx,H(N.summary.calendarSummary),1)],64)):ae("",!0)])):ae("",!0),o.value.showTopCategory&&I.value?(k(),_("div",vx,[U[5]||(U[5]=g("span",{class:"label"},"Top category",-1)),g("span",bx,H(I.value.text),1),I.value.badge?(k(),_("span",{key:0,class:Ne(["summary-badge",I.value.badgeClass])},H(I.value.badge),3)):ae("",!0)])):ae("",!0),P.value?(k(),_("div",yx,[U[6]||(U[6]=g("div",{class:"time-summary-activity__title"},"Activity & Schedule",-1)),g("div",wx," Events "+H(P.value.events)+"  Active Days "+H(P.value.activeDays??0)+"  Typical "+H(Z.value)+H(T.value),1),u.value?(k(),_("div",kx,[Fe(" Weekend "+H(se(P.value.weekendShare))+" ",1),v.value?(k(),_("span",_x,"("+H(v.value)+")",1)):ae("",!0),Fe("  Evening "+H(se(P.value.eveningShare))+" ",1),b.value?(k(),_("span",xx,"("+H(b.value)+")",1)):ae("",!0)])):ae("",!0),u.value?(k(),_("div",Cx," Earliest/Late "+H(F.value),1)):ae("",!0),u.value?(k(),_("div",Sx," Overlaps "+H(P.value.overlapEvents??0)+"  Longest "+H(C.value),1)):ae("",!0),u.value?(k(),_("div",$x," Last day off "+H(W.value),1)):ae("",!0)])):ae("",!0),p.value&&j.value.length?(k(),_("div",Tx,[g("div",Mx,[U[7]||(U[7]=g("div",{class:"time-summary-history__title"},"Lookback",-1)),g("div",Ax,H(h.value),1)]),m.value==="pills"?(k(),_("div",Dx,[(k(!0),_(he,null,$e(j.value,G=>(k(),_("div",{class:"history-pill",key:G.offset},[g("div",Ex,H(G.label),1),g("div",Lx,[(k(!0),_(he,null,$e(G.metrics,Q=>(k(),_("span",{class:"history-pill__metric",key:Q.key},[g("span",Nx,H(Q.label),1),g("span",Ix,H(Q.value),1)]))),128))])]))),128))])):(k(),_("div",Bx,[(k(!0),_(he,null,$e(j.value,G=>(k(),_("div",{class:"history-entry",key:G.offset},[g("div",Ox,[g("span",Px,H(G.label),1),G.range?(k(),_("span",Fx,H(G.range),1)):ae("",!0)]),g("div",Hx,[(k(!0),_(he,null,$e(G.metrics,Q=>(k(),_("div",{class:"history-entry__metric",key:Q.key},[g("span",Wx,H(Q.label),1),g("span",zx,H(Q.value),1)]))),128))])]))),128))]))])):ae("",!0),R.value?(k(),_("div",Rx,H(R.value),1)):ae("",!0)],4))}}),[["__scopeId","data-v-2f547f8a"]])},Symbol.toStringTag,{value:"Module"}))})();
