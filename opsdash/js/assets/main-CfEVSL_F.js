(function(){"use strict";var Js=document.createElement("style");Js.textContent=`.sidebar-toggle-btn[data-v-087101c8]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:14px;border:1px solid color-mix(in oklab,var(--brand),transparent 55%);background:color-mix(in oklab,var(--brand),transparent 86%);color:var(--brand);width:26px;height:26px;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 14px #0f172a1f;cursor:pointer;font-size:11px}.sidebar-toggle-btn[data-v-087101c8]:hover{background:color-mix(in oklab,var(--brand),transparent 76%);border-color:color-mix(in oklab,var(--brand),transparent 40%)}.sidebar-toggle-btn[data-v-087101c8]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand),transparent 40%);outline-offset:2px}.app-opsdash #app-navigation,.app-opsdash .app-navigation{position:relative;display:flex;flex-direction:column;height:100%;overflow:visible!important}.app-opsdash .app-content{padding-left:0!important;padding-top:0!important}.app-opsdash .app-content__navigation{padding-left:0!important;padding-top:0!important;margin-left:-4px;overflow:visible!important}.app-opsdash .app-navigation__content{display:flex;flex-direction:column;flex:1;min-height:100%;overflow:visible!important;max-height:none!important}.rangebar[data-v-087101c8]{margin-top:0!important;padding-top:0!important}.sidebar-toggle-btn--corner[data-v-087101c8]{position:absolute;top:-10px;right:-10px;border-color:color-mix(in oklab,var(--brand),var(--line) 70%);background:color-mix(in oklab,var(--card),transparent 10%);box-shadow:0 6px 16px #0f172a1f,inset 0 0 0 1px color-mix(in oklab,var(--brand),transparent 82%)}.sidebar-shortcuts[data-v-087101c8]{margin:8px 0 4px}.sidebar-shortcuts--bottom[data-v-087101c8]{display:flex;flex-direction:column;align-items:center;margin-top:auto;padding-bottom:10px;gap:8px}.onboarding-hint[data-v-087101c8]{margin:1px 0 4px;font-size:11px;line-height:1.2;color:color-mix(in oklab,var(--text),transparent 40%);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.sidebar-icon-row[data-v-087101c8]{display:flex;gap:10px;align-items:center;justify-content:center}.sidebar-icon-btn[data-v-087101c8]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:999px;border:1px solid color-mix(in oklab,var(--brand),var(--line) 70%);background:color-mix(in oklab,var(--brand),var(--card) 90%);color:var(--brand);width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;box-shadow:0 6px 14px #0f172a1f;cursor:pointer}.sidebar-icon-btn[data-v-087101c8]:hover{background:color-mix(in oklab,var(--brand),var(--card) 80%);border-color:color-mix(in oklab,var(--brand),var(--line) 50%)}.sidebar-icon-btn.active[data-v-087101c8]{background:color-mix(in oklab,var(--brand),var(--card) 70%);border-color:color-mix(in oklab,var(--brand),var(--line) 40%);box-shadow:0 8px 16px #0f172a29}.sidebar-icon-btn[data-v-087101c8]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand),transparent 40%);outline-offset:2px}.sidebar-icon[data-v-087101c8]{width:20px;height:20px}.sidebar-icon-btn--profile[data-v-087101c8]{width:46px;height:46px}.sidebar-icon--profile[data-v-087101c8]{width:24px;height:24px}.sidebar-block[data-v-087101c8]{margin:8px 0 12px}.sidebar-block--framed[data-v-087101c8]{border:1px solid color-mix(in oklab,var(--brand),var(--line) 70%);border-radius:14px;background:color-mix(in oklab,var(--card),transparent 10%);padding:12px 14px;box-shadow:0 6px 16px #0f172a1f,inset 0 0 0 1px color-mix(in oklab,var(--brand),transparent 82%)}.rerun-btn__icon[data-v-087101c8]{display:inline-flex;margin-right:6px;font-size:12px;line-height:1}.onboarding-jumps[data-v-087101c8]{display:grid;gap:2px;margin:4px 0 2px;padding-left:18px;font-size:12px;color:var(--muted, #6b7280);list-style:decimal;list-style-position:inside}.onboarding-jumps .link[data-v-087101c8]{background:transparent;border:0;padding:0;color:inherit;text-align:left;text-decoration:none;cursor:pointer}.onboarding-jumps .link[data-v-087101c8]:hover{color:var(--color-primary-text);text-decoration:underline}.onboarding-help[data-v-087101c8]{font-size:12px;color:var(--muted, #6b7280);margin-top:2px;margin-bottom:4px}.onboarding-fade-enter-active,.onboarding-fade-leave-active{transition:opacity .2s ease}.onboarding-fade-enter-from,.onboarding-fade-leave-to{opacity:0}.onboarding-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2000;display:flex;align-items:center;justify-content:center;padding:24px}.onboarding-backdrop{position:absolute;top:0;right:0;bottom:0;left:0;background:#0f172a73}.onboarding-panel{position:relative;z-index:1;width:min(960px,100%);max-height:calc(100vh - 48px);background:var(--color-main-background, #fff);border:1px solid color-mix(in oklab,var(--brand, #2563eb),var(--line, #e2e8f0) 70%);border-radius:14px;box-shadow:0 18px 48px #0f172a59,inset 0 0 0 1px color-mix(in oklab,var(--brand, #2563eb),transparent 82%);display:flex;flex-direction:column;padding:24px 28px}.onboarding-panel.theme-light{color:#0f172a;background:#fff}.onboarding-panel.theme-dark{--color-main-background: #0f172a;--color-background-contrast: #111827;--color-text: #e5e7eb;--color-text-maxcontrast: #e5e7eb;--color-text-light: #94a3b8;--color-border: #1f2937;--color-primary-element: #60a5fa;--color-primary: #60a5fa;color:#e5e7eb;background:#0f172a;box-shadow:0 18px 48px #00000080,inset 0 0 0 1px color-mix(in oklab,var(--brand, #60a5fa),transparent 82%)}.onboarding-panel.theme-dark .hint,.onboarding-panel.theme-dark .subtitle,.onboarding-panel.theme-dark .step-pill{color:#94a3b8}.onboarding-panel.theme-dark h2,.onboarding-panel.theme-dark h3,.onboarding-panel.theme-dark h4,.onboarding-panel.theme-dark p,.onboarding-panel.theme-dark li{color:#e5e7eb}.onboarding-panel.theme-dark .step-pill{background:#111827;border-color:#1f2937}.onboarding-panel.theme-dark .step-pill.active{color:#93c5fd;border-color:#60a5fa99;background:#60a5fa2e}.onboarding-panel.theme-dark input,.onboarding-panel.theme-dark select,.onboarding-panel.theme-dark textarea{background:#111827;color:#e5e7eb;border:1px solid #1f2937}.onboarding-panel.theme-dark .calendar-item{background:#0b1220;border-color:#1f2937}.onboarding-panel.theme-dark .category-card,.onboarding-panel.theme-dark .pref-card,.onboarding-panel.theme-dark .strategy-card,.onboarding-panel.theme-dark .mode-card,.onboarding-panel.theme-dark .input-unit,.onboarding-panel.theme-dark .empty-state{background:#111827;border-color:#1f2937}.onboarding-panel.theme-dark .mode-card.active{border-color:#60a5fa99;box-shadow:0 12px 24px #0006}.onboarding-panel.theme-dark .input-unit .unit{background:#0b1220;color:#94a3b8}.onboarding-panel.theme-dark .config-warning{border-color:#fb923c80;background:#fb923c1f}.onboarding-panel.theme-dark .config-warning p{color:#fde68a}.onboarding-panel.theme-dark .snapshot-notice--success{background:#22c55e2e;color:#bbf7d0}.onboarding-panel.theme-dark .snapshot-notice--error{background:#ef444433;color:#fecaca}.onboarding-panel.theme-dark .close-btn{color:#cbd5f5}.onboarding-panel.theme-dark .close-btn:hover{color:#93c5fd}.onboarding-panel.theme-dark .color-popover{background:#0b1220;border-color:#1f2937}.onboarding-panel.theme-dark .color-link{color:#93c5fd}.onboarding-panel.theme-dark .review-grid h5{color:#e2e8f0}.onboarding-panel.theme-dark .warning{background:#f871711f;border-color:#f8717166;color:#fecaca}.onboarding-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:16px}.onboarding-actions{display:flex;align-items:center;gap:12px}.onboarding-title h2{margin:0;font-size:1.6rem}.onboarding-title .subtitle{margin:4px 0 0;color:var(--color-text-light)}.onboarding-overlay .skip-link{background:none;border:none;color:var(--color-primary);cursor:pointer;font-size:.95rem}.onboarding-overlay .close-btn{background:none;border:none;font-size:1.4rem;line-height:1;cursor:pointer;color:var(--color-text-light)}.onboarding-overlay .close-btn:hover{color:var(--color-primary)}.onboarding-step-nav{display:flex;flex-wrap:wrap;gap:8px;margin:0 0 12px}.onboarding-overlay .step-pill{border:1px solid var(--color-border);background:var(--color-background-contrast);padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer;color:var(--color-text)}.onboarding-overlay .step-pill.active{border-color:var(--color-primary);color:var(--color-primary);background:#2563eb14}.onboarding-overlay .step-pill:disabled{opacity:.6;cursor:default}.onboarding-body{flex:1;overflow-y:auto;padding-right:8px;margin-right:-8px}.onboarding-step h3{margin-top:0}.onboarding-overlay .highlights{padding-left:18px}.onboarding-overlay .config-warning{border:1px solid color-mix(in srgb,var(--color-warning, #f97316) 35%,transparent);background:color-mix(in srgb,var(--color-warning, #f97316) 12%,transparent);border-radius:8px;padding:12px;margin:12px 0;display:flex;flex-direction:column;gap:8px}.onboarding-overlay .config-warning p{margin:0;font-size:.95rem;color:var(--color-text)}.onboarding-overlay .hint{color:var(--color-text-light);margin-top:12px}.onboarding-overlay .snapshot-notice{margin-top:12px;padding:10px 12px;border-radius:8px;font-size:.9rem}.onboarding-overlay .snapshot-notice--success{background:color-mix(in srgb,#22c55e 15%,transparent);color:#14532d}.onboarding-overlay .snapshot-notice--error{background:color-mix(in srgb,#ef4444 15%,transparent);color:#7f1d1d}.onboarding-overlay .strategy-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.onboarding-overlay .strategy-card{border:1px solid var(--color-border);border-radius:8px;padding:16px;cursor:pointer;display:flex;flex-direction:column;gap:8px;transition:border-color .15s ease,box-shadow .15s ease}.onboarding-overlay .strategy-card.active{border-color:var(--color-primary);box-shadow:0 0 0 2px #3b82f633}.onboarding-overlay .strategy-card h4{margin:0}.onboarding-overlay .strategy-card .subtitle{color:var(--color-text-light);margin:0}.onboarding-overlay .strategy-card footer{margin-top:auto;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .calendar-list{display:grid;gap:8px;margin-top:8px}.onboarding-overlay .calendar-item{display:grid;grid-template-columns:auto auto 1fr;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--color-border);border-radius:6px}.onboarding-overlay .calendar-item.checked{border-color:var(--color-primary)}.onboarding-overlay .calendar-item input{margin:0}.onboarding-overlay .calendar-item .dot{width:12px;height:12px;border-radius:50%}.onboarding-overlay .warning{color:var(--color-error);margin-top:12px}.onboarding-overlay .review-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .review-grid h5{margin:0 0 8px;font-size:.95rem;color:var(--color-text-light)}.onboarding-overlay .review-profile{display:grid;gap:8px}.onboarding-overlay .onboarding-mode{margin:16px 0}.onboarding-overlay .mode-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .mode-card{border:1px solid var(--color-border);background:var(--color-background-contrast);border-radius:10px;padding:12px 14px;text-align:left;cursor:pointer;display:grid;gap:6px;transition:border-color .2s ease,box-shadow .2s ease,transform .2s ease}.onboarding-overlay .mode-card strong{font-size:.98rem}.onboarding-overlay .mode-card span{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .mode-card.active{border-color:color-mix(in oklab,var(--color-primary),transparent 35%);box-shadow:0 12px 24px #0f172a26;transform:translateY(-1px)}.onboarding-overlay .mode-card:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .categories-editor{display:grid;gap:16px}.onboarding-overlay .category-presets{display:grid;gap:8px;margin-bottom:16px}.onboarding-overlay .preset-grid{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .preset-card{text-align:left;border:1px solid var(--color-border);background:var(--color-background-contrast);border-radius:12px;padding:12px 14px;display:grid;gap:6px;cursor:pointer;transition:border-color .2s ease,box-shadow .2s ease,transform .2s ease}.onboarding-overlay .preset-card:hover{border-color:color-mix(in oklab,var(--color-primary),transparent 40%);box-shadow:0 8px 18px #0f172a1f;transform:translateY(-1px)}.onboarding-overlay .preset-card:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .preset-title{font-weight:600}.onboarding-overlay .preset-desc{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .preset-swatches{display:flex;gap:6px;align-items:center}.onboarding-overlay .preset-swatch{width:14px;height:14px;border-radius:50%;border:1px solid color-mix(in oklab,var(--color-border),transparent 30%)}.onboarding-overlay .empty-state{padding:12px 14px;border-radius:10px;border:1px dashed color-mix(in oklab,var(--color-border),transparent 30%);background:color-mix(in oklab,var(--color-background-contrast),transparent 20%);color:var(--color-text-light)}.onboarding-overlay .category-card{border:1px solid var(--color-border);border-radius:8px;padding:16px;background:var(--color-main-background, #fff);display:flex;flex-direction:column;gap:12px}.onboarding-overlay .category-card__header{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.onboarding-overlay .category-color-indicator{width:14px;height:14px;border-radius:50%;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);flex-shrink:0}.onboarding-overlay .category-name{flex:1;padding:6px 8px;border:1px solid var(--color-border);border-radius:4px;min-width:180px}.onboarding-overlay .category-actions{display:flex;gap:8px}.onboarding-overlay .remove-category{background:none;border:none;color:var(--color-text-light);cursor:pointer;font-size:1.1rem}.onboarding-overlay .remove-category:disabled{opacity:.4;cursor:default}.onboarding-overlay .remove-category:not(:disabled):hover{color:var(--color-error)}.onboarding-overlay .category-card__fields{display:flex;flex-wrap:wrap;gap:16px}.onboarding-overlay .color-field{display:flex;flex-direction:column;gap:6px;position:relative}.onboarding-overlay .color-button{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--color-border);background:var(--color-background-contrast);padding:4px 8px;border-radius:999px;font-size:12px;color:var(--color-text);cursor:pointer}.onboarding-overlay .color-button:hover{border-color:color-mix(in oklab,var(--color-primary),transparent 35%)}.onboarding-overlay .color-button:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .color-button .category-color-indicator{width:12px;height:12px}.onboarding-overlay .color-link{align-self:flex-start;border:none;background:transparent;padding:0;font-size:12px;color:var(--brand, #2563eb);text-decoration:underline;cursor:pointer}.onboarding-overlay .color-link:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .color-popover{position:absolute;top:calc(100% + 6px);left:0;z-index:30;min-width:160px;padding:10px;border-radius:10px;border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);background:var(--color-main-background, #fff);box-shadow:0 12px 32px #0f172a40;display:flex;flex-direction:column;gap:8px}.onboarding-overlay .color-popover:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .swatch-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,20px));justify-content:flex-start;gap:6px}.onboarding-overlay .color-swatch{width:18px;height:18px;aspect-ratio:1 / 1;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.onboarding-overlay .color-swatch.active{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 55%)}.onboarding-overlay .color-swatch:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:1px}.onboarding-overlay .custom-color{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .color-input{width:44px;height:26px;padding:0;border-radius:6px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:transparent}.onboarding-overlay .add-category{justify-self:flex-start}.onboarding-overlay .category-total{font-size:.9rem;color:var(--color-text-light)}.onboarding-overlay .input-unit{display:grid;grid-template-columns:1fr auto;align-items:center;border:1px solid var(--color-border);border-radius:8px;overflow:hidden;background:var(--color-background-contrast)}.onboarding-overlay .input-unit input{border:none;padding:7px 10px;background:transparent}.onboarding-overlay .input-unit .unit{padding:6px 10px;font-size:.75rem;color:var(--color-text-light);background:color-mix(in oklab,var(--color-border),transparent 70%);white-space:nowrap}.onboarding-overlay .field{display:flex;flex-direction:column;gap:6px}.onboarding-overlay .field .label{font-size:.8rem;color:var(--color-text-light)}.onboarding-overlay .field-hint{display:block;margin-top:4px;font-size:.75rem;color:var(--color-text-light)}.onboarding-overlay .calendar-assignments{margin-top:24px;display:grid;gap:12px}.onboarding-overlay .calendar-targets{margin-top:16px;display:grid;gap:12px}.onboarding-overlay .assignment-row{display:grid;grid-template-columns:1fr minmax(160px,220px) auto;gap:12px;align-items:center}.onboarding-overlay .target-row{display:grid;grid-template-columns:1fr minmax(150px,200px);gap:12px;align-items:center}.onboarding-overlay .assignment-row select{padding:6px 8px}.onboarding-overlay .cal-name{font-size:.95rem}.onboarding-overlay .assignment-warning{font-size:.75rem;color:var(--color-error)}.onboarding-overlay .assignment-row.is-unassigned select{border-color:color-mix(in oklab,var(--color-error),transparent 50%)}.onboarding-footer{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.onboarding-overlay .preferences-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}.onboarding-overlay .pref-card{border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);border-radius:10px;padding:12px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:12px}.onboarding-overlay .pref-card h4{margin:0}.onboarding-overlay .toggle-row{display:flex;gap:10px;align-items:center;font-size:.95rem}.onboarding-overlay .toggle-row input[type=checkbox]{transform:scale(1.05)}.onboarding-overlay .pref-card--deck .toggle-row{display:flex;gap:10px;align-items:center;font-size:.95rem}.onboarding-overlay .pref-card--deck input[type=checkbox]{transform:scale(1.05)}.onboarding-overlay .deck-board-list{border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);border-radius:8px;padding:10px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:8px}.onboarding-overlay .deck-board-options{display:flex;flex-direction:column;gap:6px}.onboarding-overlay .deck-board-option{display:flex;gap:8px;align-items:center;font-size:.9rem}.onboarding-overlay .deck-status{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .deck-status--error{color:var(--color-error)}.onboarding-overlay .pref-desc{margin:0;font-size:.9rem;color:var(--color-text-light)}.onboarding-overlay .pref-hint{margin:0;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .theme-options{display:flex;flex-direction:column;gap:8px}.onboarding-overlay .theme-option{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:color-mix(in oklab,var(--color-main-background, #fff),transparent 8%)}.onboarding-overlay .theme-option input[type=radio]{margin-top:4px}.onboarding-overlay .theme-copy{display:flex;flex-direction:column;gap:2px;font-size:.9rem}.onboarding-overlay .theme-option__title{font-weight:600;color:var(--color-text)}.onboarding-overlay .theme-option__desc{color:var(--color-text-light);font-size:.85rem}.onboarding-overlay .theme-preview{font-size:.85rem;color:var(--color-text-light)}:global(body.opsdash-onboarding-lock){overflow:hidden}.sb-description[data-v-b978e1df]{font-size:12px;color:var(--text-color-tertiary);margin:0 0 10px}.setup-actions[data-v-b978e1df]{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:12px}.setup-actions .import-input[data-v-b978e1df]{display:none}.preset-form[data-v-b978e1df]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.preset-label[data-v-b978e1df]{font-size:12px;font-weight:600}.preset-form input[data-v-b978e1df]{width:100%;padding:6px 8px;border-radius:4px;border:1px solid var(--color-border);background:var(--color-main-background);color:var(--color-main-text)}.preset-save[data-v-b978e1df]{align-self:flex-start}.preset-error[data-v-b978e1df]{color:var(--color-error);font-size:12px}.preset-warnings[data-v-b978e1df]{border:1px solid var(--color-warning);background:color-mix(in srgb,var(--color-warning) 10%,transparent);border-radius:6px;padding:8px;margin-bottom:12px}.warnings-title[data-v-b978e1df]{font-weight:600;margin-bottom:4px}.preset-warnings ul[data-v-b978e1df]{padding-left:18px;margin:0 0 6px}.preset-clear[data-v-b978e1df]{padding:2px 6px}.preset-header[data-v-b978e1df]{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.preset-header h3[data-v-b978e1df]{margin:0;font-size:15px;font-weight:600}.preset-empty[data-v-b978e1df]{font-size:12px;color:var(--text-color-tertiary)}.preset-list[data-v-b978e1df]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}.preset-item[data-v-b978e1df]{border:1px solid color-mix(in oklab,var(--brand),var(--line) 60%);border-radius:6px;padding:8px;display:flex;flex-direction:column;gap:6px;background:color-mix(in oklab,var(--brand),var(--card) 92%);color:var(--color-main-text);box-shadow:0 8px 16px #0f172a14,inset 0 0 0 1px color-mix(in oklab,var(--brand),transparent 85%)}.preset-meta[data-v-b978e1df]{display:flex;flex-direction:column;gap:2px}.preset-name[data-v-b978e1df]{font-weight:600}.preset-info[data-v-b978e1df]{display:flex;flex-wrap:wrap;gap:8px;font-size:11px;color:var(--color-text-lighter)}#opsdash.opsdash-theme-dark .preset-item{background:color-mix(in oklab,var(--brand),#0b1220 82%);border-color:color-mix(in oklab,var(--brand),#0b1220 35%);color:var(--color-main-text);box-shadow:0 10px 18px #00000047,inset 0 0 0 1px color-mix(in oklab,var(--brand),transparent 70%)}.preset-actions[data-v-b978e1df]{display:flex;gap:6px}.profiles-overlay__body[data-v-753c1068]{padding-right:4px;margin-right:-4px}.shortcuts-panel[data-v-5510efeb]{width:min(720px,100%);max-height:90vh;overflow:auto;display:flex;flex-direction:column;gap:16px}.shortcuts-hint[data-v-5510efeb]{margin:4px 0 0;font-size:13px;color:var(--color-text-light)}.shortcuts-body[data-v-5510efeb]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}.shortcuts-group h3[data-v-5510efeb]{margin:0 0 8px;font-size:14px;text-transform:uppercase;color:var(--color-text-light);letter-spacing:.06em}.shortcuts-group ul[data-v-5510efeb]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}.shortcuts-group li[data-v-5510efeb]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 0;border-bottom:1px solid var(--color-border)}.shortcuts-group li[data-v-5510efeb]:last-child{border-bottom:none}.shortcut-label[data-v-5510efeb]{font-weight:600;display:flex;flex-direction:column;gap:2px}.shortcut-label small[data-v-5510efeb]{font-weight:400;font-size:12px;color:var(--color-text-light)}.shortcut-combo[data-v-5510efeb]{display:inline-flex;gap:6px}kbd[data-v-5510efeb]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;padding:4px 8px;border-radius:6px;border:1px solid var(--color-border);background:var(--color-background-contrast);color:var(--color-text);box-shadow:inset 0 -1px #fff9}.shortcuts-footer[data-v-5510efeb]{display:flex;justify-content:flex-end}@media (max-width: 600px){.shortcuts-panel[data-v-5510efeb]{padding:16px}.shortcuts-body[data-v-5510efeb]{grid-template-columns:1fr}}.layout-grid[data-v-9017abee]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:100%;position:relative;--grid-row: 24px;grid-auto-rows:var(--grid-row);grid-auto-flow:row}.layout-item[data-v-9017abee]{position:relative}.layout-item.is-loading[data-v-9017abee]>:not(.widget-loading){opacity:.35;filter:saturate(.85)}.widget-loading[data-v-9017abee]{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;background:color-mix(in oklab,var(--card),transparent 20%);border-radius:16px;z-index:2}.widget-loading__spinner[data-v-9017abee]{width:20px;height:20px;border-radius:50%;border:2px solid color-mix(in oklab,var(--brand),transparent 65%);border-top-color:var(--brand);animation:widget-spin-9017abee .8s linear infinite}.widget-loading__label[data-v-9017abee]{font-size:12px;font-weight:600;color:var(--muted, #6b7280)}@keyframes widget-spin-9017abee{to{transform:rotate(360deg)}}.layout-grid.show-guides[data-v-9017abee]{background-image:linear-gradient(to right,rgba(148,163,184,.15) 1px,transparent 1px),linear-gradient(to bottom,rgba(148,163,184,.12) 1px,transparent 1px);background-size:calc((100% - 36px)/4) 100%,100% var(--grid-row);background-position:0 0,0 0}.layout-grid.show-guides[data-v-9017abee]:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.layout-item[data-v-9017abee]{min-width:0;position:relative;display:flex;padding:0;cursor:grab;align-self:stretch;overflow:hidden;--widget-scale:1;--widget-space:1;--widget-density:1;--widget-text-scale: var(--widget-scale);--widget-pad: calc(12px * var(--widget-space));--widget-gap: calc(8px * var(--widget-space));--widget-gap-tight: calc(6px * var(--widget-space));--widget-font: calc(14px * var(--widget-scale))}.layout-item[data-v-9017abee]>*{flex:1 1 auto;min-width:0;min-height:0;height:100%;overflow:auto}.w-quarter[data-v-9017abee]{grid-column:span 1}.w-half[data-v-9017abee]{grid-column:span 2}.w-full[data-v-9017abee]{grid-column:span 4}.h-s[data-v-9017abee]{grid-row-end:span 4}.h-m[data-v-9017abee]{grid-row-end:span 8}.h-l[data-v-9017abee]{grid-row-end:span 13}.h-xl[data-v-9017abee]{grid-row-end:span 22}.is-editable[data-v-9017abee]{outline:1px dashed rgba(107,114,128,.5);border-radius:10px}.is-selected[data-v-9017abee]{outline:2px solid var(--color-primary,#2563EB)}.is-dragging[data-v-9017abee]{opacity:.6}.scale-sm[data-v-9017abee]{--widget-scale:.85}.scale-md[data-v-9017abee]{--widget-scale:1}.scale-lg[data-v-9017abee]{--widget-scale:1.2}.scale-xl[data-v-9017abee]{--widget-scale:1.4}@media (max-width: 1024px){.w-quarter[data-v-9017abee],.w-half[data-v-9017abee]{grid-column:span 2}.w-full[data-v-9017abee]{grid-column:span 4}}@media (max-width: 768px){.w-quarter[data-v-9017abee],.w-half[data-v-9017abee],.w-full[data-v-9017abee]{grid-column:span 4}}.options-wrapper[data-v-adf460eb]{position:relative}.options-pop[data-v-adf460eb]{position:absolute;bottom:calc(100% + 6px);right:0;top:auto;background:color-mix(in oklab,#111827,#1f2937 60%);border:1px solid color-mix(in oklab,#4b5563,transparent 20%);border-radius:8px;box-shadow:0 10px 22px #00000038;padding:8px;width:33vw;z-index:30;max-height:360px;overflow:auto;overflow-x:hidden}.opt-row[data-v-adf460eb]{display:grid;grid-template-columns:minmax(120px,1fr) minmax(140px,1fr);align-items:center;gap:10px;margin-bottom:6px}.opt-row[data-v-adf460eb]:last-child{margin-bottom:0}.opt-row--footer[data-v-adf460eb]{grid-template-columns:1fr;justify-items:end}.opt-row--footer[data-v-adf460eb]{justify-content:flex-end}.link-btn[data-v-adf460eb]{border:none;background:transparent;color:var(--brand,#2563eb);cursor:pointer;font-size:12px;text-decoration:underline}.opt-row label[data-v-adf460eb]{font-size:17px;color:#e5e7eb}.opt-row input[type='"number"'][data-v-adf460eb],.opt-row select[data-v-adf460eb],.opt-row input[type='"text"'][data-v-adf460eb]{width:100%;background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:6px 8px;font-size:15px}.opt-row input[type='"checkbox"'][data-v-adf460eb]{width:12px;height:12px;transform:scale(.85);transform-origin:center;align-self:center}.opt-row textarea[data-v-adf460eb]{width:100%;background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:7px}.opt-section[data-v-adf460eb]{margin-bottom:10px;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);background:color-mix(in oklab,#0f172a,#111827 75%)}.opt-section[data-v-adf460eb]:last-child{margin-bottom:0}.opt-section__title[data-v-adf460eb]{font-size:15px;text-transform:uppercase;letter-spacing:.04em;color:#9ca3af;margin-bottom:8px;font-weight:700}.colorlist[data-v-adf460eb]{display:flex;align-items:center;gap:6px;flex-wrap:wrap}.colorlist__item input[type=color][data-v-adf460eb]{width:38px;height:28px;padding:0;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);background:#0f172a}.multi[data-v-adf460eb]{display:grid;gap:6px;grid-template-columns:repeat(2,minmax(0,1fr))}.multi__item[data-v-adf460eb]{display:flex;align-items:center;gap:6px;font-size:16px}.multi__item input[type='"checkbox"'][data-v-adf460eb]{width:12px;height:12px;transform:scale(.85);transform-origin:center}.multi__item span[data-v-adf460eb]{color:#e5e7eb}.taglist[data-v-adf460eb]{display:flex;flex-direction:column;gap:6px}.taglist__hint[data-v-adf460eb]{font-size:12px;color:#9ca3af;line-height:1.35}.taglist__item[data-v-adf460eb]{display:flex;align-items:center;justify-content:space-between;gap:10px;font-size:15px}.taglist__meta[data-v-adf460eb]{display:flex;align-items:center;gap:6px}.taglist__label[data-v-adf460eb]{color:#e5e7eb}.taglist__count[data-v-adf460eb]{font-size:12px;color:#9ca3af}.filter-builder[data-v-adf460eb]{display:flex;flex-direction:column;gap:8px;width:100%}.filter-builder__row[data-v-adf460eb]{display:grid;grid-template-columns:minmax(120px,1fr) minmax(140px,1fr) minmax(140px,1fr) auto;gap:6px;align-items:center}.filter-builder__hint[data-v-adf460eb]{font-size:12px;color:#9ca3af;line-height:1.35}.filter-builder__hint code[data-v-adf460eb]{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:10px;color:#e5e7eb;background:#0f172acc;padding:1px 4px;border-radius:4px}.filter-builder__label[data-v-adf460eb],.filter-builder__input[data-v-adf460eb]{background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:4px 6px;font-size:13px}@media (max-width: 720px){.filter-builder__row[data-v-adf460eb]{grid-template-columns:1fr;align-items:stretch}.filter-builder__row .ghost[data-v-adf460eb]{justify-self:end}}.ghost[data-v-c1764b36]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.ghost.danger[data-v-c1764b36]{color:#b91c1c;border-color:#fca5a5}.widget-toolbar-layer[data-v-c1764b36]{position:fixed;inset:auto 24px 10px calc(24px + var(--opsdash-nav-offset, 0px));pointer-events:none;z-index:2147480000;display:flex;align-items:flex-end;justify-content:center;padding:0;background:none}.widget-toolbar[data-v-c1764b36]{pointer-events:auto;position:relative;margin-top:0;padding:7px 10px;border:1px solid rgba(59,130,246,.55);background:#0b1222;border:1px solid color-mix(in oklab,var(--color-primary,#2563eb),transparent 20%);background:linear-gradient(180deg,#0f172afa,#020617fa);border-radius:8px;display:flex;align-items:center;justify-content:space-between;gap:6px;box-shadow:0 8px 20px #0f172a8c,0 0 0 1px #3b82f62e;max-width:1200px;width:min(100%,1200px);opacity:1;z-index:2147480001;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);transition:background .14s ease,box-shadow .14s ease,transform .14s ease}.widget-toolbar[data-v-c1764b36]:hover{background:linear-gradient(180deg,#1e293bfa,#0f172afa);box-shadow:0 10px 24px #0f172a99,0 0 0 1px #3b82f640}.toolbar-title[data-v-c1764b36]{font-weight:600;font-size:13px;color:#e5e7eb}.toolbar-actions[data-v-c1764b36],.toolbar-quick[data-v-c1764b36]{display:flex;gap:6px;flex-wrap:wrap;align-items:center}.toolbar-field[data-v-c1764b36]{display:flex;align-items:center;gap:6px;font-size:12px;color:#e5e7eb}.toolbar-field span[data-v-c1764b36]{opacity:.75}.toolbar-field input[type=text][data-v-c1764b36],.toolbar-field select[data-v-c1764b36]{border-radius:6px;border:1px solid color-mix(in oklab,#4b5563,transparent 35%);background:color-mix(in oklab,#0f172a,#111827 70%);color:#e2e8f0;padding:3px 6px;font-size:12px;min-width:88px}.toolbar-field input[type=color][data-v-c1764b36]{width:26px;height:20px;padding:0;border:1px solid color-mix(in oklab,#4b5563,transparent 35%);border-radius:6px;background:transparent}.toolbar-field--toggle[data-v-c1764b36]{gap:4px}.widget-toolbar .ghost[data-v-c1764b36]{padding:5px 8px;font-size:12px;background:#0f172a;border-color:#4b5563;background:color-mix(in oklab,#111827,#1f2937 80%);border-color:color-mix(in oklab,#4b5563,transparent 35%);color:#f1f5f9}.widget-toolbar .ghost[data-v-c1764b36]:hover{background:#1e3a8a;border-color:#2563eb;background:color-mix(in oklab,#2563EB,#111827 85%);border-color:color-mix(in oklab,#2563EB,transparent 50%)}.cat-header[data-v-1e606590]{display:flex;align-items:center;gap:8px}.cat-color-indicator[data-v-1e606590]{width:12px;height:12px;border-radius:50%;border:1px solid color-mix(in oklab,var(--fg),transparent 80%);flex-shrink:0}.cat-header .cat-name[data-v-1e606590]{flex:1;padding:6px 8px;border:1px solid var(--line);border-radius:6px;background:color-mix(in oklab,var(--card),transparent 5%);color:var(--fg)}.color-trigger-wrapper[data-v-1e606590]{position:relative;display:inline-flex;align-items:center}.color-link[data-v-1e606590]{border:none;background:transparent;padding:0;font-size:12px;color:var(--brand, #2563eb);text-decoration:underline;cursor:pointer}.color-link[data-v-1e606590]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 40%);outline-offset:2px}.swatch-grid[data-v-1e606590]{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,20px));justify-content:flex-start;gap:6px}.color-swatch[data-v-1e606590]{width:18px!important;height:18px!important;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0!important;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}.color-swatch.active[data-v-1e606590]{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 60%)}.color-swatch[data-v-1e606590]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 40%);outline-offset:1px}.ghost[data-v-539a10f9]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.ghost.primary[data-v-539a10f9]{border-color:var(--color-primary, #2563EB);color:var(--color-primary, #2563EB)}.advanced-overlay[data-v-539a10f9]{position:fixed;top:0;right:0;bottom:0;left:0;background:#0006;display:flex;align-items:flex-start;justify-content:center;padding:48px 16px;z-index:50}.advanced-panel[data-v-539a10f9]{background:var(--color-main-background, #fff);color:var(--color-main-text, #0f172a);width:min(960px,100%);max-height:calc(100vh - 96px);border-radius:12px;box-shadow:0 20px 60px #00000040;overflow:hidden;display:flex;flex-direction:column;border:1px solid var(--color-border, #e5e7eb)}.advanced-panel>.sb-pane[data-v-539a10f9]{flex:1 1 auto;overflow:auto;padding:16px}.overlay-header[data-v-539a10f9]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--color-border, #e5e7eb);background:var(--color-background-hover, #f8fafc)}.overlay-title[data-v-539a10f9]{font-weight:600;font-size:16px}.overlay-subtitle[data-v-539a10f9]{font-size:12px;color:var(--muted, #6b7280);margin-top:2px}.overlay-actions[data-v-539a10f9]{display:flex;justify-content:space-between;align-items:center;gap:8px;padding:12px 16px;border-top:1px solid var(--color-border, #e5e7eb);background:var(--color-background-hover, #f8fafc)}.overlay-actions__left[data-v-539a10f9],.overlay-actions__right[data-v-539a10f9]{display:flex;gap:8px;flex-wrap:wrap}@media (max-width: 640px){.advanced-overlay[data-v-539a10f9]{padding:16px;align-items:flex-start}}.layout-wrapper[data-v-98fee2cd]{position:relative}.layout-wrapper.editable-mode[data-v-98fee2cd]{padding-bottom:120px;overflow:visible}:root{--widget-scale:1;--widget-space:1;--widget-density:1;--widget-text-scale:1}.balance-card[data-v-ad03af9b]{background:var(--card,#fff);border:1px solid var(--color-border,#e5e7eb);border-radius:calc(12px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg,#0f172a);display:flex;flex-direction:column;gap:var(--widget-gap, 10px);font-size:calc(14px * var(--widget-scale, 1))}.header[data-v-ad03af9b]{display:flex;align-items:center;justify-content:space-between;gap:var(--widget-gap, 10px)}.header.compact[data-v-ad03af9b]{justify-content:center}.title-row[data-v-ad03af9b]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1))}.title[data-v-ad03af9b]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.pill[data-v-ad03af9b]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(10px * var(--widget-scale, 1));border-radius:999px;background:color-mix(in srgb,var(--brand, #2563eb) 15%,white);color:var(--brand, #2563eb);text-transform:uppercase;letter-spacing:.06em}.index[data-v-ad03af9b]{text-align:right}.index.centered[data-v-ad03af9b]{text-align:center;width:100%}.index-badge[data-v-ad03af9b]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));padding:calc(6px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(12px * var(--widget-space, 1));background:color-mix(in oklab,var(--index-color, #2563eb) 14%,transparent);box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--index-color, #2563eb) 35%,transparent)}.index-badge__ring[data-v-ad03af9b]{width:calc(44px * var(--widget-scale, 1));height:calc(44px * var(--widget-scale, 1));border-radius:999px;background:conic-gradient(var(--index-color, #2563eb) var(--index-fill, 0%),color-mix(in srgb,var(--color-border, #e5e7eb),transparent 40%) 0);display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.index-badge__ring[data-v-ad03af9b]:after{content:"";position:absolute;inset:calc(5px * var(--widget-space, 1));border-radius:999px;background:var(--color-main-background, #fff);box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--index-color, #2563eb) 22%,transparent)}.index-badge__value[data-v-ad03af9b]{position:relative;z-index:1;font-weight:700;font-size:calc(14px * var(--widget-scale, 1));font-variant-numeric:tabular-nums;color:var(--fg,#0f172a)}.index-badge__meta[data-v-ad03af9b]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1));text-align:left}.index-badge__label[data-v-ad03af9b]{font-size:calc(9px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.08em;color:var(--muted)}.index-badge__range[data-v-ad03af9b]{font-size:calc(11px * var(--widget-scale, 1));color:var(--fg);white-space:nowrap}.trend[data-v-ad03af9b]{display:flex;align-items:center;gap:var(--widget-gap, 10px)}.trend-line[data-v-ad03af9b]{flex:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(92px * var(--widget-scale, 1)),1fr));gap:calc(6px * var(--widget-space, 1));justify-content:flex-start}.trend-block[data-v-ad03af9b]{min-width:0;background:color-mix(in oklab,var(--color-primary,#2563eb),#e5e7eb 50%);border-radius:calc(8px * var(--widget-space, 1));padding:calc(4px * var(--widget-space, 1)) calc(5px * var(--widget-space, 1));display:flex;align-items:center;justify-content:center;position:relative;color:#fff;font-size:calc(11px * var(--widget-scale, 1));border:none;cursor:default}.trend-block.no-range[data-v-ad03af9b]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1)) calc(5px * var(--widget-space, 1))}.trend-block.no-range.no-offset[data-v-ad03af9b]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1))}.trend-block.no-offset[data-v-ad03af9b]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.trend-block.current[data-v-ad03af9b]{background:var(--color-primary,#2563eb);box-shadow:0 0 0 2px color-mix(in oklab,var(--color-primary,#2563eb),#ffffff 60%)}.trend-line-row[data-v-ad03af9b]{display:flex;align-items:center;justify-content:space-between;gap:calc(4px * var(--widget-space, 1));width:100%}.trend-value[data-v-ad03af9b]{font-weight:700;font-size:calc(13px * var(--widget-scale, 1));text-align:left;white-space:nowrap}.trend-range[data-v-ad03af9b]{flex:1;text-align:center;font-size:calc(10px * var(--widget-scale, 1));color:#e5e7eb;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.trend-offset[data-v-ad03af9b]{min-width:calc(52px * var(--widget-scale, 1));text-align:right;font-size:calc(10px * var(--widget-scale, 1));color:#cbd5f5;white-space:nowrap}.trend-delta[data-v-ad03af9b]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted);display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.trend-left[data-v-ad03af9b]{font-weight:700;color:var(--fg,#0f172a)}.trend-center[data-v-ad03af9b]{flex:1;text-align:center;font-size:calc(11px * var(--widget-scale, 1))}.trend-right[data-v-ad03af9b]{min-width:calc(56px * var(--widget-scale, 1));text-align:right;font-size:calc(11px * var(--widget-scale, 1))}.section-title[data-v-ad03af9b]{font-weight:600;font-size:calc(13px * var(--widget-scale, 1));margin-bottom:calc(4px * var(--widget-space, 1))}.messages ul[data-v-ad03af9b]{margin:0;padding-left:calc(18px * var(--widget-space, 1));color:var(--muted);font-size:calc(13px * var(--widget-scale, 1))}.messages li[data-v-ad03af9b]{margin-bottom:calc(2px * var(--widget-space, 1))}.messages li[data-v-ad03af9b]:last-child{margin-bottom:0}.config[data-v-ad03af9b]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted);display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(140px * var(--widget-scale, 1)),1fr));gap:calc(6px * var(--widget-space, 1))}.empty[data-v-ad03af9b]{text-align:center;color:var(--muted);font-size:calc(13px * var(--widget-scale, 1))}.mix-card[data-v-ef25d454]{display:flex;flex-direction:column;gap:var(--widget-gap, 10px);--mix-label-width: clamp(34px, calc(52px * var(--widget-scale, 1)), 64px);--mix-gap: clamp(2px, calc(6px * var(--widget-space, 1)), 8px);--mix-row-gap: clamp(4px, calc(8px * var(--widget-space, 1)), 12px);--mix-cell-padding: clamp(2px, calc(6px * var(--widget-space, 1)), 8px);--mix-cell-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 14px);--mix-label-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 13px);--mix-column-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 12px);--mix-cell-min: clamp(18px, calc(30px * var(--widget-scale, 1)), 36px);--mix-radius: clamp(4px, calc(8px * var(--widget-space, 1)), 10px)}.mix-card--dense[data-v-ef25d454]{gap:calc(6px * var(--widget-space, 1));--mix-label-width: clamp(28px, calc(40px * var(--widget-scale, 1)), 52px);--mix-gap: clamp(1px, calc(3px * var(--widget-space, 1)), 6px);--mix-row-gap: clamp(3px, calc(5px * var(--widget-space, 1)), 8px);--mix-cell-padding: clamp(1px, calc(3px * var(--widget-space, 1)), 5px);--mix-cell-font: clamp(8px, calc(10px * var(--widget-scale, 1)), 12px);--mix-label-font: clamp(8px, calc(10px * var(--widget-scale, 1)), 11px);--mix-column-font: clamp(8px, calc(9px * var(--widget-scale, 1)), 10px);--mix-cell-min: clamp(16px, calc(22px * var(--widget-scale, 1)), 30px);--mix-radius: clamp(3px, calc(5px * var(--widget-space, 1)), 8px)}.mix-card--no-header[data-v-ef25d454]{gap:calc(6px * var(--widget-space, 1))}.mix-header[data-v-ef25d454]{display:flex;justify-content:space-between;align-items:center}.mix-title[data-v-ef25d454]{font-weight:700;color:var(--fg);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.mix-subtitle[data-v-ef25d454]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.mix-badge[data-v-ef25d454]{padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));font-weight:600;background:color-mix(in oklab,var(--brand),transparent 80%);border:1px solid color-mix(in oklab,var(--brand),transparent 60%);color:var(--brand)}.mix-list[data-v-ef25d454]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:var(--mix-row-gap)}.mix-row[data-v-ef25d454]{display:grid;grid-template-columns:var(--mix-label-width) 1fr;gap:var(--mix-gap);align-items:center}.mix-label[data-v-ef25d454]{font-weight:600;color:var(--fg);font-size:var(--mix-label-font);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mix-columns[data-v-ef25d454]{display:grid;gap:var(--mix-gap);align-items:center;justify-content:start;font-size:var(--mix-column-font);color:var(--muted)}.mix-column-label[data-v-ef25d454]{text-align:center;white-space:nowrap;font-variant-numeric:tabular-nums;line-height:1.1;overflow:hidden;text-overflow:ellipsis}.mix-column-label--label[data-v-ef25d454]{text-align:left}.mix-column-label--current[data-v-ef25d454]{font-weight:700;color:var(--fg)}.mix-cells[data-v-ef25d454]{display:grid;gap:var(--mix-gap);align-items:stretch;justify-content:start;width:100%;min-width:0}.mix-cell[data-v-ef25d454]{position:relative;border-radius:var(--mix-radius);padding:var(--mix-cell-padding);background:linear-gradient(135deg,color-mix(in oklab,var(--mix-bg),var(--brand) 18%),color-mix(in oklab,var(--mix-bg),var(--card) 10%));color:var(--mix-fg, var(--fg));text-align:center;font-size:var(--mix-cell-font);border:1px solid color-mix(in oklab,var(--mix-bg),var(--brand) 22%);box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--mix-bg),transparent 55%);min-height:var(--mix-cell-min);display:flex;align-items:center;justify-content:center}#opsdash.opsdash-theme-dark .mix-cell{background:linear-gradient(135deg,color-mix(in oklab,var(--mix-bg),#0b1220 78%),color-mix(in oklab,var(--mix-bg),#0b1220 90%));border-color:color-mix(in oklab,var(--mix-bg),#0b1220 45%);color:color-mix(in oklab,var(--mix-fg),#e2e8f0 80%);box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--mix-bg),transparent 72%)}.mix-cell--current[data-v-ef25d454]{outline:1px solid color-mix(in oklab,var(--brand),transparent 35%);outline-offset:1px}.mix-cell--mode-hybrid[data-v-ef25d454]{box-shadow:inset 0 -3px color-mix(in oklab,var(--mix-accent),transparent 30%)}.mix-cell--mode-share[data-v-ef25d454]{box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--mix-bg),transparent 40%)}.mix-card--square .mix-cell[data-v-ef25d454]{aspect-ratio:1 / 1;min-height:0}.mix-cell__value[data-v-ef25d454]{font-weight:700;font-variant-numeric:tabular-nums;white-space:nowrap}.pill[data-v-ef25d454]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;font-size:11px;border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.hint[data-v-ef25d454]{font-size:12px;color:var(--muted)}.chart-widget[data-v-05ee383b]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-05ee383b]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-05ee383b]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-05ee383b]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-05ee383b]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-05ee383b]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-05ee383b]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.chart-widget__legend .dot[data-v-05ee383b]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.heatmap-lookback[data-v-d04eb3d7]{display:flex;flex-direction:column;gap:calc(10px * var(--widget-space, 1))}.heatmap-lookback__stacked[data-v-d04eb3d7]{display:grid;gap:calc(12px * var(--widget-space, 1))}.heatmap-lookback__panel[data-v-d04eb3d7]{display:grid;gap:calc(6px * var(--widget-space, 1))}.heatmap-lookback__label[data-v-d04eb3d7]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.heatmap-lookback__label .dot[data-v-d04eb3d7],.heatmap-lookback__legend-weeks .dot[data-v-d04eb3d7]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%;flex:0 0 auto}.heatmap-lookback__legend[data-v-d04eb3d7]{display:grid;gap:calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.heatmap-lookback__legend-scale[data-v-d04eb3d7]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.heatmap-lookback__legend-bar[data-v-d04eb3d7]{flex:1;height:calc(8px * var(--widget-space, 1));border-radius:999px;background:linear-gradient(90deg,var(--heatmap-low),var(--heatmap-high))}.heatmap-lookback__legend-meta[data-v-d04eb3d7]{font-size:calc(10px * var(--widget-scale, 1));color:var(--muted)}.heatmap-lookback__legend-weeks[data-v-d04eb3d7]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1))}.heatmap-lookback__legend-weeks li[data-v-d04eb3d7]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.chart-widget[data-v-639549e5]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-639549e5]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-639549e5]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-639549e5]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-639549e5]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__hint[data-v-639549e5],.chart-widget__meta[data-v-639549e5]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.chart-widget--hod[data-v-639549e5]{--heatmap-low: color-mix(in srgb, var(--brand, #2563eb) 10%, var(--card, #ffffff));--heatmap-high: color-mix(in srgb, var(--brand, #2563eb) 80%, var(--card, #ffffff))}.chart-widget[data-v-66cec46a]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-66cec46a]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-66cec46a]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-66cec46a]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-66cec46a]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-66cec46a]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-66cec46a]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.chart-widget__legend .dot[data-v-66cec46a]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.chart[data-v-0b0f384d]{cursor:pointer}.chart-widget[data-v-1a53cec2]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-1a53cec2]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-1a53cec2]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-1a53cec2]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-1a53cec2]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-1a53cec2]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-1a53cec2]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1));transition:color .15s ease,background .15s ease;cursor:pointer}.chart-widget__legend li.hovered[data-v-1a53cec2]{color:var(--brand);background:color-mix(in oklab,var(--brand),transparent 90%)}.chart-widget__legend .dot[data-v-1a53cec2]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.chart-widget__legend .val[data-v-1a53cec2]{margin-left:auto;color:var(--muted)}.chart[data-v-665ab1a0]{cursor:pointer}.chart-widget[data-v-20b54b56]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-20b54b56]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-20b54b56]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-20b54b56]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-20b54b56]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-20b54b56]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-20b54b56]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1));transition:color .15s ease,background .15s ease;cursor:pointer}.chart-widget__legend li.hovered[data-v-20b54b56]{color:var(--brand);background:color-mix(in oklab,var(--brand),transparent 90%)}.chart-widget__legend .dot[data-v-20b54b56]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}table[data-v-2efa83d5]{width:100%;border-collapse:collapse;font-size:13px}thead th[data-v-2efa83d5]{text-align:left;padding:6px 8px;font-weight:600;color:var(--muted);border-bottom:1px solid var(--line)}thead th.num[data-v-2efa83d5]{text-align:right}tbody td[data-v-2efa83d5]{padding:6px 8px;border-top:1px solid var(--line);vertical-align:top}.col-w-42[data-v-2efa83d5]{width:42%}.col-w-12[data-v-2efa83d5]{width:12%}.col-w-14[data-v-2efa83d5]{width:14%}.col-w-18[data-v-2efa83d5]{width:18%}.group-row td[data-v-2efa83d5]{padding-top:12px;padding-bottom:8px;background:color-mix(in srgb,var(--muted) 6%,transparent)}.group-header[data-v-2efa83d5]{display:flex;justify-content:space-between;align-items:center;gap:12px;font-size:12px}.group-label[data-v-2efa83d5]{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--fg)}.group-label .dot[data-v-2efa83d5]{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 12%,transparent)}.group-meta[data-v-2efa83d5]{display:flex;align-items:center;gap:8px;flex-wrap:wrap;color:var(--muted)}.group-meta .summary[data-v-2efa83d5]{font-size:12px}.group-meta .summary-percent[data-v-2efa83d5]{font-variant-numeric:tabular-nums;color:var(--fg);font-weight:600}.badge[data-v-2efa83d5]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-2efa83d5]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-2efa83d5]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-2efa83d5]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-2efa83d5]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-2efa83d5]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.cell[data-v-2efa83d5]{display:flex;flex-direction:column;gap:4px}.row-name[data-v-2efa83d5]{font-weight:600;color:var(--fg)}.progress[data-v-2efa83d5]{position:relative;height:6px;background:color-mix(in srgb,var(--muted) 22%,transparent);border-radius:999px;overflow:hidden}.progress-bar[data-v-2efa83d5]{height:100%;border-radius:999px;background:var(--brand);transition:width .2s ease}.progress-today[data-v-2efa83d5]{position:absolute;top:-2px;height:10px;border-radius:8px;opacity:.9;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 4px #0000001f}.progress-chip[data-v-2efa83d5]{font-size:10px;font-weight:700;color:#fff;padding:0 6px;white-space:nowrap;text-shadow:0 1px 3px rgba(0,0,0,.25)}.num[data-v-2efa83d5]{text-align:right;font-variant-numeric:tabular-nums;color:var(--fg)}.hint[data-v-2efa83d5]{color:var(--muted);font-size:11px}.delta[data-v-2efa83d5]{font-weight:600}.delta.pos[data-v-2efa83d5]{color:var(--pos)}.delta.neg[data-v-2efa83d5]{color:var(--neg)}.empty-row td.empty[data-v-2efa83d5]{font-style:italic;color:var(--muted);text-align:center}.table-widget[data-v-e75cc444]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.table-widget__header[data-v-e75cc444]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.table-widget__title[data-v-e75cc444]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.table-widget__subtitle[data-v-e75cc444]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.table-widget__empty[data-v-e75cc444]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.dayoff-card[data-v-68e10b8f]{display:flex;flex-direction:column;gap:var(--widget-gap, 10px)}.dayoff-card__header[data-v-68e10b8f]{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fg);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.dayoff-heatmap[data-v-68e10b8f]{display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(110px * var(--widget-scale, 1)),1fr));gap:var(--widget-gap, 8px)}.dayoff-tile[data-v-68e10b8f]{border-radius:calc(10px * var(--widget-space, 1));padding:calc(10px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1));text-align:center;background:var(--tile-bg, color-mix(in oklab, var(--muted), transparent 85%));color:var(--tile-fg, var(--fg));transition:transform .2s ease,background .2s ease}.dayoff-tile--current[data-v-68e10b8f]{outline:1px solid color-mix(in oklab,var(--brand),transparent 30%);outline-offset:1px}.dayoff-tile--low[data-v-68e10b8f]{background:var(--tile-bg, color-mix(in oklab, #dc2626, white 70%));color:var(--tile-fg, #7f1d1d)}.dayoff-tile--mid[data-v-68e10b8f]{background:var(--tile-bg, color-mix(in oklab, #f97316, white 68%));color:var(--tile-fg, #7c2d12)}.dayoff-tile--high[data-v-68e10b8f]{background:var(--tile-bg, color-mix(in oklab, #16a34a, white 65%));color:var(--tile-fg, #14532d)}.dayoff-tile__label[data-v-68e10b8f]{font-size:calc(11px * var(--widget-scale, 1));font-weight:600}.dayoff-tile__value[data-v-68e10b8f]{font-size:calc(14px * var(--widget-scale, 1));font-weight:700;font-variant-numeric:tabular-nums}.dayoff-tile__meta[data-v-68e10b8f]{font-size:calc(10px * var(--widget-scale, 1));color:color-mix(in oklab,currentColor,transparent 55%);font-variant-numeric:tabular-nums}.pill[data-v-68e10b8f]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.hint[data-v-68e10b8f]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.deck-panel[data-v-3c27c19f]{display:flex;flex-direction:column;gap:calc(16px * var(--widget-space, 1));height:100%;min-height:0;font-size:var(--widget-font, 14px)}.deck-panel__header[data-v-3c27c19f]{display:flex;align-items:center;justify-content:space-between}.deck-panel__title[data-v-3c27c19f]{font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)));font-weight:600}.deck-panel__subtitle[data-v-3c27c19f]{font-size:calc(14px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-panel__actions[data-v-3c27c19f]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1))}.deck-panel__count[data-v-3c27c19f]{font-size:calc(14px * var(--widget-scale, 1));background:var(--color-background-darker);border:1px solid var(--color-border-dark);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(12px * var(--widget-space, 1))}.deck-panel__refresh[data-v-3c27c19f]{border:1px solid var(--color-primary);background:transparent;color:var(--color-primary);border-radius:999px;padding:calc(4px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));font-size:calc(14px * var(--widget-scale, 1));cursor:pointer}.deck-panel__refresh[data-v-3c27c19f]:disabled{opacity:.6;cursor:default}.deck-panel__link[data-v-3c27c19f]{font-size:calc(14px * var(--widget-scale, 1));text-decoration:none;color:var(--color-text-maxcontrast)}.deck-panel__loading[data-v-3c27c19f]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));color:var(--color-text-maxcontrast)}.deck-panel__filters[data-v-3c27c19f]{display:flex;gap:calc(8px * var(--widget-space, 1));flex-wrap:wrap}.deck-panel--compact[data-v-3c27c19f]{gap:calc(10px * var(--widget-space, 1))}.deck-panel--compact .deck-panel__filters[data-v-3c27c19f]{gap:calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card-list[data-v-3c27c19f]{gap:calc(10px * var(--widget-space, 1))}.deck-panel--compact .deck-card[data-v-3c27c19f]{padding:calc(6px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));gap:0;border-radius:calc(8px * var(--widget-space, 1))}.deck-panel--compact .deck-card__row[data-v-3c27c19f]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));white-space:nowrap;overflow-x:auto;padding-bottom:2px}.deck-panel--compact .deck-card__row[data-v-3c27c19f]::-webkit-scrollbar{height:6px}.deck-panel--compact .deck-card__row[data-v-3c27c19f]::-webkit-scrollbar-thumb{background:color-mix(in oklab,var(--color-border),transparent 30%);border-radius:999px}.deck-panel--compact .deck-card__status-row[data-v-3c27c19f]{font-size:calc(12px * var(--widget-scale, 1));gap:calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card__status[data-v-3c27c19f]{font-size:calc(11px * var(--widget-scale, 1));letter-spacing:.04em}.deck-panel--compact .deck-card__time[data-v-3c27c19f]{font-size:calc(11px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-panel--compact .deck-card__title[data-v-3c27c19f]{font-size:calc(13px * var(--widget-scale, 1));font-weight:600}.deck-panel--compact .deck-card__meta[data-v-3c27c19f]{font-size:calc(11px * var(--widget-scale, 1));gap:calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card__board[data-v-3c27c19f]{padding:calc(1px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1));font-size:calc(10px * var(--widget-scale, 1))}.deck-panel--compact .deck-card__labels[data-v-3c27c19f]{gap:calc(4px * var(--widget-space, 1));flex-wrap:nowrap}.deck-panel--compact .deck-card__label[data-v-3c27c19f]{font-size:calc(10px * var(--widget-scale, 1));padding:calc(1px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card__assignees[data-v-3c27c19f]{font-size:calc(11px * var(--widget-scale, 1));gap:calc(4px * var(--widget-space, 1));flex-wrap:nowrap}.deck-panel__body[data-v-3c27c19f]{flex:1;min-height:0;overflow:auto;padding-right:calc(4px * var(--widget-space, 1))}.deck-filter-btn[data-v-3c27c19f]{border:1px solid var(--color-border-maxcontrast);background:var(--color-main-background);border-radius:999px;padding:calc(3px * var(--widget-space, 1)) calc(14px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1));cursor:pointer;display:inline-flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.deck-filter-btn.is-draggable[data-v-3c27c19f]{cursor:grab}.deck-filter-btn.is-draggable[data-v-3c27c19f]:active{cursor:grabbing}.deck-filter-btn.active[data-v-3c27c19f]{border-color:var(--color-primary);color:var(--color-primary)}.deck-filter-count[data-v-3c27c19f]{font-size:calc(11px * var(--widget-scale, 1));opacity:.7}.deck-filter-btn[data-v-3c27c19f]:disabled{opacity:.5;cursor:not-allowed}.deck-panel__error[data-v-3c27c19f]{padding:calc(12px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));background:var(--color-error-hover);color:var(--color-error-text)}.deck-card-list[data-v-3c27c19f]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:calc(16px * var(--widget-space, 1))}.deck-card[data-v-3c27c19f]{border:1px solid var(--color-border);border-radius:calc(12px * var(--widget-space, 1));padding:calc(14px * var(--widget-space, 1));background:var(--color-main-background);display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1))}.deck-card__status-row[data-v-3c27c19f]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));font-size:calc(14px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-card__status[data-v-3c27c19f]{font-weight:600;text-transform:uppercase;font-size:calc(12px * var(--widget-scale, 1));letter-spacing:.05em}.deck-card__status.done[data-v-3c27c19f]{color:var(--color-success)}.deck-card__status.archived[data-v-3c27c19f]{color:var(--color-text-maxcontrast)}.deck-card__title[data-v-3c27c19f]{font-size:calc(16px * var(--widget-scale, 1));font-weight:600;color:var(--color-text)}.deck-card__meta[data-v-3c27c19f]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1))}.deck-card__board[data-v-3c27c19f]{border:2px solid var(--color-border);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;text-transform:uppercase;font-size:calc(11px * var(--widget-scale, 1))}.deck-card__stack[data-v-3c27c19f]{color:var(--color-text-maxcontrast)}.deck-card__labels[data-v-3c27c19f]{display:flex;gap:calc(6px * var(--widget-space, 1));flex-wrap:wrap}.deck-card__label[data-v-3c27c19f]{color:#fff;font-size:calc(11px * var(--widget-scale, 1));padding:calc(2px * var(--widget-space, 1)) calc(7px * var(--widget-space, 1));border-radius:999px}.deck-card__assignees[data-v-3c27c19f]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.deck-card__assignees-label[data-v-3c27c19f]{color:var(--color-text-maxcontrast)}.deck-card__assignee[data-v-3c27c19f]{font-weight:500}.note-card[data-v-5e293970]{background:var(--card,#fff);border:1px solid var(--color-border,#d1d5db);border-radius:calc(10px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg,#0f172a);display:flex;flex-direction:column;gap:var(--widget-gap, 10px);font-size:var(--widget-font, 14px)}.note-header[data-v-5e293970]{display:flex;align-items:center;justify-content:space-between}.title[data-v-5e293970]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.btn[data-v-5e293970]{padding:calc(6px * var(--widget-space, 1)) calc(10px * var(--widget-space, 1));border-radius:calc(6px * var(--widget-space, 1));border:1px solid var(--color-border,#d1d5db);background:var(--card,#fff);cursor:pointer;font-size:calc(12px * var(--widget-scale, 1))}.field[data-v-5e293970]{display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1))}.field-head[data-v-5e293970]{display:flex;align-items:center;justify-content:space-between;gap:calc(6px * var(--widget-space, 1))}.label[data-v-5e293970]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.note[data-v-5e293970]{width:100%;min-height:calc(80px * var(--widget-scale, 1));border:1px solid var(--color-border,#d1d5db);border-radius:calc(6px * var(--widget-space, 1));padding:calc(8px * var(--widget-space, 1));resize:vertical;font-size:calc(13px * var(--widget-scale, 1))}.note--compact[data-v-5e293970]{min-height:calc(60px * var(--widget-scale, 1));font-size:calc(12px * var(--widget-scale, 1))}.note-select[data-v-5e293970]{max-width:55%;padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(6px * var(--widget-space, 1));border:1px solid var(--color-border,#d1d5db);background:var(--card,#fff);color:var(--fg,#0f172a);font-size:calc(12px * var(--widget-scale, 1))}.text-card[data-v-01eb6d28]{background:var(--card, #fff);border:1px solid var(--color-border, #d1d5db);border-radius:calc(10px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg, #0f172a);line-height:calc(1.4 * var(--widget-density, 1));font-size:var(--widget-font, 14px)}.text-card h3[data-v-01eb6d28]{margin:0 0 calc(6px * var(--widget-space, 1)) 0;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.text-card .body[data-v-01eb6d28]{margin:0;white-space:pre-wrap;font-size:calc(.95em * var(--widget-scale, 1))}.text-card .body.empty[data-v-01eb6d28]{color:var(--muted)}.targets-card[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px);font-size:var(--widget-font, 14px)}.targets-header[data-v-9ee23cb0]{display:flex;justify-content:space-between;align-items:center}.targets-header strong[data-v-9ee23cb0]{font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.targets-main[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1))}.targets-main .line[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.targets-main .line.forecast[data-v-9ee23cb0]{flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.targets-main .line .value[data-v-9ee23cb0]{display:flex;gap:calc(6px * var(--widget-space, 1));align-items:center}.targets-badges[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.targets-categories[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(10px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px solid var(--line)}.category[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));padding:calc(4px * var(--widget-space, 1)) 0}.category .cat-top[data-v-9ee23cb0]{display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.category .cat-label[data-v-9ee23cb0]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-weight:600;color:var(--fg)}.category .cat-label .dot[data-v-9ee23cb0]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 10%,transparent)}.category .cat-label .name[data-v-9ee23cb0]{color:var(--fg)}.category .cat-meta[data-v-9ee23cb0]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-weight:600;color:var(--muted)}.category .cat-meta .percent[data-v-9ee23cb0]{font-variant-numeric:tabular-nums;color:var(--fg)}.cat-progress .bar[data-v-9ee23cb0]{position:relative;width:100%;height:calc(8px * var(--widget-space, 1));border-radius:999px;background:color-mix(in srgb,var(--muted) 20%,transparent);overflow:hidden}.cat-progress .bar .fill[data-v-9ee23cb0]{height:100%;border-radius:999px;transition:width .2s ease;max-width:100%}.cat-progress .bar .today-overlay[data-v-9ee23cb0]{position:absolute;top:calc(-2px * var(--widget-space, 1));height:calc(12px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));opacity:.85;border:1px solid transparent;pointer-events:none}.today-chip[data-v-9ee23cb0]{position:absolute;top:calc(-22px * var(--widget-space, 1));transform:translate(-50%);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(10px * var(--widget-scale, 1));font-weight:700;color:#fff;border:1px solid transparent;white-space:nowrap;box-shadow:0 2px 6px #0000001f}.today-label[data-v-9ee23cb0]{font-size:calc(10px * var(--widget-scale, 1));line-height:1.2}.category .cat-metrics[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1));align-items:center;color:var(--fg)}.cat-footer[data-v-9ee23cb0]{display:flex;justify-content:space-between;align-items:center}.hint[data-v-9ee23cb0]{color:var(--muted);font-size:calc(12px * var(--widget-scale, 1))}.badge[data-v-9ee23cb0]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(11px * var(--widget-scale, 1));font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-label[data-v-9ee23cb0]{font-weight:600}.status-on[data-v-9ee23cb0]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-9ee23cb0]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-9ee23cb0]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-9ee23cb0]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-9ee23cb0]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.delta[data-v-9ee23cb0]{font-weight:600}.delta.pos[data-v-9ee23cb0]{color:var(--pos)}.delta.neg[data-v-9ee23cb0]{color:var(--neg)}.cat-metrics .hint[data-v-9ee23cb0],.cat-footer .hint[data-v-9ee23cb0]{font-size:calc(11px * var(--widget-scale, 1))}.cat-progress[data-v-9ee23cb0]{padding:calc(2px * var(--widget-space, 1)) 0}.cat-meta .badge[data-v-9ee23cb0]{font-size:calc(10px * var(--widget-scale, 1))}.card.time-summary[data-v-9ebca49e]{display:flex;flex-direction:column;gap:var(--widget-gap, 6px);font-size:var(--widget-font, 13px);color:var(--muted);--widget-pad: calc(14px * var(--widget-space, 1));padding:var(--widget-pad, 14px)}.today-highlight[data-v-9ebca49e]{display:flex;align-items:center;justify-content:space-between;padding:calc(10px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));border-radius:calc(10px * var(--widget-space, 1));background:color-mix(in oklab,var(--brand, #2563eb) 14%,transparent);border:1px solid color-mix(in oklab,var(--brand, #2563eb),transparent 70%);color:var(--fg)}.today-label[data-v-9ebca49e]{font-size:calc(12px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.04em;color:color-mix(in oklab,var(--fg),transparent 35%)}.today-value[data-v-9ebca49e]{font-size:calc(18px * var(--widget-scale, 1));font-weight:700;letter-spacing:-.02em}.today-cats[data-v-9ebca49e]{display:flex;flex-wrap:wrap;gap:calc(8px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--fg)}.today-cat[data-v-9ebca49e]{display:inline-flex;align-items:center;gap:calc(6px * var(--widget-space, 1));padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));background:color-mix(in oklab,var(--card, #fff),transparent 6%);border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 30%)}.today-cat .dot[data-v-9ebca49e]{width:calc(9px * var(--widget-space, 1));height:calc(9px * var(--widget-space, 1));border-radius:50%;box-shadow:0 0 0 1px color-mix(in oklab,var(--fg) 10%,transparent)}.today-cat .name[data-v-9ebca49e]{font-weight:600}.today-cat .value[data-v-9ebca49e]{color:var(--muted)}.time-summary-firstline[data-v-9ebca49e]{display:flex;align-items:center;justify-content:space-between;gap:var(--widget-gap, 8px);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)));color:var(--fg);font-weight:600}.mode-pill[data-v-9ebca49e]{display:inline-flex;align-items:center;padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));font-weight:600;border-radius:999px;background:color-mix(in srgb,var(--brand) 18%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.time-summary-metrics[data-v-9ebca49e]{display:grid;gap:calc(4px * var(--widget-space, 1));margin:0;padding:0;list-style:none}.time-summary-metrics li[data-v-9ebca49e]{display:flex;flex-wrap:wrap;gap:calc(4px * var(--widget-space, 1));color:var(--muted)}.time-summary-metrics strong[data-v-9ebca49e]{color:var(--fg);font-size:calc(14px * var(--widget-scale, 1))}.time-summary-inline[data-v-9ebca49e]{font-size:calc(13px * var(--widget-scale, 1));color:var(--fg)}.time-summary-row[data-v-9ebca49e]{display:flex;flex-wrap:wrap;gap:calc(4px * var(--widget-space, 1));line-height:1.4;color:var(--muted)}.time-summary-row .label[data-v-9ebca49e]{color:var(--fg);font-weight:600}.time-summary-row.calendars[data-v-9ebca49e]{word-break:break-word}.time-summary-row .sep[data-v-9ebca49e],.time-summary-row .hint[data-v-9ebca49e],.time-summary-row .share[data-v-9ebca49e]{color:var(--muted)}.time-summary-row.top-category[data-v-9ebca49e]{align-items:center;gap:calc(6px * var(--widget-space, 1))}.time-summary-activity[data-v-9ebca49e]{margin-top:calc(6px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px solid var(--line);display:grid;gap:calc(2px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.time-summary-activity__title[data-v-9ebca49e]{font-weight:600;color:var(--fg)}.time-summary-activity__line[data-v-9ebca49e]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.time-summary-activity__delta[data-v-9ebca49e]{color:var(--muted)}.time-summary-delta[data-v-9ebca49e]{margin-top:calc(6px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px dashed color-mix(in oklab,var(--muted),transparent 70%);font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.time-summary-history[data-v-9ebca49e]{margin-top:calc(8px * var(--widget-space, 1));padding-top:calc(8px * var(--widget-space, 1));border-top:1px solid var(--line);display:grid;gap:calc(8px * var(--widget-space, 1))}.time-summary-history__header[data-v-9ebca49e]{display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.time-summary-history__title[data-v-9ebca49e]{font-weight:600;color:var(--fg)}.time-summary-history__mode[data-v-9ebca49e]{font-size:calc(11px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.08em;color:var(--muted)}.time-summary-history__list[data-v-9ebca49e]{display:grid;gap:calc(10px * var(--widget-space, 1))}.history-entry[data-v-9ebca49e]{border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 20%);border-radius:calc(12px * var(--widget-space, 1));padding:calc(10px * var(--widget-space, 1));background:color-mix(in oklab,var(--card, #fff),transparent 6%)}.history-entry__header[data-v-9ebca49e]{display:flex;flex-wrap:wrap;align-items:center;gap:calc(6px * var(--widget-space, 1)) calc(10px * var(--widget-space, 1));margin-bottom:calc(8px * var(--widget-space, 1))}.history-entry__title[data-v-9ebca49e]{font-weight:600;color:var(--fg)}.history-entry__range[data-v-9ebca49e]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.history-entry__metrics[data-v-9ebca49e]{display:grid;gap:calc(6px * var(--widget-space, 1));grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}.history-entry__metric[data-v-9ebca49e]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.history-entry__metric-label[data-v-9ebca49e]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted);text-transform:uppercase;letter-spacing:.05em}.history-entry__metric-value[data-v-9ebca49e]{font-size:calc(12px * var(--widget-scale, 1));color:var(--fg)}.time-summary-history__pills[data-v-9ebca49e]{display:grid;gap:calc(10px * var(--widget-space, 1))}.history-pill[data-v-9ebca49e]{border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 20%);border-radius:calc(999px * var(--widget-space, 1));padding:calc(8px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));background:color-mix(in oklab,var(--card, #fff),transparent 6%);display:grid;gap:calc(6px * var(--widget-space, 1))}.history-pill__title[data-v-9ebca49e]{font-weight:600;color:var(--fg);font-size:calc(12px * var(--widget-scale, 1))}.history-pill__metrics[data-v-9ebca49e]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.history-pill__metric[data-v-9ebca49e]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;background:color-mix(in oklab,var(--card, #fff),transparent 12%);border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 35%)}.history-pill__metric-label[data-v-9ebca49e]{font-size:calc(10px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.06em;color:var(--muted)}.history-pill__metric-value[data-v-9ebca49e]{font-size:calc(11px * var(--widget-scale, 1));color:var(--fg);font-weight:600}.summary-badge[data-v-9ebca49e]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(11px * var(--widget-scale, 1));font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-9ebca49e]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-9ebca49e]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-9ebca49e]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-9ebca49e]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-9ebca49e]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}
/*$vite$:1*/`,document.head.appendChild(Js);/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function hn(e){const t=Object.create(null);for(const a of e.split(","))t[a]=1;return a=>a in t}const ot={},to=[],la=()=>{},Ys=()=>!1,fr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),mn=e=>e.startsWith("onUpdate:"),yt=Object.assign,vn=(e,t)=>{const a=e.indexOf(t);a>-1&&e.splice(a,1)},$d=Object.prototype.hasOwnProperty,Ye=(e,t)=>$d.call(e,t),Te=Array.isArray,ao=e=>To(e)==="[object Map]",gr=e=>To(e)==="[object Set]",Zs=e=>To(e)==="[object Date]",Ie=e=>typeof e=="function",lt=e=>typeof e=="string",ea=e=>typeof e=="symbol",rt=e=>e!==null&&typeof e=="object",Xs=e=>(rt(e)||Ie(e))&&Ie(e.then)&&Ie(e.catch),Qs=Object.prototype.toString,To=e=>Qs.call(e),Td=e=>To(e).slice(8,-1),el=e=>To(e)==="[object Object]",bn=e=>lt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Mo=hn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),pr=e=>{const t=Object.create(null);return a=>t[a]||(t[a]=e(a))},Md=/-(\w)/g,Gt=pr(e=>e.replace(Md,(t,a)=>a?a.toUpperCase():"")),Ad=/\B([A-Z])/g,Ta=pr(e=>e.replace(Ad,"-$1").toLowerCase()),hr=pr(e=>e.charAt(0).toUpperCase()+e.slice(1)),yn=pr(e=>e?`on${hr(e)}`:""),Ma=(e,t)=>!Object.is(e,t),mr=(e,...t)=>{for(let a=0;a<e.length;a++)e[a](...t)},tl=(e,t,a,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:a})},vr=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Dd=e=>{const t=lt(e)?Number(e):NaN;return isNaN(t)?e:t};let al;const br=()=>al||(al=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function De(e){if(Te(e)){const t={};for(let a=0;a<e.length;a++){const o=e[a],r=lt(o)?Id(o):De(o);if(r)for(const n in r)t[n]=r[n]}return t}else if(lt(e)||rt(e))return e}const Ed=/;(?![^(]*\))/g,Ld=/:([^]+)/,Nd=/\/\*[^]*?\*\//g;function Id(e){const t={};return e.replace(Nd,"").split(Ed).forEach(a=>{if(a){const o=a.split(Ld);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Ee(e){let t="";if(lt(e))t=e;else if(Te(e))for(let a=0;a<e.length;a++){const o=Ee(e[a]);o&&(t+=o+" ")}else if(rt(e))for(const a in e)e[a]&&(t+=a+" ");return t.trim()}const Od=hn("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function ol(e){return!!e||e===""}function Bd(e,t){if(e.length!==t.length)return!1;let a=!0;for(let o=0;a&&o<e.length;o++)a=yr(e[o],t[o]);return a}function yr(e,t){if(e===t)return!0;let a=Zs(e),o=Zs(t);if(a||o)return a&&o?e.getTime()===t.getTime():!1;if(a=ea(e),o=ea(t),a||o)return e===t;if(a=Te(e),o=Te(t),a||o)return a&&o?Bd(e,t):!1;if(a=rt(e),o=rt(t),a||o){if(!a||!o)return!1;const r=Object.keys(e).length,n=Object.keys(t).length;if(r!==n)return!1;for(const s in e){const l=e.hasOwnProperty(s),i=t.hasOwnProperty(s);if(l&&!i||!l&&i||!yr(e[s],t[s]))return!1}}return String(e)===String(t)}function Pd(e,t){return e.findIndex(a=>yr(a,t))}const rl=e=>!!(e&&e.__v_isRef===!0),R=e=>lt(e)?e:e==null?"":Te(e)||rt(e)&&(e.toString===Qs||!Ie(e.toString))?rl(e)?R(e.value):JSON.stringify(e,nl,2):String(e),nl=(e,t)=>rl(t)?nl(e,t.value):ao(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((a,[o,r],n)=>(a[wn(o,n)+" =>"]=r,a),{})}:gr(t)?{[`Set(${t.size})`]:[...t.values()].map(a=>wn(a))}:ea(t)?wn(t):rt(t)&&!Te(t)&&!el(t)?String(t):t,wn=(e,t="")=>{var a;return ea(e)?`Symbol(${(a=e.description)!=null?a:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Bt;class Fd{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Bt,!t&&Bt&&(this.index=(Bt.scopes||(Bt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].pause();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].resume();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].resume()}}run(t){if(this._active){const a=Bt;try{return Bt=this,t()}finally{Bt=a}}}on(){++this._on===1&&(this.prevScope=Bt,Bt=this)}off(){this._on>0&&--this._on===0&&(Bt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let a,o;for(a=0,o=this.effects.length;a<o;a++)this.effects[a].stop();for(this.effects.length=0,a=0,o=this.cleanups.length;a<o;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,o=this.scopes.length;a<o;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Hd(){return Bt}let nt;const kn=new WeakSet;class sl{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Bt&&Bt.active&&Bt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,kn.has(this)&&(kn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||il(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,gl(this),cl(this);const t=nt,a=ta;nt=this,ta=!0;try{return this.fn()}finally{dl(this),nt=t,ta=a,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Sn(t);this.deps=this.depsTail=void 0,gl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?kn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Cn(this)&&this.run()}get dirty(){return Cn(this)}}let ll=0,Ao,Do;function il(e,t=!1){if(e.flags|=8,t){e.next=Do,Do=e;return}e.next=Ao,Ao=e}function _n(){ll++}function xn(){if(--ll>0)return;if(Do){let t=Do;for(Do=void 0;t;){const a=t.next;t.next=void 0,t.flags&=-9,t=a}}let e;for(;Ao;){let t=Ao;for(Ao=void 0;t;){const a=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=a}}if(e)throw e}function cl(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function dl(e){let t,a=e.depsTail,o=a;for(;o;){const r=o.prevDep;o.version===-1?(o===a&&(a=r),Sn(o),Wd(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=r}e.deps=t,e.depsTail=a}function Cn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(ul(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function ul(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Eo)||(e.globalVersion=Eo,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Cn(e))))return;e.flags|=2;const t=e.dep,a=nt,o=ta;nt=e,ta=!0;try{cl(e);const r=e.fn(e._value);(t.version===0||Ma(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{nt=a,ta=o,dl(e),e.flags&=-3}}function Sn(e,t=!1){const{dep:a,prevSub:o,nextSub:r}=e;if(o&&(o.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=o,e.nextSub=void 0),a.subs===e&&(a.subs=o,!o&&a.computed)){a.computed.flags&=-5;for(let n=a.computed.deps;n;n=n.nextDep)Sn(n,!0)}!t&&!--a.sc&&a.map&&a.map.delete(a.key)}function Wd(e){const{prevDep:t,nextDep:a}=e;t&&(t.nextDep=a,e.prevDep=void 0),a&&(a.prevDep=t,e.nextDep=void 0)}let ta=!0;const fl=[];function ia(){fl.push(ta),ta=!1}function ca(){const e=fl.pop();ta=e===void 0?!0:e}function gl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const a=nt;nt=void 0;try{t()}finally{nt=a}}}let Eo=0;class zd{constructor(t,a){this.sub=t,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $n{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!nt||!ta||nt===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==nt)a=this.activeLink=new zd(nt,this),nt.deps?(a.prevDep=nt.depsTail,nt.depsTail.nextDep=a,nt.depsTail=a):nt.deps=nt.depsTail=a,pl(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const o=a.nextDep;o.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=o),a.prevDep=nt.depsTail,a.nextDep=void 0,nt.depsTail.nextDep=a,nt.depsTail=a,nt.deps===a&&(nt.deps=o)}return a}trigger(t){this.version++,Eo++,this.notify(t)}notify(t){_n();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{xn()}}}function pl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)pl(o)}const a=e.dep.subs;a!==e&&(e.prevSub=a,a&&(a.nextSub=e)),e.dep.subs=e}}const wr=new WeakMap,Ha=Symbol(""),Tn=Symbol(""),Lo=Symbol("");function $t(e,t,a){if(ta&&nt){let o=wr.get(e);o||wr.set(e,o=new Map);let r=o.get(a);r||(o.set(a,r=new $n),r.map=o,r.key=a),r.track()}}function ma(e,t,a,o,r,n){const s=wr.get(e);if(!s){Eo++;return}const l=i=>{i&&i.trigger()};if(_n(),t==="clear")s.forEach(l);else{const i=Te(e),c=i&&bn(a);if(i&&a==="length"){const d=Number(o);s.forEach((p,m)=>{(m==="length"||m===Lo||!ea(m)&&m>=d)&&l(p)})}else switch((a!==void 0||s.has(void 0))&&l(s.get(a)),c&&l(s.get(Lo)),t){case"add":i?c&&l(s.get("length")):(l(s.get(Ha)),ao(e)&&l(s.get(Tn)));break;case"delete":i||(l(s.get(Ha)),ao(e)&&l(s.get(Tn)));break;case"set":ao(e)&&l(s.get(Ha));break}}xn()}function Rd(e,t){const a=wr.get(e);return a&&a.get(t)}function oo(e){const t=je(e);return t===e?t:($t(t,"iterate",Lo),Jt(e)?t:t.map(_t))}function kr(e){return $t(e=je(e),"iterate",Lo),e}const jd={__proto__:null,[Symbol.iterator](){return Mn(this,Symbol.iterator,_t)},concat(...e){return oo(this).concat(...e.map(t=>Te(t)?oo(t):t))},entries(){return Mn(this,"entries",e=>(e[1]=_t(e[1]),e))},every(e,t){return va(this,"every",e,t,void 0,arguments)},filter(e,t){return va(this,"filter",e,t,a=>a.map(_t),arguments)},find(e,t){return va(this,"find",e,t,_t,arguments)},findIndex(e,t){return va(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return va(this,"findLast",e,t,_t,arguments)},findLastIndex(e,t){return va(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return va(this,"forEach",e,t,void 0,arguments)},includes(...e){return An(this,"includes",e)},indexOf(...e){return An(this,"indexOf",e)},join(e){return oo(this).join(e)},lastIndexOf(...e){return An(this,"lastIndexOf",e)},map(e,t){return va(this,"map",e,t,void 0,arguments)},pop(){return No(this,"pop")},push(...e){return No(this,"push",e)},reduce(e,...t){return hl(this,"reduce",e,t)},reduceRight(e,...t){return hl(this,"reduceRight",e,t)},shift(){return No(this,"shift")},some(e,t){return va(this,"some",e,t,void 0,arguments)},splice(...e){return No(this,"splice",e)},toReversed(){return oo(this).toReversed()},toSorted(e){return oo(this).toSorted(e)},toSpliced(...e){return oo(this).toSpliced(...e)},unshift(...e){return No(this,"unshift",e)},values(){return Mn(this,"values",_t)}};function Mn(e,t,a){const o=kr(e),r=o[t]();return o!==e&&!Jt(e)&&(r._next=r.next,r.next=()=>{const n=r._next();return n.value&&(n.value=a(n.value)),n}),r}const Ud=Array.prototype;function va(e,t,a,o,r,n){const s=kr(e),l=s!==e&&!Jt(e),i=s[t];if(i!==Ud[t]){const p=i.apply(e,n);return l?_t(p):p}let c=a;s!==e&&(l?c=function(p,m){return a.call(this,_t(p),m,e)}:a.length>2&&(c=function(p,m){return a.call(this,p,m,e)}));const d=i.call(s,c,o);return l&&r?r(d):d}function hl(e,t,a,o){const r=kr(e);let n=a;return r!==e&&(Jt(e)?a.length>3&&(n=function(s,l,i){return a.call(this,s,l,i,e)}):n=function(s,l,i){return a.call(this,s,_t(l),i,e)}),r[t](n,...o)}function An(e,t,a){const o=je(e);$t(o,"iterate",Lo);const r=o[t](...a);return(r===-1||r===!1)&&En(a[0])?(a[0]=je(a[0]),o[t](...a)):r}function No(e,t,a=[]){ia(),_n();const o=je(e)[t].apply(e,a);return xn(),ca(),o}const Vd=hn("__proto__,__v_isRef,__isVue"),ml=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ea));function Kd(e){ea(e)||(e=String(e));const t=je(this);return $t(t,"has",e),t.hasOwnProperty(e)}class vl{constructor(t=!1,a=!1){this._isReadonly=t,this._isShallow=a}get(t,a,o){if(a==="__v_skip")return t.__v_skip;const r=this._isReadonly,n=this._isShallow;if(a==="__v_isReactive")return!r;if(a==="__v_isReadonly")return r;if(a==="__v_isShallow")return n;if(a==="__v_raw")return o===(r?n?xl:_l:n?kl:wl).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const s=Te(t);if(!r){let i;if(s&&(i=jd[a]))return i;if(a==="hasOwnProperty")return Kd}const l=Reflect.get(t,a,vt(t)?t:o);return(ea(a)?ml.has(a):Vd(a))||(r||$t(t,"get",a),n)?l:vt(l)?s&&bn(a)?l:l.value:rt(l)?r?Cl(l):Wa(l):l}}class bl extends vl{constructor(t=!1){super(!1,t)}set(t,a,o,r){let n=t[a];if(!this._isShallow){const i=Aa(n);if(!Jt(o)&&!Aa(o)&&(n=je(n),o=je(o)),!Te(t)&&vt(n)&&!vt(o))return i||(n.value=o),!0}const s=Te(t)&&bn(a)?Number(a)<t.length:Ye(t,a),l=Reflect.set(t,a,o,vt(t)?t:r);return t===je(r)&&(s?Ma(o,n)&&ma(t,"set",a,o):ma(t,"add",a,o)),l}deleteProperty(t,a){const o=Ye(t,a);t[a];const r=Reflect.deleteProperty(t,a);return r&&o&&ma(t,"delete",a,void 0),r}has(t,a){const o=Reflect.has(t,a);return(!ea(a)||!ml.has(a))&&$t(t,"has",a),o}ownKeys(t){return $t(t,"iterate",Te(t)?"length":Ha),Reflect.ownKeys(t)}}class yl extends vl{constructor(t=!1){super(!0,t)}set(t,a){return!0}deleteProperty(t,a){return!0}}const qd=new bl,Gd=new yl,Jd=new bl(!0),Yd=new yl(!0),Dn=e=>e,_r=e=>Reflect.getPrototypeOf(e);function Zd(e,t,a){return function(...o){const r=this.__v_raw,n=je(r),s=ao(n),l=e==="entries"||e===Symbol.iterator&&s,i=e==="keys"&&s,c=r[e](...o),d=a?Dn:t?$r:_t;return!t&&$t(n,"iterate",i?Tn:Ha),{next(){const{value:p,done:m}=c.next();return m?{value:p,done:m}:{value:l?[d(p[0]),d(p[1])]:d(p),done:m}},[Symbol.iterator](){return this}}}}function xr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Xd(e,t){const a={get(r){const n=this.__v_raw,s=je(n),l=je(r);e||(Ma(r,l)&&$t(s,"get",r),$t(s,"get",l));const{has:i}=_r(s),c=t?Dn:e?$r:_t;if(i.call(s,r))return c(n.get(r));if(i.call(s,l))return c(n.get(l));n!==s&&n.get(r)},get size(){const r=this.__v_raw;return!e&&$t(je(r),"iterate",Ha),r.size},has(r){const n=this.__v_raw,s=je(n),l=je(r);return e||(Ma(r,l)&&$t(s,"has",r),$t(s,"has",l)),r===l?n.has(r):n.has(r)||n.has(l)},forEach(r,n){const s=this,l=s.__v_raw,i=je(l),c=t?Dn:e?$r:_t;return!e&&$t(i,"iterate",Ha),l.forEach((d,p)=>r.call(n,c(d),c(p),s))}};return yt(a,e?{add:xr("add"),set:xr("set"),delete:xr("delete"),clear:xr("clear")}:{add(r){!t&&!Jt(r)&&!Aa(r)&&(r=je(r));const n=je(this);return _r(n).has.call(n,r)||(n.add(r),ma(n,"add",r,r)),this},set(r,n){!t&&!Jt(n)&&!Aa(n)&&(n=je(n));const s=je(this),{has:l,get:i}=_r(s);let c=l.call(s,r);c||(r=je(r),c=l.call(s,r));const d=i.call(s,r);return s.set(r,n),c?Ma(n,d)&&ma(s,"set",r,n):ma(s,"add",r,n),this},delete(r){const n=je(this),{has:s,get:l}=_r(n);let i=s.call(n,r);i||(r=je(r),i=s.call(n,r)),l&&l.call(n,r);const c=n.delete(r);return i&&ma(n,"delete",r,void 0),c},clear(){const r=je(this),n=r.size!==0,s=r.clear();return n&&ma(r,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(r=>{a[r]=Zd(r,e,t)}),a}function Cr(e,t){const a=Xd(e,t);return(o,r,n)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?o:Reflect.get(Ye(a,r)&&r in o?a:o,r,n)}const Qd={get:Cr(!1,!1)},eu={get:Cr(!1,!0)},tu={get:Cr(!0,!1)},au={get:Cr(!0,!0)},wl=new WeakMap,kl=new WeakMap,_l=new WeakMap,xl=new WeakMap;function ou(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ru(e){return e.__v_skip||!Object.isExtensible(e)?0:ou(Td(e))}function Wa(e){return Aa(e)?e:Sr(e,!1,qd,Qd,wl)}function nu(e){return Sr(e,!1,Jd,eu,kl)}function Cl(e){return Sr(e,!0,Gd,tu,_l)}function xS(e){return Sr(e,!0,Yd,au,xl)}function Sr(e,t,a,o,r){if(!rt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=ru(e);if(n===0)return e;const s=r.get(e);if(s)return s;const l=new Proxy(e,n===2?o:a);return r.set(e,l),l}function ro(e){return Aa(e)?ro(e.__v_raw):!!(e&&e.__v_isReactive)}function Aa(e){return!!(e&&e.__v_isReadonly)}function Jt(e){return!!(e&&e.__v_isShallow)}function En(e){return e?!!e.__v_raw:!1}function je(e){const t=e&&e.__v_raw;return t?je(t):e}function su(e){return!Ye(e,"__v_skip")&&Object.isExtensible(e)&&tl(e,"__v_skip",!0),e}const _t=e=>rt(e)?Wa(e):e,$r=e=>rt(e)?Cl(e):e;function vt(e){return e?e.__v_isRef===!0:!1}function le(e){return lu(e,!1)}function lu(e,t){return vt(e)?e:new iu(e,t)}class iu{constructor(t,a){this.dep=new $n,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?t:je(t),this._value=a?t:_t(t),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(t){const a=this._rawValue,o=this.__v_isShallow||Jt(t)||Aa(t);t=o?t:je(t),Ma(t,a)&&(this._rawValue=t,this._value=o?t:_t(t),this.dep.trigger())}}function D(e){return vt(e)?e.value:e}const cu={get:(e,t,a)=>t==="__v_raw"?e:D(Reflect.get(e,t,a)),set:(e,t,a,o)=>{const r=e[t];return vt(r)&&!vt(a)?(r.value=a,!0):Reflect.set(e,t,a,o)}};function Sl(e){return ro(e)?e:new Proxy(e,cu)}function du(e){const t=Te(e)?new Array(e.length):{};for(const a in e)t[a]=fu(e,a);return t}class uu{constructor(t,a,o){this._object=t,this._key=a,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Rd(je(this._object),this._key)}}function fu(e,t,a){const o=e[t];return vt(o)?o:new uu(e,t,a)}class gu{constructor(t,a,o){this.fn=t,this.setter=a,this._value=void 0,this.dep=new $n(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Eo-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&nt!==this)return il(this,!0),!0}get value(){const t=this.dep.track();return ul(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function pu(e,t,a=!1){let o,r;return Ie(e)?o=e:(o=e.get,r=e.set),new gu(o,r,a)}const Tr={},Mr=new WeakMap;let za;function hu(e,t=!1,a=za){if(a){let o=Mr.get(a);o||Mr.set(a,o=[]),o.push(e)}}function mu(e,t,a=ot){const{immediate:o,deep:r,once:n,scheduler:s,augmentJob:l,call:i}=a,c=T=>r?T:Jt(T)||r===!1||r===0?ba(T,1):ba(T);let d,p,m,h,u=!1,g=!1;if(vt(e)?(p=()=>e.value,u=Jt(e)):ro(e)?(p=()=>c(e),u=!0):Te(e)?(g=!0,u=e.some(T=>ro(T)||Jt(T)),p=()=>e.map(T=>{if(vt(T))return T.value;if(ro(T))return c(T);if(Ie(T))return i?i(T,2):T()})):Ie(e)?t?p=i?()=>i(e,2):e:p=()=>{if(m){ia();try{m()}finally{ca()}}const T=za;za=d;try{return i?i(e,3,[h]):e(h)}finally{za=T}}:p=la,t&&r){const T=p,P=r===!0?1/0:r;p=()=>ba(T(),P)}const v=Hd(),k=()=>{d.stop(),v&&v.active&&vn(v.effects,d)};if(n&&t){const T=t;t=(...P)=>{T(...P),k()}}let C=g?new Array(e.length).fill(Tr):Tr;const M=T=>{if(!(!(d.flags&1)||!d.dirty&&!T))if(t){const P=d.run();if(r||u||(g?P.some((N,y)=>Ma(N,C[y])):Ma(P,C))){m&&m();const N=za;za=d;try{const y=[P,C===Tr?void 0:g&&C[0]===Tr?[]:C,h];C=P,i?i(t,3,y):t(...y)}finally{za=N}}}else d.run()};return l&&l(M),d=new sl(p),d.scheduler=s?()=>s(M,!1):M,h=T=>hu(T,!1,d),m=d.onStop=()=>{const T=Mr.get(d);if(T){if(i)i(T,4);else for(const P of T)P();Mr.delete(d)}},t?o?M(!0):C=d.run():s?s(M.bind(null,!0),!0):d.run(),k.pause=d.pause.bind(d),k.resume=d.resume.bind(d),k.stop=k,k}function ba(e,t=1/0,a){if(t<=0||!rt(e)||e.__v_skip||(a=a||new Set,a.has(e)))return e;if(a.add(e),t--,vt(e))ba(e.value,t,a);else if(Te(e))for(let o=0;o<e.length;o++)ba(e[o],t,a);else if(gr(e)||ao(e))e.forEach(o=>{ba(o,t,a)});else if(el(e)){for(const o in e)ba(e[o],t,a);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&ba(e[o],t,a)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Io=[];let Ln=!1;function CS(e,...t){if(Ln)return;Ln=!0,ia();const a=Io.length?Io[Io.length-1].component:null,o=a&&a.appContext.config.warnHandler,r=vu();if(o)no(o,a,11,[e+t.map(n=>{var s,l;return(l=(s=n.toString)==null?void 0:s.call(n))!=null?l:JSON.stringify(n)}).join(""),a&&a.proxy,r.map(({vnode:n})=>`at <${Li(a,n.type)}>`).join(`
`),r]);else{const n=[`[Vue warn]: ${e}`,...t];r.length&&n.push(`
`,...bu(r)),console.warn(...n)}ca(),Ln=!1}function vu(){let e=Io[Io.length-1];if(!e)return[];const t=[];for(;e;){const a=t[0];a&&a.vnode===e?a.recurseCount++:t.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return t}function bu(e){const t=[];return e.forEach((a,o)=>{t.push(...o===0?[]:[`
`],...yu(a))}),t}function yu({vnode:e,recurseCount:t}){const a=t>0?`... (${t} recursive calls)`:"",o=e.component?e.component.parent==null:!1,r=` at <${Li(e.component,e.type,o)}`,n=">"+a;return e.props?[r,...wu(e.props),n]:[r+n]}function wu(e){const t=[],a=Object.keys(e);return a.slice(0,3).forEach(o=>{t.push(...$l(o,e[o]))}),a.length>3&&t.push(" ..."),t}function $l(e,t,a){return lt(t)?(t=JSON.stringify(t),a?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?a?t:[`${e}=${t}`]:vt(t)?(t=$l(e,je(t.value),!0),a?t:[`${e}=Ref<`,t,">"]):Ie(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=je(t),a?t:[`${e}=`,t])}function no(e,t,a,o){try{return o?e(...o):e()}catch(r){Oo(r,t,a)}}function aa(e,t,a,o){if(Ie(e)){const r=no(e,t,a,o);return r&&Xs(r)&&r.catch(n=>{Oo(n,t,a)}),r}if(Te(e)){const r=[];for(let n=0;n<e.length;n++)r.push(aa(e[n],t,a,o));return r}}function Oo(e,t,a,o=!0){const r=t?t.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:s}=t&&t.appContext.config||ot;if(t){let l=t.parent;const i=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${a}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,i,c)===!1)return}l=l.parent}if(n){ia(),no(n,null,10,[e,i,c]),ca();return}}ku(e,a,r,o,s)}function ku(e,t,a,o=!0,r=!1){if(r)throw e;console.error(e)}const At=[];let da=-1;const so=[];let Da=null,lo=0;const Tl=Promise.resolve();let Ar=null;function oa(e){const t=Ar||Tl;return e?t.then(this?e.bind(this):e):t}function _u(e){let t=da+1,a=At.length;for(;t<a;){const o=t+a>>>1,r=At[o],n=Bo(r);n<e||n===e&&r.flags&2?t=o+1:a=o}return t}function Nn(e){if(!(e.flags&1)){const t=Bo(e),a=At[At.length-1];!a||!(e.flags&2)&&t>=Bo(a)?At.push(e):At.splice(_u(t),0,e),e.flags|=1,Ml()}}function Ml(){Ar||(Ar=Tl.then(El))}function xu(e){Te(e)?so.push(...e):Da&&e.id===-1?Da.splice(lo+1,0,e):e.flags&1||(so.push(e),e.flags|=1),Ml()}function Al(e,t,a=da+1){for(;a<At.length;a++){const o=At[a];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;At.splice(a,1),a--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function Dl(e){if(so.length){const t=[...new Set(so)].sort((a,o)=>Bo(a)-Bo(o));if(so.length=0,Da){Da.push(...t);return}for(Da=t,lo=0;lo<Da.length;lo++){const a=Da[lo];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}Da=null,lo=0}}const Bo=e=>e.id==null?e.flags&2?-1:1/0:e.id;function El(e){try{for(da=0;da<At.length;da++){const t=At[da];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),no(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;da<At.length;da++){const t=At[da];t&&(t.flags&=-2)}da=-1,At.length=0,Dl(),Ar=null,(At.length||so.length)&&El()}}let xt=null,Ll=null;function Dr(e){const t=xt;return xt=e,Ll=e&&e.type.__scopeId||null,t}function Qe(e,t=xt,a){if(!t||e._n)return e;const o=(...r)=>{o._d&&xi(-1);const n=Dr(t);let s;try{s=e(...r)}finally{Dr(n),o._d&&xi(1)}return s};return o._n=!0,o._c=!0,o._d=!0,o}function io(e,t){if(xt===null)return e;const a=Rr(xt),o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[n,s,l,i=ot]=t[r];n&&(Ie(n)&&(n={mounted:n,updated:n}),n.deep&&ba(s),o.push({dir:n,instance:a,value:s,oldValue:void 0,arg:l,modifiers:i}))}return e}function Ra(e,t,a,o){const r=e.dirs,n=t&&t.dirs;for(let s=0;s<r.length;s++){const l=r[s];n&&(l.oldValue=n[s].value);let i=l.dir[o];i&&(ia(),aa(i,a,8,[e.el,l,e,t]),ca())}}const Nl=Symbol("_vte"),Il=e=>e.__isTeleport,Po=e=>e&&(e.disabled||e.disabled===""),Ol=e=>e&&(e.defer||e.defer===""),Bl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Pl=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,In=(e,t)=>{const a=e&&e.to;return lt(a)?t?t(a):null:a},Fl={name:"Teleport",__isTeleport:!0,process(e,t,a,o,r,n,s,l,i,c){const{mc:d,pc:p,pbc:m,o:{insert:h,querySelector:u,createText:g,createComment:v}}=c,k=Po(t.props);let{shapeFlag:C,children:M,dynamicChildren:T}=t;if(e==null){const P=t.el=g(""),N=t.anchor=g("");h(P,a,o),h(N,a,o);const y=(B,z)=>{C&16&&(r&&r.isCE&&(r.ce._teleportTarget=B),d(M,B,z,r,n,s,l,i))},E=()=>{const B=t.target=In(t.props,u),z=Hl(B,t,g,h);B&&(s!=="svg"&&Bl(B)?s="svg":s!=="mathml"&&Pl(B)&&(s="mathml"),k||(y(B,z),Lr(t,!1)))};k&&(y(a,N),Lr(t,!0)),Ol(t.props)?(t.el.__isMounted=!1,Lt(()=>{E(),delete t.el.__isMounted},n)):E()}else{if(Ol(t.props)&&e.el.__isMounted===!1){Lt(()=>{Fl.process(e,t,a,o,r,n,s,l,i,c)},n);return}t.el=e.el,t.targetStart=e.targetStart;const P=t.anchor=e.anchor,N=t.target=e.target,y=t.targetAnchor=e.targetAnchor,E=Po(e.props),B=E?a:N,z=E?P:y;if(s==="svg"||Bl(N)?s="svg":(s==="mathml"||Pl(N))&&(s="mathml"),T?(m(e.dynamicChildren,T,B,r,n,s,l),Gn(e,t,!0)):i||p(e,t,B,z,r,n,s,l,!1),k)E?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Er(t,a,P,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const j=t.target=In(t.props,u);j&&Er(t,j,null,c,0)}else E&&Er(t,N,y,c,1);Lr(t,k)}},remove(e,t,a,{um:o,o:{remove:r}},n){const{shapeFlag:s,children:l,anchor:i,targetStart:c,targetAnchor:d,target:p,props:m}=e;if(p&&(r(c),r(d)),n&&r(i),s&16){const h=n||!Po(m);for(let u=0;u<l.length;u++){const g=l[u];o(g,t,a,h,!!g.dynamicChildren)}}},move:Er,hydrate:Cu};function Er(e,t,a,{o:{insert:o},m:r},n=2){n===0&&o(e.targetAnchor,t,a);const{el:s,anchor:l,shapeFlag:i,children:c,props:d}=e,p=n===2;if(p&&o(s,t,a),(!p||Po(d))&&i&16)for(let m=0;m<c.length;m++)r(c[m],t,a,2);p&&o(l,t,a)}function Cu(e,t,a,o,r,n,{o:{nextSibling:s,parentNode:l,querySelector:i,insert:c,createText:d}},p){const m=t.target=In(t.props,i);if(m){const h=Po(t.props),u=m._lpa||m.firstChild;if(t.shapeFlag&16)if(h)t.anchor=p(s(e),t,l(e),a,o,r,n),t.targetStart=u,t.targetAnchor=u&&s(u);else{t.anchor=s(e);let g=u;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")t.targetStart=g;else if(g.data==="teleport anchor"){t.targetAnchor=g,m._lpa=t.targetAnchor&&s(t.targetAnchor);break}}g=s(g)}t.targetAnchor||Hl(m,t,d,c),p(u&&s(u),t,m,a,o,r,n)}Lr(t,h)}return t.anchor&&s(t.anchor)}const Su=Fl;function Lr(e,t){const a=e.ctx;if(a&&a.ut){let o,r;for(t?(o=e.el,r=e.anchor):(o=e.targetStart,r=e.targetAnchor);o&&o!==r;)o.nodeType===1&&o.setAttribute("data-v-owner",a.uid),o=o.nextSibling;a.ut()}}function Hl(e,t,a,o){const r=t.targetStart=a(""),n=t.targetAnchor=a("");return r[Nl]=n,e&&(o(r,e),o(n,e)),n}const ya=Symbol("_leaveCb"),Nr=Symbol("_enterCb");function $u(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Dt(()=>{e.isMounted=!0}),Tt(()=>{e.isUnmounting=!0}),e}const Yt=[Function,Array],Wl={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Yt,onEnter:Yt,onAfterEnter:Yt,onEnterCancelled:Yt,onBeforeLeave:Yt,onLeave:Yt,onAfterLeave:Yt,onLeaveCancelled:Yt,onBeforeAppear:Yt,onAppear:Yt,onAfterAppear:Yt,onAppearCancelled:Yt},zl=e=>{const t=e.subTree;return t.component?zl(t.component):t},Tu={name:"BaseTransition",props:Wl,setup(e,{slots:t}){const a=Wr(),o=$u();return()=>{const r=t.default&&Vl(t.default(),!0);if(!r||!r.length)return;const n=Rl(r),s=je(e),{mode:l}=s;if(o.isLeaving)return Bn(n);const i=Ul(n);if(!i)return Bn(n);let c=On(i,s,o,a,p=>c=p);i.type!==Mt&&Fo(i,c);let d=a.subTree&&Ul(a.subTree);if(d&&d.type!==Mt&&!Ua(i,d)&&zl(a).type!==Mt){let p=On(d,s,o,a);if(Fo(d,p),l==="out-in"&&i.type!==Mt)return o.isLeaving=!0,p.afterLeave=()=>{o.isLeaving=!1,a.job.flags&8||a.update(),delete p.afterLeave,d=void 0},Bn(n);l==="in-out"&&i.type!==Mt?p.delayLeave=(m,h,u)=>{const g=jl(o,d);g[String(d.key)]=d,m[ya]=()=>{h(),m[ya]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{u(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return n}}};function Rl(e){let t=e[0];if(e.length>1){for(const a of e)if(a.type!==Mt){t=a;break}}return t}const Mu=Tu;function jl(e,t){const{leavingVNodes:a}=e;let o=a.get(t.type);return o||(o=Object.create(null),a.set(t.type,o)),o}function On(e,t,a,o,r){const{appear:n,mode:s,persisted:l=!1,onBeforeEnter:i,onEnter:c,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:m,onLeave:h,onAfterLeave:u,onLeaveCancelled:g,onBeforeAppear:v,onAppear:k,onAfterAppear:C,onAppearCancelled:M}=t,T=String(e.key),P=jl(a,e),N=(B,z)=>{B&&aa(B,o,9,z)},y=(B,z)=>{const j=z[1];N(B,z),Te(B)?B.every(S=>S.length<=1)&&j():B.length<=1&&j()},E={mode:s,persisted:l,beforeEnter(B){let z=i;if(!a.isMounted)if(n)z=v||i;else return;B[ya]&&B[ya](!0);const j=P[T];j&&Ua(e,j)&&j.el[ya]&&j.el[ya](),N(z,[B])},enter(B){let z=c,j=d,S=p;if(!a.isMounted)if(n)z=k||c,j=C||d,S=M||p;else return;let $=!1;const x=B[Nr]=I=>{$||($=!0,I?N(S,[B]):N(j,[B]),E.delayedLeave&&E.delayedLeave(),B[Nr]=void 0)};z?y(z,[B,x]):x()},leave(B,z){const j=String(e.key);if(B[Nr]&&B[Nr](!0),a.isUnmounting)return z();N(m,[B]);let S=!1;const $=B[ya]=x=>{S||(S=!0,z(),x?N(g,[B]):N(u,[B]),B[ya]=void 0,P[j]===e&&delete P[j])};P[j]=e,h?y(h,[B,$]):$()},clone(B){const z=On(B,t,a,o,r);return r&&r(z),z}};return E}function Bn(e){if(Wo(e))return e=Ea(e),e.children=null,e}function Ul(e){if(!Wo(e))return Il(e.type)&&e.children?Rl(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:a}=e;if(a){if(t&16)return a[0];if(t&32&&Ie(a.default))return a.default()}}function Fo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Fo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Vl(e,t=!1,a){let o=[],r=0;for(let n=0;n<e.length;n++){let s=e[n];const l=a==null?s.key:String(a)+String(s.key!=null?s.key:n);s.type===ve?(s.patchFlag&128&&r++,o=o.concat(Vl(s.children,t,l))):(t||s.type!==Mt)&&o.push(l!=null?Ea(s,{key:l}):s)}if(r>1)for(let n=0;n<o.length;n++)o[n].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function Le(e,t){return Ie(e)?yt({name:e.name},t,{setup:e}):e}function Pn(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Ho(e,t,a,o,r=!1){if(Te(e)){e.forEach((u,g)=>Ho(u,t&&(Te(t)?t[g]:t),a,o,r));return}if(co(o)&&!r){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Ho(e,t,a,o.component.subTree);return}const n=o.shapeFlag&4?Rr(o.component):o.el,s=r?null:n,{i:l,r:i}=e,c=t&&t.r,d=l.refs===ot?l.refs={}:l.refs,p=l.setupState,m=je(p),h=p===ot?Ys:u=>Ye(m,u);if(c!=null&&c!==i){if(lt(c))d[c]=null,h(c)&&(p[c]=null);else if(vt(c)){c.value=null;const u=t;u.k&&(d[u.k]=null)}}if(Ie(i))no(i,l,12,[s,d]);else{const u=lt(i),g=vt(i);if(u||g){const v=()=>{if(e.f){const k=u?h(i)?p[i]:d[i]:i.value;if(r)Te(k)&&vn(k,n);else if(Te(k))k.includes(n)||k.push(n);else if(u)d[i]=[n],h(i)&&(p[i]=d[i]);else{const C=[n];i.value=C,e.k&&(d[e.k]=C)}}else u?(d[i]=s,h(i)&&(p[i]=s)):g&&(i.value=s,e.k&&(d[e.k]=s))};s?(v.id=-1,Lt(v,a)):v()}}}const Kl=e=>e.nodeType===8;br().requestIdleCallback,br().cancelIdleCallback;function Au(e,t){if(Kl(e)&&e.data==="["){let a=1,o=e.nextSibling;for(;o;){if(o.nodeType===1){if(t(o)===!1)break}else if(Kl(o))if(o.data==="]"){if(--a===0)break}else o.data==="["&&a++;o=o.nextSibling}}else t(e)}const co=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Pt(e){Ie(e)&&(e={loader:e});const{loader:t,loadingComponent:a,errorComponent:o,delay:r=200,hydrate:n,timeout:s,suspensible:l=!0,onError:i}=e;let c=null,d,p=0;const m=()=>(p++,c=null,h()),h=()=>{let u;return c||(u=c=t().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),i)return new Promise((v,k)=>{i(g,()=>v(m()),()=>k(g),p+1)});throw g}).then(g=>u!==c&&c?c:(g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),d=g,g)))};return Le({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(u,g,v){let k=!1;(g.bu||(g.bu=[])).push(()=>k=!0);const C=()=>{k||v()},M=n?()=>{const T=n(C,P=>Au(u,P));T&&(g.bum||(g.bum=[])).push(T)}:C;d?M():h().then(()=>!g.isUnmounted&&M())},get __asyncResolved(){return d},setup(){const u=Ct;if(Pn(u),d)return()=>Fn(d,u);const g=M=>{c=null,Oo(M,u,13,!o)};if(l&&u.suspense||fo)return h().then(M=>()=>Fn(M,u)).catch(M=>(g(M),()=>o?Se(o,{error:M}):null));const v=le(!1),k=le(),C=le(!!r);return r&&setTimeout(()=>{C.value=!1},r),s!=null&&setTimeout(()=>{if(!v.value&&!k.value){const M=new Error(`Async component timed out after ${s}ms.`);g(M),k.value=M}},s),h().then(()=>{v.value=!0,u.parent&&Wo(u.parent.vnode)&&u.parent.update()}).catch(M=>{g(M),k.value=M}),()=>{if(v.value&&d)return Fn(d,u);if(k.value&&o)return Se(o,{error:k.value});if(a&&!C.value)return Se(a)}}})}function Fn(e,t){const{ref:a,props:o,children:r,ce:n}=t.vnode,s=Se(e,o,r);return s.ref=a,s.ce=n,delete t.vnode.ce,s}const Wo=e=>e.type.__isKeepAlive;function Du(e,t){ql(e,"a",t)}function Eu(e,t){ql(e,"da",t)}function ql(e,t,a=Ct){const o=e.__wdc||(e.__wdc=()=>{let r=a;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Ir(t,o,a),a){let r=a.parent;for(;r&&r.parent;)Wo(r.parent.vnode)&&Lu(o,t,a,r),r=r.parent}}function Lu(e,t,a,o){const r=Ir(t,e,o,!0);Hn(()=>{vn(o[t],r)},a)}function Ir(e,t,a=Ct,o=!1){if(a){const r=a[e]||(a[e]=[]),n=t.__weh||(t.__weh=(...s)=>{ia();const l=Ko(a),i=aa(t,a,e,s);return l(),ca(),i});return o?r.unshift(n):r.push(n),n}}const wa=e=>(t,a=Ct)=>{(!fo||e==="sp")&&Ir(e,(...o)=>t(...o),a)},Nu=wa("bm"),Dt=wa("m"),Iu=wa("bu"),Ou=wa("u"),Tt=wa("bum"),Hn=wa("um"),Bu=wa("sp"),Pu=wa("rtg"),Fu=wa("rtc");function Hu(e,t=Ct){Ir("ec",e,t)}const Gl="components";function Wu(e,t){return Yl(Gl,e,!0,t)||e}const Jl=Symbol.for("v-ndc");function zu(e){return lt(e)?Yl(Gl,e,!1)||e:e||Jl}function Yl(e,t,a=!0,o=!1){const r=xt||Ct;if(r){const n=r.type;{const l=Ei(n,!1);if(l&&(l===t||l===Gt(t)||l===hr(Gt(t))))return n}const s=Zl(r[e]||n[e],t)||Zl(r.appContext[e],t);return!s&&o?n:s}}function Zl(e,t){return e&&(e[t]||e[Gt(t)]||e[hr(Gt(t))])}function Ce(e,t,a,o){let r;const n=a,s=Te(e);if(s||lt(e)){const l=s&&ro(e);let i=!1,c=!1;l&&(i=!Jt(e),c=Aa(e),e=kr(e)),r=new Array(e.length);for(let d=0,p=e.length;d<p;d++)r[d]=t(i?c?$r(_t(e[d])):_t(e[d]):e[d],d,void 0,n)}else if(typeof e=="number"){r=new Array(e);for(let l=0;l<e;l++)r[l]=t(l+1,l,void 0,n)}else if(rt(e))if(e[Symbol.iterator])r=Array.from(e,(l,i)=>t(l,i,void 0,n));else{const l=Object.keys(e);r=new Array(l.length);for(let i=0,c=l.length;i<c;i++){const d=l[i];r[i]=t(e[d],d,i,n)}}else r=[];return r}function Ru(e,t,a={},o,r){if(xt.ce||xt.parent&&co(xt.parent)&&xt.parent.ce)return a.name=t,b(),it(ve,null,[Se("slot",a,o)],64);let n=e[t];n&&n._c&&(n._d=!1),b();const s=n&&Xl(n(a)),l=a.key||s&&s.key,i=it(ve,{key:(l&&!ea(l)?l:`_${t}`)+(!s&&o?"_fb":"")},s||[],s&&e._===1?64:-2);return n&&n._c&&(n._d=!0),i}function Xl(e){return e.some(t=>Vo(t)?!(t.type===Mt||t.type===ve&&!Xl(t.children)):!0)?e:null}const Wn=e=>e?Mi(e)?Rr(e):Wn(e.parent):null,zo=yt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Wn(e.parent),$root:e=>Wn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ai(e),$forceUpdate:e=>e.f||(e.f=()=>{Nn(e.update)}),$nextTick:e=>e.n||(e.n=oa.bind(e.proxy)),$watch:e=>uf.bind(e)}),zn=(e,t)=>e!==ot&&!e.__isScriptSetup&&Ye(e,t),ju={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:a,setupState:o,data:r,props:n,accessCache:s,type:l,appContext:i}=e;let c;if(t[0]!=="$"){const h=s[t];if(h!==void 0)switch(h){case 1:return o[t];case 2:return r[t];case 4:return a[t];case 3:return n[t]}else{if(zn(o,t))return s[t]=1,o[t];if(r!==ot&&Ye(r,t))return s[t]=2,r[t];if((c=e.propsOptions[0])&&Ye(c,t))return s[t]=3,n[t];if(a!==ot&&Ye(a,t))return s[t]=4,a[t];Rn&&(s[t]=0)}}const d=zo[t];let p,m;if(d)return t==="$attrs"&&$t(e.attrs,"get",""),d(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(a!==ot&&Ye(a,t))return s[t]=4,a[t];if(m=i.config.globalProperties,Ye(m,t))return m[t]},set({_:e},t,a){const{data:o,setupState:r,ctx:n}=e;return zn(r,t)?(r[t]=a,!0):o!==ot&&Ye(o,t)?(o[t]=a,!0):Ye(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=a,!0)},has({_:{data:e,setupState:t,accessCache:a,ctx:o,appContext:r,propsOptions:n,type:s}},l){let i,c;return!!(a[l]||e!==ot&&l[0]!=="$"&&Ye(e,l)||zn(t,l)||(i=n[0])&&Ye(i,l)||Ye(o,l)||Ye(zo,l)||Ye(r.config.globalProperties,l)||(c=s.__cssModules)&&c[l])},defineProperty(e,t,a){return a.get!=null?e._.accessCache[t]=0:Ye(a,"value")&&this.set(e,t,a.value,null),Reflect.defineProperty(e,t,a)}};function Ql(e){return Te(e)?e.reduce((t,a)=>(t[a]=null,t),{}):e}let Rn=!0;function Uu(e){const t=ai(e),a=e.proxy,o=e.ctx;Rn=!1,t.beforeCreate&&ei(t.beforeCreate,e,"bc");const{data:r,computed:n,methods:s,watch:l,provide:i,inject:c,created:d,beforeMount:p,mounted:m,beforeUpdate:h,updated:u,activated:g,deactivated:v,beforeDestroy:k,beforeUnmount:C,destroyed:M,unmounted:T,render:P,renderTracked:N,renderTriggered:y,errorCaptured:E,serverPrefetch:B,expose:z,inheritAttrs:j,components:S,directives:$,filters:x}=t;if(c&&Vu(c,o,null),s)for(const O in s){const W=s[O];Ie(W)&&(o[O]=W.bind(a))}if(r){const O=r.call(a,a);rt(O)&&(e.data=Wa(O))}if(Rn=!0,n)for(const O in n){const W=n[O],oe=Ie(W)?W.bind(a,a):Ie(W.get)?W.get.bind(a,a):la,V=!Ie(W)&&Ie(W.set)?W.set.bind(a):la,q=A({get:oe,set:V});Object.defineProperty(o,O,{enumerable:!0,configurable:!0,get:()=>q.value,set:Y=>q.value=Y})}if(l)for(const O in l)ti(l[O],o,a,O);if(i){const O=Ie(i)?i.call(a):i;Reflect.ownKeys(O).forEach(W=>{Zu(W,O[W])})}d&&ei(d,e,"c");function J(O,W){Te(W)?W.forEach(oe=>O(oe.bind(a))):W&&O(W.bind(a))}if(J(Nu,p),J(Dt,m),J(Iu,h),J(Ou,u),J(Du,g),J(Eu,v),J(Hu,E),J(Fu,N),J(Pu,y),J(Tt,C),J(Hn,T),J(Bu,B),Te(z))if(z.length){const O=e.exposed||(e.exposed={});z.forEach(W=>{Object.defineProperty(O,W,{get:()=>a[W],set:oe=>a[W]=oe,enumerable:!0})})}else e.exposed||(e.exposed={});P&&e.render===la&&(e.render=P),j!=null&&(e.inheritAttrs=j),S&&(e.components=S),$&&(e.directives=$),B&&Pn(e)}function Vu(e,t,a=la){Te(e)&&(e=jn(e));for(const o in e){const r=e[o];let n;rt(r)?"default"in r?n=Br(r.from||o,r.default,!0):n=Br(r.from||o):n=Br(r),vt(n)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>n.value,set:s=>n.value=s}):t[o]=n}}function ei(e,t,a){aa(Te(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,a)}function ti(e,t,a,o){let r=o.includes(".")?bi(a,o):()=>a[o];if(lt(e)){const n=t[e];Ie(n)&&$e(r,n)}else if(Ie(e))$e(r,e.bind(a));else if(rt(e))if(Te(e))e.forEach(n=>ti(n,t,a,o));else{const n=Ie(e.handler)?e.handler.bind(a):t[e.handler];Ie(n)&&$e(r,n,e)}}function ai(e){const t=e.type,{mixins:a,extends:o}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:s}}=e.appContext,l=n.get(t);let i;return l?i=l:!r.length&&!a&&!o?i=t:(i={},r.length&&r.forEach(c=>Or(i,c,s,!0)),Or(i,t,s)),rt(t)&&n.set(t,i),i}function Or(e,t,a,o=!1){const{mixins:r,extends:n}=t;n&&Or(e,n,a,!0),r&&r.forEach(s=>Or(e,s,a,!0));for(const s in t)if(!(o&&s==="expose")){const l=Ku[s]||a&&a[s];e[s]=l?l(e[s],t[s]):t[s]}return e}const Ku={data:oi,props:ri,emits:ri,methods:Ro,computed:Ro,beforeCreate:Et,created:Et,beforeMount:Et,mounted:Et,beforeUpdate:Et,updated:Et,beforeDestroy:Et,beforeUnmount:Et,destroyed:Et,unmounted:Et,activated:Et,deactivated:Et,errorCaptured:Et,serverPrefetch:Et,components:Ro,directives:Ro,watch:Gu,provide:oi,inject:qu};function oi(e,t){return t?e?function(){return yt(Ie(e)?e.call(this,this):e,Ie(t)?t.call(this,this):t)}:t:e}function qu(e,t){return Ro(jn(e),jn(t))}function jn(e){if(Te(e)){const t={};for(let a=0;a<e.length;a++)t[e[a]]=e[a];return t}return e}function Et(e,t){return e?[...new Set([].concat(e,t))]:t}function Ro(e,t){return e?yt(Object.create(null),e,t):t}function ri(e,t){return e?Te(e)&&Te(t)?[...new Set([...e,...t])]:yt(Object.create(null),Ql(e),Ql(t??{})):t}function Gu(e,t){if(!e)return t;if(!t)return e;const a=yt(Object.create(null),e);for(const o in t)a[o]=Et(e[o],t[o]);return a}function ni(){return{app:null,config:{isNativeTag:Ys,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ju=0;function Yu(e,t){return function(o,r=null){Ie(o)||(o=yt({},o)),r!=null&&!rt(r)&&(r=null);const n=ni(),s=new WeakSet,l=[];let i=!1;const c=n.app={_uid:Ju++,_component:o,_props:r,_container:null,_context:n,_instance:null,version:Lf,get config(){return n.config},set config(d){},use(d,...p){return s.has(d)||(d&&Ie(d.install)?(s.add(d),d.install(c,...p)):Ie(d)&&(s.add(d),d(c,...p))),c},mixin(d){return n.mixins.includes(d)||n.mixins.push(d),c},component(d,p){return p?(n.components[d]=p,c):n.components[d]},directive(d,p){return p?(n.directives[d]=p,c):n.directives[d]},mount(d,p,m){if(!i){const h=c._ceVNode||Se(o,r);return h.appContext=n,m===!0?m="svg":m===!1&&(m=void 0),e(h,d,m),i=!0,c._container=d,d.__vue_app__=c,Rr(h.component)}},onUnmount(d){l.push(d)},unmount(){i&&(aa(l,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(d,p){return n.provides[d]=p,c},runWithContext(d){const p=uo;uo=c;try{return d()}finally{uo=p}}};return c}}let uo=null;function Zu(e,t){if(Ct){let a=Ct.provides;const o=Ct.parent&&Ct.parent.provides;o===a&&(a=Ct.provides=Object.create(o)),a[e]=t}}function Br(e,t,a=!1){const o=Wr();if(o||uo){let r=uo?uo._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return a&&Ie(t)?t.call(o&&o.proxy):t}}const si={},li=()=>Object.create(si),ii=e=>Object.getPrototypeOf(e)===si;function Xu(e,t,a,o=!1){const r={},n=li();e.propsDefaults=Object.create(null),ci(e,t,r,n);for(const s in e.propsOptions[0])s in r||(r[s]=void 0);a?e.props=o?r:nu(r):e.type.props?e.props=r:e.props=n,e.attrs=n}function Qu(e,t,a,o){const{props:r,attrs:n,vnode:{patchFlag:s}}=e,l=je(r),[i]=e.propsOptions;let c=!1;if((o||s>0)&&!(s&16)){if(s&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let m=d[p];if(Pr(e.emitsOptions,m))continue;const h=t[m];if(i)if(Ye(n,m))h!==n[m]&&(n[m]=h,c=!0);else{const u=Gt(m);r[u]=Un(i,l,u,h,e,!1)}else h!==n[m]&&(n[m]=h,c=!0)}}}else{ci(e,t,r,n)&&(c=!0);let d;for(const p in l)(!t||!Ye(t,p)&&((d=Ta(p))===p||!Ye(t,d)))&&(i?a&&(a[p]!==void 0||a[d]!==void 0)&&(r[p]=Un(i,l,p,void 0,e,!0)):delete r[p]);if(n!==l)for(const p in n)(!t||!Ye(t,p))&&(delete n[p],c=!0)}c&&ma(e.attrs,"set","")}function ci(e,t,a,o){const[r,n]=e.propsOptions;let s=!1,l;if(t)for(let i in t){if(Mo(i))continue;const c=t[i];let d;r&&Ye(r,d=Gt(i))?!n||!n.includes(d)?a[d]=c:(l||(l={}))[d]=c:Pr(e.emitsOptions,i)||(!(i in o)||c!==o[i])&&(o[i]=c,s=!0)}if(n){const i=je(a),c=l||ot;for(let d=0;d<n.length;d++){const p=n[d];a[p]=Un(r,i,p,c[p],e,!Ye(c,p))}}return s}function Un(e,t,a,o,r,n){const s=e[a];if(s!=null){const l=Ye(s,"default");if(l&&o===void 0){const i=s.default;if(s.type!==Function&&!s.skipFactory&&Ie(i)){const{propsDefaults:c}=r;if(a in c)o=c[a];else{const d=Ko(r);o=c[a]=i.call(null,t),d()}}else o=i;r.ce&&r.ce._setProp(a,o)}s[0]&&(n&&!l?o=!1:s[1]&&(o===""||o===Ta(a))&&(o=!0))}return o}const ef=new WeakMap;function di(e,t,a=!1){const o=a?ef:t.propsCache,r=o.get(e);if(r)return r;const n=e.props,s={},l=[];let i=!1;if(!Ie(e)){const d=p=>{i=!0;const[m,h]=di(p,t,!0);yt(s,m),h&&l.push(...h)};!a&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!n&&!i)return rt(e)&&o.set(e,to),to;if(Te(n))for(let d=0;d<n.length;d++){const p=Gt(n[d]);ui(p)&&(s[p]=ot)}else if(n)for(const d in n){const p=Gt(d);if(ui(p)){const m=n[d],h=s[p]=Te(m)||Ie(m)?{type:m}:yt({},m),u=h.type;let g=!1,v=!0;if(Te(u))for(let k=0;k<u.length;++k){const C=u[k],M=Ie(C)&&C.name;if(M==="Boolean"){g=!0;break}else M==="String"&&(v=!1)}else g=Ie(u)&&u.name==="Boolean";h[0]=g,h[1]=v,(g||Ye(h,"default"))&&l.push(p)}}const c=[s,l];return rt(e)&&o.set(e,c),c}function ui(e){return e[0]!=="$"&&!Mo(e)}const Vn=e=>e==="_"||e==="_ctx"||e==="$stable",Kn=e=>Te(e)?e.map(ua):[ua(e)],tf=(e,t,a)=>{if(t._n)return t;const o=Qe((...r)=>Kn(t(...r)),a);return o._c=!1,o},fi=(e,t,a)=>{const o=e._ctx;for(const r in e){if(Vn(r))continue;const n=e[r];if(Ie(n))t[r]=tf(r,n,o);else if(n!=null){const s=Kn(n);t[r]=()=>s}}},gi=(e,t)=>{const a=Kn(t);e.slots.default=()=>a},pi=(e,t,a)=>{for(const o in t)(a||!Vn(o))&&(e[o]=t[o])},af=(e,t,a)=>{const o=e.slots=li();if(e.vnode.shapeFlag&32){const r=t._;r?(pi(o,t,a),a&&tl(o,"_",r,!0)):fi(t,o)}else t&&gi(e,t)},of=(e,t,a)=>{const{vnode:o,slots:r}=e;let n=!0,s=ot;if(o.shapeFlag&32){const l=t._;l?a&&l===1?n=!1:pi(r,t,a):(n=!t.$stable,fi(t,r)),s=t}else t&&(gi(e,t),s={default:1});if(n)for(const l in r)!Vn(l)&&s[l]==null&&delete r[l]},Lt=bf;function rf(e){return nf(e)}function nf(e,t){const a=br();a.__VUE__=!0;const{insert:o,remove:r,patchProp:n,createElement:s,createText:l,createComment:i,setText:c,setElementText:d,parentNode:p,nextSibling:m,setScopeId:h=la,insertStaticContent:u}=e,g=(F,_,H,X=null,Q=null,ie=null,ue=void 0,he=null,fe=!!_.dynamicChildren)=>{if(F===_)return;F&&!Ua(F,_)&&(X=K(F),Y(F,Q,ie,!0),F=null),_.patchFlag===-2&&(fe=!1,_.dynamicChildren=null);const{type:de,ref:ye,shapeFlag:me}=_;switch(de){case Fr:v(F,_,H,X);break;case Mt:k(F,_,H,X);break;case Jn:F==null&&C(_,H,X,ue);break;case ve:S(F,_,H,X,Q,ie,ue,he,fe);break;default:me&1?P(F,_,H,X,Q,ie,ue,he,fe):me&6?$(F,_,H,X,Q,ie,ue,he,fe):(me&64||me&128)&&de.process(F,_,H,X,Q,ie,ue,he,fe,ge)}ye!=null&&Q?Ho(ye,F&&F.ref,ie,_||F,!_):ye==null&&F&&F.ref!=null&&Ho(F.ref,null,ie,F,!0)},v=(F,_,H,X)=>{if(F==null)o(_.el=l(_.children),H,X);else{const Q=_.el=F.el;_.children!==F.children&&c(Q,_.children)}},k=(F,_,H,X)=>{F==null?o(_.el=i(_.children||""),H,X):_.el=F.el},C=(F,_,H,X)=>{[F.el,F.anchor]=u(F.children,_,H,X,F.el,F.anchor)},M=({el:F,anchor:_},H,X)=>{let Q;for(;F&&F!==_;)Q=m(F),o(F,H,X),F=Q;o(_,H,X)},T=({el:F,anchor:_})=>{let H;for(;F&&F!==_;)H=m(F),r(F),F=H;r(_)},P=(F,_,H,X,Q,ie,ue,he,fe)=>{_.type==="svg"?ue="svg":_.type==="math"&&(ue="mathml"),F==null?N(_,H,X,Q,ie,ue,he,fe):B(F,_,Q,ie,ue,he,fe)},N=(F,_,H,X,Q,ie,ue,he)=>{let fe,de;const{props:ye,shapeFlag:me,transition:we,dirs:xe}=F;if(fe=F.el=s(F.type,ie,ye&&ye.is,ye),me&8?d(fe,F.children):me&16&&E(F.children,fe,null,X,Q,qn(F,ie),ue,he),xe&&Ra(F,null,X,"created"),y(fe,F,F.scopeId,ue,X),ye){for(const Ae in ye)Ae!=="value"&&!Mo(Ae)&&n(fe,Ae,null,ye[Ae],ie,X);"value"in ye&&n(fe,"value",null,ye.value,ie),(de=ye.onVnodeBeforeMount)&&fa(de,X,F)}xe&&Ra(F,null,X,"beforeMount");const Ne=sf(Q,we);Ne&&we.beforeEnter(fe),o(fe,_,H),((de=ye&&ye.onVnodeMounted)||Ne||xe)&&Lt(()=>{de&&fa(de,X,F),Ne&&we.enter(fe),xe&&Ra(F,null,X,"mounted")},Q)},y=(F,_,H,X,Q)=>{if(H&&h(F,H),X)for(let ie=0;ie<X.length;ie++)h(F,X[ie]);if(Q){let ie=Q.subTree;if(_===ie||_i(ie.type)&&(ie.ssContent===_||ie.ssFallback===_)){const ue=Q.vnode;y(F,ue,ue.scopeId,ue.slotScopeIds,Q.parent)}}},E=(F,_,H,X,Q,ie,ue,he,fe=0)=>{for(let de=fe;de<F.length;de++){const ye=F[de]=he?La(F[de]):ua(F[de]);g(null,ye,_,H,X,Q,ie,ue,he)}},B=(F,_,H,X,Q,ie,ue)=>{const he=_.el=F.el;let{patchFlag:fe,dynamicChildren:de,dirs:ye}=_;fe|=F.patchFlag&16;const me=F.props||ot,we=_.props||ot;let xe;if(H&&ja(H,!1),(xe=we.onVnodeBeforeUpdate)&&fa(xe,H,_,F),ye&&Ra(_,F,H,"beforeUpdate"),H&&ja(H,!0),(me.innerHTML&&we.innerHTML==null||me.textContent&&we.textContent==null)&&d(he,""),de?z(F.dynamicChildren,de,he,H,X,qn(_,Q),ie):ue||W(F,_,he,null,H,X,qn(_,Q),ie,!1),fe>0){if(fe&16)j(he,me,we,H,Q);else if(fe&2&&me.class!==we.class&&n(he,"class",null,we.class,Q),fe&4&&n(he,"style",me.style,we.style,Q),fe&8){const Ne=_.dynamicProps;for(let Ae=0;Ae<Ne.length;Ae++){const Me=Ne[Ae],Fe=me[Me],ze=we[Me];(ze!==Fe||Me==="value")&&n(he,Me,Fe,ze,Q,H)}}fe&1&&F.children!==_.children&&d(he,_.children)}else!ue&&de==null&&j(he,me,we,H,Q);((xe=we.onVnodeUpdated)||ye)&&Lt(()=>{xe&&fa(xe,H,_,F),ye&&Ra(_,F,H,"updated")},X)},z=(F,_,H,X,Q,ie,ue)=>{for(let he=0;he<_.length;he++){const fe=F[he],de=_[he],ye=fe.el&&(fe.type===ve||!Ua(fe,de)||fe.shapeFlag&198)?p(fe.el):H;g(fe,de,ye,null,X,Q,ie,ue,!0)}},j=(F,_,H,X,Q)=>{if(_!==H){if(_!==ot)for(const ie in _)!Mo(ie)&&!(ie in H)&&n(F,ie,_[ie],null,Q,X);for(const ie in H){if(Mo(ie))continue;const ue=H[ie],he=_[ie];ue!==he&&ie!=="value"&&n(F,ie,he,ue,Q,X)}"value"in H&&n(F,"value",_.value,H.value,Q)}},S=(F,_,H,X,Q,ie,ue,he,fe)=>{const de=_.el=F?F.el:l(""),ye=_.anchor=F?F.anchor:l("");let{patchFlag:me,dynamicChildren:we,slotScopeIds:xe}=_;xe&&(he=he?he.concat(xe):xe),F==null?(o(de,H,X),o(ye,H,X),E(_.children||[],H,ye,Q,ie,ue,he,fe)):me>0&&me&64&&we&&F.dynamicChildren?(z(F.dynamicChildren,we,H,Q,ie,ue,he),(_.key!=null||Q&&_===Q.subTree)&&Gn(F,_,!0)):W(F,_,H,ye,Q,ie,ue,he,fe)},$=(F,_,H,X,Q,ie,ue,he,fe)=>{_.slotScopeIds=he,F==null?_.shapeFlag&512?Q.ctx.activate(_,H,X,ue,fe):x(_,H,X,Q,ie,ue,fe):I(F,_,fe)},x=(F,_,H,X,Q,ie,ue)=>{const he=F.component=Cf(F,X,Q);if(Wo(F)&&(he.ctx.renderer=ge),Sf(he,!1,ue),he.asyncDep){if(Q&&Q.registerDep(he,J,ue),!F.el){const fe=he.subTree=Se(Mt);k(null,fe,_,H),F.placeholder=fe.el}}else J(he,F,_,H,Q,ie,ue)},I=(F,_,H)=>{const X=_.component=F.component;if(mf(F,_,H))if(X.asyncDep&&!X.asyncResolved){O(X,_,H);return}else X.next=_,X.update();else _.el=F.el,X.vnode=_},J=(F,_,H,X,Q,ie,ue)=>{const he=()=>{if(F.isMounted){let{next:me,bu:we,u:xe,parent:Ne,vnode:Ae}=F;{const Je=hi(F);if(Je){me&&(me.el=Ae.el,O(F,me,ue)),Je.asyncDep.then(()=>{F.isUnmounted||he()});return}}let Me=me,Fe;ja(F,!1),me?(me.el=Ae.el,O(F,me,ue)):me=Ae,we&&mr(we),(Fe=me.props&&me.props.onVnodeBeforeUpdate)&&fa(Fe,Ne,me,Ae),ja(F,!0);const ze=wi(F),Ue=F.subTree;F.subTree=ze,g(Ue,ze,p(Ue.el),K(Ue),F,Q,ie),me.el=ze.el,Me===null&&vf(F,ze.el),xe&&Lt(xe,Q),(Fe=me.props&&me.props.onVnodeUpdated)&&Lt(()=>fa(Fe,Ne,me,Ae),Q)}else{let me;const{el:we,props:xe}=_,{bm:Ne,m:Ae,parent:Me,root:Fe,type:ze}=F,Ue=co(_);ja(F,!1),Ne&&mr(Ne),!Ue&&(me=xe&&xe.onVnodeBeforeMount)&&fa(me,Me,_),ja(F,!0);{Fe.ce&&Fe.ce._def.shadowRoot!==!1&&Fe.ce._injectChildStyle(ze);const Je=F.subTree=wi(F);g(null,Je,H,X,F,Q,ie),_.el=Je.el}if(Ae&&Lt(Ae,Q),!Ue&&(me=xe&&xe.onVnodeMounted)){const Je=_;Lt(()=>fa(me,Me,Je),Q)}(_.shapeFlag&256||Me&&co(Me.vnode)&&Me.vnode.shapeFlag&256)&&F.a&&Lt(F.a,Q),F.isMounted=!0,_=H=X=null}};F.scope.on();const fe=F.effect=new sl(he);F.scope.off();const de=F.update=fe.run.bind(fe),ye=F.job=fe.runIfDirty.bind(fe);ye.i=F,ye.id=F.uid,fe.scheduler=()=>Nn(ye),ja(F,!0),de()},O=(F,_,H)=>{_.component=F;const X=F.vnode.props;F.vnode=_,F.next=null,Qu(F,_.props,X,H),of(F,_.children,H),ia(),Al(F),ca()},W=(F,_,H,X,Q,ie,ue,he,fe=!1)=>{const de=F&&F.children,ye=F?F.shapeFlag:0,me=_.children,{patchFlag:we,shapeFlag:xe}=_;if(we>0){if(we&128){V(de,me,H,X,Q,ie,ue,he,fe);return}else if(we&256){oe(de,me,H,X,Q,ie,ue,he,fe);return}}xe&8?(ye&16&&se(de,Q,ie),me!==de&&d(H,me)):ye&16?xe&16?V(de,me,H,X,Q,ie,ue,he,fe):se(de,Q,ie,!0):(ye&8&&d(H,""),xe&16&&E(me,H,X,Q,ie,ue,he,fe))},oe=(F,_,H,X,Q,ie,ue,he,fe)=>{F=F||to,_=_||to;const de=F.length,ye=_.length,me=Math.min(de,ye);let we;for(we=0;we<me;we++){const xe=_[we]=fe?La(_[we]):ua(_[we]);g(F[we],xe,H,null,Q,ie,ue,he,fe)}de>ye?se(F,Q,ie,!0,!1,me):E(_,H,X,Q,ie,ue,he,fe,me)},V=(F,_,H,X,Q,ie,ue,he,fe)=>{let de=0;const ye=_.length;let me=F.length-1,we=ye-1;for(;de<=me&&de<=we;){const xe=F[de],Ne=_[de]=fe?La(_[de]):ua(_[de]);if(Ua(xe,Ne))g(xe,Ne,H,null,Q,ie,ue,he,fe);else break;de++}for(;de<=me&&de<=we;){const xe=F[me],Ne=_[we]=fe?La(_[we]):ua(_[we]);if(Ua(xe,Ne))g(xe,Ne,H,null,Q,ie,ue,he,fe);else break;me--,we--}if(de>me){if(de<=we){const xe=we+1,Ne=xe<ye?_[xe].el:X;for(;de<=we;)g(null,_[de]=fe?La(_[de]):ua(_[de]),H,Ne,Q,ie,ue,he,fe),de++}}else if(de>we)for(;de<=me;)Y(F[de],Q,ie,!0),de++;else{const xe=de,Ne=de,Ae=new Map;for(de=Ne;de<=we;de++){const tt=_[de]=fe?La(_[de]):ua(_[de]);tt.key!=null&&Ae.set(tt.key,de)}let Me,Fe=0;const ze=we-Ne+1;let Ue=!1,Je=0;const Ot=new Array(ze);for(de=0;de<ze;de++)Ot[de]=0;for(de=xe;de<=me;de++){const tt=F[de];if(Fe>=ze){Y(tt,Q,ie,!0);continue}let at;if(tt.key!=null)at=Ae.get(tt.key);else for(Me=Ne;Me<=we;Me++)if(Ot[Me-Ne]===0&&Ua(tt,_[Me])){at=Me;break}at===void 0?Y(tt,Q,ie,!0):(Ot[at-Ne]=de+1,at>=Je?Je=at:Ue=!0,g(tt,_[at],H,null,Q,ie,ue,he,fe),Fe++)}const ft=Ue?lf(Ot):to;for(Me=ft.length-1,de=ze-1;de>=0;de--){const tt=Ne+de,at=_[tt],He=_[tt+1],Be=tt+1<ye?He.el||He.placeholder:X;Ot[de]===0?g(null,at,H,Be,Q,ie,ue,he,fe):Ue&&(Me<0||de!==ft[Me]?q(at,H,Be,2):Me--)}}},q=(F,_,H,X,Q=null)=>{const{el:ie,type:ue,transition:he,children:fe,shapeFlag:de}=F;if(de&6){q(F.component.subTree,_,H,X);return}if(de&128){F.suspense.move(_,H,X);return}if(de&64){ue.move(F,_,H,ge);return}if(ue===ve){o(ie,_,H);for(let me=0;me<fe.length;me++)q(fe[me],_,H,X);o(F.anchor,_,H);return}if(ue===Jn){M(F,_,H);return}if(X!==2&&de&1&&he)if(X===0)he.beforeEnter(ie),o(ie,_,H),Lt(()=>he.enter(ie),Q);else{const{leave:me,delayLeave:we,afterLeave:xe}=he,Ne=()=>{F.ctx.isUnmounted?r(ie):o(ie,_,H)},Ae=()=>{ie._isLeaving&&ie[ya](!0),me(ie,()=>{Ne(),xe&&xe()})};we?we(ie,Ne,Ae):Ae()}else o(ie,_,H)},Y=(F,_,H,X=!1,Q=!1)=>{const{type:ie,props:ue,ref:he,children:fe,dynamicChildren:de,shapeFlag:ye,patchFlag:me,dirs:we,cacheIndex:xe}=F;if(me===-2&&(Q=!1),he!=null&&(ia(),Ho(he,null,H,F,!0),ca()),xe!=null&&(_.renderCache[xe]=void 0),ye&256){_.ctx.deactivate(F);return}const Ne=ye&1&&we,Ae=!co(F);let Me;if(Ae&&(Me=ue&&ue.onVnodeBeforeUnmount)&&fa(Me,_,F),ye&6)ee(F.component,H,X);else{if(ye&128){F.suspense.unmount(H,X);return}Ne&&Ra(F,null,_,"beforeUnmount"),ye&64?F.type.remove(F,_,H,ge,X):de&&!de.hasOnce&&(ie!==ve||me>0&&me&64)?se(de,_,H,!1,!0):(ie===ve&&me&384||!Q&&ye&16)&&se(fe,_,H),X&&L(F)}(Ae&&(Me=ue&&ue.onVnodeUnmounted)||Ne)&&Lt(()=>{Me&&fa(Me,_,F),Ne&&Ra(F,null,_,"unmounted")},H)},L=F=>{const{type:_,el:H,anchor:X,transition:Q}=F;if(_===ve){U(H,X);return}if(_===Jn){T(F);return}const ie=()=>{r(H),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(F.shapeFlag&1&&Q&&!Q.persisted){const{leave:ue,delayLeave:he}=Q,fe=()=>ue(H,ie);he?he(F.el,ie,fe):fe()}else ie()},U=(F,_)=>{let H;for(;F!==_;)H=m(F),r(F),F=H;r(_)},ee=(F,_,H)=>{const{bum:X,scope:Q,job:ie,subTree:ue,um:he,m:fe,a:de}=F;mi(fe),mi(de),X&&mr(X),Q.stop(),ie&&(ie.flags|=8,Y(ue,F,_,H)),he&&Lt(he,_),Lt(()=>{F.isUnmounted=!0},_)},se=(F,_,H,X=!1,Q=!1,ie=0)=>{for(let ue=ie;ue<F.length;ue++)Y(F[ue],_,H,X,Q)},K=F=>{if(F.shapeFlag&6)return K(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const _=m(F.anchor||F.el),H=_&&_[Nl];return H?m(H):_};let Z=!1;const te=(F,_,H)=>{F==null?_._vnode&&Y(_._vnode,null,null,!0):g(_._vnode||null,F,_,null,null,null,H),_._vnode=F,Z||(Z=!0,Al(),Dl(),Z=!1)},ge={p:g,um:Y,m:q,r:L,mt:x,mc:E,pc:W,pbc:z,n:K,o:e};return{render:te,hydrate:void 0,createApp:Yu(te)}}function qn({type:e,props:t},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:a}function ja({effect:e,job:t},a){a?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function sf(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Gn(e,t,a=!1){const o=e.children,r=t.children;if(Te(o)&&Te(r))for(let n=0;n<o.length;n++){const s=o[n];let l=r[n];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[n]=La(r[n]),l.el=s.el),!a&&l.patchFlag!==-2&&Gn(s,l)),l.type===Fr&&l.patchFlag!==-1&&(l.el=s.el),l.type===Mt&&!l.el&&(l.el=s.el)}}function lf(e){const t=e.slice(),a=[0];let o,r,n,s,l;const i=e.length;for(o=0;o<i;o++){const c=e[o];if(c!==0){if(r=a[a.length-1],e[r]<c){t[o]=r,a.push(o);continue}for(n=0,s=a.length-1;n<s;)l=n+s>>1,e[a[l]]<c?n=l+1:s=l;c<e[a[n]]&&(n>0&&(t[o]=a[n-1]),a[n]=o)}}for(n=a.length,s=a[n-1];n-- >0;)a[n]=s,s=t[s];return a}function hi(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:hi(t)}function mi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const cf=Symbol.for("v-scx"),df=()=>Br(cf);function $e(e,t,a){return vi(e,t,a)}function vi(e,t,a=ot){const{immediate:o,deep:r,flush:n,once:s}=a,l=yt({},a),i=t&&o||!t&&n!=="post";let c;if(fo){if(n==="sync"){const h=df();c=h.__watcherHandles||(h.__watcherHandles=[])}else if(!i){const h=()=>{};return h.stop=la,h.resume=la,h.pause=la,h}}const d=Ct;l.call=(h,u,g)=>aa(h,d,u,g);let p=!1;n==="post"?l.scheduler=h=>{Lt(h,d&&d.suspense)}:n!=="sync"&&(p=!0,l.scheduler=(h,u)=>{u?h():Nn(h)}),l.augmentJob=h=>{t&&(h.flags|=4),p&&(h.flags|=2,d&&(h.id=d.uid,h.i=d))};const m=mu(e,t,l);return fo&&(c?c.push(m):i&&m()),m}function uf(e,t,a){const o=this.proxy,r=lt(e)?e.includes(".")?bi(o,e):()=>o[e]:e.bind(o,o);let n;Ie(t)?n=t:(n=t.handler,a=t);const s=Ko(this),l=vi(r,n.bind(o),a);return s(),l}function bi(e,t){const a=t.split(".");return()=>{let o=e;for(let r=0;r<a.length&&o;r++)o=o[a[r]];return o}}const ff=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Gt(t)}Modifiers`]||e[`${Ta(t)}Modifiers`];function gf(e,t,...a){if(e.isUnmounted)return;const o=e.vnode.props||ot;let r=a;const n=t.startsWith("update:"),s=n&&ff(o,t.slice(7));s&&(s.trim&&(r=a.map(d=>lt(d)?d.trim():d)),s.number&&(r=a.map(vr)));let l,i=o[l=yn(t)]||o[l=yn(Gt(t))];!i&&n&&(i=o[l=yn(Ta(t))]),i&&aa(i,e,6,r);const c=o[l+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,aa(c,e,6,r)}}function yi(e,t,a=!1){const o=t.emitsCache,r=o.get(e);if(r!==void 0)return r;const n=e.emits;let s={},l=!1;if(!Ie(e)){const i=c=>{const d=yi(c,t,!0);d&&(l=!0,yt(s,d))};!a&&t.mixins.length&&t.mixins.forEach(i),e.extends&&i(e.extends),e.mixins&&e.mixins.forEach(i)}return!n&&!l?(rt(e)&&o.set(e,null),null):(Te(n)?n.forEach(i=>s[i]=null):yt(s,n),rt(e)&&o.set(e,s),s)}function Pr(e,t){return!e||!fr(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ye(e,t[0].toLowerCase()+t.slice(1))||Ye(e,Ta(t))||Ye(e,t))}function SS(){}function wi(e){const{type:t,vnode:a,proxy:o,withProxy:r,propsOptions:[n],slots:s,attrs:l,emit:i,render:c,renderCache:d,props:p,data:m,setupState:h,ctx:u,inheritAttrs:g}=e,v=Dr(e);let k,C;try{if(a.shapeFlag&4){const T=r||o,P=T;k=ua(c.call(P,T,d,p,h,m,u)),C=l}else{const T=t;k=ua(T.length>1?T(p,{attrs:l,slots:s,emit:i}):T(p,null)),C=t.props?l:pf(l)}}catch(T){jo.length=0,Oo(T,e,1),k=Se(Mt)}let M=k;if(C&&g!==!1){const T=Object.keys(C),{shapeFlag:P}=M;T.length&&P&7&&(n&&T.some(mn)&&(C=hf(C,n)),M=Ea(M,C,!1,!0))}return a.dirs&&(M=Ea(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(a.dirs):a.dirs),a.transition&&Fo(M,a.transition),k=M,Dr(v),k}const pf=e=>{let t;for(const a in e)(a==="class"||a==="style"||fr(a))&&((t||(t={}))[a]=e[a]);return t},hf=(e,t)=>{const a={};for(const o in e)(!mn(o)||!(o.slice(9)in t))&&(a[o]=e[o]);return a};function mf(e,t,a){const{props:o,children:r,component:n}=e,{props:s,children:l,patchFlag:i}=t,c=n.emitsOptions;if(t.dirs||t.transition)return!0;if(a&&i>=0){if(i&1024)return!0;if(i&16)return o?ki(o,s,c):!!s;if(i&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const m=d[p];if(s[m]!==o[m]&&!Pr(c,m))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:o===s?!1:o?s?ki(o,s,c):!0:!!s;return!1}function ki(e,t,a){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const n=o[r];if(t[n]!==e[n]&&!Pr(a,n))return!0}return!1}function vf({vnode:e,parent:t},a){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=a,t=t.parent;else break}}const _i=e=>e.__isSuspense;function bf(e,t){t&&t.pendingBranch?Te(e)?t.effects.push(...e):t.effects.push(e):xu(e)}const ve=Symbol.for("v-fgt"),Fr=Symbol.for("v-txt"),Mt=Symbol.for("v-cmt"),Jn=Symbol.for("v-stc"),jo=[];let Vt=null;function b(e=!1){jo.push(Vt=e?null:[])}function yf(){jo.pop(),Vt=jo[jo.length-1]||null}let Uo=1;function xi(e,t=!1){Uo+=e,e<0&&Vt&&t&&(Vt.hasOnce=!0)}function Ci(e){return e.dynamicChildren=Uo>0?Vt||to:null,yf(),Uo>0&&Vt&&Vt.push(e),e}function w(e,t,a,o,r,n){return Ci(f(e,t,a,o,r,n,!0))}function it(e,t,a,o,r){return Ci(Se(e,t,a,o,r,!0))}function Vo(e){return e?e.__v_isVNode===!0:!1}function Ua(e,t){return e.type===t.type&&e.key===t.key}const Si=({key:e})=>e??null,Hr=({ref:e,ref_key:t,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?lt(e)||vt(e)||Ie(e)?{i:xt,r:e,k:t,f:!!a}:e:null);function f(e,t=null,a=null,o=0,r=null,n=e===ve?0:1,s=!1,l=!1){const i={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Si(t),ref:t&&Hr(t),scopeId:Ll,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:xt};return l?(Yn(i,a),n&128&&e.normalize(i)):a&&(i.shapeFlag|=lt(a)?8:16),Uo>0&&!s&&Vt&&(i.patchFlag>0||n&6)&&i.patchFlag!==32&&Vt.push(i),i}const Se=wf;function wf(e,t=null,a=null,o=0,r=null,n=!1){if((!e||e===Jl)&&(e=Mt),Vo(e)){const l=Ea(e,t,!0);return a&&Yn(l,a),Uo>0&&!n&&Vt&&(l.shapeFlag&6?Vt[Vt.indexOf(e)]=l:Vt.push(l)),l.patchFlag=-2,l}if(Ef(e)&&(e=e.__vccOpts),t){t=kf(t);let{class:l,style:i}=t;l&&!lt(l)&&(t.class=Ee(l)),rt(i)&&(En(i)&&!Te(i)&&(i=yt({},i)),t.style=De(i))}const s=lt(e)?1:_i(e)?128:Il(e)?64:rt(e)?4:Ie(e)?2:0;return f(e,t,a,o,r,s,n,!0)}function kf(e){return e?En(e)||ii(e)?yt({},e):e:null}function Ea(e,t,a=!1,o=!1){const{props:r,ref:n,patchFlag:s,children:l,transition:i}=e,c=t?$i(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&Si(c),ref:t&&t.ref?a&&n?Te(n)?n.concat(Hr(t)):[n,Hr(t)]:Hr(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ve?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:i,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ea(e.ssContent),ssFallback:e.ssFallback&&Ea(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return i&&o&&Fo(d,i.clone(d)),d}function Oe(e=" ",t=0){return Se(Fr,null,e,t)}function ne(e="",t=!1){return t?(b(),it(Mt,null,e)):Se(Mt,null,e)}function ua(e){return e==null||typeof e=="boolean"?Se(Mt):Te(e)?Se(ve,null,e.slice()):Vo(e)?La(e):Se(Fr,null,String(e))}function La(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ea(e)}function Yn(e,t){let a=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(Te(t))a=16;else if(typeof t=="object")if(o&65){const r=t.default;r&&(r._c&&(r._d=!1),Yn(e,r()),r._c&&(r._d=!0));return}else{a=32;const r=t._;!r&&!ii(t)?t._ctx=xt:r===3&&xt&&(xt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ie(t)?(t={default:t,_ctx:xt},a=32):(t=String(t),o&64?(a=16,t=[Oe(t)]):a=8);e.children=t,e.shapeFlag|=a}function $i(...e){const t={};for(let a=0;a<e.length;a++){const o=e[a];for(const r in o)if(r==="class")t.class!==o.class&&(t.class=Ee([t.class,o.class]));else if(r==="style")t.style=De([t.style,o.style]);else if(fr(r)){const n=t[r],s=o[r];s&&n!==s&&!(Te(n)&&n.includes(s))&&(t[r]=n?[].concat(n,s):s)}else r!==""&&(t[r]=o[r])}return t}function fa(e,t,a,o=null){aa(e,t,7,[a,o])}const _f=ni();let xf=0;function Cf(e,t,a){const o=e.type,r=(t?t.appContext:e.appContext)||_f,n={uid:xf++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Fd(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:di(o,r),emitsOptions:yi(o,r),emit:null,emitted:null,propsDefaults:ot,inheritAttrs:o.inheritAttrs,ctx:ot,data:ot,props:ot,attrs:ot,slots:ot,refs:ot,setupState:ot,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=gf.bind(null,n),e.ce&&e.ce(n),n}let Ct=null;const Wr=()=>Ct||xt;let zr,Zn;{const e=br(),t=(a,o)=>{let r;return(r=e[a])||(r=e[a]=[]),r.push(o),n=>{r.length>1?r.forEach(s=>s(n)):r[0](n)}};zr=t("__VUE_INSTANCE_SETTERS__",a=>Ct=a),Zn=t("__VUE_SSR_SETTERS__",a=>fo=a)}const Ko=e=>{const t=Ct;return zr(e),e.scope.on(),()=>{e.scope.off(),zr(t)}},Ti=()=>{Ct&&Ct.scope.off(),zr(null)};function Mi(e){return e.vnode.shapeFlag&4}let fo=!1;function Sf(e,t=!1,a=!1){t&&Zn(t);const{props:o,children:r}=e.vnode,n=Mi(e);Xu(e,o,n,t),af(e,r,a||t);const s=n?$f(e,t):void 0;return t&&Zn(!1),s}function $f(e,t){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,ju);const{setup:o}=a;if(o){ia();const r=e.setupContext=o.length>1?Mf(e):null,n=Ko(e),s=no(o,e,0,[e.props,r]),l=Xs(s);if(ca(),n(),(l||e.sp)&&!co(e)&&Pn(e),l){if(s.then(Ti,Ti),t)return s.then(i=>{Ai(e,i)}).catch(i=>{Oo(i,e,0)});e.asyncDep=s}else Ai(e,s)}else Di(e)}function Ai(e,t,a){Ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:rt(t)&&(e.setupState=Sl(t)),Di(e)}function Di(e,t,a){const o=e.type;e.render||(e.render=o.render||la);{const r=Ko(e);ia();try{Uu(e)}finally{ca(),r()}}}const Tf={get(e,t){return $t(e,"get",""),e[t]}};function Mf(e){const t=a=>{e.exposed=a||{}};return{attrs:new Proxy(e.attrs,Tf),slots:e.slots,emit:e.emit,expose:t}}function Rr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Sl(su(e.exposed)),{get(t,a){if(a in t)return t[a];if(a in zo)return zo[a](e)},has(t,a){return a in t||a in zo}})):e.proxy}const Af=/(?:^|[-_])(\w)/g,Df=e=>e.replace(Af,t=>t.toUpperCase()).replace(/[-_]/g,"");function Ei(e,t=!0){return Ie(e)?e.displayName||e.name:e.name||t&&e.__name}function Li(e,t,a=!1){let o=Ei(t);if(!o&&t.__file){const r=t.__file.match(/([^/\\]+)\.\w+$/);r&&(o=r[1])}if(!o&&e&&e.parent){const r=n=>{for(const s in n)if(n[s]===t)return s};o=r(e.components||e.parent.type.components)||r(e.appContext.components)}return o?Df(o):a?"App":"Anonymous"}function Ef(e){return Ie(e)&&"__vccOpts"in e}const A=(e,t)=>pu(e,t,fo);function Ft(e,t,a){const o=arguments.length;return o===2?rt(t)&&!Te(t)?Vo(t)?Se(e,null,[t]):Se(e,t):Se(e,null,t):(o>3?a=Array.prototype.slice.call(arguments,2):o===3&&Vo(a)&&(a=[a]),Se(e,t,a))}const Lf="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xn;const Ni=typeof window<"u"&&window.trustedTypes;if(Ni)try{Xn=Ni.createPolicy("vue",{createHTML:e=>e})}catch{}const Ii=Xn?e=>Xn.createHTML(e):e=>e,Nf="http://www.w3.org/2000/svg",If="http://www.w3.org/1998/Math/MathML",ka=typeof document<"u"?document:null,Oi=ka&&ka.createElement("template"),Of={insert:(e,t,a)=>{t.insertBefore(e,a||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,a,o)=>{const r=t==="svg"?ka.createElementNS(Nf,e):t==="mathml"?ka.createElementNS(If,e):a?ka.createElement(e,{is:a}):ka.createElement(e);return e==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:e=>ka.createTextNode(e),createComment:e=>ka.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ka.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,a,o,r,n){const s=a?a.previousSibling:t.lastChild;if(r&&(r===n||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),a),!(r===n||!(r=r.nextSibling)););else{Oi.innerHTML=Ii(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const l=Oi.content;if(o==="svg"||o==="mathml"){const i=l.firstChild;for(;i.firstChild;)l.appendChild(i.firstChild);l.removeChild(i)}t.insertBefore(l,a)}return[s?s.nextSibling:t.firstChild,a?a.previousSibling:t.lastChild]}},Na="transition",qo="animation",Go=Symbol("_vtc"),Bi={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Bf=yt({},Wl,Bi),Qn=(e=>(e.displayName="Transition",e.props=Bf,e))((e,{slots:t})=>Ft(Mu,Pf(e),t)),Va=(e,t=[])=>{Te(e)?e.forEach(a=>a(...t)):e&&e(...t)},Pi=e=>e?Te(e)?e.some(t=>t.length>1):e.length>1:!1;function Pf(e){const t={};for(const S in e)S in Bi||(t[S]=e[S]);if(e.css===!1)return t;const{name:a="v",type:o,duration:r,enterFromClass:n=`${a}-enter-from`,enterActiveClass:s=`${a}-enter-active`,enterToClass:l=`${a}-enter-to`,appearFromClass:i=n,appearActiveClass:c=s,appearToClass:d=l,leaveFromClass:p=`${a}-leave-from`,leaveActiveClass:m=`${a}-leave-active`,leaveToClass:h=`${a}-leave-to`}=e,u=Ff(r),g=u&&u[0],v=u&&u[1],{onBeforeEnter:k,onEnter:C,onEnterCancelled:M,onLeave:T,onLeaveCancelled:P,onBeforeAppear:N=k,onAppear:y=C,onAppearCancelled:E=M}=t,B=(S,$,x,I)=>{S._enterCancelled=I,Ka(S,$?d:l),Ka(S,$?c:s),x&&x()},z=(S,$)=>{S._isLeaving=!1,Ka(S,p),Ka(S,h),Ka(S,m),$&&$()},j=S=>($,x)=>{const I=S?y:C,J=()=>B($,S,x);Va(I,[$,J]),Fi(()=>{Ka($,S?i:n),_a($,S?d:l),Pi(I)||Hi($,o,g,J)})};return yt(t,{onBeforeEnter(S){Va(k,[S]),_a(S,n),_a(S,s)},onBeforeAppear(S){Va(N,[S]),_a(S,i),_a(S,c)},onEnter:j(!1),onAppear:j(!0),onLeave(S,$){S._isLeaving=!0;const x=()=>z(S,$);_a(S,p),S._enterCancelled?(_a(S,m),Ri()):(Ri(),_a(S,m)),Fi(()=>{S._isLeaving&&(Ka(S,p),_a(S,h),Pi(T)||Hi(S,o,v,x))}),Va(T,[S,x])},onEnterCancelled(S){B(S,!1,void 0,!0),Va(M,[S])},onAppearCancelled(S){B(S,!0,void 0,!0),Va(E,[S])},onLeaveCancelled(S){z(S),Va(P,[S])}})}function Ff(e){if(e==null)return null;if(rt(e))return[es(e.enter),es(e.leave)];{const t=es(e);return[t,t]}}function es(e){return Dd(e)}function _a(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.add(a)),(e[Go]||(e[Go]=new Set)).add(t)}function Ka(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const a=e[Go];a&&(a.delete(t),a.size||(e[Go]=void 0))}function Fi(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Hf=0;function Hi(e,t,a,o){const r=e._endId=++Hf,n=()=>{r===e._endId&&o()};if(a!=null)return setTimeout(n,a);const{type:s,timeout:l,propCount:i}=Wf(e,t);if(!s)return o();const c=s+"end";let d=0;const p=()=>{e.removeEventListener(c,m),n()},m=h=>{h.target===e&&++d>=i&&p()};setTimeout(()=>{d<i&&p()},l+1),e.addEventListener(c,m)}function Wf(e,t){const a=window.getComputedStyle(e),o=u=>(a[u]||"").split(", "),r=o(`${Na}Delay`),n=o(`${Na}Duration`),s=Wi(r,n),l=o(`${qo}Delay`),i=o(`${qo}Duration`),c=Wi(l,i);let d=null,p=0,m=0;t===Na?s>0&&(d=Na,p=s,m=n.length):t===qo?c>0&&(d=qo,p=c,m=i.length):(p=Math.max(s,c),d=p>0?s>c?Na:qo:null,m=d?d===Na?n.length:i.length:0);const h=d===Na&&/\b(transform|all)(,|$)/.test(o(`${Na}Property`).toString());return{type:d,timeout:p,propCount:m,hasTransform:h}}function Wi(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((a,o)=>zi(a)+zi(e[o])))}function zi(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ri(){return document.body.offsetHeight}function zf(e,t,a){const o=e[Go];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):a?e.setAttribute("class",t):e.className=t}const jr=Symbol("_vod"),ji=Symbol("_vsh"),Ui={name:"show",beforeMount(e,{value:t},{transition:a}){e[jr]=e.style.display==="none"?"":e.style.display,a&&t?a.beforeEnter(e):Jo(e,t)},mounted(e,{value:t},{transition:a}){a&&t&&a.enter(e)},updated(e,{value:t,oldValue:a},{transition:o}){!t!=!a&&(o?t?(o.beforeEnter(e),Jo(e,!0),o.enter(e)):o.leave(e,()=>{Jo(e,!1)}):Jo(e,t))},beforeUnmount(e,{value:t}){Jo(e,t)}};function Jo(e,t){e.style.display=t?e[jr]:"none",e[ji]=!t}const Rf=Symbol(""),jf=/(^|;)\s*display\s*:/;function Uf(e,t,a){const o=e.style,r=lt(a);let n=!1;if(a&&!r){if(t)if(lt(t))for(const s of t.split(";")){const l=s.slice(0,s.indexOf(":")).trim();a[l]==null&&Ur(o,l,"")}else for(const s in t)a[s]==null&&Ur(o,s,"");for(const s in a)s==="display"&&(n=!0),Ur(o,s,a[s])}else if(r){if(t!==a){const s=o[Rf];s&&(a+=";"+s),o.cssText=a,n=jf.test(a)}}else t&&e.removeAttribute("style");jr in e&&(e[jr]=n?o.display:"",e[ji]&&(o.display="none"))}const Vi=/\s*!important$/;function Ur(e,t,a){if(Te(a))a.forEach(o=>Ur(e,t,o));else if(a==null&&(a=""),t.startsWith("--"))e.setProperty(t,a);else{const o=Vf(e,t);Vi.test(a)?e.setProperty(Ta(o),a.replace(Vi,""),"important"):e[o]=a}}const Ki=["Webkit","Moz","ms"],ts={};function Vf(e,t){const a=ts[t];if(a)return a;let o=Gt(t);if(o!=="filter"&&o in e)return ts[t]=o;o=hr(o);for(let r=0;r<Ki.length;r++){const n=Ki[r]+o;if(n in e)return ts[t]=n}return t}const qi="http://www.w3.org/1999/xlink";function Gi(e,t,a,o,r,n=Od(t)){o&&t.startsWith("xlink:")?a==null?e.removeAttributeNS(qi,t.slice(6,t.length)):e.setAttributeNS(qi,t,a):a==null||n&&!ol(a)?e.removeAttribute(t):e.setAttribute(t,n?"":ea(a)?String(a):a)}function Ji(e,t,a,o,r){if(t==="innerHTML"||t==="textContent"){a!=null&&(e[t]=t==="innerHTML"?Ii(a):a);return}const n=e.tagName;if(t==="value"&&n!=="PROGRESS"&&!n.includes("-")){const l=n==="OPTION"?e.getAttribute("value")||"":e.value,i=a==null?e.type==="checkbox"?"on":"":String(a);(l!==i||!("_value"in e))&&(e.value=i),a==null&&e.removeAttribute(t),e._value=a;return}let s=!1;if(a===""||a==null){const l=typeof e[t];l==="boolean"?a=ol(a):a==null&&l==="string"?(a="",s=!0):l==="number"&&(a=0,s=!0)}try{e[t]=a}catch{}s&&e.removeAttribute(r||t)}function qa(e,t,a,o){e.addEventListener(t,a,o)}function Kf(e,t,a,o){e.removeEventListener(t,a,o)}const Yi=Symbol("_vei");function qf(e,t,a,o,r=null){const n=e[Yi]||(e[Yi]={}),s=n[t];if(o&&s)s.value=o;else{const[l,i]=Gf(t);if(o){const c=n[t]=Zf(o,r);qa(e,l,c,i)}else s&&(Kf(e,l,s,i),n[t]=void 0)}}const Zi=/(?:Once|Passive|Capture)$/;function Gf(e){let t;if(Zi.test(e)){t={};let o;for(;o=e.match(Zi);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Ta(e.slice(2)),t]}let as=0;const Jf=Promise.resolve(),Yf=()=>as||(Jf.then(()=>as=0),as=Date.now());function Zf(e,t){const a=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=a.attached)return;aa(Xf(o,a.value),t,5,[o])};return a.value=e,a.attached=Yf(),a}function Xf(e,t){if(Te(t)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},t.map(o=>r=>!r._stopped&&o&&o(r))}else return t}const Xi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Qf=(e,t,a,o,r,n)=>{const s=r==="svg";t==="class"?zf(e,o,s):t==="style"?Uf(e,a,o):fr(t)?mn(t)||qf(e,t,a,o,n):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):eg(e,t,o,s))?(Ji(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Gi(e,t,o,s,n,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!lt(o))?Ji(e,Gt(t),o,n,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Gi(e,t,o,s))};function eg(e,t,a,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&Xi(t)&&Ie(a));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Xi(t)&&lt(a)?!1:t in e}const Vr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Te(t)?a=>mr(t,a):t};function tg(e){e.target.composing=!0}function Qi(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const go=Symbol("_assign"),ec={created(e,{modifiers:{lazy:t,trim:a,number:o}},r){e[go]=Vr(r);const n=o||r.props&&r.props.type==="number";qa(e,t?"change":"input",s=>{if(s.target.composing)return;let l=e.value;a&&(l=l.trim()),n&&(l=vr(l)),e[go](l)}),a&&qa(e,"change",()=>{e.value=e.value.trim()}),t||(qa(e,"compositionstart",tg),qa(e,"compositionend",Qi),qa(e,"change",Qi))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:a,modifiers:{lazy:o,trim:r,number:n}},s){if(e[go]=Vr(s),e.composing)return;const l=(n||e.type==="number")&&!/^0\d/.test(e.value)?vr(e.value):e.value,i=t??"";l!==i&&(document.activeElement===e&&e.type!=="range"&&(o&&t===a||r&&e.value.trim()===i)||(e.value=i))}},tc={deep:!0,created(e,{value:t,modifiers:{number:a}},o){const r=gr(t);qa(e,"change",()=>{const n=Array.prototype.filter.call(e.options,s=>s.selected).map(s=>a?vr(Kr(s)):Kr(s));e[go](e.multiple?r?new Set(n):n:n[0]),e._assigning=!0,oa(()=>{e._assigning=!1})}),e[go]=Vr(o)},mounted(e,{value:t}){ac(e,t)},beforeUpdate(e,t,a){e[go]=Vr(a)},updated(e,{value:t}){e._assigning||ac(e,t)}};function ac(e,t){const a=e.multiple,o=Te(t);if(!(a&&!o&&!gr(t))){for(let r=0,n=e.options.length;r<n;r++){const s=e.options[r],l=Kr(s);if(a)if(o){const i=typeof l;i==="string"||i==="number"?s.selected=t.some(c=>String(c)===String(l)):s.selected=Pd(t,l)>-1}else s.selected=t.has(l);else if(yr(Kr(s),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!a&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Kr(e){return"_value"in e?e._value:e.value}const ag=["ctrl","shift","alt","meta"],og={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>ag.some(a=>e[`${a}Key`]&&!t.includes(a))},ut=(e,t)=>{const a=e._withMods||(e._withMods={}),o=t.join(".");return a[o]||(a[o]=(r,...n)=>{for(let s=0;s<t.length;s++){const l=og[t[s]];if(l&&l(r,t))return}return e(r,...n)})},rg={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},po=(e,t)=>{const a=e._withKeys||(e._withKeys={}),o=t.join(".");return a[o]||(a[o]=r=>{if(!("key"in r))return;const n=Ta(r.key);if(t.some(s=>s===n||rg[s]===n))return e(r)})},ng=yt({patchProp:Qf},Of);let oc;function sg(){return oc||(oc=rf(ng))}const lg=(...e)=>{const t=sg().createApp(...e),{mount:a}=t;return t.mount=o=>{const r=cg(o);if(!r)return;const n=t._component;!Ie(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const s=a(r,!1,ig(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},t};function ig(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function cg(e){return lt(e)?document.querySelector(e):e}const dg=Le({name:"NcAppContent",props:{appName:{type:String,default:""},showNavigation:{type:Boolean,default:!0}},setup(e,{slots:t,attrs:a}){return()=>{const o=e.showNavigation!==!1,r={...a,class:[a.class,"app-content",o?null:"app-content--navigation-hidden"]},n={class:"app-content__navigation","aria-label":e.appName||"App navigation","aria-hidden":o?"false":"true"};return Ft("div",r,[Ft("aside",n,t.navigation?t.navigation():[]),Ft("section",{class:"app-content__main",role:"main"},t.default?t.default():[])])}}}),ug=Le({name:"NcAppNavigation",setup(e,{slots:t,attrs:a}){return()=>{const o={...a,class:[a.class,"app-navigation"]};"role"in o||(o.role="navigation");const r=[];return t.actions&&r.push(Ft("div",{class:"app-navigation__actions"},t.actions())),t.default&&r.push(...t.default()),Ft("nav",o,r)}}}),wt=Le({name:"NcButton",props:{type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t,slots:a,attrs:o}){return()=>{const r={...o,class:[o.class,"btn",e.type],disabled:e.disabled,onClick:()=>t("click")};return"type"in r||(r.type="button"),Ft("button",r,a.default?a.default():[])}}}),fg=Le({name:"NcEmptyContent",props:{name:{type:String,default:""},description:{type:String,default:""}},setup(e,{attrs:t}){return()=>Ft("div",{...t,class:[t.class,"card empty"]},[Ft("div",{class:"value"},e.name),Ft("div",{class:"hint"},e.description)])}}),rc=Le({name:"NcCheckboxRadioSwitch",props:{type:{type:String,default:"checkbox"},name:{type:String,default:""},checked:{type:Boolean,default:!1}},emits:["update:checked"],setup(e,{emit:t,slots:a,attrs:o}){const r=s=>{var l;return t("update:checked",!!((l=s==null?void 0:s.target)!=null&&l.checked))},n={...o,class:[o.class,"nc-checkbox-radio-switch"]};return()=>Ft("label",n,[Ft("input",{type:e.type,name:e.name,checked:e.checked,onInput:r}),Ft("span",{},a.default?a.default():[])])}}),gg=Le({name:"NcLoadingIcon",props:{size:{type:[String,Number],default:16}},setup(e,{attrs:t}){return()=>Ft("span",{...t,class:[t.class,"nc-loading-icon"],style:`width:${e.size}px;height:${e.size}px;border:2px solid var(--line);border-top-color:var(--brand);border-radius:50%;display:inline-block;animation:spin 1s linear infinite`})}}),pg={class:"rangebar",title:"Time range"},hg=["aria-label","title"],mg={class:"range-toggle"},vg={class:"range-nav"},bg={class:"range-dates"},yg={class:"range-refresh"},wg=["disabled"],kg={class:"sidebar-block sidebar-block--framed"},_g={class:"sb-actions sb-actions--secondary"},xg={class:"onboarding-jumps"},Cg={key:0,class:"onboarding-hint"},Sg={key:0,class:"onboarding-hint"},$g={key:0,class:"onboarding-hint"},Tg={key:0,class:"onboarding-hint"},Mg={key:0,class:"onboarding-hint"},Ag={class:"sidebar-shortcuts sidebar-shortcuts--bottom"},Dg={class:"sidebar-icon-row"},Eg=Le({__name:"Sidebar",props:{isLoading:{type:Boolean},range:{},offset:{},from:{},to:{},navToggleLabel:{},navToggleIcon:{},dashboardMode:{},guidedHints:{}},emits:["load","update:range","update:offset","toggle-nav","open-profiles","open-shortcuts","rerun-onboarding"],setup(e,{emit:t}){const a=e,o=t;return(r,n)=>(b(),it(D(ug),null,{default:Qe(()=>{var s,l,i,c,d;return[Ru(r.$slots,"actions",{},void 0,!0),f("div",pg,[f("button",{class:"sidebar-toggle-btn sidebar-toggle-btn--corner",type:"button",onClick:n[0]||(n[0]=p=>r.$emit("toggle-nav")),"aria-label":r.navToggleLabel,title:r.navToggleLabel},R(r.navToggleIcon),9,hg),f("div",mg,[Se(D(rc),{type:"radio",name:"range-week",checked:r.range==="week","onUpdate:checked":n[1]||(n[1]=p=>{p&&r.$emit("update:range","week")})},{default:Qe(()=>[...n[14]||(n[14]=[Oe("Week",-1)])]),_:1},8,["checked"]),Se(D(rc),{type:"radio",name:"range-month",checked:r.range==="month","onUpdate:checked":n[2]||(n[2]=p=>{p&&r.$emit("update:range","month")})},{default:Qe(()=>[...n[15]||(n[15]=[Oe("Month",-1)])]),_:1},8,["checked"])]),f("div",vg,[Se(D(wt),{class:"nav-btn",type:"tertiary",disabled:r.isLoading,onClick:n[3]||(n[3]=p=>r.$emit("update:offset",r.offset-1)),title:"Previous"},{default:Qe(()=>[...n[16]||(n[16]=[Oe("",-1)])]),_:1},8,["disabled"]),f("span",bg,R(r.from)+"  "+R(r.to),1),Se(D(wt),{class:"nav-btn",type:"tertiary",disabled:r.isLoading,onClick:n[4]||(n[4]=p=>r.$emit("update:offset",r.offset+1)),title:"Next"},{default:Qe(()=>[...n[17]||(n[17]=[Oe("",-1)])]),_:1},8,["disabled"])]),f("div",yg,[f("button",{class:"sidebar-action-btn",type:"button",disabled:r.isLoading,onClick:n[5]||(n[5]=p=>r.$emit("load"))}," Refresh ",8,wg)])]),f("div",kg,[n[19]||(n[19]=f("div",{class:"sb-title"},"Guided Setup",-1)),f("div",_g,[Se(D(wt),{type:"primary",size:"small",class:"rerun-btn",title:"Open the setup wizard again",onClick:n[6]||(n[6]=p=>r.$emit("rerun-onboarding"))},{default:Qe(()=>[...n[18]||(n[18]=[f("span",{class:"rerun-btn__icon","aria-hidden":"true"},"",-1),Oe(" Setup wizard ",-1)])]),_:1})]),n[20]||(n[20]=f("div",{class:"onboarding-help"}," Revisit the setup wizard to adjust your dashboard step by step. ",-1)),f("ol",xg,[f("li",null,[f("button",{type:"button",class:"link",onClick:n[7]||(n[7]=p=>r.$emit("rerun-onboarding","dashboard"))},"Dashboard"),(s=r.guidedHints)!=null&&s.dashboard?(b(),w("div",Cg,R(r.guidedHints.dashboard),1)):ne("",!0)]),f("li",null,[f("button",{type:"button",class:"link",onClick:n[8]||(n[8]=p=>r.$emit("rerun-onboarding","calendars"))},"Calendars"),(l=r.guidedHints)!=null&&l.calendars?(b(),w("div",Sg,R(r.guidedHints.calendars),1)):ne("",!0)]),f("li",null,[f("button",{type:"button",class:"link",onClick:n[9]||(n[9]=p=>r.$emit("rerun-onboarding","categories"))},"Targets"),(i=r.guidedHints)!=null&&i.categories?(b(),w("div",$g,R(r.guidedHints.categories),1)):ne("",!0)]),f("li",null,[f("button",{type:"button",class:"link",onClick:n[10]||(n[10]=p=>r.$emit("rerun-onboarding","preferences"))},"Preferences"),(c=r.guidedHints)!=null&&c.preferences?(b(),w("div",Tg,R(r.guidedHints.preferences),1)):ne("",!0)]),f("li",null,[f("button",{type:"button",class:"link",onClick:n[11]||(n[11]=p=>r.$emit("rerun-onboarding","review"))},"Review"),(d=r.guidedHints)!=null&&d.review?(b(),w("div",Mg,R(r.guidedHints.review),1)):ne("",!0)])])]),f("div",Ag,[f("div",Dg,[f("button",{type:"button",class:"sidebar-icon-btn",title:"Keyboard shortcuts","aria-label":"Keyboard shortcuts",onClick:n[12]||(n[12]=p=>o("open-shortcuts",p.currentTarget))},[...n[21]||(n[21]=[f("svg",{class:"sidebar-icon",viewBox:"0 0 24 24","aria-hidden":"true"},[f("path",{fill:"currentColor",d:"M4.25 6.5A2.75 2.75 0 0 1 7 3.75h10a2.75 2.75 0 0 1 2.75 2.75v10.5A2.75 2.75 0 0 1 17 19.75H7A2.75 2.75 0 0 1 4.25 17V6.5zm2.75-.75a.75.75 0 0 0-.75.75V17c0 .41.34.75.75.75h10a.75.75 0 0 0 .75-.75V6.5a.75.75 0 0 0-.75-.75H7zm1.5 2.25h2v2h-2v-2zm3 0h2v2h-2v-2zm3 0h2v2h-2v-2zm-6 3h7v2h-7v-2z"})],-1)])]),a.dashboardMode!=="quick"?(b(),w("button",{key:0,type:"button",class:"sidebar-icon-btn sidebar-icon-btn--profile",title:"Profiles","aria-label":"Profiles",onClick:n[13]||(n[13]=p=>o("open-profiles"))},[...n[22]||(n[22]=[f("svg",{class:"sidebar-icon sidebar-icon--profile",viewBox:"0 0 24 24","aria-hidden":"true"},[f("path",{fill:"currentColor",d:"M12 4.25a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm0 1.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zm0 7.5c3.18 0 5.75 1.57 5.75 3.5v1.5c0 .41-.34.75-.75.75H7a.75.75 0 0 1-.75-.75v-1.5c0-1.93 2.57-3.5 5.75-3.5zm0 1.5c-2.44 0-4.25 1.05-4.25 2v.75h8.5V16.75c0-.95-1.81-2-4.25-2z"})],-1)])])):ne("",!0)])])]}),_:3}))}}),et=(e,t)=>{const a=e.__vccOpts||e;for(const[o,r]of t)a[o]=r;return a},Lg=et(Eg,[["__scopeId","data-v-087101c8"]]),Ng={key:0,class:"onboarding-mode"},Ig={class:"mode-grid"},Og={key:1,class:"config-warning"},Bg=Le({__name:"OnboardingIntroStep",props:{hasExistingConfig:{type:Boolean},snapshotSaving:{type:Boolean},saving:{type:Boolean},snapshotNotice:{},profileMode:{},setProfileMode:{type:Function},onSaveCurrentConfig:{type:Function}},setup(e){return(t,a)=>(b(),w(ve,null,[a[7]||(a[7]=f("h3",null,"Opsdash visualises your calendar time and keeps goals on track.",-1)),a[8]||(a[8]=f("ul",{class:"highlights"},[f("li",null,"Targets  stay aligned with your weekly/monthly goals."),f("li",null,"Balance  ensure your focus areas get the right attention."),f("li",null,"Notes  capture insights and the story behind the numbers.")],-1)),t.hasExistingConfig?(b(),w("div",Ng,[a[4]||(a[4]=f("p",{class:"hint"},"Choose how to start.",-1)),f("div",Ig,[f("button",{type:"button",class:Ee(["mode-card",{active:t.profileMode==="existing"}]),onClick:a[0]||(a[0]=o=>t.setProfileMode("existing"))},[...a[2]||(a[2]=[f("strong",null,"Edit current setup",-1),f("span",null,"Start from your existing calendars, targets, widgets, and theme.",-1)])],2),f("button",{type:"button",class:Ee(["mode-card",{active:t.profileMode==="new"}]),onClick:a[1]||(a[1]=o=>t.setProfileMode("new"))},[...a[3]||(a[3]=[f("strong",null,"Create new profile",-1),f("span",null,"Start with empty selections and build a fresh layout.",-1)])],2)])])):ne("",!0),t.hasExistingConfig?(b(),w("div",Og,[a[6]||(a[6]=f("p",null," You already have a dashboard configuration. Save a profile backup of widgets/tabs, targets, deck, reporting, and theme before onboarding applies changes. ",-1)),Se(D(wt),{type:"tertiary",size:"small",disabled:t.snapshotSaving||t.saving,"aria-busy":t.snapshotSaving,onClick:t.onSaveCurrentConfig},{default:Qe(()=>[...a[5]||(a[5]=[Oe(" Save current setup as profile ",-1)])]),_:1},8,["disabled","aria-busy","onClick"])])):ne("",!0),a[9]||(a[9]=f("p",{class:"hint"},"You can change configuration later from the Sidebar.",-1)),t.snapshotNotice?(b(),w("div",{key:2,class:Ee(["snapshot-notice",`snapshot-notice--${t.snapshotNotice.type}`]),role:"status"},R(t.snapshotNotice.message),3)):ne("",!0)],64))}}),Pg={class:"preferences-grid"},Fg={class:"pref-card"},Hg={class:"theme-options",role:"radiogroup","aria-label":"Theme preference"},Wg={class:"theme-option"},zg=["checked"],Rg={class:"theme-copy"},jg={class:"theme-option__desc"},Ug={class:"theme-option"},Vg=["checked"],Kg={class:"theme-option"},qg=["checked"],Gg={class:"theme-preview"},Jg={class:"pref-card"},Yg={class:"field"},Zg=["value","disabled"],Xg={key:0,class:"pref-hint"},Qg={class:"pref-card"},ep={class:"field"},tp=["value"],ap={class:"pref-card"},op={class:"field"},rp=["value"],np={class:"pref-card pref-card--deck"},sp={class:"toggle-row"},lp=["checked"],ip={class:"deck-board-list"},cp={key:0,class:"deck-status"},dp={key:1,class:"deck-status deck-status--error"},up={key:0,class:"deck-status"},fp={key:1,class:"deck-board-options",role:"list"},gp=["checked","onChange"],pp={class:"pref-card pref-card--reporting"},hp={class:"toggle-row"},mp=["checked"],vp={class:"field"},bp=["value"],yp={class:"field"},wp=["value"],kp={class:"field checkbox toggle-row"},_p=["checked"],xp={class:"pref-card pref-card--activity"},Cp={class:"toggle-row"},Sp=["checked"],$p=Le({__name:"OnboardingPreferencesStep",props:{themePreference:{},systemThemeLabel:{},previewTheme:{},setThemePreference:{type:Function},totalHoursInput:{},categoryTotalHours:{},categoriesEnabled:{type:Boolean},onTotalHoursChange:{type:Function},allDayHoursInput:{},onAllDayHoursChange:{type:Function},trendLookbackInput:{},onTrendLookbackChange:{type:Function},deckSettingsDraft:{},setDeckEnabled:{type:Function},deckBoards:{},deckBoardsLoading:{type:Boolean},deckBoardsError:{},isDeckBoardVisible:{type:Function},toggleDeckBoard:{type:Function},reportingDraft:{},setReportingEnabled:{type:Function},setReportingSchedule:{type:Function},setReportingInterim:{type:Function},updateReporting:{type:Function},activityDraft:{},setActivityDayOff:{type:Function}},setup(e){return(t,a)=>(b(),w(ve,null,[a[44]||(a[44]=f("h3",null,"Final tweaks",-1)),a[45]||(a[45]=f("p",{class:"hint"},"You can change these options later from Config & Setup.",-1)),f("div",Pg,[f("article",Fg,[a[15]||(a[15]=f("h4",null,"Theme & appearance",-1)),a[16]||(a[16]=f("p",{class:"pref-desc"},"Choose how Opsdash reacts to your Nextcloud theme. Charts keep their calendar colors.",-1)),f("div",Hg,[f("label",Wg,[f("input",{type:"radio",name:"onboarding-theme",value:"auto",checked:t.themePreference==="auto",onChange:a[0]||(a[0]=o=>t.setThemePreference("auto"))},null,40,zg),f("div",Rg,[a[12]||(a[12]=f("div",{class:"theme-option__title"},"Follow Nextcloud",-1)),f("div",jg,"Matches your account theme (currently "+R(t.systemThemeLabel)+").",1)])]),f("label",Ug,[f("input",{type:"radio",name:"onboarding-theme",value:"light",checked:t.themePreference==="light",onChange:a[1]||(a[1]=o=>t.setThemePreference("light"))},null,40,Vg),a[13]||(a[13]=f("div",{class:"theme-copy"},[f("div",{class:"theme-option__title"},"Force light"),f("div",{class:"theme-option__desc"},"Always use the light palette, even if Nextcloud switches to dark.")],-1))]),f("label",Kg,[f("input",{type:"radio",name:"onboarding-theme",value:"dark",checked:t.themePreference==="dark",onChange:a[2]||(a[2]=o=>t.setThemePreference("dark"))},null,40,qg),a[14]||(a[14]=f("div",{class:"theme-copy"},[f("div",{class:"theme-option__title"},"Force dark"),f("div",{class:"theme-option__desc"},"Keep Opsdash dark, even when Nextcloud stays light.")],-1))])]),f("div",Gg,"Preview: "+R(t.previewTheme==="dark"?"Dark":"Light")+" mode",1)]),f("article",Jg,[a[18]||(a[18]=f("h4",null,"Total weekly target",-1)),a[19]||(a[19]=f("p",{class:"pref-desc"},"Set your overall weekly goal. You can fine-tune per-category targets later.",-1)),f("label",Yg,[a[17]||(a[17]=f("span",{class:"label"},"Total target (h / week)",-1)),f("input",{type:"number",value:t.totalHoursInput??t.categoryTotalHours,disabled:t.categoriesEnabled,min:"0",max:"1000",step:"0.5",onInput:a[3]||(a[3]=o=>t.onTotalHoursChange(o.target))},null,40,Zg)]),t.categoriesEnabled?(b(),w("p",Xg," Using categories  total derives from category targets ("+R(t.categoryTotalHours.toFixed(1))+" h). ",1)):ne("",!0)]),f("article",Qg,[a[21]||(a[21]=f("h4",null,"All-day events",-1)),a[22]||(a[22]=f("p",{class:"pref-desc"},"Tell Opsdash how many hours an all-day calendar event should contribute per day.",-1)),f("label",ep,[a[20]||(a[20]=f("span",{class:"label"},"All-day hours per day",-1)),f("input",{type:"number",value:t.allDayHoursInput,min:"0",max:"24",step:"0.25",onInput:a[4]||(a[4]=o=>t.onAllDayHoursChange(o.target))},null,40,tp)]),a[23]||(a[23]=f("p",{class:"pref-hint"},"Default is 8 h  adjust if your organisation tracks different durations.",-1))]),f("article",ap,[a[25]||(a[25]=f("h4",null,"Trend lookback (global)",-1)),a[26]||(a[26]=f("p",{class:"pref-desc"},"Controls lookback for Balance, Day-off, and Category mix trends.",-1)),f("label",op,[a[24]||(a[24]=f("span",{class:"label"},"Lookback (weeks / months)",-1)),f("input",{type:"number",value:t.trendLookbackInput,min:"1",max:"6",step:"1",onInput:a[5]||(a[5]=o=>t.onTrendLookbackChange(o.target))},null,40,rp)]),a[27]||(a[27]=f("p",{class:"pref-hint"},"Applies to both week and month views.",-1))]),f("article",np,[a[30]||(a[30]=f("h4",null,"Deck cards",-1)),a[31]||(a[31]=f("p",{class:"pref-desc"},"Bring Deck boards into Opsdash. Cards remain read-only so you can focus on status.",-1)),f("label",sp,[f("input",{type:"checkbox",checked:t.deckSettingsDraft.enabled,onChange:a[6]||(a[6]=o=>t.setDeckEnabled(o.target.checked))},null,40,lp),a[28]||(a[28]=f("span",null,"Enable Deck cards on dashboard",-1))]),t.deckSettingsDraft.enabled?(b(),w(ve,{key:0},[a[29]||(a[29]=f("p",{class:"pref-hint"},"Select which boards appear. Deck permissions still apply.",-1)),f("div",ip,[t.deckBoardsLoading?(b(),w("p",cp,"Loading Deck boards")):t.deckBoardsError?(b(),w("p",dp,R(t.deckBoardsError),1)):(b(),w(ve,{key:2},[t.deckBoards.length?(b(),w("div",fp,[(b(!0),w(ve,null,Ce(t.deckBoards,o=>(b(),w("label",{key:o.id,class:"deck-board-option",role:"listitem"},[f("input",{type:"checkbox",checked:t.isDeckBoardVisible(o.id),onChange:r=>t.toggleDeckBoard(o.id,r.target.checked)},null,40,gp),f("span",null,R(o.title),1)]))),128))])):(b(),w("p",up,"Open the Deck app to create a board."))],64))])],64)):ne("",!0)]),f("article",pp,[a[38]||(a[38]=f("h4",null,"Weekly/monthly recap",-1)),a[39]||(a[39]=f("p",{class:"pref-desc"},"Opsdash can send a summary of targets, balance, and notes so you stay aligned.",-1)),f("label",hp,[f("input",{type:"checkbox",checked:t.reportingDraft.enabled,onChange:a[7]||(a[7]=o=>t.setReportingEnabled(o.target.checked))},null,40,mp),a[32]||(a[32]=f("span",null,"Send a recap automatically",-1))]),t.reportingDraft.enabled?(b(),w(ve,{key:0},[f("label",vp,[a[34]||(a[34]=f("span",{class:"label"},"Schedule",-1)),f("select",{value:t.reportingDraft.schedule,onChange:a[8]||(a[8]=o=>t.setReportingSchedule(o.target.value))},[...a[33]||(a[33]=[f("option",{value:"week"},"Weekly",-1),f("option",{value:"month"},"Monthly",-1),f("option",{value:"both"},"Weekly + Monthly",-1)])],40,bp)]),f("label",yp,[a[36]||(a[36]=f("span",{class:"label"},"Mid-range reminders",-1)),f("select",{value:t.reportingDraft.interim,onChange:a[9]||(a[9]=o=>t.setReportingInterim(o.target.value))},[...a[35]||(a[35]=[f("option",{value:"none"},"No interim reminder",-1),f("option",{value:"midweek"},"Mid-week / mid-month only",-1),f("option",{value:"daily"},"Daily nudge while enabled",-1)])],40,wp)]),f("label",kp,[f("input",{type:"checkbox",checked:t.reportingDraft.alertOnRisk,onChange:a[10]||(a[10]=o=>t.updateReporting({alertOnRisk:o.target.checked}))},null,40,_p),a[37]||(a[37]=f("span",null,"Highlight when targets drift off-track",-1))])],64)):ne("",!0)]),f("article",xp,[a[41]||(a[41]=f("h4",null,"Activity insights",-1)),a[42]||(a[42]=f("p",{class:"pref-desc"},"Choose whether the Activity & Schedule card shows the day-off heatmap.",-1)),f("label",Cp,[f("input",{type:"checkbox",checked:t.activityDraft.showDayOffTrend,onChange:a[11]||(a[11]=o=>t.setActivityDayOff(o.target.checked))},null,40,Sp),a[40]||(a[40]=f("span",null,"Show Days off trend heatmap",-1))]),a[43]||(a[43]=f("p",{class:"pref-hint"},"Helps you compare recent weeks/months at a glance.",-1))])])],64))}}),Tp={class:"strategy-grid"},Mp=["onClick"],Ap={class:"subtitle"},Dp=Le({__name:"OnboardingDashboardStep",props:{dashboardMode:{},setDashboardMode:{type:Function},dashboardPresets:{}},setup(e){return(t,a)=>(b(),w(ve,null,[a[0]||(a[0]=f("h3",null,"Dashboard layout",-1)),a[1]||(a[1]=f("p",{class:"hint"},"Pick how much you want to see by default. You can change widgets later.",-1)),f("div",Tp,[(b(!0),w(ve,null,Ce(t.dashboardPresets,o=>(b(),w("article",{key:o.id,class:Ee(["strategy-card",{active:t.dashboardMode===o.id}]),onClick:r=>t.setDashboardMode(o.id)},[f("h4",null,R(o.title),1),f("p",Ap,R(o.subtitle),1),f("ul",null,[(b(!0),w(ve,null,Ce(o.highlights,r=>(b(),w("li",{key:r},R(r),1))),128))]),f("footer",null,"Widgets: "+R(o.widgets),1)],10,Mp))),128))])],64))}}),Ep={class:"strategy-grid"},Lp=["onClick"],Np={class:"subtitle"},Ip=Le({__name:"OnboardingStrategyStep",props:{strategies:{},selectedStrategy:{},setSelectedStrategy:{type:Function}},setup(e){return(t,a)=>(b(),w(ve,null,[a[0]||(a[0]=f("h3",null,"Select a starting strategy",-1)),f("div",Ep,[(b(!0),w(ve,null,Ce(t.strategies,o=>(b(),w("article",{key:o.id,class:Ee(["strategy-card",{active:t.selectedStrategy===o.id}]),onClick:r=>t.setSelectedStrategy(o.id)},[f("h4",null,R(o.title),1),f("p",Np,R(o.subtitle),1),f("ul",null,[(b(!0),w(ve,null,Ce(o.highlights,r=>(b(),w("li",{key:r},R(r),1))),128))]),f("footer",null,"Best for: "+R(o.recommendedFor),1)],10,Lp))),128))]),a[1]||(a[1]=f("p",{class:"hint"},"Balanced and Power include a Targets step for categories and calendar assignments.",-1))],64))}}),Op={class:"calendar-list"},Bp=["value","checked","onChange"],Pp={key:0,class:"calendar-targets"},Fp={class:"cal-name"},Hp={class:"input-unit"},Wp=["value","onInput"],zp={key:1,class:"hint"},Rp={key:2,class:"warning"},jp=Le({__name:"OnboardingCalendarsStep",props:{calendars:{},localSelection:{},toggleCalendar:{type:Function},calendarTargets:{},getCalendarTarget:{type:Function},setCalendarTarget:{type:Function},showCalendarTargets:{type:Boolean}},setup(e){return(t,a)=>(b(),w(ve,null,[a[3]||(a[3]=f("h3",null,"Choose calendars to include",-1)),a[4]||(a[4]=f("p",null,"Select the calendars you want to track. You can adjust later at any time.",-1)),f("div",Op,[(b(!0),w(ve,null,Ce(t.calendars,o=>(b(),w("label",{key:o.id,class:Ee(["calendar-item",{checked:t.localSelection.includes(o.id)}])},[f("input",{type:"checkbox",value:o.id,checked:t.localSelection.includes(o.id),onChange:r=>t.toggleCalendar(o.id,r.target)},null,40,Bp),f("span",{class:"dot",style:De({backgroundColor:o.color||"#3B82F6"})},null,4),f("span",null,R(o.displayname),1)],2))),128))]),t.localSelection.length&&t.showCalendarTargets?(b(),w("div",Pp,[a[1]||(a[1]=f("h4",null,"Calendar targets (h / week)",-1)),a[2]||(a[2]=f("p",{class:"hint"},"Optional in Power mode  set only if you need per-calendar pacing.",-1)),(b(!0),w(ve,null,Ce(t.calendars.filter(o=>t.localSelection.includes(o.id)),o=>(b(),w("div",{key:`target-${o.id}`,class:"target-row"},[f("span",Fp,R(o.displayname),1),f("div",Hp,[f("input",{type:"number",min:"0",step:"0.25",value:t.getCalendarTarget(o.id),onInput:r=>t.setCalendarTarget(o.id,r.target.value)},null,40,Wp),a[0]||(a[0]=f("span",{class:"unit"},"h / week",-1))])]))),128))])):t.localSelection.length&&!t.showCalendarTargets?(b(),w("p",zp," Per-calendar targets are available in Power mode. ")):ne("",!0),t.localSelection.length?ne("",!0):(b(),w("div",Rp,"Select at least one calendar to continue."))],64))}}),Up={key:0,class:"hint"},Vp={class:"category-presets"},Kp={class:"preset-grid"},qp=["onClick"],Gp={class:"preset-title"},Jp={class:"preset-desc"},Yp={class:"preset-swatches"},Zp={class:"categories-editor"},Xp={key:0,class:"empty-state"},Qp={class:"category-card__header"},eh={class:"color-field","data-color-popover":""},th=["aria-expanded","aria-label","onClick"],ah=["id"],oh={class:"swatch-grid",role:"group","aria-label":"Preset colors"},rh=["aria-label","onClick"],nh={class:"custom-color"},sh=["value","onInput"],lh=["value","onInput"],ih={class:"category-actions"},ch=["disabled","onClick"],dh={class:"category-card__fields"},uh={class:"field"},fh={class:"input-unit"},gh=["value","onInput"],ph={class:"field"},hh=["value","onChange"],mh={class:"field checkbox"},vh=["checked","onChange"],bh={key:1,class:"category-total"},yh={key:0,class:"calendar-assignments"},wh={class:"cal-name"},kh=["value","onChange"],_h=["value"],xh={key:0,class:"assignment-warning"},Ch={key:0,class:"warning"},Sh={key:1,class:"calendar-targets"},$h={class:"cal-name"},Th={class:"input-unit"},Mh=["value","onInput"],Ah={key:2,class:"hint"},Dh=Le({__name:"OnboardingCategoriesStep",props:{categoriesEnabled:{type:Boolean},categories:{},categoryTotalHours:{},selectedCalendars:{},assignments:{},showCalendarTargets:{type:Boolean},calendarTargets:{},getCalendarTarget:{type:Function},setCalendarTarget:{type:Function},addCategory:{type:Function},removeCategory:{type:Function},setCategoryLabel:{type:Function},categoryPresets:{},applyCategoryPreset:{type:Function},setCategoryTarget:{type:Function},setCategoryPaceMode:{type:Function},toggleCategoryWeekend:{type:Function},assignCalendar:{type:Function},openColorId:{},toggleColorPopover:{type:Function},closeColorPopover:{type:Function},categoryColorPalette:{},resolvedColor:{type:Function},applyColor:{type:Function},onColorInput:{type:Function}},setup(e){return(t,a)=>(b(),w(ve,null,[a[18]||(a[18]=f("h3",null,"Configure categories & targets",-1)),t.categoriesEnabled?(b(),w(ve,{key:1},[f("div",Vp,[a[1]||(a[1]=f("h4",null,"Quick start presets",-1)),a[2]||(a[2]=f("p",{class:"hint"},"Pick a preset to create categories fast. You can edit everything after.",-1)),f("div",Kp,[(b(!0),w(ve,null,Ce(t.categoryPresets,o=>(b(),w("button",{key:o.id,type:"button",class:"preset-card",onClick:r=>t.applyCategoryPreset(o)},[f("div",Gp,R(o.title),1),f("div",Jp,R(o.description),1),f("div",Yp,[(b(!0),w(ve,null,Ce(o.colors,r=>(b(),w("span",{key:`${o.id}-${r}`,class:"preset-swatch",style:De({backgroundColor:r}),"aria-hidden":"true"},null,4))),128))])],8,qp))),128))])]),f("div",Zp,[t.categories.length?ne("",!0):(b(),w("div",Xp,[...a[3]||(a[3]=[f("p",null,"No categories yet. Add at least one to continue.",-1)])])),(b(!0),w(ve,null,Ce(t.categories,o=>(b(),w("article",{key:o.id,class:"category-card"},[f("header",Qp,[f("div",eh,[f("button",{type:"button",class:"color-button","aria-expanded":t.openColorId===o.id,"aria-label":`Choose color for ${o.label}`,onClick:ut(r=>t.toggleColorPopover(o.id),["stop"])},[f("span",{class:"category-color-indicator",style:De({backgroundColor:t.resolvedColor(o)}),"aria-hidden":"true"},null,4),a[4]||(a[4]=f("span",null,"Color",-1))],8,th),t.openColorId===o.id?(b(),w("div",{key:0,class:"color-popover",id:`onboarding-color-popover-${o.id}`,tabindex:"-1",onKeydown:a[0]||(a[0]=po(ut(r=>t.closeColorPopover(),["prevent"]),["esc"]))},[f("div",oh,[(b(!0),w(ve,null,Ce(t.categoryColorPalette,r=>(b(),w("button",{key:`${o.id}-swatch-${r}`,type:"button",class:Ee(["color-swatch",{active:t.resolvedColor(o)===r}]),style:De({backgroundColor:r}),"aria-label":`Use color ${r}`,onClick:n=>t.applyColor(o.id,r)},null,14,rh))),128))]),f("label",nh,[a[5]||(a[5]=f("span",null,"Custom",-1)),f("input",{class:"color-input",type:"color",value:t.resolvedColor(o),"aria-label":"Pick custom color",onInput:r=>t.onColorInput(o.id,r.target.value)},null,40,sh)])],40,ah)):ne("",!0)]),f("input",{class:"category-name",type:"text",value:o.label,placeholder:"Category name",onInput:r=>t.setCategoryLabel(o.id,r.target.value)},null,40,lh),f("div",ih,[f("button",{class:"remove-category",type:"button",disabled:t.categories.length<=1,title:"Remove category",onClick:r=>t.removeCategory(o.id)},"  ",8,ch)])]),f("div",dh,[f("label",uh,[a[7]||(a[7]=f("span",{class:"label"},"Target",-1)),f("div",fh,[f("input",{type:"number",value:o.targetHours,min:"0",step:"0.5",onInput:r=>t.setCategoryTarget(o.id,r.target.value)},null,40,gh),a[6]||(a[6]=f("span",{class:"unit"},"h / week",-1))])]),f("label",ph,[a[9]||(a[9]=f("span",{class:"label"},"Pacing",-1)),f("select",{value:o.paceMode,onChange:r=>t.setCategoryPaceMode(o.id,r.target.value)},[...a[8]||(a[8]=[f("option",{value:"days_only"},"Days only",-1),f("option",{value:"time_aware"},"Time aware",-1)])],40,hh),a[10]||(a[10]=f("span",{class:"field-hint"},"Time aware adjusts for time already logged.",-1))]),f("label",mh,[f("input",{type:"checkbox",checked:o.includeWeekend,onChange:r=>t.toggleCategoryWeekend(o.id,r.target.checked)},null,40,vh),a[11]||(a[11]=f("span",null,"Include weekend",-1))])])]))),128)),Se(D(wt),{type:"tertiary",class:"add-category",onClick:t.addCategory},{default:Qe(()=>[...a[12]||(a[12]=[Oe("Add category",-1)])]),_:1},8,["onClick"]),t.categories.length?(b(),w("div",bh,"Total weekly target: "+R(t.categoryTotalHours.toFixed(1))+" h",1)):ne("",!0)]),t.selectedCalendars.length?(b(),w("div",yh,[a[14]||(a[14]=f("h4",null,"Assign calendars",-1)),a[15]||(a[15]=f("p",{class:"hint"},"Every selected calendar must be assigned before you continue.",-1)),(b(!0),w(ve,null,Ce(t.selectedCalendars,o=>(b(),w("div",{key:o.id,class:Ee(["assignment-row",{"is-unassigned":!t.assignments[o.id]}])},[f("span",wh,R(o.displayname),1),f("select",{value:t.assignments[o.id],onChange:r=>t.assignCalendar(o.id,r.target.value)},[a[13]||(a[13]=f("option",{value:""},"Unassigned",-1)),(b(!0),w(ve,null,Ce(t.categories,r=>(b(),w("option",{key:r.id,value:r.id},R(r.label),9,_h))),128))],40,kh),t.assignments[o.id]?ne("",!0):(b(),w("span",xh,"Required"))],2))),128)),t.categories.length?ne("",!0):(b(),w("p",Ch,"Add at least one category to assign calendars."))])):ne("",!0),t.selectedCalendars.length&&t.showCalendarTargets?(b(),w("div",Sh,[a[17]||(a[17]=f("h4",null,"Calendar targets (h / week)",-1)),(b(!0),w(ve,null,Ce(t.selectedCalendars,o=>(b(),w("div",{key:`targets-${o.id}`,class:"target-row"},[f("span",$h,R(o.displayname),1),f("div",Th,[f("input",{type:"number",min:"0",step:"0.25",value:t.getCalendarTarget(o.id),onInput:r=>t.setCalendarTarget(o.id,r.target.value)},null,40,Mh),a[16]||(a[16]=f("span",{class:"unit"},"h / week",-1))])]))),128))])):ne("",!0),t.selectedCalendars.length?ne("",!0):(b(),w("p",Ah,"Select at least one calendar to continue."))],64)):(b(),w("p",Up,"This strategy does not require categories."))],64))}}),Eh={class:"review-grid"},Lh={class:"hint"},Nh={key:1},Ih={key:0},Oh={key:0},Bh={key:0,class:"review-profile"},Ph={class:"toggle-row"},Fh=["checked"],Hh={key:0,class:"field"},Wh=["value"],zh=Le({__name:"OnboardingReviewStep",props:{strategyTitle:{},categoriesEnabled:{type:Boolean},selectedCalendars:{},draftTargetsCategories:{},draftTotalHours:{},totalHoursInput:{},categoryTotalHours:{},deckReviewSummary:{},deckEnabled:{type:Boolean},deckVisibleBoards:{},reportingEnabled:{type:Boolean},reportingSummary:{},showDayOffTrend:{type:Boolean},themePreference:{},dashboardMode:{},saveProfile:{type:Boolean},profileName:{},showSaveProfile:{type:Boolean},setSaveProfile:{type:Function},setProfileName:{type:Function}},setup(e){const t=e,a=A(()=>Number.isFinite(t.totalHoursInput??NaN)?Number(t.totalHoursInput):Number.isFinite(t.draftTotalHours)?Number(t.draftTotalHours):0),o=A(()=>t.dashboardMode==="quick"?"Quick layout":t.dashboardMode==="pro"?"Pro layout":"Standard layout"),r=A(()=>t.themePreference==="light"?"Light theme":t.themePreference==="dark"?"Dark theme":"Follow Nextcloud theme");return(n,s)=>(b(),w(ve,null,[s[14]||(s[14]=f("h3",null,"Review your setup",-1)),f("div",Eh,[f("div",null,[s[2]||(s[2]=f("h5",null,"Strategy",-1)),f("p",null,R(n.strategyTitle),1)]),f("div",null,[s[3]||(s[3]=f("h5",null,"Calendars",-1)),f("ul",null,[(b(!0),w(ve,null,Ce(n.selectedCalendars,l=>(b(),w("li",{key:l.id},R(l.displayname),1))),128))])]),f("div",null,[s[4]||(s[4]=f("h5",null,"Targets preview",-1)),n.categoriesEnabled&&n.draftTargetsCategories.length?(b(),w(ve,{key:0},[f("ul",null,[(b(!0),w(ve,null,Ce(n.draftTargetsCategories,l=>(b(),w("li",{key:l.id},R(l.label)+"  "+R(l.targetHours)+" h",1))),128))]),f("p",Lh,"Total weekly target: "+R(n.categoryTotalHours.toFixed(1))+" h",1)],64)):(b(),w("p",Nh,"Total target: "+R(a.value)+" h per week",1))]),f("div",null,[s[5]||(s[5]=f("h5",null,"Dashboard",-1)),f("p",null,R(o.value),1)]),f("div",null,[s[6]||(s[6]=f("h5",null,"Theme",-1)),f("p",null,R(r.value),1)]),f("div",null,[s[7]||(s[7]=f("h5",null,"Deck tab",-1)),f("p",null,R(n.deckReviewSummary),1),n.deckEnabled&&n.deckVisibleBoards.length?(b(),w("ul",Ih,[(b(!0),w(ve,null,Ce(n.deckVisibleBoards.slice(0,3),l=>(b(),w("li",{key:l.id},R(l.title),1))),128)),n.deckVisibleBoards.length>3?(b(),w("li",Oh,"+"+R(n.deckVisibleBoards.length-3)+" more",1)):ne("",!0)])):ne("",!0)]),f("div",null,[s[8]||(s[8]=f("h5",null,"Reporting",-1)),f("p",null,R(n.reportingEnabled?n.reportingSummary:"Recap disabled"),1)]),f("div",null,[s[9]||(s[9]=f("h5",null,"Activity card",-1)),f("p",null,R(n.showDayOffTrend?"Days-off heatmap enabled":"Heatmap hidden"),1)]),n.showSaveProfile?(b(),w("div",Bh,[s[12]||(s[12]=f("h5",null,"Save profile",-1)),f("label",Ph,[f("input",{type:"checkbox",checked:n.saveProfile,onChange:s[0]||(s[0]=l=>n.setSaveProfile(l.target.checked))},null,40,Fh),s[10]||(s[10]=f("span",null,"Save as new profile",-1))]),n.saveProfile?(b(),w("div",Hh,[s[11]||(s[11]=f("span",{class:"label"},"Profile name",-1)),f("input",{type:"text",value:n.profileName,placeholder:"e.g. Team workload",onInput:s[1]||(s[1]=l=>n.setProfileName(l.target.value))},null,40,Wh)])):ne("",!0),s[13]||(s[13]=f("p",{class:"hint"},"Profiles store widgets/tabs, targets, theme, Deck, and reporting settings.",-1))])):ne("",!0)]),s[15]||(s[15]=f("p",{class:"hint"},"You can fine-tune categories, goals, and pacing once the dashboard loads.",-1))],64))}});function Rh(){const e=le(!1),t=le(!1),a=le(0),o=le(null),r=A(()=>e.value||t.value);async function n(s){a.value+=1,o.value=s??null,e.value=!1,t.value=!0,await oa()}return{autoWizardNeeded:e,manualWizardOpen:t,onboardingRunId:a,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:o}}const nc=24*60*60*1e3;function ra(e,t,a){const o=Number(e);return Number.isFinite(o)?Math.min(a,Math.max(t,Math.round(o*100)/100)):t}function jh(e,t,a){const o=Number(e);if(!Number.isFinite(o))return t;const r=Math.round(o);return r<t?t:r>a?a:r}function Ht(e){return Number.isFinite(e)?Number(e.toFixed(2)):0}function os(e){return Number.isFinite(e)?Math.max(0,Math.min(999,Number(e.toFixed(2)))):0}function rs(e){if(!Number.isFinite(e))return"0";const t=Ht(Math.max(0,e));return Math.abs(t-Math.round(t))<.05?Math.round(t).toString():t.toFixed(1)}function Yo(e){const t=Number(e);if(!Number.isFinite(t))return 0;const a=Math.min(1e4,Math.max(0,t));return Number(a.toFixed(2))}function xa(e){return Yo(Number(e)*4)}function sc(){return{showWeekendShare:!0,showEveningShare:!0,showEarliestLatest:!0,showOverlaps:!0,showLongestSession:!0,showLastDayOff:!0,showDayOffTrend:!0,showHint:!0,forecastMode:"total"}}function ho(){return{categories:["work","hobby","sport"],useCategoryMapping:!0,index:{method:"simple_range",basis:"category"},thresholds:{noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6},relations:{displayMode:"ratio"},trend:{lookbackWeeks:3},dayparts:{enabled:!1},ui:{showNotes:!1}}}function ga(){return{totalHours:48,categories:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",color:"#2563EB",groupIds:[1]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#F97316",groupIds:[2]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#10B981",groupIds:[3]}],pace:{includeWeekendTotal:!0,mode:"days_only",thresholds:{onTrack:-2,atRisk:-10}},forecast:{methodPrimary:"linear",momentumLastNDays:2,padding:1.5},ui:{showTotalDelta:!0,showNeedPerDay:!0,showCategoryBlocks:!0,badges:!0,includeWeekendToggle:!0,showCalendarCharts:!0,showCategoryCharts:!0},allDayHours:8,timeSummary:{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},activityCard:sc(),balance:ho(),includeZeroDaysInStats:!1}}function pa(e){return JSON.parse(JSON.stringify(Nt(e)))}function Nt(e){var s,l,i,c,d,p,m,h,u,g,v,k,C,M,T,P,N,y,E,B,z,j,S,$,x;if(typeof e=="string")try{const I=JSON.parse(e);return Nt(I)}catch{return Nt(void 0)}const t=ga(),a=JSON.parse(JSON.stringify(e??{}));if(typeof a!="object"||a===null||Array.isArray(a))return t;Array.isArray(a.categories)||(a.categories=[]);const o=a.categories.map(I=>{const J=(I!=null&&I.id&&typeof I.id=="string"?I.id:"")||Gh(String((I==null?void 0:I.label)??"cat")),O=typeof(I==null?void 0:I.label)=="string"&&I.label.trim()!==""?I.label.trim():qh(J),W=ra(I==null?void 0:I.targetHours,0,1e4),oe=!!(I!=null&&I.includeWeekend),V=(I==null?void 0:I.paceMode)==="time_aware"?"time_aware":"days_only",q=Kh(I==null?void 0:I.color),Y=Array.isArray(I==null?void 0:I.groupIds)?I.groupIds.map(L=>Number(L)).filter(L=>Number.isFinite(L)&&L>=0&&L<=9):[];return{id:J,label:O,targetHours:W,includeWeekend:oe,paceMode:V,color:q,groupIds:Y}}),r=o.length?o:t.categories;return{totalHours:ra(a.totalHours,0,1e4),categories:r,pace:{includeWeekendTotal:!!(((s=a.pace)==null?void 0:s.includeWeekendTotal)??t.pace.includeWeekendTotal),mode:((l=a.pace)==null?void 0:l.mode)==="time_aware"?"time_aware":t.pace.mode,thresholds:{onTrack:ra(((c=(i=a.pace)==null?void 0:i.thresholds)==null?void 0:c.onTrack)??t.pace.thresholds.onTrack,-100,100),atRisk:ra(((p=(d=a.pace)==null?void 0:d.thresholds)==null?void 0:p.atRisk)??t.pace.thresholds.atRisk,-100,100)}},forecast:{methodPrimary:((m=a.forecast)==null?void 0:m.methodPrimary)==="momentum"?"momentum":"linear",momentumLastNDays:(()=>{var J;const I=Math.round(((J=a.forecast)==null?void 0:J.momentumLastNDays)??t.forecast.momentumLastNDays);return Math.min(14,Math.max(1,Number.isFinite(I)?I:t.forecast.momentumLastNDays))})(),padding:ra(((h=a.forecast)==null?void 0:h.padding)??t.forecast.padding,0,100)},ui:{showTotalDelta:!!(((u=a.ui)==null?void 0:u.showTotalDelta)??t.ui.showTotalDelta),showNeedPerDay:!!(((g=a.ui)==null?void 0:g.showNeedPerDay)??t.ui.showNeedPerDay),showCategoryBlocks:!!(((v=a.ui)==null?void 0:v.showCategoryBlocks)??t.ui.showCategoryBlocks),badges:!!(((k=a.ui)==null?void 0:k.badges)??t.ui.badges),includeWeekendToggle:!!(((C=a.ui)==null?void 0:C.includeWeekendToggle)??t.ui.includeWeekendToggle),showCalendarCharts:((M=a.ui)==null?void 0:M.showCalendarCharts)===void 0?t.ui.showCalendarCharts:!!a.ui.showCalendarCharts,showCategoryCharts:((T=a.ui)==null?void 0:T.showCategoryCharts)===void 0?t.ui.showCategoryCharts:!!a.ui.showCategoryCharts},allDayHours:ra(a.allDayHours??t.allDayHours,0,24),timeSummary:{showTotal:((P=a.timeSummary)==null?void 0:P.showTotal)===void 0?t.timeSummary.showTotal:!!a.timeSummary.showTotal,showAverage:((N=a.timeSummary)==null?void 0:N.showAverage)===void 0?t.timeSummary.showAverage:!!a.timeSummary.showAverage,showMedian:((y=a.timeSummary)==null?void 0:y.showMedian)===void 0?t.timeSummary.showMedian:!!a.timeSummary.showMedian,showBusiest:((E=a.timeSummary)==null?void 0:E.showBusiest)===void 0?t.timeSummary.showBusiest:!!a.timeSummary.showBusiest,showWorkday:((B=a.timeSummary)==null?void 0:B.showWorkday)===void 0?t.timeSummary.showWorkday:!!a.timeSummary.showWorkday,showWeekend:((z=a.timeSummary)==null?void 0:z.showWeekend)===void 0?t.timeSummary.showWeekend:!!a.timeSummary.showWeekend,showWeekendShare:((j=a.timeSummary)==null?void 0:j.showWeekendShare)===void 0?t.timeSummary.showWeekendShare:!!a.timeSummary.showWeekendShare,showCalendarSummary:((S=a.timeSummary)==null?void 0:S.showCalendarSummary)===void 0?t.timeSummary.showCalendarSummary:!!a.timeSummary.showCalendarSummary,showTopCategory:(($=a.timeSummary)==null?void 0:$.showTopCategory)===void 0?t.timeSummary.showTopCategory:!!a.timeSummary.showTopCategory,showBalance:((x=a.timeSummary)==null?void 0:x.showBalance)===void 0?t.timeSummary.showBalance:!!a.timeSummary.showBalance},activityCard:Uh(a.activityCard,t.activityCard),balance:Vh(a.balance,r,t.balance),includeZeroDaysInStats:!!(a.includeZeroDaysInStats??t.includeZeroDaysInStats)}}function Uh(e,t){const a={...t};if(!e||typeof e!="object")return a;["showWeekendShare","showEveningShare","showEarliestLatest","showOverlaps","showLongestSession","showLastDayOff","showDayOffTrend","showHint"].forEach(n=>{Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=!!e[n])});const r=e==null?void 0:e.forecastMode;if(typeof r=="string"){const n=r.toLowerCase();(n==="off"||n==="total"||n==="calendar"||n==="category")&&(a.forecastMode=n)}return a}function Vh(e,t,a){var d,p,m;const o=t.map(h=>h.id),r=new Set([...o,"__uncategorized__"]),n=Array.isArray(e==null?void 0:e.categories)?e.categories:a.categories,s=[];for(const h of n){const u=typeof h=="string"?h.trim():String(h??"").trim();u&&(r.size&&!r.has(u)||s.includes(u)||s.push(u))}s.length||(o.length?s.push(...o.slice(0,a.categories.length)):s.push(...a.categories));const l=(e==null?void 0:e.thresholds)??{},i=(e==null?void 0:e.ui)??{},c=(e==null?void 0:e.index)??{};return{categories:s,useCategoryMapping:!!((e==null?void 0:e.useCategoryMapping)??a.useCategoryMapping),index:{method:(c==null?void 0:c.method)==="shannon_evenness"?"shannon_evenness":a.index.method,basis:(c==null?void 0:c.basis)==="calendar"||(c==null?void 0:c.basis)==="both"||(c==null?void 0:c.basis)==="off"?c.basis:a.index.basis},thresholds:{noticeAbove:ra(l.noticeAbove??a.thresholds.noticeAbove,0,1),noticeBelow:ra(l.noticeBelow??a.thresholds.noticeBelow,0,1),warnAbove:ra(l.warnAbove??a.thresholds.warnAbove,0,1),warnBelow:ra(l.warnBelow??a.thresholds.warnBelow,0,1),warnIndex:ra(l.warnIndex??a.thresholds.warnIndex,0,1)},relations:{displayMode:((d=e==null?void 0:e.relations)==null?void 0:d.displayMode)==="factor"?"factor":a.relations.displayMode},trend:{lookbackWeeks:jh(((p=e==null?void 0:e.trend)==null?void 0:p.lookbackWeeks)??a.trend.lookbackWeeks,1,6)},dayparts:{enabled:!!(((m=e==null?void 0:e.dayparts)==null?void 0:m.enabled)??a.dayparts.enabled)},ui:{showNotes:!!(i.showNotes??a.ui.showNotes)}}}function Kh(e){if(typeof e!="string")return;const t=e.trim();if(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t)){if(t.length===4){const[,a,o,r]=t;return`#${a}${a}${o}${o}${r}${r}`.toUpperCase()}return t.toUpperCase()}}function qh(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function Gh(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return`cat-${Math.abs(t)}`}function Jh(e){const t=e.pace.totalEligible>0?e.pace.elapsedEligible/e.pace.totalEligible:0,a=t>0?e.totalProgress.actualHours/t:e.totalProgress.actualHours,o=Math.max(0,Math.ceil(e.pace.daysLeft)),r=Yh(e.dailyHours,e.config.forecast.momentumLastNDays),n=e.totalProgress.actualHours+r*o,s=Math.max(0,Math.min(a,n)-e.config.forecast.padding),l=Math.max(a,n)+e.config.forecast.padding,i=e.config.forecast.methodPrimary==="momentum"?"momentum":"linear",c=i==="momentum"?n:a,d=Math.max(0,c-e.config.forecast.padding),p=Math.max(0,c+e.config.forecast.padding),m=i==="momentum"?"Momentum":"Linear";return{linear:Ht(a),momentum:Ht(n),low:Ht(Math.max(0,s)),high:Ht(Math.max(0,l)),text:`${m} ${rs(e.config.forecast.padding)}h  ${rs(d)}${rs(p)} h`,primaryMethod:i,primary:Ht(c),bandLow:Ht(d),bandHigh:Ht(p)}}function Yh(e,t){if(t<=0)return 0;const a=Array.from(e.entries());if(!a.length)return 0;a.sort((n,s)=>n[0].localeCompare(s[0]));const o=a.slice(-t),r=o.reduce((n,[,s])=>n+Math.max(0,s||0),0);return o.length?r/o.length:0}function Zh(e,t){var o,r;if(typeof window<"u"){const n=window;try{if(typeof(n==null?void 0:n.t)=="function")return n.t("opsdash",e,t||{});if(typeof((r=(o=n==null?void 0:n.OC)==null?void 0:o.L10N)==null?void 0:r.translate)=="function")return n.OC.L10N.translate("opsdash",e,t||{})}catch(s){n!=null&&n.console&&console.warn("[opsdash] translate failed",s)}}let a=e;return t&&Object.entries(t).forEach(([n,s])=>{a=a.replace(new RegExp(`{${n}}`,"g"),String(s))}),a}const mo=Zh,Ca=Wa({locale:"",timeZone:"",firstDayOfWeek:void 0}),ns=new Map;function Xh(){ns.clear()}function Qh(e){if(!(!e||typeof e!="object")){if(typeof e.locale=="string"&&(Ca.locale=e.locale),typeof e.timeZone=="string"&&(Ca.timeZone=e.timeZone),typeof e.firstDayOfWeek=="number"&&Number.isFinite(e.firstDayOfWeek)){const t=(Math.trunc(e.firstDayOfWeek)%7+7)%7;Ca.firstDayOfWeek=t}Xh()}}function ss(){if(Ca.locale)return Ca.locale;if(typeof window<"u"){const e=window,t=e==null?void 0:e.OC;try{const a=typeof(t==null?void 0:t.getCanonicalLocale)=="function"?t.getCanonicalLocale():"";if(typeof a=="string"&&a)return a}catch{}try{const a=typeof(t==null?void 0:t.getLocale)=="function"?t.getLocale():"";if(typeof a=="string"&&a)return a}catch{}try{const a=typeof(t==null?void 0:t.getLanguage)=="function"?t.getLanguage():"";if(typeof a=="string"&&a)return a}catch{}}return typeof navigator<"u"&&navigator.language?navigator.language:"en"}function lc(){if(Ca.timeZone)return Ca.timeZone;try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;if(e)return e}catch{}return"UTC"}function ls(){var e,t;if(typeof Ca.firstDayOfWeek=="number")return Ca.firstDayOfWeek;if(typeof window<"u"){const a=window,o=a==null?void 0:a.OC;try{const r=typeof(o==null?void 0:o.getFirstDayOfWeek)=="function"?o.getFirstDayOfWeek():void 0;if(typeof r=="number"&&Number.isFinite(r))return(Math.trunc(r)%7+7)%7}catch{}try{const r=(e=o==null?void 0:o.config)==null?void 0:e.firstDay;if(typeof r=="number"&&Number.isFinite(r))return(Math.trunc(r)%7+7)%7}catch{}}try{if(typeof Intl.Locale=="function"){const a=(t=new Intl.Locale(ss()))==null?void 0:t.weekInfo;if(a&&typeof a.firstDay=="number"){const o=(Math.trunc(a.firstDay)%7+7)%7;return o===7?0:o}}}catch{}return 1}function em(){const e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],t=ls();return e.slice(t).concat(e.slice(0,t))}function Ia(e){var m;const t=ss();let a=4;try{if(typeof Intl.Locale=="function"){const h=(m=new Intl.Locale(t))==null?void 0:m.weekInfo;h&&typeof h.minimalDays=="number"&&(a=h.minimalDays)}}catch{}const o=ls(),r=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())),n=r.getUTCFullYear(),s=new Date(Date.UTC(n,0,1)),i=(s.getUTCDay()-o+7)%7;let c=new Date(s);c.setUTCDate(s.getUTCDate()-i),7-i<a&&c.setUTCDate(c.getUTCDate()+7);const p=Math.floor((r.getTime()-c.getTime())/864e5);if(p<0){const h=new Date(Date.UTC(n-1,11,31));return Ia(h)}return Math.floor(p/7)+1}function is(e,t){const a=(t==null?void 0:t.locale)??ss(),o=(t==null?void 0:t.timeZone)??e.timeZone??lc(),r={...e,timeZone:o},n=JSON.stringify({locale:a,options:r}),s=ns.get(n);if(s)return s;const l=new Intl.DateTimeFormat(a,r);return ns.set(n,l),l}const ic=/^(\d{4})-(\d{2})-(\d{2})$/,tm=/^(\d{4})-(\d{2})-(\d{2})[ T](\d{2}):(\d{2})(?::(\d{2}))?(Z|[+-]\d{2}:?\d{2})?$/,am=/^(\d{1,2}):(\d{2})(?::(\d{2}))?$/;function It(e){if(!e)return null;const t=ic.exec(String(e).trim());if(!t)return null;const a=Number(t[1]),o=Number(t[2]),r=Number(t[3]);if(!Number.isFinite(a)||!Number.isFinite(o)||!Number.isFinite(r))return null;const n=new Date(Date.UTC(a,o-1,r));return Number.isNaN(n.getTime())?null:n}function cs(e){if(e==null)return null;if(e instanceof Date)return Number.isNaN(e.getTime())?null:e;if(typeof e=="number"){const s=new Date(e);return Number.isNaN(s.getTime())?null:s}const t=String(e).trim();if(!t)return null;const a=am.exec(t);if(a){const s=new Date;return s.setHours(Number(a[1]),Number(a[2]),Number(a[3]||0),0),Number.isNaN(s.getTime())?null:s}if(ic.exec(t))return It(t);const r=tm.exec(t);if(r){const s=r[1],l=r[2],i=r[3],c=r[4],d=r[5],p=r[6]||"00",m=r[7];if(m){const u=m.length===5&&m[3]!==":"?`${m.slice(0,3)}:${m.slice(3)}`:m,g=new Date(`${s}-${l}-${i}T${c}:${d}:${p}${u}`);return Number.isNaN(g.getTime())?null:g}const h=new Date(Number(s),Number(l)-1,Number(i),Number(c),Number(d),Number(p),0);return Number.isNaN(h.getTime())?null:h}const n=new Date(t);return Number.isNaN(n.getTime())?null:n}function qr(e,t={year:"numeric",month:"2-digit",day:"2-digit"}){const a=It(e??"");if(!a)return e?String(e):"";try{return is(t,{timeZone:"UTC"}).format(a)}catch{return e?String(e):""}}function Gr(e,t,a){const o=cs(e);if(!o)return e?String(e):"";try{return is(t,a).format(o)}catch{return e?String(e):""}}function om(e){return Gr(e,{hour:"2-digit",minute:"2-digit"})}function Ga(e,t,a={month:"short",day:"numeric"}){const o=qr(e??"",a),r=qr(t??"",a);return!o||!r?"":o===r?o:`${o}${r}`}function Wt(e,t){const a=t||lc(),r=is({year:"numeric",month:"2-digit",day:"2-digit"},{locale:"en-CA",timeZone:a}).formatToParts(e),n={};return r.forEach(s=>{s.type!=="literal"&&(n[s.type]=s.value)}),n.year&&n.month&&n.day?`${n.year}-${n.month}-${n.day}`:e.toISOString().slice(0,10)}function Jr(e){const t=new Date(e);return t.setUTCHours(0,0,0,0),t}function rm(e,t){const a=[];let o=Jr(e);const r=Jr(t).getTime();for(;o.getTime()<=r;)a.push(new Date(o)),o=new Date(o.getTime()+24*60*60*1e3);return a}function nm(e){const t=e.getUTCDay();return t===0||t===6}function Ja(e,t){const a=new Date(e.getTime());return a.setUTCDate(a.getUTCDate()+t),a}function Zo(e,t){const a=new Date(e.getTime());return a.setUTCMonth(a.getUTCMonth()+t),a}function cc(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth()+1,0))}function dc(e){const t=e?Nt(e):ga(),a=(t==null?void 0:t.totalHours)??0,o=(t==null?void 0:t.categories)??[],r={id:"total",label:mo("Total"),actualHours:0,targetHours:a,percent:0,deltaHours:0,remainingHours:a,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"};return{total:r,categories:o.map(n=>({...r,id:n.id,label:n.label,targetHours:n.targetHours,remainingHours:n.targetHours})),forecast:{linear:0,momentum:0,low:0,high:0,text:"~00 h",primaryMethod:(t==null?void 0:t.forecast.methodPrimary)??"linear",primary:0,bandLow:0,bandHigh:0}}}function uc(e){const t=e.config,a=pc(e.from),o=pc(e.to),r=cm(e.byDay),n=(e.byCal||[]).reduce((p,m)=>{const h=Number((m==null?void 0:m.total_hours)??(m==null?void 0:m.hours)??0);return Number.isFinite(h)?p+h:p},0),s=t.totalHours||0,l=fc({includeWeekend:t.pace.includeWeekendTotal,mode:t.pace.mode,includeZeroDays:t.includeZeroDaysInStats,start:a,end:o,dailyHours:r}),i=gc({id:"total",label:mo("Total"),actual:n,target:s,pace:l,thresholds:t.pace.thresholds,includeWeekend:t.pace.includeWeekendTotal,paceMode:t.pace.mode}),c=t.categories.map(p=>{const m=im(p,e.byCal,e.groupsById),h=p.paceMode||t.pace.mode,u=fc({includeWeekend:p.includeWeekend,mode:h,includeZeroDays:t.includeZeroDaysInStats,start:a,end:o,dailyHours:r});return gc({id:p.id,label:p.label,actual:m,target:p.targetHours,pace:u,thresholds:t.pace.thresholds,includeWeekend:p.includeWeekend,paceMode:h})}),d=Jh({config:t,totalProgress:i,dailyHours:r,pace:l});return{total:i,categories:c,forecast:d}}function fc(e){const{start:t,end:a}=e;if(!t||!a)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};const o=Jr(new Date),r=Oa(t),n=Oa(a),s=rm(t,a).filter(p=>e.includeWeekend||!nm(p)),l=s.length;if(l===0)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};if(Oa(o)>n)return{totalEligible:l,elapsedEligible:l,daysLeft:0,calendarPercent:100};if(Oa(o)<r)return{totalEligible:l,elapsedEligible:0,daysLeft:l,calendarPercent:0};let i=0;for(const p of s){const m=Oa(p),h=e.dailyHours.get(m)??0;if(!(!e.includeZeroDays&&h<=0&&m!==Oa(o))){if(m<Oa(o))i+=1;else if(m===Oa(o))if(e.mode==="time_aware"){const g=Math.min(new Date().getTime(),p.getTime()+nc)-p.getTime(),v=Math.max(0,Math.min(1,g/nc));(e.includeZeroDays||h>0||v>0)&&(i+=v)}else(e.includeZeroDays||h>0)&&(i+=1)}}const c=os(i/l*100),d=Math.max(0,l-i);return{totalEligible:l,elapsedEligible:i,daysLeft:d,calendarPercent:c}}function gc(e){const t=Math.max(0,e.target||0),a=Math.max(0,e.actual||0),o=t>0?os(a/t*100):0,r=t-a,n=a-t,s=e.pace.daysLeft>0?Math.max(0,r)/e.pace.daysLeft:0,l=o-e.pace.calendarPercent,i=sm({percent:o,target:t,gap:l,thresholds:e.thresholds});return{id:e.id,label:e.label,actualHours:Ht(a),targetHours:Ht(t),percent:o,deltaHours:Ht(n),remainingHours:Ht(Math.max(0,r)),needPerDay:Ht(s),daysLeft:Math.max(0,Math.ceil(e.pace.daysLeft)),calendarPercent:os(e.pace.calendarPercent),gap:Ht(l),status:i,statusLabel:lm(i),includeWeekend:e.includeWeekend,paceMode:e.paceMode}}function sm(e){return e.target<=0?"none":e.percent>=100?"done":e.gap>=e.thresholds.onTrack?"on_track":e.gap>=e.thresholds.atRisk?"at_risk":"behind"}function lm(e){switch(e){case"on_track":return mo("On Track");case"at_risk":return mo("At Risk");case"behind":return mo("Behind");case"done":return mo("Done");default:return""}}function im(e,t,a){if(!Array.isArray(t))return 0;const o=Array.isArray(e.groupIds)&&e.groupIds.length?new Set(e.groupIds):null;let r=0;for(const n of t){const s=Number((n==null?void 0:n.total_hours)??(n==null?void 0:n.hours)??0);if(!Number.isFinite(s)||s<=0)continue;const l=String((n==null?void 0:n.id)??(n==null?void 0:n.calendar)??""),i=Number((n==null?void 0:n.group)??(n==null?void 0:n.group_id)??(a==null?void 0:a[l])??0);o&&!o.has(i)||(r+=s)}return r}function cm(e){const t=new Map;if(!Array.isArray(e))return t;for(const a of e){const o=String((a==null?void 0:a.date)??(a==null?void 0:a.day)??"");if(!o)continue;const r=Number((a==null?void 0:a.total_hours)??(a==null?void 0:a.hours)??0);Number.isFinite(r)&&t.set(o,r)}return t}function pc(e){if(!e)return null;const t=It(e);return t?Jr(t):null}function Oa(e){return Wt(e,"UTC")}const Ba=1,dm=[{id:"total_only",title:"Focused",subtitle:"Keep it simple with one total goal",highlights:["Single weekly/monthly target","Great for personal overview","Upgradable later"],layers:{total:!0,categories:!1,calendars:!1},recommendedFor:"Individuals tracking a single workload"},{id:"total_plus_categories",title:"Balanced",subtitle:"Track balance across a few life areas",highlights:["Total goal plus key categories","Automatic category summaries","Calendar grouping suggestions"],layers:{total:!0,categories:!0,calendars:!1},recommendedFor:"Work/life blend with a handful of focus areas"},{id:"full_granular",title:"Power",subtitle:"Targets per category and calendar",highlights:["Detailed per-calendar goals","Category dashboards & pacing","Best for multi-project oversight"],layers:{total:!0,categories:!0,calendars:!0},recommendedFor:"Power users managing several project calendars"}],hc=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1"];function um(e){const t={};return Object.entries(e).forEach(([a,o])=>{t[a]=Number((o*4).toFixed(2))}),t}function Yr(e){if(typeof e!="string")return null;const t=e.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t))return null;if(t.length===4){const[,a,o,r]=t;return`#${a}${a}${o}${o}${r}${r}`.toUpperCase()}return t.toUpperCase()}function fm(e){const t=new Set,a=[];return e.forEach((o,r)=>{const n=((o==null?void 0:o.id)||`cat_${r}`).trim()||`cat_${r}`;t.has(n)||(t.add(n),a.push({id:n,label:((o==null?void 0:o.label)||n).trim()||`Category ${r+1}`,targetHours:Number.isFinite(o==null?void 0:o.targetHours)?Number(o.targetHours):0,includeWeekend:!!(o!=null&&o.includeWeekend),paceMode:(o==null?void 0:o.paceMode)==="time_aware"?"time_aware":"days_only",color:Yr(o==null?void 0:o.color)??null}))}),a}function gm(e,t,a){const o={};if(!t.length)return o;const r=new Set(t.map(n=>n.id));return e.forEach(n=>{const s=a[n];r.has(s)&&(o[n]=s)}),o}function mc(){return dm}function vc(e,t,a){const o=[...new Set(a.filter(r=>t.some(n=>n.id===r)))];return e==="total_only"?{categories:[],assignments:{}}:{categories:[],assignments:Object.fromEntries(o.map(r=>[r,""]))}}function ds(e,t,a,o){var v;const r=[...new Set(a.filter(k=>t.some(C=>C.id===k)))],n=Nt(ga()),s={},l={};if(e==="total_only"){const k=pa(n);return k.totalHours=k.totalHours||40,k.categories=[],k.ui.showCategoryBlocks=!1,k.ui.showCategoryCharts=!1,k.ui.showCalendarCharts=!1,{selected:r,targetsConfig:Nt(k),groups:s,targetsWeek:l,targetsMonth:{}}}const i=vc(e,t,r),c=fm((v=o==null?void 0:o.categories)!=null&&v.length?o.categories:i.categories),d=gm(r,c.length?c:i.categories,(o==null?void 0:o.assignments)??i.assignments),p=pa(n),m=new Map;let h=0;const u=k=>{const C=Yr(k.color);if(C)return C;const M=t.find(P=>d[P.id]===k.id&&Yr(P.color));if(M)return Yr(M.color)??null;const T=hc[h%hc.length];return h+=1,T??null};p.categories=c.map((k,C)=>{const M=C+1;return m.set(k.id,M),{id:k.id,label:k.label,targetHours:Number(k.targetHours.toFixed(2)),includeWeekend:k.includeWeekend,paceMode:k.paceMode,color:u(k),groupIds:[M]}}),p.totalHours=p.categories.reduce((k,C)=>k+C.targetHours,0),p.totalHours<=0&&(p.totalHours=40),p.ui.showCategoryBlocks=p.categories.length>0,p.ui.showCategoryCharts=p.categories.length>0,p.ui.showCalendarCharts=e==="full_granular",p.includeZeroDaysInStats=!1,p.balance.categories=p.categories.map(k=>k.id),p.balance.useCategoryMapping=!0;const g={};return Object.values(d).forEach(k=>{g[k]=(g[k]??0)+1}),Object.entries(d).forEach(([k,C])=>{const M=m.get(C);if(M&&(s[k]=M,e==="full_granular")){const T=p.categories.find(y=>y.id===C);if(!T)return;const P=g[C]||1,N=Number((T.targetHours/P).toFixed(2));l[k]=N}}),{selected:r,targetsConfig:Nt(p),groups:s,targetsWeek:l,targetsMonth:um(l)}}function Xo(){return{enabled:!1,schedule:"both",interim:"none",reminderLead:"1d",alertOnRisk:!0,riskThreshold:.85,notifyEmail:!0,notifyNotification:!0}}function us(e,t){const a=t??Xo();if(!e||typeof e!="object")return{...a};const o=e.schedule==="week"||e.schedule==="month"?e.schedule:"both",r=e.interim==="midweek"||e.interim==="daily"?e.interim:"none",n=e.reminderLead==="1d"||e.reminderLead==="2d"?e.reminderLead:"none",s=Number(e.riskThreshold),l=Number.isFinite(s)&&s>=0&&s<=1?s:a.riskThreshold;return{enabled:!!e.enabled,schedule:o,interim:r,reminderLead:n,alertOnRisk:e.alertOnRisk!==!1,riskThreshold:l,notifyEmail:e.notifyEmail!==!1,notifyNotification:!!e.notifyNotification}}function Qo(){return{enabled:!0,filtersEnabled:!0,defaultFilter:"all",hiddenBoards:[],mineMode:"assignee",solvedIncludesArchived:!0,ticker:{autoScroll:!0,intervalSeconds:5,showBoardBadges:!0}}}function fs(e,t){var p,m,h;const a=t??Qo();if(!e||typeof e!="object")return{...a};const o=(u,g)=>{if(typeof u=="boolean")return u;if(typeof u=="number")return u===1?!0:u===0?!1:g;if(typeof u=="string"){const v=u.trim().toLowerCase();if(["1","true","yes","on"].includes(v))return!0;if(["0","false","no","off","null",""].includes(v))return!1}return g},r=u=>{const g=Number(u);return!Number.isInteger(g)||g<=0||g>1e5?null:g},s=["all","mine","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine"].includes(e.defaultFilter)?e.defaultFilter:"all",l=e.mineMode==="creator"||e.mineMode==="both"?e.mineMode:"assignee",i=o(e.solvedIncludesArchived,a.solvedIncludesArchived),c={autoScroll:o((p=e.ticker)==null?void 0:p.autoScroll,a.ticker.autoScroll),intervalSeconds:pm((m=e.ticker)==null?void 0:m.intervalSeconds,a.ticker.intervalSeconds),showBoardBadges:o((h=e.ticker)==null?void 0:h.showBoardBadges,a.ticker.showBoardBadges)},d=Array.isArray(e.hiddenBoards)?Array.from(new Set(e.hiddenBoards.map(u=>r(u)).filter(u=>Number.isInteger(u)&&u>0))):a.hiddenBoards.slice();return{enabled:o(e.enabled,a.enabled),filtersEnabled:o(e.filtersEnabled,a.filtersEnabled),defaultFilter:s,hiddenBoards:d,mineMode:l,solvedIncludesArchived:i,ticker:c}}function pm(e,t){const a=Number(e);return Number.isFinite(a)?Math.min(10,Math.max(3,Math.trunc(a))):t}async function hm(e){const t=Date.parse(e.from),a=Date.parse(e.to);if(!Number.isFinite(t)||!Number.isFinite(a)||t>a)return[];const o=e.includeCompleted!==!1,r=e.includeArchived!==!1,s=await bc(yc("/apps/opsdash/overview/deck/cards",{from:e.from,to:e.to,includeArchived:r?1:0,includeCompleted:o?1:0}));if(s&&s.ok===!1)throw new Error(s.message||"deck_fetch_failed");return Array.isArray(s==null?void 0:s.cards)?s.cards:[]}async function mm(){const t=await bc(yc("/apps/opsdash/overview/deck/boards"));return t&&t.ok===!1?[]:Array.isArray(t==null?void 0:t.boards)?t.boards:[]}async function bc(e){const t={Accept:"application/json"},a=bm();a&&(t.requesttoken=a);const o=await fetch(e,{credentials:"same-origin",headers:t}),r=await o.text();if(!o.ok)throw new Error(`Deck request failed (${o.status})`);return r?JSON.parse(r):null}function yc(e,t){var l,i,c;const a=e.startsWith("/")?e:`/${e}`,o=t?vm(t):"",r=typeof window<"u"?window:{};if(r.OC&&typeof r.OC.generateUrl=="function"){const d=r.OC.generateUrl(a);return o?`${d}?${o}`:d}const n=r.OC&&(r.OC.webroot||((i=(l=r.OC).getRootPath)==null?void 0:i.call(l)))||r._oc_webroot||"",s=typeof((c=r.location)==null?void 0:c.origin)=="string"?r.location.origin:"";return n?o?`${n}${a}?${o}`:`${n}${a}`:s?o?`${s}${a}?${o}`:`${s}${a}`:o?`${a}?${o}`:a}function vm(e){const t=new URLSearchParams;return Object.entries(e).forEach(([a,o])=>{o!=null&&t.append(a,String(o))}),t.toString()}function bm(){var a;const e=typeof window<"u"?window:{},t=((a=e.OC)==null?void 0:a.requestToken)||e.oc_requesttoken;return typeof t=="string"?t:void 0}function ym(e){var dn,un;const{props:t,emit:a}=e,o=["intro","strategy","dashboard","calendars","categories","preferences","review"],r=le(0),n=le("total_only"),s=le(t.initialDashboardMode||"standard"),l=le(t.hasExistingConfig?"existing":"new"),i=le(!1),c=le(""),d=le([]),p=le([]),m=le({}),h=le({}),u=le("auto"),g=le(8),v=le(null),k=le(3),C=le(pt(t.initialDeckSettings??Qo())),M=le({...t.initialReportingConfig??Xo()}),T=le({showDayOffTrend:((un=(dn=t.initialTargetsConfig)==null?void 0:dn.activityCard)==null?void 0:un.showDayOffTrend)??!0}),P=le([]),N=le(!1),y=le(""),E=[{id:"quick",title:"Quick",subtitle:"Minimal, KPI-first layout",highlights:["Time summary + targets","Balance index","Days-off trend"],widgets:"4 widgets"},{id:"standard",title:"Standard",subtitle:"Balanced layout with charts",highlights:["Targets + time summary","Balance & category mix","Calendar table + charts"],widgets:"11 widgets"},{id:"pro",title:"Pro",subtitle:"Full layout with everything",highlights:["Everything in Standard","Deck cards + notes editor","Extended charts"],widgets:"13 widgets"}],B=[{id:"work_hobby_sport",title:"Work / Hobby / Sport",description:"Simple split for work, play, and fitness.",categories:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",color:"#2563EB"},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#F97316"},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#10B981"}],colors:["#2563EB","#F97316","#10B981"]},{id:"focus_personal_recovery",title:"Focus / Personal / Recovery",description:"Balance deep work, personal time, and rest.",categories:[{id:"focus",label:"Focus",targetHours:30,includeWeekend:!1,paceMode:"days_only",color:"#6366F1"},{id:"personal",label:"Personal",targetHours:8,includeWeekend:!0,paceMode:"days_only",color:"#EC4899"},{id:"recovery",label:"Recovery",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#14B8A6"}],colors:["#6366F1","#EC4899","#14B8A6"]},{id:"client_internal_learning",title:"Client / Internal / Learning",description:"Great for agency or team workloads.",categories:[{id:"client",label:"Client",targetHours:28,includeWeekend:!1,paceMode:"days_only",color:"#0EA5E9"},{id:"internal",label:"Internal",targetHours:8,includeWeekend:!1,paceMode:"days_only",color:"#F59E0B"},{id:"learning",label:"Learning",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#22C55E"}],colors:["#0EA5E9","#F59E0B","#22C55E"]}],z=A(()=>{if(!C.value.enabled)return[];const ae=new Set(C.value.hiddenBoards||[]);return P.value.filter(re=>!ae.has(re.id))}),j=A(()=>{if(!C.value.enabled)return"Deck tab disabled";if(N.value)return"Deck tab enabled  loading boards";if(y.value)return"Deck tab enabled  open Deck to finish setup.";if(!P.value.length)return"Deck tab enabled  create a Deck board to see cards.";if(!z.value.length)return"Deck tab enabled  all boards hidden";if(z.value.length===P.value.length){const ae=z.value.length;return ae===1?"Showing 1 board":`Showing all ${ae} boards`}return z.value.length===1?`Showing ${z.value[0].title}`:z.value.length===2?`Showing ${z.value[0].title} and ${z.value[1].title}`:`Showing ${z.value.length} boards`}),S=A(()=>{if(!M.value.enabled)return"Recap disabled";const ae=M.value.schedule==="both"?"Weekly + monthly recap":M.value.schedule==="week"?"Weekly recap":"Monthly recap",re=M.value.interim==="daily"?"Daily reminder":M.value.interim==="midweek"?"Mid-range reminder":"No interim reminder";return`${ae}  ${re}`}),$=le(null),x=A(()=>u.value==="auto"?t.systemTheme==="dark"?"dark":"light":u.value),I=A(()=>t.systemTheme==="dark"?"dark":"light"),J=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],O=A(()=>p.value.reduce((ae,re)=>ae+(Number.isFinite(re.targetHours)?re.targetHours:0),0)),W=A(()=>{const ae=new Set,re=be=>{const st=at(be);st&&ae.add(st)};return t.calendars.forEach(be=>re(be.color)),p.value.forEach(be=>re(be.color)),J.forEach(be=>ae.add(be)),Array.from(ae)}),oe=mc(),V=A(()=>oe.find(ae=>ae.id===n.value)??oe[0]),q=A(()=>V.value.layers.categories),Y=A(()=>V.value.layers.calendars),L=A(()=>t.closable!==!1),U=A(()=>o.filter(ae=>ae==="categories"?q.value:!0)),ee=A(()=>U.value[Math.min(r.value,U.value.length-1)]),se=A(()=>r.value+1),K=A(()=>U.value.length),Z=A(()=>t.saving===!0),te=A(()=>t.snapshotSaving===!0),ge=A(()=>t.snapshotNotice??null),pe="opsdash-onboarding-lock";function F(ae){if(typeof document>"u")return;const re=document.body;re&&(ae?(re.classList.add(pe),re.dataset.opsdashOnboarding="1"):(re.classList.remove(pe),delete re.dataset.opsdashOnboarding))}$e(()=>t.visible,ae=>{ae&&(_(),ft()),F(ae)},{immediate:!0}),Dt(()=>{typeof document<"u"&&document.addEventListener("click",tt),bt().catch(ae=>{console.error("[opsdash] deck board load failed",ae)})}),Hn(()=>{typeof document<"u"&&document.removeEventListener("click",tt),F(!1)});function _(ae){var Pe,Qt,fn;const re=ae??(t.hasExistingConfig?"existing":"new");l.value=re;const be=re==="existing";r.value=0,n.value=be?t.initialStrategy??"total_only":"total_only",s.value=be&&t.initialDashboardMode||"standard";const st=be?[...t.initialSelection??[]]:[];d.value=Array.from(new Set(st.filter(eo=>t.calendars.some(So=>So.id===eo)))),u.value=be?t.initialThemePreference??"auto":"auto",g.value=Re(be?t.initialAllDayHours??8:8),v.value=qe(be?t.initialTotalHours??null:null),k.value=St(be?((Pe=t.initialTargetsConfig)==null?void 0:Pe.balanceTrendLookback)??3:3),h.value={},be&&Object.entries(t.initialTargetsWeek??{}).forEach(([eo,So])=>{t.calendars.some(Os=>Os.id===eo)&&(h.value[eo]=Yo(So))}),C.value=pt(be?t.initialDeckSettings??Qo():Qo()),M.value={...be?t.initialReportingConfig??Xo():Xo()},T.value={showDayOffTrend:be?((fn=(Qt=t.initialTargetsConfig)==null?void 0:Qt.activityCard)==null?void 0:fn.showDayOffTrend)??!0:!0},t.hasExistingConfig?(i.value=re==="new",c.value=""):(i.value=!1,c.value=""),ie(),q.value?p.value.length?v.value=qe(O.value):v.value=null:v.value===null&&be&&(v.value=qe(t.initialTotalHours??40)),me()}function H(ae){l.value!==ae&&_(ae)}function X(ae){i.value=ae,ae||(c.value="")}function Q(ae){c.value=ae}function ie(){var ae;if(!q.value){p.value=[],m.value={},ye();return}if(l.value==="existing"&&((ae=t.initialCategories)!=null&&ae.length))p.value=He(t.initialCategories),m.value={...t.initialAssignments??{}};else{const re=vc(n.value,t.calendars,d.value);p.value=re.categories.map(be=>({...be})),m.value={...re.assignments}}ue(),ye()}function ue(){if(!q.value||!p.value.length){m.value={};return}const ae=new Set(p.value.map(be=>be.id)),re={};d.value.forEach(be=>{const st=m.value[be];re[be]=ae.has(st)?st:""}),m.value=re}const he=A(()=>t.calendars.filter(ae=>d.value.includes(ae.id))),fe=A(()=>ds(n.value,t.calendars,d.value,q.value?{categories:p.value,assignments:m.value}:void 0)),de=A(()=>V.value.title);function ye(){if(q.value){v.value=qe(O.value);return}v.value===null&&(v.value=l.value==="existing"?qe(t.initialTotalHours??40):null)}function me(){if(!t.startStep)return;const ae=U.value.indexOf(t.startStep);ae>=0&&(r.value=ae)}function we(ae){const re=U.value.indexOf(ae);re>=0&&(r.value=re)}function xe(ae){switch(ae){case"intro":return"Intro";case"strategy":return"Modes";case"dashboard":return"Dashboard";case"calendars":return"Calendars";case"categories":return"Targets";case"preferences":return"Preferences";case"review":return"Review";default:return ae}}$e(n,()=>{ie(),r.value=Math.min(r.value,U.value.length-1)}),$e(U,ae=>{r.value>=ae.length&&(r.value=Math.max(ae.length-1,0))}),$e(()=>t.startStep,me),$e(q,()=>{ye()}),$e(O,ae=>{q.value&&(v.value=qe(ae))}),$e(ee,ae=>{ae!=="categories"&&ft()}),$e(()=>t.visible,ae=>{ae||ft()}),$e(d,()=>{const ae=new Set(d.value),re={};Object.entries(h.value).forEach(([be,st])=>{ae.has(be)&&(re[be]=st)}),h.value=re,ue()},{deep:!0}),$e(p,()=>{ue()},{deep:!0});function Ne(){const ae=`cat_${Date.now().toString(36)}_${p.value.length}`;p.value=[...p.value,{id:ae,label:`Category ${p.value.length+1}`,targetHours:8,includeWeekend:!1,paceMode:"days_only"}],ue()}function Ae(ae){p.value.length<=1||(p.value=p.value.filter(re=>re.id!==ae),ue())}function Me(ae,re){p.value=p.value.map(be=>be.id===ae?{...be,label:re}:be)}function Fe(ae){p.value=ae.categories.map((re,be)=>({id:String(re.id||`cat_${be}`),label:re.label||`Category ${be+1}`,targetHours:Number.isFinite(re.targetHours)?Number(re.targetHours):0,includeWeekend:!!re.includeWeekend,paceMode:re.paceMode==="time_aware"?"time_aware":"days_only",color:at(re.color)??null})),m.value={},ue(),ye()}function ze(ae,re){const be=Number(re),st=Number.isFinite(be)?Math.max(0,Math.min(1e3,be)):void 0;p.value=p.value.map(Pe=>Pe.id===ae?{...Pe,targetHours:st??Pe.targetHours}:Pe)}function Ue(ae,re){p.value=p.value.map(be=>be.id===ae?{...be,includeWeekend:re}:be)}function Je(ae,re){m.value={...m.value,[ae]:re}}function Ot(ae){if($.value===ae){ft();return}$.value=ae,oa(()=>{const re=document.getElementById(`onboarding-color-popover-${ae}`);re==null||re.focus()})}function ft(){$.value=null}function tt(ae){const re=ae.target;re!=null&&re.closest("[data-color-popover]")||ft()}function at(ae){if(typeof ae!="string")return null;const re=ae.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(re))return null;if(re.length===4){const[,be,st,Pe]=re;return`#${be}${be}${st}${st}${Pe}${Pe}`.toUpperCase()}return re.toUpperCase()}function He(ae){return Array.isArray(ae)?ae.map((re,be)=>({id:String((re==null?void 0:re.id)??`cat_${be}`).trim()||`cat_${be}`,label:String((re==null?void 0:re.label)??`Category ${be+1}`).trim()||`Category ${be+1}`,targetHours:Number.isFinite(re==null?void 0:re.targetHours)?Number(re.targetHours):0,includeWeekend:!!(re!=null&&re.includeWeekend),paceMode:(re==null?void 0:re.paceMode)==="time_aware"?"time_aware":"days_only",color:at(re==null?void 0:re.color)??null})):[]}function Be(ae){return at(ae==null?void 0:ae.color)??Ve.value}const Ve=A(()=>W.value[0]??"#2563EB");function We(ae,re){p.value=p.value.map(be=>be.id===ae?{...be,color:re}:be)}function ct(ae,re){const be=at(re);We(ae,be??Ve.value)}function gt(ae,re){const be=at(re);We(ae,be??Ve.value),ft()}function Re(ae){if(!Number.isFinite(ae))return 8;const re=Math.max(0,Math.min(24,ae));return Math.round(re*100)/100}function qe(ae){if(!Number.isFinite(ae))return null;const re=Math.max(0,Math.min(1e3,Number(ae)));return Math.round(re*100)/100}function St(ae){return Number.isFinite(ae)?Math.max(1,Math.min(6,Math.round(ae))):3}function pt(ae){return JSON.parse(JSON.stringify(ae))}async function bt(){if(N.value=!0,y.value="",!(typeof window<"u"&&typeof window.OC<"u")){N.value=!1,P.value=[];return}try{const re=await mm();P.value=re,y.value=""}catch{y.value="Unable to load Deck boards. Open Deck to create one.",P.value=[]}finally{N.value=!1}}function dt(ae){C.value={...C.value,enabled:ae}}function $a(ae){return!(C.value.hiddenBoards||[]).includes(ae)}function ha(ae,re){const be=new Set(C.value.hiddenBoards||[]);re?be.delete(ae):be.add(ae),C.value={...C.value,hiddenBoards:Array.from(be).sort((st,Pe)=>st-Pe)}}function sa(ae,re){p.value=p.value.map(be=>be.id===ae?{...be,paceMode:re}:be)}function Ze(ae){if(q.value)return;const re=Number(ae.value);if(!Number.isFinite(re)){v.value=null;return}v.value=qe(re)}function Xe(ae){const re=Number(ae.value);g.value=Re(Number.isFinite(re)?re:g.value)}function ht(ae){const re=Number(ae.value);Number.isFinite(re)&&(k.value=St(re))}function Za(ae){M.value={...M.value,enabled:ae}}function cr(ae){M.value={...M.value,schedule:ae}}function dr(ae){M.value={...M.value,interim:ae}}function Xa(ae){M.value={...M.value,...ae}}function Xt(ae){T.value={...T.value,showDayOffTrend:ae}}const _o=A(()=>r.value>0),sn=A(()=>r.value<U.value.length-1),ln=A(()=>{if(ee.value==="strategy")return!n.value;if(ee.value==="calendars")return d.value.length===0;if(ee.value==="categories"&&q.value){if(!d.value.length||!p.value.length)return!0;const ae=new Set(p.value.map(re=>re.id));if(d.value.some(re=>!ae.has(m.value[re]||"")))return!0}return!!(ee.value==="preferences"&&(!q.value&&(v.value===null||v.value<0)||g.value<0||g.value>24)||ee.value==="review"&&i.value&&c.value.trim()==="")});function cn(){sn.value&&!ln.value&&r.value++}function As(){_o.value&&r.value--}function Ds(){a("skip")}function Es(){L.value&&a("close")}function Ls(){const ae=ds(n.value,t.calendars,d.value,q.value?{categories:p.value.map(Pe=>({...Pe})),assignments:{...m.value}}:void 0),re=ae.targetsConfig;if(re.allDayHours=Re(g.value),re.balance||(re.balance={basis:"events",trend:{lookbackWeeks:k.value}}),re.balance.trend||(re.balance.trend={lookbackWeeks:k.value}),re.balance.trend.lookbackWeeks=St(k.value),q.value){const Pe=qe(O.value);Pe!=null&&(re.totalHours=Pe)}else if(v.value!=null){const Pe=qe(v.value);Pe!=null&&(re.totalHours=Pe)}const be={...ae.targetsWeek};Object.entries(h.value).forEach(([Pe,Qt])=>{d.value.includes(Pe)&&(be[Pe]=Yo(Qt))});const st=Object.fromEntries(Object.entries(be).map(([Pe,Qt])=>[Pe,xa(Qt)]));Object.keys(be).length&&(re.ui.showCalendarCharts=!0),a("complete",{strategy:n.value,selected:[...d.value],targetsConfig:re,groups:ae.groups,targetsWeek:be,targetsMonth:st,themePreference:u.value,deckSettings:pt(C.value),reportingConfig:{...M.value},activityCard:{...T.value},dashboardMode:s.value,saveProfile:i.value,profileName:i.value?c.value.trim():""})}function Qa(){const ae=ds(n.value,t.calendars,d.value,q.value?{categories:p.value.map(Pe=>({...Pe})),assignments:{...m.value}}:void 0),re=ae.targetsConfig;if(re.allDayHours=Re(g.value),re.balance||(re.balance={basis:"events",trend:{lookbackWeeks:k.value}}),re.balance.trend||(re.balance.trend={lookbackWeeks:k.value}),re.balance.trend.lookbackWeeks=St(k.value),q.value){const Pe=qe(O.value);Pe!=null&&(re.totalHours=Pe)}else if(v.value!=null){const Pe=qe(v.value);Pe!=null&&(re.totalHours=Pe)}const be={...ae.targetsWeek};Object.entries(h.value).forEach(([Pe,Qt])=>{d.value.includes(Pe)&&(be[Pe]=Yo(Qt))});const st=Object.fromEntries(Object.entries(be).map(([Pe,Qt])=>[Pe,xa(Qt)]));return Object.keys(be).length&&(re.ui.showCalendarCharts=!0),{targetsConfig:re,groups:ae.groups,targetsWeek:be,targetsMonth:st,selected:[...d.value]}}function xo(){return{completed:!1,version:t.onboardingVersion,strategy:n.value,completed_at:"",dashboardMode:s.value}}function Co(ae){const re=Qa(),be=xo();return ae==="intro"?{onboarding:be}:ae==="strategy"?{onboarding:be,targets_config:re.targetsConfig,groups:re.groups,targets_week:re.targetsWeek,targets_month:re.targetsMonth}:ae==="dashboard"?{onboarding:be,dashboardMode:s.value}:ae==="calendars"?{cals:re.selected}:ae==="categories"?{targets_config:re.targetsConfig,groups:re.groups,targets_week:re.targetsWeek,targets_month:re.targetsMonth}:ae==="preferences"?{targets_config:re.targetsConfig,theme_preference:u.value,deck_settings:pt(C.value),reporting_config:{...M.value},targets_config_activity:{...T.value}}:{cals:re.selected,targets_config:re.targetsConfig,groups:re.groups,targets_week:re.targetsWeek,targets_month:re.targetsMonth,theme_preference:u.value,deck_settings:pt(C.value),reporting_config:{...M.value},targets_config_activity:{...T.value},onboarding:be}}function Ns(ae,re){if(re.checked){d.value.includes(ae)||(d.value=[...d.value,ae]);return}d.value=d.value.filter(be=>be!==ae)}function ur(ae,re){const be=Number(re);if(!Number.isFinite(be)){const st={...h.value};delete st[ae],h.value=st;return}h.value={...h.value,[ae]:Yo(be)}}function Is(ae){return Number.isFinite(h.value[ae])?h.value[ae]:""}return{stepOrder:o,stepIndex:r,selectedStrategy:n,dashboardMode:s,profileMode:l,saveProfile:i,profileName:c,localSelection:d,categories:p,assignments:m,calendarTargets:h,themePreference:u,allDayHoursInput:g,totalHoursInput:v,trendLookbackInput:k,deckSettingsDraft:C,reportingDraft:M,activityDraft:T,deckBoards:P,deckBoardsLoading:N,deckBoardsError:y,dashboardPresets:E,deckVisibleBoards:z,deckReviewSummary:j,reportingSummary:S,openColorId:$,previewTheme:x,systemThemeLabel:I,categoryTotalHours:O,categoryColorPalette:W,categoryPresets:B,strategies:oe,categoriesEnabled:q,calendarTargetsEnabled:Y,isClosable:L,enabledSteps:U,currentStep:ee,stepNumber:se,totalSteps:K,saving:Z,snapshotSaving:te,snapshotNotice:ge,selectedCalendars:he,draft:fe,strategyTitle:de,setProfileMode:H,setSaveProfile:X,setProfileName:Q,applyStartStep:me,goToStep:we,stepLabel:xe,addCategory:Ne,removeCategory:Ae,setCategoryLabel:Me,applyCategoryPreset:Fe,setCategoryTarget:ze,toggleCategoryWeekend:Ue,assignCalendar:Je,setCalendarTarget:ur,getCalendarTarget:Is,toggleColorPopover:Ot,closeColorPopover:ft,resolvedColor:Be,applyColor:gt,onColorInput:ct,setDeckEnabled:dt,isDeckBoardVisible:$a,toggleDeckBoard:ha,setCategoryPaceMode:sa,onTotalHoursChange:Ze,onAllDayHoursChange:Xe,onTrendLookbackChange:ht,setReportingEnabled:Za,setReportingSchedule:cr,setReportingInterim:dr,updateReporting:Xa,setActivityDayOff:Xt,canGoBack:_o,canGoNext:sn,nextDisabled:ln,nextStep:cn,prevStep:As,handleSkip:Ds,handleClose:Es,emitComplete:Ls,toggleCalendar:Ns,resetWizard:_,buildStepPayload:Co}}const wm={key:0,class:"onboarding-overlay",role:"dialog","aria-modal":"true"},km={class:"onboarding-header"},_m={class:"onboarding-title"},xm={class:"subtitle"},Cm={class:"onboarding-actions"},Sm=["disabled"],$m=["disabled"],Tm={class:"onboarding-step-nav","aria-label":"Onboarding steps"},Mm=["disabled","onClick"],Am={class:"onboarding-body"},Dm={key:0,class:"onboarding-step"},Em={key:1,class:"onboarding-step"},Lm={key:2,class:"onboarding-step"},Nm={key:3,class:"onboarding-step"},Im={key:4,class:"onboarding-step"},Om={key:5,class:"onboarding-step"},Bm={key:6,class:"onboarding-step"},Pm={class:"onboarding-footer"},Fm=Le({__name:"OnboardingWizard",props:{visible:{type:Boolean},calendars:{},initialSelection:{},initialStrategy:{},startStep:{},onboardingVersion:{},saving:{type:Boolean},closable:{type:Boolean},initialThemePreference:{},systemTheme:{},initialAllDayHours:{},initialTotalHours:{},initialDeckSettings:{},initialReportingConfig:{},hasExistingConfig:{type:Boolean},initialCategories:{},initialAssignments:{},snapshotSaving:{type:Boolean},snapshotNotice:{},initialDashboardMode:{},initialTargetsWeek:{},initialTargetsConfig:{}},emits:["close","skip","complete","save-step","save-current-config"],setup(e,{emit:t}){const a=e,o=t,{stepNumber:r,totalSteps:n,enabledSteps:s,currentStep:l,isClosable:i,saving:c,stepLabel:d,goToStep:p,handleClose:m,handleSkip:h,canGoBack:u,canGoNext:g,nextDisabled:v,prevStep:k,nextStep:C,emitComplete:M,profileMode:T,saveProfile:P,profileName:N,themePreference:y,systemThemeLabel:E,previewTheme:B,totalHoursInput:z,categoryTotalHours:j,categoriesEnabled:S,calendarTargetsEnabled:$,onTotalHoursChange:x,allDayHoursInput:I,onAllDayHoursChange:J,trendLookbackInput:O,onTrendLookbackChange:W,deckSettingsDraft:oe,setDeckEnabled:V,deckBoards:q,deckBoardsLoading:Y,deckBoardsError:L,isDeckBoardVisible:U,toggleDeckBoard:ee,reportingDraft:se,setReportingEnabled:K,setReportingSchedule:Z,setReportingInterim:te,updateReporting:ge,activityDraft:pe,setActivityDayOff:F,dashboardMode:_,dashboardPresets:H,strategies:X,selectedStrategy:Q,localSelection:ie,toggleCalendar:ue,categories:he,selectedCalendars:fe,assignments:de,calendarTargets:ye,addCategory:me,removeCategory:we,setCategoryLabel:xe,setCategoryTarget:Ne,setCategoryPaceMode:Ae,toggleCategoryWeekend:Me,assignCalendar:Fe,setCalendarTarget:ze,getCalendarTarget:Ue,openColorId:Je,toggleColorPopover:Ot,closeColorPopover:ft,categoryColorPalette:tt,categoryPresets:at,resolvedColor:He,applyColor:Be,onColorInput:Ve,draft:We,strategyTitle:ct,applyCategoryPreset:gt,deckReviewSummary:Re,deckVisibleBoards:qe,reportingSummary:St,setProfileMode:pt,setSaveProfile:bt,setProfileName:dt,buildStepPayload:$a}=ym({props:a,emit:o});function ha(){o("save-step",$a(l.value))}return(sa,Ze)=>(b(),it(Qn,{name:"onboarding-fade"},{default:Qe(()=>[sa.visible?(b(),w("div",wm,[f("div",{class:"onboarding-backdrop",onClick:Ze[0]||(Ze[0]=(...Xe)=>D(m)&&D(m)(...Xe))}),f("div",{class:Ee(["onboarding-panel",`theme-${D(B)}`]),onClick:Ze[3]||(Ze[3]=ut(()=>{},["stop"]))},[f("header",km,[f("div",_m,[Ze[4]||(Ze[4]=f("h2",null,"Welcome to Opsdash",-1)),f("p",xm,"Step "+R(D(r))+" of "+R(D(n)),1)]),f("div",Cm,[f("button",{type:"button",class:"skip-link",onClick:Ze[1]||(Ze[1]=(...Xe)=>D(h)&&D(h)(...Xe)),disabled:D(c)},"Maybe later",8,Sm),D(i)?(b(),w("button",{key:0,type:"button",class:"close-btn",disabled:D(c),onClick:Ze[2]||(Ze[2]=(...Xe)=>D(m)&&D(m)(...Xe)),"aria-label":"Close onboarding"},"  ",8,$m)):ne("",!0)])]),f("nav",Tm,[(b(!0),w(ve,null,Ce(D(s),Xe=>(b(),w("button",{key:Xe,type:"button",class:Ee(["step-pill",{active:Xe===D(l)}]),disabled:D(c),onClick:ht=>D(p)(Xe)},R(D(d)(Xe)),11,Mm))),128))]),f("main",Am,[D(l)==="intro"?(b(),w("section",Dm,[Se(Bg,{"has-existing-config":a.hasExistingConfig??!1,"snapshot-saving":a.snapshotSaving??!1,saving:D(c),"snapshot-notice":a.snapshotNotice??null,"profile-mode":D(T),"set-profile-mode":D(pt),"on-save-current-config":()=>o("save-current-config")},null,8,["has-existing-config","snapshot-saving","saving","snapshot-notice","profile-mode","set-profile-mode","on-save-current-config"])])):D(l)==="preferences"?(b(),w("section",Em,[Se($p,{"theme-preference":D(y),"system-theme-label":D(E),"preview-theme":D(B),"set-theme-preference":Xe=>y.value=Xe,"total-hours-input":D(z),"category-total-hours":D(j),"categories-enabled":D(S),"on-total-hours-change":D(x),"all-day-hours-input":D(I),"on-all-day-hours-change":D(J),"trend-lookback-input":D(O),"on-trend-lookback-change":D(W),"deck-settings-draft":D(oe),"set-deck-enabled":D(V),"deck-boards":D(q),"deck-boards-loading":D(Y),"deck-boards-error":D(L),"is-deck-board-visible":D(U),"toggle-deck-board":D(ee),"reporting-draft":D(se),"set-reporting-enabled":D(K),"set-reporting-schedule":D(Z),"set-reporting-interim":D(te),"update-reporting":D(ge),"activity-draft":D(pe),"set-activity-day-off":D(F)},null,8,["theme-preference","system-theme-label","preview-theme","set-theme-preference","total-hours-input","category-total-hours","categories-enabled","on-total-hours-change","all-day-hours-input","on-all-day-hours-change","trend-lookback-input","on-trend-lookback-change","deck-settings-draft","set-deck-enabled","deck-boards","deck-boards-loading","deck-boards-error","is-deck-board-visible","toggle-deck-board","reporting-draft","set-reporting-enabled","set-reporting-schedule","set-reporting-interim","update-reporting","activity-draft","set-activity-day-off"])])):D(l)==="dashboard"?(b(),w("section",Lm,[Se(Dp,{"dashboard-mode":D(_),"set-dashboard-mode":Xe=>_.value=Xe,"dashboard-presets":D(H)},null,8,["dashboard-mode","set-dashboard-mode","dashboard-presets"])])):D(l)==="strategy"?(b(),w("section",Nm,[Se(Ip,{strategies:D(X),"selected-strategy":D(Q),"set-selected-strategy":Xe=>Q.value=Xe},null,8,["strategies","selected-strategy","set-selected-strategy"])])):D(l)==="calendars"?(b(),w("section",Im,[Se(jp,{calendars:sa.calendars,"local-selection":D(ie),"toggle-calendar":D(ue),"calendar-targets":D(ye),"get-calendar-target":D(Ue),"set-calendar-target":D(ze),"show-calendar-targets":D($)},null,8,["calendars","local-selection","toggle-calendar","calendar-targets","get-calendar-target","set-calendar-target","show-calendar-targets"])])):D(l)==="categories"?(b(),w("section",Om,[Se(Dh,{"categories-enabled":D(S),categories:D(he),"category-total-hours":D(j),"selected-calendars":D(fe),assignments:D(de),"show-calendar-targets":D($),"calendar-targets":D(ye),"get-calendar-target":D(Ue),"set-calendar-target":D(ze),"add-category":D(me),"remove-category":D(we),"set-category-label":D(xe),"category-presets":D(at),"apply-category-preset":D(gt),"set-category-target":D(Ne),"set-category-pace-mode":D(Ae),"toggle-category-weekend":D(Me),"assign-calendar":D(Fe),"open-color-id":D(Je),"toggle-color-popover":D(Ot),"close-color-popover":D(ft),"category-color-palette":D(tt),"resolved-color":D(He),"apply-color":D(Be),"on-color-input":D(Ve)},null,8,["categories-enabled","categories","category-total-hours","selected-calendars","assignments","show-calendar-targets","calendar-targets","get-calendar-target","set-calendar-target","add-category","remove-category","set-category-label","category-presets","apply-category-preset","set-category-target","set-category-pace-mode","toggle-category-weekend","assign-calendar","open-color-id","toggle-color-popover","close-color-popover","category-color-palette","resolved-color","apply-color","on-color-input"])])):D(l)==="review"?(b(),w("section",Bm,[Se(zh,{"strategy-title":D(ct),"categories-enabled":D(S),"selected-calendars":D(fe),"draft-targets-categories":D(We).targetsConfig.categories,"draft-total-hours":D(We).targetsConfig.totalHours,"total-hours-input":D(z),"category-total-hours":D(j),"deck-review-summary":D(Re),"deck-enabled":D(oe).enabled,"deck-visible-boards":D(qe),"reporting-enabled":D(se).enabled,"reporting-summary":D(St),"show-day-off-trend":D(pe).showDayOffTrend,"theme-preference":D(y),"dashboard-mode":D(_),"save-profile":D(P),"profile-name":D(N),"show-save-profile":a.hasExistingConfig??!1,"set-save-profile":D(bt),"set-profile-name":D(dt)},null,8,["strategy-title","categories-enabled","selected-calendars","draft-targets-categories","draft-total-hours","total-hours-input","category-total-hours","deck-review-summary","deck-enabled","deck-visible-boards","reporting-enabled","reporting-summary","show-day-off-trend","theme-preference","dashboard-mode","save-profile","profile-name","show-save-profile","set-save-profile","set-profile-name"])])):ne("",!0)]),f("footer",Pm,[D(u)?(b(),it(D(wt),{key:0,type:"tertiary",disabled:D(c),onClick:D(k)},{default:Qe(()=>[...Ze[5]||(Ze[5]=[Oe("Back",-1)])]),_:1},8,["disabled","onClick"])):ne("",!0),Se(D(wt),{type:"tertiary",disabled:D(c)||D(v),onClick:ha},{default:Qe(()=>[...Ze[6]||(Ze[6]=[Oe("Save step",-1)])]),_:1},8,["disabled"]),D(g)?(b(),it(D(wt),{key:1,type:"primary",disabled:D(v)||D(c),onClick:D(C)},{default:Qe(()=>[...Ze[7]||(Ze[7]=[Oe("Continue",-1)])]),_:1},8,["disabled","onClick"])):(b(),it(D(wt),{key:2,type:"primary",disabled:D(c)||D(v),onClick:D(M)},{default:Qe(()=>[...Ze[8]||(Ze[8]=[Oe(" Start dashboard ",-1)])]),_:1},8,["disabled","onClick"]))])],2)])):ne("",!0)]),_:1}))}}),Hm=["id","role","aria-labelledby"],Wm={key:0,class:"sb-title"},zm={key:1,class:"sb-description"},Rm={class:"setup-actions"},jm={class:"preset-form"},Um=["disabled"],Vm={key:0,class:"preset-error"},Km={key:2,class:"preset-warnings"},qm={class:"preset-header"},Gm={key:3,class:"preset-empty"},Jm={key:4,class:"preset-list"},Ym={class:"preset-meta"},Zm={class:"preset-name"},Xm={class:"preset-info"},Qm={key:0},ev={class:"preset-actions"},tv=et(Le({__name:"SidebarProfilesPane",props:{presets:{},isLoading:{type:Boolean},isSaving:{type:Boolean},isApplying:{type:Boolean},warnings:{},showHeader:{type:Boolean},asPanel:{type:Boolean}},emits:["save","load","delete","refresh","clear-warnings","export-config","import-config"],setup(e,{emit:t}){const a=e,o=t,r=le(""),n=le(null),s=le(null),l=A(()=>a.showHeader!==!1),i=A(()=>a.asPanel===!1?void 0:"opsdash-sidebar-pane-profiles"),c=A(()=>a.asPanel===!1?void 0:"tabpanel"),d=A(()=>a.asPanel===!1?void 0:"opsdash-sidebar-tab-profiles");function p(){const k=r.value.trim();if(!k){n.value="Enter a profile name";return}n.value=null,o("save",k),r.value=""}function m(k){o("load",k)}function h(k){window.confirm(`Delete profile "${k}"?`)&&o("delete",k)}function u(){var k;(k=s.value)==null||k.click()}function g(k){var T;const C=k.target,M=(T=C==null?void 0:C.files)==null?void 0:T[0];M&&o("import-config",M),C&&(C.value="")}function v(k){if(!k)return"";const C=new Date(k);if(Number.isNaN(C.getTime()))return k;const T=new Date().getTime()-C.getTime(),P=Math.round(T/6e4);if(P<1)return"just now";if(P<60)return`${P} min ago`;const N=Math.round(P/60);if(N<24)return`${N}h ago`;const y=Math.round(N/24);if(y<7)return`${y}d ago`;const E=Math.round(y/7);return E<5?`${E}w ago`:Gr(k,{year:"numeric",month:"2-digit",day:"2-digit"})||k}return(k,C)=>(b(),w("div",{id:i.value,class:"sb-pane",role:c.value,"aria-labelledby":d.value},[l.value?(b(),w("div",Wm,"Profiles")):ne("",!0),l.value?(b(),w("p",zm," Export/import full configs or save/load named profiles (calendars, groups, targets, widgets, settings). ")):ne("",!0),f("div",Rm,[Se(D(wt),{type:"tertiary",size:"small",onClick:C[0]||(C[0]=M=>o("export-config"))},{default:Qe(()=>[...C[4]||(C[4]=[Oe(" Export configuration ",-1)])]),_:1}),Se(D(wt),{type:"tertiary",size:"small",onClick:u},{default:Qe(()=>[...C[5]||(C[5]=[Oe(" Import configuration ",-1)])]),_:1}),f("input",{ref_key:"fileInput",ref:s,type:"file",accept:"application/json",class:"import-input",onChange:g},null,544)]),f("div",jm,[C[6]||(C[6]=f("label",{class:"preset-label",for:"preset-name"},"Profile name",-1)),io(f("input",{id:"preset-name","onUpdate:modelValue":C[1]||(C[1]=M=>r.value=M),type:"text",placeholder:"e.g. Focus week",disabled:k.isSaving,onKeyup:po(p,["enter"])},null,40,Um),[[ec,r.value]]),n.value?(b(),w("div",Vm,R(n.value),1)):ne("",!0),Se(D(wt),{class:"preset-save",type:"primary",disabled:k.isSaving||!r.value.trim(),onClick:p},{default:Qe(()=>[Oe(R(k.isSaving?"Saving":"Save current configuration"),1)]),_:1},8,["disabled"])]),k.warnings.length?(b(),w("div",Km,[C[8]||(C[8]=f("div",{class:"warnings-title"},"Warnings",-1)),f("ul",null,[(b(!0),w(ve,null,Ce(k.warnings,(M,T)=>(b(),w("li",{key:T},R(M),1))),128))]),Se(D(wt),{type:"tertiary",class:"preset-clear",onClick:C[2]||(C[2]=M=>o("clear-warnings"))},{default:Qe(()=>[...C[7]||(C[7]=[Oe(" Clear warnings ",-1)])]),_:1})])):ne("",!0),f("div",qm,[C[9]||(C[9]=f("h3",null,"Saved profiles",-1)),Se(D(wt),{type:"tertiary",disabled:k.isLoading,onClick:C[3]||(C[3]=M=>o("refresh"))},{default:Qe(()=>[Oe(R(k.isLoading?"Refreshing":"Refresh list"),1)]),_:1},8,["disabled"])]),!k.presets.length&&!k.isLoading?(b(),w("div",Gm," No profiles yet. Save one above to get started. ")):(b(),w("ul",Jm,[(b(!0),w(ve,null,Ce(k.presets,M=>(b(),w("li",{key:M.name,class:"preset-item"},[f("div",Ym,[f("div",Zm,R(M.name),1),f("div",Xm,[f("span",null,R(M.selectedCount)+" calendars",1),f("span",null,R(M.calendarCount)+" groups",1),M.updatedAt?(b(),w("span",Qm,"Updated "+R(v(M.updatedAt)),1)):ne("",!0)])]),f("div",ev,[Se(D(wt),{type:"primary",disabled:k.isApplying,onClick:T=>m(M.name)},{default:Qe(()=>[Oe(R(k.isApplying?"Applying":"Load"),1)]),_:2},1032,["disabled","onClick"]),Se(D(wt),{type:"tertiary",disabled:k.isApplying,onClick:T=>h(M.name)},{default:Qe(()=>[...C[10]||(C[10]=[Oe(" Delete ",-1)])]),_:2},1032,["disabled","onClick"])])]))),128))]))],8,Hm))}}),[["__scopeId","data-v-b978e1df"]]),av={key:0,class:"onboarding-overlay profiles-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"profiles-overlay-title"},ov={class:"onboarding-header profiles-overlay__header"},rv={class:"onboarding-actions"},nv={class:"onboarding-body profiles-overlay__body"},sv=et(Le({__name:"ProfilesOverlay",props:{visible:{type:Boolean},theme:{},presets:{},isLoading:{type:Boolean},isSaving:{type:Boolean},isApplying:{type:Boolean},warnings:{}},emits:["close","save","load","delete","refresh","clear-warnings","export-config","import-config"],setup(e,{emit:t}){const a=t;return(o,r)=>(b(),it(Qn,{name:"onboarding-fade"},{default:Qe(()=>[o.visible?(b(),w("div",av,[f("div",{class:"onboarding-backdrop",onClick:r[0]||(r[0]=n=>a("close"))}),f("div",{class:Ee(["onboarding-panel",`theme-${o.theme}`]),onClick:r[9]||(r[9]=ut(()=>{},["stop"]))},[f("header",ov,[r[10]||(r[10]=f("div",{class:"onboarding-title"},[f("h2",{id:"profiles-overlay-title"},"Profiles"),f("p",{class:"subtitle"}," Export/import full configs or save/load named profiles (calendars, groups, targets, widgets, settings). ")],-1)),f("div",rv,[f("button",{type:"button",class:"close-btn","aria-label":"Close profiles",onClick:r[1]||(r[1]=n=>a("close"))}," x ")])]),f("main",nv,[Se(tv,{presets:o.presets,"is-loading":o.isLoading,"is-saving":o.isSaving,"is-applying":o.isApplying,warnings:o.warnings,"show-header":!1,"as-panel":!1,onSave:r[2]||(r[2]=n=>a("save",n)),onLoad:r[3]||(r[3]=n=>a("load",n)),onDelete:r[4]||(r[4]=n=>a("delete",n)),onRefresh:r[5]||(r[5]=()=>a("refresh")),onClearWarnings:r[6]||(r[6]=()=>a("clear-warnings")),onExportConfig:r[7]||(r[7]=()=>a("export-config")),onImportConfig:r[8]||(r[8]=n=>a("import-config",n))},null,8,["presets","is-loading","is-saving","is-applying","warnings"])])],2)])):ne("",!0)]),_:1}))}}),[["__scopeId","data-v-753c1068"]]),lv={key:0,class:"onboarding-overlay shortcuts-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"opsdash-shortcuts-title"},iv=["onKeydown"],cv={class:"onboarding-body shortcuts-body"},dv={class:"shortcut-label"},uv={key:0},fv={class:"shortcut-combo","aria-hidden":"true"},gv={class:"shortcuts-footer"},pv=et(Le({__name:"KeyboardShortcutsModal",props:{visible:{type:Boolean},groups:{},theme:{}},emits:["close"],setup(e,{emit:t}){const a=e,o=t,r=le(null),n=A(()=>a.theme==="dark"?"dark":"light");function s(){o("close")}return $e(()=>a.visible,l=>{l&&oa(()=>{var i;(i=r.value)==null||i.focus()}).catch(()=>{})}),(l,i)=>(b(),it(Qn,{name:"onboarding-fade"},{default:Qe(()=>[l.visible?(b(),w("div",lv,[f("div",{class:"onboarding-backdrop",onClick:s}),f("div",{ref_key:"panelRef",ref:r,class:Ee(["onboarding-panel shortcuts-panel",`theme-${n.value}`]),tabindex:"-1",onKeydown:po(ut(s,["prevent"]),["esc"])},[f("header",{class:"onboarding-header shortcuts-header"},[i[0]||(i[0]=f("div",{class:"onboarding-title shortcuts-title"},[f("h2",{id:"opsdash-shortcuts-title"},"Keyboard Shortcuts"),f("p",{class:"shortcuts-hint"},"Press Esc to close or ? to reopen.")],-1)),f("button",{type:"button",class:"close-btn shortcuts-close","aria-label":"Close shortcuts overlay",onClick:s},"  ")]),f("div",cv,[(b(!0),w(ve,null,Ce(l.groups,c=>(b(),w("section",{key:c.id,class:"shortcuts-group"},[f("h3",null,R(c.title),1),f("ul",null,[(b(!0),w(ve,null,Ce(c.items,d=>(b(),w("li",{key:d.id},[f("span",dv,[Oe(R(d.label)+" ",1),d.description?(b(),w("small",uv,R(d.description),1)):ne("",!0)]),f("span",fv,[(b(!0),w(ve,null,Ce(d.combo,(p,m)=>(b(),w("kbd",{key:m},R(p),1))),128))])]))),128))])]))),128))]),f("footer",gv,[Se(D(wt),{type:"primary",size:"small",onClick:s},{default:Qe(()=>[...i[1]||(i[1]=[Oe(" Close ",-1)])]),_:1})])],42,iv)])):ne("",!0)]),_:1}))}}),[["__scopeId","data-v-5510efeb"]]),DS="modulepreload",ES=function(e){return"/"+e},LS={},zt=function(t,a,o){let r=Promise.resolve();function n(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return r.then(s=>{for(const l of s||[])l.status==="rejected"&&n(l.reason);return t().catch(n)})};function hv(e,t){const a=JSON.parse(JSON.stringify(e||{}));return t==="month"&&(a.totalHours=xa(a.totalHours??0),a.categories=(a.categories||[]).map(o=>({...o,targetHours:xa(o.targetHours??0)}))),a}function mv(e){return{...e,ui:{...(e==null?void 0:e.ui)??{}}}}function vv(e,t){try{return uc({config:e,stats:t.stats,byDay:t.byDay||[],byCal:t.byCal||[],groupsById:t.groupsById||{},range:t.rangeMode==="month"?"month":"week",from:t.from||"",to:t.to||""})}catch(a){return console.error("[opsdash] targets widget local summary failed",a),dc(e)}}function Rt(e,t){if(!t)return e;const a=String(t).trim();return a?`${a}  ${e}`:e}function er(e,t){if(t!=null&&t!==""){const o=Number(t);if(Number.isFinite(o))return o}const a=Number(e);return Number.isFinite(a)?a:void 0}function gs(e){return Array.isArray(e)?Array.from(new Set(e.map(t=>Number(t)).filter(t=>Number.isInteger(t)&&t>0))):typeof e=="string"?gs(e.split(",")):[]}function wc(e){return Array.isArray(e)?e.map(t=>String(t).trim()).filter(Boolean):typeof e=="string"?e.split(",").map(t=>t.trim()).filter(Boolean):["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"]}function jt(e){switch(e){case"all":return"All cards";case"mine":return"Mine (any status)";case"open_all":return"Open  All";case"open_mine":return"Open  Mine";case"done_all":return"Done  All";case"done_mine":return"Done  Mine";case"archived_all":return"Archived  All";case"archived_mine":return"Archived  Mine";case"due_all":return"Due  All";case"due_mine":return"Due  Mine";case"due_today_all":return"Due today  All";case"due_today_mine":return"Due today  Mine";case"created_today_all":return"Created today  All";case"created_today_mine":return"Created today  Mine";case"created_range_all":return"Created this range  All";case"created_range_mine":return"Created this range  Mine";default:return e}}const bv=Pt(()=>zt(()=>Promise.resolve().then(()=>fw),void 0).then(e=>e.default)),kc="Balance Index",yv={component:bv,defaultLayout:{width:"half",height:"s",order:32},label:"Balance Index",baseTitle:kc,configurable:!0,supportsColors:!0,defaultOptions:(()=>{const e=ho();return{showTrend:!0,showMessages:!0,showConfig:!0,indexBasis:e.index.basis,noticeAbove:e.thresholds.noticeAbove,noticeBelow:e.thresholds.noticeBelow,warnAbove:e.thresholds.warnAbove,warnBelow:e.thresholds.warnBelow,warnIndex:e.thresholds.warnIndex,lookbackWeeks:e.trend.lookbackWeeks,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1}})(),controls:[{key:"showConfig",label:"Show config summary",type:"toggle"},{key:"showTrend",label:"Show trend",type:"toggle"},{key:"showMessages",label:"Show messages",type:"toggle"},{key:"lookbackWeeks",label:"Trend lookback (weeks)",type:"number",min:1,max:6,step:1},{key:"messageDensity",label:"Messages shown",type:"select",options:[{value:"few",label:"Few"},{value:"normal",label:"Normal"},{value:"many",label:"Many"}]},{key:"indexBasis",label:"Index basis",type:"select",options:[{value:"off",label:"Disabled"},{value:"category",label:"Total categories"},{value:"calendar",label:"Total calendars"},{value:"both",label:"Categories + calendars"}]},{key:"noticeAbove",label:"Notice above target",type:"number",min:0,max:1,step:.01},{key:"noticeBelow",label:"Notice below target",type:"number",min:0,max:1,step:.01},{key:"warnAbove",label:"Warn above target",type:"number",min:0,max:1,step:.01},{key:"warnBelow",label:"Warn below target",type:"number",min:0,max:1,step:.01},{key:"warnIndex",label:"Warn index",type:"number",min:0,max:1,step:.01},{key:"trendColor",label:"Trend color",type:"color"},{key:"showCurrent",label:"Show current period",type:"toggle"},{key:"reverseTrend",label:"Oldest first (reverse)",type:"toggle"},{key:"labelMode",label:"Trend label",type:"select",options:[{value:"date",label:"Date range"},{value:"period",label:"Week/Month"},{value:"offset",label:"Offset only"}]}],buildProps:(e,t)=>{var g,v,k,C,M,T,P,N,y,E,B,z,j,S,$,x,I,J,O,W,oe,V,q,Y,L,U,ee,se,K,Z,te,ge,pe,F,_;const a=t.balanceConfig?JSON.parse(JSON.stringify(t.balanceConfig)):ho(),o=ho(),r=((g=e.options)==null?void 0:g.showBadge)!==!1,n=((v=e.options)==null?void 0:v.showTrend)!==!1,s=((k=e.options)==null?void 0:k.showMessages)??((C=a.ui)==null?void 0:C.showMessages)??!0,l=((M=e.options)==null?void 0:M.messageDensity)||"normal",i=l==="few"?1:l==="many"?1/0:3,c=Number.isFinite((T=e.options)==null?void 0:T.lookbackWeeks)?Number((P=e.options)==null?void 0:P.lookbackWeeks):Number.isFinite(t.lookbackWeeks)?Number(t.lookbackWeeks):((N=o.trend)==null?void 0:N.lookbackWeeks)??3,d={noticeAbove:er((y=a==null?void 0:a.thresholds)==null?void 0:y.noticeAbove,(E=e.options)==null?void 0:E.noticeAbove),noticeBelow:er((B=a==null?void 0:a.thresholds)==null?void 0:B.noticeBelow,(z=e.options)==null?void 0:z.noticeBelow),warnAbove:er((j=a==null?void 0:a.thresholds)==null?void 0:j.warnAbove,(S=e.options)==null?void 0:S.warnAbove),warnBelow:er(($=a==null?void 0:a.thresholds)==null?void 0:$.warnBelow,(x=e.options)==null?void 0:x.warnBelow),warnIndex:er((I=a==null?void 0:a.thresholds)==null?void 0:I.warnIndex,(J=e.options)==null?void 0:J.warnIndex)},p=((O=e.options)==null?void 0:O.indexBasis)||((W=a==null?void 0:a.index)==null?void 0:W.basis)||"category",m=typeof((oe=e.options)==null?void 0:oe.trendColor)=="string"&&((V=e.options)!=null&&V.trendColor.trim())?e.options.trendColor.trim():"#2563EB",h=Number.isFinite((q=e.options)==null?void 0:q.loopbackCount)?Number((Y=e.options)==null?void 0:Y.loopbackCount):void 0,u=Number.isFinite(h)?Number(h):Number.isFinite(c)?Number(c):((L=o.trend)==null?void 0:L.lookbackWeeks)??4;return{overview:t.balanceOverview,targetsCategories:((U=t.targetsConfig)==null?void 0:U.categories)||[],rangeLabel:t.rangeLabel,showBadge:r,showTrend:n,showMessages:s,showHeader:((ee=e.options)==null?void 0:ee.showHeader)!==!1,showConfig:((se=e.options)==null?void 0:se.showConfig)!==!1,messageLimit:i,lookbackWeeks:u,loopbackCount:u,showCurrent:((K=e.options)==null?void 0:K.showCurrent)!==!1,labelMode:((Z=e.options)==null?void 0:Z.labelMode)||"period",reverseTrend:((te=e.options)==null?void 0:te.reverseTrend)===!0,indexBasis:p,thresholds:d,title:Rt(kc,(ge=e.options)==null?void 0:ge.titlePrefix),cardBg:((F=(pe=e.options)==null?void 0:pe.colors)==null?void 0:F.background)??((_=e.options)==null?void 0:_.cardBg),trendColor:m,from:t.from,to:t.to,rangeMode:t.rangeMode}}},wv=Pt(()=>zt(()=>Promise.resolve().then(()=>xw),void 0).then(e=>e.default)),_c="Category Mix Trend",kv={component:wv,defaultLayout:{width:"half",height:"m",order:47},label:"Category Mix Trend",baseTitle:_c,defaultOptions:{lookbackWeeks:3,density:"normal",labelMode:"period",colorMode:"hybrid",squareCells:!1,showHeader:!0,showBadge:!0},configurable:!0,controls:[{key:"lookbackWeeks",label:"Lookback (weeks)",type:"number",min:1,max:4,step:1},{key:"density",label:"Density",type:"select",options:[{value:"normal",label:"Normal"},{value:"dense",label:"Dense"}]},{key:"squareCells",label:"Square cells",type:"toggle"},{key:"labelMode",label:"History label",type:"select",options:[{value:"period",label:"Week/Month"},{value:"date",label:"Date range"},{value:"compact",label:"Compact (W-4)"},{value:"offset",label:"Offset only"},{value:"label",label:"Use server label"}]},{key:"colorMode",label:"Color mode",type:"select",options:[{value:"hybrid",label:"Hybrid (share + trend)"},{value:"share",label:"Share heatmap"},{value:"trend",label:"Trend only"}]},{key:"shareLowColor",label:"Share low",type:"color"},{key:"shareHighColor",label:"Share high",type:"color"},{key:"showBadge",label:"Show badge",type:"toggle"},{key:"toneLowColor",label:"Low color",type:"color"},{key:"toneHighColor",label:"High color",type:"color"}],buildProps:(e,t)=>{var a,o,r,n,s,l,i,c,d,p,m,h,u;return{overview:t.balanceOverview,rangeMode:t.rangeMode,rangeLabel:t.rangeLabel,from:t.from,to:t.to,lookbackWeeks:((a=e.options)==null?void 0:a.lookbackWeeks)??t.lookbackWeeks??3,showBadge:((o=e.options)==null?void 0:o.showBadge)??!0,showHeader:((r=e.options)==null?void 0:r.showHeader)!==!1,density:(n=e.options)==null?void 0:n.density,labelMode:(s=e.options)==null?void 0:s.labelMode,squareCells:((l=e.options)==null?void 0:l.squareCells)===!0,colorMode:(i=e.options)==null?void 0:i.colorMode,title:Rt(_c,(c=e.options)==null?void 0:c.titlePrefix),cardBg:(d=e.options)==null?void 0:d.cardBg,toneLowColor:(p=e.options)==null?void 0:p.toneLowColor,toneHighColor:(m=e.options)==null?void 0:m.toneHighColor,shareLowColor:(h=e.options)==null?void 0:h.shareLowColor,shareHighColor:(u=e.options)==null?void 0:u.shareHighColor}}},xc=["#2563eb","#f97316","#10b981","#a855f7","#ec4899","#14b8a6"];function ps(e){return xc[e%xc.length]||"#60a5fa"}function Zr(e){return e.slice().sort((t,a)=>{const o=Number((t==null?void 0:t.offset)??0),r=Number((a==null?void 0:a.offset)??0);return o-r})}function Xr(e,t){const a=String(t||"").toLowerCase()==="month"?"Month":"Week",o=Number((e==null?void 0:e.offset)??0),r=o===0?`Current ${a.toLowerCase()}`:`${a} -${o}`,n=String((e==null?void 0:e.from)??"").trim(),s=String((e==null?void 0:e.to)??"").trim();return n&&s?`${r} (${n} to ${s})`:n?`${r} (${n})`:r}function na(e){return Array.isArray(e)?e.map(t=>String(t??"").trim()).filter(Boolean):typeof e=="string"?e.split(",").map(t=>t.trim()).filter(Boolean):[]}function _v(e,t){if(!e||!Array.isArray(e.data))return null;if(!t.size)return e;const a=e.ids||[],o=e.labels||[],r=e.data||[],n=e.colors||[],s=a.map((l,i)=>t.has(String(l))?i:-1).filter(l=>l>=0);return s.length?{ids:s.map(l=>String(a[l]??"")),labels:s.map(l=>String(o[l]??"")),data:s.map(l=>Number(r[l]??0)),colors:s.map(l=>n[l])}:null}function tr(e,t){if(!e||!Array.isArray(e.series))return null;if(!t.size)return e;const a=e.series.filter(o=>t.has(String((o==null?void 0:o.id)??"")));return a.length?{labels:e.labels||[],series:a}:null}function ar(e,t,a,o){if(!e||!Array.isArray(e.series))return null;const r=e.labels||[],n=new Map;if(e.series.forEach(l=>{const i=String((l==null?void 0:l.id)??""),c=String((t==null?void 0:t[i])??"");if(!c||a.size&&!a.has(c))return;n.has(c)||n.set(c,Array.from({length:r.length},()=>0));const d=n.get(c),p=Array.isArray(l==null?void 0:l.data)?l.data:[];d&&r.forEach((m,h)=>{d[h]+=Math.max(0,Number(p[h]??0))})}),!n.size)return null;const s=Array.from(n.entries()).map(([l,i])=>({id:l,name:l,label:l,color:o==null?void 0:o[l],data:i}));return{labels:r,series:s}}function Qr(e){if(!e||!Array.isArray(e.series))return null;const t=e.labels||[],a=t.map((o,r)=>e.series.reduce((n,s)=>{var l;return n+Math.max(0,Number(((l=s==null?void 0:s.data)==null?void 0:l[r])??0))},0));return{labels:t,data:a}}function Cc(e){if(!e)return null;const t=em(),a=new Map;return t.forEach(o=>a.set(o,0)),e.labels.forEach((o,r)=>{const n=Cv(o);n&&a.set(n,(a.get(n)||0)+Math.max(0,Number(e.data[r]??0)))}),{labels:t,data:t.map(o=>a.get(o)||0)}}function xv(e,t,a){if(!Array.isArray(e)||!e.length)return null;const o=e.filter(r=>!r||!r.id?!1:t.size?t.has(String(r.id)):!0);return o.length?{ids:o.map(r=>String(r.id)),labels:o.map(r=>String(r.label??r.id)),data:o.map(r=>{var n;return Math.max(0,Number(((n=r.summary)==null?void 0:n.actualHours)??0))}),colors:o.map(r=>r.color||(a==null?void 0:a[String(r.id)]))}:null}function or(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const a=t.labels.map(g=>String(g??"")),o=t.series.map(g=>{const v=String((g==null?void 0:g.id)??"");return{...g,id:v,name:String((g==null?void 0:g.name)??(g==null?void 0:g.label)??v),color:String((g==null?void 0:g.color)??""),data:a.map((k,C)=>{var T;const M=Number(((T=g==null?void 0:g.data)==null?void 0:T[C])??0);return Number.isFinite(M)?Math.max(0,M):0})}}),r=Tv(e.forecastMode),n=Wt(new Date),s=a.map(g=>Sv.test(g)&&g>n),l=[];if(s.forEach((g,v)=>{g&&l.push(v)}),!l.length||r==="off")return{labels:a,series:o};const i=e.targetsConfig??ga(),c=Av(e.currentTargets),d=e.calendarCategoryMap??{},p=l.length,m=new Map;o.forEach(g=>{let v=0;g.data.forEach((k,C)=>{s[C]||(v+=Math.max(0,k))}),m.set(g.id,v)});const h=Array.from(m.values()).reduce((g,v)=>g+v,0),u=new Map;if(o.forEach(g=>{u.set(g.id,Mv(a.length))}),r==="total"){const g=Math.max(0,Number(i.totalHours??0)),v=Math.max(0,g-h);if(v>1e-4){const k=v/p,C=o.map(T=>T.id),M=Sc(C,m,c);C.forEach(T=>{const P=M[T]??0;if(P<=0)return;const N=u.get(T);N&&l.forEach(y=>{N[y]=en(k*P)})})}}else if(r==="calendar")o.forEach(g=>{const v=c[g.id]??0;if(v<=0)return;const k=Math.max(0,m.get(g.id)??0),C=Math.max(0,v-k);if(C<=1e-4)return;const M=C/p,T=u.get(g.id);T&&l.forEach(P=>{T[P]=en(M)})});else if(r==="category"){const g=new Set,v=Array.isArray(i.categories)?i.categories:[],k=new Map;v.forEach(M=>{k.set(String(M.id),Math.max(0,Number(M.targetHours??0)))});const C=new Map;o.forEach(M=>{const T=d==null?void 0:d[M.id],P=T?String(T):$v;C.has(P)||C.set(P,[]),C.get(P).push(M.id)}),C.forEach((M,T)=>{if(!M.length)return;const P=k.get(T)??0;if(P<=0)return;const N=M.reduce((j,S)=>j+Math.max(0,m.get(S)??0),0),y=Math.max(0,P-N);if(y<=1e-4)return;const E=y/p,B={};M.forEach(j=>{B[j]=c[j]??0});const z=Sc(M,m,B);M.forEach(j=>{const S=z[j]??0;if(S<=0)return;const $=u.get(j);$&&(l.forEach(x=>{$[x]=en(E*S)}),g.add(j))})}),o.forEach(M=>{if(g.has(M.id))return;const T=c[M.id]??0;if(T<=0)return;const P=Math.max(0,m.get(M.id)??0),N=Math.max(0,T-P);if(N<=1e-4)return;const y=N/p,E=u.get(M.id);E&&l.forEach(B=>{E[B]=en(y)})})}return o.forEach(g=>{const v=u.get(g.id);v&&v.some(k=>k>1e-4)&&(g.forecast=v)}),{labels:a,series:o}}function Cv(e){const t=It(String(e));if(!t)return null;const o=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getUTCDay()];return o?o==="Sun"?"Sun":o:null}const Sv=/^\d{4}-\d{2}-\d{2}$/,$v="__uncategorized__";function Tv(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function Mv(e){return Array.from({length:e},()=>0)}function en(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function Av(e){const t={};return e&&Object.entries(e).forEach(([a,o])=>{const r=Number(o);Number.isFinite(r)&&r>0&&(t[String(a)]=r)}),t}function Sc(e,t,a){const o={},r=e.reduce((l,i)=>l+Math.max(0,t.get(i)??0),0);if(r>1e-4)return e.forEach(l=>{const i=Math.max(0,t.get(l)??0);o[l]=i/r}),o;const n=e.reduce((l,i)=>l+Math.max(0,(a==null?void 0:a[i])??0),0);if(n>1e-4)return e.forEach(l=>{const i=Math.max(0,(a==null?void 0:a[l])??0);o[l]=i/n}),o;const s=e.length?1/e.length:0;return e.forEach(l=>{o[l]=s}),o}const Dv=Pt(()=>zt(()=>Promise.resolve().then(()=>Dw),void 0).then(e=>e.default)),$c="Day-of-Week Chart",Ev={component:Dv,defaultLayout:{width:"half",height:"m",order:84},label:"Day-of-Week Chart",baseTitle:$c,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLabels:!0,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var p,m,h,u,g,v,k,C,M,T,P;const a=((p=e.options)==null?void 0:p.scope)==="category"?"category":"calendar",o=new Set(na((m=e.options)==null?void 0:m.calendarFilter)),r=new Set(na((h=e.options)==null?void 0:h.categoryFilter)),n=t.categoryColorMap||{},l=(Number.isFinite(t.lookbackWeeks)?Math.max(1,Math.min(6,Number(t.lookbackWeeks))):1)>1&&Array.isArray((u=t.charts)==null?void 0:u.perDaySeriesByOffset)?t.charts.perDaySeriesByOffset:null;let i=null,c=null,d=[];if(l&&l.length){const N=Zr(l),y=[],E=[];d=[],N.forEach((B,z)=>{var W;const j={labels:B.labels||[],series:B.series||[]},S=or({perDaySeries:j,forecastMode:(W=e.options)==null?void 0:W.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),$=a==="category"?ar(S,t.calendarCategoryMap||{},r,n):tr(S,o),x=Qr($),I=Cc(x);if(!I)return;y.length||y.push(...I.labels||[]);const J=ps(z),O=Xr(B,t.rangeMode);E.push({id:`offset-${B.offset??z}`,name:O,label:O,color:J,data:I.data||[]}),d.push({id:`offset-${B.offset??z}`,label:O,color:J})}),c=y.length&&E.length?{labels:y,series:E}:null}else{const N=(g=t.charts)==null?void 0:g.perDaySeries,y=or({perDaySeries:N,forecastMode:(v=e.options)==null?void 0:v.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),E=a==="category"?ar(y,t.calendarCategoryMap||{},r,n):tr(y,o),B=Qr(E);i=Cc(B)}return{title:Rt($c,(k=e.options)==null?void 0:k.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(C=e.options)==null?void 0:C.cardBg,showHeader:((M=e.options)==null?void 0:M.showHeader)!==!1,showLabels:((T=e.options)==null?void 0:T.showLabels)!==!1,compact:((P=e.options)==null?void 0:P.compact)===!0,xLabel:"Weekday",yLabel:"Hours (h)",chartData:i,groupedData:c,legendItems:d}}},Lv=Pt(()=>zt(()=>Promise.resolve().then(()=>Vw),void 0).then(e=>e.default)),Tc="Time-of-Day Chart",Nv={component:Lv,defaultLayout:{width:"full",height:"l",order:86},label:"Time-of-Day Chart",baseTitle:Tc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showHint:!1,showLegend:!0,lookbackMode:"stacked",compact:!1},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"lookbackMode",label:"Lookback view",type:"select",options:[{value:"stacked",label:"Stacked weeks"},{value:"overlay",label:"Overlay stripes"}]},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showHint",label:"Show hint",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var d,p,m,h,u,g,v,k,C,M,T;const a=na((d=e.options)==null?void 0:d.calendarFilter),o=na((p=e.options)==null?void 0:p.categoryFilter),r=a.length>0||o.length>0,n=Number.isFinite(t.lookbackWeeks)?Math.max(1,Math.min(6,Number(t.lookbackWeeks))):1,s=n>1&&Array.isArray((m=t.charts)==null?void 0:m.hodByOffset)?t.charts.hodByOffset:null,i=(s?Zr(s):[]).map((P,N)=>{const y=ps(N);return{id:`offset-${P.offset??N}`,label:Xr(P,t.rangeMode),color:y,hod:{dows:P.dows||[],hours:P.hours||[],matrix:P.matrix||[]}}}),c=n>1&&((h=t.charts)!=null&&h.hodLookback)?t.charts.hodLookback:((u=t.charts)==null?void 0:u.hod)||null;return{title:Rt(Tc,(g=e.options)==null?void 0:g.titlePrefix),subtitle:r?"Filters currently not applied":void 0,cardBg:(v=e.options)==null?void 0:v.cardBg,showHeader:((k=e.options)==null?void 0:k.showHeader)!==!1,showHint:((C=e.options)==null?void 0:C.showHint)===!0,showLegend:((M=e.options)==null?void 0:M.showLegend)!==!1,lookbackMode:(T=e.options)==null?void 0:T.lookbackMode,lookbackWeeks:t.lookbackWeeks,rangeMode:t.rangeMode,hodData:c,lookbackEntries:i}}},Iv=Pt(()=>zt(()=>Promise.resolve().then(()=>Zw),void 0).then(e=>e.default)),Mc="Daily Chart",Ov={component:Iv,defaultLayout:{width:"half",height:"m",order:82},label:"Daily Chart",baseTitle:Mc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLabels:!1,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var d,p,m,h,u,g,v,k,C,M,T;const a=((d=e.options)==null?void 0:d.scope)==="category"?"category":"calendar",o=new Set(na((p=e.options)==null?void 0:p.calendarFilter)),r=new Set(na((m=e.options)==null?void 0:m.categoryFilter)),n=t.categoryColorMap||{},l=(Number.isFinite(t.lookbackWeeks)?Math.max(1,Math.min(6,Number(t.lookbackWeeks))):1)>1&&Array.isArray((h=t.charts)==null?void 0:h.perDaySeriesByOffset)?t.charts.perDaySeriesByOffset:null;let i=null,c=[];if(l&&l.length){const P=Zr(l),N=[],y=[],E=[];c=[],P.forEach((B,z)=>{var J;const j={labels:B.labels||[],series:B.series||[]},S=or({perDaySeries:j,forecastMode:(J=e.options)==null?void 0:J.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),$=a==="category"?ar(S,t.calendarCategoryMap||{},r,n):tr(S,o),x=Qr($);if(!x)return;const I=ps(z);N.push(...x.labels),y.push(...x.data),E.push(...x.data.map(()=>I)),c.push({id:`offset-${B.offset??z}`,label:Xr(B,t.rangeMode),color:I})}),i=N.length?{labels:N,data:y,colors:E}:null}else{const P=or({perDaySeries:(u=t.charts)==null?void 0:u.perDaySeries,forecastMode:(g=e.options)==null?void 0:g.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),N=a==="category"?ar(P,t.calendarCategoryMap||{},r,n):tr(P,o);i=Qr(N)}return{title:Rt(Mc,(v=e.options)==null?void 0:v.titlePrefix),subtitle:a==="category"?"Totals by category":"Totals by calendar",cardBg:(k=e.options)==null?void 0:k.cardBg,showHeader:((C=e.options)==null?void 0:C.showHeader)!==!1,showLabels:((M=e.options)==null?void 0:M.showLabels)===!0,compact:((T=e.options)==null?void 0:T.compact)===!0,xLabel:"Date",yLabel:"Hours (h)",chartData:i,legendItems:c}}},Bv=Pt(()=>zt(()=>Promise.resolve().then(()=>sk),void 0).then(e=>e.default)),Ac="Pie Chart",Pv={component:Bv,defaultLayout:{width:"half",height:"m",order:75},label:"Pie Chart",baseTitle:Ac,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLegend:!0,showLabels:!0,compact:!1},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var c,d,p,m,h,u,g,v,k,C;const a=((c=e.options)==null?void 0:c.scope)==="category"?"category":"calendar",o=new Set(na((d=e.options)==null?void 0:d.calendarFilter)),r=new Set(na((p=e.options)==null?void 0:p.categoryFilter)),n=t.colorsById||{},s=t.colorsByName||{},l=t.categoryColorMap||{},i=a==="category"?xv(t.calendarGroups||[],r,l):_v(((m=t.calendarChartData)==null?void 0:m.pie)||null,o);return{title:Rt(Ac,(h=e.options)==null?void 0:h.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(u=e.options)==null?void 0:u.cardBg,showHeader:((g=e.options)==null?void 0:g.showHeader)!==!1,compact:((v=e.options)==null?void 0:v.compact)===!0,showLegend:((k=e.options)==null?void 0:k.showLegend)!==!1,showLabels:((C=e.options)==null?void 0:C.showLabels)!==!1,chartData:i,colorsById:n,colorsByName:s}}},Fv=Pt(()=>zt(()=>Promise.resolve().then(()=>pk),void 0).then(e=>e.default)),Dc="Stacked Chart",Hv={component:Fv,defaultLayout:{width:"full",height:"l",order:80},label:"Stacked Chart",baseTitle:Dc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLegend:!0,showLabels:!1,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var i,c,d,p,m,h,u,g,v,k,C;const a=((i=e.options)==null?void 0:i.scope)==="category"?"category":"calendar",o=new Set(na((c=e.options)==null?void 0:c.calendarFilter)),r=new Set(na((d=e.options)==null?void 0:d.categoryFilter)),n=t.categoryColorMap||{},s=or({perDaySeries:(p=t.charts)==null?void 0:p.perDaySeries,forecastMode:(m=e.options)==null?void 0:m.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),l=a==="category"?ar(s,t.calendarCategoryMap||{},r,n):tr(s,o);return{title:Rt(Dc,(h=e.options)==null?void 0:h.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(u=e.options)==null?void 0:u.cardBg,showHeader:((g=e.options)==null?void 0:g.showHeader)!==!1,compact:((v=e.options)==null?void 0:v.compact)===!0,showLegend:((k=e.options)==null?void 0:k.showLegend)!==!1,showLabels:((C=e.options)==null?void 0:C.showLabels)===!0,stacked:l,colorsById:t.colorsById||{}}}},Wv=Pt(()=>zt(()=>Promise.resolve().then(()=>zk),void 0).then(e=>e.default)),Ec="Calendar Table",zv={component:Wv,defaultLayout:{width:"full",height:"l",order:70},label:"Calendar Table",baseTitle:Ec,configurable:!0,defaultOptions:{calendarFilter:[],compact:!1},dynamicControls:(e,t)=>[{key:"calendarFilter",label:"Calendars",type:"multiselect",options:Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(o=>({value:o.id,label:o.displayname||o.name||o.id})):[]},{key:"compact",label:"Compact",type:"toggle"}],buildProps:(e,t)=>{var n,s,l,i;const a=new Set(na((n=e.options)==null?void 0:n.calendarFilter)),o=Array.isArray(t.byCal)?t.byCal:[],r=a.size?o.filter(c=>a.has(String((c==null?void 0:c.id)??(c==null?void 0:c.calendar_id)??(c==null?void 0:c.calendar)??""))):o;return{title:Rt(Ec,(s=e.options)==null?void 0:s.titlePrefix),subtitle:a.size?"Filtered calendars":void 0,cardBg:(l=e.options)==null?void 0:l.cardBg,showHeader:((i=e.options)==null?void 0:i.showHeader)!==!1,rows:r,targets:t.currentTargets||{},groups:t.calendarGroups||[],todayHours:t.calendarTodayHours||{}}}},Rv=Pt(()=>zt(()=>Promise.resolve().then(()=>Yk),void 0).then(e=>e.default)),Lc="Time Off Trend",jv={component:Rv,defaultLayout:{width:"quarter",height:"s",order:45},label:"Time Off Trend",baseTitle:Lc,configurable:!0,defaultOptions:{lookback:3,showBadges:!0,labelMode:"period",toneLowColor:"#dc2626",toneHighColor:"#16a34a"},controls:[{key:"lookback",label:"Lookback (periods)",type:"number",min:1,max:6,step:1},{key:"showBadges",label:"Show badges",type:"toggle"},{key:"labelMode",label:"Trend label",type:"select",options:[{value:"date",label:"Date range"},{value:"period",label:"Week/Month"},{value:"offset",label:"Offset only"}]},{key:"toneLowColor",label:"Low color",type:"color"},{key:"toneHighColor",label:"High color",type:"color"}],buildProps:(e,t)=>{var a,o,r,n,s,l,i,c;return{trend:t.activityDayOffTrend,unit:t.activityTrendUnit??"wk",lookback:((a=e.options)==null?void 0:a.lookback)??t.activityDayOffLookback??3,showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,showBadges:((r=e.options)==null?void 0:r.showBadges)!==!1,labelMode:(n=e.options)==null?void 0:n.labelMode,title:Rt(Lc,(s=e.options)==null?void 0:s.titlePrefix),cardBg:(l=e.options)==null?void 0:l.cardBg,toneLowColor:(i=e.options)==null?void 0:i.toneLowColor,toneHighColor:(c=e.options)==null?void 0:c.toneHighColor}}};function Nc(e){const t=typeof e.title=="string"?e.title.trim():"";if(!t)return null;const o=(e.id!=null?String(e.id).trim():"")||Vv(t);return o?`tag_${o}`:null}function Ic(e){const t=new Map;return e.forEach(a=>{const o=new Set;(Array.isArray(a.labels)?a.labels:[]).forEach(n=>{const s=Nc(n),l=typeof n.title=="string"?n.title.trim():"";if(!s||!l||o.has(s))return;o.add(s);const i=t.get(s)||{label:l,count:0};i.count+=1,t.set(s,i)})}),Array.from(t.entries()).map(([a,o])=>({value:a,label:o.label,count:o.count})).sort((a,o)=>o.count-a.count||a.label.localeCompare(o.label))}function Uv(e,t){return(Array.isArray(e.labels)?e.labels:[]).some(o=>Nc(o)===t)}function Vv(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}const Kv=Pt(()=>zt(()=>Promise.resolve().then(()=>A_),void 0).then(e=>e.default)),Oc="Deck cards",qv={component:Kv,defaultLayout:{width:"half",height:"m",order:52},label:"Deck cards",baseTitle:Oc,configurable:!0,defaultOptions:{allowMine:!0,includeArchived:!0,includeCompleted:!0,autoScroll:!0,intervalSeconds:5,showCount:!0,autoTagsEnabled:!0,compactList:!1,customFilters:[],filters:["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],defaultFilter:"open_all",mineMode:"assignee"},controls:[{key:"boardIds",label:"Boards to include",type:"multiselect",options:[]},{key:"filters",label:"Filters to show",type:"multiselect",options:[]},{key:"autoTagsEnabled",label:"Auto tag filters",type:"toggle"},{key:"allowMine",label:"Allow mine filters",type:"toggle"},{key:"mineMode",label:"Mine mode",type:"select",options:[{value:"assignee",label:"Assignee"},{value:"creator",label:"Creator"},{value:"both",label:"Assignee + Creator"}]},{key:"includeArchived",label:"Include archived cards",type:"toggle"},{key:"includeCompleted",label:"Include completed cards",type:"toggle"},{key:"autoScroll",label:"Auto-scroll list",type:"toggle"},{key:"intervalSeconds",label:"Scroll every (s)",type:"number",min:3,max:10,step:1},{key:"showCount",label:"Show count pill",type:"toggle"},{key:"compactList",label:"Compact list",type:"toggle"},{key:"customFilters",label:"Custom filters",type:"filterbuilder"}],dynamicControls:(e,t)=>{var u;const o={key:"defaultFilter",label:"Default filter",type:"select",options:wc(e.filters??((u=e.defaultOptions)==null?void 0:u.filters)).map(g=>({value:g,label:jt(g)}))},r=[{value:"all",label:jt("all")},{value:"open_all",label:jt("open_all")},{value:"open_mine",label:jt("open_mine")},{value:"done_all",label:jt("done_all")},{value:"done_mine",label:jt("done_mine")},{value:"archived_all",label:jt("archived_all")},{value:"archived_mine",label:jt("archived_mine")},{value:"due_all",label:jt("due_all")},{value:"due_mine",label:jt("due_mine")},{value:"due_today_all",label:jt("due_today_all")},{value:"due_today_mine",label:jt("due_today_mine")},{value:"created_today_all",label:jt("created_today_all")},{value:"created_today_mine",label:jt("created_today_mine")}],n=Array.isArray(t.deckBoards)?t.deckBoards.map(g=>({value:g.id,label:g.title||`Board ${g.id}`})):[],s=Array.isArray(e.boardIds)?e.boardIds:gs(e.boardIds),l=e.includeArchived!==!1,i=e.includeCompleted!==!1,c=new Set(s.map(g=>Number(g)).filter(g=>Number.isInteger(g))),p=(Array.isArray(t.deckCards)?t.deckCards:[]).filter(g=>!(c.size&&!((g==null?void 0:g.boardId)!=null&&c.has(Number(g.boardId)))||!l&&(g==null?void 0:g.status)==="archived"||!i&&(g==null?void 0:g.status)==="done")),m=Ic(p),h=[];return e.autoTagsEnabled!==!1&&m.length&&h.push({key:"autoTagSelection",label:"Tag filters",type:"taglist",options:m,hint:"Uncheck tags to hide their filters. Counts reflect the current cards."}),[{key:"filters",label:"Filters",type:"multiselect",options:r},o,{key:"boardIds",label:"Boards",type:"multiselect",options:n},...h]},buildProps:(e,t)=>{var s,l,i,c,d,p,m,h,u,g,v,k,C,M,T,P,N,y,E,B,z,j;const a=wc(((s=e.options)==null?void 0:s.filters)??((i=(l=e.options)==null?void 0:l.defaultOptions)==null?void 0:i.filters)),o=Array.isArray((c=e.options)==null?void 0:c.boardIds)?e.options.boardIds:gs((d=e.options)==null?void 0:d.boardIds),r=a.includes((p=e.options)==null?void 0:p.defaultFilter)?(m=e.options)==null?void 0:m.defaultFilter:a[0]||"all",n=Gv((h=e.options)==null?void 0:h.customFilters);return{title:Rt(Oc,(u=e.options)==null?void 0:u.titlePrefix),cardBg:(g=e.options)==null?void 0:g.cardBg,cards:t.deckCards||[],rangeLabel:t.deckRangeLabel||t.rangeLabel||"",from:t.from,to:t.to,uid:t.uid,deckUrl:t.deckUrl,lastFetchedAt:t.deckRangeLabel,loading:t.deckLoading,error:t.deckError,boardIds:o,filters:a,defaultFilter:r,allowMine:((v=e.options)==null?void 0:v.allowMine)!==!1,mineMode:((k=e.options)==null?void 0:k.mineMode)||"assignee",includeArchived:((C=e.options)==null?void 0:C.includeArchived)!==!1,includeCompleted:((M=e.options)==null?void 0:M.includeCompleted)!==!1,autoScroll:((T=e.options)==null?void 0:T.autoScroll)!==!1,intervalSeconds:((P=e.options)==null?void 0:P.intervalSeconds)??5,showCount:((N=e.options)==null?void 0:N.showCount)!==!1,compactList:((y=e.options)==null?void 0:y.compactList)===!0,autoTagsEnabled:((E=e.options)==null?void 0:E.autoTagsEnabled)!==!1,autoTagSelection:Array.isArray((B=e.options)==null?void 0:B.autoTagSelection)?(z=e.options)==null?void 0:z.autoTagSelection:void 0,showHeader:((j=e.options)==null?void 0:j.showHeader)!==!1,customFilters:n,editable:t.isLayoutEditing===!0,onUpdateFilters:S=>{var $;return($=t.onUpdateWidgetOptions)==null?void 0:$.call(t,e.id,"filters",S)}}}};function Gv(e){let t=[];if(Array.isArray(e))t=e;else if(typeof e=="string"&&e.trim()!=="")try{const a=JSON.parse(e);Array.isArray(a)&&(t=a)}catch{t=[]}return t.map(a=>{if(!a||typeof a!="object")return null;const o=String(a.label||a.name||"").trim();if(!o)return null;const r=Jv(String(a.id||o)),n=Array.isArray(a.labelIds)?a.labelIds.map(i=>String(i).trim()).filter(Boolean):[],s=Array.isArray(a.labels)?a.labels.map(i=>String(i).trim()).filter(Boolean):[],l=Array.isArray(a.assignees)?a.assignees.map(i=>String(i).trim()).filter(Boolean):[];return{id:r,label:o,labelIds:n,labels:s,assignees:l}}).filter(Boolean)}function Jv(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}const Yv=Pt(()=>zt(()=>Promise.resolve().then(()=>R_),void 0).then(e=>e.default)),Bc="Notes",Zv={component:Yv,defaultLayout:{width:"half",height:"m",order:69},label:"Notes editor",baseTitle:Bc,configurable:!0,controls:[{key:"prevLabel",label:"Prev label",type:"text"},{key:"currLabel",label:"Current label",type:"text"}],buildProps:(e,t)=>{var a,o,r,n,s;return{title:Rt(Bc,(a=e.options)==null?void 0:a.titlePrefix),showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,cardBg:(r=e.options)==null?void 0:r.cardBg,prevLabel:((n=e.options)==null?void 0:n.prevLabel)||(t.notesLabelPrev??"Previous"),currLabel:((s=e.options)==null?void 0:s.currLabel)||(t.notesLabelCurr??"Current"),previous:t.notesPrev??"",history:t.notesHistory??[],modelValue:t.notesCurr??"",saving:t.isSavingNote??!1,onSave:t.onSaveNote,onUpdateModelValue:t.onUpdateNotes}}},Xv=Pt(()=>zt(()=>Promise.resolve().then(()=>K_),void 0).then(e=>e.default)),Pc="Note",Qv={component:Xv,defaultLayout:{width:"quarter",height:"s",order:68},label:"Notes snippet",baseTitle:Pc,configurable:!0,controls:[],buildProps:(e,t)=>{var a,o,r;return{notesCurr:t.notesCurr??"",notesPrev:t.notesPrev??"",title:Rt(Pc,(a=e.options)==null?void 0:a.titlePrefix),showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,cardBg:(r=e.options)==null?void 0:r.cardBg}}},eb=Pt(()=>zt(()=>Promise.resolve().then(()=>vx),void 0).then(e=>e.default)),Fc="Targets",tb={component:eb,defaultLayout:{width:"half",height:"m",order:18},label:"Targets",baseTitle:Fc,configurable:!0,defaultOptions:{showForecast:!0,showPace:!0,useLocalConfig:!1,localConfig:null},controls:[{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showDelta",label:"Show delta",type:"toggle"},{key:"showForecast",label:"Show forecast",type:"toggle"},{key:"showPace",label:"Show pace line",type:"toggle"},{key:"showToday",label:"Show today overlay",type:"toggle"},{key:"useLocalConfig",label:"Use custom targets for this widget",type:"toggle"},{key:"showTotalDelta",label:"Show total delta",type:"toggle"},{key:"showNeedPerDay",label:"Show need per day",type:"toggle"},{key:"showCategoryBlocks",label:"Show categories",type:"toggle"},{key:"badges",label:"Status badges",type:"toggle"},{key:"includeWeekendToggle",label:"Weekend toggle",type:"toggle"},{key:"includeZeroDaysInStats",label:"Include zero days in pace",type:"toggle"}],buildProps:(e,t)=>{var i,c,d,p,m,h,u,g,v,k,C;const a=!!((i=e.options)!=null&&i.useLocalConfig),o=a&&((c=e.options)!=null&&c.localConfig)?JSON.parse(JSON.stringify(e.options.localConfig)):t.targetsConfig?JSON.parse(JSON.stringify(t.targetsConfig)):ga(),r=mv(hv(o,t.rangeMode)),n=(M,T)=>{var P;((P=e.options)==null?void 0:P[M])!==void 0&&T(!!e.options[M])};n("showTotalDelta",M=>{r.ui.showTotalDelta=M}),n("showNeedPerDay",M=>{r.ui.showNeedPerDay=M}),n("showCategoryBlocks",M=>{r.ui.showCategoryBlocks=M}),n("badges",M=>{r.ui.badges=M}),n("includeWeekendToggle",M=>{r.ui.includeWeekendToggle=M}),n("includeZeroDaysInStats",M=>{r.includeZeroDaysInStats=M});const s=a&&t.stats?vv(r,t):t.targetsSummary??t.summary,l=a?null:((d=e.props)==null?void 0:d.groups)??t.groups;return{summary:s,config:r,groups:l,showHeader:((p=e.options)==null?void 0:p.showHeader)!==!1,showLegend:((m=e.options)==null?void 0:m.showLegend)!==!1,showDelta:((h=e.options)==null?void 0:h.showDelta)!==!1,showForecast:((u=e.options)==null?void 0:u.showForecast)!==!1,showPace:((g=e.options)==null?void 0:g.showPace)!==!1,showToday:((v=e.options)==null?void 0:v.showToday)!==!1,title:Rt(Fc,(k=e.options)==null?void 0:k.titlePrefix),cardBg:(C=e.options)==null?void 0:C.cardBg}}};function Hc(e){var l;const t=e.basis||"category";if(t==="off")return 0;const a={},o=(l=e.targets)!=null&&l.length?e.targets.reduce((i,c)=>i+(c.targetHours??0),0):0;t!=="calendar"&&o>0&&e.targets.forEach(i=>{const c=(i.targetHours??0)/o;a[i.id]=c});const r=new Set;if(Object.keys(e.shares||{}).forEach(i=>r.add(i)),Object.keys(a).forEach(i=>r.add(i)),r.size===0)return 0;let n=0;r.forEach(i=>{var m;const c=Number(((m=e.shares)==null?void 0:m[i])??0),d=t==="calendar"?1/r.size:a[i]??0,p=Math.abs(c-d);p>n&&(n=p)});const s=1-n;return Math.max(0,Math.min(1,Number(s.toFixed(2))))}const ab=Pt(()=>zt(()=>Promise.resolve().then(()=>nC),void 0).then(e=>e.default)),Wc="Time Summary",ob={component:ab,defaultLayout:{width:"half",height:"s",order:9},label:"Time Summary",baseTitle:Wc,configurable:!0,defaultOptions:{...ga().timeSummary,mode:"active",showHistory:!0,historyView:"list",showActivityDetails:!0},controls:[{key:"mode",label:"Average mode",type:"select",options:[{value:"active",label:"Active days"},{value:"all",label:"All days"}]},{key:"showHistory",label:"Show history",type:"toggle"},{key:"historyView",label:"History layout",type:"select",options:[{value:"list",label:"List"},{value:"pills",label:"Pills"}]},{key:"showActivityDetails",label:"Activity details",type:"toggle"},{key:"showTotal",label:"Total hours",type:"toggle"},{key:"showAverage",label:"Average per day",type:"toggle"},{key:"showMedian",label:"Median per day",type:"toggle"},{key:"showBusiest",label:"Busiest day",type:"toggle"},{key:"showWorkday",label:"Workdays row",type:"toggle"},{key:"showWeekend",label:"Weekend row",type:"toggle"},{key:"showWeekendShare",label:"Weekend share",type:"toggle"},{key:"showCalendarSummary",label:"Top calendars",type:"toggle"},{key:"showTopCategory",label:"Top category",type:"toggle"},{key:"showBalance",label:"Balance index",type:"toggle"}],buildProps:(e,t)=>{var p,m,h,u,g,v,k,C,M,T,P;const a=t.targetsConfig?JSON.parse(JSON.stringify(t.targetsConfig)):ga(),o={...a,timeSummary:{...a.timeSummary}},r=String(t.rangeMode||"week").toLowerCase()==="month"?"month":"week",n=((p=e.options)==null?void 0:p.mode)??t.activeDayMode??"active",s=((m=e.options)==null?void 0:m.showHistory)!==!1,l=((h=e.options)==null?void 0:h.historyView)==="pills"?"pills":"list",i=((u=e.options)==null?void 0:u.showActivityDetails)!==!1,c=N=>{var y;((y=e.options)==null?void 0:y[N])!==void 0&&(o.timeSummary[N]=!!e.options[N])};["showTotal","showAverage","showMedian","showBusiest","showWorkday","showWeekend","showWeekendShare","showCalendarSummary","showTopCategory","showBalance"].forEach(c);const d=s&&Number(t.lookbackWeeks)>1?rb({mode:n,rangeMode:r,lookbackWeeks:Number(t.lookbackWeeks),perDaySeriesByOffset:(g=t.charts)==null?void 0:g.perDaySeriesByOffset,hodByOffset:(v=t.charts)==null?void 0:v.hodByOffset,summaryByOffset:(k=t.charts)==null?void 0:k.summaryByOffset,targetsConfig:nb(o,r),calendarCategoryMap:t.calendarCategoryMap||{},calendarGroups:Array.isArray(t.calendarGroups)?t.calendarGroups:[],categoryColorMap:t.categoryColorMap||{}}):[];return{summary:t.summary,activitySummary:t.activitySummary,mode:n,config:o.timeSummary,todayGroups:((C=e.props)==null?void 0:C.todayGroups)??t.groups,title:Rt(Wc,(M=e.options)==null?void 0:M.titlePrefix),cardBg:(T=e.options)==null?void 0:T.cardBg,rangeMode:t.rangeMode,rangeStart:t.from,rangeEnd:t.to,offset:t.offset,showHeader:((P=e.options)==null?void 0:P.showHeader)!==!1,showHistory:s,historyView:l,showActivityDetails:i,history:d}}};function rb(e){const t=Array.isArray(e.perDaySeriesByOffset)?e.perDaySeriesByOffset:[];if(!t.length)return[];const a=Array.isArray(e.hodByOffset)?e.hodByOffset:[],o=Array.isArray(e.summaryByOffset)?e.summaryByOffset:[],r=new Map;t.forEach(d=>{const p=Number((d==null?void 0:d.offset)??0);Number.isFinite(p)&&r.set(p,d)});const n=new Map;a.forEach(d=>{const p=Number((d==null?void 0:d.offset)??0);Number.isFinite(p)&&n.set(p,d)});const s=new Map;o.forEach(d=>{const p=Number((d==null?void 0:d.offset)??0);Number.isFinite(p)&&s.set(p,d)});const l=Math.max(0,Math.min(6,Math.floor(e.lookbackWeeks)-1));if(l<=0)return[];const i=Zr(t).map(d=>Number((d==null?void 0:d.offset)??0)).filter(d=>Number.isFinite(d)&&d>0&&d<=l),c=new Map;return e.calendarGroups.forEach(d=>{const p=String((d==null?void 0:d.id)??"").trim();p&&c.set(p,String((d==null?void 0:d.label)??p))}),e.targetsConfig.categories.forEach(d=>{const p=String((d==null?void 0:d.id)??"").trim();p&&!c.has(p)&&c.set(p,String((d==null?void 0:d.label)??p))}),i.map(d=>{const p=r.get(d);if(!p)return null;const m=sb(p),h=s.get(d),u=n.get(d),g=Kt(m.totalHours),v=Number((h==null?void 0:h.events)??(h==null?void 0:h.eventsCount)??0)||0,k=Number((h==null?void 0:h.overlap_events)??(h==null?void 0:h.overlapEvents)??0)||0,C=Number((h==null?void 0:h.longest_session)??(h==null?void 0:h.longestSession)??0)||0,M=zc((h==null?void 0:h.earliest_start)??(h==null?void 0:h.earliestStart)),T=zc((h==null?void 0:h.latest_end)??(h==null?void 0:h.latestEnd)),P=u?lb(u,g):null,N=m.activeDays,y=Kt(hs(m.filteredTotals(e.mode))),E=Kt(ms(m.filteredTotals(e.mode))),B=v>0?Kt(g/v):0,z=Kt(hs(m.filteredWorkdayTotals(e.mode))),j=Kt(ms(m.filteredWorkdayTotals(e.mode))),S=Kt(hs(m.filteredWeekendTotals(e.mode))),$=Kt(ms(m.filteredWeekendTotals(e.mode))),x=(P==null?void 0:P.weekendShare)??m.weekendShare,I=ib(m.calendarTotals,g),J=cb({calendarTotals:m.calendarTotals,categoryLabelById:c,categoryColorMap:e.categoryColorMap,calendarCategoryMap:e.calendarCategoryMap,targetsConfig:e.targetsConfig}),O=db({totalHours:g,calendarTotals:m.calendarTotals,calendarCategoryMap:e.calendarCategoryMap,targetsConfig:e.targetsConfig});return{offset:d,label:Xr({offset:d,from:p==null?void 0:p.from,to:p==null?void 0:p.to},e.rangeMode),rangeStart:String((p==null?void 0:p.from)??""),rangeEnd:String((p==null?void 0:p.to)??""),totalHours:g,avgDay:y,avgEvent:B,medianDay:E,busiest:m.busiest,workdayAvg:z,workdayMedian:j,weekendAvg:S,weekendMedian:$,weekendShare:x,activeCalendars:m.activeCalendars,calendarSummary:I,topCategory:J,balanceIndex:O,activity:{events:v,activeDays:N,typicalStart:(P==null?void 0:P.typicalStart)??null,typicalEnd:(P==null?void 0:P.typicalEnd)??null,weekendShare:(P==null?void 0:P.weekendShare)??null,eveningShare:(P==null?void 0:P.eveningShare)??null,earliestStart:M,latestEnd:T,overlapEvents:k,longestSession:Kt(C),lastDayOff:m.lastDayOff,lastHalfDayOff:m.lastHalfDayOff}}}).filter(d=>!!d)}function nb(e,t){const a=JSON.parse(JSON.stringify(e));return t==="month"&&(a.totalHours=xa(a.totalHours),a.categories=a.categories.map(o=>({...o,targetHours:xa(o.targetHours)}))),a}function sb(e){const t=Array.isArray(e==null?void 0:e.labels)?e.labels.map(u=>String(u??"")):[],a=Array.isArray(e==null?void 0:e.series)?e.series:[],o=t.map((u,g)=>a.reduce((v,k)=>{var M;const C=Number(((M=k==null?void 0:k.data)==null?void 0:M[g])??0);return v+(Number.isFinite(C)?Math.max(0,C):0)},0)),r=a.map(u=>{const g=String((u==null?void 0:u.id)??""),v=String((u==null?void 0:u.name)??(u==null?void 0:u.label)??g),k=Array.isArray(u==null?void 0:u.data)?u.data.reduce((C,M)=>{const T=Number(M??0);return C+(Number.isFinite(T)?Math.max(0,T):0)},0):0;return{id:g,name:v,total:Kt(k),color:u!=null&&u.color?String(u.color):void 0}}),n=o.reduce((u,g)=>u+g,0),s=r.filter(u=>u.total>0).length,l=(()=>{if(!t.length)return null;let u=-1,g=-1;return o.forEach((v,k)=>{v>u&&(u=v,g=k)}),g<0||u<=0?null:{date:t[g],hours:Kt(u)}})(),i=[],c=[];o.forEach((u,g)=>{const v=ub(t[g]);v!=null&&(v===0||v===6?c.push(u):i.push(u))});const d=n>0?rr(c.reduce((u,g)=>u+g,0)/n*100):null,{lastDayOff:p,lastHalfDayOff:m}=fb(t,o),h=o.filter(u=>u>.01).length;return{labels:t,totals:o,totalHours:n,activeCalendars:s,busiest:l,workdayTotals:i,weekendTotals:c,weekendShare:d,lastDayOff:p,lastHalfDayOff:m,activeDays:h,filteredTotals:u=>u==="active"?o.filter(g=>g>0):o,filteredWorkdayTotals:u=>u==="active"?i.filter(g=>g>0):i,filteredWeekendTotals:u=>u==="active"?c.filter(g=>g>0):c,calendarTotals:r}}function lb(e,t){const a=Array.isArray(e==null?void 0:e.dows)?e.dows.map(h=>String(h??"")):[],o=Array.isArray(e==null?void 0:e.matrix)?e.matrix:[],r=new Map;a.forEach((h,u)=>{const g=Array.isArray(o[u])?o[u]:[];r.set(h,g.map(v=>Number(v??0)))});const n=Array.from({length:24},(h,u)=>Array.from(r.values()).reduce((g,v)=>g+Number(v[u]??0),0)),s=.25;let l=null,i=null;for(let h=0;h<24;h+=1)if(n[h]>=s){l=`${String(h).padStart(2,"0")}:00`;break}for(let h=23;h>=0;h-=1)if(n[h]>=s){i=`${String(h+1).padStart(2,"0")}:00`;break}const c=(r.get("Sat")||[]).reduce((h,u)=>h+Number(u??0),0)+(r.get("Sun")||[]).reduce((h,u)=>h+Number(u??0),0);let d=0;r.forEach(h=>{for(let u=18;u<24;u+=1)d+=Number(h[u]??0)});const p=t>0?rr(c/t*100):null,m=t>0?rr(d/t*100):null;return{typicalStart:l,typicalEnd:i,weekendShare:p,eveningShare:m}}function ib(e,t){return t<=0?"":e.slice().sort((o,r)=>r.total-o.total).filter(o=>o.total>0).slice(0,3).map(o=>`${o.name} ${rr(o.total/t*100)}%`).join(", ")}function cb(e){var l;const t=new Map;if(e.calendarTotals.forEach(i=>{var d;const c=String(((d=e.calendarCategoryMap)==null?void 0:d[i.id])??"");c&&t.set(c,(t.get(c)||0)+i.total)}),!t.size)return null;let a="",o=-1;if(t.forEach((i,c)=>{i>o&&(o=i,a=c)}),!a)return null;const r=e.targetsConfig.categories.find(i=>String(i.id)===a),n=Number((r==null?void 0:r.targetHours)??0)||0,s=n>0?rr(o/n*100):0;return{label:e.categoryLabelById.get(a)||a,actualHours:Kt(o),targetHours:Kt(n),percent:s,color:(l=e.categoryColorMap)==null?void 0:l[a]}}function db(e){var o,r;if(e.totalHours<=0)return null;const t=((r=(o=e.targetsConfig.balance)==null?void 0:o.index)==null?void 0:r.basis)||"category";if(t==="off")return null;const a={};if(t==="calendar")e.calendarTotals.forEach(n=>{n.total<=0||(a[n.id]=n.total/e.totalHours)});else{const n=new Map;e.calendarTotals.forEach(s=>{var i;const l=String(((i=e.calendarCategoryMap)==null?void 0:i[s.id])??"");l&&n.set(l,(n.get(l)||0)+s.total)}),n.forEach((s,l)=>{s<=0||(a[l]=s/e.totalHours)})}return Object.keys(a).length?Hc({shares:a,targets:e.targetsConfig.categories,basis:t}):null}function hs(e){return e.length?e.reduce((t,a)=>t+a,0)/e.length:0}function ms(e){if(!e.length)return 0;const t=[...e].sort((o,r)=>o-r),a=Math.floor(t.length/2);return t.length%2?t[a]:(t[a-1]+t[a])/2}function ub(e){if(!e)return null;const t=It(e);return t?t.getUTCDay():null}function fb(e,t){let a=null,o=null;const r=4;for(let n=e.length-1;n>=0;n-=1){const s=t[n]??0;if(!a&&s<=.01&&(a=e[n]),!o&&s>.01&&s<=r&&(o=e[n]),a&&o)break}return{lastDayOff:a,lastHalfDayOff:o}}function rr(e){return Math.round(e*10)/10}function Kt(e){return Math.round(e*100)/100}function zc(e){if(e==null)return null;const t=String(e).trim();return t||null}let Rc=null;function jc(e){const t=gb(e);t&&(Rc=t)}function Uc(e){const t=Rc;if(!t)return[];const a=t[e]||[];return pb(a)}function Vc(e){return{tabs:[{id:"tab-1",label:"Overview",widgets:Uc(e)}],defaultTabId:"tab-1"}}function gb(e){if(!e||typeof e!="object")return null;const t=e,a=["quick","standard","pro"],o={};for(const r of a){const n=t[r];o[r]=Array.isArray(n)?n:[]}return o}function pb(e){return JSON.parse(JSON.stringify(e||[]))}const vo={time_summary_v2:ob,targets_v2:tb,balance_index:yv,dayoff_trend:jv,category_mix_trend:kv,chart_pie:Pv,chart_stacked:Hv,chart_per_day:Ov,chart_dow:Ev,chart_hod:Nv,calendar_table:zv,deck_cards:qv,note_snippet:Qv,note_editor:Zv};function Kc(e,t){if(!Array.isArray(e))return t;const a=[];return e.forEach((o,r)=>{const n=String((o==null?void 0:o.type)??"");if(!n)return;const s=vo[n];if(!s)return;const l=String((o==null?void 0:o.id)??"")||`widget-${n}-${r+1}`,i=(o==null?void 0:o.layout)??{},c=i.width==="quarter"||i.width==="half"?i.width:"full",d=i.height==="s"||i.height==="l"||i.height==="xl"?i.height:"m",p=Number(i.order??0),h={...s.defaultOptions||{},...o!=null&&o.options&&typeof o.options=="object"?o.options:{}};h.scale==null&&h.textSize!=null&&(h.scale=h.textSize,delete h.textSize),a.push({id:l,type:n,options:h,layout:{width:c,height:d,order:Number.isFinite(p)?p:0},version:Number((o==null?void 0:o.version)??1)||1})}),a.length?a:t}function qc(){return Gc("standard")}function tn(e){return Vc(e)}function nr(e,t){var i,c,d,p;if(Array.isArray(e)){const m=Kc(e,((i=t.tabs[0])==null?void 0:i.widgets)||qc()),h=((c=t.tabs[0])==null?void 0:c.id)||"tab-1";return{tabs:[{id:h,label:((d=t.tabs[0])==null?void 0:d.label)||"Overview",widgets:m}],defaultTabId:h}}if(!e||typeof e!="object")return t;const a=Array.isArray(e.tabs)?e.tabs:[],o=t.tabs||[],r=a.map((m,h)=>{var M,T;const u=String((m==null?void 0:m.id)??"").trim()||`tab-${h+1}`,g=String((m==null?void 0:m.label)??"").trim(),v=g?g.slice(0,48):`Tab ${h+1}`,k=((M=o[h])==null?void 0:M.widgets)||((T=o[0])==null?void 0:T.widgets)||qc(),C=Kc(m==null?void 0:m.widgets,k);return{id:u,label:v,widgets:C}}),n=r.length?r:o,s=String(e.defaultTabId??e.defaultTab??e.active??""),l=n.some(m=>m.id===s)?s:((p=n[0])==null?void 0:p.id)||"tab-1";return{tabs:n,defaultTabId:l}}function hb(e,t){const a=t.hasInitialLoad===!1||!!t.isLoading;return e.type==="deck_cards"?a||!!t.deckLoading:a}function mb(e,t){const a=vo[e.type];if(!a)return null;const o=a.buildProps(e,t)||{},r=hb(e,t);return{component:a.component,props:o,loading:r}}function Gc(e){return Uc(e)}const vb=["draggable","aria-busy","onClick","onDragstart"],bb={key:0,class:"widget-loading","aria-live":"polite"},yb=et(Le({__name:"DashboardGrid",props:{ordered:{},editable:{type:Boolean},selectedId:{},widgetTypeList:{}},emits:["select","add","reorder","select-cell"],setup(e,{emit:t}){const a=e,o=t,r=le(null),n=le(null),s=le(null),l=A(()=>a.widgetTypeList||[]),i=A(()=>{const y=[];let E={items:[],col:1,remaining:4};const B=()=>{E.items.length&&y.push({items:E.items}),E={items:[],col:1,remaining:4}};return a.ordered.forEach(z=>{const j=d(z.layout.width);j>E.remaining&&B();const S=E.col;E.items.push({...z,span:j,start:S}),E.col+=j,E.remaining-=j}),B(),y});function c(y){switch(y){case"quarter":return"w-quarter";case"half":return"w-half";default:return"w-full"}}function d(y){return y==="quarter"?1:y==="half"?2:4}function p(y){switch(y){case"s":return"h-s";case"l":return"h-l";case"xl":return"h-xl";default:return"h-m"}}function m(y){const E=(y==null?void 0:y.scale)||(y==null?void 0:y.textSize)||"md";return E==="sm"?"scale-sm":E==="lg"?"scale-lg":E==="xl"?"scale-xl":"scale-md"}function h(y){const E=(y==null?void 0:y.scale)||(y==null?void 0:y.textSize)||"md",B=E==="sm"?.85:E==="lg"?1.35:E==="xl"?1.6:1.1,z=y!=null&&y.dense?.72:1,j=B*z,S=18*B;return{"--widget-scale":String(B),"--widget-space":String(j),"--widget-density":String(z),"--widget-title-size":`${S}px`}}function u(y){const E=r.value;if(!E)return{row:0,col:1};const B=E.getBoundingClientRect(),z=12,S=(B.width-z*3)/4,$=Math.max(0,Math.min(B.width,y.clientX-B.left)),x=Math.min(3,Math.max(0,Math.floor($/(S+z))))+1,I=Math.max(0,Math.min(B.height+400,y.clientY-B.top)),J=Number.parseFloat(getComputedStyle(E).getPropertyValue("--grid-row"))||24;return{row:Math.max(0,Math.floor(I/(J+z))),col:x}}function g(y,E){var x,I,J,O;const B=i.value,z=B[y]||B[B.length-1]||{items:[]},j=[...z.items||[]].filter(W=>W.start<E).sort((W,oe)=>W.start-oe.start).pop(),S=[...z.items||[]].filter(W=>W.start>=E).sort((W,oe)=>W.start-oe.start)[0];if(j&&S)return(j.layout.order+S.layout.order)/2;if(j)return(j.layout.order||0)+5;if(S)return(S.layout.order||0)-5;const $=B[y-1]||B[B.length-1];return $&&$.items.length?($.items[$.items.length-1].layout.order||0)+10:((((O=(J=(I=(x=B[0])==null?void 0:x.items)==null?void 0:I[0])==null?void 0:J.layout)==null?void 0:O.order)??0)||0)-10}function v(y){if(!a.editable||!l.value.length)return;const{row:E,col:B}=u(y),z=g(E,B);o("select-cell",z)}function k(y){a.editable&&(y.target.closest(".layout-item")||v(y))}function C(y){a.editable&&(y.target.closest(".layout-item")||v(y))}function M(y){if(!a.editable||!n.value)return;const{row:E,col:B}=u(y);s.value=g(E,B)}function T(){if(!a.editable||!n.value)return;const y=n.value,E=s.value??void 0;n.value=null,s.value=null,o("reorder",y,E)}function P(y){a.editable&&(n.value=y,s.value=null)}function N(){n.value=null,s.value=null}return(y,E)=>(b(),w("div",{ref_key:"gridEl",ref:r,class:Ee(["layout-grid",{"show-guides":y.editable}]),onClick:k,onContextmenu:ut(C,["prevent"]),onDragover:ut(M,["prevent"]),onDrop:ut(T,["prevent"])},[(b(!0),w(ve,null,Ce(y.ordered,B=>(b(),w("div",{key:B.id,class:Ee(["layout-item",[c(B.layout.width),p(B.layout.height),m(B.options),{"is-editable":y.editable,"is-selected":y.editable&&y.selectedId===B.id,"is-dragging":y.editable&&n.value===B.id,"is-loading":!!B.loading}]]),style:De(h(B.options)),draggable:y.editable,"aria-busy":B.loading?"true":"false",onClick:ut(z=>o("select",B.id),["stop"]),onDragstart:z=>P(B.id),onDragend:N},[B.loading?(b(),w("div",bb,[...E[0]||(E[0]=[f("span",{class:"widget-loading__spinner","aria-hidden":"true"},null,-1),f("span",{class:"widget-loading__label"},"Loading",-1)])])):ne("",!0),(b(),it(zu(B.component),$i({ref_for:!0},B.props),null,16))],46,vb))),128))],34))}}),[["__scopeId","data-v-9017abee"]]),wb={key:0,class:"options-pop"},kb={class:"opt-section"},_b=["for"],xb=["id","min","max","step","value","onInput"],Cb=["id","value","onChange"],Sb=["value"],$b=["id","checked","onChange"],Tb=["id","value","onInput"],Mb=["id","value","onInput"],Ab={key:0,class:"opt-section"},Db=["for"],Eb=["id","min","max","step","value","onInput"],Lb=["id","value","onChange"],Nb=["value"],Ib=["id","checked","onChange"],Ob=["id","value","onInput"],Bb=["id","value","onInput"],Pb={key:5,class:"colorlist"},Fb=["value","onInput"],Hb=["onClick"],Wb={key:6,class:"multi"},zb=["value","checked","onChange"],Rb={key:7,class:"taglist"},jb={key:0,class:"taglist__hint"},Ub={key:1,class:"taglist__hint"},Vb={class:"taglist__meta"},Kb=["value","checked","onChange"],qb={class:"taglist__label"},Gb={key:0,class:"taglist__count"},Jb=["id","value","onInput"],Yb={key:9,class:"filter-builder"},Zb=["value","onInput"],Xb=["value","onInput"],Qb=["value","onInput"],ey=["onClick"],ty=["onClick"],ay={key:1,class:"opt-row opt-row--footer"},oy=et(Le({__name:"WidgetOptionsMenu",props:{entry:{},options:{},open:{type:Boolean},showAdvanced:{type:Boolean},context:{}},emits:["change","toggle","open-advanced"],setup(e,{emit:t}){const a=e,o=t,r=le({}),n=[{key:"titlePrefix",label:"Title prefix",type:"text"},{key:"showHeader",label:"Show title",type:"toggle"},{key:"cardBg",label:"Card background",type:"color",hint:"Pick a card fill; leave empty for default."},{key:"scale",label:"Scale",type:"select",options:[{value:"sm",label:"Small"},{value:"md",label:"Normal"},{value:"lg",label:"Large"},{value:"xl",label:"Extra large"}]},{key:"dense",label:"Dense mode",type:"toggle"}],s=A(()=>{var J,O;const S=new Set(n.map(W=>W.key)),$=((J=a.entry)==null?void 0:J.controls)||[],x=typeof((O=a.entry)==null?void 0:O.dynamicControls)=="function"?a.entry.dynamicControls(a.options||{},a.context||{}):[];return[...$,...x].filter(W=>!S.has(W.key))});$e(()=>a.options,S=>{var x;const $=((x=a.entry)==null?void 0:x.defaultOptions)||{};r.value={...$,...S||{}}},{immediate:!0,deep:!0});const l=A({get:()=>!!a.open,set:S=>o("toggle",S)});function i(S,$){const x=Number($.target.value);o("change",S,x)}function c(S,$){const x=$.target.value;o("change",S,x)}function d(S,$){const x=$.target.checked;o("change",S,x)}function p(S,$){const x=$.target.value;o("change",S,x)}function m(S,$,x){const I=x.target.checked,J=Array.isArray(r.value[S])?[...r.value[S]]:[],O=new Set(J);I?O.add($):O.delete($),o("change",S,Array.from(O))}function h(S){return Array.isArray(S==null?void 0:S.options)?S.options.map($=>String(($==null?void 0:$.value)??"")).filter(Boolean):[]}function u(S,$){const x=k(S.key);return(Array.isArray(x)?x.map(J=>String(J)):h(S)).includes(String($))}function g(S){return!Array.isArray(k(S.key))}function v(S,$,x){const I=x.target.checked,J=h(S),O=k(S.key),W=Array.isArray(O)?O.map(Y=>String(Y)):J,oe=new Set(W),V=String($);I?oe.add(V):oe.delete(V);const q=J.filter(Y=>oe.has(Y));o("change",S.key,q)}function k(S){if(S==="scale")return r.value.scale??r.value.textSize;if(!S.includes("."))return r.value[S];const $=S.split(".");let x=r.value;for(const I of $){if(x==null)return;x=x[I]}return x}function C(S){const $=k(S);return Array.isArray($)&&$.length?$:typeof $=="string"&&$.trim()?$.split(",").map(x=>x.trim()).filter(Boolean):P.slice(0,5)}function M(S,$,x){const I=x.target.value,J=[...C(S)];J[$]=I,o("change",S,J)}function T(S){const $=[...C(S),"#cccccc"];o("change",S,$)}const P=["#2563EB","#F97316","#10B981","#A855F7","#EC4899"];function N(S){const $=k(S);if(Array.isArray($))return $.map(x=>({label:String((x==null?void 0:x.label)||""),labels:Array.isArray(x==null?void 0:x.labels)?x.labels.join(", "):String((x==null?void 0:x.labels)||""),assignees:Array.isArray(x==null?void 0:x.assignees)?x.assignees.join(", "):String((x==null?void 0:x.assignees)||"")}));if(typeof $=="string"&&$.trim())try{const x=JSON.parse($);if(Array.isArray(x))return x.map(I=>({label:String((I==null?void 0:I.label)||""),labels:Array.isArray(I==null?void 0:I.labels)?I.labels.join(", "):String((I==null?void 0:I.labels)||""),assignees:Array.isArray(I==null?void 0:I.assignees)?I.assignees.join(", "):String((I==null?void 0:I.assignees)||"")}))}catch{return[]}return[]}function y(S){const $=[...N(S),{label:"",labels:"",assignees:""}];o("change",S,z($))}function E(S,$){const x=N(S).filter((I,J)=>J!==$);o("change",S,z(x))}function B(S,$,x,I){const J=I.target.value,O=N(S).map((W,oe)=>oe===$?{...W,[x]:J}:W);o("change",S,z(O))}function z(S){return S.map($=>({label:$.label.trim(),labels:j($.labels),assignees:j($.assignees)}))}function j(S){return S.split(",").map($=>$.trim()).filter(Boolean)}return(S,$)=>(b(),w("div",{class:"options-wrapper",onKeydown:$[2]||($[2]=ut(()=>{},["stop"]))},[f("button",{type:"button",class:"ghost",title:"Configure widget",onClick:$[0]||($[0]=ut(x=>l.value=!l.value,["stop"]))},""),l.value?(b(),w("div",wb,[f("div",kb,[$[3]||($[3]=f("div",{class:"opt-section__title"},"Layout & title",-1)),(b(),w(ve,null,Ce(n,x=>f("div",{key:x.key,class:"opt-row"},[f("label",{for:`opt-${x.key}`},R(x.label),9,_b),x.type==="number"?(b(),w("input",{key:0,id:`opt-${x.key}`,type:"number",min:x.min,max:x.max,step:x.step||1,value:k(x.key)??"",onInput:I=>i(x.key,I)},null,40,xb)):x.type==="select"?(b(),w("select",{key:1,id:`opt-${x.key}`,value:k(x.key),onChange:I=>c(x.key,I)},[(b(!0),w(ve,null,Ce(x.options||[],I=>(b(),w("option",{key:I.value,value:I.value},R(I.label),9,Sb))),128))],40,Cb)):x.type==="toggle"?(b(),w("input",{key:2,id:`opt-${x.key}`,type:"checkbox",checked:!!k(x.key),onChange:I=>d(x.key,I)},null,40,$b)):x.type==="text"?(b(),w("input",{key:3,id:`opt-${x.key}`,type:"text",value:k(x.key)??"",onInput:I=>p(x.key,I)},null,40,Tb)):x.type==="color"?(b(),w("input",{key:4,id:`opt-${x.key}`,type:"color",value:k(x.key)||"#000000",onInput:I=>p(x.key,I)},null,40,Mb)):ne("",!0)])),64))]),s.value.length?(b(),w("div",Ab,[$[5]||($[5]=f("div",{class:"opt-section__title"},"Widget options",-1)),(b(!0),w(ve,null,Ce(s.value,x=>(b(),w("div",{key:x.key,class:"opt-row"},[f("label",{for:`opt-${x.key}`},R(x.label),9,Db),x.type==="number"?(b(),w("input",{key:0,id:`opt-${x.key}`,type:"number",min:x.min,max:x.max,step:x.step||1,value:k(x.key)??"",onInput:I=>i(x.key,I)},null,40,Eb)):x.type==="select"?(b(),w("select",{key:1,id:`opt-${x.key}`,value:k(x.key),onChange:I=>c(x.key,I)},[(b(!0),w(ve,null,Ce(x.options||[],I=>(b(),w("option",{key:I.value,value:I.value},R(I.label),9,Nb))),128))],40,Lb)):x.type==="toggle"?(b(),w("input",{key:2,id:`opt-${x.key}`,type:"checkbox",checked:!!k(x.key),onChange:I=>d(x.key,I)},null,40,Ib)):x.type==="text"?(b(),w("input",{key:3,id:`opt-${x.key}`,type:"text",value:k(x.key)??"",onInput:I=>p(x.key,I)},null,40,Ob)):x.type==="color"?(b(),w("input",{key:4,id:`opt-${x.key}`,type:"color",value:k(x.key)||"#000000",onInput:I=>p(x.key,I)},null,40,Bb)):x.type==="colorlist"?(b(),w("div",Pb,[(b(!0),w(ve,null,Ce(C(x.key),(I,J)=>(b(),w("div",{key:`${x.key}-${J}`,class:"colorlist__item"},[f("input",{type:"color",value:I,onInput:O=>M(x.key,J,O)},null,40,Fb)]))),128)),f("button",{type:"button",class:"ghost sm",onClick:I=>T(x.key)},"+",8,Hb)])):x.type==="multiselect"?(b(),w("div",Wb,[(b(!0),w(ve,null,Ce(x.options||[],I=>(b(),w("label",{key:`${x.key}-${I.value}`,class:"multi__item"},[f("input",{type:"checkbox",value:I.value,checked:Array.isArray(k(x.key))?k(x.key).includes(I.value):!1,onChange:J=>m(x.key,I.value,J)},null,40,zb),f("span",null,R(I.label),1)]))),128))])):x.type==="taglist"?(b(),w("div",Rb,[x.hint?(b(),w("div",jb,R(x.hint),1)):g(x)?(b(),w("div",Ub," All tags are active by default. Uncheck to hide a filter. ")):ne("",!0),(b(!0),w(ve,null,Ce(x.options||[],I=>(b(),w("label",{key:`${x.key}-${I.value}`,class:"taglist__item"},[f("span",Vb,[f("input",{type:"checkbox",value:I.value,checked:u(x,I.value),onChange:J=>v(x,I.value,J)},null,40,Kb),f("span",qb,R(I.label),1)]),typeof I.count=="number"?(b(),w("span",Gb,R(I.count),1)):ne("",!0)]))),128))])):x.type==="textarea"?(b(),w("textarea",{key:8,id:`opt-${x.key}`,rows:"3",value:k(x.key)??"",onInput:I=>p(x.key,I)},null,40,Jb)):x.type==="filterbuilder"?(b(),w("div",Yb,[$[4]||($[4]=f("div",{class:"filter-builder__hint"},[Oe(" Tags and assigned can be used independentlyleave one empty to ignore it. Use commas. Special assignees: "),f("code",null,"me"),Oe(", "),f("code",null,"unassigned"),Oe(". ")],-1)),(b(!0),w(ve,null,Ce(N(x.key),(I,J)=>(b(),w("div",{key:`${x.key}-row-${J}`,class:"filter-builder__row"},[f("input",{type:"text",class:"filter-builder__label",value:I.label,placeholder:"Filter label",onInput:O=>B(x.key,J,"label",O)},null,40,Zb),f("input",{type:"text",class:"filter-builder__input",value:I.labels,placeholder:"Tags (comma separated)",onInput:O=>B(x.key,J,"labels",O)},null,40,Xb),f("input",{type:"text",class:"filter-builder__input",value:I.assignees,placeholder:"Assigned (comma separated)",onInput:O=>B(x.key,J,"assignees",O)},null,40,Qb),f("button",{type:"button",class:"ghost sm",onClick:O=>E(x.key,J)},"",8,ey)]))),128)),f("button",{type:"button",class:"ghost sm",onClick:I=>y(x.key)},"+ Add filter",8,ty)])):ne("",!0)]))),128))])):ne("",!0),S.showAdvanced?(b(),w("div",ay,[f("button",{type:"button",class:"link-btn",title:"Opens a full targets editor for this widget only. Use the reset inside to go back to global.",onClick:$[1]||($[1]=ut(x=>o("open-advanced"),["stop"]))}," Advanced targets (widget only) ")])):ne("",!0)])):ne("",!0)],32))}}),[["__scopeId","data-v-adf460eb"]]),ry={key:0,class:"widget-toolbar-layer"},ny={class:"widget-toolbar"},sy={class:"toolbar-title"},ly={key:0,class:"toolbar-actions"},iy={class:"toolbar-quick"},cy={class:"toolbar-field"},dy=["value"],uy={class:"toolbar-field"},fy=["value"],gy={class:"toolbar-field"},py=["value"],hy={class:"toolbar-field toolbar-field--toggle"},my=["checked"],vy={class:"toolbar-field toolbar-field--toggle"},by=["checked"],yy={key:1,class:"toolbar-actions"},wy=et(Le({__name:"DashboardToolbar",props:{editable:{type:Boolean},selectedItem:{},openOptionsId:{},presetLabel:{},context:{}},emits:["select-first","move","cycle-width","cycle-height","remove","reset-preset","toggle-options","open-advanced","edit-options"],setup(e){const t=e,a=A(()=>{var d,p,m;const i=((p=(d=t.selectedItem)==null?void 0:d.props)==null?void 0:p.title)||"";if(i)return i;const c=t.selectedItem?vo[t.selectedItem.type]:null;return(c==null?void 0:c.label)||((m=t.selectedItem)==null?void 0:m.type)||"Widget"});function o(i){var c,d;return(d=(c=t.selectedItem)==null?void 0:c.options)==null?void 0:d[i]}function r(i){return vo[i]}function n(i){var c;return!!((c=vo[i])!=null&&c.configurable)}function s(i){return i==="quarter"?"":i==="half"?"":"1"}function l(i){return i==="s"?"S":i==="l"?"L":i==="xl"?"XL":"M"}return(i,c)=>(b(),it(Su,{to:"body"},[i.editable?(b(),w("div",ry,[f("div",ny,[f("div",sy,[i.selectedItem?(b(),w(ve,{key:0},[Oe(R(a.value),1)],64)):(b(),w(ve,{key:1},[Oe("Click a widget to edit")],64))]),i.selectedItem?(b(),w("div",ly,[f("button",{type:"button",class:"ghost",title:"Move earlier",onClick:c[0]||(c[0]=d=>i.$emit("move","up"))},""),f("button",{type:"button",class:"ghost",title:"Move later",onClick:c[1]||(c[1]=d=>i.$emit("move","down"))},""),f("button",{type:"button",class:"ghost",title:"Cycle width",onClick:c[2]||(c[2]=d=>i.$emit("cycle-width"))},R(s(i.selectedItem.layout.width)),1),f("button",{type:"button",class:"ghost",title:"Cycle height",onClick:c[3]||(c[3]=d=>i.$emit("cycle-height"))},R(l(i.selectedItem.layout.height)),1),f("div",iy,[f("label",cy,[c[15]||(c[15]=f("span",null,"Title",-1)),f("input",{type:"text",value:o("titlePrefix")||"",placeholder:"Prefix",onInput:c[4]||(c[4]=d=>i.$emit("edit-options",i.selectedItem.id,"titlePrefix",d.target.value))},null,40,dy)]),f("label",uy,[c[16]||(c[16]=f("span",null,"Card",-1)),f("input",{type:"color",value:o("cardBg")||"#ffffff",onInput:c[5]||(c[5]=d=>i.$emit("edit-options",i.selectedItem.id,"cardBg",d.target.value))},null,40,fy)]),f("label",gy,[c[18]||(c[18]=f("span",null,"Scale",-1)),f("select",{value:o("scale")||"md",onChange:c[6]||(c[6]=d=>i.$emit("edit-options",i.selectedItem.id,"scale",d.target.value))},[...c[17]||(c[17]=[f("option",{value:"sm"},"Small",-1),f("option",{value:"md"},"Normal",-1),f("option",{value:"lg"},"Large",-1),f("option",{value:"xl"},"Extra large",-1)])],40,py)]),f("label",hy,[f("input",{type:"checkbox",checked:o("showHeader")!==!1,onChange:c[7]||(c[7]=d=>i.$emit("edit-options",i.selectedItem.id,"showHeader",d.target.checked))},null,40,my),c[19]||(c[19]=f("span",null,"Show title",-1))]),f("label",vy,[f("input",{type:"checkbox",checked:!!o("dense"),onChange:c[8]||(c[8]=d=>i.$emit("edit-options",i.selectedItem.id,"dense",d.target.checked))},null,40,by),c[20]||(c[20]=f("span",null,"Dense",-1))])]),i.selectedItem&&n(i.selectedItem.type)?(b(),it(oy,{key:0,entry:r(i.selectedItem.type),options:i.selectedItem.options,open:i.openOptionsId===i.selectedItem.id,"show-advanced":i.selectedItem.type==="targets_v2",context:i.context,onToggle:c[9]||(c[9]=d=>i.$emit("toggle-options",i.selectedItem.id,d)),onOpenAdvanced:c[10]||(c[10]=d=>i.$emit("open-advanced",i.selectedItem.id)),onChange:c[11]||(c[11]=(d,p)=>i.$emit("edit-options",i.selectedItem.id,d,p))},null,8,["entry","options","open","show-advanced","context"])):ne("",!0),i.presetLabel?(b(),w("button",{key:1,type:"button",class:"ghost",title:"Reset widgets to preset",onClick:c[12]||(c[12]=d=>i.$emit("reset-preset"))}," Reset "+R(i.presetLabel),1)):ne("",!0),f("button",{type:"button",class:"ghost danger",title:"Remove widget",onClick:c[13]||(c[13]=d=>i.$emit("remove"))},"")])):(b(),w("div",yy,[f("button",{type:"button",class:"ghost",onClick:c[14]||(c[14]=d=>i.$emit("select-first"))},"Select first widget")]))])])):ne("",!0)]))}}),[["__scopeId","data-v-c1764b36"]]),ky={id:"opsdash-sidebar-pane-targets",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-targets"},_y={class:"target-config"},xy={class:"field"},Cy=["value","aria-invalid"],Sy={class:"field"},$y=["value","aria-invalid"],Ty={class:"cat-header"},My=["value","onInput"],Ay=["disabled","onClick"],Dy={class:"cat-fields"},Ey={class:"field"},Ly=["value","aria-invalid","onInput"],Ny={class:"field"},Iy=["value","onChange"],Oy={class:"field checkbox"},By=["checked","onChange"],Py={class:"field color-field"},Fy=["aria-expanded","aria-label","onClick"],Hy=["id"],Wy={class:"swatch-grid",role:"group","aria-label":"Preset colors"},zy=["aria-label","onClick"],Ry={class:"custom-color"},jy=["value","onInput"],Uy={class:"target-section"},Vy={class:"field checkbox"},Ky=["checked"],qy={class:"field"},Gy=["value"],Jy={class:"field"},Yy=["value","aria-invalid"],Zy={class:"field"},Xy=["value","aria-invalid"],Qy={class:"target-section"},e1={class:"field"},t1=["value"],a1={class:"field"},o1=["value","aria-invalid"],r1={class:"field"},n1=["value","aria-invalid"],s1={class:"target-section"},l1={class:"field checkbox"},i1=["checked"],c1={class:"field checkbox"},d1=["checked"],u1=et(Le({__name:"SidebarTargetsPane",props:{targets:{},categoryOptions:{},totalTargetMessage:{},allDayHoursMessage:{},categoryTargetMessages:{},paceThresholdMessages:{},forecastMomentumMessage:{},forecastPaddingMessage:{},canAddCategory:{type:Boolean},colorPalette:{}},emits:["total-target-input","set-all-day-hours","set-category-label","remove-category","set-category-target","set-category-pace","set-category-weekend","set-category-color","add-category","set-include-weekend-total","set-pace-mode","set-threshold","set-forecast-method","set-forecast-momentum","set-forecast-padding","set-ui-option"],setup(e,{emit:t}){const a=e,{targets:o,categoryOptions:r,totalTargetMessage:n,allDayHoursMessage:s,categoryTargetMessages:l,paceThresholdMessages:i,forecastMomentumMessage:c,forecastPaddingMessage:d,canAddCategory:p,colorPalette:m}=du(a),h=t,u=A(()=>{var y;return M((y=m.value)==null?void 0:y[0])??"#2563EB"}),g=le(null);function v(y){const E=y.target;E!=null&&E.closest("[data-color-popover]")||C()}Dt(()=>{document.addEventListener("click",v)}),Tt(()=>{document.removeEventListener("click",v)});function k(y){if(g.value===y){C();return}g.value=y,oa(()=>{const E=document.getElementById(`opsdash-color-popover-${y}`);E==null||E.focus()})}function C(){g.value=null}function M(y){if(typeof y!="string")return null;const E=y.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(E))return null;if(E.length===4){const[,B,z,j]=E;return`#${B}${B}${z}${z}${j}${j}`.toUpperCase()}return E.toUpperCase()}function T(y){return M(y==null?void 0:y.color)??u.value}function P(y,E){const B=M(E)??u.value;h("set-category-color",{id:y,color:B})}function N(y,E){const B=M(E)??u.value;h("set-category-color",{id:y,color:B}),C()}return(y,E)=>{var B,z,j,S,$,x,I,J,O,W,oe,V;return b(),w("div",ky,[E[36]||(E[36]=f("div",{class:"sb-title"},"Target Settings",-1)),f("div",_y,[f("div",xy,[E[14]||(E[14]=f("span",{class:"label"},"Total target (h)",-1)),f("input",{type:"number",value:D(o).totalHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!D(n),onInput:E[0]||(E[0]=q=>y.$emit("total-target-input",q.target.value))},null,40,Cy),D(n)?(b(),w("div",{key:0,class:Ee(["input-message",(B=D(n))==null?void 0:B.tone])},R((z=D(n))==null?void 0:z.text),3)):ne("",!0)]),f("div",Sy,[E[15]||(E[15]=f("span",{class:"label"},"All-day event (h per day)",-1)),f("input",{type:"number",value:D(o).allDayHours,min:"0",max:"24",step:"0.25","aria-invalid":!!D(s),onInput:E[1]||(E[1]=q=>y.$emit("set-all-day-hours",q.target.value))},null,40,$y),D(s)?(b(),w("div",{key:0,class:Ee(["input-message",(j=D(s))==null?void 0:j.tone])},R((S=D(s))==null?void 0:S.text),3)):ne("",!0)]),(b(!0),w(ve,null,Ce(D(r),q=>{var Y,L;return b(),w("div",{class:"target-category",key:q.id},[f("div",Ty,[f("span",{class:"cat-color-indicator",style:De({backgroundColor:T(q)}),"aria-hidden":"true"},null,4),f("input",{class:"cat-name",type:"text",value:q.label,placeholder:"Category name",onInput:U=>y.$emit("set-category-label",{id:q.id,label:U.target.value})},null,40,My),f("button",{class:"remove-cat",type:"button",disabled:D(r).length<=1,title:"Remove category",onClick:U=>y.$emit("remove-category",q.id)},"  ",8,Ay)]),f("div",Dy,[f("label",Ey,[E[16]||(E[16]=f("span",{class:"label"},"Target (h)",-1)),f("input",{type:"number",value:q.targetHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!D(l)[q.id],onInput:U=>y.$emit("set-category-target",{id:q.id,value:U.target.value})},null,40,Ly),D(l)[q.id]?(b(),w("div",{key:0,class:Ee(["input-message",(Y=D(l)[q.id])==null?void 0:Y.tone])},R((L=D(l)[q.id])==null?void 0:L.text),3)):ne("",!0)]),f("label",Ny,[E[18]||(E[18]=f("span",{class:"label"},"Pace mode",-1)),f("select",{value:q.paceMode||D(o).pace.mode,onChange:U=>y.$emit("set-category-pace",{id:q.id,mode:U.target.value})},[...E[17]||(E[17]=[f("option",{value:"days_only"},"Days only",-1),f("option",{value:"time_aware"},"Time aware",-1)])],40,Iy)]),f("label",Oy,[f("input",{type:"checkbox",checked:q.includeWeekend,onChange:U=>y.$emit("set-category-weekend",{id:q.id,value:U.target.checked})},null,40,By),E[19]||(E[19]=f("span",null,"Weekend",-1))]),f("div",Py,[f("div",{class:"color-trigger-wrapper","data-color-popover":"",onClick:E[3]||(E[3]=ut(()=>{},["stop"]))},[f("button",{type:"button",class:"color-link","aria-expanded":g.value===q.id,"aria-label":`Choose color for ${q.label}`,onClick:U=>k(q.id)}," Color ",8,Fy),g.value===q.id?(b(),w("div",{key:0,class:"color-popover",id:`opsdash-color-popover-${q.id}`,tabindex:"-1",onKeydown:E[2]||(E[2]=po(ut(U=>C(),["prevent"]),["esc"]))},[f("div",Wy,[(b(!0),w(ve,null,Ce(D(m),U=>(b(),w("button",{key:`${q.id}-swatch-${U}`,type:"button",class:Ee(["color-swatch",{active:T(q)===U}]),style:De({backgroundColor:U}),"aria-label":`Use color ${U}`,onClick:ee=>N(q.id,U)},null,14,zy))),128))]),f("label",Ry,[E[20]||(E[20]=f("span",null,"Custom",-1)),f("input",{class:"color-input",type:"color",value:T(q),"aria-label":"Pick custom color",onInput:U=>P(q.id,U.target.value)},null,40,jy)])],40,Hy)):ne("",!0)])])])])}),128)),Se(D(wt),{type:"tertiary",class:"add-category",disabled:!D(p),onClick:E[4]||(E[4]=q=>y.$emit("add-category"))},{default:Qe(()=>[...E[21]||(E[21]=[Oe(" Add category ",-1)])]),_:1},8,["disabled"]),f("div",Uy,[E[27]||(E[27]=f("div",{class:"section-title"},"Pace",-1)),f("label",Vy,[f("input",{type:"checkbox",checked:D(o).pace.includeWeekendTotal,onChange:E[5]||(E[5]=q=>y.$emit("set-include-weekend-total",q.target.checked))},null,40,Ky),E[22]||(E[22]=f("span",null,"Count weekend in total pace",-1))]),f("label",qy,[E[24]||(E[24]=f("span",{class:"label"},"Mode",-1)),f("select",{value:D(o).pace.mode,onChange:E[6]||(E[6]=q=>y.$emit("set-pace-mode",q.target.value))},[...E[23]||(E[23]=[f("option",{value:"days_only"},"Days only",-1),f("option",{value:"time_aware"},"Time aware",-1)])],40,Gy)]),f("label",Jy,[E[25]||(E[25]=f("span",{class:"label"},"On track  gap (%)",-1)),f("input",{type:"number",value:D(o).pace.thresholds.onTrack,step:"0.1","aria-invalid":!!D(i).onTrack,onInput:E[7]||(E[7]=q=>y.$emit("set-threshold",{key:"onTrack",value:q.target.value}))},null,40,Yy),D(i).onTrack?(b(),w("div",{key:0,class:Ee(["input-message",($=D(i).onTrack)==null?void 0:$.tone])},R((x=D(i).onTrack)==null?void 0:x.text),3)):ne("",!0)]),f("label",Zy,[E[26]||(E[26]=f("span",{class:"label"},"At risk  gap (%)",-1)),f("input",{type:"number",value:D(o).pace.thresholds.atRisk,step:"0.1","aria-invalid":!!D(i).atRisk,onInput:E[8]||(E[8]=q=>y.$emit("set-threshold",{key:"atRisk",value:q.target.value}))},null,40,Xy),D(i).atRisk?(b(),w("div",{key:0,class:Ee(["input-message",(I=D(i).atRisk)==null?void 0:I.tone])},R((J=D(i).atRisk)==null?void 0:J.text),3)):ne("",!0)])]),f("div",Qy,[E[32]||(E[32]=f("div",{class:"section-title"},"Forecast",-1)),f("label",e1,[E[29]||(E[29]=f("span",{class:"label"},"Primary method",-1)),f("select",{value:D(o).forecast.methodPrimary,onChange:E[9]||(E[9]=q=>y.$emit("set-forecast-method",q.target.value))},[...E[28]||(E[28]=[f("option",{value:"linear"},"Linear",-1),f("option",{value:"momentum"},"Momentum",-1)])],40,t1)]),f("label",a1,[E[30]||(E[30]=f("span",{class:"label"},"Momentum window (days)",-1)),f("input",{type:"number",value:D(o).forecast.momentumLastNDays,min:"1",max:"14",step:"1","aria-invalid":!!D(c),onInput:E[10]||(E[10]=q=>y.$emit("set-forecast-momentum",q.target.value))},null,40,o1),D(c)?(b(),w("div",{key:0,class:Ee(["input-message",(O=D(c))==null?void 0:O.tone])},R((W=D(c))==null?void 0:W.text),3)):ne("",!0)]),f("label",r1,[E[31]||(E[31]=f("span",{class:"label"},"Padding (h)",-1)),f("input",{type:"number",value:D(o).forecast.padding,min:"0",step:"0.1","aria-invalid":!!D(d),onInput:E[11]||(E[11]=q=>y.$emit("set-forecast-padding",q.target.value))},null,40,n1),D(d)?(b(),w("div",{key:0,class:Ee(["input-message",(oe=D(d))==null?void 0:oe.tone])},R((V=D(d))==null?void 0:V.text),3)):ne("",!0)])]),f("div",s1,[E[35]||(E[35]=f("div",{class:"section-title"},"Display",-1)),f("label",l1,[f("input",{type:"checkbox",checked:D(o).ui.showCalendarCharts,onChange:E[12]||(E[12]=q=>y.$emit("set-ui-option",{key:"showCalendarCharts",value:q.target.checked}))},null,40,i1),E[33]||(E[33]=f("span",null,"Show calendar charts",-1))]),f("label",c1,[f("input",{type:"checkbox",checked:D(o).ui.showCategoryCharts,onChange:E[13]||(E[13]=q=>y.$emit("set-ui-option",{key:"showCategoryCharts",value:q.target.checked}))},null,40,d1),E[34]||(E[34]=f("span",null,"Show category charts",-1))])])])])}}}),[["__scopeId","data-v-1e606590"]]);function f1(e,t){const{allowEmpty:a=!1}=t;if(e===""||e===null||e===void 0)return a?{value:null}:{value:null,error:"Enter a number"};const o=Number(e);if(!Number.isFinite(o))return{value:null,error:"Enter a valid number"};let r=o,n;if(typeof t.min=="number"&&r<t.min&&(r=t.min,n=vs(t)),typeof t.max=="number"&&r>t.max&&(r=t.max,n=vs(t)),typeof t.step=="number"&&t.step>0){const l=p1(r,t.step);l!==r&&(r=l,n=vs(t))}const s=Jc(t);return typeof s=="number"&&(r=Number(r.toFixed(s))),{value:r,warning:n}}function g1(e,t){const a=f1(e,t),o=[];return a.error&&o.push({severity:"error",message:a.error}),a.warning&&o.push({severity:"warning",message:a.warning}),{value:a.value,issues:o}}function p1(e,t){const a=Jc({step:t}),o=Math.round(e/t)*t;return typeof a=="number"?Number(o.toFixed(a)):o}function Jc(e){if(typeof e.decimals=="number")return e.decimals;if(typeof e.step=="number")return h1(e.step)}function h1(e){const t=e.toString();if(t.includes("e-")){const[,o]=t.split("e-");return Number(o)}const[,a=""]=t.split(".");return a.length}function vs(e){const t=[];return typeof e.min=="number"&&typeof e.max=="number"?t.push(`Allowed range ${e.min}  ${e.max}`):typeof e.min=="number"?t.push(`Minimum ${e.min}`):typeof e.max=="number"&&t.push(`Maximum ${e.max}`),typeof e.step=="number"&&e.step>0&&t.push(`step ${e.step}`),`Adjusted to allowed value (${t.join(", ")})`}function m1(e,t,a="Enter a valid number"){const o=g1(e,t),r=o.issues.find(l=>l.severity==="error"),n=o.issues.find(l=>l.severity==="warning");let s=null;return r||o.value===null?s={text:(r==null?void 0:r.message)??a,tone:"error"}:n&&(s={text:n.message,tone:"warning"}),{ok:!r&&o.value!==null,value:o.value,message:s}}function bo(e,t,a,o,r){const{ok:n,value:s,message:l}=m1(e,t,r);return a(l),!n||s===null?!1:(o(s),!0)}const v1={key:0,class:"advanced-overlay",role:"dialog","aria-modal":"true","aria-label":"Targets configuration"},b1={class:"advanced-panel"},y1=et(Le({__name:"DashboardAdvancedTargetsOverlay",props:{widgetId:{},widgets:{},contextTargetsConfig:{}},emits:["close","save","use-global","open-onboarding"],setup(e,{emit:t}){const a=e,o=t,r=le(null),n=le(null),s=le(null),l=le(null),i=le(null),c=Wa({onTrack:null,atRisk:null}),d=Wa({}),p=Nt(void 0);$e(()=>a.widgetId,K=>{if(!K){r.value=null,v();return}const Z=a.widgets.find(pe=>pe.id===K),te=(Z==null?void 0:Z.options)||{},ge=te.useLocalConfig&&te.localConfig?Nt(te.localConfig):Nt(a.contextTargetsConfig);r.value=pa(ge),v()},{immediate:!0});const m=A(()=>{var K;return((K=r.value)==null?void 0:K.categories)??[]}),h=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],u=A(()=>{const K=new Set,Z=te=>{const ge=P(te);ge&&K.add(ge)};return m.value.forEach(te=>Z(te.color)),h.forEach(te=>K.add(te)),Array.from(K)}),g=A(()=>{const K=r.value;return K?N(K)!==null:!1});function v(){n.value=null,s.value=null,l.value=null,i.value=null,c.onTrack=null,c.atRisk=null,Object.keys(d).forEach(K=>{delete d[K]})}function k(){o("close")}function C(){!a.widgetId||!r.value||o("save",a.widgetId,pa(r.value))}function M(){a.widgetId&&o("use-global",a.widgetId)}function T(){o("open-onboarding","categories")}function P(K){if(typeof K!="string")return null;const Z=K.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(Z))return null;if(Z.length===4){const[,te,ge,pe]=Z;return`#${te}${te}${ge}${ge}${pe}${pe}`.toUpperCase()}return Z.toUpperCase()}function N(K){const Z=new Set;K.categories.forEach(te=>{(te.groupIds||[]).forEach(ge=>{const pe=Number(ge);Number.isFinite(pe)&&Z.add(pe)})});for(let te=1;te<=9;te++)if(!Z.has(te))return te;return null}function y(){return`cat-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`}function E(K){const Z=new Set;K.categories.forEach(te=>{const ge=P(te==null?void 0:te.color);ge&&Z.add(ge)});for(const te of h)if(!Z.has(te))return te;return h[0]??null}function B(K){if(!r.value)return;const Z=pa(r.value);K(Z),r.value=Z}function z(K,Z){B(te=>{const ge=te.categories.find(pe=>pe.id===K);ge&&Z(ge)})}function j(K){bo(K,{min:0,max:1e3,step:.5,decimals:2},Z=>{n.value=Z},Z=>B(te=>{te.totalHours=Z}))}function S(K){bo(K,{min:0,max:24,step:.25,decimals:2},Z=>{s.value=Z},Z=>B(te=>{te.allDayHours=Z}),"024 hours per day")}function $(K,Z){bo(Z,{min:0,max:1e3,step:.5,decimals:2},te=>{d[K]=te},te=>z(K,ge=>{ge.targetHours=te}))}function x(K,Z){z(K,te=>{te.label=Z.trim()||te.label})}function I(K,Z){z(K,te=>{te.includeWeekend=Z})}function J(K,Z){const te=P(Z);z(K,ge=>{ge.color=te??null})}function O(K,Z){Z!=="days_only"&&Z!=="time_aware"||z(K,te=>{te.paceMode=Z})}function W(K){B(Z=>{Z.pace.includeWeekendTotal=K})}function oe(K){K!=="days_only"&&K!=="time_aware"||B(Z=>{Z.pace.mode=K})}function V(K,Z){bo(Z,{min:-100,max:100,step:.1,decimals:1},te=>{c[K]=te},te=>B(ge=>{ge.pace.thresholds[K]=te}))}function q(K){const Z=K==="momentum"?"momentum":"linear";B(te=>{te.forecast.methodPrimary=Z})}function Y(K){bo(K,{min:1,max:14,step:1,decimals:0},Z=>{l.value=Z},Z=>B(te=>{te.forecast.momentumLastNDays=Z}))}function L(K){bo(K,{min:0,max:100,step:.1,decimals:1},Z=>{i.value=Z},Z=>B(te=>{te.forecast.padding=Z}))}function U(K,Z){B(te=>{te.ui||(te.ui={...p.ui}),te.ui[K]=Z})}function ee(){const K=r.value;if(!K)return;const Z=N(K);Z!==null&&B(te=>{const ge=E(te);te.categories=[...te.categories,{id:y(),label:`Category ${te.categories.length+1}`,targetHours:0,includeWeekend:!0,paceMode:"days_only",color:ge,groupIds:[Z]}]})}function se(K){const Z=r.value;!Z||Z.categories.length<=1||(B(te=>{te.categories=te.categories.filter(ge=>ge.id!==K)}),delete d[K])}return(K,Z)=>K.widgetId&&r.value?(b(),w("div",v1,[f("div",b1,[f("div",{class:"overlay-header"},[Z[7]||(Z[7]=f("div",null,[f("div",{class:"overlay-title"},"Targets (this widget only)"),f("div",{class:"overlay-subtitle"},"Starts from global targets; saving keeps a local copy for this widget.")],-1)),f("button",{type:"button",class:"ghost danger",onClick:k,"aria-label":"Close"},"")]),Se(u1,{targets:r.value,"category-options":m.value,"total-target-message":n.value,"all-day-hours-message":s.value,"category-target-messages":d,"pace-threshold-messages":c,"forecast-momentum-message":l.value,"forecast-padding-message":i.value,"color-palette":u.value,"can-add-category":g.value,onTotalTargetInput:j,onSetAllDayHours:S,onSetCategoryTarget:Z[0]||(Z[0]=({id:te,value:ge})=>$(te,ge)),onSetCategoryLabel:Z[1]||(Z[1]=({id:te,label:ge})=>x(te,ge)),onSetCategoryWeekend:Z[2]||(Z[2]=({id:te,value:ge})=>I(te,ge)),onSetCategoryPace:Z[3]||(Z[3]=({id:te,mode:ge})=>O(te,ge)),onSetCategoryColor:Z[4]||(Z[4]=({id:te,color:ge})=>J(te,ge)),onAddCategory:ee,onRemoveCategory:se,onSetIncludeWeekendTotal:W,onSetPaceMode:oe,onSetThreshold:Z[5]||(Z[5]=({key:te,value:ge})=>V(te,ge)),onSetForecastMethod:q,onSetForecastMomentum:Y,onSetForecastPadding:L,onSetUiOption:Z[6]||(Z[6]=({key:te,value:ge})=>U(te,ge))},null,8,["targets","category-options","total-target-message","all-day-hours-message","category-target-messages","pace-threshold-messages","forecast-momentum-message","forecast-padding-message","color-palette","can-add-category"]),f("div",{class:"overlay-actions"},[f("div",{class:"overlay-actions__left"},[f("button",{type:"button",class:"ghost",onClick:M},"Use global targets"),f("button",{type:"button",class:"ghost",onClick:T},"Edit via onboarding")]),f("div",{class:"overlay-actions__right"},[f("button",{type:"button",class:"ghost",onClick:k},"Cancel"),f("button",{type:"button",class:"ghost primary",onClick:C},"Save")])])])])):ne("",!0)}}),[["__scopeId","data-v-539a10f9"]]),w1=et(Le({__name:"DashboardLayout",props:{widgets:{},context:{},editable:{type:Boolean},widgetTypes:{},presetLabel:{}},emits:["edit:width","edit:height","edit:remove","edit:move","edit:options","edit:add","edit:reorder","open:onboarding","reset:preset","select:cell"],setup(e,{expose:t,emit:a}){const o=e,r=a,n=le(null),s=le(null),l=le(null),i=A(()=>(o.widgets||[]).slice().sort((z,j)=>(z.layout.order||0)-(j.layout.order||0)).map(z=>{const j=mb(z,o.context);if(!j)return null;const S=z.options||{};return{...j,id:z.id,layout:z.layout,type:z.type,options:S}}).filter(Boolean)),c=A(()=>i.value.find(z=>z.id===l.value)||null),d=A(()=>o.widgetTypes||[]);$e(()=>o.editable,z=>{z||(l.value=null,n.value=null,s.value=null)},{immediate:!0}),$e(()=>i.value.map(z=>z.id).join("|"),()=>{l.value&&!i.value.find(z=>z.id===l.value)&&(l.value=null)});function p(z,j){n.value=j?z:null,!j&&s.value===z&&(s.value=null)}function m(z){l.value=z,n.value=null}function h(){i.value.length&&(l.value=i.value[0].id)}function u(){l.value=null,n.value=null,s.value=null}function g(){l.value&&r("edit:width",l.value)}function v(){l.value&&r("edit:height",l.value)}function k(z){l.value&&r("edit:move",l.value,z)}function C(){l.value&&r("edit:remove",l.value)}function M(z){l.value=z,n.value=z,s.value=z}function T(){n.value=null,s.value=null}function P(z,j){r("edit:options",z,"localConfig",j),r("edit:options",z,"useLocalConfig",!0),T()}function N(z){r("edit:options",z,"useLocalConfig",!1),r("edit:options",z,"localConfig",null),T()}function y(z){T(),r("open:onboarding",z)}function E(){l.value&&(n.value=l.value)}function B(z){r("select:cell",z)}return t({openOptionsForSelected:E}),(z,j)=>(b(),w("div",{class:Ee(["layout-wrapper",{"editable-mode":z.editable}]),onClick:ut(u,["self"])},[Se(yb,{ordered:i.value,editable:z.editable,"selected-id":l.value,"widget-type-list":d.value,onSelect:m,onSelectCell:B,onAdd:j[0]||(j[0]=(S,$)=>r("edit:add",S,$)),onReorder:j[1]||(j[1]=(S,$)=>r("edit:reorder",S,$))},null,8,["ordered","editable","selected-id","widget-type-list"]),Se(wy,{editable:z.editable,"selected-item":c.value,"open-options-id":n.value,"preset-label":z.presetLabel,context:z.context,onSelectFirst:h,onMove:k,onCycleWidth:g,onCycleHeight:v,onRemove:C,onResetPreset:j[2]||(j[2]=S=>r("reset:preset")),onToggleOptions:p,onOpenAdvanced:M,onEditOptions:j[3]||(j[3]=(S,$,x)=>r("edit:options",S,$,x))},null,8,["editable","selected-item","open-options-id","preset-label","context"]),Se(y1,{"widget-id":s.value,widgets:z.widgets,"context-targets-config":z.context.targetsConfig,onClose:T,onSave:P,onUseGlobal:N,onOpenOnboarding:y},null,8,["widget-id","widgets","context-targets-config"])],2))}}),[["__scopeId","data-v-98fee2cd"]]);function k1(e){const t=le(""),a=le(""),o=le(!1),r=le([]),n=(c,d,p)=>c==="month"?`Month of ${d?d.slice(0,7):`-${p}`}`:`Week of ${d||`-${p}`}`,s=(c,d)=>{const p=c==="month"?"Notes for month starting":"Notes for week starting";return d?`${p} ${d}`:p};async function l(){var p,m,h;const c=await e.getJson(e.route("notes"),{range:e.range.value,offset:e.offset.value|0});t.value=String(((p=c==null?void 0:c.notes)==null?void 0:p.previous)??""),a.value=String(((m=c==null?void 0:c.notes)==null?void 0:m.current)??"");const d=Array.isArray((h=c==null?void 0:c.notes)==null?void 0:h.history)?c.notes.history:[];r.value=d.map((u,g)=>{const v=Number((u==null?void 0:u.offset)??g+1),k=String((u==null?void 0:u.from)??"").trim(),C=String((u==null?void 0:u.content)??"");if(!C.trim())return null;const M=n(e.range.value,k,v),T=s(e.range.value,k);return{id:`offset-${v}-${k||g}`,label:M,title:T,content:C,from:k||void 0,offset:v}}).filter(Boolean)}async function i(){try{o.value=!0,await e.postJson(e.route("notesSave"),{range:e.range.value,offset:e.offset.value|0,content:a.value??""}),e.notifySuccess("Notes saved"),await l()}catch(c){console.error(c),e.notifyError("Failed to save notes")}finally{o.value=!1}}return{notesPrev:t,notesCurrDraft:a,isSavingNote:o,notesHistory:r,fetchNotes:l,saveNotes:i}}let sr=null,bs=null,Yc=!1;function Zc(){var t;if(typeof document>"u")return null;const e=(t=document.getElementById("app"))==null?void 0:t.getAttribute("data-opsdash-theme-preference");return e==="auto"||e==="light"||e==="dark"?e:null}function _1(){if(!(typeof window>"u"))try{an(),x1()}catch(e){$1()&&console.warn("[opsdash] theme boot install failed",e)}}function x1(){if(sr||bs||Yc)return;const e=[];if(document.documentElement&&e.push(document.documentElement),document.body&&document.body!==document.documentElement&&e.push(document.body),e.length&&(sr=new MutationObserver(()=>an()),e.forEach(t=>{sr==null||sr.observe(t,{attributes:!0,attributeFilter:["data-theme","class"]})})),window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>an();typeof t.addEventListener=="function"?(t.addEventListener("change",a),bs=()=>t.removeEventListener("change",a)):typeof t.addListener=="function"&&(t.addListener(a),bs=()=>{t.removeListener(a)})}window.addEventListener("oc:theme:changed",an),Yc=!0}function an(){const e=C1();if(!e)return;["icon","shortcut icon"].forEach(a=>{let o=document.querySelector(`link[rel="${a}"]`);o||(o=document.createElement("link"),o.rel=a,document.head.appendChild(o)),o.type="image/svg+xml",o.href=e})}function C1(){const e=ys()==="dark",t=S1(),a=t("favicon.svg");if(a)return a;if(e){const r=t("app-dark.svg");if(r)return r}const o=t(e?"app-dark.svg":"app.svg");return o||"/apps-extra/opsdash/img/favicon.svg"}function ys(){var o,r,n,s,l;const e=(o=document.documentElement)==null?void 0:o.getAttribute("data-theme");if(e==="dark"||e==="light")return e;const t=(r=document.body)==null?void 0:r.getAttribute("data-theme");if(t==="dark"||t==="light")return t;if((n=document.body)!=null&&n.classList.contains("theme--dark"))return"dark";if((s=document.body)!=null&&s.classList.contains("theme--light"))return"light";const a=(l=window.matchMedia)==null?void 0:l.call(window,"(prefers-color-scheme: dark)");return a!=null&&a.matches?"dark":"light"}function S1(){const e=window;return t=>{var a;return typeof((a=e.OC)==null?void 0:a.imagePath)=="function"?e.OC.imagePath("opsdash",t):""}}function $1(){var t;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function T1(){const e=typeof window<"u"?window:{},t=e.OC||{};try{const o=typeof t.getCurrentUser=="function"?t.getCurrentUser():t.currentUser;if(typeof o=="string")return o;if(o&&typeof o.uid=="string")return o.uid;if(o&&typeof o.userId=="string")return o.userId}catch{}const a=t.currentUser??t.userId??e._oc_current_user??"";return typeof a=="string"?a:""}function M1(e){const t=le([]),a=le({}),o=le({}),r=le({}),n=le([]),s=le(!1),l=le(!1),i=le(null),c=le(""),d=le(""),p=le(""),m=Wa({}),h=le([]),u=le([]),g=le([]),v=le({}),k=le({}),C=le({}),M=le(Nt(ga())),T=le(null),P=Zc()??"auto",N=le(P),y=le(Xo()),E=le(Qo());let B=0;async function z(){var I,J,O,W,oe;const j=++B;s.value=!0;const S={...o.value},$={...a.value};let x=!1;try{const V=((I=e.isDebug)==null?void 0:I.call(e))===!0,q=pe=>{const F={};return pe&&typeof pe=="object"&&Object.entries(pe).forEach(([_,H])=>{typeof H=="string"&&H.trim()!==""&&(F[String(_)]=H)}),F},Y=()=>{var F,_,H,X;let pe=!1;try{const Q=((F=v.value)==null?void 0:F.pie)||{},ie=Array.isArray(Q.ids)?Q.ids.map(ue=>String(ue??"")):[];if(ie.length){const ue=Array.isArray(Q.colors)?Q.colors:[],he=ie.map((fe,de)=>o.value[fe]||ue[de]||"#60a5fa");v.value={...v.value||{},pie:{...Q,colors:he}},pe=!0}}catch(Q){(_=e.isDebug)!=null&&_.call(e)&&console.warn("recompute pie colors failed",Q)}try{const Q=(H=v.value)==null?void 0:H.perDaySeries;if(Q&&Array.isArray(Q.series)){const ie=Q.series.map(ue=>{const he=String((ue==null?void 0:ue.id)??""),fe=o.value[he]||ue.color||"#60a5fa";return{...ue,color:fe}});v.value={...v.value||{},perDaySeries:{labels:Q.labels,series:ie}},pe=!0}}catch(Q){(X=e.isDebug)!=null&&X.call(e)&&console.warn("recompute stacked colors failed",Q)}return pe},L=pe=>{var me,we,xe,Ne,Ae,Me,Fe,ze,Ue,Je,Ot,ft,tt,at;const F=T1();c.value=F||String(((me=pe.meta)==null?void 0:me.uid)??""),d.value=String(((we=pe.meta)==null?void 0:we.from)??""),p.value=String(((xe=pe.meta)==null?void 0:xe.to)??""),l.value=!!((Ne=pe.meta)!=null&&Ne.truncated),i.value=((Ae=pe.meta)==null?void 0:Ae.limits)??null;const _=pe.userSettings&&typeof pe.userSettings=="object"?pe.userSettings:null;if(_){const He=typeof _.timezone=="string"?_.timezone:"",Be=typeof _.locale=="string"?_.locale:"",Ve=typeof _.firstDayOfWeek=="number"?_.firstDayOfWeek:void 0;Qh({timeZone:He||void 0,locale:Be||void 0,firstDayOfWeek:Ve})}const H=Array.isArray(pe.calendars)?pe.calendars:[],X=q((Me=pe.colors)==null?void 0:Me.byId),Q=q((Fe=pe.colors)==null?void 0:Fe.byName),ie=H.map(He=>{if(!He||typeof He!="object")return He;const Be={...He},Ve=String(Be.id??""),We=String(Be.displayname??Be.name??Be.calendar??Ve),ct=typeof Be.color=="string"?Be.color:"",gt=typeof Be.color_src=="string"?Be.color_src:"",Re=Ve?X[Ve]:"",qe=We?Q[We]:"",St=Ve?S[Ve]:"",pt=We?$[We]:"",bt=St||pt;let dt=ct;return!dt&&Re&&(dt=Re),!dt&&qe&&(dt=qe),(!dt||gt==="fallback")&&bt&&(dt=bt),!dt&&bt&&(dt=bt),dt&&(dt!==ct&&(x=!0),Be.color=dt,Ve&&(X[Ve]=dt),We&&(Q[We]=dt)),Be});if(t.value=ie,a.value=Q,o.value=X,T.value=pe.onboarding?{...pe.onboarding}:null,y.value=us(pe.reportingConfig,y.value),E.value=fs(pe.deckSettings,E.value),pe.widgetPresets&&jc(pe.widgetPresets),e.widgetTabs){const He=(ze=pe.onboarding)==null?void 0:ze.dashboardMode,Be=e.widgetTabs.value||Vc(He==="quick"||He==="pro"?He:"standard");e.widgetTabs.value=nr(pe.widgets,Be)}const ue=((Ue=pe.groups)==null?void 0:Ue.byId)??((Je=pe.groups)==null?void 0:Je.byID)??((Ot=pe.groups)==null?void 0:Ot.ids)??{},he={};t.value.forEach(He=>{const Be=String((He==null?void 0:He.id)??""),Ve=Number((ue==null?void 0:ue[Be])??0);he[Be]=Number.isFinite(Ve)?Math.max(0,Math.min(9,Math.trunc(Ve))):0}),r.value=he;const fe=((ft=pe.targets)==null?void 0:ft.week)??{},de=((tt=pe.targets)==null?void 0:tt.month)??{};k.value=fe&&typeof fe=="object"?fe:{},C.value=de&&typeof de=="object"?de:{},M.value=Nt(pe.targetsConfig??ga());const ye=typeof pe.themePreference=="string"?pe.themePreference:"";N.value=ye==="light"||ye==="dark"?ye:"auto",(at=e.isDebug)!=null&&at.call(e)&&(console.group("[opsdash] calendars/colors"),console.table((t.value||[]).map(He=>({id:He.id,name:He.displayname,color:He.color,raw:He.color_raw,src:He.color_src}))),console.log("colors.byId",o.value),console.log("colors.byName",a.value),pe.calDebug&&console.log("server calDebug",pe.calDebug),pe.debug&&(console.group("[opsdash] server query debug"),console.log(pe.debug),console.groupEnd()),console.groupEnd()),n.value=Array.isArray(pe.selected)?pe.selected.map(He=>String(He)):Array.isArray(pe.saved)?pe.saved.map(He=>String(He)):[],e.userChangedSelection.value=!1,x&&Y()},U=async pe=>{var F,_,H,X;d.value=String(((F=pe.meta)==null?void 0:F.from)??d.value),p.value=String(((_=pe.meta)==null?void 0:_.to)??p.value),l.value=!!((H=pe.meta)!=null&&H.truncated),i.value=((X=pe.meta)==null?void 0:X.limits)??null,Object.assign(m,pe.stats??{}),h.value=Array.isArray(pe.byCal)?pe.byCal:[],u.value=Array.isArray(pe.byDay)?pe.byDay:[],g.value=Array.isArray(pe.longest)?pe.longest:[],v.value=pe.charts??{},x&&Y(),await oa(),e.scheduleDraw(),await e.fetchNotes().catch(()=>{})},ee={range:e.range.value,offset:e.offset.value|0,include:["core"]};V&&(ee.include=["core","debug"],ee.debug=!0);const se=await e.getJson(e.route("loadData"),ee);if(j!==B){(J=e.isDebug)!=null&&J.call(e)&&console.warn("discarding stale core response",{currentSeq:j,loadSeq:B});return}L(se),(O=e.onCoreLoaded)==null||O.call(e,se);const K=((W=e.includeLookback)==null?void 0:W.call(e))===!0,Z=["data"];K&&Z.push("lookback"),V&&Z.push("debug");const te={range:e.range.value,offset:e.offset.value|0,include:Z};V&&(te.debug=!0);const ge=await e.postJson(e.route("loadData"),te);if(j!==B){(oe=e.isDebug)!=null&&oe.call(e)&&console.warn("discarding stale data response",{currentSeq:j,loadSeq:B});return}await U(ge)}catch(V){console.error(V),e.notifyError("Failed to load data")}finally{s.value=!1}}return{calendars:t,colorsByName:a,colorsById:o,groupsById:r,selected:n,isLoading:s,isTruncated:l,truncLimits:i,uid:c,from:d,to:p,stats:m,byCal:h,byDay:u,longest:g,charts:v,targetsWeek:k,targetsMonth:C,targetsConfig:M,onboarding:T,load:z,themePreference:N,reportingConfig:y,deckSettings:E}}function A1(e){const t=le(!1);let a=null;function o(r=!0){a&&clearTimeout(a),a=setTimeout(async()=>{a=null;try{t.value=!0;const n=pa(e.targetsConfig.value),s={cals:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:n};e.themePreference&&(s.theme_preference=e.themePreference.value),e.reportingConfig&&(s.reporting_config=e.reportingConfig.value),e.deckSettings&&(s.deck_settings=e.deckSettings.value),e.widgetTabs&&(s.widgets=e.widgetTabs.value);const l=await e.postJson(e.route("persist"),s);Array.isArray(l.read)?e.selected.value=l.read.map(p=>String(p)):Array.isArray(l.saved)&&(e.selected.value=l.saved.map(p=>String(p)));const i=l.targets_config_read,c=l.targets_config_saved,d=E1(i??c,n);if(d&&(e.targetsConfig.value=d),e.themePreference){const p=D1(l.theme_preference_read??l.theme_preference_saved);p&&(e.themePreference.value=p)}if(e.reportingConfig){const p=us(l.reporting_config_read??l.reporting_config_saved,e.reportingConfig.value);p&&(e.reportingConfig.value=p)}if(e.deckSettings){const p=fs(l.deck_settings_read??l.deck_settings_saved,e.deckSettings.value);p&&(e.deckSettings.value=p)}if(e.widgetTabs){const p=l.widgets_read??l.widgets_saved??l.widgets,m=e.widgetTabs.value||tn("standard");e.widgetTabs.value=nr(p,m)}r&&e.onReload&&await e.onReload(),e.notifySuccess("Selection saved")}catch(n){console.error(n),e.notifyError("Failed to save selection")}finally{t.value=!1}},250)}return{queueSave:o,isSaving:t}}function D1(e){return e==="light"||e==="dark"||e==="auto"?e:null}function E1(e,t){if(!e)return;const a=JSON.parse(JSON.stringify(e)),o=Array.isArray(t==null?void 0:t.categories)?t.categories:[],r=new Map;return o.forEach(n=>{const s=String((n==null?void 0:n.id)??"");s&&r.set(s,n)}),Array.isArray(a.categories)&&(a.categories=a.categories.map(n=>{const s=String((n==null?void 0:n.id)??"");if(!s)return n;const l=r.get(s);return l&&((n==null?void 0:n.color)==null||n.color==="")&&typeof l.color=="string"&&l.color&&(n.color=l.color),n})),Nt(a)}function L1(e){const t=le([]),a=le(!1),o=le(!1),r=le(!1),n=le([]),s=le(null);async function l(){a.value=!0;try{const h=await e.getJson(e.route("presetsList"),{});t.value=Array.isArray(h==null?void 0:h.presets)?h.presets:[]}catch(h){console.error(h),e.notifyError("Failed to load presets")}finally{a.value=!1}}async function i(h){const u=h.trim();if(u===""){e.notifyError("Enter a preset name.");return}o.value=!0;try{const g={name:u,selected:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:e.targetsConfig.value,...e.widgetTabs?{widgets:e.widgetTabs.value}:{},...e.themePreference?{theme_preference:e.themePreference.value}:{},...e.reportingConfig?{reporting_config:e.reportingConfig.value}:{},...e.deckSettings?{deck_settings:e.deckSettings.value}:{}},v=await e.postJson(e.route("presetsSave"),g);t.value=Array.isArray(v==null?void 0:v.presets)?v.presets:t.value;const k=Array.isArray(v==null?void 0:v.warnings)?v.warnings:[];n.value=k,s.value=u,e.notifySuccess(`Profile "${u}" saved`)}catch(g){console.error(g),e.notifyError("Failed to save preset")}finally{o.value=!1}}function c(h){const u=Array.isArray(h==null?void 0:h.selected)?h.selected.map(k=>String(k)):[];e.selected.value=u;const g=h!=null&&h.groups&&typeof h.groups=="object"?h.groups:{};e.groupsById.value={...g},e.targetsWeek.value=h!=null&&h.targets_week&&typeof h.targets_week=="object"?h.targets_week:{},e.targetsMonth.value=h!=null&&h.targets_month&&typeof h.targets_month=="object"?h.targets_month:{};const v=h!=null&&h.targets_config&&typeof h.targets_config=="object"?Nt(h.targets_config):pa(e.targetsConfig.value);if(e.targetsConfig.value=v,e.themePreference&&(h!=null&&h.theme_preference)){const k=h.theme_preference;e.setThemePreference?e.setThemePreference(k,{persist:!1}):e.themePreference.value=k}if(e.reportingConfig&&(h!=null&&h.reporting_config)&&(e.reportingConfig.value=us(h.reporting_config,e.reportingConfig.value)),e.deckSettings&&(h!=null&&h.deck_settings)&&(e.deckSettings.value=fs(h.deck_settings,e.deckSettings.value)),e.widgetTabs&&(h!=null&&h.widgets)){const k=e.widgetTabs.value||tn("standard");e.widgetTabs.value=nr(h.widgets,k)}e.userChangedSelection.value=!1}async function d(h){const u=h.trim();if(u!==""){r.value=!0;try{const g=await e.getJson(e.route("presetsLoad",u),{}),v=(g==null?void 0:g.preset)??{},k=Array.isArray(v==null?void 0:v.warnings)?v.warnings:Array.isArray(g==null?void 0:g.warnings)?g.warnings:[];if(k.length){const C=`Some items in the saved profile are no longer available:

${k.map(M=>` ${M}`).join(`
`)}

Apply the remaining values?`;if(!window.confirm(C)){n.value=k,r.value=!1;return}}c(v),n.value=k,s.value=u,e.notifySuccess(`Profile "${u}" applied`),e.queueSave(!0),l().catch(C=>console.warn("[opsdash] refresh presets after load failed",C))}catch(g){console.error(g),e.notifyError("Failed to load preset")}finally{r.value=!1}}}async function p(h){const u=h.trim();if(u!=="")try{const g=await e.deleteJson(e.route("presetsDelete",u));t.value=Array.isArray(g==null?void 0:g.presets)?g.presets:t.value,e.notifySuccess(`Profile "${u}" deleted`),s.value===u&&(s.value=null)}catch(g){console.error(g),e.notifyError("Failed to delete preset")}}function m(){n.value=[]}return{presets:t,presetsLoading:a,presetSaving:o,presetApplying:r,presetWarnings:n,lastLoadedPreset:s,refreshPresets:l,savePreset:i,loadPreset:d,deletePreset:p,clearPresetWarnings:m}}function N1(){let e=null;function t(){typeof window>"u"||typeof window.requestAnimationFrame!="function"||(e!==null&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(()=>{e=null,window.dispatchEvent(new Event("resize"))}))}return Tt(()=>{e!==null&&typeof window<"u"&&typeof window.cancelAnimationFrame=="function"&&(window.cancelAnimationFrame(e),e=null)}),{scheduleDraw:t}}const I1={load:"/apps/opsdash/overview/load",loadData:"/apps/opsdash/overview/load",persist:"/apps/opsdash/overview/persist",notes:"/apps/opsdash/overview/notes",notesSave:"/apps/opsdash/overview/notes",presetsList:"/apps/opsdash/overview/presets",presetsSave:"/apps/opsdash/overview/presets",presetsLoad:"/apps/opsdash/overview/presets",presetsDelete:"/apps/opsdash/overview/presets",ping:"/apps/opsdash/overview/ping"};function O1(){var t,a;const e=typeof window<"u"?window:{};return e.OC&&(e.OC.webroot||((a=(t=e.OC).getRootPath)==null?void 0:a.call(t)))||e._oc_webroot||""}function B1(){const e=A(()=>O1());function t(s,l){const i=typeof window<"u"?window:{},c=I1[s];if(s==="presetsLoad"||s==="presetsDelete"){const d=`${c}/${encodeURIComponent(String(l??""))}`;return i.OC&&typeof i.OC.generateUrl=="function"?i.OC.generateUrl(d):`${e.value}${d}`}return i.OC&&typeof i.OC.generateUrl=="function"?i.OC.generateUrl(c):`${e.value}${c}`}function a(s){const l=new URLSearchParams;return Object.entries(s||{}).forEach(([i,c])=>{Array.isArray(c)?c.forEach(d=>l.append(i,String(d))):c!=null&&l.set(i,String(c))}),l.toString()}async function o(s,l){const i=a(l),c=i?`${s}${s.includes("?")?"&":"?"}${i}`:s,d=await fetch(c,{method:"GET",credentials:"same-origin"});if(!d.ok)throw new Error(`HTTP ${d.status}`);return await d.json()}async function r(s,l){var m;const i=typeof window<"u"?window:{},c=((m=i.OC)==null?void 0:m.requestToken)||i.oc_requesttoken||"",d={"Content-Type":"application/json"};c&&(d.requesttoken=c);const p=await fetch(s,{method:"POST",credentials:"same-origin",headers:d,body:JSON.stringify(l||{})});if(!p.ok)throw new Error(`HTTP ${p.status}`);return await p.json()}async function n(s){var m;const l=typeof window<"u"?window:{},i=((m=l.OC)==null?void 0:m.requestToken)||l.oc_requesttoken||"",c={};i&&(c.requesttoken=i);const d=await fetch(s,{method:"DELETE",credentials:"same-origin",headers:c});if(!d.ok)throw new Error(`HTTP ${d.status}`);const p=await d.text();return p?JSON.parse(p):{}}return{route:t,getJson:o,postJson:r,deleteJson:n,root:e}}function Xc(e){const t=typeof document<"u"?document.getElementById("app"):null;if(!t||!t.dataset)return"";const a=t.dataset;return a?String(a[e]??""):""}function P1(e){const t=le(0),a=A(()=>{var p;const i=[],c=typeof window<"u"?window:{};try{if((p=c.OC)!=null&&p.imagePath){const m=c.OC.imagePath("opsdash","app.svg");m&&i.push(m)}}catch{}const d=e.root.value;return i.push(`${d}/apps/opsdash/img/app.svg`),i.push(`${d}/apps-extra/opsdash/img/app.svg`),i.push(`${d}/apps-writable/opsdash/img/app.svg`),i}),o=A(()=>a.value[Math.min(t.value,a.value.length-1)]||"");function r(){t.value+1<a.value.length&&t.value++}const n=le(Xc("opsdashVersion")||(e.pkgVersion?String(e.pkgVersion):"")),s=le(Xc("opsdashChangelog"));async function l(){if(!(n.value&&s.value))try{const i=await e.getJson(e.pingUrl(),{});!n.value&&typeof(i==null?void 0:i.version)=="string"&&(n.value=i.version),!s.value&&typeof(i==null?void 0:i.changelog)=="string"&&(s.value=i.changelog)}catch{}}return l(),{iconSrc:o,onIconError:r,appVersion:n,changelogUrl:s}}function F1(e){const t=A(()=>{var r,n;return z1({perDaySeries:(r=e.charts.value)==null?void 0:r.perDaySeries,forecastMode:((n=e.activityCardConfig.value)==null?void 0:n.forecastMode)??"total",targetsConfig:e.targetsConfig.value,currentTargets:e.currentTargets.value,calendarCategoryMap:e.calendarCategoryMap.value})}),a=A(()=>{var r;return{pie:((r=e.charts.value)==null?void 0:r.pie)||null,stacked:t.value}}),o=A(()=>{var v,k;const r={},n=(v=e.charts.value)==null?void 0:v.pie,s=(k=e.charts.value)==null?void 0:k.perDaySeries,l=t.value||s,i=n&&Array.isArray(n.data)&&Array.isArray(n.ids),c=l&&Array.isArray(l.series)&&Array.isArray(l.labels),d=e.calendarCategoryMap.value,p=i?(n.ids||[]).map(C=>String(C??"")):[],m=i?(n.labels||[]).map(C=>String(C??"")):[],h=i?(n.data||[]).map(C=>Number(C)||0):[],u=i?n.colors||[]:[],g=c?l.series:[];return e.calendarGroups.value.forEach(C=>{const M=[];i&&p.forEach((y,E)=>{d[y]===C.id&&M.push(E)});const T=M.length?{ids:M.map(y=>p[y]),labels:M.map(y=>m[y]),data:M.map(y=>h[y]),colors:M.map(y=>{var E;return u[y]||((E=e.colorsById.value)==null?void 0:E[p[y]])||"#60a5fa"})}:null,P=c?g.filter(y=>d[String((y==null?void 0:y.id)??"")]===C.id):[],N=P.length?{labels:l.labels,series:P}:null;r[C.id]={pie:T,stacked:N}}),r});return{calendarChartData:a,categoryChartsById:o}}const H1=/^\d{4}-\d{2}-\d{2}$/,W1="__uncategorized__";function z1(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const a=t.labels.map(g=>String(g??"")),o=t.series.map(g=>{const v=String((g==null?void 0:g.id)??"");return{...g,id:v,name:String((g==null?void 0:g.name)??(g==null?void 0:g.label)??v),color:String((g==null?void 0:g.color)??""),data:a.map((k,C)=>{var T;const M=Number(((T=g==null?void 0:g.data)==null?void 0:T[C])??0);return Number.isFinite(M)?Math.max(0,M):0})}}),r=R1(e.forecastMode),n=Wt(new Date),s=a.map(g=>H1.test(g)&&g>n),l=[];if(s.forEach((g,v)=>{g&&l.push(v)}),!l.length||r==="off")return{labels:a,series:o};const i=e.targetsConfig??ga(),c=U1(e.currentTargets),d=e.calendarCategoryMap??{},p=l.length,m=new Map;o.forEach(g=>{let v=0;g.data.forEach((k,C)=>{s[C]||(v+=Math.max(0,k))}),m.set(g.id,v)});const h=Array.from(m.values()).reduce((g,v)=>g+v,0),u=new Map;if(o.forEach(g=>{u.set(g.id,j1(a.length))}),r==="total"){const g=Math.max(0,Number(i.totalHours??0)),v=Math.max(0,g-h);if(v>1e-4){const k=v/p,C=o.map(T=>T.id),M=Qc(C,m,c);C.forEach(T=>{const P=M[T]??0;if(P<=0)return;const N=u.get(T);N&&l.forEach(y=>{N[y]=on(k*P)})})}}else if(r==="calendar")o.forEach(g=>{const v=c[g.id]??0;if(v<=0)return;const k=Math.max(0,m.get(g.id)??0),C=Math.max(0,v-k);if(C<=1e-4)return;const M=C/p,T=u.get(g.id);T&&l.forEach(P=>{T[P]=on(M)})});else if(r==="category"){const g=new Set,v=Array.isArray(i.categories)?i.categories:[],k=new Map;v.forEach(M=>{k.set(String(M.id),Math.max(0,Number(M.targetHours??0)))});const C=new Map;o.forEach(M=>{const T=d==null?void 0:d[M.id],P=T?String(T):W1;C.has(P)||C.set(P,[]),C.get(P).push(M.id)}),C.forEach((M,T)=>{if(!M.length)return;const P=k.get(T)??0;if(P<=0)return;const N=M.reduce((j,S)=>j+Math.max(0,m.get(S)??0),0),y=Math.max(0,P-N);if(y<=1e-4)return;const E=y/p,B={};M.forEach(j=>{B[j]=c[j]??0});const z=Qc(M,m,B);M.forEach(j=>{const S=z[j]??0;if(S<=0)return;const $=u.get(j);$&&(l.forEach(x=>{$[x]=on(E*S)}),g.add(j))})}),o.forEach(M=>{if(g.has(M.id))return;const T=c[M.id]??0;if(T<=0)return;const P=Math.max(0,m.get(M.id)??0),N=Math.max(0,T-P);if(N<=1e-4)return;const y=N/p,E=u.get(M.id);E&&l.forEach(B=>{E[B]=on(y)})})}return o.forEach(g=>{const v=u.get(g.id);v&&v.some(k=>k>1e-4)&&(g.forecast=v)}),{labels:a,series:o}}function R1(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function j1(e){return Array.from({length:e},()=>0)}function on(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function U1(e){const t={};return e&&Object.entries(e).forEach(([a,o])=>{const r=Number(o);Number.isFinite(r)&&r>0&&(t[String(a)]=r)}),t}function Qc(e,t,a){const o={},r=e.reduce((l,i)=>l+Math.max(0,t.get(i)??0),0);if(r>1e-4)return e.forEach(l=>{const i=Math.max(0,t.get(l)??0);o[l]=i/r}),o;const n=e.reduce((l,i)=>l+Math.max(0,(a==null?void 0:a[i])??0),0);if(n>1e-4)return e.forEach(l=>{const i=Math.max(0,(a==null?void 0:a[l])??0);o[l]=i/n}),o;const s=e.length?1/e.length:0;return e.forEach(l=>{o[l]=s}),o}const Sa="__uncategorized__",ed="Unassigned";function V1(e){const t=A(()=>{var d;const c=(d=e.targetsConfig.value)==null?void 0:d.categories;return Array.isArray(c)?c:[]}),a=A(()=>{const c={};return t.value.forEach(d=>{c[String(d.id)]=d.label||String(d.id)}),c}),o=A(()=>{var p;const c=new Map;return(((p=e.targetsSummary.value)==null?void 0:p.categories)||[]).forEach(m=>c.set(String(m.id),m)),c}),r=A(()=>{const c=new Map;return t.value.forEach(d=>{(Array.isArray(d.groupIds)?d.groupIds:[]).forEach(m=>{const h=Math.max(0,Math.min(9,Math.trunc(Number(m)||0)));c.set(h,String(d.id))})}),c}),n=A(()=>{var p;const c=e.calendars.value;if(!Array.isArray(c))return(p=e.isDebug)!=null&&p.call(e)&&console.warn("[opsdash] calendars not array",c),{};const d={};return c.forEach(m=>{var g;const h=String((m==null?void 0:m.id)??"");if(!h)return;const u=((g=e.colorsById.value)==null?void 0:g[h])||String((m==null?void 0:m.color)||"");d[h]={name:String((m==null?void 0:m.displayname)||(m==null?void 0:m.name)||(m==null?void 0:m.calendar)||h),color:u||void 0}}),d}),s=A(()=>{var u;const c={},d=r.value,p=e.groupsById.value||{},m=g=>{const v=p==null?void 0:p[g],k=Math.max(0,Math.min(9,Math.trunc(Number(v)||0))),C=d.get(k);c[g]=C||Sa},h=e.calendars.value;return Array.isArray(h)?(h.forEach(g=>{const v=String((g==null?void 0:g.id)??"");v&&m(v)}),(e.selected.value||[]).forEach(g=>{const v=String(g??"");v&&(c[v]||m(v))}),c):((u=e.isDebug)!=null&&u.call(e)&&console.warn("[opsdash] calendarCategoryMap: calendars not array",h),c)}),l=A(()=>{const c=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"],d={};let p=0;const m=h=>{const u=String((h==null?void 0:h.id)??"");if(!u)return;if(d[u])return d[u];const g=typeof(h==null?void 0:h.color)=="string"&&h.color?h.color:void 0;if(g)return d[u]=g,g;const v=Object.entries(s.value).filter(([,C])=>C===u).map(([C])=>C);for(const C of v){const M=n.value[C];if(M!=null&&M.color)return d[u]=M.color,M.color}const k=c[p%c.length];return p+=1,d[u]=k,k};return t.value.forEach(h=>m(h)),Object.values(s.value||{}).some(h=>h===Sa)&&m({id:Sa}),d}),i=A(()=>{var P,N,y,E,B,z,j,S,$,x;const c=[],d=s.value,p=o.value,m=e.byCal.value;if(!Array.isArray(m))return(P=e.isDebug)!=null&&P.call(e)&&console.warn("[opsdash] aggregateCategoryRows: byCal not array",m),c;const h=new Map;m.forEach(I=>{const J=String((I==null?void 0:I.id)??(I==null?void 0:I.calendar_id)??(I==null?void 0:I.calendar)??"");if(!J)return;const O=d[J]||Sa;h.has(O)||h.set(O,[]),h.get(O).push({...I,calendarId:J})}),(N=e.isDebug)!=null&&N.call(e)&&console.log("[opsdash] aggregateCategoryRows",{rowsSourceIsArray:Array.isArray(m),rowsSourceLength:m.length,byCat:h,assignments:d});const u=((E=(y=e.targetsSummary.value)==null?void 0:y.total)==null?void 0:E.daysLeft)??0,g=((z=(B=e.targetsSummary.value)==null?void 0:B.total)==null?void 0:z.calendarPercent)??0,v=((S=(j=e.targetsSummary.value)==null?void 0:j.total)==null?void 0:S.paceMode)??((x=($=e.targetsConfig.value)==null?void 0:$.pace)==null?void 0:x.mode)??"days_only",k=I=>Math.round(I*100)/100,C=e.currentTargets.value||{},M=(I,J,O)=>{const W=O.reduce((se,K)=>{const Z=Number(C[K.calendarId]??0);return Number.isFinite(Z)?se+Math.max(0,Z):se},0),oe=O.reduce((se,K)=>{const Z=Number((K==null?void 0:K.total_hours)??(K==null?void 0:K.hours)??0);return Number.isFinite(Z)?se+Math.max(0,Z):se},0),V=W>0?Math.max(0,Math.min(100,oe/W*100)):0,q=oe-W,Y=Math.max(0,W-oe),L=W<=0?"none":V>=100?"done":q>=0?"on_track":"behind",U=L==="done"?"Done":L==="on_track"?"On Track":L==="behind"?"Behind":"",ee=u>0?Y/u:0;return{id:I,label:J,actualHours:k(oe),targetHours:k(W),percent:V,deltaHours:k(q),remainingHours:k(Y),needPerDay:k(ee),daysLeft:u,calendarPercent:Math.max(0,Math.min(100,g)),gap:k(V-g),status:L,statusLabel:U,includeWeekend:!0,paceMode:v}};if(t.value.map(I=>String(I.id)).forEach(I=>{const J=a.value[I]||I,O=h.get(I)||[],W=p.get(I)||M(I,J,O);c.push({id:I,label:J,rows:O,summary:W,color:l.value[I]})}),h.has(Sa)){const I=h.get(Sa)||[];c.push({id:Sa,label:ed,rows:I,summary:M(Sa,ed,I),color:l.value[Sa]})}return c});return{categoryConfigList:t,categoryLabelById:a,categoryColorMap:l,calendarCategoryMap:s,calendarGroups:i}}function ws(e){const t=Number(e);return Number.isFinite(t)?Math.round(t):0}function mt(e){const t=Number(e);return Number.isFinite(t)?t:null}function yo(e){if(e==null)return null;const t=String(e).trim();return t===""?null:t}function K1(e){const t=A(()=>{var M;const u=(M=e.charts.value)==null?void 0:M.pie;if(!u||!Array.isArray(u.data)||!Array.isArray(u.labels))return[];const g=u.data.map(T=>Number(T)||0),v=u.labels.map(T=>String(T||"")),k=g.reduce((T,P)=>T+Math.max(0,P),0);if(k<=0)return[];const C=g.map((T,P)=>({name:v[P]||"",value:Math.max(0,T)}));return C.sort((T,P)=>P.value-T.value),C.slice(0,3).map(T=>({name:T.name,share:T.value/k*100}))}),a=A(()=>{var g;if(t.value.length)return t.value.map(v=>`${v.name} ${ad(v.share)}`).join(", ");const u=(g=e.stats)==null?void 0:g.top_calendar;if(u&&u.calendar){const v=Number(u.share??0);return`${u.calendar} ${ad(v)}`}return""}),o=A(()=>{var u;return e.selected.value.length||(((u=e.calendars.value)==null?void 0:u.length)??0)}),r=A(()=>(e.byDay.value||[]).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),n=A(()=>{const u=r.value.map(g=>Number(g)||0);return e.activeDayMode.value==="active"?u.filter(g=>g>0):u}),s=A(()=>(e.byDay.value||[]).filter(u=>{const g=td(String(u==null?void 0:u.date));return g>=1&&g<=5}).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),l=A(()=>(e.byDay.value||[]).filter(u=>{const g=td(String(u==null?void 0:u.date));return g===0||g===6}).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),i=A(()=>e.activeDayMode.value==="active"?s.value.filter(u=>u>0):s.value),c=A(()=>e.activeDayMode.value==="active"?l.value.filter(u=>u>0):l.value),d=A(()=>{var v,k,C,M;const u=((v=e.stats)==null?void 0:v.balance_index)??((k=e.stats)==null?void 0:k.balanceIndex)??((M=(C=e.stats)==null?void 0:C.balance_overview)==null?void 0:M.index),g=Number(u);return Number.isFinite(g)?g:null}),p=A(()=>{var u,g,v,k;return{rangeLabel:e.rangeLabel.value,rangeStart:e.rangeStart.value,rangeEnd:e.rangeEnd.value,offset:e.offset.value,totalHours:Number(((u=e.stats)==null?void 0:u.total_hours)??0),avgDay:ks(n.value),avgEvent:Number(((g=e.stats)==null?void 0:g.avg_per_event)??0),medianDay:_s(n.value),busiest:((v=e.stats)==null?void 0:v.busiest_day)??null,workdayAvg:ks(i.value),workdayMedian:_s(i.value),weekendAvg:ks(c.value),weekendMedian:_s(c.value),weekendShare:((k=e.stats)==null?void 0:k.weekend_share)??null,activeCalendars:o.value,calendarSummary:a.value,balanceIndex:d.value,delta:(()=>{var M;const C=(M=e.stats)==null?void 0:M.delta;return!C||typeof C!="object"?null:{totalHours:mt(C.total_hours)??0,avgPerDay:mt(C.avg_per_day)??0,avgPerEvent:mt(C.avg_per_event)??0,events:ws(C.events)}})(),topCategory:e.topCategory.value?{label:e.topCategory.value.label,actualHours:e.topCategory.value.summary.actualHours,targetHours:e.topCategory.value.summary.targetHours,percent:e.topCategory.value.summary.percent,statusLabel:e.topCategory.value.summary.statusLabel,status:e.topCategory.value.summary.status,color:e.topCategory.value.color}:null}}),m=A(()=>{const u=e.stats,g=u==null?void 0:u.delta,v=mt((g==null?void 0:g.weekend_share)??(g==null?void 0:g.weekendShare)),k=mt((g==null?void 0:g.evening_share)??(g==null?void 0:g.eveningShare)),C=v!=null||k!=null?{weekendShare:v,eveningShare:k}:null;return{rangeLabel:e.rangeLabel.value,events:ws(u.events),activeDays:mt(u.active_days),typicalStart:yo(u.typical_start),typicalEnd:yo(u.typical_end),weekendShare:mt(u.weekend_share),eveningShare:mt(u.evening_share),delta:C,earliestStart:yo(u.earliest_start),latestEnd:yo(u.latest_end),overlapEvents:mt(u.overlap_events),longestSession:mt(u.longest_session),lastDayOff:yo(u.last_day_off),lastHalfDayOff:yo(u.last_half_day_off)}}),h=A(()=>{var g;const u=(g=e.stats)==null?void 0:g.day_off_trend;return Array.isArray(u)?u.map(v=>{const k=Number((v==null?void 0:v.totalDays)??(v==null?void 0:v.total_days)??0),C=Number((v==null?void 0:v.daysOff)??(v==null?void 0:v.days_off)??0),M=Number((v==null?void 0:v.daysWorked)??(v==null?void 0:v.days_worked)??0);return{offset:Number((v==null?void 0:v.offset)??0)||0,label:String((v==null?void 0:v.label)??""),from:String((v==null?void 0:v.from)??""),to:String((v==null?void 0:v.to)??""),totalDays:Number.isFinite(k)?Math.max(0,k):0,daysOff:Number.isFinite(C)?Math.max(0,C):0,daysWorked:Number.isFinite(M)?Math.max(0,M):0}}).filter(v=>v.totalDays>0):[]});return{topThree:t,topCalendarsSummary:a,timeSummary:p,activitySummary:m,activityDayOffTrend:h}}function ks(e){return e.length?e.reduce((a,o)=>a+o,0)/e.length:0}function _s(e){if(!e.length)return 0;const t=[...e].sort((o,r)=>o-r),a=Math.floor(t.length/2);return t.length%2?t[a]:(t[a-1]+t[a])/2}function td(e){return new Date(`${e}T00:00:00Z`).getUTCDay()}function ad(e){return`${Number(e||0).toFixed(1)}%`}function q1(e){return{balanceOverview:A(()=>{var d,p,m,h;const a=(d=e.stats)==null?void 0:d.balance_overview;if(!a||typeof a!="object")return null;const o=Array.isArray(a.categories)?a.categories.map(u=>({id:String((u==null?void 0:u.id)??""),label:String((u==null?void 0:u.label)??""),hours:mt(u==null?void 0:u.hours)??0,share:mt(u==null?void 0:u.share)??0,prevShare:mt(u==null?void 0:u.prev_share)??0,delta:mt(u==null?void 0:u.delta)??0,color:e.categoryColorMap.value[String((u==null?void 0:u.id)??"")]})):[],r=Array.isArray(a.relations)?a.relations.map(u=>({label:String((u==null?void 0:u.label)??""),value:String((u==null?void 0:u.value)??"")})):[],n=Array.isArray((p=a.trend)==null?void 0:p.history)?a.trend.history:Array.isArray(a==null?void 0:a.trendHistory)?a.trendHistory:[],s={delta:Array.isArray((m=a.trend)==null?void 0:m.delta)?a.trend.delta.map(u=>({id:String((u==null?void 0:u.id)??""),label:String((u==null?void 0:u.label)??""),delta:mt(u==null?void 0:u.delta)??0})):[],badge:String(((h=a.trend)==null?void 0:h.badge)??""),history:n.map(u=>({offset:ws(u==null?void 0:u.offset)??0,label:String((u==null?void 0:u.label)??""),categories:Array.isArray(u==null?void 0:u.categories)?u.categories.map(g=>({id:String((g==null?void 0:g.id)??""),label:String((g==null?void 0:g.label)??""),share:mt(g==null?void 0:g.share)??0})):[]}))},l=Array.isArray(a.daily)?a.daily.map(u=>({date:String((u==null?void 0:u.date)??""),weekday:String((u==null?void 0:u.weekday)??""),total_hours:mt(u==null?void 0:u.total_hours)??0,categories:Array.isArray(u==null?void 0:u.categories)?u.categories.map(g=>({id:String((g==null?void 0:g.id)??""),label:String((g==null?void 0:g.label)??""),hours:mt(g==null?void 0:g.hours)??0,share:mt(g==null?void 0:g.share)??0})):[]})):[],i=Array.isArray(a.warnings)?a.warnings.map(u=>String(u)):[];return{index:mt(a.index)??0,categories:o,relations:r,trend:s,daily:l,warnings:i}})}}const lr=le("auto"),rn=le("light"),od=le(!1),ir=A(()=>lr.value==="auto"?rn.value:lr.value);function G1(){return Zc()??"auto"}function nn(e){if(typeof document>"u")return;const a=[document.getElementById("opsdash"),document.body].filter(Boolean);a.length&&(a.forEach(o=>o.classList.remove("opsdash-theme-light","opsdash-theme-dark")),e==="dark"?a.forEach(o=>o.classList.add("opsdash-theme-dark")):a.forEach(o=>o.classList.add("opsdash-theme-light")))}function xs(){rn.value=ys()}let Zt=null,Ya=null;function J1(){typeof window>"u"||Zt||(Zt=window.matchMedia("(prefers-color-scheme: dark)"),Ya=()=>xs(),typeof Zt.addEventListener=="function"?Zt.addEventListener("change",Ya):typeof Zt.addListener=="function"&&Zt.addListener(Ya))}function Y1(){Zt&&(Ya&&(typeof Zt.removeEventListener=="function"?Zt.removeEventListener("change",Ya):typeof Zt.removeListener=="function"&&Zt.removeListener(Ya)),Zt=null,Ya=null)}function Z1(){od.value||(lr.value=G1(),rn.value=ys(),nn(ir.value),od.value=!0),Dt(()=>{typeof window<"u"&&window.addEventListener("oc:theme:changed",xs),J1(),nn(ir.value)}),Tt(()=>{typeof window<"u"&&window.removeEventListener("oc:theme:changed",xs),Y1()}),$e(ir,t=>{nn(t)});function e(t){lr.value=t,nn(ir.value)}return{preference:lr,effectiveTheme:ir,systemTheme:rn,setThemePreference:e}}const Cs=e=>e==="light"||e==="dark"?e:"auto";function X1(e){const t=le(!1),a=le(Cs(e.serverPreference.value));let o=null;const r=typeof e.debounceMs=="number"?e.debounceMs:250,n=()=>{o&&(clearTimeout(o),o=null)};Wr()&&Tt(()=>{n()}),$e(e.serverPreference,i=>{const c=Cs(i);a.value=c,e.localPreference.value!==c&&(t.value=!0,e.applyLocalPreference(c),t.value=!1)},{immediate:!0});function s(i){t.value||i!==a.value&&(n(),o=setTimeout(async()=>{o=null;try{await e.postJson(e.route("persist"),{theme_preference:i}),a.value=i,e.notifySuccess("Theme preference saved")}catch(c){console.error(c),e.notifyError("Failed to save theme preference")}},r))}function l(i,c){const d=Cs(i);e.applyLocalPreference(d),(c==null?void 0:c.persist)!==!1&&s(d)}return{setThemePreference:l}}function Q1(e){const{preference:t,effectiveTheme:a,systemTheme:o,setThemePreference:r}=Z1(),{setThemePreference:n}=X1({serverPreference:e.serverPreference,localPreference:t,applyLocalPreference:r,route:e.route,postJson:e.postJson,notifySuccess:e.notifySuccess,notifyError:e.notifyError});function s(l,i){n(l,i)}return{themePreference:t,effectiveTheme:a,systemTheme:o,setThemePreference:s}}function e0(e){const{autoWizardNeeded:t,manualWizardOpen:a,onboardingRunId:o,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:s}=Rh(),l=A(()=>{var $;return!!(($=e.onboardingState.value)!=null&&$.completed)}),i=e.actions.isOnboardingSaving,c=e.actions.isSnapshotSaving,d=e.actions.snapshotNotice,p=A(()=>(e.calendars.value||[]).map($=>({id:String(($==null?void 0:$.id)??""),displayname:String(($==null?void 0:$.displayname)??($==null?void 0:$.name)??($==null?void 0:$.id)??""),color:typeof($==null?void 0:$.color)=="string"?$.color:""})).filter($=>$.id)),m=A(()=>[...e.selected.value]),h=A(()=>{var $;return(($=e.onboardingState.value)==null?void 0:$.strategy)??"total_only"}),u=A(()=>{var $;return(($=e.targetsConfig.value)==null?void 0:$.allDayHours)??8}),g=A(()=>{var $;return(($=e.targetsConfig.value)==null?void 0:$.totalHours)??40}),v=A(()=>{var $,x,I,J;return{activityCard:($=e.targetsConfig.value)==null?void 0:$.activityCard,balanceTrendLookback:((J=(I=(x=e.targetsConfig.value)==null?void 0:x.balance)==null?void 0:I.trend)==null?void 0:J.lookbackWeeks)??3}}),k=$=>{if(typeof $!="string")return null;const x=$.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(x))return null;if(x.length===4){const[,I,J,O]=x;return`#${I}${I}${J}${J}${O}${O}`.toUpperCase()}return x.toUpperCase()},C=A(()=>{var x;return(Array.isArray((x=e.targetsConfig.value)==null?void 0:x.categories)?e.targetsConfig.value.categories:[]).map((I,J)=>({id:String((I==null?void 0:I.id)??`cat_${J}`),label:String((I==null?void 0:I.label)??`Category ${J+1}`),targetHours:Number.isFinite(I==null?void 0:I.targetHours)?Number(I.targetHours):0,includeWeekend:!!(I!=null&&I.includeWeekend),paceMode:(I==null?void 0:I.paceMode)==="time_aware"?"time_aware":"days_only",color:k(I==null?void 0:I.color)??null}))}),M=A(()=>{var O;const $={},x=new Map;(Array.isArray((O=e.targetsConfig.value)==null?void 0:O.categories)?e.targetsConfig.value.categories:[]).forEach(W=>{const oe=Array.isArray(W==null?void 0:W.groupIds)?Number(W.groupIds[0]):Number(W==null?void 0:W.groupId);Number.isFinite(oe)&&x.set(oe,String((W==null?void 0:W.id)??""))});const J=new Set(e.selected.value||[]);return Object.entries(e.groupsById.value||{}).forEach(([W,oe])=>{if(!J.has(W))return;const V=x.get(Number(oe));V&&($[W]=V)}),$}),T=A(()=>({...e.deckSettings.value||{}})),P=A(()=>({...e.reportingConfig.value||{}})),N=A(()=>{var $;return(($=e.onboardingState.value)==null?void 0:$.dashboardMode)||"standard"});function y($){if(!$)return!0;const x=$.version_required??Ba;return!$.completed||($.version??0)<x}function E($){const x=$??e.onboardingState.value;if(!e.hasInitialLoad.value&&!x)return;const I=y(x);t.value=I||!!(x!=null&&x.resetRequested),(I||x!=null&&x.resetRequested)&&(s.value=null),x!=null&&x.resetRequested&&(a.value=!0)}$e(()=>e.onboardingState.value,$=>{e.hasInitialLoad.value&&E($)});async function B($){try{await e.actions.complete($),a.value=!1,t.value=!1}catch(x){console.error("[opsdash] onboarding complete failed",x)}}async function z(){try{await e.actions.skip(),a.value=!1,t.value=!1}catch($){console.error("[opsdash] onboarding skip failed",$)}}function j(){t.value||(a.value=!1)}async function S(){try{await e.actions.saveSnapshot()}catch($){console.error("[opsdash] onboarding snapshot failed",$)}}return{autoWizardNeeded:t,manualWizardOpen:a,onboardingRunId:o,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:s,hasExistingConfig:l,wizardCalendars:p,wizardInitialSelection:m,wizardInitialStrategy:h,wizardInitialCategories:C,wizardInitialAssignments:M,wizardInitialAllDayHours:u,wizardInitialTotalHours:g,wizardInitialTargetsConfig:v,wizardInitialDeckSettings:T,wizardInitialReportingConfig:P,wizardInitialDashboardMode:N,isOnboardingSaving:i,isSnapshotSaving:c,snapshotNotice:d,evaluateOnboarding:E,handleWizardComplete:B,handleWizardSkip:z,handleWizardClose:j,handleWizardSaveSnapshot:S}}function t0(e){const t=A(()=>!e.navOpen.value),a=A(()=>e.range.value==="week"?"Switch to month":"Switch to week"),o=A(()=>!e.from.value||!e.to.value?"":Ga(e.from.value,e.to.value,{year:"numeric",month:"2-digit",day:"2-digit"}));function r(){try{const c=e.performLoad();if(c&&typeof c.then=="function")return c.catch(d=>{console.error("[opsdash] range load failed",d)})}catch(c){console.error("[opsdash] range load failed",c)}}function n(){r()}function s(){e.range.value=e.range.value==="week"?"month":"week",e.offset.value=0,r()}function l(){e.offset.value=(e.offset.value||0)-1,r()}function i(){e.offset.value=(e.offset.value||0)+1,r()}return{showCollapsedRangeControls:t,rangeToggleLabel:a,rangeDateLabel:o,loadCurrent:n,toggleRangeCollapsed:s,goPrevious:l,goNext:i}}const rd=["cals","groups","targets_week","targets_month","targets_config","theme_preference","onboarding","widgets"],a0=new Set(["auto","light","dark"]);function o0(e){if(!e||typeof e!="object")return{cleaned:{},ignored:["<invalid-payload>"]};const t=e,a={},o=[];if(rd.forEach(r=>{t[r]!==void 0&&(a[r]=t[r])}),Object.keys(t).forEach(r=>{rd.includes(r)||o.push(r)}),a.cals&&!Array.isArray(a.cals)&&(o.push("cals"),delete a.cals),"groups"in a&&(!a.groups||typeof a.groups!="object")&&(o.push("groups"),delete a.groups),"targets_week"in a&&(!a.targets_week||typeof a.targets_week!="object")&&(o.push("targets_week"),delete a.targets_week),"targets_month"in a&&(!a.targets_month||typeof a.targets_month!="object")&&(o.push("targets_month"),delete a.targets_month),"targets_config"in a&&(!a.targets_config||typeof a.targets_config!="object")&&(o.push("targets_config"),delete a.targets_config),a.theme_preference&&!a0.has(String(a.theme_preference))&&(o.push("theme_preference"),delete a.theme_preference),"onboarding"in a&&(a.onboarding==null||typeof a.onboarding!="object")&&(o.push("onboarding"),delete a.onboarding),"widgets"in a){const r=a.widgets,n=Array.isArray(r),s=r&&typeof r=="object"&&Array.isArray(r.tabs);!n&&!s&&(o.push("widgets"),delete a.widgets)}return{cleaned:a,ignored:o}}function r0(e,t="0.4.4"){return{version:t,generated:new Date().toISOString(),payload:e}}function n0(e){function t(){const s={cals:[...e.selected.value],groups:{...e.groupsById.value},targets_week:{...e.targetsWeek.value},targets_month:{...e.targetsMonth.value},targets_config:pa(e.targetsConfig.value),theme_preference:e.themePreference.value};return e.onboardingState.value&&(s.onboarding={...e.onboardingState.value}),e.widgetTabs&&(s.widgets=e.widgetTabs.value),s}function a(s,l){if(e.createDownload){e.createDownload(s,l);return}const i=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),c=URL.createObjectURL(i),d=document.createElement("a");d.href=c,d.download=s,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c)}function o(){try{const s=t(),l=r0(s),i=`opsdash-config-${l.generated.slice(0,10)}.json`;a(i,l),e.notifySuccess("Configuration exported")}catch(s){console.error(s),e.notifyError("Failed to export configuration")}}async function r(s){const{cleaned:l,ignored:i}=o0(s);if(!Object.keys(l).length){e.notifyError("No recognised configuration keys found in file");return}if(l.cals&&(e.selected.value=l.cals.map(c=>String(c))),l.groups){const c={};Object.entries(l.groups).forEach(([d,p])=>{const m=Number(p);c[String(d)]=Number.isFinite(m)?m:0}),e.groupsById.value=c}if(l.targets_week){const c={};Object.entries(l.targets_week).forEach(([d,p])=>{const m=Number(p);Number.isFinite(m)&&(c[String(d)]=m)}),e.targetsWeek.value=c}if(l.targets_month){const c={};Object.entries(l.targets_month).forEach(([d,p])=>{const m=Number(p);Number.isFinite(m)&&(c[String(d)]=m)}),e.targetsMonth.value=c}if(l.targets_config&&(e.targetsConfig.value=Nt(l.targets_config)),l.theme_preference&&e.setThemePreference(l.theme_preference,{persist:!1}),l.onboarding&&typeof l.onboarding=="object"&&(e.onboardingState.value={...l.onboarding}),e.widgetTabs&&l.widgets){const c=e.widgetTabs.value||tn("standard");e.widgetTabs.value=nr(l.widgets,c)}await e.postJson(e.route("persist"),l),await e.performLoad(),i.length?e.notifyError(`Configuration imported with ignored keys: ${i.join(", ")}`):e.notifySuccess("Configuration imported")}async function n(s){try{const l=await s.text(),i=JSON.parse(l),c=i!=null&&i.payload&&typeof i.payload=="object"?i.payload:i;await r(c)}catch(l){console.error(l),e.notifyError("Failed to import configuration")}}return{collectSidebarPayload:t,exportSidebarConfig:o,importSidebarConfig:n,applyConfigSource:r}}function s0(e=null){const t=le(e);function a(o){t.value=t.value===o?null:o}return{detailsIndex:t,toggle:a}}function l0(e){const t=A(()=>e.value==="month"?"Last month":"Last week"),a=A(()=>e.value==="month"?"This month":"This week"),o=A(()=>e.value==="month"?"Notes for previous month":"Notes for previous week"),r=A(()=>e.value==="month"?"Notes for current month":"Notes for current week");return{notesLabelPrev:t,notesLabelCurr:a,notesLabelPrevTitle:o,notesLabelCurrTitle:r}}const nd="opsdash.sidebarOpen";function i0(){var e;if(typeof window>"u")return!0;try{const t=(e=window.localStorage)==null?void 0:e.getItem(nd);if(t==="true")return!0;if(t==="false")return!1}catch{return!0}return!0}function c0(){const e=le(i0());$e(e,r=>{var n;if(typeof window<"u"){try{(n=window.localStorage)==null||n.setItem(nd,r?"true":"false")}catch{}oa(()=>{window.dispatchEvent(new Event("resize"))}).catch(()=>{})}},{immediate:!1});const t=()=>{e.value=!e.value},a=A(()=>e.value?"Hide sidebar":"Show sidebar"),o=A(()=>e.value?"":"");return{navOpen:e,toggleNav:t,navToggleLabel:a,navToggleIcon:o}}const d0=[{id:"navigation",title:"Navigation",items:[{id:"nav-prev",label:"Previous period",combo:["Alt",""],description:"Go to the previous week or month"},{id:"nav-next",label:"Next period",combo:["Alt",""],description:"Go to the next week or month"},{id:"nav-toggle-range",label:"Toggle week/month",combo:["Alt","Shift","R"],description:"Switch between week and month range"}]},{id:"notes",title:"Notes",items:[{id:"notes-save",label:"Save note",combo:["Ctrl / ","S"],description:"Persist the current note draft"}]},{id:"targets",title:"Targets",items:[{id:"targets-focus",label:"Open Theme",combo:["Alt","T"],description:"Jump to theme controls"}]},{id:"misc",title:"Misc",items:[{id:"shortcuts-open",label:"Open cheat sheet",combo:["?"],description:"Display this overlay"},{id:"widget-options",label:"Open widget options",combo:["Shift","C"],description:"Toggle options for the selected widget (edit mode)"},{id:"layout-edit",label:"Toggle edit layout",combo:["Shift","E"],description:"Enter or exit widget layout editing"}]}];function u0(e){const t=le(!1),a=le(null);let o=!1;const r=!!Wr();function n(h,u="api"){var g;h&&(a.value=h),t.value=!0,(g=e.onOpen)==null||g.call(e,{source:u})}function s(){t.value=!1;const h=a.value;if(a.value=null,h&&typeof h.focus=="function")try{h.focus()}catch{}}function l(){typeof e.ensureSidebarVisible=="function"&&e.ensureSidebarVisible()}function i(h,u){u.preventDefault(),l(),h()}function c(h){var k;const u=h;if(!u)return!1;if(u.isContentEditable)return!0;const g=u.tagName;if(!g)return!1;if(["INPUT","TEXTAREA","SELECT"].includes(g))return!0;const v=(k=u.getAttribute)==null?void 0:k.call(u,"role");return!!(v&&["textbox","combobox"].includes(v))}function d(h){if(h.defaultPrevented)return;const u=c(h.target);if((h.key==="Escape"||h.key==="Esc")&&t.value){h.preventDefault(),s();return}if(!h.altKey&&!h.ctrlKey&&!h.metaKey&&!u&&(h.key==="?"||h.shiftKey&&h.key==="/")){h.preventDefault(),n(h.target instanceof HTMLElement?h.target:null,"keyboard");return}if(h.altKey&&!h.ctrlKey&&!h.metaKey){const g=h.key;if(g==="ArrowLeft"){i(e.goPrevious,h);return}if(g==="ArrowRight"){i(e.goNext,h);return}if(h.shiftKey&&(g==="R"||g==="r")){i(e.toggleRange,h);return}if(g==="T"||g==="t"){e.openConfigPanel&&(h.preventDefault(),l(),e.openConfigPanel());return}}if(h.shiftKey&&!h.altKey&&!h.metaKey&&!h.ctrlKey){if((h.key==="e"||h.key==="E")&&e.toggleEditLayout&&!u){h.preventDefault(),e.toggleEditLayout();return}if((h.key==="c"||h.key==="C")&&e.openWidgetOptions&&!u){h.preventDefault(),e.openWidgetOptions();return}}}function p(){o||typeof document>"u"||(document.addEventListener("keydown",d),o=!0)}function m(){!o||typeof document>"u"||(document.removeEventListener("keydown",d),o=!1)}return p(),r&&(Dt(()=>{p()}),Tt(()=>{m()})),{shortcutsOpen:t,openShortcuts:n,closeShortcuts:s,shortcutGroups:d0,unbindShortcuts:m}}function f0(e){const t=le(!1),a=le(!1),o=le(null);async function r(i){var c,d,p;try{t.value=!0,o.value=null,e.setThemePreference(i.themePreference,{persist:!1}),await e.postJson(e.route("persist"),{cals:i.selected,groups:i.groups,targets_week:i.targetsWeek,targets_month:i.targetsMonth,targets_config:i.targetsConfig,theme_preference:i.themePreference,deck_settings:i.deckSettings,reporting_config:i.reportingConfig,targets_config_activity:i.activityCard,onboarding:{completed:!0,version:Ba,strategy:i.strategy,dashboardMode:i.dashboardMode,completed_at:new Date().toISOString()}}),e.setSelected(i.selected),e.setTargetsWeek(i.targetsWeek),e.setTargetsMonth(i.targetsMonth),e.setTargetsConfig(i.targetsConfig),e.setGroupsById(i.groups),(c=e.setDashboardMode)==null||c.call(e,i.dashboardMode),(d=e.setOnboardingState)==null||d.call(e,{completed:!0,version:Ba,strategy:i.strategy,dashboardMode:i.dashboardMode,version_required:Ba,resetRequested:!1});const m=(p=i.profileName)==null?void 0:p.trim();i.saveProfile&&m&&await e.savePreset(m),await e.reloadAfterPersist(),e.notifySuccess("Onboarding saved")}catch(m){throw console.error(m),e.notifyError("Failed to save onboarding"),m}finally{t.value=!1}}async function n(i){var c,d,p,m,h,u,g;try{t.value=!0,o.value=null,i.theme_preference&&e.setThemePreference(i.theme_preference,{persist:!1}),await e.postJson(e.route("persist"),i),i.cals&&e.setSelected(i.cals),i.targets_week&&e.setTargetsWeek(i.targets_week),i.targets_month&&e.setTargetsMonth(i.targets_month),i.targets_config&&e.setTargetsConfig(i.targets_config),i.groups&&e.setGroupsById(i.groups),i.deck_settings&&((c=e.setDeckSettings)==null||c.call(e,i.deck_settings)),i.reporting_config&&((d=e.setReportingConfig)==null||d.call(e,i.reporting_config)),i.onboarding&&((h=e.setOnboardingState)==null||h.call(e,{completed:i.onboarding.completed??!1,version:i.onboarding.version??Ba,strategy:i.onboarding.strategy??((p=e.onboardingState.value)==null?void 0:p.strategy)??"total_only",completed_at:i.onboarding.completed_at??"",dashboardMode:i.onboarding.dashboardMode??((m=e.onboardingState.value)==null?void 0:m.dashboardMode),version_required:Ba,resetRequested:!1})),i.dashboardMode&&((u=e.setDashboardMode)==null||u.call(e,i.dashboardMode)),i.widgets&&((g=e.setWidgetTabs)==null||g.call(e,i.widgets)),e.notifySuccess("Step saved")}catch(v){throw console.error(v),e.notifyError("Failed to save step"),v}finally{t.value=!1}}async function s(){var i;try{t.value=!0,o.value=null,await e.postJson(e.route("persist"),{onboarding:{completed:!0,version:Ba,strategy:((i=e.onboardingState.value)==null?void 0:i.strategy)??"total_only",completed_at:new Date().toISOString()}}),await e.reloadAfterPersist(),e.notifySuccess("You can revisit onboarding from the Targets tab any time.")}catch(c){throw console.error(c),e.notifyError("Failed to update onboarding state"),c}finally{t.value=!1}}async function l(){try{a.value=!0,o.value=null;const c=`Before onboarding ${new Date().toISOString().slice(0,16).replace("T"," ")}`;await e.savePreset(c),o.value={type:"success",message:`Profile "${c}" saved  find it under Config & Setup.`}}catch(i){throw console.error("[opsdash] profile backup failed",i),o.value={type:"error",message:"Failed to save profile backup. Please try again."},i}finally{a.value=!1}}return{isOnboardingSaving:t,isSnapshotSaving:a,snapshotNotice:o,complete:r,saveStep:n,skip:s,saveSnapshot:l}}function g0(e){const t=le([]),a=le(!1),o=le(""),r=le(null);let n=0;const s=new Map;let l="";function i(d,p){return`${d}::${p}`}async function c(d=!1){const p=(e.from.value||"").trim(),m=(e.to.value||"").trim();if(!p||!m){t.value=[],o.value="",a.value=!1,r.value=null,l="";return}const h=i(p,m);if(!d&&s.has(h)){const g=s.get(h);t.value=g.cards,r.value=g.fetchedAt,o.value="",a.value=!1,l=h;return}const u=++n;a.value=!0,o.value="";try{const g=await hm({from:p,to:m});if(u===n){const v=new Date().toISOString();t.value=g,r.value=v,s.set(h,{cards:g,fetchedAt:v}),l=h}}catch(g){u===n&&(t.value=[],o.value=g instanceof Error?g.message:"deck_fetch_failed",e.notifyError&&e.notifyError("Unable to fetch Deck cards. Check the Deck app or try again."))}finally{u===n&&(a.value=!1)}}return $e(()=>[e.from.value,e.to.value],([d,p],[m,h])=>{if(!d||!p){t.value=[];return}d===m&&p===h||c()}),{deckCards:t,deckLoading:a,deckError:o,deckLastFetchedAt:r,refreshDeck:c}}function Ss(e){return["all","mine","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine"].includes(e)?e:"all"}function Pa(e,t,a){const o=e.status;return t==="open"?o==="active":t==="archived"?o==="archived":t==="done"?o==="done"?!0:a&&o==="archived":!1}function $s(e){return e.dueTs!=null||e.match==="due"}function Ts(e){if(e.dueTs==null)return!1;const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),o=a+24*60*60*1e3;return e.dueTs>=a&&e.dueTs<o}function p0(e){const{deckSettings:t,deckCards:a,uid:o,root:r}=e,n=le(Ss(t.value.defaultFilter));$e(()=>t.value.defaultFilter,u=>{const g=Ss(u);g!==n.value&&(n.value=g)});const s=A(()=>{const u=new Set((t.value.hiddenBoards||[]).map(g=>Number(g)).filter(g=>Number.isFinite(g)));return(a.value||[]).filter(g=>!u.has(Number(g.boardId)))}),l=A(()=>{const u=t.value.mineMode??"assignee",g=(o.value||"").trim().toLowerCase();return v=>{if(!g)return!1;const k=(v.assignees||[]).some(N=>typeof N.uid=="string"&&N.uid.toLowerCase()===g),C=typeof v.createdBy=="string"?v.createdBy.trim().toLowerCase():"",M=C&&C===g,T=typeof v.doneBy=="string"?v.doneBy.trim().toLowerCase():"",P=T&&T===g;return u==="creator"?M||P:u==="assignee"?k||P:k||M||P}}),i=A(()=>{const u=l.value,g=t.value.solvedIncludesArchived!==!1,v=n.value,k=s.value;if(v==="all")return k;if(v==="mine")return k.filter(T=>u(T));if(v.startsWith("due_today")){const T=v.endsWith("_mine");return k.filter(P=>{const N=Ts(P),y=T?u(P):!0;return N&&y})}if(v.startsWith("due_")){const T=v.endsWith("_mine");return k.filter(P=>{const N=$s(P),y=T?u(P):!0;return N&&y})}const[C,M]=v.split("_");return k.filter(T=>{const P=Pa(T,C,g),N=M==="all"?!0:u(T);return P&&N})}),c=A(()=>{const u=l.value,g=t.value.solvedIncludesArchived!==!1,v=s.value;return[{value:"all",label:"All cards",mine:!1,matches:()=>!0},{value:"open_all",label:"Open  All",mine:!1,matches:C=>Pa(C,"open",g)},{value:"open_mine",label:"Open  Mine",mine:!0,matches:C=>Pa(C,"open",g)&&u(C)},{value:"done_all",label:"Done  All",mine:!1,matches:C=>Pa(C,"done",g)},{value:"done_mine",label:"Done  Mine",mine:!0,matches:C=>Pa(C,"done",g)&&u(C)},{value:"archived_all",label:"Archived  All",mine:!1,matches:C=>Pa(C,"archived",g)},{value:"archived_mine",label:"Archived  Mine",mine:!0,matches:C=>Pa(C,"archived",g)&&u(C)},{value:"due_all",label:"Due  All",mine:!1,matches:C=>$s(C)},{value:"due_mine",label:"Due  Mine",mine:!0,matches:C=>$s(C)&&u(C)},{value:"due_today_all",label:"Due today  All",mine:!1,matches:C=>Ts(C)},{value:"due_today_mine",label:"Due today  Mine",mine:!0,matches:C=>Ts(C)&&u(C)}].map(C=>({value:C.value,label:C.label,mine:C.mine,count:v.filter(C.matches).length}))}),d=A(()=>{const u=l.value,g=t.value.solvedIncludesArchived!==!1,v=s.value,k=[];return[{key:"open_all",label:"Open  All",status:"open",mine:!1},{key:"open_mine",label:"Open  Mine",status:"open",mine:!0},{key:"done_all",label:"Done  All",status:"done",mine:!1},{key:"done_mine",label:"Done  Mine",status:"done",mine:!0},{key:"archived_all",label:"Archived  All",status:"archived",mine:!1},{key:"archived_mine",label:"Archived  Mine",status:"archived",mine:!0}].forEach(M=>{const T=v.filter(y=>{const E=Pa(y,M.status,g),B=M.mine?u(y):!0;return E&&B}),P=new Map;T.forEach(y=>{if(y.boardId==null)return;const E=Number(y.boardId),B=P.get(E)||{count:0,title:y.boardTitle||"",color:y.boardColor};B.count+=1,B.title=y.boardTitle||B.title,B.color=y.boardColor??B.color,P.set(E,B)});let N;if(P.size){const y=Array.from(P.entries()).sort((E,B)=>B[1].count-E[1].count);N={title:y[0][1].title,color:y[0][1].color}}k.push({key:M.key,label:M.label,titles:T.map(y=>y.title||`Card ${y.id}`),count:T.length,board:N})}),k}),p=A(()=>{const u=t.value.ticker||{autoScroll:!0,intervalSeconds:5},g=Math.min(10,Math.max(3,Number(u.intervalSeconds??5)||5));return{autoScroll:u.autoScroll!==!1,intervalSeconds:g}}),m=A(()=>t.value.filtersEnabled&&t.value.enabled&&!!(o.value||"").trim()),h=A(()=>`${r.value||""}/apps/deck/`);return{deckFilter:n,deckVisibleCards:s,deckMineMatcher:l,deckFilteredCards:i,deckSummaryBuckets:d,deckTickerConfig:p,deckCanFilterMine:m,deckUrl:h,deckFilterOptions:c}}function h0(e){const{widgetsRegistry:t,createDefaultTabs:a,normalizeWidgetTabs:o,createDashboardPreset:r,dashboardMode:n,deckEnabled:s,hasInitialLoad:l,queueSaveRef:i}=e;function c(){return a()}const d=le(c().tabs),p=le(c().defaultTabId),m=le(p.value),h=le(!1),u=le(!1),g=le("");function v(){var Y;l.value&&h.value&&((Y=i.value)==null||Y.call(i,!1),h.value=!1)}$e(()=>l.value,Y=>{Y&&h.value&&v()});const k=A(()=>d.value.find(Y=>Y.id===m.value)||d.value[0]);function C(Y){d.value.some(L=>L.id===Y)&&(m.value=Y)}function M(Y){d.value.some(L=>L.id===Y)&&(p.value=Y,m.value=Y,h.value=!0,v())}const T=A(()=>{var L;const Y=((L=k.value)==null?void 0:L.widgets)||[];return s.value?Y:Y.filter(U=>U.type!=="deck")}),P=A(()=>Object.keys(t).map(Y=>{var L;return{type:Y,label:((L=t[Y])==null?void 0:L.label)||Y}}));function N(Y){var ee;n.value=Y;const L=((ee=k.value)==null?void 0:ee.id)||"tab-1",U=d.value.map(se=>se.id===L?{...se,widgets:r(Y)}:se);d.value=U,h.value=!0,v()}function y(Y,L){d.value=d.value.map(U=>U.id===Y?{...U,widgets:L([...U.widgets])}:U)}function E(Y,L){var ee;const U=(ee=k.value)==null?void 0:ee.id;U&&(y(U,se=>se.map(K=>K.id===Y?L({...K,layout:{...K.layout}}):K)),h.value=!0,v())}function B(Y){const L=["quarter","half","full"];E(Y,U=>{const ee=L.indexOf(U.layout.width),se=L[(ee+1)%L.length];return{...U,layout:{...U.layout,width:se}}})}function z(Y){const L=["s","m","l","xl"];E(Y,U=>{const ee=L.indexOf(U.layout.height),se=L[(ee+1)%L.length];return{...U,layout:{...U.layout,height:se}}})}function j(Y,L){var te;const U=[...T.value].sort((ge,pe)=>(ge.layout.order||0)-(pe.layout.order||0)),ee=U.findIndex(ge=>ge.id===Y);if(ee<0)return;const se=L==="up"?ee-1:ee+1;if(se<0||se>=U.length)return;const K=U[ee].layout.order;U[ee].layout.order=U[se].layout.order,U[se].layout.order=K;const Z=(te=k.value)==null?void 0:te.id;Z&&(y(Z,()=>U),h.value=!0,v())}function S(Y){var U;const L=(U=k.value)==null?void 0:U.id;L&&(y(L,ee=>ee.filter(se=>se.id!==Y)),h.value=!0,v())}function $(Y){var K;const L=t[Y];if(!L)return;const U=T.value.reduce((Z,te)=>Math.max(Z,te.layout.order||0),0),ee={id:`widget-${Y}-${Date.now()}`,type:Y,options:{},layout:{...L.defaultLayout,order:U+10},version:1},se=(K=k.value)==null?void 0:K.id;se&&(y(se,Z=>[...Z,ee]),g.value="",h.value=!0,v())}function x(Y,L){var te;const U=t[Y];if(!U)return;const ee=T.value.reduce((ge,pe)=>Math.max(ge,pe.layout.order||0),0);let se=Number.isFinite(L)?Number(L):ee+10;for(Number.isFinite(se)||(se=ee+10);T.value.some(ge=>ge.layout.order===se);)se+=.1;const K={id:`widget-${Y}-${Date.now()}`,type:Y,options:{},layout:{...U.defaultLayout,order:se},version:1},Z=(te=k.value)==null?void 0:te.id;Z&&(y(Z,ge=>[...ge,K]),h.value=!0,v())}function I(Y,L){var K;if(!Number.isFinite(L??NaN))return;const U=Number(L),ee=T.value.map(Z=>Z.id===Y?{...Z,layout:{...Z.layout,order:U}}:{...Z});ee.sort((Z,te)=>(Z.layout.order||0)-(te.layout.order||0));const se=(K=k.value)==null?void 0:K.id;se&&(y(se,()=>ee.map((Z,te)=>({...Z,layout:{...Z.layout,order:(te+1)*10}}))),h.value=!0,v())}function J(Y,L,U){var se;const ee=(se=k.value)==null?void 0:se.id;ee&&(y(ee,K=>K.map(Z=>{if(Z.id!==Y)return Z;const te={...Z.options||{}};if(L.includes(".")){const ge=L.split("."),pe={...te};let F=pe;for(let _=0;_<ge.length-1;_+=1){const H=ge[_];F[H]={...F[H]||{}},F=F[H]}return F[ge[ge.length-1]]=U,{...Z,options:pe}}return L==="scale"?(te.scale=U,"textSize"in te&&delete te.textSize,{...Z,options:te}):(te[L]=U,{...Z,options:te})})),h.value=!0,v())}function O(){var L;const Y=(L=k.value)==null?void 0:L.id;Y&&(y(Y,()=>r(n.value)),h.value=!0,v())}function W(Y){const L=`tab-${Date.now().toString(36)}`,U=String(Y??"").trim()||`Tab ${d.value.length+1}`,ee={id:L,label:U.slice(0,48),widgets:r(n.value)};d.value=[...d.value,ee],m.value=ee.id,h.value=!0,v()}function oe(Y,L){const U=String(L||"").trim().slice(0,48);U&&(d.value=d.value.map(ee=>ee.id===Y?{...ee,label:U}:ee),h.value=!0,v())}function V(Y){var L,U;d.value.length<=1||(d.value=d.value.filter(ee=>ee.id!==Y),p.value===Y&&(p.value=((L=d.value[0])==null?void 0:L.id)||""),m.value===Y&&(m.value=((U=d.value[0])==null?void 0:U.id)||""),h.value=!0,v())}function q(Y){const L=a(),U=o(Y,L);d.value=U.tabs,p.value=U.defaultTabId;const ee=m.value;ee&&U.tabs.some(se=>se.id===ee)?m.value=ee:m.value=U.defaultTabId}return{layoutTabs:d,defaultTabId:p,activeTabId:m,widgetsDirty:h,isLayoutEditing:u,newWidgetType:g,widgets:T,availableWidgetTypes:P,persistWidgets:v,applyDashboardPreset:N,updateWidget:E,cycleWidth:B,cycleHeight:z,moveWidget:j,removeWidget:S,addWidget:$,addWidgetAt:x,reorderWidget:I,updateWidgetOptions:J,resetWidgets:O,activeTab:k,setActiveTab:C,setDefaultTab:M,addTab:W,renameTab:oe,removeTab:V,setTabsFromPayload:q}}function m0(e){const{performLoad:t,refreshPresets:a,range:o,offset:r,onboardingState:n,hasInitialLoad:s,evaluateOnboarding:l,dashboardMode:i}=e;$e(n,c=>{s.value&&l(c)}),$e(n,c=>{const d=c==null?void 0:c.dashboardMode;(d==="quick"||d==="standard"||d==="pro")&&(i.value=d)}),Dt(async()=>{console.info("[opsdash] start");try{await t()}catch(c){console.error(c),alert("Initial load failed")}a().catch(c=>console.warn("[opsdash] presets fetch failed",c))}),$e(o,()=>{r.value=0,t().catch(console.error)})}function v0(e){return Array.from(e.reduce((t,a)=>(a.boardId==null||t.has(a.boardId)||t.set(a.boardId,{id:a.boardId,title:a.boardTitle,color:a.boardColor}),t),new Map).values())}function b0(e){return{widgetContext:A(()=>{var a,o;return{summary:e.timeSummary.value,activeDayMode:e.activeDayMode.value,targetsSummary:e.targetsSummary.value,targetsConfig:e.targetsConfig.value,stats:e.stats,byDay:e.byDay.value,byCal:e.byCal.value,groupsById:e.groupsById.value,groups:e.calendarGroupsWithToday.value,balanceOverview:e.balanceOverview.value,balanceConfig:e.balanceCardConfig.value,rangeLabel:e.rangeLabel.value,rangeMode:e.range.value,offset:e.offset.value,from:e.from.value,to:e.to.value,lookbackWeeks:e.trendLookbackWeeks.value,balanceNote:e.balanceNote.value,activitySummary:e.activitySummary.value,activityConfig:e.activityCardConfig.value,activityDayOffTrend:e.activityDayOffTrend.value,activityTrendUnit:e.range.value==="month"?"mo":"wk",activityDayOffLookback:e.trendLookbackWeeks.value,deckBuckets:e.deckSummaryBuckets.value,deckRangeLabel:e.rangeLabel.value,deckLoading:e.deckLoading.value,deckError:e.deckError.value,deckTicker:e.deckTickerConfig.value,deckFilter:e.deckFilter.value,onDeckFilter:r=>e.setDeckFilter(r),deckShowBoardBadges:((o=(a=e.deckSettings.value)==null?void 0:a.ticker)==null?void 0:o.showBoardBadges)!==!1,deckUrl:e.deckUrl.value,deckCards:e.deckCards.value,deckBoards:v0(e.deckCards.value||[]),uid:e.uid.value,notesPrev:e.notesPrev.value,notesCurr:e.notesCurrDraft.value,notesHistory:e.notesHistory.value,notesLabelPrev:e.notesLabelPrev.value,notesLabelCurr:e.notesLabelCurr.value,notesLabelPrevTitle:e.notesLabelPrevTitle.value,notesLabelCurrTitle:e.notesLabelCurrTitle.value,isSavingNote:e.isSavingNote.value,onSaveNote:()=>e.saveNotes(),onUpdateNotes:r=>{e.notesCurrDraft.value=r},isLoading:e.isLoading.value,hasInitialLoad:e.hasInitialLoad.value,isLayoutEditing:e.isLayoutEditing.value,onUpdateWidgetOptions:(r,n,s)=>{e.updateWidgetOptions(r,n,s)},charts:e.charts.value,calendarChartData:e.calendarChartData.value,categoryChartsById:e.categoryChartsById.value,calendarGroups:e.calendarGroups.value,calendarCategoryMap:e.calendarCategoryMap.value,categoryColorMap:e.categoryColorMap.value,colorsById:e.colorsById.value,colorsByName:e.colorsByName.value,currentTargets:e.currentTargets.value,calendarTodayHours:e.calendarTodayHours.value}})}}function sd(){var t;if(typeof window>"u")return!1;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function y0(e,t={}){var o,r,n,s,l,i;if(typeof window>"u")return;const a=window;try{if((r=(o=a==null?void 0:a.OCA)==null?void 0:o.Analytics)!=null&&r.trackEvent){a.OCA.Analytics.trackEvent("opsdash",e,t);return}if((s=(n=a==null?void 0:a.OCA)==null?void 0:n.Analytics)!=null&&s.track){a.OCA.Analytics.track("opsdash",e,t);return}if((i=(l=a==null?void 0:a.OC)==null?void 0:l.eventBus)!=null&&i.emit){a.OC.eventBus.emit("opsdash:telemetry",{app:"opsdash",event:e,payload:t});return}}catch(c){sd()&&console.warn("[opsdash] telemetry emit failed",e,c);return}sd()&&console.debug("[opsdash] telemetry (noop)",e,t)}const w0={version:"0.5.4"},k0={class:"app-shell"},_0={class:"app-main"},x0={class:"app-container"},C0={key:0,class:"range-toolbar",role:"toolbar","aria-label":"Collapsed range controls"},S0=["aria-expanded","aria-label"],$0=["disabled","aria-pressed"],T0={class:"range-toolbar__group",role:"group","aria-label":"Navigate periods"},M0=["disabled"],A0=["title"],D0=["disabled"],E0=["disabled"],L0=["title"],N0={class:"cards-toolbar"},I0={class:"cards-toolbar__tabs",role:"tablist","aria-label":"Dashboard tabs"},O0=["aria-selected","onClick","onContextmenu"],B0=["onKeydown"],P0={class:"tab-label"},F0={key:0,class:"tab-default"},H0={class:"cards-toolbar__center"},W0={class:"range-badge","aria-label":"Active range"},z0=["textContent"],R0=["textContent"],j0={key:0,class:"cards-toolbar__add"},U0=["value"],V0=["disabled"],K0={class:"cards"},q0={class:"hint footer"},G0=Le({__name:"App",setup(e){function t(G){var _e,ke;const ce=window;(ke=(_e=ce.OC)==null?void 0:_e.Notification)!=null&&ke.showTemporary?ce.OC.Notification.showTemporary(G):console.log("SUCCESS:",G)}function a(G){var _e,ke;const ce=window;(ke=(_e=ce.OC)==null?void 0:_e.Notification)!=null&&ke.showTemporary?ce.OC.Notification.showTemporary(G):(console.error("ERROR:",G),alert(G))}const{navOpen:o,toggleNav:r,navToggleLabel:n,navToggleIcon:s}=c0(),l=le(!1);function i(){o.value||r()}$e(()=>o.value,G=>{if(typeof document>"u")return;const ce=G?"var(--app-navigation-width, 300px)":"0px";document.body.style.setProperty("--opsdash-nav-offset",ce)},{immediate:!0}),Tt(()=>{typeof document>"u"||document.body.style.removeProperty("--opsdash-nav-offset")});const c=le("week"),d=le(0),p=A(()=>{const G=qe.value;if(!G)return"Partial data due to caps";const ce=[];return G.maxPerCal!=null&&ce.push(`cap per calendar: ${G.maxPerCal}`),G.maxTotal!=null&&ce.push(`cap total: ${G.maxTotal}`),G.totalProcessed!=null&&ce.push(`processed: ${G.totalProcessed}`),ce.join("  ")}),m=le(!1),{scheduleDraw:h}=N1(),{route:u,getJson:g,postJson:v,deleteJson:k,root:C}=B1(),M=k1({range:c,offset:d,route:G=>u(G),getJson:g,postJson:v,notifySuccess:t,notifyError:a}),{notesPrev:T,notesCurrDraft:P,notesHistory:N,isSavingNote:y,fetchNotes:E,saveNotes:B}=M,z=le(!1),j=le("standard"),S=le(null),$=le(!0),{layoutTabs:x,defaultTabId:I,activeTabId:J,isLayoutEditing:O,newWidgetType:W,widgets:oe,availableWidgetTypes:V,activeTab:q,setActiveTab:Y,setDefaultTab:L,addTab:U,renameTab:ee,removeTab:se,setTabsFromPayload:K,applyDashboardPreset:Z,cycleWidth:te,cycleHeight:ge,moveWidget:pe,removeWidget:F,addWidgetAt:_,reorderWidget:H,updateWidgetOptions:X,resetWidgets:Q}=h0({widgetsRegistry:vo,createDefaultTabs:()=>tn(j.value),normalizeWidgetTabs:nr,createDashboardPreset:Gc,dashboardMode:j,deckEnabled:$,hasInitialLoad:z,queueSaveRef:S}),ie=A(()=>({tabs:x.value,defaultTabId:I.value})),ue=A({get:()=>ie.value,set:G=>{G&&K(G)}}),he=new Set(["chart_per_day","chart_dow","chart_hod","time_summary_v2"]),fe=()=>{var G;if(yd.value<=1)return!1;for(const ce of x.value||[]){const _e=(ce==null?void 0:ce.widgets)||[];for(const ke of _e){const Ge=String((ke==null?void 0:ke.type)??"");if(he.has(Ge)&&!(Ge==="time_summary_v2"&&((G=ke==null?void 0:ke.options)==null?void 0:G.showHistory)===!1))return!0}}return!1},de=le(""),ye=le(null),me=le({open:!1,x:0,y:0,tabId:null}),we=le(null);$e(()=>J.value,()=>{var G;ye.value||(de.value=((G=q.value)==null?void 0:G.label)||"")},{immediate:!0}),$e(()=>O.value,G=>{G||(ye.value=null,me.value={open:!1,x:0,y:0,tabId:null})});function xe(G){if(!O.value){Y(G),we.value=null;return}if(J.value!==G){Y(G),ye.value=null,we.value=null;return}ye.value=G;const ce=x.value.find(_e=>_e.id===G);de.value=(ce==null?void 0:ce.label)||""}function Ne(G,ce){O.value&&(me.value={open:!0,x:G.clientX,y:G.clientY,tabId:ce})}function Ae(){me.value={open:!1,x:0,y:0,tabId:null}}function Me(){me.value.tabId&&(L(me.value.tabId),Ae())}function Fe(){me.value.tabId&&(se(me.value.tabId),Ae())}function ze(){if(!me.value.tabId)return;ye.value=me.value.tabId;const G=x.value.find(ce=>ce.id===me.value.tabId);de.value=(G==null?void 0:G.label)||"",Ae()}function Ue(){if(!ye.value)return;const G=de.value.trim(),ce=x.value.find(_e=>_e.id===ye.value);if(!ce){ye.value=null;return}if(!G){de.value=ce.label,ye.value=null;return}G!==ce.label&&ee(ce.id,G),ye.value=null}function Je(){if(!ye.value)return;const G=x.value.find(ce=>ce.id===ye.value);de.value=(G==null?void 0:G.label)||"",ye.value=null}function Ot(G){we.value=Number.isFinite(G??NaN)?Number(G):null}function ft(){if(!W.value)return;const G=Number.isFinite(we.value??NaN)?we.value??void 0:void 0;_(W.value,G),W.value="",we.value=null}function tt(){O.value=!O.value,O.value||(ye.value=null,me.value={open:!1,x:0,y:0,tabId:null},we.value=null)}function at(G){if(!me.value.open)return;const ce=G.target;ce&&(ce.closest(".tab-context-menu")||ce.closest(".tab-btn")||Ae())}Dt(()=>{typeof window<"u"&&window.addEventListener("click",at)}),Tt(()=>{typeof window<"u"&&window.removeEventListener("click",at)});const{calendars:He,colorsByName:Be,colorsById:Ve,groupsById:We,selected:ct,isLoading:gt,isTruncated:Re,truncLimits:qe,uid:St,from:pt,to:bt,stats:dt,byCal:$a,byDay:ha,charts:sa,targetsWeek:Ze,targetsMonth:Xe,targetsConfig:ht,onboarding:Za,load:cr,themePreference:dr,reportingConfig:Xa,deckSettings:Xt}=M1({range:c,offset:d,userChangedSelection:m,route:G=>u(G),getJson:g,postJson:v,notifyError:a,scheduleDraw:h,fetchNotes:E,isDebug:kd,includeLookback:()=>fe(),widgetTabs:ue,onCoreLoaded:()=>{z.value||(z.value=!0)}});$e(()=>Xt.value.enabled,G=>{$.value=G},{immediate:!0});const{deckCards:_o,deckLoading:sn,deckError:ln}=g0({from:pt,to:bt,notifyError:a}),{deckFilter:cn,deckSummaryBuckets:As,deckTickerConfig:Ds,deckUrl:Es}=p0({deckSettings:Xt,deckCards:_o,uid:St,root:C}),Ls=G=>{cn.value=Ss(G)},Qa=Za,{themePreference:xo,effectiveTheme:Co,systemTheme:Ns,setThemePreference:ur}=Q1({serverPreference:dr,route:G=>u(G),postJson:v,notifySuccess:t,notifyError:a}),Is=A(()=>Co.value==="dark"?"opsdash-theme-dark":"opsdash-theme-light");function dn(G){fd(G||"categories")}const{exportSidebarConfig:un,importSidebarConfig:ae}=n0({selected:ct,groupsById:We,targetsWeek:Ze,targetsMonth:Xe,targetsConfig:ht,themePreference:xo,onboardingState:Qa,widgetTabs:ue,setThemePreference:ur,postJson:v,route:G=>u(G),performLoad:()=>Fa(),notifySuccess:t,notifyError:a}),{queueSave:re}=A1({route:G=>u(G),postJson:v,notifyError:a,notifySuccess:t,onReload:()=>Fa(),selected:ct,groupsById:We,targetsWeek:Ze,targetsMonth:Xe,targetsConfig:ht,themePreference:xo,reportingConfig:Xa,deckSettings:Xt,widgetTabs:ue});S.value=re;const{presets:be,presetsLoading:st,presetSaving:Pe,presetApplying:Qt,presetWarnings:fn,refreshPresets:eo,savePreset:So,loadPreset:Os,deletePreset:sC,clearPresetWarnings:lC}=L1({route:(G,ce)=>u(G,ce),getJson:g,postJson:v,deleteJson:k,notifyError:a,notifySuccess:t,queueSave:re,selected:ct,groupsById:We,targetsWeek:Ze,targetsMonth:Xe,targetsConfig:ht,themePreference:xo,setThemePreference:ur,reportingConfig:Xa,deckSettings:Xt,widgetTabs:ue,userChangedSelection:m}),ud=f0({onboardingState:Qa,route:G=>u(G),postJson:v,notifySuccess:t,notifyError:a,setThemePreference:ur,savePreset:So,reloadAfterPersist:()=>Fa(),setSelected:G=>{ct.value=[...G]},setTargetsWeek:G=>{Ze.value={...G}},setTargetsMonth:G=>{Xe.value={...G}},setTargetsConfig:G=>{ht.value=pa(G)},setGroupsById:G=>{We.value={...G}},setDeckSettings:G=>{Xt.value={...G}},setReportingConfig:G=>{Xa.value={...G}},setOnboardingState:G=>{Za.value={...Za.value||{},...G}},setDashboardMode:G=>{j.value=G},setWidgetTabs:G=>{K(G)}}),{autoWizardNeeded:iC,onboardingRunId:cC,onboardingWizardVisible:dC,openWizardFromSidebar:fd,wizardStartStep:uC,hasExistingConfig:fC,wizardCalendars:gC,wizardInitialSelection:pC,wizardInitialStrategy:hC,wizardInitialAllDayHours:mC,wizardInitialTotalHours:vC,wizardInitialTargetsConfig:bC,wizardInitialDeckSettings:yC,wizardInitialReportingConfig:wC,wizardInitialDashboardMode:kC,wizardInitialCategories:_C,wizardInitialAssignments:xC,isOnboardingSaving:CC,isSnapshotSaving:SC,snapshotNotice:$C,evaluateOnboarding:gd,handleWizardComplete:TC,handleWizardSkip:MC,handleWizardClose:AC,handleWizardSaveSnapshot:DC}=e0({onboardingState:Qa,calendars:He,selected:ct,groupsById:We,targetsConfig:ht,deckSettings:Xt,reportingConfig:Xa,hasInitialLoad:z,actions:ud}),EC=async G=>{await TC(G),G!=null&&G.dashboardMode&&Z(G.dashboardMode)},LC=async G=>{G!=null&&G.dashboardMode&&Z(G.dashboardMode),await ud.saveStep(G)};async function Fa(){await cr(),z.value||(z.value=!0),gd()}const{showCollapsedRangeControls:NC,rangeToggleLabel:IC,rangeDateLabel:Bs,loadCurrent:pd,toggleRangeCollapsed:Ps,goPrevious:Fs,goNext:Hs}=t0({navOpen:o,range:c,offset:d,from:pt,to:bt,isLoading:gt,performLoad:()=>Fa()}),{shortcutsOpen:OC,openShortcuts:BC,closeShortcuts:PC,shortcutGroups:FC}=u0({goPrevious:Fs,goNext:Hs,toggleRange:Ps,saveNotes:()=>B(),openConfigPanel:()=>i(),toggleEditLayout:()=>{O.value=!O.value},openWidgetOptions:()=>{var G,ce;O.value&&((ce=(G=vd.value)==null?void 0:G.openOptionsForSelected)==null||ce.call(G))},ensureSidebarVisible:i,onOpen:({source:G})=>y0("shortcuts_opened",{source:G})}),hd=le("active"),md=A(()=>c.value==="month"?"Month":"Week"),vd=le(null),HC=A(()=>{const G=It(pt.value);return G?c.value==="month"?`MONTH ${G.getUTCMonth()+1}`:`WEEK ${Ia(G)}`:c.value.toUpperCase()}),WC=A(()=>Bs.value),Ws=A(()=>{const G=pa(ht.value);return c.value==="month"&&(G.totalHours=xa(G.totalHours),G.categories=G.categories.map(ce=>({...ce,targetHours:xa(ce.targetHours)}))),G}),bd=A(()=>{const G=Ws.value;try{return uc({config:G,stats:dt,byDay:ha.value||[],byCal:$a.value||[],groupsById:We.value||{},range:c.value,from:pt.value,to:bt.value})}catch(ce){return console.error("[opsdash] targets summary failed",ce),dc(G)}}),zs=A(()=>{if(c.value==="month"){const G=Xe.value||{};if(G&&Object.keys(G).length>0)return G;const ce=Ze.value||{},_e={};return Object.entries(ce).forEach(([ke,Ge])=>{const Ke=Number(Ge);Number.isFinite(Ke)&&(_e[ke]=xa(Ke))}),_e}return Ze.value||{}}),Rs=A(()=>{var G;return{...sc(),...((G=ht.value)==null?void 0:G.activityCard)??{}}}),js=A(()=>{var _e;const G=ho(),ce=((_e=ht.value)==null?void 0:_e.balance)??G;return{...G,...ce,thresholds:{...G.thresholds,...ce.thresholds??{}},relations:{...G.relations,...ce.relations??{}},trend:{...G.trend,...ce.trend??{}},dayparts:{...G.dayparts,...ce.dayparts??{}},ui:{...G.ui,...ce.ui??{}}}}),zC=A(()=>({showNotes:!!js.value.ui.showNotes})),yd=A(()=>{var G;return Math.max(1,Math.min(6,((G=js.value.trend)==null?void 0:G.lookbackWeeks)??1))}),RC=A(()=>{if(!js.value.ui.showNotes)return"";const G=(P.value??"").trim();return G||(T.value??"").trim()}),{categoryLabelById:jC,categoryColorMap:wd,calendarCategoryMap:Us,calendarGroups:gn}=V1({calendars:He,selected:ct,groupsById:We,colorsById:Ve,targetsConfig:Ws,targetsSummary:bd,byCal:$a,currentTargets:zs,isDebug:kd}),{balanceOverview:UC}=q1({stats:dt,categoryColorMap:wd});A(()=>{var _e,ke;if(!Rs.value.showHint)return"";const ce=(Array.isArray((ke=(_e=ht.value)==null?void 0:_e.balance)==null?void 0:ke.categories)?ht.value.balance.categories:[]).map(Ge=>{const Ke=String(Ge??"").trim();if(!Ke)return"";const kt=jC.value[Ke];return kt||Ke.toUpperCase()}).filter(Ge=>Ge);return ce.length?`Mapping via Sidebar  ${ce.join(" / ")}`:""});const{calendarChartData:Vs,categoryChartsById:VC}=F1({charts:sa,colorsById:Ve,calendarGroups:gn,calendarCategoryMap:Us,targetsConfig:Ws,currentTargets:zs,activityCardConfig:Rs}),KC=A(()=>{var Ge;const G=(Ge=Vs.value)==null?void 0:Ge.stacked;if(!G||!Array.isArray(G.labels)||!Array.isArray(G.series))return{};const ce=Wt(new Date),_e=G.labels.findIndex(Ke=>String(Ke??"")===ce);if(_e<0)return{};const ke={};return G.series.forEach(Ke=>{var $o;const kt=String((Ke==null?void 0:Ke.id)??""),qt=Number((($o=Ke==null?void 0:Ke.data)==null?void 0:$o[_e])??0),Gs=Number.isFinite(qt)?Math.max(0,qt):0;kt&&(ke[kt]=(ke[kt]||0)+Gs)}),ke}),qC=A(()=>{var kt;const G=(kt=Vs.value)==null?void 0:kt.stacked,ce=G==null?void 0:G.labels,_e=G==null?void 0:G.series;if(!G||!Array.isArray(ce)||!Array.isArray(_e))return{};const ke=Wt(new Date),Ge=ce.findIndex(qt=>String(qt??"")===ke);if(Ge<0)return{};const Ke={};return _e.forEach(qt=>{var Cd,Sd;const Gs=String((qt==null?void 0:qt.id)??""),$o=(Cd=Us.value)==null?void 0:Cd[Gs];if(!$o)return;const xd=Number(((Sd=qt==null?void 0:qt.data)==null?void 0:Sd[Ge])??0),kS=Number.isFinite(xd)?Math.max(0,xd):0;Ke[$o]=(Ke[$o]||0)+kS}),Ke}),GC=A(()=>gn.value.map(G=>({...G,todayHours:qC.value[G.id]||0}))),JC=A(()=>{const G=gn.value||[];return G.length&&[...G].sort((_e,ke)=>(ke.summary.actualHours||0)-(_e.summary.actualHours||0))[0]||null}),{timeSummary:YC,activitySummary:ZC,activityDayOffTrend:XC}=K1({stats:dt,byDay:ha,charts:sa,calendars:He,selected:ct,rangeLabel:md,rangeStart:pt,rangeEnd:bt,offset:d,activeDayMode:hd,topCategory:JC});s0();function kd(){return!1}const{appVersion:_d}=P1({pingUrl:()=>u("ping"),getJson:g,pkgVersion:String(w0.version),root:C}),{notesLabelPrev:QC,notesLabelCurr:eS,notesLabelPrevTitle:tS,notesLabelCurrTitle:aS}=l0(c),{widgetContext:oS}=b0({timeSummary:YC,activeDayMode:hd,targetsSummary:bd,targetsConfig:ht,stats:dt,byDay:ha,byCal:$a,groupsById:We,calendarGroupsWithToday:GC,balanceOverview:UC,balanceCardConfig:zC,rangeLabel:md,range:c,offset:d,from:pt,to:bt,trendLookbackWeeks:yd,balanceNote:RC,activitySummary:ZC,activityCardConfig:Rs,activityDayOffTrend:XC,deckSummaryBuckets:As,deckLoading:sn,deckError:ln,deckTickerConfig:Ds,deckFilter:cn,setDeckFilter:Ls,deckSettings:Xt,deckUrl:Es,deckCards:_o,uid:St,notesPrev:T,notesCurrDraft:P,notesHistory:N,notesLabelPrev:QC,notesLabelCurr:eS,notesLabelPrevTitle:tS,notesLabelCurrTitle:aS,isSavingNote:y,saveNotes:B,isLoading:gt,hasInitialLoad:z,isLayoutEditing:O,updateWidgetOptions:X,charts:sa,calendarChartData:Vs,categoryChartsById:VC,calendarGroups:gn,calendarCategoryMap:Us,categoryColorMap:wd,colorsById:Ve,colorsByName:Be,currentTargets:zs,calendarTodayHours:KC}),rS=A(()=>j.value==="quick"?"Quick preset":j.value==="pro"?"Pro preset":"Standard preset");function nS(G){return Number(G??0).toFixed(1)}function sS(G){const ce=Number(G??0);return Number.isFinite(ce)?Number.isInteger(ce)?String(ce):ce.toFixed(1):"0"}const Ks=A(()=>{var _e;const G=(_e=Qa.value)==null?void 0:_e.strategy;if(!G)return"";const ce=mc().find(ke=>ke.id===G);return(ce==null?void 0:ce.title)??String(G)}),lS=A(()=>{const G=new Map((He.value||[]).map(_e=>[String((_e==null?void 0:_e.id)??""),String((_e==null?void 0:_e.displayname)??(_e==null?void 0:_e.name)??(_e==null?void 0:_e.calendar)??(_e==null?void 0:_e.id)??"Calendar")])),ce=(ct.value||[]).map(_e=>G.get(String(_e))).filter(_e=>!!_e);return ce.length?ce:["None selected"]});function iS(G,ce,_e=", "){const ke=G.filter(kt=>kt&&kt!=="None selected"),Ge=ke.slice(0,ce),Ke=ke.length-Ge.length;return Ge.length?Ke>0?`${Ge.join(_e)} +${Ke}`:Ge.join(_e):"None selected"}function pn(G,ce,_e="  "){const ke=G.filter(Boolean),Ge=ke.slice(0,ce),Ke=ke.length-Ge.length;return Ge.length?Ke>0?`${Ge.join(_e)} +${Ke}`:Ge.join(_e):""}function cS(G){return G.replace(/\s+\s+/g," ").replace(/\s+h$/,"h")}const dS=A(()=>{var ce;const G=((ce=ht.value)==null?void 0:ce.categories)??[];return G.length?G.map(_e=>`${_e.label||_e.id}  ${sS(_e.targetHours)} h`):["No category targets"]}),uS=A(()=>{var G;return`${nS(((G=ht.value)==null?void 0:G.totalHours)??0)} h`}),fS=A(()=>j.value==="pro"?"Pro layout":j.value==="quick"?"Quick layout":"Standard layout"),gS=A(()=>Co.value==="dark"?"Dark":"Light"),qs=A(()=>{var Ge;if(!((Ge=Xt.value)!=null&&Ge.enabled))return{status:"Deck tab disabled",boards:[]};const G=new Set((Xt.value.hiddenBoards||[]).map(Ke=>Number(Ke))),ce=new Map;(_o.value||[]).forEach(Ke=>{const kt=Number(Ke==null?void 0:Ke.boardId);if(!Number.isFinite(kt)||G.has(kt))return;const qt=String((Ke==null?void 0:Ke.boardTitle)??`Board ${kt}`);ce.has(kt)||ce.set(kt,qt)});const _e=Array.from(ce.values());return{status:`Showing ${_e.length} board${_e.length===1?"":"s"}`,boards:_e}}),pS=A(()=>{var G;return(G=Xt.value)!=null&&G.enabled?qs.value.boards.length===1?`Deck  ${qs.value.boards[0]}`:`Deck  ${qs.value.boards.length} boards`:"Deck  off"}),hS=A(()=>{const G=dS.value;if(!G.length)return"";if(G.length===1&&G[0]==="No category targets")return"No targets";const ce=pn(G.map(cS),3);return ce?`${ce}  Total ${uS.value}`:""}),mS=A(()=>pn([Ks.value&&Ks.value!==""?`Strategy  ${Ks.value}`:"",fS.value],2)),vS=A(()=>iS(lS.value,2)),bS=A(()=>pn([`Theme  ${gS.value}`,pS.value],2)),yS=A(()=>{var G,ce,_e;return pn([(G=Xa.value)!=null&&G.enabled?"Recap on":"Recap off",(_e=(ce=ht.value)==null?void 0:ce.activityCard)!=null&&_e.showDayOffTrend?"Heatmap on":"Heatmap off"],2)}),wS=A(()=>({dashboard:mS.value,calendars:vS.value,categories:hS.value,preferences:bS.value,review:yS.value}));return m0({performLoad:Fa,refreshPresets:eo,range:c,offset:d,onboardingState:Qa,hasInitialLoad:z,evaluateOnboarding:gd,dashboardMode:j}),(G,ce)=>{const _e=Wu("NcAppSidebarToggle");return b(),w("div",{id:"opsdash",class:Ee(["opsdash",[{"is-nav-collapsed":!D(o)},Is.value]])},[(b(),it(Fm,{key:D(cC),visible:D(dC),calendars:D(gC),"initial-selection":D(pC),"initial-strategy":D(hC),"onboarding-version":D(Ba),closable:!D(iC),"initial-theme-preference":D(xo),"system-theme":D(Ns),"initial-all-day-hours":D(mC),"initial-total-hours":D(vC),"initial-targets-config":D(bC),"initial-targets-week":D(Ze),"initial-deck-settings":D(yC),"initial-reporting-config":D(wC),"initial-dashboard-mode":D(kC),"initial-categories":D(_C),"initial-assignments":D(xC),"start-step":D(uC),"has-existing-config":D(fC),saving:D(CC),"snapshot-saving":D(SC),"snapshot-notice":D($C),onClose:D(AC),onSkip:D(MC),onComplete:EC,onSaveCurrentConfig:D(DC),onSaveStep:LC},null,8,["visible","calendars","initial-selection","initial-strategy","onboarding-version","closable","initial-theme-preference","system-theme","initial-all-day-hours","initial-total-hours","initial-targets-config","initial-targets-week","initial-deck-settings","initial-reporting-config","initial-dashboard-mode","initial-categories","initial-assignments","start-step","has-existing-config","saving","snapshot-saving","snapshot-notice","onClose","onSkip","onSaveCurrentConfig"])),Se(sv,{visible:l.value,theme:D(Co),presets:D(be),"is-loading":D(st),"is-saving":D(Pe),"is-applying":D(Qt),warnings:D(fn),onClose:ce[0]||(ce[0]=ke=>l.value=!1),onSave:D(So),onLoad:D(Os),onDelete:D(sC),onRefresh:D(eo),onClearWarnings:D(lC),onExportConfig:D(un),onImportConfig:D(ae)},null,8,["visible","theme","presets","is-loading","is-saving","is-applying","warnings","onSave","onLoad","onDelete","onRefresh","onClearWarnings","onExportConfig","onImportConfig"]),Se(D(dg),{"app-name":"Operational Dashboard","show-navigation":D(o)},{navigation:Qe(()=>[Se(Lg,{id:"opsdash-sidebar","is-loading":D(gt),range:c.value,offset:d.value,from:D(pt),to:D(bt),"nav-toggle-label":D(n),"nav-toggle-icon":D(s),"dashboard-mode":j.value,"guided-hints":wS.value,onLoad:Fa,"onUpdate:range":ce[1]||(ce[1]=ke=>{c.value=ke,d.value=0,Fa()}),"onUpdate:offset":ce[2]||(ce[2]=ke=>{d.value=ke,Fa()}),onToggleNav:D(r),onRerunOnboarding:D(fd),onOpenProfiles:ce[3]||(ce[3]=ke=>l.value=!0),onOpenShortcuts:ce[4]||(ce[4]=ke=>D(BC)(ke,"button"))},null,8,["is-loading","range","offset","from","to","nav-toggle-label","nav-toggle-icon","dashboard-mode","guided-hints","onToggleNav","onRerunOnboarding"])]),"sidebar-toggle":Qe(()=>[Se(_e,{open:D(o),onToggle:D(r)},null,8,["open","onToggle"])]),default:Qe(()=>[f("div",k0,[f("div",_0,[f("div",x0,[D(NC)?(b(),w("div",C0,[f("button",{class:"range-toolbar__btn range-toolbar__btn--icon sidebar-action-btn--icon",type:"button",onClick:ce[5]||(ce[5]=(...ke)=>D(r)&&D(r)(...ke)),"aria-expanded":D(o),"aria-controls":"opsdash-sidebar","aria-label":D(n)},R(D(s)),9,S0),f("button",{class:"range-toolbar__btn range-toolbar__btn--pill",type:"button",disabled:D(gt),onClick:ce[6]||(ce[6]=(...ke)=>D(Ps)&&D(Ps)(...ke)),"aria-pressed":c.value==="month"},R(D(IC)),9,$0),f("div",T0,[f("button",{class:"range-toolbar__btn sidebar-action-btn--icon",type:"button",disabled:D(gt),onClick:ce[7]||(ce[7]=(...ke)=>D(Fs)&&D(Fs)(...ke))},"  ",8,M0),f("span",{class:"range-toolbar__label range-toolbar__label--pill",title:D(Bs)},R(D(Bs)),9,A0),f("button",{class:"range-toolbar__btn sidebar-action-btn--icon",type:"button",disabled:D(gt),onClick:ce[8]||(ce[8]=(...ke)=>D(Hs)&&D(Hs)(...ke))},"  ",8,D0)]),f("button",{class:"range-toolbar__btn range-toolbar__btn--refresh sidebar-action-btn",type:"button",disabled:D(gt),onClick:ce[9]||(ce[9]=(...ke)=>D(pd)&&D(pd)(...ke))}," Refresh ",8,E0)])):ne("",!0),D(Re)?(b(),w("div",{key:1,class:"banner warn",title:p.value},[ce[16]||(ce[16]=Oe(" Showing partial data to keep things fast. ",-1)),D(qe)&&D(qe).totalProcessed!=null?(b(),w(ve,{key:0},[Oe(" Processed "+R(D(qe).totalProcessed)+" items. ",1)],64)):ne("",!0)],8,L0)):ne("",!0),f("div",N0,[f("div",I0,[(b(!0),w(ve,null,Ce(D(x),ke=>(b(),w("button",{key:ke.id,type:"button",class:Ee(["tab-btn",{active:ke.id===D(J),default:ke.id===D(I)}]),role:"tab","aria-selected":ke.id===D(J),onClick:Ge=>xe(ke.id),onContextmenu:ut(Ge=>Ne(Ge,ke.id),["prevent"])},[D(O)&&ye.value===ke.id?io((b(),w("input",{key:0,class:"tab-input","onUpdate:modelValue":ce[10]||(ce[10]=Ge=>de.value=Ge),onBlur:Ue,onKeydown:[po(ut(Ue,["prevent"]),["enter"]),po(ut(Je,["prevent"]),["esc"])],onClick:ce[11]||(ce[11]=ut(()=>{},["stop"]))},null,40,B0)),[[ec,de.value]]):(b(),w(ve,{key:1},[f("span",P0,R(ke.label),1),ke.id===D(I)?(b(),w("span",F0,"Default")):ne("",!0)],64))],42,O0))),128)),D(O)?(b(),w("button",{key:0,type:"button",class:"tab-btn tab-btn--add",onClick:ce[12]||(ce[12]=ke=>D(U)())}," + Tab ")):ne("",!0)]),f("div",H0,[f("button",{type:"button",class:"ghost-btn ghost-btn--edit",onClick:tt},[ce[17]||(ce[17]=f("span",{class:"ghost-btn__icon","aria-hidden":"true"},"",-1)),Oe(" "+R(D(O)?"Done editing":"Edit layout"),1)]),f("span",W0,[f("span",{class:"range-badge__mode",textContent:R(HC.value)},null,8,z0),f("span",{class:"range-badge__span",textContent:R(WC.value)},null,8,R0)]),D(O)?(b(),w("div",j0,[io(f("select",{"onUpdate:modelValue":ce[13]||(ce[13]=ke=>vt(W)?W.value=ke:null),onChange:ft},[ce[18]||(ce[18]=f("option",{value:"",disabled:""},"Select widget",-1)),(b(!0),w(ve,null,Ce(D(V),ke=>(b(),w("option",{key:ke.type,value:ke.type},R(ke.label),9,U0))),128))],544),[[tc,D(W)]]),f("button",{type:"button",class:"ghost-btn",onClick:ce[14]||(ce[14]=(...ke)=>D(Q)&&D(Q)(...ke))}," Reset ")])):ne("",!0)])]),me.value.open?(b(),w("div",{key:2,class:"tab-context-menu",style:De({top:`${me.value.y}px`,left:`${me.value.x}px`}),role:"menu"},[f("button",{type:"button",role:"menuitem",onClick:Me},"Set as default"),f("button",{type:"button",role:"menuitem",onClick:ze},"Rename"),f("button",{type:"button",role:"menuitem",disabled:D(x).length<=1,onClick:Fe}," Remove ",8,V0)],4)):ne("",!0),f("div",K0,[Se(w1,{ref_key:"layoutRef",ref:vd,widgets:D(oe),context:D(oS),editable:D(O),"widget-types":D(V),"preset-label":rS.value,"onEdit:width":D(te),"onEdit:height":D(ge),"onEdit:remove":D(F),"onEdit:move":D(pe),"onEdit:options":D(X),"onEdit:add":D(_),"onEdit:reorder":D(H),"onOpen:onboarding":dn,"onReset:preset":ce[15]||(ce[15]=ke=>D(Z)(j.value.value)),"onSelect:cell":Ot},null,8,["widgets","context","editable","widget-types","preset-label","onEdit:width","onEdit:height","onEdit:remove","onEdit:move","onEdit:options","onEdit:add","onEdit:reorder"])]),f("div",q0,[D(_d)?(b(),w(ve,{key:0},[Oe(" Operational Dashboard  v"+R(D(_d))+"  Built by Blade34242 @ Gellert Innovation ",1)],64)):(b(),w(ve,{key:1},[Oe(" Operational Dashboard  v0.4.4  Built by Blade34242 @ Gellert Innovation ")],64))])])])])]),_:1},8,["show-navigation"]),Se(pv,{visible:D(OC),groups:D(FC),theme:D(Co),onClose:D(PC)},null,8,["visible","groups","theme","onClose"])],2)}}});function Ms(){var t;const e=document.getElementById("app");if(e){try{console.log("[opsdash] booting");const a=(t=e.dataset)==null?void 0:t.opsdashDefaultWidgets;if(a)try{jc(JSON.parse(a))}catch(s){console.warn("[opsdash] failed to parse bootstrap widgets",s)}const o=lg(G0);o.config.errorHandler=(s,l,i)=>{const c=l!=null&&l.type&&l.type.name?l.type.name:"",d={err:s,info:i,name:c,stack:s instanceof Error?s.stack:void 0},p=window;Array.isArray(p.__opsdashErrors)||(p.__opsdashErrors=[]),p.__opsdashErrors.push(d),console.error("[opsdash] Vue error",d)};const r=o.mount(e),n=window;n.__opsdashApp=o,n.__opsdashRoot=r,_1(),console.log("[opsdash] mounted")}catch(a){console.error("Mount failed",a)}return}document.readyState==="complete"||document.readyState==="interactive"?setTimeout(Ms,50):window.addEventListener("DOMContentLoaded",Ms,{once:!0})}Ms();const J0={key:0,class:"title-row"},Y0={class:"title"},Z0={key:0,class:"pill"},X0=["title"],Q0={class:"index-badge__ring","aria-hidden":"true"},ew={class:"index-badge__value"},tw={class:"index-badge__meta"},aw={key:0,class:"index-badge__range"},ow={key:0,class:"trend"},rw=["title"],nw={class:"trend-line-row"},sw={class:"trend-value"},lw={class:"trend-range"},iw={class:"trend-offset"},cw={key:1,class:"messages"},dw={key:2,class:"config"},uw={key:3,class:"empty"},fw=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"BalanceIndexCard",props:{overview:{},rangeLabel:{},showBadge:{type:Boolean},showTrend:{type:Boolean},showMessages:{type:Boolean},showConfig:{type:Boolean},messageLimit:{},lookbackWeeks:{},loopbackCount:{},indexBasis:{},showCurrent:{type:Boolean,default:!0},labelMode:{},reverseTrend:{type:Boolean},from:{},to:{},rangeMode:{},thresholds:{},title:{},cardBg:{},showHeader:{type:Boolean},targetsCategories:{},trendColor:{}},setup(e){const t=e,a=A(()=>t.title||"Balance Index"),o=A(()=>t.showHeader!==!1),r=A(()=>(t.rangeMode||"").toLowerCase()==="month"?"mo":"wk"),n=A(()=>{var V,q,Y;return Array.isArray((q=(V=t.overview)==null?void 0:V.trend)==null?void 0:q.history)?t.overview.trend.history:Array.isArray((Y=t.overview)==null?void 0:Y.trendHistory)?t.overview.trendHistory:[]}),s=A(()=>{const V=Number.isFinite(t.lookbackWeeks)?Number(t.lookbackWeeks):Number.isFinite(t.loopbackCount)?Number(t.loopbackCount):null;if(V!=null)return Math.max(0,Math.min(6,Math.floor(V)));const q=n.value.filter(Y=>Number((Y==null?void 0:Y.offset)??0)>0);return Math.max(0,Math.min(6,q.length))}),l=A(()=>{const V=new Map,q=t.targetsCategories||[],Y=t.indexBasis;return n.value.forEach((L,U)=>{const ee=Number((L==null?void 0:L.offset)??(L==null?void 0:L.step)),se=Number.isFinite(ee)&&ee>0?Math.round(ee):U+1,K={};Array.isArray(L==null?void 0:L.categories)&&L.categories.forEach(_=>{K[String(_.id)]=Number(_.share??0)});const Z=Object.values(K),te=Z.length?Math.max(...Z):0,ge=Z.reduce((_,H)=>_+H,0);(te>1||ge>1.5)&&Object.keys(K).forEach(_=>{K[_]=K[_]/100});const pe=Object.values(K).reduce((_,H)=>_+H,0);pe>1.0001&&pe>0&&Object.keys(K).forEach(_=>{K[_]=K[_]/pe});const F=Hc({shares:K,targets:q,basis:Y});V.set(se,{index:F,label:(L==null?void 0:L.label)||""})}),V}),i=A(()=>{var Y;const V=[],q=s.value;for(let L=q;L>=1;L-=1){const U=l.value.get(L);V.push({offset:L,index:U==null?void 0:U.index,label:(U==null?void 0:U.label)||`-${L} ${r.value}`})}return V.push({offset:0,index:typeof((Y=t.overview)==null?void 0:Y.index)=="number"?t.overview.index:void 0,label:t.rangeLabel||""}),V}),c=A(()=>t.showCurrent!==!1),d=A(()=>{let V=i.value.slice();return c.value||(V=V.filter(q=>((q==null?void 0:q.offset)??0)!==0)),t.reverseTrend?V.slice().reverse():V}),p=A(()=>d.value.length>0),m=A(()=>{var V;return((V=t.overview)==null?void 0:V.warnings)||[]}),h=A(()=>{const V=m.value,q=Number.isFinite(t.messageLimit)?Number(t.messageLimit):1/0;return!Number.isFinite(q)||q<=0?V:V.slice(0,q)}),u=A(()=>({background:t.cardBg||void 0})),g=A(()=>{var Y,L,U,ee,se;const V=ho(),q={noticeAbove:((Y=t.thresholds)==null?void 0:Y.noticeAbove)??V.thresholds.noticeAbove,noticeBelow:((L=t.thresholds)==null?void 0:L.noticeBelow)??V.thresholds.noticeBelow,warnAbove:((U=t.thresholds)==null?void 0:U.warnAbove)??V.thresholds.warnAbove,warnBelow:((ee=t.thresholds)==null?void 0:ee.warnBelow)??V.thresholds.warnBelow,warnIndex:((se=t.thresholds)==null?void 0:se.warnIndex)??V.thresholds.warnIndex};return{basis:t.indexBasis||V.index.basis,...q}}),v=A(()=>{const V=t.showTrend===!1||!p.value,q=t.showMessages===!1||h.value.length===0,Y=t.showConfig===!1;return V&&q&&Y}),k=A(()=>{const V=s.value;if(V<=0)return"";const q=r.value==="mo"?"month":"week";return`Last ${V} ${V===1?q:`${q}s`}`}),C=A(()=>{var Y;const V=(Y=t.overview)==null?void 0:Y.index,q=typeof V=="number"?V:Number(V??NaN);return Number.isFinite(q)?Math.max(0,Math.min(1,q)):null}),M=A(()=>N(C.value??void 0)),T=A(()=>{const V=C.value;if(V==null)return{};const q=Math.round(V*100);let Y="#dc2626";return V>=.8?Y="#16a34a":V>=.65&&(Y="#f59e0b"),{"--index-fill":`${q}%`,"--index-color":Y}}),P=A(()=>C.value==null?"":`Balance index ${C.value.toFixed(2)}`),N=V=>Number.isFinite(V)?V.toFixed(2):"",y=A(()=>t.trendColor||"#2563EB"),E=A(()=>{const V=(t.labelMode||"period").toString().toLowerCase();return V==="date"||V==="offset"?V:"period"}),B=A(()=>({gridTemplateColumns:`repeat(auto-fit, minmax(${E.value==="date"?108:88}px, 1fr))`}));function z(V,q){const Y=V.replace("#",""),L=parseInt(Y.substring(0,2),16),U=parseInt(Y.substring(2,4),16),ee=parseInt(Y.substring(4,6),16),se=K=>Math.max(0,Math.min(255,Math.round(K*(1-q))));return`rgb(${se(L)}, ${se(U)}, ${se(ee)})`}const j=V=>{const q=y.value,Y=d.value[V],L=Number((Y==null?void 0:Y.index)??0),U=Math.min(1,Math.max(0,1-L)),ee=z(q,U*.6);return{background:ee,boxShadow:V===0?`0 0 0 2px color-mix(in oklab, ${ee}, #ffffff 60%)`:void 0}},S=V=>{if(E.value!=="date")return"";const q=d.value[V],Y=((q==null?void 0:q.offset)??0)===0;return(q==null?void 0:q.label)||Y&&t.rangeLabel||""},$=V=>!!S(V),x=V=>{var Y;if(E.value!=="offset")return"";const q=((Y=d.value[V])==null?void 0:Y.offset)??V;return q===0?"Current":`-${q}`},I=V=>{var L;if(E.value!=="date")return"";const q=S(V);return q||((((L=d.value[V])==null?void 0:L.offset)??V)===0&&t.rangeLabel?t.rangeLabel:"")};function J(V){return V?/^-\d+\s*(wk|mo)$/i.test(V.trim()):!0}function O(V,q){if(!V||!q)return"";const Y=Wt(V,"UTC"),L=Wt(q,"UTC");return Ga(Y,L,{day:"2-digit",month:"2-digit"})}function W(V){var K,Z;const q=((K=d.value[V])==null?void 0:K.offset)??V;if(!t.from||!t.to){const te=(Z=d.value[V])==null?void 0:Z.label;return J(te)?"":te||""}const Y=(t.rangeMode||"").toLowerCase(),L=It(t.from),U=It(t.to);if(!L||!U)return"";if(Y==="month"){const te=Zo(L,-q),ge=cc(te);return O(te,ge)}const ee=Ja(L,-7*q),se=Ja(U,-7*q);return O(ee,se)}function oe(V){var Z;const q=((Z=d.value[V])==null?void 0:Z.offset)??V,Y=(t.rangeMode||"").toLowerCase();if(!t.from)return q===0?"Current":`- ${q} wk`;const L=It(t.from),U=L?Y==="month"?Zo(L,-q):Ja(L,-7*q):null;if(!U)return q===0?"Current":`- ${q} wk`;if(Y==="month"){const te=U.getUTCMonth()+1,ge=L?L.getUTCMonth()+1:te;return`MONTH ${q===0?ge:te}`}const ee=Ia(U),se=L?Ia(L):ee;return`WEEK ${q===0?se:ee}`}return(V,q)=>(b(),w("div",{class:"balance-card",style:De(u.value)},[f("div",{class:Ee(["header",{compact:v.value}])},[o.value?(b(),w("div",J0,[f("span",Y0,R(a.value),1),k.value&&V.showTrend?(b(),w("span",Z0,R(k.value),1)):ne("",!0)])):ne("",!0),V.overview?(b(),w("div",{key:1,class:Ee(["index",{centered:v.value}])},[f("div",{class:"index-badge",style:De(T.value),title:P.value},[f("div",Q0,[f("span",ew,R(M.value),1)]),f("div",tw,[q[0]||(q[0]=f("div",{class:"index-badge__label"},"Current index",-1)),V.rangeLabel?(b(),w("div",aw,R(V.rangeLabel),1)):ne("",!0)])],12,X0)],2)):ne("",!0)],2),V.showTrend&&p.value?(b(),w("div",ow,[f("div",{class:"trend-line",style:De(B.value)},[(b(!0),w(ve,null,Ce(d.value,(Y,L)=>(b(),w("div",{key:L,class:Ee(["trend-block",{current:Y.offset===0,"no-range":!$(L)}]),title:Y.label||"",style:De(j(L))},[f("div",nw,[f("span",sw,R(N(Y.index)),1),f("span",lw,R(E.value==="date"?W(L)||I(L):""),1),f("span",iw,[E.value==="period"?(b(),w(ve,{key:0},[Oe(R(oe(L)),1)],64)):E.value==="offset"?(b(),w(ve,{key:1},[Oe(R(x(L)),1)],64)):ne("",!0)])])],14,rw))),128))],4)])):ne("",!0),V.showMessages&&h.value.length?(b(),w("div",cw,[q[1]||(q[1]=f("div",{class:"section-title"},"Messages",-1)),f("ul",null,[(b(!0),w(ve,null,Ce(h.value,(Y,L)=>(b(),w("li",{key:L},R(Y),1))),128))])])):ne("",!0),V.showConfig?(b(),w("div",dw,[f("div",null,"Basis: "+R(g.value.basis),1),f("div",null,"Notice : +"+R(g.value.noticeAbove??"")+" / -"+R(g.value.noticeBelow??""),1),f("div",null,"Warn : +"+R(g.value.warnAbove??"")+" / -"+R(g.value.warnBelow??""),1),f("div",null,"Warn index: "+R(g.value.warnIndex??""),1)])):ne("",!0),V.overview?ne("",!0):(b(),w("div",uw,"No balance data."))],4))}}),[["__scopeId","data-v-ad03af9b"]])},Symbol.toStringTag,{value:"Module"})),gw={key:0,class:"mix-header"},pw={class:"mix-title"},hw={class:"mix-subtitle"},mw={key:0,class:"mix-badge"},vw={class:"mix-column-label mix-column-label--current"},bw={key:2,class:"mix-list"},yw={class:"mix-label"},ww=["title"],kw={class:"mix-cell__value"},_w={key:3,class:"hint"},xw=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"CategoryMixTrendCard",props:{overview:{},rangeMode:{},lookbackWeeks:{},showBadge:{type:Boolean},showHeader:{type:Boolean},colorMode:{},density:{},labelMode:{},squareCells:{type:Boolean},rangeLabel:{},from:{},to:{},title:{},cardBg:{},toneLowColor:{},toneHighColor:{},shareLowColor:{},shareHighColor:{}},setup(e){const t=e,a=A(()=>t.showHeader!==!1),o=A(()=>t.density==="dense"?"dense":"normal"),r=A(()=>{const L=(t.labelMode||"period").toString().toLowerCase();return L==="offset"||L==="label"||L==="compact"||L==="date"?L:"period"}),n=A(()=>t.squareCells===!0),s=A(()=>{const L=t.colorMode;return L==="trend"||L==="share"||L==="hybrid"?L:"hybrid"}),l=A(()=>{var L,U;return t.showBadge===!1?"":((U=(L=t.overview)==null?void 0:L.trend)==null?void 0:U.badge)??""}),i=A(()=>t.rangeMode==="month"?"MO":"WE"),c=A(()=>t.rangeMode==="month"?"M":"W"),d=A(()=>J()),p=A(()=>Math.max(1,Math.min(4,t.lookbackWeeks||1))),m=A(()=>t.title||"Category mix trend"),h=A(()=>({background:t.cardBg||void 0})),u=A(()=>{var U,ee,se;const L=((ee=(U=t.overview)==null?void 0:U.trend)==null?void 0:ee.history)??((se=t.overview)==null?void 0:se.trendHistory)??[];return Array.isArray(L)?L.map(K=>({offset:Number((K==null?void 0:K.offset)??(K==null?void 0:K.step)??0)||0,label:String((K==null?void 0:K.label)??""),categories:Array.isArray(K==null?void 0:K.categories)?K.categories.map(Z=>({id:String((Z==null?void 0:Z.id)??""),label:String((Z==null?void 0:Z.label)??""),share:Number((Z==null?void 0:Z.share)??0)||0})):[]})).filter(K=>K.offset>0):[]}),g=L=>`-${L} ${i.value}`,v=(L,U)=>r.value==="label"&&U?U:r.value==="date"?x(L,U)||g(L):r.value==="offset"?`-${L}`:r.value==="compact"?`${c.value}-${L}`:I(L),k=A(()=>{if(!t.overview)return[];const L=p.value,U=new Map;return u.value.forEach(ee=>{const se=Math.max(1,Math.min(12,Math.round(ee.offset)));if(!se||se>L)return;const K={};ee.categories.forEach(Z=>{Z.id&&(K[Z.id]=Number.isFinite(Z.share)?Z.share:0)}),U.set(se,{offset:se,label:v(se,ee.label),shares:K})}),Array.from(U.values()).sort((ee,se)=>se.offset-ee.offset)}),C=A(()=>k.value.length+1),M=A(()=>({gridTemplateColumns:`minmax(0, var(--mix-label-width, 52px)) repeat(${Math.max(C.value,1)}, minmax(0, 1fr))`})),T=A(()=>({gridTemplateColumns:`repeat(${Math.max(C.value,1)}, minmax(0, 1fr))`})),P=A(()=>{const L=O(t.toneLowColor)||"#e11d48",U=O(t.toneHighColor)||"#10b981",ee=W(L,U,.5);return{down:q(L),flat:q(ee),up:q(U)}}),N=A(()=>{const L=O(t.shareLowColor)||"#e2e8f0",U=O(t.shareHighColor)||"#60a5fa";return{low:L,high:U}}),y=L=>{const U=Y(L,0,100)/100;return W(N.value.low,N.value.high,U)},E=L=>L>1?"up":L<-1?"down":"flat",B=A(()=>t.overview?(t.overview.categories??[]).map(U=>{const ee=k.value.map(te=>({label:te.label,share:te.shares[U.id]??0,isCurrent:!1})),se=typeof U.share=="number"?U.share:0,K=[...ee,{label:d.value,share:se,isCurrent:!0}],Z=K.map((te,ge)=>{const pe=ge===0?te.share:K[ge-1].share,F=te.share-pe,_=ge===0?"flat":E(F),H=s.value,X=P.value[_],Q=y(te.share),ie=q(Q),ue=H==="trend"?X.background:Q,he=H==="trend"?X.color:ie.color;return{label:te.label,share:te.share,isCurrent:!!te.isCurrent,trend:_,style:{"--mix-bg":ue,"--mix-fg":he,"--mix-accent":X.background}}});return{id:U.id,label:U.label,cells:Z}}):[]),z=A(()=>{var U;const L=p.value;if(L>1){const ee=t.rangeMode==="month"?"months":"weeks";return`History  last ${L} ${ee}`}return L===1&&k.value.length?((U=k.value[k.value.length-1])==null?void 0:U.label)||g(1):g(L||1)}),j=L=>`${Math.max(0,Math.round(L))}%`,S={day:"2-digit",month:"2-digit"};function $(L,U){if(!L||!U)return"";const ee=Wt(L,"UTC"),se=Wt(U,"UTC");return Ga(ee,se,S)}function x(L,U){if(!t.from||!t.to)return U||"";const ee=(t.rangeMode||"").toLowerCase(),se=It(t.from),K=It(t.to);if(!se||!K)return U||"";if(ee==="month"){const ge=Zo(se,-L),pe=cc(ge);return $(ge,pe)}const Z=Ja(se,-7*L),te=Ja(K,-7*L);return $(Z,te)}function I(L){const U=(t.rangeMode||"").toLowerCase();if(!t.from)return L===0?"Current":U==="month"?`-${L} mo`:`-${L} wk`;const ee=It(t.from),se=ee?U==="month"?Zo(ee,-L):Ja(ee,-7*L):null;if(!se)return L===0?"Current":U==="month"?`-${L} mo`:`-${L} wk`;if(U==="month"){const te=ee?ee.getUTCMonth()+1:se.getUTCMonth()+1;return`MONTH ${L===0?te:se.getUTCMonth()+1}`}const K=Ia(ee||se);return`WEEK ${L===0?K:Ia(se)}`}function J(){return r.value==="offset"?"Current":r.value==="compact"?"CUR":r.value==="label"?t.rangeLabel||(t.rangeMode==="month"?"This month":"This week"):r.value==="date"?x(0,t.rangeLabel||"")||(t.rangeMode==="month"?"This month":"This week"):I(0)}function O(L){if(!L||typeof L!="string")return null;const U=L.trim();return/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(U)?U:null}function W(L,U,ee=.5){const se=oe(L),K=oe(U);if(!se||!K)return L;const Z=Y(Math.round(se.r+(K.r-se.r)*ee),0,255),te=Y(Math.round(se.g+(K.g-se.g)*ee),0,255),ge=Y(Math.round(se.b+(K.b-se.b)*ee),0,255);return`#${[Z,te,ge].map(pe=>pe.toString(16).padStart(2,"0")).join("")}`}function oe(L){const U=L.replace("#","");if(U.length===3){const[ee,se,K]=U.split("").map(Z=>parseInt(Z.repeat(2),16));return{r:ee,g:se,b:K}}if(U.length===6){const ee=parseInt(U.slice(0,2),16),se=parseInt(U.slice(2,4),16),K=parseInt(U.slice(4,6),16);return{r:ee,g:se,b:K}}return null}function V(L){const U=oe(L);return U?(.2126*U.r+.7152*U.g+.0722*U.b)/255:0}function q(L){const U=V(L)>.6?"#0f172a":"#fff";return{background:L,color:U}}function Y(L,U,ee){return Math.min(ee,Math.max(U,L))}return(L,U)=>(b(),w("div",{class:Ee(["card mix-card",{"mix-card--no-header":!a.value,"mix-card--dense":o.value==="dense","mix-card--square":n.value}]),style:De(h.value)},[a.value?(b(),w("div",gw,[f("div",null,[f("div",pw,R(m.value),1),f("div",hw,R(z.value),1)]),l.value?(b(),w("span",mw,R(l.value),1)):ne("",!0)])):ne("",!0),k.value.length||B.value.length?(b(),w("div",{key:1,class:"mix-columns",style:De(M.value)},[U[0]||(U[0]=f("span",{class:"mix-column-label mix-column-label--label"},"CAT",-1)),(b(!0),w(ve,null,Ce(k.value,ee=>(b(),w("span",{key:`col-${ee.offset}`,class:"mix-column-label"},R(ee.label),1))),128)),f("span",vw,R(d.value),1)],4)):ne("",!0),B.value.length?(b(),w("ul",bw,[(b(!0),w(ve,null,Ce(B.value,ee=>(b(),w("li",{key:ee.id,class:"mix-row"},[f("span",yw,R(ee.label)+":",1),f("div",{class:"mix-cells",style:De(T.value)},[(b(!0),w(ve,null,Ce(ee.cells,(se,K)=>(b(),w("div",{key:`${ee.id}-cell-${K}`,class:Ee(["mix-cell",[`mix-cell--trend-${se.trend}`,`mix-cell--mode-${s.value}`,{"mix-cell--current":se.isCurrent}]]),style:De(se.style),title:`${ee.label}  ${se.label}  ${j(se.share)}`},[f("span",kw,R(j(se.share)),1)],14,ww))),128))],4)]))),128))])):(b(),w("div",_w,"No category mix history."))],6))}}),[["__scopeId","data-v-ef25d454"]])},Symbol.toStringTag,{value:"Module"}));function wo(e){if(!e)return null;const t=window.devicePixelRatio||1,a=e.getBoundingClientRect();if(a.width<2||a.height<2)return null;const o=Math.floor(a.width*t),r=Math.floor(a.height*t);e.width!==o&&(e.width=o),e.height!==r&&(e.height=r);const n=e.getContext("2d");return n?(n.setTransform(t,0,0,t,0,0),n):null}function Ut(e,t,a){var s;if(typeof document>"u")return a;const o=((s=e==null?void 0:e.closest)==null?void 0:s.call(e,"#opsdash"))??document.getElementById("opsdash"),r=o?getComputedStyle(o):null;return(r==null?void 0:r.getPropertyValue(t).trim())||a}function ko(e){const t=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(e||"");return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function ld(e,t,a){const o=n=>Math.max(0,Math.min(255,Math.round(n))),r=n=>o(n).toString(16).padStart(2,"0");return`#${r(e)}${r(t)}${r(a)}`}function id(e){const a=Math.pow((h=>h<0?0:h>1?1:h)(e),.6),o=typeof document<"u"?document.getElementById("opsdash"):null,r=o?getComputedStyle(o):null,n=(r==null?void 0:r.getPropertyValue("--heatmap-low").trim())||"#e0f2fe",s=(r==null?void 0:r.getPropertyValue("--heatmap-high").trim())||"#7c3aed",l=ko(n),i=ko(s);if(!l||!i)return"#7c3aed";const c=(h,u,g)=>Math.round(h+(u-h)*g),d=c(l.r,i.r,a),p=c(l.g,i.g,a),m=c(l.b,i.b,a);return`rgb(${d}, ${p}, ${m})`}const Cw=Le({__name:"GroupedBars",props:{data:{},showLabels:{type:Boolean},xLabel:{},yLabel:{}},setup(e){const t=e,a=le(null);let o=null,r=null;function n(i){const c=Math.max(0,Number(i)||0);return(Math.round(c*10)/10).toFixed(1)}function s(){const i=a.value;if(!i||!t.data)return;const c=wo(i);if(!c)return;const d=getComputedStyle(i),p=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-scale"))||1),m=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-space"))||p),h=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-density"))||1),u=p*h,g=i.clientWidth,v=i.clientHeight,k=28*m,C=k*1.4,M=v-k,T=g-k,P=Ut(i,"--line","#e5e7eb"),N=Ut(i,"--fg","#0f172a");c.clearRect(0,0,g,v),c.strokeStyle=P,c.lineWidth=1,c.beginPath(),c.moveTo(C,M),c.lineTo(T,M),c.moveTo(C,M),c.lineTo(C,k),c.stroke(),c.fillStyle=N,c.font=`${12*u}px ui-sans-serif,system-ui`;const y=String(t.xLabel??"").trim();if(y){const V=c.measureText(y).width,q=Math.min(v-6*u,M+18*u);c.fillText(y,C+(T-C)/2-V/2,q)}const E=String(t.yLabel??"").trim();E&&c.fillText(E,6*m,k*.8);const B=(t.data.labels||[]).map(V=>String(V??"")),z=Array.isArray(t.data.series)?t.data.series:[];if(!B.length||!z.length)return;const j=[];z.forEach(V=>{(Array.isArray(V.data)?V.data:[]).forEach(Y=>j.push(Math.max(0,Number(Y)||0)))});const S=Math.max(1,...j),$=B.length,x=Math.max(1,z.length),I=10*m,J=4*m,O=Math.max(12*m,(T-C-I*($+1))/$),W=Math.max(4*m,(O-J*(x-1))/x),oe=(M-k)/S;B.forEach((V,q)=>{const Y=C+I+q*(O+I);if(z.forEach((L,U)=>{var te;const ee=Math.max(0,Number(((te=L==null?void 0:L.data)==null?void 0:te[q])??0)),se=Math.max(0,ee*oe),K=Y+U*(W+J),Z=M-se;if(c.fillStyle=(L==null?void 0:L.color)||"#93c5fd",c.fillRect(K,Z,W,se),t.showLabels!==!1&&se>14*u&&W>20*u&&ee>.01){c.fillStyle=N,c.font=`${12*u}px ui-sans-serif,system-ui`;const ge=`${n(ee)}h`,pe=c.measureText(ge).width;c.fillText(ge,K+W/2-pe/2,Z+se/2+4*u)}}),O>26*u){c.fillStyle=N,c.font=`${12*u}px ui-sans-serif,system-ui`;const L=c.measureText(V).width;c.fillText(V,Y+O/2-L/2,M+14*u)}})}function l(){var i,c;try{o=new ResizeObserver(()=>s()),a.value&&o.observe(a.value)}catch{}try{const d=((i=a.value)==null?void 0:i.closest(".layout-item"))||((c=a.value)==null?void 0:c.parentElement);d&&(r=new MutationObserver(()=>s()),r.observe(d,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}return Dt(()=>{s(),l(),window.addEventListener("resize",s)}),Tt(()=>{try{window.removeEventListener("resize",s)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}o=null,r=null}),$e(()=>t.data,()=>s(),{deep:!0}),$e(()=>t.showLabels,()=>s()),(i,c)=>(b(),w("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),cd=Le({__name:"SimpleBars",props:{data:{},showLabels:{type:Boolean},xLabel:{},yLabel:{}},setup(e){const t=e,a=le(null);let o=null,r=null;function n(i){const c=Math.max(0,Number(i)||0);return(Math.round(c*10)/10).toFixed(1)}function s(){const i=a.value;if(!i||!t.data)return;const c=wo(i);if(!c)return;const d=getComputedStyle(i),p=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-scale"))||1),m=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-space"))||p),h=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-density"))||1),u=p*h,g=i.clientWidth,v=i.clientHeight,k=28*m,C=k*1.4,M=v-k,T=g-k,P=Ut(i,"--line","#e5e7eb"),N=Ut(i,"--fg","#0f172a");c.clearRect(0,0,g,v),c.strokeStyle=P,c.lineWidth=1,c.beginPath(),c.moveTo(C,M),c.lineTo(T,M),c.moveTo(C,M),c.lineTo(C,k),c.stroke(),c.fillStyle=N,c.font=`${12*u}px ui-sans-serif,system-ui`;const y=String(t.xLabel??"").trim();if(y){const O=c.measureText(y).width,W=Math.min(v-6*u,M+18*u);c.fillText(y,C+(T-C)/2-O/2,W)}const E=String(t.yLabel??"").trim();E&&c.fillText(E,6*m,k*.8);const B=(t.data.labels||[]).map(O=>String(O??"")),z=(t.data.data||[]).map(O=>Math.max(0,Number(O)||0)),j=Array.isArray(t.data.colors)?t.data.colors:[];if(!B.length||!z.length)return;const S=Math.max(1,...z),$=B.length,x=8*m,I=Math.max(6*m,(T-C-x*($+1))/$),J=(M-k)/S;B.forEach((O,W)=>{const oe=z[W]??0,V=Math.max(0,oe*J),q=C+x+W*(I+x),Y=M-V;if(c.fillStyle=j[W]||"#93c5fd",c.fillRect(q,Y,I,V),c.fillStyle=N,c.font=`${12*u}px ui-sans-serif,system-ui`,I>26){const L=c.measureText(O).width;c.fillText(O,q+I/2-L/2,M+14*u)}if(t.showLabels!==!1&&V>14*u&&I>22*u&&oe>.01){const L=`${n(oe)}h`,U=c.measureText(L).width;c.fillText(L,q+I/2-U/2,Y+V/2+4*u)}})}function l(){var i,c;try{o=new ResizeObserver(()=>s()),a.value&&o.observe(a.value)}catch{}try{const d=((i=a.value)==null?void 0:i.closest(".layout-item"))||((c=a.value)==null?void 0:c.parentElement);d&&(r=new MutationObserver(()=>s()),r.observe(d,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}return Dt(()=>{s(),l(),window.addEventListener("resize",s)}),Tt(()=>{try{window.removeEventListener("resize",s)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}o=null,r=null}),$e(()=>t.data,()=>s(),{deep:!0}),$e(()=>t.showLabels,()=>s()),(i,c)=>(b(),w("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),Sw={key:0,class:"chart-widget__header"},$w={class:"chart-widget__title"},Tw={key:0,class:"chart-widget__subtitle"},Mw={key:3,class:"chart-widget__empty"},Aw={key:4,class:"chart-widget__legend"},Dw=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"ChartDowWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showLabels:{type:Boolean},xLabel:{},yLabel:{},chartData:{},groupedData:{},legendItems:{}},setup(e){const t=e,a=A(()=>t.showHeader!==!1),o=A(()=>t.title||"Day of week"),r=A(()=>({background:t.cardBg||void 0})),n=A(()=>t.legendItems||[]),s=A(()=>t.xLabel||""),l=A(()=>t.yLabel||"");return(i,c)=>(b(),w("div",{class:"card chart-widget",style:De(r.value)},[a.value?(b(),w("div",Sw,[f("div",$w,R(o.value),1),i.subtitle?(b(),w("div",Tw,R(i.subtitle),1)):ne("",!0)])):ne("",!0),i.groupedData?(b(),it(Cw,{key:1,data:i.groupedData,"show-labels":i.showLabels,"x-label":s.value,"y-label":l.value},null,8,["data","show-labels","x-label","y-label"])):i.chartData?(b(),it(cd,{key:2,data:i.chartData,"show-labels":i.showLabels,"x-label":s.value,"y-label":l.value},null,8,["data","show-labels","x-label","y-label"])):(b(),w("div",Mw,"No data")),n.value.length?(b(),w("ul",Aw,[(b(!0),w(ve,null,Ce(n.value,d=>(b(),w("li",{key:d.id},[f("span",{class:"dot",style:De({background:d.color})},null,4),f("span",null,R(d.label),1)]))),128))])):ne("",!0)],4))}}),[["__scopeId","data-v-05ee383b"]])},Symbol.toStringTag,{value:"Module"})),dd=Le({__name:"HeatmapCanvas",props:{hod:{},baseColor:{}},setup(e){const t=e,a=le(null);let o=null;function r(){var I;const n=a.value,s=t.hod;if(!n)return;if(!s){console.info("[opsdash] heatmap: no data provided");return}const l=wo(n);if(!l)return;const i=getComputedStyle(n),c=Math.max(.5,Number.parseFloat(i.getPropertyValue("--widget-scale"))||1),d=Math.max(.5,Number.parseFloat(i.getPropertyValue("--widget-space"))||c),p=Math.max(.5,Number.parseFloat(i.getPropertyValue("--widget-density"))||1),m=c*p,h=n.clientWidth,u=n.clientHeight,g=s.dows||[],v=s.hours||[],k=s.matrix||[];l.clearRect(0,0,h,u);const C=36*d,M=C,T=C,P=h-C,N=u-C,y=(P-M)/Math.max(1,v.length),E=(N-T)/Math.max(1,g.length),B=Math.max(0,...k.flat())||1,z=typeof t.baseColor=="string"?t.baseColor.trim():"",j=Ut(n,"--heatmap-low","#e0f2fe"),S=ko(j),$=ko(z),x=J=>{const O=Math.max(0,Math.min(1,J)),W=Math.pow(O,.6);if(!S||!$)return id(W);const oe=(V,q,Y)=>Math.round(V+(q-V)*Y);return ld(oe(S.r,$.r,W),oe(S.g,$.g,W),oe(S.b,$.b,W))};g.length&&v.length&&console.info("[opsdash] heatmap draw",{rows:g.length,cols:v.length,vmax:B});for(let J=0;J<g.length;J++)for(let O=0;O<v.length;O++){const oe=(((I=k[J])==null?void 0:I[O])||0)/B,V=M+O*y,q=T+J*E;l.fillStyle=x(oe),l.fillRect(V,q,y-1,E-1)}l.fillStyle=Ut(n,"--fg","#0f172a"),l.font=`${12*m}px ui-sans-serif,system-ui`,g.forEach((J,O)=>l.fillText(J,8,T+O*E+12*m)),v.forEach((J,O)=>{O%2===0&&l.fillText(String(J),M+O*y+2,T-6*m)})}return Dt(async()=>{await oa(),r();try{o=new ResizeObserver(()=>r()),a.value&&o.observe(a.value)}catch{}window.addEventListener("resize",r)}),Tt(()=>{try{window.removeEventListener("resize",r)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}o=null}),$e(()=>t.hod,()=>r(),{deep:!0}),(n,s)=>(b(),w("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),Ew={class:"heatmap-lookback"},Lw={class:"heatmap-lookback__stacked"},Nw={class:"heatmap-lookback__label"},Iw={key:0,class:"heatmap-lookback__legend"},Ow={class:"heatmap-lookback__legend-scale"},Bw={class:"heatmap-lookback__legend-meta"},Pw={class:"heatmap-lookback__legend-weeks"},Fw=et(Le({__name:"HeatmapLookback",props:{entries:{},mode:{},showLegend:{type:Boolean}},setup(e){const t=e,a=le(null);let o=null;const r=A(()=>Array.isArray(t.entries)?t.entries:[]),n=A(()=>t.mode==="overlay"?"overlay":"stacked"),s=A(()=>t.showLegend!==!1),l=A(()=>{let h=0;return r.value.forEach(u=>{var g,v;(v=(g=u==null?void 0:u.hod)==null?void 0:g.matrix)==null||v.forEach(k=>{k.forEach(C=>{const M=Number(C);Number.isFinite(M)&&(h=Math.max(h,Math.max(0,M)))})})}),{max:h}}),i=A(()=>"Less hours"),c=A(()=>"More hours"),d=A(()=>{const h=l.value.max;return!Number.isFinite(h)||h<=0?"No activity yet":`0 to ${Number.isInteger(h)?String(h):h.toFixed(1)} h`});function p(){var U;if(n.value!=="overlay")return;const h=r.value;if(!h.length)return;const u=a.value;if(!u)return;const g=wo(u);if(!g)return;const v=getComputedStyle(u),k=Math.max(.5,Number.parseFloat(v.getPropertyValue("--widget-scale"))||1),C=Math.max(.5,Number.parseFloat(v.getPropertyValue("--widget-space"))||k),M=Math.max(.5,Number.parseFloat(v.getPropertyValue("--widget-density"))||1),T=k*M,P=u.clientWidth,N=u.clientHeight,y=(U=h[0])==null?void 0:U.hod,E=(y==null?void 0:y.dows)||[],B=(y==null?void 0:y.hours)||[];if(!E.length||!B.length)return;let z=0;h.forEach(ee=>{var se,K;(K=(se=ee.hod)==null?void 0:se.matrix)==null||K.forEach(Z=>{Z.forEach(te=>{z=Math.max(z,Math.max(0,Number(te)||0))})})}),z<=0&&(z=1);const j=36*C,S=j,$=j,x=P-j,I=N-j,J=(x-S)/Math.max(1,B.length),O=(I-$)/Math.max(1,E.length),W=Ut(u,"--heatmap-low","#e0f2fe"),oe=ko(W),V=h.map(ee=>ko(ee.color)),q=ee=>Math.max(0,Math.min(1,ee)),Y=(ee,se,K)=>Math.round(ee+(se-ee)*K),L=Math.max(1,h.length);g.clearRect(0,0,P,N);for(let ee=0;ee<E.length;ee++)for(let se=0;se<B.length;se++){const K=S+se*J,Z=$+ee*O,te=J/L;h.forEach((ge,pe)=>{var ie,ue,he;const F=Math.max(0,Number(((he=(ue=(ie=ge==null?void 0:ge.hod)==null?void 0:ie.matrix)==null?void 0:ue[ee])==null?void 0:he[se])??0)),_=q(F/z),H=Math.pow(_,.6),X=V[pe],Q=oe&&X?ld(Y(oe.r,X.r,H),Y(oe.g,X.g,H),Y(oe.b,X.b,H)):id(H);g.fillStyle=Q,g.fillRect(K+pe*te,Z,te,O-1)})}g.fillStyle=Ut(u,"--fg","#0f172a"),g.font=`${12*T}px ui-sans-serif,system-ui`,E.forEach((ee,se)=>g.fillText(ee,8,$+se*O+12*T)),B.forEach((ee,se)=>{se%2===0&&g.fillText(String(ee),S+se*J+2,$-6*T)})}function m(){try{o=new ResizeObserver(()=>p()),a.value&&o.observe(a.value)}catch{}window.addEventListener("resize",p)}return Dt(async()=>{await oa(),p(),m()}),Tt(()=>{try{window.removeEventListener("resize",p)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}o=null}),$e(()=>[r.value,n.value],()=>{n.value==="overlay"&&oa().then(()=>p())},{deep:!0}),(h,u)=>(b(),w("div",Ew,[io(f("div",Lw,[(b(!0),w(ve,null,Ce(r.value,g=>(b(),w("div",{key:g.id,class:"heatmap-lookback__panel"},[f("div",Nw,[f("span",{class:"dot",style:De({background:g.color})},null,4),f("span",null,R(g.label),1)]),Se(dd,{hod:g.hod,"base-color":g.color},null,8,["hod","base-color"])]))),128))],512),[[Ui,n.value==="stacked"]]),io(f("canvas",{ref_key:"cv",ref:a,class:"chart heatmap-lookback__overlay"},null,512),[[Ui,n.value==="overlay"]]),s.value&&r.value.length?(b(),w("div",Iw,[f("div",Ow,[f("span",null,R(i.value),1),u[0]||(u[0]=f("span",{class:"heatmap-lookback__legend-bar","aria-hidden":"true"},null,-1)),f("span",null,R(c.value),1)]),f("div",Bw,[f("span",null,R(d.value),1)]),f("ul",Pw,[(b(!0),w(ve,null,Ce(r.value,g=>(b(),w("li",{key:g.id},[f("span",{class:"dot",style:De({background:g.color})},null,4),f("span",null,R(g.label),1)]))),128))])])):ne("",!0)]))}}),[["__scopeId","data-v-d04eb3d7"]]),Hw={key:0,class:"chart-widget__header"},Ww={class:"chart-widget__title"},zw={key:0,class:"chart-widget__subtitle"},Rw={key:1,class:"chart-widget__meta"},jw={key:3,class:"chart-widget__empty"},Uw={key:4,class:"chart-widget__hint"},Vw=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"ChartHodWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showHint:{type:Boolean},showLegend:{type:Boolean},lookbackMode:{},lookbackWeeks:{},rangeMode:{},hodData:{},lookbackEntries:{}},setup(e){const t=e,a=A(()=>t.showHeader!==!1),o=A(()=>t.title||"Hours of day"),r=A(()=>({background:t.cardBg||void 0})),n=A(()=>t.lookbackEntries||[]),s=A(()=>t.showLegend!==!1),l=A(()=>t.lookbackMode||"stacked"),i=A(()=>{const c=typeof t.lookbackWeeks=="number"?Math.max(0,Math.round(t.lookbackWeeks)):0;if(!c)return"";const d=(t.rangeMode||"").toString().toLowerCase()==="month"?"month":"week";return`History  last ${c} ${c===1?d:`${d}s`}`});return(c,d)=>(b(),w("div",{class:"card chart-widget chart-widget--hod",style:De(r.value)},[a.value?(b(),w("div",Hw,[f("div",Ww,R(o.value),1),c.subtitle?(b(),w("div",zw,R(c.subtitle),1)):ne("",!0),i.value?(b(),w("div",Rw,R(i.value),1)):ne("",!0)])):ne("",!0),n.value.length?(b(),it(Fw,{key:1,entries:n.value,mode:l.value,"show-legend":s.value},null,8,["entries","mode","show-legend"])):c.hodData?(b(),it(dd,{key:2,hod:c.hodData},null,8,["hod"])):(b(),w("div",jw,"No data")),c.showHint&&c.hodData?(b(),w("div",Uw,"247 Heatmap: hours by weekday and hour.")):ne("",!0)],4))}}),[["__scopeId","data-v-639549e5"]])},Symbol.toStringTag,{value:"Module"})),Kw={key:0,class:"chart-widget__header"},qw={class:"chart-widget__title"},Gw={key:0,class:"chart-widget__subtitle"},Jw={key:2,class:"chart-widget__empty"},Yw={key:3,class:"chart-widget__legend"},Zw=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"ChartPerDayWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showLabels:{type:Boolean},xLabel:{},yLabel:{},chartData:{},legendItems:{}},setup(e){const t=e,a=A(()=>t.showHeader!==!1),o=A(()=>t.title||"Per-day totals"),r=A(()=>({background:t.cardBg||void 0})),n=A(()=>t.legendItems||[]),s=A(()=>t.xLabel||""),l=A(()=>t.yLabel||"");return(i,c)=>(b(),w("div",{class:"card chart-widget",style:De(r.value)},[a.value?(b(),w("div",Kw,[f("div",qw,R(o.value),1),i.subtitle?(b(),w("div",Gw,R(i.subtitle),1)):ne("",!0)])):ne("",!0),i.chartData?(b(),it(cd,{key:1,data:i.chartData,"show-labels":i.showLabels,"x-label":s.value,"y-label":l.value},null,8,["data","show-labels","x-label","y-label"])):(b(),w("div",Jw,"No data")),n.value.length?(b(),w("ul",Yw,[(b(!0),w(ve,null,Ce(n.value,d=>(b(),w("li",{key:d.id},[f("span",{class:"dot",style:De({background:d.color})},null,4),f("span",null,R(d.label),1)]))),128))])):ne("",!0)],4))}}),[["__scopeId","data-v-66cec46a"]])},Symbol.toStringTag,{value:"Module"})),Xw=et(Le({__name:"PieChart",props:{data:{},colorsById:{},colorsByName:{},showLabels:{type:Boolean},highlightId:{}},setup(e){const t=e,a=le(null);let o=null,r=null,n=null;const s=le(null);function l(){const p=t.data,m=a.value;if(!m||!p)return;const h=wo(m);if(!h)return;const u=getComputedStyle(m),g=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-scale"))||1),v=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-space"))||g),k=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-density"))||1),C=Math.max(.6,Number.parseFloat(u.getPropertyValue("--pie-scale"))||.85),M=g*k*C,T=m.clientWidth,P=m.clientHeight,N=T/2,y=P/2,E=Math.min(T,P)*(.35*v*C),B=p.data||[],z=p.labels||[],j=p.ids||[],S=p.colors||[],$=[];for(let K=0;K<B.length;K++)(Number(B[K])||0)>0&&$.push(K);if(h.clearRect(0,0,T,P),$.length===0)return;const x=$.map(K=>Number(B[K])||0),I=$.map(K=>String(z[K]||"")),J=$.map(K=>String(j[K]||"")),O=$.map(K=>S[K]),W=x.reduce((K,Z)=>K+Math.max(0,Z),0)||1;let oe=-Math.PI/2;const V=Ut(m,"--line","#e5e7eb"),q=Ut(m,"--fg","#0f172a"),Y=Ut(m,"--bg","#ffffff");h.lineWidth=1,h.strokeStyle=V;const L=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"];s.value&&!J.includes(s.value)&&(s.value=null);const U=t.highlightId??s.value?String(t.highlightId??s.value):"",ee=!!(U&&J.includes(U)),se=[];x.forEach((K,Z)=>{var he,fe;const te=Math.max(0,K)/W,ge=oe+te*2*Math.PI,pe=String((I==null?void 0:I[Z])||""),F=String((J==null?void 0:J[Z])||""),_=O[Z],H=(he=t.colorsById)==null?void 0:he[F],X=(fe=t.colorsByName)==null?void 0:fe[pe];let Q=H||X||_||L[Z%L.length];const ie=ee&&F===U,ue=ee&&!ie;if(h.save(),ue&&(h.globalAlpha=.25),h.beginPath(),h.moveTo(N,y),h.arc(N,y,E,oe,ge),h.closePath(),h.fillStyle=Q,h.fill(),h.lineWidth=ie?2:1,h.strokeStyle=ie?"rgba(255,255,255,0.9)":V,h.stroke(),h.restore(),t.showLabels!==!1){const de=(oe+ge)/2,ye=N+Math.cos(de)*(E+12*v*C),me=y+Math.sin(de)*(E+12*v*C);h.save(),h.font=`${12*M}px ui-sans-serif,system-ui`,h.fillStyle=q,h.strokeStyle=Y,h.lineWidth=3,h.textAlign="center",h.textBaseline="middle";const we=Math.max(0,Number(K)||0)/W*100,xe=`${I!=null&&I[Z]?I[Z]+" ":""}${Number(K).toFixed(2)}h  ${we.toFixed(1)}%`;h.strokeText(xe,ye,me),h.fillText(xe,ye,me),h.restore()}se.push({start:oe,end:ge,id:F}),oe=ge}),n={cx:N,cy:y,r:E,segments:se}}function i(){var p,m;try{o=new ResizeObserver(()=>l()),a.value&&o.observe(a.value)}catch{}try{const h=((p=a.value)==null?void 0:p.closest(".layout-item"))||((m=a.value)==null?void 0:m.parentElement);h&&(r=new MutationObserver(()=>l()),r.observe(h,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}Dt(()=>{l(),i(),window.addEventListener("resize",l)}),Tt(()=>{try{window.removeEventListener("resize",l)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}try{const p=a.value;p&&(p.removeEventListener("mousemove",c),p.removeEventListener("mouseleave",d))}catch{}o=null,r=null}),$e(()=>t.data,()=>l(),{deep:!0}),$e(()=>t.colorsById,()=>l(),{deep:!0}),$e(()=>t.showLabels,()=>l()),$e(()=>t.highlightId,()=>l());function c(p){const m=a.value;if(!m||!n)return;const h=m.getBoundingClientRect(),u=p.clientX-h.left,g=p.clientY-h.top,v=u-n.cx,k=g-n.cy,C=Math.sqrt(v*v+k*k);if(!Number.isFinite(C)||C>n.r){s.value&&(s.value=null,l());return}let M=Math.atan2(k,v);M<-Math.PI/2&&(M+=Math.PI*2);const T=n.segments.find(N=>M>=N.start&&M<=N.end),P=T?T.id:null;P!==s.value&&(s.value=P,l())}function d(){s.value&&(s.value=null,l())}return $e(()=>a.value,(p,m)=>{m&&(m.removeEventListener("mousemove",c),m.removeEventListener("mouseleave",d)),p&&(p.addEventListener("mousemove",c),p.addEventListener("mouseleave",d))},{immediate:!0}),(p,m)=>(b(),w("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),[["__scopeId","data-v-0b0f384d"]]),Qw={key:0,class:"chart-widget__header"},ek={class:"chart-widget__title"},tk={key:0,class:"chart-widget__subtitle"},ak={key:2,class:"chart-widget__empty"},ok={key:3,class:"chart-widget__legend"},rk=["onMouseenter","onFocus"],nk={class:"val"},sk=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"ChartPieWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},compact:{type:Boolean},showLegend:{type:Boolean},showLabels:{type:Boolean},chartData:{},colorsById:{},colorsByName:{}},setup(e){const t=e,a=A(()=>t.showHeader!==!1),o=A(()=>t.title||"Pie chart"),r=A(()=>({background:t.cardBg||void 0})),n=A(()=>t.colorsById||{}),s=A(()=>t.colorsByName||{}),l=le(null),i=A(()=>{const c=t.chartData;if(!c||!Array.isArray(c.data))return[];const d=c.data.reduce((p,m)=>p+Math.max(0,Number(m)||0),0)||1;return c.data.map((p,m)=>{var C,M,T;const h=Math.max(0,Number(p)||0),u=String(((C=c.labels)==null?void 0:C[m])??""),g=String(((M=c.ids)==null?void 0:M[m])??u??m),v=((T=c.colors)==null?void 0:T[m])||n.value[g]||s.value[u]||"#60a5fa",k=h/d*100;return{id:g,label:u,color:v,value:`${h.toFixed(1)}h  ${k.toFixed(0)}%`}})});return(c,d)=>(b(),w("div",{class:"card chart-widget",style:De(r.value)},[a.value?(b(),w("div",Qw,[f("div",ek,R(o.value),1),c.subtitle?(b(),w("div",tk,R(c.subtitle),1)):ne("",!0)])):ne("",!0),c.chartData?(b(),it(Xw,{key:1,data:c.chartData,"colors-by-id":n.value,"colors-by-name":s.value,"show-labels":c.showLabels,"highlight-id":l.value},null,8,["data","colors-by-id","colors-by-name","show-labels","highlight-id"])):(b(),w("div",ak,"No data")),c.showLegend&&i.value.length?(b(),w("ul",ok,[(b(!0),w(ve,null,Ce(i.value,p=>(b(),w("li",{key:p.id,class:Ee({hovered:l.value===p.id}),onMouseenter:m=>l.value=p.id,onMouseleave:d[0]||(d[0]=m=>l.value=null),onFocus:m=>l.value=p.id,onBlur:d[1]||(d[1]=m=>l.value=null),tabindex:"0"},[f("span",{class:"dot",style:De({background:p.color})},null,4),f("span",null,R(p.label),1),f("span",nk,R(p.value),1)],42,rk))),128))])):ne("",!0)],4))}}),[["__scopeId","data-v-1a53cec2"]])},Symbol.toStringTag,{value:"Module"})),lk=et(Le({__name:"StackedBars",props:{stacked:{},colorsById:{},showLabels:{type:Boolean},highlightId:{}},setup(e){const t=e,a=le(null);let o=null,r=null,n=null;const s=le(null);function l(N,y,E,B,z){N.save(),z!=null&&z.font&&(N.font=z.font),z!=null&&z.align&&(N.textAlign=z.align),z!=null&&z.baseline&&(N.textBaseline=z.baseline),N.lineWidth=3,N.strokeStyle=(z==null?void 0:z.stroke)||"rgba(0,0,0,0.55)",N.strokeText(y,E,B),N.fillStyle=(z==null?void 0:z.fill)||"#ffffff",N.fillText(y,E,B),N.restore()}function i(N){const y=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(N||"");return y?{r:parseInt(y[1],16),g:parseInt(y[2],16),b:parseInt(y[3],16)}:null}function c(N,y){const E=i(N);return E&&(.2126*E.r+.7152*E.g+.0722*E.b)/255<.55?"#ffffff":y}function d(N){const y=Math.max(0,Number(N)||0);return(Math.round(y*10)/10).toFixed(1)}function p(N,y=.5){const E=i(N);if(!E)return N;const B=Math.max(0,Math.min(1,y)),z=Math.round(E.r+(255-E.r)*B),j=Math.round(E.g+(255-E.g)*B),S=Math.round(E.b+(255-E.b)*B);return`rgb(${z},${j},${S})`}function m(N,y=.5){const E=i(N);if(!E)return N;const B=Math.max(0,Math.min(1,y)),z=Math.round(E.r*(1-B)),j=Math.round(E.g*(1-B)),S=Math.round(E.b*(1-B));return`rgb(${z},${j},${S})`}function h(N,y){const{x:E,y:B,width:z,height:j,baseColor:S,variant:$}=y,x=$==="mixed",I=Math.max(0,Math.min(1,Number(y.alphaScale))),J=Math.min(z*(x?.35:.22),6),O=Math.max(2,x?z*.45:z-J*2),W=x?E+z-O-J:E+(z-O)/2,oe=p(S,x?.6:.45),V=m(S,x?.4:.35);N.save(),N.fillStyle=oe,N.globalAlpha=(x?.12:.16)*I,N.fillRect(W,B,O,j),N.restore(),N.save(),N.strokeStyle=V,N.lineWidth=x?1.25:1.5,N.globalAlpha=(x?.6:.75)*I,N.setLineDash([4,4]),N.strokeRect(W,B,O,j),N.restore(),N.save(),N.strokeStyle=V,N.globalAlpha=(x?.35:.45)*I,N.lineWidth=1,N.beginPath(),N.moveTo(W,B),N.lineTo(W+O,B),N.stroke(),N.restore()}function u(){const N=a.value;if(!N)return;const y=wo(N);if(!y)return;const E=getComputedStyle(N),B=Math.max(.5,Number.parseFloat(E.getPropertyValue("--widget-scale"))||1),z=Math.max(.5,Number.parseFloat(E.getPropertyValue("--widget-space"))||B),j=Math.max(.5,Number.parseFloat(E.getPropertyValue("--widget-density"))||1),S=Math.max(.6,Number.parseFloat(E.getPropertyValue("--stacked-scale"))||.85),$=B*j*S,x=`${11*$}px ui-sans-serif,system-ui`,I=N.clientWidth,J=N.clientHeight,O=28*z,W=O*1.4,oe=J-O,V=I-O,q=Ut(N,"--line","#e5e7eb"),Y=Ut(N,"--fg","#0f172a"),L=Ut(N,"--bg","#ffffff");y.clearRect(0,0,I,J),y.strokeStyle=q,y.lineWidth=1,y.beginPath(),y.moveTo(W,oe),y.lineTo(V,oe),y.moveTo(W,oe),y.lineTo(W,O),y.stroke();const U=t.stacked;if(U&&U.labels&&U.series){const ee=[];let se=U.labels||[],K=U.series||[];const Z=C(se,K);se=Z.labels,K=Z.series;const te=K.map(Ae=>String((Ae==null?void 0:Ae.id)??""));s.value&&!te.includes(s.value)&&(s.value=null);const ge=t.highlightId??s.value?String(t.highlightId??s.value):"",pe=!!(ge&&te.includes(ge)),F=se.map((Ae,Me)=>K.reduce((Fe,ze)=>{var Ue;return Fe+Math.max(0,Number(((Ue=ze.data)==null?void 0:Ue[Me])||0))},0)),_=se.map((Ae,Me)=>K.reduce((Fe,ze)=>{var Ue;return Fe+Math.max(0,Number(((Ue=ze.forecast)==null?void 0:Ue[Me])||0))},0)),H=F.map((Ae,Me)=>Ae+_[Me]),X=Math.max(1,...H),Q=se.length||1,ie=8*z,ue=Math.max(6*z,(V-W-ie*(Q+1))/Q),he=ie*S,fe=Math.max(4*z*S,ue*S),de=fe*Q+he*(Q+1),ye=W+Math.max(0,(V-W-de)/2),me=(oe-O)/X*S;let we=0,xe=0;se.forEach((Ae,Me)=>{const Fe=ye+he+Me*(fe+he);let ze=oe,Ue=0;const Je=[];K.forEach(Be=>{var St;const Ve=Math.max(0,Number(((St=Be.data)==null?void 0:St[Me])||0)),We=Ve*me;ze-=We;const ct=String(Be.id??""),gt=t.colorsById[Be.id]||Be.color||"#93c5fd",Re=pe&&ct===ge,qe=pe&&!Re;if(We>.5&&(y.save(),qe&&(y.globalAlpha=.25),y.fillStyle=gt,y.fillRect(Fe,ze,fe,We),Re&&(y.strokeStyle="rgba(255,255,255,0.9)",y.lineWidth=1.5,y.strokeRect(Fe,ze,fe,We)),y.restore()),t.showLabels!==!1&&Ve>.01){const pt=d(Ve);y.font=x;const bt=y.measureText(pt).width;if(We>14*$&&fe>bt+6*$)y.save(),qe&&(y.globalAlpha=.25),y.fillStyle=c(gt,Y),y.font=x,y.fillText(pt,Fe+fe/2-bt/2,ze+We/2+4),y.restore();else if(We>.5){const $a=ze+We/2,ha=6*z,sa=Fe+fe+ha,Ze=Fe-ha,Xe=sa+bt<=V,ht=Xe?sa:Ze,Za=Xe?"left":"right",cr=Xe?Fe+fe:Fe,dr=Xe?ht-4*z:ht+4*z;Je.push({y:$a,text:pt,align:Za,textX:ht,lineStartX:cr,lineEndX:dr,alpha:qe?.25:1})}}We>.5&&ee.push({x:Fe,y:ze,width:fe,height:We,id:ct}),Ue+=Ve});let ft=ze,tt=0;if(K.forEach(Be=>{var St;const Ve=Math.max(0,Number(((St=Be.forecast)==null?void 0:St[Me])||0));if(Ve<=0)return;const We=Ve*me;if(ft-=We,tt+=Ve,We<=.5)return;const ct=String(Be.id??""),gt=t.colorsById[Be.id]||Be.color||"#93c5fd",qe=pe&&!(pe&&ct===ge);h(y,{x:Fe,y:ft,width:fe,height:We,baseColor:gt,variant:Ue>.01?"mixed":"future",alphaScale:qe?.25:1})}),t.showLabels!==!1&&Je.length){const Be=12*$,Ve=O+6*$,We=oe-6*$;Je.sort((Re,qe)=>Re.y-qe.y),Je.forEach((Re,qe)=>{qe===0?Re.y=Math.max(Re.y,Ve):Re.y=Math.max(Re.y,Je[qe-1].y+Be)});const ct=Je[Je.length-1].y-We;ct>0&&Je.forEach(Re=>{Re.y-=ct});const gt=Ve-Je[0].y;gt>0&&Je.forEach(Re=>{Re.y+=gt}),y.save(),y.font=x,y.textBaseline="middle",Je.forEach(Re=>{y.save(),y.globalAlpha=Re.alpha,y.strokeStyle=q,y.lineWidth=1,y.beginPath(),y.moveTo(Re.lineStartX,Re.y),y.lineTo(Re.lineEndX,Re.y),y.stroke(),y.fillStyle=Y,y.textAlign=Re.align,y.fillText(Re.text,Re.textX,Re.y),y.restore()}),y.restore()}we+=Ue,xe+=tt,y.fillStyle=Y,y.font=`${12*$}px ui-sans-serif,system-ui`;const at=M(String(se[Me]||""));if(fe>26*$){const Be=y.measureText(at).width;y.fillText(at,Fe+fe/2-Be/2,oe+14*$)}const He=tt>.01?`~${d(Ue+tt)}h`:Ue>.01?`${d(Ue)}h`:"";t.showLabels!==!1&&He&&l(y,He,Fe+fe/2,Math.max(O+4*$,ft-2),{align:"center",baseline:"bottom",font:`${11*$}px ui-sans-serif,system-ui`,fill:Y,stroke:L})});const Ne=xe>.01?`~${d(we+xe)}h expected`:`${d(we)}h total`;t.showLabels!==!1&&l(y,Ne,V-4,O+4*$,{align:"right",baseline:"top",font:`${12*$}px ui-sans-serif,system-ui`,fill:Y,stroke:L}),n={segments:ee};return}n=null}function g(){var N,y;try{o=new ResizeObserver(()=>u()),a.value&&o.observe(a.value)}catch{}try{const E=((N=a.value)==null?void 0:N.closest(".layout-item"))||((y=a.value)==null?void 0:y.parentElement);E&&(r=new MutationObserver(()=>u()),r.observe(E,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}Dt(()=>{u(),g(),window.addEventListener("resize",u)}),Tt(()=>{try{window.removeEventListener("resize",u)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}try{const N=a.value;N&&(N.removeEventListener("mousemove",v),N.removeEventListener("mouseleave",k))}catch{}o=null,r=null}),$e(()=>t.stacked,()=>u(),{deep:!0}),$e(()=>t.colorsById,()=>u(),{deep:!0}),$e(()=>t.showLabels,()=>u()),$e(()=>t.highlightId,()=>u());function v(N){const y=a.value;if(!y||!n)return;const E=y.getBoundingClientRect(),B=N.clientX-E.left,z=N.clientY-E.top;let j=null;for(let S=n.segments.length-1;S>=0;S-=1){const $=n.segments[S];if(B>=$.x&&B<=$.x+$.width&&z>=$.y&&z<=$.y+$.height){j=$.id;break}}j!==s.value&&(s.value=j,u())}function k(){s.value&&(s.value=null,u())}$e(()=>a.value,(N,y)=>{y&&(y.removeEventListener("mousemove",v),y.removeEventListener("mouseleave",k)),N&&(N.addEventListener("mousemove",v),N.addEventListener("mouseleave",k))},{immediate:!0});function C(N,y){if(!Array.isArray(N)||N.length!==7)return{labels:N,series:y};const E=N.map(J=>T(J));if(E.some(J=>!J))return{labels:N,series:y};const B=E.map(J=>P(J)),z=ls(),j=[];for(let J=0;J<7;J+=1){const O=(z+J)%7;j.push(O===0?7:O)}if(B.join(",")===j.join(","))return{labels:N,series:y};const S={};if(B.forEach((J,O)=>{S[J]=O}),!j.every(J=>J in S))return{labels:N,series:y};const $=j.map(J=>S[J]),x=$.map(J=>N[J]),I=(y||[]).map(J=>{const O=Array.isArray(J.data)?J.data:[],W=Array.isArray(J.forecast)?J.forecast:null,oe=$.map(Y=>O[Y]??0),V=W?$.map(Y=>W[Y]??0):void 0,q={...J,data:oe};return V&&(q.forecast=V),q});return{labels:x,series:I}}function M(N){return qr(N,{weekday:"short"})||N}function T(N){return It(N)}function P(N){const y=N.getUTCDay();return y===0?7:y}return(N,y)=>(b(),w("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),[["__scopeId","data-v-665ab1a0"]]),ik={key:0,class:"chart-widget__header"},ck={class:"chart-widget__title"},dk={key:0,class:"chart-widget__subtitle"},uk={key:2,class:"chart-widget__empty"},fk={key:3,class:"chart-widget__legend"},gk=["onMouseenter","onFocus"],pk=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"ChartStackedWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},compact:{type:Boolean},showLegend:{type:Boolean},showLabels:{type:Boolean},stacked:{},colorsById:{}},setup(e){const t=e,a=A(()=>t.showHeader!==!1),o=A(()=>t.title||"Stacked bars"),r=A(()=>({background:t.cardBg||void 0})),n=A(()=>t.colorsById||{}),s=le(null),l=A(()=>{var c;return(((c=t.stacked)==null?void 0:c.series)||[]).map(d=>{const p=String((d==null?void 0:d.id)??""),m=String((d==null?void 0:d.name)??(d==null?void 0:d.label)??p),h=(d==null?void 0:d.color)||n.value[p]||"#60a5fa";return{id:p,label:m,color:h}})});return(i,c)=>(b(),w("div",{class:"card chart-widget",style:De(r.value)},[a.value?(b(),w("div",ik,[f("div",ck,R(o.value),1),i.subtitle?(b(),w("div",dk,R(i.subtitle),1)):ne("",!0)])):ne("",!0),i.stacked?(b(),it(lk,{key:1,stacked:i.stacked,"colors-by-id":n.value,"show-labels":i.showLabels,"highlight-id":s.value},null,8,["stacked","colors-by-id","show-labels","highlight-id"])):(b(),w("div",uk,"No data")),i.showLegend&&l.value.length?(b(),w("ul",fk,[(b(!0),w(ve,null,Ce(l.value,d=>(b(),w("li",{key:d.id,class:Ee({hovered:s.value===d.id}),onMouseenter:p=>s.value=d.id,onMouseleave:c[0]||(c[0]=p=>s.value=null),onFocus:p=>s.value=d.id,onBlur:c[1]||(c[1]=p=>s.value=null),tabindex:"0"},[f("span",{class:"dot",style:De({background:d.color})},null,4),f("span",null,R(d.label),1)],42,gk))),128))])):ne("",!0)],4))}}),[["__scopeId","data-v-20b54b56"]])},Symbol.toStringTag,{value:"Module"})),hk={class:"group-row"},mk={colspan:"5"},vk={class:"group-header"},bk={class:"group-label"},yk={class:"name"},wk={key:0,class:"group-meta"},kk={class:"summary"},_k={key:0,class:"summary-percent"},xk={key:1,class:"group-meta"},Ck={class:"summary"},Sk={key:0},$k=["title"],Tk={class:"row-name"},Mk={key:0,class:"progress"},Ak={class:"progress-chip"},Dk={class:"num"},Ek={class:"num"},Lk={class:"num"},Nk={class:"num"},Ik={key:0,class:"hint"},Ok={key:0,class:"empty-row"},Bk=et(Le({__name:"ByCalendarTable",props:{rows:{},n2:{type:Function},targets:{},groups:{},todayHours:{}},setup(e){const t=e,a=A(()=>Array.isArray(t.groups)&&t.groups.length?t.groups.map(T=>({id:T.id,label:T.label,summary:T.summary??null,color:T.color,rows:(T.rows||[]).map(o)})):[{id:"__all__",label:"Calendars",summary:null,color:void 0,rows:(t.rows||[]).map(o)}]);function o(T){const P=r(T);return{...T,calendarId:P}}function r(T){return T?T.calendarId?String(T.calendarId):T.id?String(T.id):T.calendar_id?String(T.calendar_id):T.calendar?String(T.calendar):"":""}function n(T){return String(T.calendar||T.displayname||T.name||T.calendarId||"")}function s(T){return r(T)||n(T)}function l(T){const P=v(T);if(!P)return!1;const N=t.targets||{},y=Number(N[P]);return isFinite(y)&&y>0}function i(T){const P=v(T);if(!P)return 0;const N=t.targets||{},y=Number(N[P]);return isFinite(y)?y:0}function c(T){const P=i(T);return P>0?(Math.round(P*100)/100).toFixed(2):""}function d(T,P){return T-P>=0?"delta pos":"delta neg"}function p(T,P){const N=T-P,y=Math.abs(Math.round(N*100)/100).toFixed(2);return(N>=0?"+":"-")+y+"h"}function m(T,P){return Math.max(0,Math.min(100,P>0?T/P*100:0)).toFixed(0)+"%"}function h(T,P){return Math.max(0,Math.min(100,P>0?T/P*100:0))}function u(T){const P=v(T);if(!P)return 0;const N=t.todayHours||{},y=Number(N[P]??0);return Number.isFinite(y)?Math.max(0,y):0}function g(T){const P=i(r(T)),N=u(r(T));if(P<=0||N<=1e-4)return null;const y=Math.max(2,Math.min(120,N/P*100)),E=h(T.total_hours,P),B=Math.max(0,E-y);return{pct:y,left:B,text:N.toFixed(2)+"h"}}function v(T){return T==null?"":String(T)}function k(T){const P=T.summary;if(!P)return`${T.rows.length} calendar${T.rows.length===1?"":"s"}`;const N=t.n2(P.actualHours);return P.targetHours>0?`${N} h / ${t.n2(P.targetHours)} h`:`${N} h`}function C(T){const P=T.summary;return!P||P.targetHours<=0?"":`${Math.round(P.percent)}%`}function M(T){switch(T){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}return(T,P)=>(b(),w("table",null,[P[1]||(P[1]=f("colgroup",null,[f("col",{class:"col-w-42"}),f("col",{class:"col-w-12"}),f("col",{class:"col-w-14"}),f("col",{class:"col-w-14"}),f("col",{class:"col-w-18"})],-1)),P[2]||(P[2]=f("thead",null,[f("tr",null,[f("th",{class:"nowrap"},"Calendar"),f("th",{class:"num"},"Events"),f("th",{class:"num"},"Hours"),f("th",{class:"num"},"Target"),f("th",{class:"num"}," / %")])],-1)),f("tbody",null,[(b(!0),w(ve,null,Ce(a.value,N=>(b(),w(ve,{key:N.id},[f("tr",hk,[f("td",mk,[f("div",vk,[f("div",bk,[f("span",{class:"dot",style:De({background:N.color||"var(--brand)"})},null,4),f("span",yk,R(N.label),1)]),N.summary?(b(),w("div",wk,[f("span",kk,R(k(N)),1),C(N)?(b(),w("span",_k,R(C(N)),1)):ne("",!0),N.summary.statusLabel?(b(),w("span",{key:1,class:Ee(["badge",M(N.summary.status)])},R(N.summary.statusLabel),3)):ne("",!0)])):(b(),w("div",xk,[f("span",Ck,[Oe(R(N.rows.length)+" calendar",1),N.rows.length!==1?(b(),w("span",Sk,"s")):ne("",!0)])]))])])]),(b(!0),w(ve,null,Ce(N.rows,y=>(b(),w("tr",{key:s(y)},[f("td",null,[f("div",{class:"cell",title:n(y)},[f("div",Tk,R(n(y)),1),l(r(y))&&i(r(y))>0?(b(),w("div",Mk,[f("div",{class:"progress-bar",style:De({width:h(y.total_hours,i(r(y)))+"%",background:N.color||void 0})},null,4),g(y)?(b(),w("div",{key:0,class:"progress-today",style:De({left:g(y).left+"%",width:g(y).pct+"%",background:N.color||"var(--brand)"})},[f("span",Ak,R(g(y).text),1)],4)):ne("",!0)])):ne("",!0)],8,$k)]),f("td",Dk,R(y.events_count),1),f("td",Ek,R(T.n2(y.total_hours)),1),f("td",Lk,R(c(r(y))),1),f("td",Nk,[l(r(y))?(b(),w(ve,{key:0},[f("span",{class:Ee(d(y.total_hours,i(r(y))))},R(p(y.total_hours,i(r(y)))),3),i(r(y))>0?(b(),w("span",Ik," ("+R(m(y.total_hours,i(r(y))))+")",1)):ne("",!0)],64)):(b(),w(ve,{key:1},[Oe("")],64))])]))),128)),N.rows.length?ne("",!0):(b(),w("tr",Ok,[...P[0]||(P[0]=[f("td",{colspan:"5",class:"empty"},"No calendars assigned",-1)])]))],64))),128))])]))}}),[["__scopeId","data-v-2efa83d5"]]),Pk={key:0,class:"table-widget__header"},Fk={class:"table-widget__title"},Hk={key:0,class:"table-widget__subtitle"},Wk={key:2,class:"table-widget__empty"},zk=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"CalendarTableWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},rows:{},targets:{},groups:{},todayHours:{}},setup(e){const t=e,a=A(()=>t.showHeader!==!1),o=A(()=>t.title||"By calendar"),r=A(()=>({background:t.cardBg||void 0})),n=s=>Number(s??0).toFixed(2);return(s,l)=>(b(),w("div",{class:"card table-widget",style:De(r.value)},[a.value?(b(),w("div",Pk,[f("div",Fk,R(o.value),1),s.subtitle?(b(),w("div",Hk,R(s.subtitle),1)):ne("",!0)])):ne("",!0),s.rows&&s.rows.length?(b(),it(Bk,{key:1,rows:s.rows,n2:n,targets:s.targets,groups:s.groups,"today-hours":s.todayHours},null,8,["rows","targets","groups","today-hours"])):(b(),w("div",Wk,"No data"))],4))}}),[["__scopeId","data-v-e75cc444"]])},Symbol.toStringTag,{value:"Module"})),Rk={key:0,class:"dayoff-card__header"},jk={key:0,class:"pill"},Uk={key:1,class:"dayoff-heatmap"},Vk=["title"],Kk={class:"dayoff-tile__label"},qk={class:"dayoff-tile__value"},Gk={class:"dayoff-tile__meta"},Jk={key:2,class:"hint"},Yk=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"DayOffTrendCard",props:{trend:{},unit:{},lookback:{},title:{},cardBg:{},toneLowColor:{},toneHighColor:{},showHeader:{type:Boolean},labelMode:{}},setup(e){const t=e,a=A(()=>t.unit==="mo"?"mo":"wk"),o=A(()=>t.unit==="mo"?"This month":"This week"),r=A(()=>{const j=(t.labelMode||"period").toString().toLowerCase();return j==="date"||j==="offset"?j:"period"}),n=A(()=>{const j=typeof t.lookback=="number"?t.lookback:null;if(j!=null)return Math.max(0,Math.min(12,Math.floor(j)));const S=(t.trend??[]).filter($=>Number(($==null?void 0:$.offset)??0)>0);return Math.max(0,Math.min(12,S.length))}),s=A(()=>{const j=Array.isArray(t.trend)?t.trend:[],S=new Map;j.forEach(W=>{const oe=Number((W==null?void 0:W.offset)??0)||0;S.set(oe,{offset:oe,label:(W==null?void 0:W.label)??"",from:(W==null?void 0:W.from)??"",to:(W==null?void 0:W.to)??"",totalDays:Number((W==null?void 0:W.totalDays)??(W==null?void 0:W.total_days)??0)||0,daysOff:Number((W==null?void 0:W.daysOff)??(W==null?void 0:W.days_off)??0)||0,daysWorked:Number((W==null?void 0:W.daysWorked)??(W==null?void 0:W.days_worked)??0)||0})});const $=a.value,x=o.value,I=[],J=S.get(0)??{offset:0,label:x,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};I.push(J);const O=n.value;for(let W=1;W<=O;W+=1){const oe=S.get(W)??{offset:W,label:`-${W} ${$}`,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};I.push(oe)}return I}),l=A(()=>s.value.map(j=>{const S=Math.max(0,Number(j.totalDays)||0),$=Math.max(0,Math.min(S,Number(j.daysOff)||0)),x=S>0?$/S:0;return{...j,label:T(j),share:x,tone:g(x)}})),i=A(()=>{const j=n.value;if(j<=0)return"";const S=t.unit==="mo"?"month":"week";return`Last ${j} ${j===1?S:`${S}s`}`}),c=A(()=>t.title||"Days off trend"),d=A(()=>({background:t.cardBg||void 0})),p=A(()=>t.showHeader!==!1),m=A(()=>{const j=P(t.toneLowColor)||"#dc2626",S=P(t.toneHighColor)||"#16a34a",$=N(j,S,.5);return{low:B(j),mid:B($),high:B(S)}});function h(j){const S=Math.max(0,Math.min(1,j));return`${Math.round(S*100)}% off`}function u(j){const S=m.value[j];return{"--tile-bg":S.background,"--tile-fg":S.color,background:S.background,color:S.color}}function g(j){return j>=.5?"high":j>=.25?"mid":"low"}function v(j){return j?It(j):null}function k(j,S){return!j||!S?"":Ga(j,S,{day:"2-digit",month:"2-digit"})}function C(j,S){return S||(j===0?o.value:`-${j} ${a.value}`)}function M(j){const S=v(j.from)||v(j.to);return S?a.value==="mo"?`MONTH ${S.getUTCMonth()+1}`:`WEEK ${Ia(S)}`:C(j.offset,j.label)}function T(j){const S=Number(j.offset??0)||0;return r.value==="offset"?S===0?"Current":`-${S}`:r.value==="date"?k(j.from,j.to)||C(S,j.label):M(j)}function P(j){if(!j||typeof j!="string")return null;const S=j.trim();return/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(S)?S:null}function N(j,S,$=.5){const x=y(j),I=y(S);if(!x||!I)return j;const J=z(Math.round(x.r+(I.r-x.r)*$),0,255),O=z(Math.round(x.g+(I.g-x.g)*$),0,255),W=z(Math.round(x.b+(I.b-x.b)*$),0,255);return`rgb(${J}, ${O}, ${W})`}function y(j){const S=j.replace("#","");if(S.length===3){const[$,x,I]=S.split("").map(J=>parseInt(J.repeat(2),16));return{r:$,g:x,b:I}}if(S.length===6){const $=parseInt(S.slice(0,2),16),x=parseInt(S.slice(2,4),16),I=parseInt(S.slice(4,6),16);return{r:$,g:x,b:I}}return null}function E(j){const S=y(j);return S?(.2126*S.r+.7152*S.g+.0722*S.b)/255:0}function B(j){const S=E(j)>.6?"#0f172a":"#fff";return{background:j,color:S}}function z(j,S,$){return Math.min($,Math.max(S,j))}return(j,S)=>(b(),w("div",{class:"card dayoff-card",style:De(d.value)},[p.value?(b(),w("div",Rk,[f("span",null,R(c.value),1),i.value?(b(),w("span",jk,R(i.value),1)):ne("",!0)])):ne("",!0),l.value.length?(b(),w("div",Uk,[(b(!0),w(ve,null,Ce(l.value,$=>(b(),w("div",{key:$.offset,class:Ee(["dayoff-tile",[`dayoff-tile--${$.tone}`,{"dayoff-tile--current":$.offset===0}]]),style:De(u($.tone)),title:`${$.label}  ${h($.share)}`},[f("div",Kk,R($.label),1),f("div",qk,R(h($.share)),1),f("div",Gk,R($.daysOff)+" off  "+R($.daysWorked)+" on ",1)],14,Vk))),128))])):(b(),w("div",Jk,"No day-off history for this range."))],4))}}),[["__scopeId","data-v-68e10b8f"]])},Symbol.toStringTag,{value:"Module"})),Zk={key:0,class:"deck-panel__header"},Xk={class:"deck-panel__heading"},Qk={class:"deck-panel__title"},e_={key:0,class:"deck-panel__subtitle"},t_={key:1,class:"deck-panel__subtitle"},a_={class:"deck-panel__actions"},o_={key:0,class:"deck-panel__count"},r_=["href"],n_=["disabled"],s_={key:1,class:"deck-panel__filters",role:"group","aria-label":"Deck card filters"},l_=["aria-pressed","disabled","draggable","onClick","onDragstart","onDragover","onDrop"],i_={key:0,class:"deck-filter-count"},c_={key:0,class:"deck-panel__loading"},d_={key:0,class:"deck-panel__error"},u_=["data-idx"],f_={key:0,class:"deck-card__row"},g_={key:0,class:"deck-card__time"},p_={key:1,class:"deck-card__time"},h_={class:"deck-card__title"},m_={class:"deck-card__meta"},v_={class:"deck-card__stack"},b_={key:2,class:"deck-card__labels"},y_={key:3,class:"deck-card__assignees"},w_={class:"deck-card__status-row"},k_={key:0,class:"deck-card__time"},__={key:1,class:"deck-card__time"},x_={class:"deck-card__title"},C_={class:"deck-card__meta"},S_={class:"deck-card__stack"},$_={key:0,class:"deck-card__labels"},T_={key:1,class:"deck-card__assignees"},M_=et(Le({__name:"DeckCardsPanel",props:{cards:{},loading:{type:Boolean},rangeLabel:{},lastFetchedAt:{},deckUrl:{},error:{},filter:{},canFilterMine:{type:Boolean},filtersEnabled:{type:Boolean},filterOptions:{},orderableValues:{},editable:{type:Boolean},allowMineOverride:{type:Boolean},autoScroll:{type:Boolean},intervalSeconds:{},showCount:{type:Boolean},compact:{type:Boolean},title:{},cardBg:{},showHeader:{type:Boolean}},emits:["refresh","update:filter","reorder:filters"],setup(e,{emit:t}){const a=e,o=t,r=A(()=>a.filter??"all"),n=A(()=>a.title||"Deck cards"),s=A(()=>({background:a.cardBg||void 0})),l=A(()=>a.showHeader!==!1),i=A(()=>a.filtersEnabled!==!1&&d.value.length>1),c=A(()=>i.value&&a.canFilterMine!==!1&&a.allowMineOverride!==!1),d=A(()=>a.filterOptions&&a.filterOptions.length?a.filterOptions.map(S=>({...S,mine:!!S.mine})):[{value:"all",label:"All cards",mine:!1},{value:"open_all",label:"Open  All",mine:!1},{value:"open_mine",label:"Open  Mine",mine:!0},{value:"done_all",label:"Done  All",mine:!1},{value:"done_mine",label:"Done  Mine",mine:!0},{value:"archived_all",label:"Archived  All",mine:!1},{value:"archived_mine",label:"Archived  Mine",mine:!0},{value:"due_all",label:"Due  All",mine:!1},{value:"due_mine",label:"Due  Mine",mine:!0},{value:"due_today_all",label:"Due today  All",mine:!1},{value:"due_today_mine",label:"Due today  Mine",mine:!0}]),p=A(()=>a.orderableValues&&a.orderableValues.length?a.orderableValues:d.value.map(S=>S.value).filter(S=>!String(S).startsWith("custom_"))),m=le(null),h=le(null),u=le(null),g=le(null),v=le(0),k=A(()=>{const S=Math.max(3,Math.min(10,Number(a.intervalSeconds??5)))*1e3;return Number.isFinite(S)?S:5e3});$e(()=>a.autoScroll,()=>{N(),y()}),$e(()=>a.cards,()=>{v.value=0,N(),y()},{deep:!0}),Dt(()=>{y()}),Tt(()=>{N()});function C(S,$){!a.editable||!p.value.includes(S)||(m.value=S,$.dataTransfer&&($.dataTransfer.effectAllowed="move",$.dataTransfer.setData("text/plain",String(S))))}function M(S){!a.editable||!m.value||p.value.includes(S)}function T(S){if(!a.editable||!m.value||!p.value.includes(S))return;const $=p.value.slice(),x=$.indexOf(m.value),I=$.indexOf(S);if(x<0||I<0||x===I){m.value=null;return}if($.splice(x,1),$.splice(I,0,m.value),m.value=null,$.length){const J=d.value.map(W=>W.value).filter(W=>String(W).startsWith("custom_")),O=[...$,...J];a.orderableValues&&a.orderableValues.length?o("reorder:filters",$):o("reorder:filters",O)}}function P(){m.value=null}function N(){g.value&&(clearInterval(g.value),g.value=null)}function y(){!a.autoScroll||(a.cards||[]).length<=1||(N(),g.value=window.setInterval(()=>{const S=(a.cards||[]).length;v.value=(v.value+1)%S,E(v.value)},k.value))}function E(S){if(!h.value||!u.value)return;const $=u.value.querySelector(`[data-idx="${S}"]`);if(!$)return;const x=$.offsetTop-u.value.offsetTop;h.value.scrollTo({top:x,behavior:"smooth"})}const B=A(()=>{if(!a.lastFetchedAt)return"";const S=cs(a.lastFetchedAt);return S?Gr(S,{weekday:"short",month:"short",day:"numeric"}):""});function z(S){return Gr(S,{weekday:"short",month:"short",day:"numeric"})||S}function j(S){return S==="done"?"Done":S==="archived"?"Archived":"Active"}return(S,$)=>(b(),w("div",{class:Ee(["deck-panel",{"deck-panel--compact":a.compact}]),style:De(s.value)},[l.value?(b(),w("div",Zk,[f("div",Xk,[f("div",Qk,R(n.value),1),B.value?(b(),w("div",e_," Updated "+R(B.value),1)):(b(),w("div",t_," Showing "+R(S.rangeLabel.toLowerCase())+" selection ",1))]),f("div",a_,[S.showCount?(b(),w("div",o_,R(S.cards.length)+" cards",1)):ne("",!0),S.deckUrl?(b(),w("a",{key:1,class:"deck-panel__link",href:S.deckUrl,target:"_blank",rel:"noopener"}," Open Deck  ",8,r_)):ne("",!0),f("button",{type:"button",class:"deck-panel__refresh",onClick:$[0]||($[0]=x=>S.$emit("refresh")),disabled:S.loading}," Refresh ",8,n_)])])):ne("",!0),i.value?(b(),w("div",s_,[(b(!0),w(ve,null,Ce(d.value,x=>(b(),w("button",{key:x.value,type:"button",class:Ee(["deck-filter-btn",{active:r.value===x.value,"is-draggable":a.editable&&p.value.includes(x.value)}]),"aria-pressed":r.value===x.value,disabled:x.mine&&!c.value,draggable:a.editable&&p.value.includes(x.value),onClick:I=>S.$emit("update:filter",x.value),onDragstart:I=>C(x.value,I),onDragover:ut(I=>M(x.value),["prevent"]),onDrop:ut(I=>T(x.value),["prevent"]),onDragend:P},[f("span",null,R(x.label),1),typeof x.count=="number"?(b(),w("span",i_,R(x.count),1)):ne("",!0)],42,l_))),128))])):ne("",!0),f("div",{class:"deck-panel__body",ref_key:"bodyEl",ref:h},[S.loading?(b(),w("div",c_,[Se(D(gg),{size:20}),$[1]||($[1]=f("span",null,"Loading Deck cards",-1))])):(b(),w(ve,{key:1},[S.error?(b(),w("div",d_,R(S.error),1)):S.cards.length?(b(),w("ul",{key:2,class:"deck-card-list",ref_key:"listEl",ref:u},[(b(!0),w(ve,null,Ce(S.cards,(x,I)=>(b(),w("li",{key:x.id,class:"deck-card","data-idx":I},[a.compact?(b(),w("div",f_,[f("span",{class:Ee(["deck-card__status",x.status])},R(j(x.status)),3),x.match==="due"&&x.due?(b(),w("span",g_," Due "+R(z(x.due)),1)):x.done?(b(),w("span",p_," Completed "+R(z(x.done)),1)):ne("",!0),f("span",h_,R(x.title),1),f("span",m_,[f("span",{class:"deck-card__board",style:De({borderColor:x.boardColor||"var(--color-primary)"})},R(x.boardTitle),5),f("span",v_,R(x.stackTitle),1)]),x.labels.length?(b(),w("span",b_,[(b(!0),w(ve,null,Ce(x.labels,J=>(b(),w("span",{key:`deck-label-${x.id}-${J.id??J.title}`,class:"deck-card__label",style:De({background:J.color||"var(--color-background-darker)"})},R(J.title),5))),128))])):ne("",!0),x.assignees.length?(b(),w("span",y_,[$[2]||($[2]=f("span",{class:"deck-card__assignees-label"},"Assigned:",-1)),(b(!0),w(ve,null,Ce(x.assignees,J=>(b(),w("span",{key:`deck-assignee-${x.id}-${J.uid??J.id}`,class:"deck-card__assignee"},R(J.displayName||J.uid),1))),128))])):ne("",!0)])):(b(),w(ve,{key:1},[f("div",w_,[f("span",{class:Ee(["deck-card__status",x.status])},R(j(x.status)),3),x.match==="due"&&x.due?(b(),w("span",k_," Due "+R(z(x.due)),1)):x.done?(b(),w("span",__," Completed "+R(z(x.done)),1)):ne("",!0)]),f("div",x_,R(x.title),1),f("div",C_,[f("span",{class:"deck-card__board",style:De({borderColor:x.boardColor||"var(--color-primary)"})},R(x.boardTitle),5),f("span",S_,R(x.stackTitle),1)]),x.labels.length?(b(),w("div",$_,[(b(!0),w(ve,null,Ce(x.labels,J=>(b(),w("span",{key:`deck-label-${x.id}-${J.id??J.title}`,class:"deck-card__label",style:De({background:J.color||"var(--color-background-darker)"})},R(J.title),5))),128))])):ne("",!0),x.assignees.length?(b(),w("div",T_,[$[3]||($[3]=f("span",{class:"deck-card__assignees-label"},"Assigned:",-1)),(b(!0),w(ve,null,Ce(x.assignees,J=>(b(),w("span",{key:`deck-assignee-${x.id}-${J.uid??J.id}`,class:"deck-card__assignee"},R(J.displayName||J.uid),1))),128))])):ne("",!0)],64))],8,u_))),128))],512)):(b(),it(D(fg),{key:1,name:"No Deck cards",description:`No cards matched this ${S.rangeLabel.toLowerCase()}. Confirm Deck due dates or rerun seeding.`},null,8,["description"]))],64))],512)],6))}}),[["__scopeId","data-v-3c27c19f"]]),A_=Object.freeze(Object.defineProperty({__proto__:null,default:Le({__name:"DeckCardsWidget",props:{cards:{},rangeLabel:{},from:{},to:{},uid:{},deckUrl:{},lastFetchedAt:{},loading:{type:Boolean},error:{},boardIds:{},filters:{},defaultFilter:{},allowMine:{type:Boolean},mineMode:{},includeArchived:{type:Boolean},includeCompleted:{type:Boolean},autoScroll:{type:Boolean},intervalSeconds:{},showCount:{type:Boolean},showHeader:{type:Boolean},title:{},cardBg:{},customFilters:{},autoTagsEnabled:{type:Boolean,default:!0},autoTagSelection:{},compactList:{type:Boolean},editable:{type:Boolean},onUpdateFilters:{}},emits:["refresh"],setup(e){const t=e,a=["all","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],o=A(()=>{const O=(t.boardIds||[]).map(W=>Number(W)).filter(W=>Number.isInteger(W));return new Set(O)}),r=A(()=>(t.cards||[]).filter(W=>o.value.size?W.boardId!=null&&o.value.has(Number(W.boardId)):!0)),n=A(()=>{const O=t.includeArchived!==!1;return r.value.filter(W=>(O||W.status!=="archived")&&(t.includeCompleted!==!1||W.status!=="done"))}),s=A(()=>t.autoTagsEnabled===!1?[]:Ic(n.value)),l=A(()=>Array.isArray(t.autoTagSelection)?new Set(t.autoTagSelection.map(O=>String(O))):null),i=A(()=>{if(t.autoTagsEnabled===!1)return[];const O=s.value;if(!O.length)return[];const W=l.value;return W?O.filter(oe=>W.has(oe.value)):O}),c=A(()=>(t.customFilters||[]).map(O=>`custom_${O.id}`)),d=A(()=>{const O=t.filters&&t.filters.length?t.filters:a,W=i.value.map(oe=>oe.value);return[...O,...c.value,...W]}),p=A(()=>{const O=t.includeArchived!==!1,W=n.value,oe=new Map;return d.value.forEach(V=>{oe.set(V,I(V,W,O).length)}),oe}),m=le(null),h=A(()=>m.value?m.value:(t.filters&&t.filters.length?t.filters:a).filter(Boolean)),u=A(()=>{const O=h.value,W={all:"All cards",mine:"Mine (any status)",open_all:"Open  All",open_mine:"Open  Mine",done_all:"Done  All",done_mine:"Done  Mine",archived_all:"Archived  All",archived_mine:"Archived  Mine",due_all:"Due  All",due_mine:"Due  Mine",due_today_all:"Due today  All",due_today_mine:"Due today  Mine",created_today_all:"Created today  All",created_today_mine:"Created today  Mine",created_range_all:"Created this range  All",created_range_mine:"Created this range  Mine"},oe=p.value,V=O.map(L=>({value:L,label:W[L]||L,mine:L.endsWith("_mine")||L==="mine",count:oe.get(L)??0})),q=(t.customFilters||[]).filter(L=>L&&L.id&&L.label).map(L=>({value:`custom_${L.id}`,label:L.label,mine:!1,count:oe.get(`custom_${L.id}`)??0})),Y=i.value.map(L=>({value:L.value,label:L.label,mine:!1,count:oe.get(L.value)??L.count??0}));return[...V,...q,...Y]}),g=le(M());$e(()=>t.defaultFilter,()=>{g.value=M()}),$e(()=>u.value.map(O=>O.value).join("|"),()=>{const O=u.value;O.length&&(O.some(W=>W.value===g.value)||(g.value=O[0].value))});const v=A(()=>u.value.length>1),k=A(()=>t.allowMine!==!1&&!!(t.uid||"").trim()),C=A(()=>{const O=t.includeArchived!==!1||g.value.startsWith("archived"),W=r.value.filter(oe=>(O||oe.status!=="archived")&&(t.includeCompleted!==!1||oe.status!=="done"));return I(g.value,W,O)});function M(){const O=u.value.map(oe=>oe.value),W=t.defaultFilter||O[0]||"all";return O.includes(W)?W:O[0]||"all"}function T(O){g.value=O}function P(O){var W;O.length&&(m.value=[...O],(W=t.onUpdateFilters)==null||W.call(t,O),O.includes(g.value)||(g.value=O[0]))}function N(O,W){const oe=O.trim().toLowerCase();return V=>{if(!oe)return!1;const q=(V.assignees||[]).some(U=>typeof U.uid=="string"&&U.uid.toLowerCase()===oe),Y=typeof V.createdBy=="string"&&V.createdBy.trim().toLowerCase()===oe,L=typeof V.doneBy=="string"&&V.doneBy.trim().toLowerCase()===oe;return W==="creator"?Y||L:W==="assignee"?q||L:q||Y||L}}function y(O,W,oe,V){return W==="open"?O.status==="active":W==="archived"?O.status==="archived":W==="done"?V?O.status==="done"?!0:oe&&O.status==="archived"&&V:!1:W==="due"?O.match==="due":!1}const E=/^\d{4}-\d{2}-\d{2}$/;function B(O){if(!O)return null;const W=O.trim();if(E.test(W))return W;const oe=cs(W);return oe?Wt(oe):null}function z(O){return O==null?null:Wt(new Date(O))}function j(O){const W=z(O.createdTs);return W?W===Wt(new Date):!1}function S(O,W,oe){const V=z(O.createdTs),q=B(W||null),Y=B(oe||null);return!V||!q||!Y?!1:V>=q&&V<=Y}function $(O,W,oe){const V=z(O.dueTs??null),q=B(W||null),Y=B(oe||null);return!V||!q||!Y?!1:V>=q&&V<=Y}function x(O){const W=z(O.dueTs??null);return W?W===Wt(new Date):!1}function I(O,W,oe){const V=N(t.uid||"",t.mineMode||"assignee"),q=oe,Y=t.includeCompleted!==!1;if(O==="all")return W;if(O==="mine")return W.filter(L=>V(L));if(O.startsWith("created_today"))return W.filter(L=>(O.endsWith("_mine")?V(L):!0)&&j(L));if(O.startsWith("created_range"))return W.filter(L=>(O.endsWith("_mine")?V(L):!0)&&S(L,t.from,t.to));if(O.startsWith("due_today"))return W.filter(L=>(O.endsWith("_mine")?V(L):!0)&&x(L));if(O.startsWith("due_"))return W.filter(L=>(O.endsWith("_mine")?V(L):!0)&&$(L,t.from,t.to));if(O.startsWith("custom_")){const L=O.slice(7),U=(t.customFilters||[]).find(ee=>ee.id===L);return U?W.filter(ee=>J(ee,U,V)):[]}if(O.startsWith("tag_"))return W.filter(L=>Uv(L,O));if(O.includes("_")){const[L,U]=O.split("_");return W.filter(ee=>{const se=y(ee,L,q,Y),K=U==="all"?!0:V(ee);return se&&K})}return W}function J(O,W,oe){const V=(W.labelIds||[]).map(Z=>Z.trim().toLowerCase()).filter(Boolean),q=(W.labels||[]).map(Z=>Z.trim().toLowerCase()).filter(Boolean),Y=(W.assignees||[]).map(Z=>Z.trim().toLowerCase()).filter(Boolean),L=V.length>0,U=q.length>0,ee=Y.length>0;if(!L&&!U&&!ee)return!1;let se=!0;if(L||U){const Z=(O.labels||[]).map(ge=>ge.id!=null?String(ge.id).trim().toLowerCase():"").filter(Boolean),te=(O.labels||[]).map(ge=>String(ge.title||"").trim().toLowerCase()).filter(Boolean);se=(!L||V.some(ge=>Z.includes(ge)))&&(!U||q.some(ge=>te.includes(ge)))}let K=!0;if(ee){const Z=(O.assignees||[]).map(te=>String(te.uid||"").trim().toLowerCase()).filter(Boolean);K=Y.some(te=>Z.includes(te)),!K&&Y.includes("me")&&(K=oe(O)),!K&&Y.includes("unassigned")&&(K=Z.length===0)}return se&&K}return(O,W)=>(b(),it(M_,{cards:C.value,loading:O.loading,"range-label":O.rangeLabel,"last-fetched-at":O.lastFetchedAt,"deck-url":O.deckUrl,error:O.error,filter:g.value,"filters-enabled":v.value,"can-filter-mine":k.value,"allow-mine-override":k.value,"filter-options":u.value,"auto-scroll":t.autoScroll!==!1,"interval-seconds":t.intervalSeconds,"show-count":t.showCount!==!1,compact:t.compactList===!0,title:t.title,"card-bg":t.cardBg,"show-header":t.showHeader!==!1,editable:t.editable===!0,"orderable-values":h.value,onRefresh:W[0]||(W[0]=oe=>O.$emit("refresh")),"onUpdate:filter":T,"onReorder:filters":P},null,8,["cards","loading","range-label","last-fetched-at","deck-url","error","filter","filters-enabled","can-filter-mine","allow-mine-override","filter-options","auto-scroll","interval-seconds","show-count","compact","title","card-bg","show-header","editable","orderable-values"]))}})},Symbol.toStringTag,{value:"Module"})),D_={class:"note-header"},E_={key:0,class:"title"},L_=["disabled"],N_={class:"field"},I_={class:"field-head"},O_={class:"label"},B_=["aria-label"],P_=["value"],F_=["value"],H_={class:"field"},W_={class:"label"},z_=["value","disabled"],R_=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"NoteEditorWidget",props:{previous:{},history:{},modelValue:{},prevLabel:{},currLabel:{},saving:{type:Boolean},title:{},cardBg:{},showHeader:{type:Boolean}},emits:["update:modelValue","save"],setup(e,{emit:t}){const a=e,o=t,r=A(()=>a.title||"Notes"),n=A(()=>a.showHeader!==!1),s=a.prevLabel||"Previous",l=a.currLabel||"Current",i={background:a.cardBg||void 0},c=A(()=>(a.history||[]).filter(g=>g&&g.id&&g.label)),d=le("");$e(()=>c.value,g=>{var v;d.value=((v=g[0])==null?void 0:v.id)||""},{immediate:!0});const p=A(()=>c.value.find(g=>g.id===d.value)||null),m=A(()=>{var g;return((g=p.value)==null?void 0:g.content)||a.previous||""});function h(g){o("update:modelValue",g.target.value)}function u(){o("save")}return(g,v)=>(b(),w("div",{class:"note-card",style:i},[f("div",D_,[n.value?(b(),w("div",E_,R(r.value),1)):ne("",!0),f("button",{class:"btn",type:"button",disabled:g.saving,onClick:u},"Save",8,L_)]),f("div",N_,[f("div",I_,[f("span",O_,R(D(s)),1),c.value.length?io((b(),w("select",{key:0,"onUpdate:modelValue":v[0]||(v[0]=k=>d.value=k),class:"note-select","aria-label":`Select ${D(s)}`},[(b(!0),w(ve,null,Ce(c.value,k=>(b(),w("option",{key:k.id,value:k.id},R(k.label),9,P_))),128))],8,B_)),[[tc,d.value]]):ne("",!0)]),f("textarea",{class:"note note--compact",value:m.value,readonly:""},null,8,F_)]),f("label",H_,[f("span",W_,R(D(l)),1),f("textarea",{class:"note",value:g.modelValue,disabled:g.saving,onInput:h},null,40,z_)])]))}}),[["__scopeId","data-v-5e293970"]])},Symbol.toStringTag,{value:"Module"})),j_={key:0},U_={key:1,class:"body"},V_={key:2,class:"body empty"},K_=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"NoteSnippetWidget",props:{notesCurr:{},notesPrev:{},title:{},cardBg:{},showHeader:{type:Boolean}},setup(e){const t=e,a=A(()=>{const s=(t.notesCurr||"").trim();return s||(t.notesPrev||"").trim()||""}),o=A(()=>t.title||"Note"),r=A(()=>({background:t.cardBg||void 0})),n=A(()=>t.showHeader!==!1);return(s,l)=>(b(),w("div",{class:"text-card",style:De(r.value)},[n.value?(b(),w("h3",j_,R(o.value),1)):ne("",!0),a.value?(b(),w("p",U_,R(a.value),1)):(b(),w("p",V_,""))],4))}}),[["__scopeId","data-v-01eb6d28"]])},Symbol.toStringTag,{value:"Module"})),q_={key:0,class:"targets-header"},G_={key:0,class:"hint"},J_={class:"targets-main"},Y_={class:"line total-line"},Z_={class:"value"},X_={key:0,class:"line"},Q_={key:1,class:"line"},ex={key:2,class:"line forecast"},tx={class:"hint"},ax={key:1,class:"targets-badges"},ox={key:2,class:"targets-categories"},rx={class:"cat-top"},nx={class:"cat-label"},sx={class:"name"},lx={class:"cat-meta"},ix={class:"percent"},cx={class:"cat-progress"},dx={class:"bar"},ux={class:"today-label"},fx={class:"cat-metrics"},gx={class:"hint"},px={key:1,class:"hint"},hx={key:0,class:"cat-footer"},mx={class:"hint"},vx=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"TimeTargetsCard",props:{summary:{},config:{},groups:{},showPace:{type:Boolean,default:!0},showForecast:{type:Boolean,default:!0},showHeader:{type:Boolean},title:{default:"Targets"},cardBg:{default:null}},setup(e){const t=e,a=A(()=>{var u;return((u=t.summary)==null?void 0:u.total)??d("total","Total")}),o=A(()=>t.showHeader!==!1),r=A(()=>{var g;return Array.isArray(t.groups)&&t.groups.length?t.groups.map(v=>({id:v.id,label:v.label,summary:v.summary??d(v.id,v.label),color:v.color,rows:v.rows})):(((g=t.summary)==null?void 0:g.categories)??[]).map(v=>({id:v.id,label:v.label,summary:v,color:void 0,rows:[]}))}),n=A(()=>({background:t.cardBg||void 0})),s=A(()=>r.value.map(u=>{const g=u.summary??d(u.id,u.label),v=Number(u.todayHours??0),k=g.targetHours,C=Math.max(0,g.actualHours-k),M=Math.min(C,v),T=k>0?v/k*100:0,P=p(g.percent,0,200);return{id:u.id,label:u.label||g.label,actualHours:g.actualHours,targetHours:k,percent:g.percent,deltaHours:g.deltaHours,needPerDay:g.needPerDay,daysLeft:g.daysLeft,calendarPercent:g.calendarPercent,gap:g.gap,status:g.status,statusLabel:g.statusLabel,color:u.color,calendarCount:Array.isArray(u.rows)?u.rows.length:0,progress:P,todayHours:v,overToday:M,todayWidth:k>0?p(T,2,200):0,todayRight:Math.max(0,100-P),chipLeft:Math.min(100,P),chipText:M>0?`Today ${l(v)} (+${l(M)})`:`Today ${l(v)}`,todayColor:u.color?h(u.color,.65):"var(--brand)",todayBorder:u.color?h(u.color,.35,!0):"var(--brand)",calendarLabel:Array.isArray(u.rows)&&u.rows.length===1?"calendar":"calendars"}}).filter(u=>u.targetHours>0||u.actualHours>0||u.calendarCount>0));function l(u){if(!isFinite(u))return"0";const g=Math.round(u*10)/10;return Math.abs(g-Math.round(g))<.05?String(Math.round(g)):g.toFixed(1)}function i(u){return!isFinite(u)||Math.abs(u)<.005?"0.0":(u>=0?"+":"")+l(Math.abs(u))}function c(u){switch(u){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function d(u,g){return{id:u,label:g,actualHours:0,targetHours:0,percent:0,deltaHours:0,remainingHours:0,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"}}function p(u,g,v){return!isFinite(u)||u<g?g:u>v?v:u}function m(u){return u==="momentum"?"Momentum":"Linear"}function h(u,g=.5,v=!1){const k=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(u||"");if(!k)return u;const C=parseInt(k[1],16),M=parseInt(k[2],16),T=parseInt(k[3],16),P=Math.max(0,Math.min(1,g));return v?`rgb(${Math.round(C*(1-P))},${Math.round(M*(1-P))},${Math.round(T*(1-P))})`:`rgb(${Math.round(C+(255-C)*P)},${Math.round(M+(255-M)*P)},${Math.round(T+(255-T)*P)})`}return(u,g)=>(b(),w("div",{class:"card targets-card",style:De(n.value)},[o.value?(b(),w("div",q_,[f("strong",null,R(u.title||"Targets"),1),a.value.targetHours>0?(b(),w("span",G_,R(a.value.percent.toFixed(0))+"%",1)):ne("",!0)])):ne("",!0),f("div",J_,[f("div",Y_,[f("span",Z_,[f("strong",null,R(l(a.value.actualHours)),1),Oe(" / "+R(l(a.value.targetHours))+" h",1)]),u.config.ui.showTotalDelta&&a.value.targetHours>0?(b(),w("span",{key:0,class:Ee(["delta",a.value.deltaHours>=0?"pos":"neg"])},"  "+R(i(a.value.deltaHours))+"h ",3)):ne("",!0)]),u.config.ui.showNeedPerDay&&a.value.targetHours>0?(b(),w("div",X_," Days left "+R(a.value.daysLeft)+"  Need "+R(l(a.value.needPerDay))+" h/day ",1)):ne("",!0),u.showPace&&a.value.targetHours>0?(b(),w("div",Q_,[Oe(" Pace: "+R(a.value.percent.toFixed(0))+"% vs "+R(a.value.calendarPercent.toFixed(0))+"%  ",1),f("span",{class:Ee(["status-label",c(a.value.status)])},R(a.value.statusLabel),3)])):ne("",!0),u.showForecast?(b(),w("div",ex,[Oe(" Forecast: "+R(u.summary.forecast.text)+" ",1),f("span",tx," Linear "+R(l(u.summary.forecast.linear))+"h  Momentum "+R(l(u.summary.forecast.momentum))+"h  Primary: "+R(m(u.summary.forecast.primaryMethod)),1)])):ne("",!0)]),u.config.ui.badges&&a.value.targetHours>0?(b(),w("div",ax,[f("span",{class:Ee(["badge",c(a.value.status)])},R(a.value.statusLabel),3)])):ne("",!0),u.config.ui.showCategoryBlocks&&s.value.length?(b(),w("div",ox,[(b(!0),w(ve,null,Ce(s.value,v=>(b(),w("div",{class:"category",key:v.id},[f("div",rx,[f("div",nx,[f("span",{class:"dot",style:De({background:v.color||"var(--brand)"})},null,4),f("span",sx,R(v.label),1)]),f("div",lx,[f("span",ix,R(v.percent.toFixed(0))+"%",1),u.config.ui.badges&&v.targetHours>0?(b(),w("span",{key:0,class:Ee(["badge",c(v.status)])},R(v.statusLabel),3)):ne("",!0)])]),f("div",cx,[f("div",dx,[f("div",{class:"fill",style:De({width:v.progress+"%",background:v.color||"var(--brand)"})},null,4),v.todayWidth>0?(b(),w("div",{key:0,class:"today-overlay",style:De({width:v.todayWidth+"%",right:v.todayRight+"%",background:v.todayColor,borderColor:v.todayBorder})},null,4)):ne("",!0),v.todayWidth>0?(b(),w("div",{key:1,class:"today-chip",style:De({left:v.chipLeft+"%",background:v.todayColor,borderColor:v.todayBorder})},[f("span",ux,R(v.chipText),1)],4)):ne("",!0)])]),f("div",fx,[f("strong",null,R(l(v.actualHours))+"h",1),f("span",gx,"/ "+R(l(v.targetHours))+"h",1),v.targetHours>0?(b(),w("span",{key:0,class:Ee(["delta",v.deltaHours>=0?"pos":"neg"])},"  "+R(i(v.deltaHours))+"h ",3)):ne("",!0),u.config.ui.showNeedPerDay&&v.targetHours>0?(b(),w("span",px," Need "+R(l(v.needPerDay))+"h/day  "+R(v.daysLeft)+" days left ",1)):ne("",!0)]),v.calendarCount>0?(b(),w("div",hx,[f("span",mx,R(v.calendarCount)+" "+R(v.calendarLabel),1)])):ne("",!0)]))),128))])):ne("",!0)],4))}}),[["__scopeId","data-v-9ee23cb0"]])},Symbol.toStringTag,{value:"Module"})),bx={key:0,class:"time-summary-firstline"},yx={key:1,class:"today-highlight"},wx={class:"today-value"},kx={key:2,class:"today-cats"},_x={class:"name"},xx={class:"value"},Cx={key:3,class:"time-summary-inline"},Sx={key:4,class:"time-summary-inline"},$x={key:5,class:"time-summary-inline"},Tx={key:6,class:"time-summary-row"},Mx={key:7,class:"time-summary-row"},Ax={key:0,class:"share"},Dx={key:8,class:"time-summary-row calendars"},Ex={class:"label"},Lx={class:"text"},Nx={key:9,class:"time-summary-row top-category"},Ix={class:"text"},Ox={key:10,class:"time-summary-activity"},Bx={class:"time-summary-activity__line"},Px={key:0,class:"time-summary-activity__line"},Fx={key:0,class:"time-summary-activity__delta"},Hx={key:1,class:"time-summary-activity__delta"},Wx={key:1,class:"time-summary-activity__line"},zx={key:2,class:"time-summary-activity__line"},Rx={key:3,class:"time-summary-activity__line"},jx={key:11,class:"time-summary-history"},Ux={class:"time-summary-history__header"},Vx={class:"time-summary-history__mode"},Kx={key:0,class:"time-summary-history__pills"},qx={class:"history-pill__title"},Gx={class:"history-pill__metrics"},Jx={class:"history-pill__metric-label"},Yx={class:"history-pill__metric-value"},Zx={key:1,class:"time-summary-history__list"},Xx={class:"history-entry__header"},Qx={class:"history-entry__title"},eC={key:0,class:"history-entry__range"},tC={class:"history-entry__metrics"},aC={class:"history-entry__metric-label"},oC={class:"history-entry__metric-value"},rC={key:12,class:"time-summary-delta"},nC=Object.freeze(Object.defineProperty({__proto__:null,default:et(Le({__name:"TimeSummaryCard",props:{summary:{},activitySummary:{},mode:{},config:{},todayGroups:{},title:{},cardBg:{},rangeMode:{},rangeStart:{},rangeEnd:{},offset:{},showHeader:{type:Boolean},history:{},showHistory:{type:Boolean},historyView:{},showActivityDetails:{type:Boolean}},setup(e){const t={showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},a=e,o=A(()=>Object.assign({},t,a.config??{})),r=A(()=>a.mode==="active"?"active days":"all days"),n=A(()=>(a.todayGroups||[]).filter(_=>Number(_.todayHours)>0).map(_=>({..._,todayHours:Number(_.todayHours)||0,color:_.color||"var(--brand)"}))),s=A(()=>{var H;if(n.value.length)return n.value.reduce((X,Q)=>X+Q.todayHours,0);const _=(H=a.summary)==null?void 0:H.todayHours;return typeof _=="number"&&Number.isFinite(_)?_:null}),l=A(()=>a.title||"Time Summary"),i=A(()=>{var X;const _=l.value,H=((X=a.summary)==null?void 0:X.rangeLabel)||"";return H?`${_}  ${H}`:_}),c=A(()=>({background:a.cardBg||void 0})),d=A(()=>a.showHeader!==!1),p=A(()=>a.showHistory!==!1),m=A(()=>a.historyView==="pills"?"pills":"list"),h=A(()=>m.value==="pills"?"Compact":"Detailed"),u=A(()=>a.showActivityDetails!==!1),g=A(()=>Number.isFinite(a.summary.offset)?a.summary.offset:a.offset??0),v=A(()=>g.value-1),k=A(()=>v.value-g.value),C=A(()=>ee(v.value)),M=A(()=>U(k.value)),T=A(()=>g.value===0?"":` (offset ${ee(g.value)})`),P=A(()=>{if(!o.value.showWeekendShare)return"";const _=a.summary.weekendShare;return _==null?"":`${W(_)}%`}),N=A(()=>{if(!o.value.showTopCategory)return null;const _=a.summary.topCategory;if(!_)return null;const H=oe(_.actualHours),X=Number(_.percent??0).toFixed(0),Q=_.targetHours>0?` (${X}% of ${oe(_.targetHours)} h)`:"";return{text:`${_.label}  ${H} h${Q}`,badge:_.statusLabel||"",badgeClass:q(_.status)}}),y=A(()=>{if(!o.value.showBusiest)return"";const _=a.summary.busiest;if(!_||!_.date)return"";const H=Number(_.hours??0);return`Busiest ${_.date}  ${oe(H)} h`}),E=A(()=>{const _=[];return o.value.showAverage&&(_.push(`${oe(a.summary.avgDay)} h/day (${r.value})`),_.push(`${oe(a.summary.avgEvent)} h/event`)),o.value.showMedian&&_.push(`${oe(a.summary.medianDay)} h median/day`),_.filter(Boolean).join("  ")}),B=A(()=>a.activitySummary??null),z=A(()=>{var _;return((_=B.value)==null?void 0:_.lastDayOff)||""}),j=A(()=>{var X,Q;const _=V(((X=B.value)==null?void 0:X.typicalStart)??null),H=V(((Q=B.value)==null?void 0:Q.typicalEnd)??null);return _&&H?`${_}${H}`:_?`${_}`:H?`${H}`:""}),S=A(()=>{var X,Q;const _=V(((X=B.value)==null?void 0:X.earliestStart)??null),H=V(((Q=B.value)==null?void 0:Q.latestEnd)??null);return!_&&!H?"":`${_||""} / ${H||""}`}),$=A(()=>{var H;const _=(H=B.value)==null?void 0:H.longestSession;return _==null?"":`${Number(_).toFixed(1)} h`}),x=A(()=>{var _;return(_=B.value)!=null&&_.delta?F(B.value.weekendShare,B.value.delta.weekendShare):""}),I=A(()=>{var _;return(_=B.value)!=null&&_.delta?F(B.value.eveningShare,B.value.delta.eveningShare):""}),J=A(()=>p.value?(Array.isArray(a.history)?a.history:[]).map(H=>{var Q,ie,ue,he,fe,de,ye,me,we,xe,Ne,Ae;const X=[];if(o.value.showTotal&&X.push({key:"total",label:"Total",value:`${oe(H.totalHours)} h`}),o.value.showAverage&&(X.push({key:"avg-day",label:`Avg/day (${r.value})`,value:`${oe(H.avgDay)} h`}),X.push({key:"avg-event",label:"Avg/event",value:`${oe(H.avgEvent)} h`})),o.value.showMedian&&X.push({key:"median",label:"Median/day",value:`${oe(H.medianDay)} h`}),o.value.showBusiest&&X.push({key:"busiest",label:"Busiest",value:K(H.busiest)}),o.value.showWorkday&&X.push({key:"workday",label:"Workdays",value:`${oe(H.workdayAvg)} h avg  ${oe(H.workdayMedian)} h median`}),o.value.showWeekend){const Me=o.value.showWeekendShare&&H.weekendShare!=null?` (${W(H.weekendShare)}%)`:"";X.push({key:"weekend",label:"Weekend",value:`${oe(H.weekendAvg)} h avg  ${oe(H.weekendMedian)} h median${Me}`})}return o.value.showCalendarSummary&&X.push({key:"calendars",label:`${H.activeCalendars} calendars`,value:H.calendarSummary||""}),o.value.showTopCategory&&X.push({key:"top-category",label:"Top category",value:Z(H.topCategory)}),o.value.showBalance&&X.push({key:"balance",label:"Balance index",value:H.balanceIndex==null?"":H.balanceIndex.toFixed(2)}),X.push({key:"events",label:"Events",value:String(((Q=H.activity)==null?void 0:Q.events)??0)}),X.push({key:"active-days",label:"Active days",value:String(((ie=H.activity)==null?void 0:ie.activeDays)??0)}),X.push({key:"typical",label:"Typical",value:te((ue=H.activity)==null?void 0:ue.typicalStart,(he=H.activity)==null?void 0:he.typicalEnd)}),u.value&&(X.push({key:"weekend-share",label:"Weekend share",value:((fe=H.activity)==null?void 0:fe.weekendShare)==null?"":`${W(H.activity.weekendShare)}%`}),X.push({key:"evening-share",label:"Evening share",value:((de=H.activity)==null?void 0:de.eveningShare)==null?"":`${W(H.activity.eveningShare)}%`}),X.push({key:"earliest-latest",label:"Earliest/Late",value:ge((ye=H.activity)==null?void 0:ye.earliestStart,(me=H.activity)==null?void 0:me.latestEnd)}),X.push({key:"overlaps",label:"Overlaps",value:String(((we=H.activity)==null?void 0:we.overlapEvents)??0)}),X.push({key:"longest",label:"Longest",value:pe((xe=H.activity)==null?void 0:xe.longestSession)}),X.push({key:"last-day-off",label:"Last day off",value:((Ne=H.activity)==null?void 0:Ne.lastDayOff)||""}),X.push({key:"last-half-day",label:"Last half day",value:((Ae=H.activity)==null?void 0:Ae.lastHalfDayOff)||""})),{offset:H.offset,label:H.label||`Offset ${ee(H.offset)}`,range:se(H.rangeStart,H.rangeEnd),metrics:X}}):[]);A(()=>{const _=a.summary.rangeStart||a.rangeStart,H=a.summary.rangeEnd||a.rangeEnd;return!_||!H?"":Ga(_,H,{month:"short",day:"numeric"})});const O=A(()=>{const _=a.summary.delta;if(!_)return"";const X=a.summary.totalHours-_.totalHours,Q=X!==0?_.totalHours/X*100:0,ie=M.value,ue=_.totalHours>=0?"+":"",he=`${ue}${oe(Math.abs(_.totalHours))} h`,fe=`${ue}${Math.abs(Q).toFixed(1)}%`,de=C.value,ye=ie?` (${ie})`:"";return` vs. offset ${de}${ye}: ${he} / ${fe}`});function W(_){return Number(_??0).toFixed(1)}function oe(_){return Number(_??0).toFixed(2)}function V(_){return _?/^\d{2}:\d{2}$/.test(_)?_:om(_):""}function q(_){switch(_){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function Y(_){return _==null?"0.0%":`${Math.max(0,Math.min(100,Number(_))).toFixed(1)}%`}function L(_,H,X){const Q=It(_);if(!Q)return null;const ie=H==="month"?Zo(Q,X):Ja(Q,X*7);return Wt(ie,"UTC")}function U(_){const H=(a.rangeMode||"week").toString().toLowerCase(),X=a.summary.rangeStart||a.rangeStart||"",Q=a.summary.rangeEnd||a.rangeEnd||"";if(!X||!Q)return"";const ie=L(X,H,_),ue=L(Q,H,_);return!ie||!ue?"":Ga(ie,ue,{month:"short",day:"numeric"})}function ee(_){return _===0?"0":_>0?`+${_}`:`${_}`}function se(_,H){return!_||!H?"":Ga(_,H,{month:"short",day:"numeric"})}function K(_){if(!(_!=null&&_.date))return"";const H=Number((_==null?void 0:_.hours)??0);return`${qr(_.date,{month:"short",day:"numeric"})||_.date}  ${oe(H)} h`}function Z(_){if(!_)return"";const H=_.targetHours>0?` (${Math.round(_.percent)}% of ${oe(_.targetHours)} h)`:"";return`${_.label}  ${oe(_.actualHours)} h${H}`}function te(_,H){const X=V(_||null),Q=V(H||null);return X&&Q?`${X}${Q}`:X?`${X}`:Q?`${Q}`:""}function ge(_,H){const X=V(_||null),Q=V(H||null);return!X&&!Q?"":`${X||""} / ${Q||""}`}function pe(_){return _==null?"":`${Number(_).toFixed(1)} h`}function F(_,H){if(H==null||_==null)return"";const X=_-H;return` vs. offset ${C.value}  ${Y(X)}`}return(_,H)=>(b(),w("div",{class:"card time-summary compact",style:De(c.value)},[d.value?(b(),w("div",bx,[f("span",null,R(i.value),1)])):ne("",!0),s.value!==null?(b(),w("div",yx,[H[0]||(H[0]=f("div",{class:"today-label"},"Total today",-1)),f("div",wx,R(oe(s.value))+" h",1)])):ne("",!0),n.value.length?(b(),w("div",kx,[(b(!0),w(ve,null,Ce(n.value,X=>(b(),w("div",{class:"today-cat",key:X.id},[f("span",{class:"dot",style:De({background:X.color||"var(--brand)"})},null,4),f("span",_x,R(X.label),1),f("span",xx,R(oe(X.todayHours))+" h",1)]))),128))])):ne("",!0),o.value.showTotal?(b(),w("div",Cx,[f("strong",null,R(oe(_.summary.totalHours))+" h",1),H[1]||(H[1]=Oe(" total ",-1))])):ne("",!0),E.value?(b(),w("div",Sx,R(E.value),1)):ne("",!0),o.value.showBusiest&&y.value?(b(),w("div",$x,R(y.value),1)):ne("",!0),o.value.showWorkday?(b(),w("div",Tx,[H[2]||(H[2]=f("span",{class:"label"},"Workdays",-1)),Oe(" "+R(oe(_.summary.workdayAvg))+" h avg  "+R(oe(_.summary.workdayMedian))+" h median ",1)])):ne("",!0),o.value.showWeekend?(b(),w("div",Mx,[H[3]||(H[3]=f("span",{class:"label"},"Weekend",-1)),Oe(" "+R(oe(_.summary.weekendAvg))+" h avg  "+R(oe(_.summary.weekendMedian))+" h median ",1),o.value.showWeekendShare&&P.value?(b(),w("span",Ax,"("+R(P.value)+")",1)):ne("",!0)])):ne("",!0),o.value.showCalendarSummary?(b(),w("div",Dx,[f("span",Ex,R(_.summary.activeCalendars)+" calendars",1),_.summary.calendarSummary?(b(),w(ve,{key:0},[H[4]||(H[4]=f("span",{class:"sep"},"",-1)),f("span",Lx,R(_.summary.calendarSummary),1)],64)):ne("",!0)])):ne("",!0),o.value.showTopCategory&&N.value?(b(),w("div",Nx,[H[5]||(H[5]=f("span",{class:"label"},"Top category",-1)),f("span",Ix,R(N.value.text),1),N.value.badge?(b(),w("span",{key:0,class:Ee(["summary-badge",N.value.badgeClass])},R(N.value.badge),3)):ne("",!0)])):ne("",!0),B.value?(b(),w("div",Ox,[H[6]||(H[6]=f("div",{class:"time-summary-activity__title"},"Activity & Schedule",-1)),f("div",Bx," Events "+R(B.value.events)+"  Active Days "+R(B.value.activeDays??0)+"  Typical "+R(j.value)+R(T.value),1),u.value?(b(),w("div",Px,[Oe(" Weekend "+R(Y(B.value.weekendShare))+" ",1),x.value?(b(),w("span",Fx,"("+R(x.value)+")",1)):ne("",!0),Oe("  Evening "+R(Y(B.value.eveningShare))+" ",1),I.value?(b(),w("span",Hx,"("+R(I.value)+")",1)):ne("",!0)])):ne("",!0),u.value?(b(),w("div",Wx," Earliest/Late "+R(S.value),1)):ne("",!0),u.value?(b(),w("div",zx," Overlaps "+R(B.value.overlapEvents??0)+"  Longest "+R($.value),1)):ne("",!0),u.value?(b(),w("div",Rx," Last day off "+R(z.value),1)):ne("",!0)])):ne("",!0),p.value&&J.value.length?(b(),w("div",jx,[f("div",Ux,[H[7]||(H[7]=f("div",{class:"time-summary-history__title"},"Lookback",-1)),f("div",Vx,R(h.value),1)]),m.value==="pills"?(b(),w("div",Kx,[(b(!0),w(ve,null,Ce(J.value,X=>(b(),w("div",{class:"history-pill",key:X.offset},[f("div",qx,R(X.label),1),f("div",Gx,[(b(!0),w(ve,null,Ce(X.metrics,Q=>(b(),w("span",{class:"history-pill__metric",key:Q.key},[f("span",Jx,R(Q.label),1),f("span",Yx,R(Q.value),1)]))),128))])]))),128))])):(b(),w("div",Zx,[(b(!0),w(ve,null,Ce(J.value,X=>(b(),w("div",{class:"history-entry",key:X.offset},[f("div",Xx,[f("span",Qx,R(X.label),1),X.range?(b(),w("span",eC,R(X.range),1)):ne("",!0)]),f("div",tC,[(b(!0),w(ve,null,Ce(X.metrics,Q=>(b(),w("div",{class:"history-entry__metric",key:Q.key},[f("span",aC,R(Q.label),1),f("span",oC,R(Q.value),1)]))),128))])]))),128))]))])):ne("",!0),O.value?(b(),w("div",rC,R(O.value),1)):ne("",!0)],4))}}),[["__scopeId","data-v-9ebca49e"]])},Symbol.toStringTag,{value:"Module"}))})();
