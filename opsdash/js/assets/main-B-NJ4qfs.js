(function(){"use strict";var Sn=document.createElement("style");Sn.textContent=`table[data-v-69f095b4]{width:100%;border-collapse:collapse;font-size:13px}thead th[data-v-69f095b4]{text-align:left;padding:6px 8px;font-weight:600;color:var(--muted);border-bottom:1px solid var(--line)}thead th.num[data-v-69f095b4]{text-align:right}tbody td[data-v-69f095b4]{padding:6px 8px;border-top:1px solid var(--line);vertical-align:top}.col-w-42[data-v-69f095b4]{width:42%}.col-w-12[data-v-69f095b4]{width:12%}.col-w-14[data-v-69f095b4]{width:14%}.col-w-18[data-v-69f095b4]{width:18%}.group-row td[data-v-69f095b4]{padding-top:12px;padding-bottom:8px;background:color-mix(in srgb,var(--muted) 6%,transparent)}.group-header[data-v-69f095b4]{display:flex;justify-content:space-between;align-items:center;gap:12px;font-size:12px}.group-label[data-v-69f095b4]{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--fg)}.group-label .dot[data-v-69f095b4]{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 12%,transparent)}.group-meta[data-v-69f095b4]{display:flex;align-items:center;gap:8px;flex-wrap:wrap;color:var(--muted)}.group-meta .summary[data-v-69f095b4]{font-size:12px}.group-meta .summary-percent[data-v-69f095b4]{font-variant-numeric:tabular-nums;color:var(--fg);font-weight:600}.badge[data-v-69f095b4]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-69f095b4]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-69f095b4]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-69f095b4]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-69f095b4]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-69f095b4]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.cell[data-v-69f095b4]{display:flex;flex-direction:column;gap:4px}.row-name[data-v-69f095b4]{font-weight:600;color:var(--fg)}.progress[data-v-69f095b4]{position:relative;height:6px;background:color-mix(in srgb,var(--muted) 22%,transparent);border-radius:999px;overflow:hidden}.progress-bar[data-v-69f095b4]{height:100%;border-radius:999px;background:var(--brand);transition:width .2s ease}.num[data-v-69f095b4]{text-align:right;font-variant-numeric:tabular-nums;color:var(--fg)}.hint[data-v-69f095b4]{color:var(--muted);font-size:11px}.delta[data-v-69f095b4]{font-weight:600}.delta.pos[data-v-69f095b4]{color:var(--pos)}.delta.neg[data-v-69f095b4]{color:var(--neg)}.empty-row td.empty[data-v-69f095b4]{font-style:italic;color:var(--muted);text-align:center}.card.time-summary[data-v-c358573a]{display:flex;flex-direction:column;gap:6px;font-size:13px;color:var(--muted);padding:14px}.time-summary-firstline[data-v-c358573a]{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:12px;color:var(--fg);font-weight:600}.time-summary-firstline em[data-v-c358573a]{font-style:italic;color:var(--fg)}.mode-pill[data-v-c358573a]{display:inline-flex;align-items:center;padding:2px 8px;font-size:11px;font-weight:600;border-radius:999px;background:color-mix(in srgb,var(--brand) 18%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.time-summary-metrics[data-v-c358573a]{display:grid;gap:4px;margin:0;padding:0;list-style:none}.time-summary-metrics li[data-v-c358573a]{display:flex;flex-wrap:wrap;gap:4px;color:var(--muted)}.time-summary-metrics strong[data-v-c358573a]{color:var(--fg);font-size:14px}.time-summary-row[data-v-c358573a]{display:flex;flex-wrap:wrap;gap:4px;line-height:1.4;color:var(--muted)}.time-summary-row .label[data-v-c358573a]{color:var(--fg);font-weight:600}.time-summary-row.calendars[data-v-c358573a]{word-break:break-word}.time-summary-row .sep[data-v-c358573a],.time-summary-row .hint[data-v-c358573a],.time-summary-row .share[data-v-c358573a]{color:var(--muted)}.time-summary-row.top-category[data-v-c358573a]{align-items:center;gap:6px}.summary-badge[data-v-c358573a]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-c358573a]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-c358573a]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-c358573a]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-c358573a]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-c358573a]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.targets-card[data-v-bcb82b9a]{display:flex;flex-direction:column;gap:8px}.targets-header[data-v-bcb82b9a]{display:flex;justify-content:space-between;align-items:center}.targets-header strong[data-v-bcb82b9a]{font-size:14px}.targets-main[data-v-bcb82b9a]{display:flex;flex-direction:column;gap:4px;font-size:13px}.targets-main .line[data-v-bcb82b9a]{display:flex;flex-wrap:wrap;gap:6px}.targets-main .line.forecast[data-v-bcb82b9a]{flex-direction:column;gap:2px}.targets-main .line .value[data-v-bcb82b9a]{display:flex;gap:6px;align-items:center}.targets-badges[data-v-bcb82b9a]{display:flex;flex-wrap:wrap;gap:6px}.targets-categories[data-v-bcb82b9a]{display:flex;flex-direction:column;gap:10px;padding-top:6px;border-top:1px solid var(--line)}.category[data-v-bcb82b9a]{display:flex;flex-direction:column;gap:6px;font-size:12px;padding:4px 0}.category .cat-top[data-v-bcb82b9a]{display:flex;align-items:center;justify-content:space-between;gap:8px}.category .cat-label[data-v-bcb82b9a]{display:flex;align-items:center;gap:6px;font-weight:600;color:var(--fg)}.category .cat-label .dot[data-v-bcb82b9a]{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 10%,transparent)}.category .cat-label .name[data-v-bcb82b9a]{color:var(--fg)}.category .cat-meta[data-v-bcb82b9a]{display:flex;align-items:center;gap:6px;font-weight:600;color:var(--muted)}.category .cat-meta .percent[data-v-bcb82b9a]{font-variant-numeric:tabular-nums;color:var(--fg)}.cat-progress .bar[data-v-bcb82b9a]{position:relative;width:100%;height:8px;border-radius:999px;background:color-mix(in srgb,var(--muted) 20%,transparent)}.cat-progress .bar .fill[data-v-bcb82b9a]{height:100%;border-radius:999px;transition:width .2s ease}.category .cat-metrics[data-v-bcb82b9a]{display:flex;flex-wrap:wrap;gap:6px;align-items:center;color:var(--fg)}.cat-footer[data-v-bcb82b9a]{display:flex;justify-content:space-between;align-items:center}.hint[data-v-bcb82b9a]{color:var(--muted);font-size:12px}.badge[data-v-bcb82b9a]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-label[data-v-bcb82b9a]{font-weight:600}.status-on[data-v-bcb82b9a]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-bcb82b9a]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-bcb82b9a]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-bcb82b9a]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-bcb82b9a]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.delta[data-v-bcb82b9a]{font-weight:600}.delta.pos[data-v-bcb82b9a]{color:var(--pos)}.delta.neg[data-v-bcb82b9a]{color:var(--neg)}.cat-metrics .hint[data-v-bcb82b9a],.cat-footer .hint[data-v-bcb82b9a]{font-size:11px}.cat-progress[data-v-bcb82b9a]{padding:2px 0}.cat-meta .badge[data-v-bcb82b9a]{font-size:10px}.activity-card[data-v-054cbd84]{display:flex;flex-direction:column;gap:8px;padding:14px;font-size:13px;color:var(--muted)}.activity-card__header[data-v-054cbd84]{display:flex;justify-content:space-between;align-items:center;font-weight:600;color:var(--fg);font-size:12px}.activity-card__hero[data-v-054cbd84]{font-weight:600;color:var(--fg)}.activity-card__subline[data-v-054cbd84]{font-size:12px}.activity-card__meta[data-v-054cbd84],.activity-card__extra[data-v-054cbd84]{display:flex;flex-wrap:wrap;gap:8px 14px;font-size:12px}.activity-card__meta strong[data-v-054cbd84],.activity-card__extra strong[data-v-054cbd84]{font-weight:600;color:var(--fg)}.activity-card__hint[data-v-054cbd84]{font-size:11px;color:var(--muted);opacity:.8}.pill[data-v-054cbd84]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;font-size:11px;border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.balance-card[data-v-a9a4a7a3]{display:flex;flex-direction:column;gap:8px;padding:14px;font-size:13px;color:var(--muted)}.balance-card__header[data-v-a9a4a7a3]{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fg);font-size:12px}.balance-card__hero[data-v-a9a4a7a3]{font-weight:600;color:var(--fg)}.balance-card__relations[data-v-a9a4a7a3],.balance-card__trend[data-v-a9a4a7a3]{font-size:12px}.balance-card__trend strong[data-v-a9a4a7a3]{color:var(--fg)}.balance-card__insights[data-v-a9a4a7a3],.balance-card__warnings[data-v-a9a4a7a3]{margin:0;padding-left:16px;font-size:12px;display:flex;flex-direction:column;gap:4px}.balance-card__warnings[data-v-a9a4a7a3]{color:var(--danger, #b91c1c)}.badge[data-v-a9a4a7a3]{display:inline-flex;align-items:center;padding:2px 8px;border-radius:999px;font-size:11px;background:color-mix(in srgb,var(--brand) 12%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.forecast-block[data-v-4d86aa83]{margin-top:16px;display:flex;flex-direction:column;gap:8px}.forecast-block .field[data-v-4d86aa83]{max-width:100%}.forecast-block select[data-v-4d86aa83]{width:100%}.forecast-hint[data-v-4d86aa83]{margin:0}.notes-section[data-v-f84bfd89]{display:flex;flex-direction:column;gap:8px}.notes-textarea[data-v-f84bfd89]{width:100%;min-height:120px;padding:8px 10px;border-radius:8px;border:1px solid var(--line);background:color-mix(in oklab,var(--card),transparent 5%);color:var(--fg);resize:vertical;box-sizing:border-box;font:13px/1.4 ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif}.notes-textarea[data-v-f84bfd89]:focus{outline:2px solid color-mix(in oklab,var(--brand),transparent 60%);outline-offset:1px}.notes-textarea[data-v-f84bfd89]:read-only{background:color-mix(in oklab,var(--card),transparent 15%);color:var(--muted)}.notes-actions[data-v-f84bfd89]{display:flex;justify-content:flex-end;margin-top:4px}.sb-title[data-v-d602d23c]{font-weight:600;margin-bottom:6px}.sb-description[data-v-d602d23c]{font-size:12px;color:var(--text-color-tertiary);margin:0 0 10px}.preset-form[data-v-d602d23c]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.preset-label[data-v-d602d23c]{font-size:12px;font-weight:600}.preset-form input[data-v-d602d23c]{width:100%;padding:6px 8px;border-radius:4px;border:1px solid var(--color-border);background:var(--color-main-background);color:var(--color-main-text)}.preset-save[data-v-d602d23c]{align-self:flex-start}.preset-error[data-v-d602d23c]{color:var(--color-error);font-size:12px}.preset-warnings[data-v-d602d23c]{border:1px solid var(--color-warning);background:color-mix(in srgb,var(--color-warning) 10%,transparent);border-radius:6px;padding:8px;margin-bottom:12px}.warnings-title[data-v-d602d23c]{font-weight:600;margin-bottom:4px}.preset-warnings ul[data-v-d602d23c]{padding-left:18px;margin:0 0 6px}.preset-clear[data-v-d602d23c]{padding:2px 6px}.preset-header[data-v-d602d23c]{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.preset-header h3[data-v-d602d23c]{margin:0;font-size:13px;font-weight:600}.preset-empty[data-v-d602d23c]{font-size:12px;color:var(--text-color-tertiary)}.preset-list[data-v-d602d23c]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}.preset-item[data-v-d602d23c]{border:1px solid var(--color-border);border-radius:6px;padding:8px;display:flex;flex-direction:column;gap:6px;background:var(--color-main-background)}.preset-meta[data-v-d602d23c]{display:flex;flex-direction:column;gap:2px}.preset-name[data-v-d602d23c]{font-weight:600}.preset-info[data-v-d602d23c]{display:flex;flex-wrap:wrap;gap:8px;font-size:11px;color:var(--text-color-tertiary)}.preset-actions[data-v-d602d23c]{display:flex;gap:6px}.input-message[data-v-4d654bff]{font-size:11px;margin-top:4px;color:var(--muted)}.input-message.error[data-v-4d654bff]{color:var(--neg)}.input-message.warning[data-v-4d654bff]{color:var(--warning)}
/*$vite$:1*/`,document.head.appendChild(Sn);/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Sa(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Ae={},Xt=[],wt=()=>{},Cn=()=>!1,Ws=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ca=e=>e.startsWith("onUpdate:"),et=Object.assign,$a=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},To=Object.prototype.hasOwnProperty,Se=(e,t)=>To.call(e,t),oe=Array.isArray,Qt=e=>Bs(e)==="[object Map]",$n=e=>Bs(e)==="[object Set]",ce=e=>typeof e=="function",Be=e=>typeof e=="string",At=e=>typeof e=="symbol",Oe=e=>e!==null&&typeof e=="object",Mn=e=>(Oe(e)||ce(e))&&ce(e.then)&&ce(e.catch),Tn=Object.prototype.toString,Bs=e=>Tn.call(e),Ao=e=>Bs(e).slice(8,-1),An=e=>Bs(e)==="[object Object]",Ma=e=>Be(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ps=Sa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),js=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},Do=/-(\w)/g,ht=js(e=>e.replace(Do,(t,s)=>s?s.toUpperCase():"")),Eo=/\B([A-Z])/g,Bt=js(e=>e.replace(Eo,"-$1").toLowerCase()),Us=js(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ta=js(e=>e?`on${Us(e)}`:""),jt=(e,t)=>!Object.is(e,t),Vs=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},Dn=(e,t,s,a=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:a,value:s})},Aa=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let En;const zs=()=>En||(En=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Dt(e){if(oe(e)){const t={};for(let s=0;s<e.length;s++){const a=e[s],n=Be(a)?Lo(a):Dt(a);if(n)for(const r in n)t[r]=n[r]}return t}else if(Be(e)||Oe(e))return e}const Po=/;(?![^(]*\))/g,Io=/:([^]+)/,No=/\/\*[^]*?\*\//g;function Lo(e){const t={};return e.replace(No,"").split(Po).forEach(s=>{if(s){const a=s.split(Io);a.length>1&&(t[a[0].trim()]=a[1].trim())}}),t}function ve(e){let t="";if(Be(e))t=e;else if(oe(e))for(let s=0;s<e.length;s++){const a=ve(e[s]);a&&(t+=a+" ")}else if(Oe(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const Oo=Sa("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Pn(e){return!!e||e===""}const In=e=>!!(e&&e.__v_isRef===!0),I=e=>Be(e)?e:e==null?"":oe(e)||Oe(e)&&(e.toString===Tn||!ce(e.toString))?In(e)?I(e.value):JSON.stringify(e,Nn,2):String(e),Nn=(e,t)=>In(t)?Nn(e,t.value):Qt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[a,n],r)=>(s[Da(a,r)+" =>"]=n,s),{})}:$n(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Da(s))}:At(t)?Da(t):Oe(t)&&!oe(t)&&!An(t)?String(t):t,Da=(e,t="")=>{var s;return At(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let it;class Ho{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=it,!t&&it&&(this.index=(it.scopes||(it.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=it;try{return it=this,t()}finally{it=s}}}on(){++this._on===1&&(this.prevScope=it,it=this)}off(){this._on>0&&--this._on===0&&(it=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,a;for(s=0,a=this.effects.length;s<a;s++)this.effects[s].stop();for(this.effects.length=0,s=0,a=this.cleanups.length;s<a;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,a=this.scopes.length;s<a;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Ro(){return it}let Pe;const Ea=new WeakSet;class Ln{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,it&&it.active&&it.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ea.has(this)&&(Ea.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Hn(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jn(this),Rn(this);const t=Pe,s=yt;Pe=this,yt=!0;try{return this.fn()}finally{Fn(this),Pe=t,yt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)La(t);this.deps=this.depsTail=void 0,jn(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ea.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Na(this)&&this.run()}get dirty(){return Na(this)}}let On=0,hs,ms;function Hn(e,t=!1){if(e.flags|=8,t){e.next=ms,ms=e;return}e.next=hs,hs=e}function Pa(){On++}function Ia(){if(--On>0)return;if(ms){let t=ms;for(ms=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;hs;){let t=hs;for(hs=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(a){e||(e=a)}t=s}}if(e)throw e}function Rn(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Fn(e){let t,s=e.depsTail,a=s;for(;a;){const n=a.prevDep;a.version===-1?(a===s&&(s=n),La(a),Fo(a)):t=a,a.dep.activeLink=a.prevActiveLink,a.prevActiveLink=void 0,a=n}e.deps=t,e.depsTail=s}function Na(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Wn(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Wn(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===vs)||(e.globalVersion=vs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Na(e))))return;e.flags|=2;const t=e.dep,s=Pe,a=yt;Pe=e,yt=!0;try{Rn(e);const n=e.fn(e._value);(t.version===0||jt(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{Pe=s,yt=a,Fn(e),e.flags&=-3}}function La(e,t=!1){const{dep:s,prevSub:a,nextSub:n}=e;if(a&&(a.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=a,e.nextSub=void 0),s.subs===e&&(s.subs=a,!a&&s.computed)){s.computed.flags&=-5;for(let r=s.computed.deps;r;r=r.nextDep)La(r,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Fo(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let yt=!0;const Bn=[];function _t(){Bn.push(yt),yt=!1}function kt(){const e=Bn.pop();yt=e===void 0?!0:e}function jn(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=Pe;Pe=void 0;try{t()}finally{Pe=s}}}let vs=0;class Wo{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Oa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Pe||!yt||Pe===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Pe)s=this.activeLink=new Wo(Pe,this),Pe.deps?(s.prevDep=Pe.depsTail,Pe.depsTail.nextDep=s,Pe.depsTail=s):Pe.deps=Pe.depsTail=s,Un(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const a=s.nextDep;a.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=a),s.prevDep=Pe.depsTail,s.nextDep=void 0,Pe.depsTail.nextDep=s,Pe.depsTail=s,Pe.deps===s&&(Pe.deps=a)}return s}trigger(t){this.version++,vs++,this.notify(t)}notify(t){Pa();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Ia()}}}function Un(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let a=t.deps;a;a=a.nextDep)Un(a)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Ks=new WeakMap,qt=Symbol(""),Ha=Symbol(""),ys=Symbol("");function tt(e,t,s){if(yt&&Pe){let a=Ks.get(e);a||Ks.set(e,a=new Map);let n=a.get(s);n||(a.set(s,n=new Oa),n.map=a,n.key=s),n.track()}}function Et(e,t,s,a,n,r){const o=Ks.get(e);if(!o){vs++;return}const i=c=>{c&&c.trigger()};if(Pa(),t==="clear")o.forEach(i);else{const c=oe(e),g=c&&Ma(s);if(c&&s==="length"){const p=Number(a);o.forEach((d,f)=>{(f==="length"||f===ys||!At(f)&&f>=p)&&i(d)})}else switch((s!==void 0||o.has(void 0))&&i(o.get(s)),g&&i(o.get(ys)),t){case"add":c?g&&i(o.get("length")):(i(o.get(qt)),Qt(e)&&i(o.get(Ha)));break;case"delete":c||(i(o.get(qt)),Qt(e)&&i(o.get(Ha)));break;case"set":Qt(e)&&i(o.get(qt));break}}Ia()}function Bo(e,t){const s=Ks.get(e);return s&&s.get(t)}function es(e){const t=ke(e);return t===e?t:(tt(t,"iterate",ys),mt(e)?t:t.map(Je))}function Gs(e){return tt(e=ke(e),"iterate",ys),e}const jo={__proto__:null,[Symbol.iterator](){return Ra(this,Symbol.iterator,Je)},concat(...e){return es(this).concat(...e.map(t=>oe(t)?es(t):t))},entries(){return Ra(this,"entries",e=>(e[1]=Je(e[1]),e))},every(e,t){return Pt(this,"every",e,t,void 0,arguments)},filter(e,t){return Pt(this,"filter",e,t,s=>s.map(Je),arguments)},find(e,t){return Pt(this,"find",e,t,Je,arguments)},findIndex(e,t){return Pt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Pt(this,"findLast",e,t,Je,arguments)},findLastIndex(e,t){return Pt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Pt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Fa(this,"includes",e)},indexOf(...e){return Fa(this,"indexOf",e)},join(e){return es(this).join(e)},lastIndexOf(...e){return Fa(this,"lastIndexOf",e)},map(e,t){return Pt(this,"map",e,t,void 0,arguments)},pop(){return bs(this,"pop")},push(...e){return bs(this,"push",e)},reduce(e,...t){return Vn(this,"reduce",e,t)},reduceRight(e,...t){return Vn(this,"reduceRight",e,t)},shift(){return bs(this,"shift")},some(e,t){return Pt(this,"some",e,t,void 0,arguments)},splice(...e){return bs(this,"splice",e)},toReversed(){return es(this).toReversed()},toSorted(e){return es(this).toSorted(e)},toSpliced(...e){return es(this).toSpliced(...e)},unshift(...e){return bs(this,"unshift",e)},values(){return Ra(this,"values",Je)}};function Ra(e,t,s){const a=Gs(e),n=a[t]();return a!==e&&!mt(e)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=s(r.value)),r}),n}const Uo=Array.prototype;function Pt(e,t,s,a,n,r){const o=Gs(e),i=o!==e&&!mt(e),c=o[t];if(c!==Uo[t]){const d=c.apply(e,r);return i?Je(d):d}let g=s;o!==e&&(i?g=function(d,f){return s.call(this,Je(d),f,e)}:s.length>2&&(g=function(d,f){return s.call(this,d,f,e)}));const p=c.call(o,g,a);return i&&n?n(p):p}function Vn(e,t,s,a){const n=Gs(e);let r=s;return n!==e&&(mt(e)?s.length>3&&(r=function(o,i,c){return s.call(this,o,i,c,e)}):r=function(o,i,c){return s.call(this,o,Je(i),c,e)}),n[t](r,...a)}function Fa(e,t,s){const a=ke(e);tt(a,"iterate",ys);const n=a[t](...s);return(n===-1||n===!1)&&Ba(s[0])?(s[0]=ke(s[0]),a[t](...s)):n}function bs(e,t,s=[]){_t(),Pa();const a=ke(e)[t].apply(e,s);return Ia(),kt(),a}const Vo=Sa("__proto__,__v_isRef,__isVue"),zn=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(At));function zo(e){At(e)||(e=String(e));const t=ke(this);return tt(t,"has",e),t.hasOwnProperty(e)}class Kn{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,a){if(s==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return r;if(s==="__v_raw")return a===(n?r?Xn:Yn:r?Zn:Jn).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(a)?t:void 0;const o=oe(t);if(!n){let c;if(o&&(c=jo[s]))return c;if(s==="hasOwnProperty")return zo}const i=Reflect.get(t,s,Ge(t)?t:a);return(At(s)?zn.has(s):Vo(s))||(n||tt(t,"get",s),r)?i:Ge(i)?o&&Ma(s)?i:i.value:Oe(i)?n?Qn(i):xt(i):i}}class Gn extends Kn{constructor(t=!1){super(!1,t)}set(t,s,a,n){let r=t[s];if(!this._isShallow){const c=Ut(r);if(!mt(a)&&!Ut(a)&&(r=ke(r),a=ke(a)),!oe(t)&&Ge(r)&&!Ge(a))return c||(r.value=a),!0}const o=oe(t)&&Ma(s)?Number(s)<t.length:Se(t,s),i=Reflect.set(t,s,a,Ge(t)?t:n);return t===ke(n)&&(o?jt(a,r)&&Et(t,"set",s,a):Et(t,"add",s,a)),i}deleteProperty(t,s){const a=Se(t,s);t[s];const n=Reflect.deleteProperty(t,s);return n&&a&&Et(t,"delete",s,void 0),n}has(t,s){const a=Reflect.has(t,s);return(!At(s)||!zn.has(s))&&tt(t,"has",s),a}ownKeys(t){return tt(t,"iterate",oe(t)?"length":qt),Reflect.ownKeys(t)}}class qn extends Kn{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Ko=new Gn,Go=new qn,qo=new Gn(!0),Jo=new qn(!0),Wa=e=>e,qs=e=>Reflect.getPrototypeOf(e);function Zo(e,t,s){return function(...a){const n=this.__v_raw,r=ke(n),o=Qt(r),i=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,g=n[e](...a),p=s?Wa:t?Xs:Je;return!t&&tt(r,"iterate",c?Ha:qt),{next(){const{value:d,done:f}=g.next();return f?{value:d,done:f}:{value:i?[p(d[0]),p(d[1])]:p(d),done:f}},[Symbol.iterator](){return this}}}}function Js(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Yo(e,t){const s={get(n){const r=this.__v_raw,o=ke(r),i=ke(n);e||(jt(n,i)&&tt(o,"get",n),tt(o,"get",i));const{has:c}=qs(o),g=t?Wa:e?Xs:Je;if(c.call(o,n))return g(r.get(n));if(c.call(o,i))return g(r.get(i));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!e&&tt(ke(n),"iterate",qt),n.size},has(n){const r=this.__v_raw,o=ke(r),i=ke(n);return e||(jt(n,i)&&tt(o,"has",n),tt(o,"has",i)),n===i?r.has(n):r.has(n)||r.has(i)},forEach(n,r){const o=this,i=o.__v_raw,c=ke(i),g=t?Wa:e?Xs:Je;return!e&&tt(c,"iterate",qt),i.forEach((p,d)=>n.call(r,g(p),g(d),o))}};return et(s,e?{add:Js("add"),set:Js("set"),delete:Js("delete"),clear:Js("clear")}:{add(n){!t&&!mt(n)&&!Ut(n)&&(n=ke(n));const r=ke(this);return qs(r).has.call(r,n)||(r.add(n),Et(r,"add",n,n)),this},set(n,r){!t&&!mt(r)&&!Ut(r)&&(r=ke(r));const o=ke(this),{has:i,get:c}=qs(o);let g=i.call(o,n);g||(n=ke(n),g=i.call(o,n));const p=c.call(o,n);return o.set(n,r),g?jt(r,p)&&Et(o,"set",n,r):Et(o,"add",n,r),this},delete(n){const r=ke(this),{has:o,get:i}=qs(r);let c=o.call(r,n);c||(n=ke(n),c=o.call(r,n)),i&&i.call(r,n);const g=r.delete(n);return c&&Et(r,"delete",n,void 0),g},clear(){const n=ke(this),r=n.size!==0,o=n.clear();return r&&Et(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Zo(n,e,t)}),s}function Zs(e,t){const s=Yo(e,t);return(a,n,r)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?a:Reflect.get(Se(s,n)&&n in a?s:a,n,r)}const Xo={get:Zs(!1,!1)},Qo={get:Zs(!1,!0)},ei={get:Zs(!0,!1)},ti={get:Zs(!0,!0)},Jn=new WeakMap,Zn=new WeakMap,Yn=new WeakMap,Xn=new WeakMap;function si(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ai(e){return e.__v_skip||!Object.isExtensible(e)?0:si(Ao(e))}function xt(e){return Ut(e)?e:Ys(e,!1,Ko,Xo,Jn)}function ni(e){return Ys(e,!1,qo,Qo,Zn)}function Qn(e){return Ys(e,!0,Go,ei,Yn)}function em(e){return Ys(e,!0,Jo,ti,Xn)}function Ys(e,t,s,a,n){if(!Oe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=ai(e);if(r===0)return e;const o=n.get(e);if(o)return o;const i=new Proxy(e,r===2?a:s);return n.set(e,i),i}function ts(e){return Ut(e)?ts(e.__v_raw):!!(e&&e.__v_isReactive)}function Ut(e){return!!(e&&e.__v_isReadonly)}function mt(e){return!!(e&&e.__v_isShallow)}function Ba(e){return e?!!e.__v_raw:!1}function ke(e){const t=e&&e.__v_raw;return t?ke(t):e}function ri(e){return!Se(e,"__v_skip")&&Object.isExtensible(e)&&Dn(e,"__v_skip",!0),e}const Je=e=>Oe(e)?xt(e):e,Xs=e=>Oe(e)?Qn(e):e;function Ge(e){return e?e.__v_isRef===!0:!1}function ne(e){return oi(e,!1)}function oi(e,t){return Ge(e)?e:new ii(e,t)}class ii{constructor(t,s){this.dep=new Oa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:ke(t),this._value=s?t:Je(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,a=this.__v_isShallow||mt(t)||Ut(t);t=a?t:ke(t),jt(t,s)&&(this._rawValue=t,this._value=a?t:Je(t),this.dep.trigger())}}function C(e){return Ge(e)?e.value:e}const li={get:(e,t,s)=>t==="__v_raw"?e:C(Reflect.get(e,t,s)),set:(e,t,s,a)=>{const n=e[t];return Ge(n)&&!Ge(s)?(n.value=s,!0):Reflect.set(e,t,s,a)}};function er(e){return ts(e)?e:new Proxy(e,li)}function tr(e){const t=oe(e)?new Array(e.length):{};for(const s in e)t[s]=ui(e,s);return t}class ci{constructor(t,s,a){this._object=t,this._key=s,this._defaultValue=a,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Bo(ke(this._object),this._key)}}function ui(e,t,s){const a=e[t];return Ge(a)?a:new ci(e,t,s)}class di{constructor(t,s,a){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Oa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=vs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=a}notify(){if(this.flags|=16,!(this.flags&8)&&Pe!==this)return Hn(this,!0),!0}get value(){const t=this.dep.track();return Wn(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function fi(e,t,s=!1){let a,n;return ce(e)?a=e:(a=e.get,n=e.set),new di(a,n,s)}const Qs={},ea=new WeakMap;let Jt;function gi(e,t=!1,s=Jt){if(s){let a=ea.get(s);a||ea.set(s,a=[]),a.push(e)}}function pi(e,t,s=Ae){const{immediate:a,deep:n,once:r,scheduler:o,augmentJob:i,call:c}=s,g=E=>n?E:mt(E)||n===!1||n===0?It(E,1):It(E);let p,d,f,u,b=!1,h=!1;if(Ge(e)?(d=()=>e.value,b=mt(e)):ts(e)?(d=()=>g(e),b=!0):oe(e)?(h=!0,b=e.some(E=>ts(E)||mt(E)),d=()=>e.map(E=>{if(Ge(E))return E.value;if(ts(E))return g(E);if(ce(E))return c?c(E,2):E()})):ce(e)?t?d=c?()=>c(e,2):e:d=()=>{if(f){_t();try{f()}finally{kt()}}const E=Jt;Jt=p;try{return c?c(e,3,[u]):e(u)}finally{Jt=E}}:d=wt,t&&n){const E=d,R=n===!0?1/0:n;d=()=>It(E(),R)}const w=Ro(),T=()=>{p.stop(),w&&w.active&&$a(w.effects,p)};if(r&&t){const E=t;t=(...R)=>{E(...R),T()}}let x=h?new Array(e.length).fill(Qs):Qs;const S=E=>{if(!(!(p.flags&1)||!p.dirty&&!E))if(t){const R=p.run();if(n||b||(h?R.some((X,J)=>jt(X,x[J])):jt(R,x))){f&&f();const X=Jt;Jt=p;try{const J=[R,x===Qs?void 0:h&&x[0]===Qs?[]:x,u];x=R,c?c(t,3,J):t(...J)}finally{Jt=X}}}else p.run()};return i&&i(S),p=new Ln(d),p.scheduler=o?()=>o(S,!1):S,u=E=>gi(E,!1,p),f=p.onStop=()=>{const E=ea.get(p);if(E){if(c)c(E,4);else for(const R of E)R();ea.delete(p)}},t?a?S(!0):x=p.run():o?o(S.bind(null,!0),!0):p.run(),T.pause=p.pause.bind(p),T.resume=p.resume.bind(p),T.stop=T,T}function It(e,t=1/0,s){if(t<=0||!Oe(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,Ge(e))It(e.value,t,s);else if(oe(e))for(let a=0;a<e.length;a++)It(e[a],t,s);else if($n(e)||Qt(e))e.forEach(a=>{It(a,t,s)});else if(An(e)){for(const a in e)It(e[a],t,s);for(const a of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,a)&&It(e[a],t,s)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ws=[];let ja=!1;function tm(e,...t){if(ja)return;ja=!0,_t();const s=ws.length?ws[ws.length-1].component:null,a=s&&s.appContext.config.warnHandler,n=hi();if(a)ss(a,s,11,[e+t.map(r=>{var o,i;return(i=(o=r.toString)==null?void 0:o.call(r))!=null?i:JSON.stringify(r)}).join(""),s&&s.proxy,n.map(({vnode:r})=>`at <${Jr(s,r.type)}>`).join(`
`),n]);else{const r=[`[Vue warn]: ${e}`,...t];n.length&&r.push(`
`,...mi(n)),console.warn(...r)}kt(),ja=!1}function hi(){let e=ws[ws.length-1];if(!e)return[];const t=[];for(;e;){const s=t[0];s&&s.vnode===e?s.recurseCount++:t.push({vnode:e,recurseCount:0});const a=e.component&&e.component.parent;e=a&&a.vnode}return t}function mi(e){const t=[];return e.forEach((s,a)=>{t.push(...a===0?[]:[`
`],...vi(s))}),t}function vi({vnode:e,recurseCount:t}){const s=t>0?`... (${t} recursive calls)`:"",a=e.component?e.component.parent==null:!1,n=` at <${Jr(e.component,e.type,a)}`,r=">"+s;return e.props?[n,...yi(e.props),r]:[n+r]}function yi(e){const t=[],s=Object.keys(e);return s.slice(0,3).forEach(a=>{t.push(...sr(a,e[a]))}),s.length>3&&t.push(" ..."),t}function sr(e,t,s){return Be(t)?(t=JSON.stringify(t),s?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?s?t:[`${e}=${t}`]:Ge(t)?(t=sr(e,ke(t.value),!0),s?t:[`${e}=Ref<`,t,">"]):ce(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=ke(t),s?t:[`${e}=`,t])}function ss(e,t,s,a){try{return a?e(...a):e()}catch(n){ta(n,t,s)}}function St(e,t,s,a){if(ce(e)){const n=ss(e,t,s,a);return n&&Mn(n)&&n.catch(r=>{ta(r,t,s)}),n}if(oe(e)){const n=[];for(let r=0;r<e.length;r++)n.push(St(e[r],t,s,a));return n}}function ta(e,t,s,a=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||Ae;if(t){let i=t.parent;const c=t.proxy,g=`https://vuejs.org/error-reference/#runtime-${s}`;for(;i;){const p=i.ec;if(p){for(let d=0;d<p.length;d++)if(p[d](e,c,g)===!1)return}i=i.parent}if(r){_t(),ss(r,null,10,[e,c,g]),kt();return}}bi(e,s,n,a,o)}function bi(e,t,s,a=!0,n=!1){if(n)throw e;console.error(e)}const rt=[];let Ct=-1;const as=[];let Vt=null,ns=0;const ar=Promise.resolve();let sa=null;function aa(e){const t=sa||ar;return e?t.then(this?e.bind(this):e):t}function wi(e){let t=Ct+1,s=rt.length;for(;t<s;){const a=t+s>>>1,n=rt[a],r=_s(n);r<e||r===e&&n.flags&2?t=a+1:s=a}return t}function Ua(e){if(!(e.flags&1)){const t=_s(e),s=rt[rt.length-1];!s||!(e.flags&2)&&t>=_s(s)?rt.push(e):rt.splice(wi(t),0,e),e.flags|=1,nr()}}function nr(){sa||(sa=ar.then(ir))}function _i(e){oe(e)?as.push(...e):Vt&&e.id===-1?Vt.splice(ns+1,0,e):e.flags&1||(as.push(e),e.flags|=1),nr()}function rr(e,t,s=Ct+1){for(;s<rt.length;s++){const a=rt[s];if(a&&a.flags&2){if(e&&a.id!==e.uid)continue;rt.splice(s,1),s--,a.flags&4&&(a.flags&=-2),a(),a.flags&4||(a.flags&=-2)}}}function or(e){if(as.length){const t=[...new Set(as)].sort((s,a)=>_s(s)-_s(a));if(as.length=0,Vt){Vt.push(...t);return}for(Vt=t,ns=0;ns<Vt.length;ns++){const s=Vt[ns];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Vt=null,ns=0}}const _s=e=>e.id==null?e.flags&2?-1:1/0:e.id;function ir(e){try{for(Ct=0;Ct<rt.length;Ct++){const t=rt[Ct];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ss(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ct<rt.length;Ct++){const t=rt[Ct];t&&(t.flags&=-2)}Ct=-1,rt.length=0,or(),sa=null,(rt.length||as.length)&&ir()}}let Ze=null,lr=null;function na(e){const t=Ze;return Ze=e,lr=e&&e.type.__scopeId||null,t}function We(e,t=Ze,s){if(!t||e._n)return e;const a=(...n)=>{a._d&&Br(-1);const r=na(t);let o;try{o=e(...n)}finally{na(r),a._d&&Br(1)}return o};return a._n=!0,a._c=!0,a._d=!0,a}function ks(e,t){if(Ze===null)return e;const s=ga(Ze),a=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,i,c=Ae]=t[n];r&&(ce(r)&&(r={mounted:r,updated:r}),r.deep&&It(o),a.push({dir:r,instance:s,value:o,oldValue:void 0,arg:i,modifiers:c}))}return e}function Zt(e,t,s,a){const n=e.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const i=n[o];r&&(i.oldValue=r[o].value);let c=i.dir[a];c&&(_t(),St(c,s,8,[e.el,i,e,t]),kt())}}const ki=Symbol("_vte"),xi=e=>e.__isTeleport,Si=Symbol("_leaveCb");function Va(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Va(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Ie(e,t){return ce(e)?et({name:e.name},t,{setup:e}):e}function cr(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function xs(e,t,s,a,n=!1){if(oe(e)){e.forEach((b,h)=>xs(b,t&&(oe(t)?t[h]:t),s,a,n));return}if(rs(a)&&!n){a.shapeFlag&512&&a.type.__asyncResolved&&a.component.subTree.component&&xs(e,t,s,a.component.subTree);return}const r=a.shapeFlag&4?ga(a.component):a.el,o=n?null:r,{i,r:c}=e,g=t&&t.r,p=i.refs===Ae?i.refs={}:i.refs,d=i.setupState,f=ke(d),u=d===Ae?Cn:b=>Se(f,b);if(g!=null&&g!==c){if(Be(g))p[g]=null,u(g)&&(d[g]=null);else if(Ge(g)){g.value=null;const b=t;b.k&&(p[b.k]=null)}}if(ce(c))ss(c,i,12,[o,p]);else{const b=Be(c),h=Ge(c);if(b||h){const w=()=>{if(e.f){const T=b?u(c)?d[c]:p[c]:c.value;if(n)oe(T)&&$a(T,r);else if(oe(T))T.includes(r)||T.push(r);else if(b)p[c]=[r],u(c)&&(d[c]=p[c]);else{const x=[r];c.value=x,e.k&&(p[e.k]=x)}}else b?(p[c]=o,u(c)&&(d[c]=o)):h&&(c.value=o,e.k&&(p[e.k]=o))};o?(w.id=-1,ut(w,s)):w()}}}zs().requestIdleCallback,zs().cancelIdleCallback;const rs=e=>!!e.type.__asyncLoader,ur=e=>e.type.__isKeepAlive;function Ci(e,t){dr(e,"a",t)}function $i(e,t){dr(e,"da",t)}function dr(e,t,s=st){const a=e.__wdc||(e.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(ra(t,a,s),s){let n=s.parent;for(;n&&n.parent;)ur(n.parent.vnode)&&Mi(a,t,s,n),n=n.parent}}function Mi(e,t,s,a){const n=ra(t,e,a,!0);gr(()=>{$a(a[t],n)},s)}function ra(e,t,s=st,a=!1){if(s){const n=s[e]||(s[e]=[]),r=t.__weh||(t.__weh=(...o)=>{_t();const i=Ds(s),c=St(t,s,e,o);return i(),kt(),c});return a?n.unshift(r):n.push(r),r}}const Nt=e=>(t,s=st)=>{(!Es||e==="sp")&&ra(e,(...a)=>t(...a),s)},Ti=Nt("bm"),os=Nt("m"),Ai=Nt("bu"),Di=Nt("u"),fr=Nt("bum"),gr=Nt("um"),Ei=Nt("sp"),Pi=Nt("rtg"),Ii=Nt("rtc");function Ni(e,t=st){ra("ec",e,t)}const Li="components";function Oi(e,t){return Ri(Li,e,!0,t)||e}const Hi=Symbol.for("v-ndc");function Ri(e,t,s=!0,a=!1){const n=Ze||st;if(n){const r=n.type;{const i=qr(r,!1);if(i&&(i===t||i===ht(t)||i===Us(ht(t))))return r}const o=pr(n[e]||r[e],t)||pr(n.appContext[e],t);return!o&&a?r:o}}function pr(e,t){return e&&(e[t]||e[ht(t)]||e[Us(ht(t))])}function ze(e,t,s,a){let n;const r=s,o=oe(e);if(o||Be(e)){const i=o&&ts(e);let c=!1,g=!1;i&&(c=!mt(e),g=Ut(e),e=Gs(e)),n=new Array(e.length);for(let p=0,d=e.length;p<d;p++)n[p]=t(c?g?Xs(Je(e[p])):Je(e[p]):e[p],p,void 0,r)}else if(typeof e=="number"){n=new Array(e);for(let i=0;i<e;i++)n[i]=t(i+1,i,void 0,r)}else if(Oe(e))if(e[Symbol.iterator])n=Array.from(e,(i,c)=>t(i,c,void 0,r));else{const i=Object.keys(e);n=new Array(i.length);for(let c=0,g=i.length;c<g;c++){const p=i[c];n[c]=t(e[p],p,c,r)}}else n=[];return n}function Fi(e,t,s={},a,n){if(Ze.ce||Ze.parent&&rs(Ze.parent)&&Ze.parent.ce)return s.name=t,$(),qe(de,null,[ie("slot",s,a)],64);let r=e[t];r&&r._c&&(r._d=!1),$();const o=r&&hr(r(s)),i=s.key||o&&o.key,c=qe(de,{key:(i&&!At(i)?i:`_${t}`)+(!o&&a?"_fb":"")},o||[],o&&e._===1?64:-2);return r&&r._c&&(r._d=!0),c}function hr(e){return e.some(t=>Ts(t)?!(t.type===Lt||t.type===de&&!hr(t.children)):!0)?e:null}const za=e=>e?zr(e)?ga(e):za(e.parent):null,Ss=et(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>za(e.parent),$root:e=>za(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>br(e),$forceUpdate:e=>e.f||(e.f=()=>{Ua(e.update)}),$nextTick:e=>e.n||(e.n=aa.bind(e.proxy)),$watch:e=>il.bind(e)}),Ka=(e,t)=>e!==Ae&&!e.__isScriptSetup&&Se(e,t),Wi={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:a,data:n,props:r,accessCache:o,type:i,appContext:c}=e;let g;if(t[0]!=="$"){const u=o[t];if(u!==void 0)switch(u){case 1:return a[t];case 2:return n[t];case 4:return s[t];case 3:return r[t]}else{if(Ka(a,t))return o[t]=1,a[t];if(n!==Ae&&Se(n,t))return o[t]=2,n[t];if((g=e.propsOptions[0])&&Se(g,t))return o[t]=3,r[t];if(s!==Ae&&Se(s,t))return o[t]=4,s[t];Ga&&(o[t]=0)}}const p=Ss[t];let d,f;if(p)return t==="$attrs"&&tt(e.attrs,"get",""),p(e);if((d=i.__cssModules)&&(d=d[t]))return d;if(s!==Ae&&Se(s,t))return o[t]=4,s[t];if(f=c.config.globalProperties,Se(f,t))return f[t]},set({_:e},t,s){const{data:a,setupState:n,ctx:r}=e;return Ka(n,t)?(n[t]=s,!0):a!==Ae&&Se(a,t)?(a[t]=s,!0):Se(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(r[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:a,appContext:n,propsOptions:r,type:o}},i){let c,g;return!!(s[i]||e!==Ae&&i[0]!=="$"&&Se(e,i)||Ka(t,i)||(c=r[0])&&Se(c,i)||Se(a,i)||Se(Ss,i)||Se(n.config.globalProperties,i)||(g=o.__cssModules)&&g[i])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Se(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function mr(e){return oe(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Ga=!0;function Bi(e){const t=br(e),s=e.proxy,a=e.ctx;Ga=!1,t.beforeCreate&&vr(t.beforeCreate,e,"bc");const{data:n,computed:r,methods:o,watch:i,provide:c,inject:g,created:p,beforeMount:d,mounted:f,beforeUpdate:u,updated:b,activated:h,deactivated:w,beforeDestroy:T,beforeUnmount:x,destroyed:S,unmounted:E,render:R,renderTracked:X,renderTriggered:J,errorCaptured:V,serverPrefetch:re,expose:Z,inheritAttrs:le,components:xe,directives:Me,filters:Ne}=t;if(g&&ji(g,a,null),o)for(const Q in o){const te=o[Q];ce(te)&&(a[Q]=te.bind(s))}if(n){const Q=n.call(s,s);Oe(Q)&&(e.data=xt(Q))}if(Ga=!0,r)for(const Q in r){const te=r[Q],be=ce(te)?te.bind(s,s):ce(te.get)?te.get.bind(s,s):wt,De=!ce(te)&&ce(te.set)?te.set.bind(s):wt,Le=G({get:be,set:De});Object.defineProperty(a,Q,{enumerable:!0,configurable:!0,get:()=>Le.value,set:we=>Le.value=we})}if(i)for(const Q in i)yr(i[Q],a,s,Q);if(c){const Q=ce(c)?c.call(s):c;Reflect.ownKeys(Q).forEach(te=>{qi(te,Q[te])})}p&&vr(p,e,"c");function ue(Q,te){oe(te)?te.forEach(be=>Q(be.bind(s))):te&&Q(te.bind(s))}if(ue(Ti,d),ue(os,f),ue(Ai,u),ue(Di,b),ue(Ci,h),ue($i,w),ue(Ni,V),ue(Ii,X),ue(Pi,J),ue(fr,x),ue(gr,E),ue(Ei,re),oe(Z))if(Z.length){const Q=e.exposed||(e.exposed={});Z.forEach(te=>{Object.defineProperty(Q,te,{get:()=>s[te],set:be=>s[te]=be,enumerable:!0})})}else e.exposed||(e.exposed={});R&&e.render===wt&&(e.render=R),le!=null&&(e.inheritAttrs=le),xe&&(e.components=xe),Me&&(e.directives=Me),re&&cr(e)}function ji(e,t,s=wt){oe(e)&&(e=qa(e));for(const a in e){const n=e[a];let r;Oe(n)?"default"in n?r=ia(n.from||a,n.default,!0):r=ia(n.from||a):r=ia(n),Ge(r)?Object.defineProperty(t,a,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[a]=r}}function vr(e,t,s){St(oe(e)?e.map(a=>a.bind(t.proxy)):e.bind(t.proxy),t,s)}function yr(e,t,s,a){let n=a.includes(".")?Or(s,a):()=>s[a];if(Be(e)){const r=t[e];ce(r)&&bt(n,r)}else if(ce(e))bt(n,e.bind(s));else if(Oe(e))if(oe(e))e.forEach(r=>yr(r,t,s,a));else{const r=ce(e.handler)?e.handler.bind(s):t[e.handler];ce(r)&&bt(n,r,e)}}function br(e){const t=e.type,{mixins:s,extends:a}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=e.appContext,i=r.get(t);let c;return i?c=i:!n.length&&!s&&!a?c=t:(c={},n.length&&n.forEach(g=>oa(c,g,o,!0)),oa(c,t,o)),Oe(t)&&r.set(t,c),c}function oa(e,t,s,a=!1){const{mixins:n,extends:r}=t;r&&oa(e,r,s,!0),n&&n.forEach(o=>oa(e,o,s,!0));for(const o in t)if(!(a&&o==="expose")){const i=Ui[o]||s&&s[o];e[o]=i?i(e[o],t[o]):t[o]}return e}const Ui={data:wr,props:_r,emits:_r,methods:Cs,computed:Cs,beforeCreate:ot,created:ot,beforeMount:ot,mounted:ot,beforeUpdate:ot,updated:ot,beforeDestroy:ot,beforeUnmount:ot,destroyed:ot,unmounted:ot,activated:ot,deactivated:ot,errorCaptured:ot,serverPrefetch:ot,components:Cs,directives:Cs,watch:zi,provide:wr,inject:Vi};function wr(e,t){return t?e?function(){return et(ce(e)?e.call(this,this):e,ce(t)?t.call(this,this):t)}:t:e}function Vi(e,t){return Cs(qa(e),qa(t))}function qa(e){if(oe(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ot(e,t){return e?[...new Set([].concat(e,t))]:t}function Cs(e,t){return e?et(Object.create(null),e,t):t}function _r(e,t){return e?oe(e)&&oe(t)?[...new Set([...e,...t])]:et(Object.create(null),mr(e),mr(t??{})):t}function zi(e,t){if(!e)return t;if(!t)return e;const s=et(Object.create(null),e);for(const a in t)s[a]=ot(e[a],t[a]);return s}function kr(){return{app:null,config:{isNativeTag:Cn,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ki=0;function Gi(e,t){return function(a,n=null){ce(a)||(a=et({},a)),n!=null&&!Oe(n)&&(n=null);const r=kr(),o=new WeakSet,i=[];let c=!1;const g=r.app={_uid:Ki++,_component:a,_props:n,_container:null,_context:r,_instance:null,version:El,get config(){return r.config},set config(p){},use(p,...d){return o.has(p)||(p&&ce(p.install)?(o.add(p),p.install(g,...d)):ce(p)&&(o.add(p),p(g,...d))),g},mixin(p){return r.mixins.includes(p)||r.mixins.push(p),g},component(p,d){return d?(r.components[p]=d,g):r.components[p]},directive(p,d){return d?(r.directives[p]=d,g):r.directives[p]},mount(p,d,f){if(!c){const u=g._ceVNode||ie(a,n);return u.appContext=r,f===!0?f="svg":f===!1&&(f=void 0),e(u,p,f),c=!0,g._container=p,p.__vue_app__=g,ga(u.component)}},onUnmount(p){i.push(p)},unmount(){c&&(St(i,g._instance,16),e(null,g._container),delete g._container.__vue_app__)},provide(p,d){return r.provides[p]=d,g},runWithContext(p){const d=is;is=g;try{return p()}finally{is=d}}};return g}}let is=null;function qi(e,t){if(st){let s=st.provides;const a=st.parent&&st.parent.provides;a===s&&(s=st.provides=Object.create(a)),s[e]=t}}function ia(e,t,s=!1){const a=xl();if(a||is){let n=is?is._context.provides:a?a.parent==null||a.ce?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return s&&ce(t)?t.call(a&&a.proxy):t}}const xr={},Sr=()=>Object.create(xr),Cr=e=>Object.getPrototypeOf(e)===xr;function Ji(e,t,s,a=!1){const n={},r=Sr();e.propsDefaults=Object.create(null),$r(e,t,n,r);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);s?e.props=a?n:ni(n):e.type.props?e.props=n:e.props=r,e.attrs=r}function Zi(e,t,s,a){const{props:n,attrs:r,vnode:{patchFlag:o}}=e,i=ke(n),[c]=e.propsOptions;let g=!1;if((a||o>0)&&!(o&16)){if(o&8){const p=e.vnode.dynamicProps;for(let d=0;d<p.length;d++){let f=p[d];if(la(e.emitsOptions,f))continue;const u=t[f];if(c)if(Se(r,f))u!==r[f]&&(r[f]=u,g=!0);else{const b=ht(f);n[b]=Ja(c,i,b,u,e,!1)}else u!==r[f]&&(r[f]=u,g=!0)}}}else{$r(e,t,n,r)&&(g=!0);let p;for(const d in i)(!t||!Se(t,d)&&((p=Bt(d))===d||!Se(t,p)))&&(c?s&&(s[d]!==void 0||s[p]!==void 0)&&(n[d]=Ja(c,i,d,void 0,e,!0)):delete n[d]);if(r!==i)for(const d in r)(!t||!Se(t,d))&&(delete r[d],g=!0)}g&&Et(e.attrs,"set","")}function $r(e,t,s,a){const[n,r]=e.propsOptions;let o=!1,i;if(t)for(let c in t){if(ps(c))continue;const g=t[c];let p;n&&Se(n,p=ht(c))?!r||!r.includes(p)?s[p]=g:(i||(i={}))[p]=g:la(e.emitsOptions,c)||(!(c in a)||g!==a[c])&&(a[c]=g,o=!0)}if(r){const c=ke(s),g=i||Ae;for(let p=0;p<r.length;p++){const d=r[p];s[d]=Ja(n,c,d,g[d],e,!Se(g,d))}}return o}function Ja(e,t,s,a,n,r){const o=e[s];if(o!=null){const i=Se(o,"default");if(i&&a===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&ce(c)){const{propsDefaults:g}=n;if(s in g)a=g[s];else{const p=Ds(n);a=g[s]=c.call(null,t),p()}}else a=c;n.ce&&n.ce._setProp(s,a)}o[0]&&(r&&!i?a=!1:o[1]&&(a===""||a===Bt(s))&&(a=!0))}return a}const Yi=new WeakMap;function Mr(e,t,s=!1){const a=s?Yi:t.propsCache,n=a.get(e);if(n)return n;const r=e.props,o={},i=[];let c=!1;if(!ce(e)){const p=d=>{c=!0;const[f,u]=Mr(d,t,!0);et(o,f),u&&i.push(...u)};!s&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!r&&!c)return Oe(e)&&a.set(e,Xt),Xt;if(oe(r))for(let p=0;p<r.length;p++){const d=ht(r[p]);Tr(d)&&(o[d]=Ae)}else if(r)for(const p in r){const d=ht(p);if(Tr(d)){const f=r[p],u=o[d]=oe(f)||ce(f)?{type:f}:et({},f),b=u.type;let h=!1,w=!0;if(oe(b))for(let T=0;T<b.length;++T){const x=b[T],S=ce(x)&&x.name;if(S==="Boolean"){h=!0;break}else S==="String"&&(w=!1)}else h=ce(b)&&b.name==="Boolean";u[0]=h,u[1]=w,(h||Se(u,"default"))&&i.push(d)}}const g=[o,i];return Oe(e)&&a.set(e,g),g}function Tr(e){return e[0]!=="$"&&!ps(e)}const Za=e=>e==="_"||e==="_ctx"||e==="$stable",Ya=e=>oe(e)?e.map($t):[$t(e)],Xi=(e,t,s)=>{if(t._n)return t;const a=We((...n)=>Ya(t(...n)),s);return a._c=!1,a},Ar=(e,t,s)=>{const a=e._ctx;for(const n in e){if(Za(n))continue;const r=e[n];if(ce(r))t[n]=Xi(n,r,a);else if(r!=null){const o=Ya(r);t[n]=()=>o}}},Dr=(e,t)=>{const s=Ya(t);e.slots.default=()=>s},Er=(e,t,s)=>{for(const a in t)(s||!Za(a))&&(e[a]=t[a])},Qi=(e,t,s)=>{const a=e.slots=Sr();if(e.vnode.shapeFlag&32){const n=t._;n?(Er(a,t,s),s&&Dn(a,"_",n,!0)):Ar(t,a)}else t&&Dr(e,t)},el=(e,t,s)=>{const{vnode:a,slots:n}=e;let r=!0,o=Ae;if(a.shapeFlag&32){const i=t._;i?s&&i===1?r=!1:Er(n,t,s):(r=!t.$stable,Ar(t,n)),o=t}else t&&(Dr(e,t),o={default:1});if(r)for(const i in n)!Za(i)&&o[i]==null&&delete n[i]},ut=pl;function tl(e){return sl(e)}function sl(e,t){const s=zs();s.__VUE__=!0;const{insert:a,remove:n,patchProp:r,createElement:o,createText:i,createComment:c,setText:g,setElementText:p,parentNode:d,nextSibling:f,setScopeId:u=wt,insertStaticContent:b}=e,h=(m,v,M,O=null,P=null,N=null,B=void 0,W=null,F=!!v.dynamicChildren)=>{if(m===v)return;m&&!As(m,v)&&(O=Ce(m),we(m,P,N,!0),m=null),v.patchFlag===-2&&(F=!1,v.dynamicChildren=null);const{type:H,ref:ee,shapeFlag:z}=v;switch(H){case ca:w(m,v,M,O);break;case Lt:T(m,v,M,O);break;case ua:m==null&&x(v,M,O,B);break;case de:xe(m,v,M,O,P,N,B,W,F);break;default:z&1?R(m,v,M,O,P,N,B,W,F):z&6?Me(m,v,M,O,P,N,B,W,F):(z&64||z&128)&&H.process(m,v,M,O,P,N,B,W,F,He)}ee!=null&&P?xs(ee,m&&m.ref,N,v||m,!v):ee==null&&m&&m.ref!=null&&xs(m.ref,null,N,m,!0)},w=(m,v,M,O)=>{if(m==null)a(v.el=i(v.children),M,O);else{const P=v.el=m.el;v.children!==m.children&&g(P,v.children)}},T=(m,v,M,O)=>{m==null?a(v.el=c(v.children||""),M,O):v.el=m.el},x=(m,v,M,O)=>{[m.el,m.anchor]=b(m.children,v,M,O,m.el,m.anchor)},S=({el:m,anchor:v},M,O)=>{let P;for(;m&&m!==v;)P=f(m),a(m,M,O),m=P;a(v,M,O)},E=({el:m,anchor:v})=>{let M;for(;m&&m!==v;)M=f(m),n(m),m=M;n(v)},R=(m,v,M,O,P,N,B,W,F)=>{v.type==="svg"?B="svg":v.type==="math"&&(B="mathml"),m==null?X(v,M,O,P,N,B,W,F):re(m,v,P,N,B,W,F)},X=(m,v,M,O,P,N,B,W)=>{let F,H;const{props:ee,shapeFlag:z,transition:Y,dirs:ae}=m;if(F=m.el=o(m.type,N,ee&&ee.is,ee),z&8?p(F,m.children):z&16&&V(m.children,F,null,O,P,Xa(m,N),B,W),ae&&Zt(m,null,O,"created"),J(F,m,m.scopeId,B,O),ee){for(const pe in ee)pe!=="value"&&!ps(pe)&&r(F,pe,null,ee[pe],N,O);"value"in ee&&r(F,"value",null,ee.value,N),(H=ee.onVnodeBeforeMount)&&Mt(H,O,m)}ae&&Zt(m,null,O,"beforeMount");const fe=al(P,Y);fe&&Y.beforeEnter(F),a(F,v,M),((H=ee&&ee.onVnodeMounted)||fe||ae)&&ut(()=>{H&&Mt(H,O,m),fe&&Y.enter(F),ae&&Zt(m,null,O,"mounted")},P)},J=(m,v,M,O,P)=>{if(M&&u(m,M),O)for(let N=0;N<O.length;N++)u(m,O[N]);if(P){let N=P.subTree;if(v===N||Wr(N.type)&&(N.ssContent===v||N.ssFallback===v)){const B=P.vnode;J(m,B,B.scopeId,B.slotScopeIds,P.parent)}}},V=(m,v,M,O,P,N,B,W,F=0)=>{for(let H=F;H<m.length;H++){const ee=m[H]=W?zt(m[H]):$t(m[H]);h(null,ee,v,M,O,P,N,B,W)}},re=(m,v,M,O,P,N,B)=>{const W=v.el=m.el;let{patchFlag:F,dynamicChildren:H,dirs:ee}=v;F|=m.patchFlag&16;const z=m.props||Ae,Y=v.props||Ae;let ae;if(M&&Yt(M,!1),(ae=Y.onVnodeBeforeUpdate)&&Mt(ae,M,v,m),ee&&Zt(v,m,M,"beforeUpdate"),M&&Yt(M,!0),(z.innerHTML&&Y.innerHTML==null||z.textContent&&Y.textContent==null)&&p(W,""),H?Z(m.dynamicChildren,H,W,M,O,Xa(v,P),N):B||te(m,v,W,null,M,O,Xa(v,P),N,!1),F>0){if(F&16)le(W,z,Y,M,P);else if(F&2&&z.class!==Y.class&&r(W,"class",null,Y.class,P),F&4&&r(W,"style",z.style,Y.style,P),F&8){const fe=v.dynamicProps;for(let pe=0;pe<fe.length;pe++){const ge=fe[pe],$e=z[ge],Re=Y[ge];(Re!==$e||ge==="value")&&r(W,ge,$e,Re,P,M)}}F&1&&m.children!==v.children&&p(W,v.children)}else!B&&H==null&&le(W,z,Y,M,P);((ae=Y.onVnodeUpdated)||ee)&&ut(()=>{ae&&Mt(ae,M,v,m),ee&&Zt(v,m,M,"updated")},O)},Z=(m,v,M,O,P,N,B)=>{for(let W=0;W<v.length;W++){const F=m[W],H=v[W],ee=F.el&&(F.type===de||!As(F,H)||F.shapeFlag&198)?d(F.el):M;h(F,H,ee,null,O,P,N,B,!0)}},le=(m,v,M,O,P)=>{if(v!==M){if(v!==Ae)for(const N in v)!ps(N)&&!(N in M)&&r(m,N,v[N],null,P,O);for(const N in M){if(ps(N))continue;const B=M[N],W=v[N];B!==W&&N!=="value"&&r(m,N,W,B,P,O)}"value"in M&&r(m,"value",v.value,M.value,P)}},xe=(m,v,M,O,P,N,B,W,F)=>{const H=v.el=m?m.el:i(""),ee=v.anchor=m?m.anchor:i("");let{patchFlag:z,dynamicChildren:Y,slotScopeIds:ae}=v;ae&&(W=W?W.concat(ae):ae),m==null?(a(H,M,O),a(ee,M,O),V(v.children||[],M,ee,P,N,B,W,F)):z>0&&z&64&&Y&&m.dynamicChildren?(Z(m.dynamicChildren,Y,M,P,N,B,W),(v.key!=null||P&&v===P.subTree)&&Pr(m,v,!0)):te(m,v,M,ee,P,N,B,W,F)},Me=(m,v,M,O,P,N,B,W,F)=>{v.slotScopeIds=W,m==null?v.shapeFlag&512?P.ctx.activate(v,M,O,B,F):Ne(v,M,O,P,N,B,F):K(m,v,F)},Ne=(m,v,M,O,P,N,B)=>{const W=m.component=kl(m,O,P);if(ur(m)&&(W.ctx.renderer=He),Sl(W,!1,B),W.asyncDep){if(P&&P.registerDep(W,ue,B),!m.el){const F=W.subTree=ie(Lt);T(null,F,v,M),m.placeholder=F.el}}else ue(W,m,v,M,P,N,B)},K=(m,v,M)=>{const O=v.component=m.component;if(fl(m,v,M))if(O.asyncDep&&!O.asyncResolved){Q(O,v,M);return}else O.next=v,O.update();else v.el=m.el,O.vnode=v},ue=(m,v,M,O,P,N,B)=>{const W=()=>{if(m.isMounted){let{next:z,bu:Y,u:ae,parent:fe,vnode:pe}=m;{const Ye=Ir(m);if(Ye){z&&(z.el=pe.el,Q(m,z,B)),Ye.asyncDep.then(()=>{m.isUnmounted||W()});return}}let ge=z,$e;Yt(m,!1),z?(z.el=pe.el,Q(m,z,B)):z=pe,Y&&Vs(Y),($e=z.props&&z.props.onVnodeBeforeUpdate)&&Mt($e,fe,z,pe),Yt(m,!0);const Re=Rr(m),Ve=m.subTree;m.subTree=Re,h(Ve,Re,d(Ve.el),Ce(Ve),m,P,N),z.el=Re.el,ge===null&&gl(m,Re.el),ae&&ut(ae,P),($e=z.props&&z.props.onVnodeUpdated)&&ut(()=>Mt($e,fe,z,pe),P)}else{let z;const{el:Y,props:ae}=v,{bm:fe,m:pe,parent:ge,root:$e,type:Re}=m,Ve=rs(v);Yt(m,!1),fe&&Vs(fe),!Ve&&(z=ae&&ae.onVnodeBeforeMount)&&Mt(z,ge,v),Yt(m,!0);{$e.ce&&$e.ce._def.shadowRoot!==!1&&$e.ce._injectChildStyle(Re);const Ye=m.subTree=Rr(m);h(null,Ye,M,O,m,P,N),v.el=Ye.el}if(pe&&ut(pe,P),!Ve&&(z=ae&&ae.onVnodeMounted)){const Ye=v;ut(()=>Mt(z,ge,Ye),P)}(v.shapeFlag&256||ge&&rs(ge.vnode)&&ge.vnode.shapeFlag&256)&&m.a&&ut(m.a,P),m.isMounted=!0,v=M=O=null}};m.scope.on();const F=m.effect=new Ln(W);m.scope.off();const H=m.update=F.run.bind(F),ee=m.job=F.runIfDirty.bind(F);ee.i=m,ee.id=m.uid,F.scheduler=()=>Ua(ee),Yt(m,!0),H()},Q=(m,v,M)=>{v.component=m;const O=m.vnode.props;m.vnode=v,m.next=null,Zi(m,v.props,O,M),el(m,v.children,M),_t(),rr(m),kt()},te=(m,v,M,O,P,N,B,W,F=!1)=>{const H=m&&m.children,ee=m?m.shapeFlag:0,z=v.children,{patchFlag:Y,shapeFlag:ae}=v;if(Y>0){if(Y&128){De(H,z,M,O,P,N,B,W,F);return}else if(Y&256){be(H,z,M,O,P,N,B,W,F);return}}ae&8?(ee&16&&Ee(H,P,N),z!==H&&p(M,z)):ee&16?ae&16?De(H,z,M,O,P,N,B,W,F):Ee(H,P,N,!0):(ee&8&&p(M,""),ae&16&&V(z,M,O,P,N,B,W,F))},be=(m,v,M,O,P,N,B,W,F)=>{m=m||Xt,v=v||Xt;const H=m.length,ee=v.length,z=Math.min(H,ee);let Y;for(Y=0;Y<z;Y++){const ae=v[Y]=F?zt(v[Y]):$t(v[Y]);h(m[Y],ae,M,null,P,N,B,W,F)}H>ee?Ee(m,P,N,!0,!1,z):V(v,M,O,P,N,B,W,F,z)},De=(m,v,M,O,P,N,B,W,F)=>{let H=0;const ee=v.length;let z=m.length-1,Y=ee-1;for(;H<=z&&H<=Y;){const ae=m[H],fe=v[H]=F?zt(v[H]):$t(v[H]);if(As(ae,fe))h(ae,fe,M,null,P,N,B,W,F);else break;H++}for(;H<=z&&H<=Y;){const ae=m[z],fe=v[Y]=F?zt(v[Y]):$t(v[Y]);if(As(ae,fe))h(ae,fe,M,null,P,N,B,W,F);else break;z--,Y--}if(H>z){if(H<=Y){const ae=Y+1,fe=ae<ee?v[ae].el:O;for(;H<=Y;)h(null,v[H]=F?zt(v[H]):$t(v[H]),M,fe,P,N,B,W,F),H++}}else if(H>Y)for(;H<=z;)we(m[H],P,N,!0),H++;else{const ae=H,fe=H,pe=new Map;for(H=fe;H<=Y;H++){const Xe=v[H]=F?zt(v[H]):$t(v[H]);Xe.key!=null&&pe.set(Xe.key,H)}let ge,$e=0;const Re=Y-fe+1;let Ve=!1,Ye=0;const at=new Array(Re);for(H=0;H<Re;H++)at[H]=0;for(H=ae;H<=z;H++){const Xe=m[H];if($e>=Re){we(Xe,P,N,!0);continue}let Qe;if(Xe.key!=null)Qe=pe.get(Xe.key);else for(ge=fe;ge<=Y;ge++)if(at[ge-fe]===0&&As(Xe,v[ge])){Qe=ge;break}Qe===void 0?we(Xe,P,N,!0):(at[Qe-fe]=H+1,Qe>=Ye?Ye=Qe:Ve=!0,h(Xe,v[Qe],M,null,P,N,B,W,F),$e++)}const fs=Ve?nl(at):Xt;for(ge=fs.length-1,H=Re-1;H>=0;H--){const Xe=fe+H,Qe=v[Xe],Wt=v[Xe+1],_=Xe+1<ee?Wt.el||Wt.placeholder:O;at[H]===0?h(null,Qe,M,_,P,N,B,W,F):Ve&&(ge<0||H!==fs[ge]?Le(Qe,M,_,2):ge--)}}},Le=(m,v,M,O,P=null)=>{const{el:N,type:B,transition:W,children:F,shapeFlag:H}=m;if(H&6){Le(m.component.subTree,v,M,O);return}if(H&128){m.suspense.move(v,M,O);return}if(H&64){B.move(m,v,M,He);return}if(B===de){a(N,v,M);for(let z=0;z<F.length;z++)Le(F[z],v,M,O);a(m.anchor,v,M);return}if(B===ua){S(m,v,M);return}if(O!==2&&H&1&&W)if(O===0)W.beforeEnter(N),a(N,v,M),ut(()=>W.enter(N),P);else{const{leave:z,delayLeave:Y,afterLeave:ae}=W,fe=()=>{m.ctx.isUnmounted?n(N):a(N,v,M)},pe=()=>{N._isLeaving&&N[Si](!0),z(N,()=>{fe(),ae&&ae()})};Y?Y(N,fe,pe):pe()}else a(N,v,M)},we=(m,v,M,O=!1,P=!1)=>{const{type:N,props:B,ref:W,children:F,dynamicChildren:H,shapeFlag:ee,patchFlag:z,dirs:Y,cacheIndex:ae}=m;if(z===-2&&(P=!1),W!=null&&(_t(),xs(W,null,M,m,!0),kt()),ae!=null&&(v.renderCache[ae]=void 0),ee&256){v.ctx.deactivate(m);return}const fe=ee&1&&Y,pe=!rs(m);let ge;if(pe&&(ge=B&&B.onVnodeBeforeUnmount)&&Mt(ge,v,m),ee&6)je(m.component,M,O);else{if(ee&128){m.suspense.unmount(M,O);return}fe&&Zt(m,null,v,"beforeUnmount"),ee&64?m.type.remove(m,v,M,He,O):H&&!H.hasOnce&&(N!==de||z>0&&z&64)?Ee(H,v,M,!1,!0):(N===de&&z&384||!P&&ee&16)&&Ee(F,v,M),O&&_e(m)}(pe&&(ge=B&&B.onVnodeUnmounted)||fe)&&ut(()=>{ge&&Mt(ge,v,m),fe&&Zt(m,null,v,"unmounted")},M)},_e=m=>{const{type:v,el:M,anchor:O,transition:P}=m;if(v===de){Te(M,O);return}if(v===ua){E(m);return}const N=()=>{n(M),P&&!P.persisted&&P.afterLeave&&P.afterLeave()};if(m.shapeFlag&1&&P&&!P.persisted){const{leave:B,delayLeave:W}=P,F=()=>B(M,N);W?W(m.el,N,F):F()}else N()},Te=(m,v)=>{let M;for(;m!==v;)M=f(m),n(m),m=M;n(v)},je=(m,v,M)=>{const{bum:O,scope:P,job:N,subTree:B,um:W,m:F,a:H}=m;Nr(F),Nr(H),O&&Vs(O),P.stop(),N&&(N.flags|=8,we(B,m,v,M)),W&&ut(W,v),ut(()=>{m.isUnmounted=!0},v)},Ee=(m,v,M,O=!1,P=!1,N=0)=>{for(let B=N;B<m.length;B++)we(m[B],v,M,O,P)},Ce=m=>{if(m.shapeFlag&6)return Ce(m.component.subTree);if(m.shapeFlag&128)return m.suspense.next();const v=f(m.anchor||m.el),M=v&&v[ki];return M?f(M):v};let se=!1;const Ke=(m,v,M)=>{m==null?v._vnode&&we(v._vnode,null,null,!0):h(v._vnode||null,m,v,null,null,null,M),v._vnode=m,se||(se=!0,rr(),or(),se=!1)},He={p:h,um:we,m:Le,r:_e,mt:Ne,mc:V,pc:te,pbc:Z,n:Ce,o:e};return{render:Ke,hydrate:void 0,createApp:Gi(Ke)}}function Xa({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Yt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function al(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Pr(e,t,s=!1){const a=e.children,n=t.children;if(oe(a)&&oe(n))for(let r=0;r<a.length;r++){const o=a[r];let i=n[r];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=n[r]=zt(n[r]),i.el=o.el),!s&&i.patchFlag!==-2&&Pr(o,i)),i.type===ca&&i.patchFlag!==-1&&(i.el=o.el),i.type===Lt&&!i.el&&(i.el=o.el)}}function nl(e){const t=e.slice(),s=[0];let a,n,r,o,i;const c=e.length;for(a=0;a<c;a++){const g=e[a];if(g!==0){if(n=s[s.length-1],e[n]<g){t[a]=n,s.push(a);continue}for(r=0,o=s.length-1;r<o;)i=r+o>>1,e[s[i]]<g?r=i+1:o=i;g<e[s[r]]&&(r>0&&(t[a]=s[r-1]),s[r]=a)}}for(r=s.length,o=s[r-1];r-- >0;)s[r]=o,o=t[o];return s}function Ir(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ir(t)}function Nr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const rl=Symbol.for("v-scx"),ol=()=>ia(rl);function bt(e,t,s){return Lr(e,t,s)}function Lr(e,t,s=Ae){const{immediate:a,deep:n,flush:r,once:o}=s,i=et({},s),c=t&&a||!t&&r!=="post";let g;if(Es){if(r==="sync"){const u=ol();g=u.__watcherHandles||(u.__watcherHandles=[])}else if(!c){const u=()=>{};return u.stop=wt,u.resume=wt,u.pause=wt,u}}const p=st;i.call=(u,b,h)=>St(u,p,b,h);let d=!1;r==="post"?i.scheduler=u=>{ut(u,p&&p.suspense)}:r!=="sync"&&(d=!0,i.scheduler=(u,b)=>{b?u():Ua(u)}),i.augmentJob=u=>{t&&(u.flags|=4),d&&(u.flags|=2,p&&(u.id=p.uid,u.i=p))};const f=pi(e,t,i);return Es&&(g?g.push(f):c&&f()),f}function il(e,t,s){const a=this.proxy,n=Be(e)?e.includes(".")?Or(a,e):()=>a[e]:e.bind(a,a);let r;ce(t)?r=t:(r=t.handler,s=t);const o=Ds(this),i=Lr(n,r.bind(a),s);return o(),i}function Or(e,t){const s=t.split(".");return()=>{let a=e;for(let n=0;n<s.length&&a;n++)a=a[s[n]];return a}}const ll=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ht(t)}Modifiers`]||e[`${Bt(t)}Modifiers`];function cl(e,t,...s){if(e.isUnmounted)return;const a=e.vnode.props||Ae;let n=s;const r=t.startsWith("update:"),o=r&&ll(a,t.slice(7));o&&(o.trim&&(n=s.map(p=>Be(p)?p.trim():p)),o.number&&(n=s.map(Aa)));let i,c=a[i=Ta(t)]||a[i=Ta(ht(t))];!c&&r&&(c=a[i=Ta(Bt(t))]),c&&St(c,e,6,n);const g=a[i+"Once"];if(g){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,St(g,e,6,n)}}function Hr(e,t,s=!1){const a=t.emitsCache,n=a.get(e);if(n!==void 0)return n;const r=e.emits;let o={},i=!1;if(!ce(e)){const c=g=>{const p=Hr(g,t,!0);p&&(i=!0,et(o,p))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!r&&!i?(Oe(e)&&a.set(e,null),null):(oe(r)?r.forEach(c=>o[c]=null):et(o,r),Oe(e)&&a.set(e,o),o)}function la(e,t){return!e||!Ws(t)?!1:(t=t.slice(2).replace(/Once$/,""),Se(e,t[0].toLowerCase()+t.slice(1))||Se(e,Bt(t))||Se(e,t))}function sm(){}function Rr(e){const{type:t,vnode:s,proxy:a,withProxy:n,propsOptions:[r],slots:o,attrs:i,emit:c,render:g,renderCache:p,props:d,data:f,setupState:u,ctx:b,inheritAttrs:h}=e,w=na(e);let T,x;try{if(s.shapeFlag&4){const E=n||a,R=E;T=$t(g.call(R,E,p,d,u,f,b)),x=i}else{const E=t;T=$t(E.length>1?E(d,{attrs:i,slots:o,emit:c}):E(d,null)),x=t.props?i:ul(i)}}catch(E){$s.length=0,ta(E,e,1),T=ie(Lt)}let S=T;if(x&&h!==!1){const E=Object.keys(x),{shapeFlag:R}=S;E.length&&R&7&&(r&&E.some(Ca)&&(x=dl(x,r)),S=ls(S,x,!1,!0))}return s.dirs&&(S=ls(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(s.dirs):s.dirs),s.transition&&Va(S,s.transition),T=S,na(w),T}const ul=e=>{let t;for(const s in e)(s==="class"||s==="style"||Ws(s))&&((t||(t={}))[s]=e[s]);return t},dl=(e,t)=>{const s={};for(const a in e)(!Ca(a)||!(a.slice(9)in t))&&(s[a]=e[a]);return s};function fl(e,t,s){const{props:a,children:n,component:r}=e,{props:o,children:i,patchFlag:c}=t,g=r.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return a?Fr(a,o,g):!!o;if(c&8){const p=t.dynamicProps;for(let d=0;d<p.length;d++){const f=p[d];if(o[f]!==a[f]&&!la(g,f))return!0}}}else return(n||i)&&(!i||!i.$stable)?!0:a===o?!1:a?o?Fr(a,o,g):!0:!!o;return!1}function Fr(e,t,s){const a=Object.keys(t);if(a.length!==Object.keys(e).length)return!0;for(let n=0;n<a.length;n++){const r=a[n];if(t[r]!==e[r]&&!la(s,r))return!0}return!1}function gl({vnode:e,parent:t},s){for(;t;){const a=t.subTree;if(a.suspense&&a.suspense.activeBranch===e&&(a.el=e.el),a===e)(e=t.vnode).el=s,t=t.parent;else break}}const Wr=e=>e.__isSuspense;function pl(e,t){t&&t.pendingBranch?oe(e)?t.effects.push(...e):t.effects.push(e):_i(e)}const de=Symbol.for("v-fgt"),ca=Symbol.for("v-txt"),Lt=Symbol.for("v-cmt"),ua=Symbol.for("v-stc"),$s=[];let dt=null;function $(e=!1){$s.push(dt=e?null:[])}function hl(){$s.pop(),dt=$s[$s.length-1]||null}let Ms=1;function Br(e,t=!1){Ms+=e,e<0&&dt&&t&&(dt.hasOnce=!0)}function jr(e){return e.dynamicChildren=Ms>0?dt||Xt:null,hl(),Ms>0&&dt&&dt.push(e),e}function D(e,t,s,a,n,r){return jr(l(e,t,s,a,n,r,!0))}function qe(e,t,s,a,n){return jr(ie(e,t,s,a,n,!0))}function Ts(e){return e?e.__v_isVNode===!0:!1}function As(e,t){return e.type===t.type&&e.key===t.key}const Ur=({key:e})=>e??null,da=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Be(e)||Ge(e)||ce(e)?{i:Ze,r:e,k:t,f:!!s}:e:null);function l(e,t=null,s=null,a=0,n=null,r=e===de?0:1,o=!1,i=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ur(t),ref:t&&da(t),scopeId:lr,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:a,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Ze};return i?(Qa(c,s),r&128&&e.normalize(c)):s&&(c.shapeFlag|=Be(s)?8:16),Ms>0&&!o&&dt&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&dt.push(c),c}const ie=ml;function ml(e,t=null,s=null,a=0,n=null,r=!1){if((!e||e===Hi)&&(e=Lt),Ts(e)){const i=ls(e,t,!0);return s&&Qa(i,s),Ms>0&&!r&&dt&&(i.shapeFlag&6?dt[dt.indexOf(e)]=i:dt.push(i)),i.patchFlag=-2,i}if(Dl(e)&&(e=e.__vccOpts),t){t=vl(t);let{class:i,style:c}=t;i&&!Be(i)&&(t.class=ve(i)),Oe(c)&&(Ba(c)&&!oe(c)&&(c=et({},c)),t.style=Dt(c))}const o=Be(e)?1:Wr(e)?128:xi(e)?64:Oe(e)?4:ce(e)?2:0;return l(e,t,s,a,n,o,r,!0)}function vl(e){return e?Ba(e)||Cr(e)?et({},e):e:null}function ls(e,t,s=!1,a=!1){const{props:n,ref:r,patchFlag:o,children:i,transition:c}=e,g=t?bl(n||{},t):n,p={__v_isVNode:!0,__v_skip:!0,type:e.type,props:g,key:g&&Ur(g),ref:t&&t.ref?s&&r?oe(r)?r.concat(da(t)):[r,da(t)]:da(t):r,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==de?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ls(e.ssContent),ssFallback:e.ssFallback&&ls(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&a&&Va(p,c.clone(p)),p}function ye(e=" ",t=0){return ie(ca,null,e,t)}function yl(e,t){const s=ie(ua,null,e);return s.staticCount=t,s}function q(e="",t=!1){return t?($(),qe(Lt,null,e)):ie(Lt,null,e)}function $t(e){return e==null||typeof e=="boolean"?ie(Lt):oe(e)?ie(de,null,e.slice()):Ts(e)?zt(e):ie(ca,null,String(e))}function zt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ls(e)}function Qa(e,t){let s=0;const{shapeFlag:a}=e;if(t==null)t=null;else if(oe(t))s=16;else if(typeof t=="object")if(a&65){const n=t.default;n&&(n._c&&(n._d=!1),Qa(e,n()),n._c&&(n._d=!0));return}else{s=32;const n=t._;!n&&!Cr(t)?t._ctx=Ze:n===3&&Ze&&(Ze.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ce(t)?(t={default:t,_ctx:Ze},s=32):(t=String(t),a&64?(s=16,t=[ye(t)]):s=8);e.children=t,e.shapeFlag|=s}function bl(...e){const t={};for(let s=0;s<e.length;s++){const a=e[s];for(const n in a)if(n==="class")t.class!==a.class&&(t.class=ve([t.class,a.class]));else if(n==="style")t.style=Dt([t.style,a.style]);else if(Ws(n)){const r=t[n],o=a[n];o&&r!==o&&!(oe(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=a[n])}return t}function Mt(e,t,s,a=null){St(e,t,7,[s,a])}const wl=kr();let _l=0;function kl(e,t,s){const a=e.type,n=(t?t.appContext:e.appContext)||wl,r={uid:_l++,vnode:e,type:a,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ho(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mr(a,n),emitsOptions:Hr(a,n),emit:null,emitted:null,propsDefaults:Ae,inheritAttrs:a.inheritAttrs,ctx:Ae,data:Ae,props:Ae,attrs:Ae,slots:Ae,refs:Ae,setupState:Ae,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=cl.bind(null,r),e.ce&&e.ce(r),r}let st=null;const xl=()=>st||Ze;let fa,en;{const e=zs(),t=(s,a)=>{let n;return(n=e[s])||(n=e[s]=[]),n.push(a),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};fa=t("__VUE_INSTANCE_SETTERS__",s=>st=s),en=t("__VUE_SSR_SETTERS__",s=>Es=s)}const Ds=e=>{const t=st;return fa(e),e.scope.on(),()=>{e.scope.off(),fa(t)}},Vr=()=>{st&&st.scope.off(),fa(null)};function zr(e){return e.vnode.shapeFlag&4}let Es=!1;function Sl(e,t=!1,s=!1){t&&en(t);const{props:a,children:n}=e.vnode,r=zr(e);Ji(e,a,r,t),Qi(e,n,s||t);const o=r?Cl(e,t):void 0;return t&&en(!1),o}function Cl(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Wi);const{setup:a}=s;if(a){_t();const n=e.setupContext=a.length>1?Ml(e):null,r=Ds(e),o=ss(a,e,0,[e.props,n]),i=Mn(o);if(kt(),r(),(i||e.sp)&&!rs(e)&&cr(e),i){if(o.then(Vr,Vr),t)return o.then(c=>{Kr(e,c)}).catch(c=>{ta(c,e,0)});e.asyncDep=o}else Kr(e,o)}else Gr(e)}function Kr(e,t,s){ce(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Oe(t)&&(e.setupState=er(t)),Gr(e)}function Gr(e,t,s){const a=e.type;e.render||(e.render=a.render||wt);{const n=Ds(e);_t();try{Bi(e)}finally{kt(),n()}}}const $l={get(e,t){return tt(e,"get",""),e[t]}};function Ml(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,$l),slots:e.slots,emit:e.emit,expose:t}}function ga(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(er(ri(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Ss)return Ss[s](e)},has(t,s){return s in t||s in Ss}})):e.proxy}const Tl=/(?:^|[-_])(\w)/g,Al=e=>e.replace(Tl,t=>t.toUpperCase()).replace(/[-_]/g,"");function qr(e,t=!0){return ce(e)?e.displayName||e.name:e.name||t&&e.__name}function Jr(e,t,s=!1){let a=qr(t);if(!a&&t.__file){const n=t.__file.match(/([^/\\]+)\.\w+$/);n&&(a=n[1])}if(!a&&e&&e.parent){const n=r=>{for(const o in r)if(r[o]===t)return o};a=n(e.components||e.parent.type.components)||n(e.appContext.components)}return a?Al(a):s?"App":"Anonymous"}function Dl(e){return ce(e)&&"__vccOpts"in e}const G=(e,t)=>fi(e,t,Es);function ft(e,t,s){const a=arguments.length;return a===2?Oe(t)&&!oe(t)?Ts(t)?ie(e,null,[t]):ie(e,t):ie(e,null,t):(a>3?s=Array.prototype.slice.call(arguments,2):a===3&&Ts(s)&&(s=[s]),ie(e,t,s))}const El="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tn;const Zr=typeof window<"u"&&window.trustedTypes;if(Zr)try{tn=Zr.createPolicy("vue",{createHTML:e=>e})}catch{}const Yr=tn?e=>tn.createHTML(e):e=>e,Pl="http://www.w3.org/2000/svg",Il="http://www.w3.org/1998/Math/MathML",Ot=typeof document<"u"?document:null,Xr=Ot&&Ot.createElement("template"),Nl={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,a)=>{const n=t==="svg"?Ot.createElementNS(Pl,e):t==="mathml"?Ot.createElementNS(Il,e):s?Ot.createElement(e,{is:s}):Ot.createElement(e);return e==="select"&&a&&a.multiple!=null&&n.setAttribute("multiple",a.multiple),n},createText:e=>Ot.createTextNode(e),createComment:e=>Ot.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Ot.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,a,n,r){const o=s?s.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),s),!(n===r||!(n=n.nextSibling)););else{Xr.innerHTML=Yr(a==="svg"?`<svg>${e}</svg>`:a==="mathml"?`<math>${e}</math>`:e);const i=Xr.content;if(a==="svg"||a==="mathml"){const c=i.firstChild;for(;c.firstChild;)i.appendChild(c.firstChild);i.removeChild(c)}t.insertBefore(i,s)}return[o?o.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Ll=Symbol("_vtc");function Ol(e,t,s){const a=e[Ll];a&&(t=(t?[t,...a]:[...a]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const pa=Symbol("_vod"),Qr=Symbol("_vsh"),ha={name:"show",beforeMount(e,{value:t},{transition:s}){e[pa]=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):Ps(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:a}){!t!=!s&&(a?t?(a.beforeEnter(e),Ps(e,!0),a.enter(e)):a.leave(e,()=>{Ps(e,!1)}):Ps(e,t))},beforeUnmount(e,{value:t}){Ps(e,t)}};function Ps(e,t){e.style.display=t?e[pa]:"none",e[Qr]=!t}const Hl=Symbol(""),Rl=/(^|;)\s*display\s*:/;function Fl(e,t,s){const a=e.style,n=Be(s);let r=!1;if(s&&!n){if(t)if(Be(t))for(const o of t.split(";")){const i=o.slice(0,o.indexOf(":")).trim();s[i]==null&&ma(a,i,"")}else for(const o in t)s[o]==null&&ma(a,o,"");for(const o in s)o==="display"&&(r=!0),ma(a,o,s[o])}else if(n){if(t!==s){const o=a[Hl];o&&(s+=";"+o),a.cssText=s,r=Rl.test(s)}}else t&&e.removeAttribute("style");pa in e&&(e[pa]=r?a.display:"",e[Qr]&&(a.display="none"))}const eo=/\s*!important$/;function ma(e,t,s){if(oe(s))s.forEach(a=>ma(e,t,a));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const a=Wl(e,t);eo.test(s)?e.setProperty(Bt(a),s.replace(eo,""),"important"):e[a]=s}}const to=["Webkit","Moz","ms"],sn={};function Wl(e,t){const s=sn[t];if(s)return s;let a=ht(t);if(a!=="filter"&&a in e)return sn[t]=a;a=Us(a);for(let n=0;n<to.length;n++){const r=to[n]+a;if(r in e)return sn[t]=r}return t}const so="http://www.w3.org/1999/xlink";function ao(e,t,s,a,n,r=Oo(t)){a&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(so,t.slice(6,t.length)):e.setAttributeNS(so,t,s):s==null||r&&!Pn(s)?e.removeAttribute(t):e.setAttribute(t,r?"":At(s)?String(s):s)}function no(e,t,s,a,n){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Yr(s):s);return}const r=e.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const i=r==="OPTION"?e.getAttribute("value")||"":e.value,c=s==null?e.type==="checkbox"?"on":"":String(s);(i!==c||!("_value"in e))&&(e.value=c),s==null&&e.removeAttribute(t),e._value=s;return}let o=!1;if(s===""||s==null){const i=typeof e[t];i==="boolean"?s=Pn(s):s==null&&i==="string"?(s="",o=!0):i==="number"&&(s=0,o=!0)}try{e[t]=s}catch{}o&&e.removeAttribute(n||t)}function cs(e,t,s,a){e.addEventListener(t,s,a)}function Bl(e,t,s,a){e.removeEventListener(t,s,a)}const ro=Symbol("_vei");function jl(e,t,s,a,n=null){const r=e[ro]||(e[ro]={}),o=r[t];if(a&&o)o.value=a;else{const[i,c]=Ul(t);if(a){const g=r[t]=Kl(a,n);cs(e,i,g,c)}else o&&(Bl(e,i,o,c),r[t]=void 0)}}const oo=/(?:Once|Passive|Capture)$/;function Ul(e){let t;if(oo.test(e)){t={};let a;for(;a=e.match(oo);)e=e.slice(0,e.length-a[0].length),t[a[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Bt(e.slice(2)),t]}let an=0;const Vl=Promise.resolve(),zl=()=>an||(Vl.then(()=>an=0),an=Date.now());function Kl(e,t){const s=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=s.attached)return;St(Gl(a,s.value),t,5,[a])};return s.value=e,s.attached=zl(),s}function Gl(e,t){if(oe(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(a=>n=>!n._stopped&&a&&a(n))}else return t}const io=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,ql=(e,t,s,a,n,r)=>{const o=n==="svg";t==="class"?Ol(e,a,o):t==="style"?Fl(e,s,a):Ws(t)?Ca(t)||jl(e,t,s,a,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Jl(e,t,a,o))?(no(e,t,a),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ao(e,t,a,o,r,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Be(a))?no(e,ht(t),a,r,t):(t==="true-value"?e._trueValue=a:t==="false-value"&&(e._falseValue=a),ao(e,t,a,o))};function Jl(e,t,s,a){if(a)return!!(t==="innerHTML"||t==="textContent"||t in e&&io(t)&&ce(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return io(t)&&Be(s)?!1:t in e}const lo=e=>{const t=e.props["onUpdate:modelValue"]||!1;return oe(t)?s=>Vs(t,s):t};function Zl(e){e.target.composing=!0}function co(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const nn=Symbol("_assign"),Yl={created(e,{modifiers:{lazy:t,trim:s,number:a}},n){e[nn]=lo(n);const r=a||n.props&&n.props.type==="number";cs(e,t?"change":"input",o=>{if(o.target.composing)return;let i=e.value;s&&(i=i.trim()),r&&(i=Aa(i)),e[nn](i)}),s&&cs(e,"change",()=>{e.value=e.value.trim()}),t||(cs(e,"compositionstart",Zl),cs(e,"compositionend",co),cs(e,"change",co))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:a,trim:n,number:r}},o){if(e[nn]=lo(o),e.composing)return;const i=(r||e.type==="number")&&!/^0\d/.test(e.value)?Aa(e.value):e.value,c=t??"";i!==c&&(document.activeElement===e&&e.type!=="range"&&(a&&t===s||n&&e.value.trim()===c)||(e.value=c))}},Xl=["ctrl","shift","alt","meta"],Ql={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Xl.some(s=>e[`${s}Key`]&&!t.includes(s))},va=(e,t)=>{const s=e._withMods||(e._withMods={}),a=t.join(".");return s[a]||(s[a]=(n,...r)=>{for(let o=0;o<t.length;o++){const i=Ql[t[o]];if(i&&i(n,t))return}return e(n,...r)})},ec={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},tc=(e,t)=>{const s=e._withKeys||(e._withKeys={}),a=t.join(".");return s[a]||(s[a]=n=>{if(!("key"in n))return;const r=Bt(n.key);if(t.some(o=>o===r||ec[o]===r))return e(n)})},sc=et({patchProp:ql},Nl);let uo;function ac(){return uo||(uo=tl(sc))}const nc=(...e)=>{const t=ac().createApp(...e),{mount:s}=t;return t.mount=a=>{const n=oc(a);if(!n)return;const r=t._component;!ce(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,rc(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function rc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function oc(e){return Be(e)?document.querySelector(e):e}const ic=Ie({name:"NcAppContent",props:{appName:{type:String,default:""},showNavigation:{type:Boolean,default:!0}},setup(e,{slots:t,attrs:s}){return()=>{const a=e.showNavigation!==!1,n={...s,class:[s.class,"app-content",a?null:"app-content--navigation-hidden"]},r={class:"app-content__navigation","aria-label":e.appName||"App navigation","aria-hidden":a?"false":"true"};return ft("div",n,[ft("aside",r,t.navigation?t.navigation():[]),ft("section",{class:"app-content__main",role:"main"},t.default?t.default():[])])}}}),lc=Ie({name:"NcAppNavigation",setup(e,{slots:t,attrs:s}){return()=>{const a={...s,class:[s.class,"app-navigation"]};"role"in a||(a.role="navigation");const n=[];return t.actions&&n.push(ft("div",{class:"app-navigation__actions"},t.actions())),t.default&&n.push(...t.default()),ft("nav",a,n)}}}),gt=Ie({name:"NcButton",props:{type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t,slots:s,attrs:a}){return()=>{const n={...a,class:[a.class,"btn",e.type],disabled:e.disabled,onClick:()=>t("click")};return"type"in n||(n.type="button"),ft("button",n,s.default?s.default():[])}}}),ya=Ie({name:"NcEmptyContent",props:{name:{type:String,default:""},description:{type:String,default:""}},setup(e,{attrs:t}){return()=>ft("div",{...t,class:[t.class,"card empty"]},[ft("div",{class:"value"},e.name),ft("div",{class:"hint"},e.description)])}}),ba=Ie({name:"NcCheckboxRadioSwitch",props:{type:{type:String,default:"checkbox"},name:{type:String,default:""},checked:{type:Boolean,default:!1}},emits:["update:checked"],setup(e,{emit:t,slots:s,attrs:a}){const n=o=>{var i;return t("update:checked",!!((i=o==null?void 0:o.target)!=null&&i.checked))},r={...a,class:[a.class,"nc-checkbox-radio-switch"]};return()=>ft("label",r,[ft("input",{type:e.type,name:e.name,checked:e.checked,onInput:n}),ft("span",{},s.default?s.default():[])])}}),cc=Ie({name:"NcLoadingIcon",props:{size:{type:[String,Number],default:16}},setup(e,{attrs:t}){return()=>ft("span",{...t,class:[t.class,"nc-loading-icon"],style:`width:${e.size}px;height:${e.size}px;border:2px solid var(--line);border-top-color:var(--brand);border-radius:50%;display:inline-block;animation:spin 1s linear infinite`})}});function rn(e){if(!e)return null;const t=window.devicePixelRatio||1,s=e.getBoundingClientRect();if(s.width<2||s.height<2)return null;const a=Math.floor(s.width*t),n=Math.floor(s.height*t);e.width!==a&&(e.width=a),e.height!==n&&(e.height=n);const r=e.getContext("2d");return r?(r.setTransform(t,0,0,t,0,0),r):null}function fo(e){const t=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(e||"");return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function uc(e){const s=Math.pow((g=>g<0?0:g>1?1:g)(e),.6),a=fo("#e0f2fe"),n=fo("#7c3aed");if(!a||!n)return"#7c3aed";const r=(g,p,d)=>Math.round(g+(p-g)*d),o=r(a.r,n.r,s),i=r(a.g,n.g,s),c=r(a.b,n.b,s);return`rgb(${o}, ${i}, ${c})`}const go=Ie({__name:"PieChart",props:{data:{},colorsById:{},colorsByName:{}},setup(e){const t=e,s=ne(null);function a(){const n=t.data,r=s.value;if(!r||!n)return;const o=rn(r);if(!o)return;const i=r.clientWidth,c=r.clientHeight,g=i/2,p=c/2,d=Math.min(i,c)*.35,f=n.data||[],u=n.labels||[],b=n.ids||[],h=n.colors||[],w=[];for(let V=0;V<f.length;V++)(Number(f[V])||0)>0&&w.push(V);if(o.clearRect(0,0,i,c),w.length===0)return;const T=w.map(V=>Number(f[V])||0),x=w.map(V=>String(u[V]||"")),S=w.map(V=>String(b[V]||"")),E=w.map(V=>h[V]),R=T.reduce((V,re)=>V+Math.max(0,re),0)||1;let X=-Math.PI/2;o.lineWidth=1,o.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue("--line").trim()||"#e5e7eb";const J=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"];T.forEach((V,re)=>{var _e,Te;const Z=Math.max(0,V)/R,le=X+Z*2*Math.PI,xe=String((x==null?void 0:x[re])||""),Me=String((S==null?void 0:S[re])||""),Ne=E[re],K=(_e=t.colorsById)==null?void 0:_e[Me],ue=(Te=t.colorsByName)==null?void 0:Te[xe];let Q=K||ue||Ne||J[re%J.length];o.beginPath(),o.moveTo(g,p),o.arc(g,p,d,X,le),o.closePath(),o.fillStyle=Q,o.fill(),o.stroke();const te=(X+le)/2,be=g+Math.cos(te)*(d+12),De=p+Math.sin(te)*(d+12);o.save(),o.font="12px ui-sans-serif,system-ui",o.fillStyle="#ffffff",o.strokeStyle="rgba(0,0,0,0.55)",o.lineWidth=3,o.textAlign="center",o.textBaseline="middle";const Le=Math.max(0,Number(V)||0)/R*100,we=`${x!=null&&x[re]?x[re]+" ":""}${Number(V).toFixed(2)}h  ${Le.toFixed(1)}%`;o.strokeText(we,be,De),o.fillText(we,be,De),o.restore(),X=le})}return os(()=>{a(),window.addEventListener("resize",a)}),bt(()=>t.data,()=>a(),{deep:!0}),bt(()=>t.colorsById,()=>a(),{deep:!0}),(n,r)=>($(),D("canvas",{ref_key:"cv",ref:s,class:"chart"},null,512))}}),po=Ie({__name:"StackedBars",props:{stacked:{},legacy:{},colorsById:{}},setup(e){const t=e,s=ne(null);function a(h,w,T,x,S){h.save(),S!=null&&S.font&&(h.font=S.font),S!=null&&S.align&&(h.textAlign=S.align),S!=null&&S.baseline&&(h.textBaseline=S.baseline),h.lineWidth=3,h.strokeStyle="rgba(0,0,0,0.55)",h.strokeText(w,T,x),h.fillStyle="#ffffff",h.fillText(w,T,x),h.restore()}function n(h){const w=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(h||"");return w?{r:parseInt(w[1],16),g:parseInt(w[2],16),b:parseInt(w[3],16)}:null}function r(h,w){const T=n(h);return T&&(.2126*T.r+.7152*T.g+.0722*T.b)/255<.55?"#ffffff":w}function o(h){const w=Math.max(0,Number(h)||0);return(Math.round(w*10)/10).toFixed(1)}function i(h,w=.5){const T=n(h);if(!T)return h;const x=Math.max(0,Math.min(1,w)),S=Math.round(T.r+(255-T.r)*x),E=Math.round(T.g+(255-T.g)*x),R=Math.round(T.b+(255-T.b)*x);return`rgb(${S},${E},${R})`}function c(h,w=.5){const T=n(h);if(!T)return h;const x=Math.max(0,Math.min(1,w)),S=Math.round(T.r*(1-x)),E=Math.round(T.g*(1-x)),R=Math.round(T.b*(1-x));return`rgb(${S},${E},${R})`}function g(h,w){const{x:T,y:x,width:S,height:E,baseColor:R}=w,X=Math.min(S*.25,6),J=T+X,V=Math.max(2,S-X*2),re=i(R,.4),Z=c(R,.35);h.save(),h.fillStyle=re,h.globalAlpha=.18,h.fillRect(J,x,V,E),h.restore(),h.save(),h.strokeStyle=Z,h.lineWidth=1.5,h.setLineDash([4,3]),h.strokeRect(J,x,V,E),h.restore()}function p(){var Le,we;const h=s.value;if(!h)return;const w=rn(h);if(!w)return;const T=h.clientWidth,x=h.clientHeight,S=28,E=S*1.4,R=x-S,X=T-S,J=getComputedStyle(document.documentElement).getPropertyValue("--line").trim()||"#e5e7eb",V=getComputedStyle(document.documentElement).getPropertyValue("--fg").trim()||"#0f172a";w.clearRect(0,0,T,x),w.strokeStyle=J,w.lineWidth=1,w.beginPath(),w.moveTo(E,R),w.lineTo(X,R),w.moveTo(E,R),w.lineTo(E,S),w.stroke();const re=t.stacked;if(re&&re.labels&&re.series){let _e=re.labels||[],Te=re.series||[];const je=f(_e,Te);_e=je.labels,Te=je.series;const Ee=_e.map((N,B)=>Te.reduce((W,F)=>{var H;return W+Math.max(0,Number(((H=F.data)==null?void 0:H[B])||0))},0)),Ce=_e.map((N,B)=>Te.reduce((W,F)=>{var H;return W+Math.max(0,Number(((H=F.forecast)==null?void 0:H[B])||0))},0)),se=Ee.map((N,B)=>N+Ce[B]),Ke=Math.max(1,...se),He=_e.length||1,Ue=8,m=Math.max(6,(X-E-Ue*(He+1))/He),v=(R-S)/Ke;let M=0,O=0;_e.forEach((N,B)=>{const W=E+Ue+B*(m+Ue);let F=R,H=0;Te.forEach(pe=>{var Ve;const ge=Math.max(0,Number(((Ve=pe.data)==null?void 0:Ve[B])||0)),$e=ge*v;F-=$e;const Re=t.colorsById[pe.id]||pe.color||"#93c5fd";if($e>.5&&(w.fillStyle=Re,w.fillRect(W,F,m,$e),$e>14&&m>22&&ge>.01)){const Ye=o(ge);w.fillStyle=r(Re,V),w.font="11px ui-sans-serif,system-ui";const at=w.measureText(Ye).width;w.fillText(Ye,W+m/2-at/2,F+$e/2+4)}H+=ge});let z=F,Y=0;Te.forEach(pe=>{var Ve;const ge=Math.max(0,Number(((Ve=pe.forecast)==null?void 0:Ve[B])||0));if(ge<=0)return;const $e=ge*v;if(z-=$e,Y+=ge,$e<=.5)return;const Re=t.colorsById[pe.id]||pe.color||"#93c5fd";g(w,{x:W,y:z,width:m,height:$e,baseColor:Re})}),M+=H,O+=Y,w.fillStyle=V,w.font="12px ui-sans-serif,system-ui";const ae=d(String(_e[B]||""));if(m>26){const pe=w.measureText(ae).width;w.fillText(ae,W+m/2-pe/2,R+14)}const fe=Y>.01?`~${o(H+Y)}h`:H>.01?`${o(H)}h`:"";fe&&a(w,fe,W+m/2,Math.max(S+4,z-2),{align:"center",baseline:"bottom",font:"11px ui-sans-serif,system-ui"})});const P=O>.01?`~${o(M+O)}h expected`:`${o(M)}h total`;a(w,P,X-4,S+4,{align:"right",baseline:"top",font:"12px ui-sans-serif,system-ui"});return}const Z=t.legacy;if(!Z)return;let le=Z.data||[],xe=Z.labels||[];const Me=f(xe,[{id:"__legacy__",data:le}]);xe=Me.labels,le=((we=(Le=Me.series)==null?void 0:Le[0])==null?void 0:we.data)||le;const Ne=Math.max(1,...le.map(_e=>Math.max(0,_e))),K=le.length||1,ue=8,Q=Math.max(6,(X-E-ue*(K+1))/K),te=(R-S)/Ne;w.fillStyle="#93c5fd",le.forEach((_e,Te)=>{const je=Math.max(0,_e*te),Ee=E+ue+Te*(Q+ue),Ce=R-je;if(w.fillRect(Ee,Ce,Q,je),je>14&&Q>22&&_e>.01){const Ke=String((Math.round(_e*100)/100).toFixed(1));w.fillStyle=r("#93c5fd",V),w.font="11px ui-sans-serif,system-ui";const He=w.measureText(Ke).width;w.fillText(Ke,Ee+Q/2-He/2,Ce+je/2+4)}w.fillStyle=V,w.font="12px ui-sans-serif,system-ui";const se=d(String(xe[Te]||""));if(Q>26){const Ke=w.measureText(se).width;w.fillText(se,Ee+Q/2-Ke/2,R+14)}if(_e>.01){const Ke=`${(Math.round(_e*100)/100).toFixed(1)}h`;a(w,Ke,Ee+Q/2,Math.max(S+4,Ce-2),{align:"center",baseline:"bottom",font:"11px ui-sans-serif,system-ui"})}});const be=le.reduce((_e,Te)=>_e+Math.max(0,Number(Te)||0),0),De=`${(Math.round(be*100)/100).toFixed(1)}h total`;a(w,De,X-4,S+4,{align:"right",baseline:"top",font:"12px ui-sans-serif,system-ui"})}os(()=>{p(),window.addEventListener("resize",p)}),bt(()=>t.stacked,()=>p(),{deep:!0}),bt(()=>t.legacy,()=>p(),{deep:!0}),bt(()=>t.colorsById,()=>p(),{deep:!0});function d(h){const w=/^(\d{4})-(\d{2})-(\d{2})$/.exec(h);if(!w)return h;const T=new Date(`${w[1]}-${w[2]}-${w[3]}T00:00:00`);return["So","Mo","Di","Mi","Do","Fr","Sa"][T.getDay()]||h}function f(h,w){if(!Array.isArray(h)||h.length!==7)return{labels:h,series:w};const T=h.map(V=>u(V));if(T.some(V=>!V))return{labels:h,series:w};const x=T.map(V=>b(V)),S=[1,2,3,4,5,6,7];if(x.join(",")===S.join(","))return{labels:h,series:w};const E={};if(x.forEach((V,re)=>{E[V]=re}),!S.every(V=>V in E))return{labels:h,series:w};const R=S.map(V=>E[V]),X=R.map(V=>h[V]),J=(w||[]).map(V=>{const re=Array.isArray(V.data)?V.data:[],Z=Array.isArray(V.forecast)?V.forecast:null,le=R.map(Ne=>re[Ne]??0),xe=Z?R.map(Ne=>Z[Ne]??0):void 0,Me={...V,data:le};return xe&&(Me.forecast=xe),Me});return{labels:X,series:J}}function u(h){const w=/^(\d{4})-(\d{2})-(\d{2})$/.exec(h);if(!w)return null;const T=new Date(`${w[1]}-${w[2]}-${w[3]}T00:00:00`);return isNaN(T.getTime())?null:T}function b(h){const w=h.getDay();return w===0?7:w}return(h,w)=>($(),D("canvas",{ref_key:"cv",ref:s,class:"chart"},null,512))}}),dc=Ie({__name:"HeatmapCanvas",props:{hod:{}},setup(e){const t=e,s=ne(null);let a=null;function n(){var R;const r=s.value,o=t.hod;if(!r)return;if(!o){console.info("[opsdash] heatmap: no data provided");return}const i=rn(r);if(!i)return;const c=r.clientWidth,g=r.clientHeight,p=o.dows||[],d=o.hours||[],f=o.matrix||[];i.clearRect(0,0,c,g);const u=36,b=u,h=u,w=c-u,T=g-u,x=(w-b)/Math.max(1,d.length),S=(T-h)/Math.max(1,p.length),E=Math.max(0,...f.flat())||1;p.length&&d.length&&console.info("[opsdash] heatmap draw",{rows:p.length,cols:d.length,vmax:E});for(let X=0;X<p.length;X++)for(let J=0;J<d.length;J++){const re=(((R=f[X])==null?void 0:R[J])||0)/E,Z=b+J*x,le=h+X*S;i.fillStyle=uc(re),i.fillRect(Z,le,x-1,S-1)}i.fillStyle=getComputedStyle(document.documentElement).getPropertyValue("--fg").trim()||"#0f172a",i.font="12px ui-sans-serif,system-ui",p.forEach((X,J)=>i.fillText(X,8,h+J*S+12)),d.forEach((X,J)=>{J%2===0&&i.fillText(String(X),b+J*x+2,h-6)})}return os(async()=>{await aa(),n();try{a=new ResizeObserver(()=>n()),s.value&&a.observe(s.value)}catch{}window.addEventListener("resize",n)}),fr(()=>{try{window.removeEventListener("resize",n)}catch{}try{a&&s.value&&a.unobserve(s.value)}catch{}a=null}),bt(()=>t.hod,()=>n(),{deep:!0}),(r,o)=>($(),D("canvas",{ref_key:"cv",ref:s,class:"chart"},null,512))}}),fc={class:"group-row"},gc={colspan:"5"},pc={class:"group-header"},hc={class:"group-label"},mc={class:"name"},vc={key:0,class:"group-meta"},yc={class:"summary"},bc={key:0,class:"summary-percent"},wc={key:1,class:"group-meta"},_c={class:"summary"},kc={key:0},xc=["title"],Sc={class:"row-name"},Cc={key:0,class:"progress"},$c={class:"num"},Mc={class:"num"},Tc={class:"num"},Ac={class:"num"},Dc={key:0,class:"hint"},Ec={key:0,class:"empty-row"},Pc=Ie({__name:"ByCalendarTable",props:{rows:{},n2:{type:Function},targets:{},groups:{}},setup(e){const t=e,s=G(()=>Array.isArray(t.groups)&&t.groups.length?t.groups.map(x=>({id:x.id,label:x.label,summary:x.summary??null,color:x.color,rows:(x.rows||[]).map(a)})):[{id:"__all__",label:"Calendars",summary:null,color:void 0,rows:(t.rows||[]).map(a)}]);function a(x){const S=n(x);return{...x,calendarId:S}}function n(x){return x?x.calendarId?String(x.calendarId):x.id?String(x.id):x.calendar_id?String(x.calendar_id):x.calendar?String(x.calendar):"":""}function r(x){return String(x.calendar||x.displayname||x.name||x.calendarId||"")}function o(x){return n(x)||r(x)}function i(x){const S=b(x);if(!S)return!1;const E=t.targets||{},R=Number(E[S]);return isFinite(R)&&R>0}function c(x){const S=b(x);if(!S)return 0;const E=t.targets||{},R=Number(E[S]);return isFinite(R)?R:0}function g(x){const S=c(x);return S>0?(Math.round(S*100)/100).toFixed(2):""}function p(x,S){return x-S>=0?"delta pos":"delta neg"}function d(x,S){const E=x-S,R=Math.abs(Math.round(E*100)/100).toFixed(2);return(E>=0?"+":"-")+R+"h"}function f(x,S){return Math.max(0,Math.min(100,S>0?x/S*100:0)).toFixed(0)+"%"}function u(x,S){return Math.max(0,Math.min(100,S>0?x/S*100:0))}function b(x){return x==null?"":String(x)}function h(x){const S=x.summary;if(!S)return`${x.rows.length} calendar${x.rows.length===1?"":"s"}`;const E=t.n2(S.actualHours);return S.targetHours>0?`${E} h / ${t.n2(S.targetHours)} h`:`${E} h`}function w(x){const S=x.summary;return!S||S.targetHours<=0?"":`${Math.round(S.percent)}%`}function T(x){switch(x){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}return(x,S)=>($(),D("table",null,[S[1]||(S[1]=l("colgroup",null,[l("col",{class:"col-w-42"}),l("col",{class:"col-w-12"}),l("col",{class:"col-w-14"}),l("col",{class:"col-w-14"}),l("col",{class:"col-w-18"})],-1)),S[2]||(S[2]=l("thead",null,[l("tr",null,[l("th",{class:"nowrap"},"Calendar"),l("th",{class:"num"},"Events"),l("th",{class:"num"},"Hours"),l("th",{class:"num"},"Target"),l("th",{class:"num"}," / %")])],-1)),l("tbody",null,[($(!0),D(de,null,ze(s.value,E=>($(),D(de,{key:E.id},[l("tr",fc,[l("td",gc,[l("div",pc,[l("div",hc,[l("span",{class:"dot",style:Dt({background:E.color||"var(--brand)"})},null,4),l("span",mc,I(E.label),1)]),E.summary?($(),D("div",vc,[l("span",yc,I(h(E)),1),w(E)?($(),D("span",bc,I(w(E)),1)):q("",!0),E.summary.statusLabel?($(),D("span",{key:1,class:ve(["badge",T(E.summary.status)])},I(E.summary.statusLabel),3)):q("",!0)])):($(),D("div",wc,[l("span",_c,[ye(I(E.rows.length)+" calendar",1),E.rows.length!==1?($(),D("span",kc,"s")):q("",!0)])]))])])]),($(!0),D(de,null,ze(E.rows,R=>($(),D("tr",{key:o(R)},[l("td",null,[l("div",{class:"cell",title:r(R)},[l("div",Sc,I(r(R)),1),i(n(R))&&c(n(R))>0?($(),D("div",Cc,[l("div",{class:"progress-bar",style:Dt({width:u(R.total_hours,c(n(R)))+"%",background:E.color||void 0})},null,4)])):q("",!0)],8,xc)]),l("td",$c,I(R.events_count),1),l("td",Mc,I(x.n2(R.total_hours)),1),l("td",Tc,I(g(n(R))),1),l("td",Ac,[i(n(R))?($(),D(de,{key:0},[l("span",{class:ve(p(R.total_hours,c(n(R))))},I(d(R.total_hours,c(n(R)))),3),c(n(R))>0?($(),D("span",Dc," ("+I(f(R.total_hours,c(n(R))))+")",1)):q("",!0)],64)):($(),D(de,{key:1},[ye("")],64))])]))),128)),E.rows.length?q("",!0):($(),D("tr",Ec,[...S[0]||(S[0]=[l("td",{colspan:"5",class:"empty"},"No calendars assigned",-1)])]))],64))),128))])]))}}),Ht=(e,t)=>{const s=e.__vccOpts||e;for(const[a,n]of t)s[a]=n;return s},Ic=Ht(Pc,[["__scopeId","data-v-69f095b4"]]),Nc={class:"mono nowrap"},Lc=["href"],Oc={class:"hint"},Hc={class:"num"},Rc={class:"num"},Fc=Ie({__name:"ByDayTable",props:{rows:{},n2:{type:Function},link:{type:Function}},setup(e){function t(s){const a=/^(\d{4})-(\d{2})-(\d{2})$/.exec(String(s)||"");if(!a)return"";const n=new Date(`${a[1]}-${a[2]}-${a[3]}T00:00:00Z`);return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][n.getUTCDay()]||""}return(s,a)=>($(),D("table",null,[a[0]||(a[0]=l("colgroup",null,[l("col",{class:"col-w-40"}),l("col",{class:"col-w-30"}),l("col",{class:"col-w-30"})],-1)),a[1]||(a[1]=l("thead",null,[l("tr",null,[l("th",{class:"nowrap"},"Date"),l("th",{class:"num"},"Events"),l("th",{class:"num"},"Hours")])],-1)),l("tbody",null,[($(!0),D(de,null,ze(s.rows,n=>($(),D("tr",{key:n.date},[l("td",Nc,[l("a",{href:s.link(n.date),target:"_blank"},I(n.date),9,Lc),l("span",Oc," ("+I(t(n.date))+")",1)]),l("td",Hc,I(n.events_count),1),l("td",Rc,I(s.n2(n.total_hours)),1)]))),128))])]))}}),Wc=["onClick"],Bc=["title"],jc={class:"num"},Uc={class:"mono nowrap"},Vc={class:"mono nowrap"},zc={key:0},Kc={colspan:"5",class:"mono cell-details"},Gc={key:0},qc={key:1,class:"hint"},Jc=Ie({__name:"TopEventsTable",props:{rows:{},n2:{type:Function},detailsIndex:{}},emits:["toggle"],setup(e){return(t,s)=>($(),D("table",null,[s[1]||(s[1]=l("colgroup",null,[l("col",{class:"col-w-22"}),l("col"),l("col",{class:"col-w-12"}),l("col",{class:"col-w-18"}),l("col",{class:"col-w-16"})],-1)),s[2]||(s[2]=l("thead",null,[l("tr",null,[l("th",null,"Calendar"),l("th",null,"Summary"),l("th",{class:"num"},"Hours"),l("th",{class:"nowrap"},"Start date"),l("th",{class:"nowrap"},"Start time")])],-1)),l("tbody",null,[($(!0),D(de,null,ze(t.rows,(a,n)=>{var r;return $(),D(de,{key:n},[l("tr",{onClick:o=>t.$emit("toggle",n),class:"cursor-pointer"},[l("td",null,I(a.calendar),1),l("td",null,[l("span",{class:"cell",title:a.summary},I(a.summary),9,Bc)]),l("td",jc,I(t.n2(a.duration_h)),1),l("td",Uc,I((a.start||"").split(" ")[0]),1),l("td",Vc,I((r=(a.start||"").split(" ")[1])==null?void 0:r.slice(0,5)),1)],8,Wc),t.detailsIndex===n?($(),D("tr",zc,[l("td",Kc,[s[0]||(s[0]=l("div",null,[l("strong",null,"Details")],-1)),a.desc?($(),D("div",Gc,I(a.desc),1)):($(),D("div",qc,"No description"))])])):q("",!0)],64)}),128))])]))}}),Zc={class:"card time-summary compact"},Yc={class:"time-summary-firstline"},Xc={class:"time-summary-metrics"},Qc={key:0},eu={key:1},tu={key:2},su={key:3},au={key:4},nu={key:0,class:"time-summary-row"},ru={key:1,class:"time-summary-row"},ou={key:0,class:"share"},iu={key:2,class:"time-summary-row calendars"},lu={class:"label"},cu={class:"text"},uu={key:3,class:"time-summary-row top-category"},du={class:"text"},fu={key:4,class:"time-summary-row"},gu=Ht(Ie({__name:"TimeSummaryCard",props:{summary:{},mode:{},config:{}},setup(e){const t={showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},s=e,a=G(()=>Object.assign({},t,s.config??{})),n=G(()=>s.mode==="active"?"active days":"all days"),r=G(()=>{if(!a.value.showWeekendShare)return"";const d=s.summary.weekendShare;return d==null?"":`${c(d)}%`}),o=G(()=>{if(!a.value.showTopCategory)return null;const d=s.summary.topCategory;if(!d)return null;const f=g(d.actualHours),u=Number(d.percent??0).toFixed(0),b=d.targetHours>0?` (${u}% of ${g(d.targetHours)} h)`:"";return{text:`${d.label}  ${f} h${b}`,badge:d.statusLabel||"",badgeClass:p(d.status)}}),i=G(()=>{if(!a.value.showBusiest)return"";const d=s.summary.busiest;if(!d||!d.date)return"";const f=Number(d.hours??0);return`Busiest ${d.date}  ${g(f)} h`});function c(d){return Number(d??0).toFixed(1)}function g(d){return Number(d??0).toFixed(2)}function p(d){switch(d){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}return(d,f)=>($(),D("div",Zc,[l("div",Yc,[l("em",null,"Time Summary  "+I(d.summary.rangeLabel),1)]),l("ul",Xc,[a.value.showTotal?($(),D("li",Qc,[l("strong",null,I(g(d.summary.totalHours))+" h",1),f[0]||(f[0]=ye(" total",-1))])):q("",!0),a.value.showAverage?($(),D("li",eu,I(g(d.summary.avgDay))+" h/day ("+I(n.value)+")",1)):q("",!0),a.value.showAverage?($(),D("li",tu,I(g(d.summary.avgEvent))+" h/event",1)):q("",!0),a.value.showMedian?($(),D("li",su,I(g(d.summary.medianDay))+" h median/day",1)):q("",!0),a.value.showBusiest&&i.value?($(),D("li",au,I(i.value),1)):q("",!0)]),a.value.showWorkday?($(),D("div",nu,[f[1]||(f[1]=l("span",{class:"label"},"Workdays",-1)),ye(" "+I(g(d.summary.workdayAvg))+" h avg  "+I(g(d.summary.workdayMedian))+" h median ",1)])):q("",!0),a.value.showWeekend?($(),D("div",ru,[f[2]||(f[2]=l("span",{class:"label"},"Weekend",-1)),ye(" "+I(g(d.summary.weekendAvg))+" h avg  "+I(g(d.summary.weekendMedian))+" h median ",1),a.value.showWeekendShare&&r.value?($(),D("span",ou,"("+I(r.value)+")",1)):q("",!0)])):q("",!0),a.value.showCalendarSummary?($(),D("div",iu,[l("span",lu,I(d.summary.activeCalendars)+" calendars",1),d.summary.calendarSummary?($(),D(de,{key:0},[f[3]||(f[3]=l("span",{class:"sep"},"",-1)),l("span",cu,I(d.summary.calendarSummary),1)],64)):q("",!0)])):q("",!0),a.value.showTopCategory&&o.value?($(),D("div",uu,[f[4]||(f[4]=l("span",{class:"label"},"Top category",-1)),l("span",du,I(o.value.text),1),o.value.badge?($(),D("span",{key:0,class:ve(["summary-badge",o.value.badgeClass])},I(o.value.badge),3)):q("",!0)])):q("",!0),a.value.showBalance&&d.summary.balanceIndex!=null?($(),D("div",fu,[f[5]||(f[5]=l("span",{class:"label"},"Balance",-1)),ye(" "+I(g(d.summary.balanceIndex))+" ",1),f[6]||(f[6]=l("span",{class:"hint"},"(1 = perfekt)",-1))])):q("",!0)]))}}),[["__scopeId","data-v-c358573a"]]),pu={class:"card targets-card"},hu={class:"targets-header"},mu={key:0,class:"hint"},vu={class:"targets-main"},yu={class:"line total-line"},bu={class:"value"},wu={key:0,class:"line"},_u={key:1,class:"line"},ku={class:"line forecast"},xu={class:"hint"},Su={key:0,class:"targets-badges"},Cu={key:1,class:"targets-categories"},$u={class:"cat-top"},Mu={class:"cat-label"},Tu={class:"name"},Au={class:"cat-meta"},Du={class:"percent"},Eu={class:"cat-progress"},Pu={class:"bar"},Iu={class:"cat-metrics"},Nu={class:"hint"},Lu={key:1,class:"hint"},Ou={key:0,class:"cat-footer"},Hu={class:"hint"},Ru=Ht(Ie({__name:"TimeTargetsCard",props:{summary:{},config:{},groups:{}},setup(e){const t=e,s=G(()=>{var d;return((d=t.summary)==null?void 0:d.total)??c("total","Total")}),a=G(()=>{var f;return Array.isArray(t.groups)&&t.groups.length?t.groups.map(u=>({id:u.id,label:u.label,summary:u.summary??c(u.id,u.label),color:u.color,rows:u.rows})):(((f=t.summary)==null?void 0:f.categories)??[]).map(u=>({id:u.id,label:u.label,summary:u,color:void 0,rows:[]}))}),n=G(()=>a.value.map(d=>{const f=d.summary??c(d.id,d.label);return{id:d.id,label:d.label||f.label,actualHours:f.actualHours,targetHours:f.targetHours,percent:f.percent,deltaHours:f.deltaHours,needPerDay:f.needPerDay,daysLeft:f.daysLeft,calendarPercent:f.calendarPercent,gap:f.gap,status:f.status,statusLabel:f.statusLabel,color:d.color,calendarCount:Array.isArray(d.rows)?d.rows.length:0,progress:g(f.percent,0,140),calendarLabel:Array.isArray(d.rows)&&d.rows.length===1?"calendar":"calendars"}}).filter(d=>d.targetHours>0||d.actualHours>0||d.calendarCount>0));function r(d){if(!isFinite(d))return"0";const f=Math.round(d*10)/10;return Math.abs(f-Math.round(f))<.05?String(Math.round(f)):f.toFixed(1)}function o(d){return!isFinite(d)||Math.abs(d)<.005?"0.0":(d>=0?"+":"")+r(Math.abs(d))}function i(d){switch(d){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function c(d,f){return{id:d,label:f,actualHours:0,targetHours:0,percent:0,deltaHours:0,remainingHours:0,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"}}function g(d,f,u){return!isFinite(d)||d<f?f:d>u?u:d}function p(d){return d==="momentum"?"Momentum":"Linear"}return(d,f)=>($(),D("div",pu,[l("div",hu,[f[0]||(f[0]=l("strong",null,"Targets",-1)),s.value.targetHours>0?($(),D("span",mu,I(s.value.percent.toFixed(0))+"%",1)):q("",!0)]),l("div",vu,[l("div",yu,[l("span",bu,[l("strong",null,I(r(s.value.actualHours)),1),ye(" / "+I(r(s.value.targetHours))+" h",1)]),d.config.ui.showTotalDelta&&s.value.targetHours>0?($(),D("span",{key:0,class:ve(["delta",s.value.deltaHours>=0?"pos":"neg"])},"  "+I(o(s.value.deltaHours))+"h ",3)):q("",!0)]),d.config.ui.showNeedPerDay&&s.value.targetHours>0?($(),D("div",wu," Days left "+I(s.value.daysLeft)+"  Need "+I(r(s.value.needPerDay))+" h/day ",1)):q("",!0),s.value.targetHours>0?($(),D("div",_u,[ye(" Pace: "+I(s.value.percent.toFixed(0))+"% vs "+I(s.value.calendarPercent.toFixed(0))+"%  ",1),l("span",{class:ve(["status-label",i(s.value.status)])},I(s.value.statusLabel),3)])):q("",!0),l("div",ku,[ye(" Forecast: "+I(d.summary.forecast.text)+" ",1),l("span",xu," Linear "+I(r(d.summary.forecast.linear))+"h  Momentum "+I(r(d.summary.forecast.momentum))+"h  Primary: "+I(p(d.summary.forecast.primaryMethod)),1)])]),d.config.ui.badges&&s.value.targetHours>0?($(),D("div",Su,[l("span",{class:ve(["badge",i(s.value.status)])},I(s.value.statusLabel),3)])):q("",!0),d.config.ui.showCategoryBlocks&&n.value.length?($(),D("div",Cu,[($(!0),D(de,null,ze(n.value,u=>($(),D("div",{class:"category",key:u.id},[l("div",$u,[l("div",Mu,[l("span",{class:"dot",style:Dt({background:u.color||"var(--brand)"})},null,4),l("span",Tu,I(u.label),1)]),l("div",Au,[l("span",Du,I(u.percent.toFixed(0))+"%",1),d.config.ui.badges&&u.targetHours>0?($(),D("span",{key:0,class:ve(["badge",i(u.status)])},I(u.statusLabel),3)):q("",!0)])]),l("div",Eu,[l("div",Pu,[l("div",{class:"fill",style:Dt({width:u.progress+"%",background:u.color||"var(--brand)"})},null,4)])]),l("div",Iu,[l("strong",null,I(r(u.actualHours))+"h",1),l("span",Nu,"/ "+I(r(u.targetHours))+"h",1),u.targetHours>0?($(),D("span",{key:0,class:ve(["delta",u.deltaHours>=0?"pos":"neg"])},"  "+I(o(u.deltaHours))+"h ",3)):q("",!0),d.config.ui.showNeedPerDay&&u.targetHours>0?($(),D("span",Lu," Need "+I(r(u.needPerDay))+"h/day  "+I(u.daysLeft)+" days left ",1)):q("",!0)]),u.calendarCount>0?($(),D("div",Ou,[l("span",Hu,I(u.calendarCount)+" "+I(u.calendarLabel),1)])):q("",!0)]))),128))])):q("",!0)]))}}),[["__scopeId","data-v-bcb82b9a"]]);function Fu(e){const t=e?vt(e):Is(),s={id:"total",label:"Total",actualHours:0,targetHours:t.totalHours,percent:0,deltaHours:0,remainingHours:t.totalHours,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"};return{total:s,categories:(t.categories||[]).map(a=>({...s,id:a.id,label:a.label,targetHours:a.targetHours,remainingHours:a.targetHours})),forecast:{linear:0,momentum:0,low:0,high:0,text:"~00 h",primaryMethod:t.forecast.methodPrimary,primary:0,bandLow:0,bandHigh:0}}}function on(){return{categories:["work","hobby","sport"],useCategoryMapping:!0,index:{method:"simple_range"},thresholds:{noticeMaxShare:.65,warnMaxShare:.75,warnIndex:.6},relations:{displayMode:"ratio"},trend:{lookbackWeeks:1},dayparts:{enabled:!1},ui:{roundPercent:1,roundRatio:1,showDailyStacks:!1,showInsights:!0}}}function us(){return{showWeekendShare:!0,showEveningShare:!0,showEarliestLatest:!0,showOverlaps:!0,showLongestSession:!0,showLastDayOff:!0,showHint:!0,forecastMode:"total"}}const ln=24*60*60*1e3;function Wu(e){const t=Number(e);if(!Number.isFinite(t))return 0;const s=Math.min(1e4,Math.max(0,t));return Number(s.toFixed(2))}function cn(e){return Wu(Number(e)*4)}function Is(){return{totalHours:48,categories:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",groupIds:[1]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",groupIds:[2]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",groupIds:[3]}],pace:{includeWeekendTotal:!0,mode:"days_only",thresholds:{onTrack:-2,atRisk:-10}},forecast:{methodPrimary:"linear",momentumLastNDays:2,padding:1.5},ui:{showTotalDelta:!0,showNeedPerDay:!0,showCategoryBlocks:!0,badges:!0,includeWeekendToggle:!0,showCalendarCharts:!0,showCategoryCharts:!0},allDayHours:8,timeSummary:{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},activityCard:us(),balance:on(),includeZeroDaysInStats:!1}}function un(e){return JSON.parse(JSON.stringify(vt(e)))}function Bu(e){const t=vt(e.config),s=vo(e.from),a=vo(e.to),n=Zu(e.byDay),r=(e.byCal||[]).reduce((d,f)=>{const u=Number((f==null?void 0:f.total_hours)??(f==null?void 0:f.hours)??0);return Number.isFinite(u)?d+u:d},0),o=t.totalHours||0,i=mo({includeWeekend:t.pace.includeWeekendTotal,mode:t.pace.mode,includeZeroDays:t.includeZeroDaysInStats,start:s,end:a,dailyHours:n}),c=ho({id:"total",label:"Total",actual:r,target:o,pace:i,thresholds:t.pace.thresholds,includeWeekend:t.pace.includeWeekendTotal,paceMode:t.pace.mode}),g=t.categories.map(d=>{const f=zu(d,e.byCal,e.groupsById),u=d.paceMode||t.pace.mode,b=mo({includeWeekend:d.includeWeekend,mode:u,includeZeroDays:t.includeZeroDaysInStats,start:s,end:a,dailyHours:n});return ho({id:d.id,label:d.label,actual:f,target:d.targetHours,pace:b,thresholds:t.pace.thresholds,includeWeekend:d.includeWeekend,paceMode:u})}),p=qu({config:t,totalProgress:c,dailyHours:n,pace:i});return{total:c,categories:g,forecast:p}}function vt(e){var o,i,c,g,p,d,f,u,b,h,w,T,x,S,E,R,X,J,V,re,Z,le,xe,Me,Ne;if(typeof e=="string")try{const K=JSON.parse(e);return vt(K)}catch{return vt(void 0)}const t=Is(),s=JSON.parse(JSON.stringify(e??{}));if(typeof s!="object"||s===null||Array.isArray(s))return t;Array.isArray(s.categories)||(s.categories=[]);const a=s.categories.map(K=>{const ue=(K!=null&&K.id&&typeof K.id=="string"?K.id:"")||Qu(String((K==null?void 0:K.label)??"cat")),Q=typeof(K==null?void 0:K.label)=="string"&&K.label.trim()!==""?K.label.trim():ju(ue),te=Rt(K==null?void 0:K.targetHours,0,1e4),be=!!(K!=null&&K.includeWeekend),De=(K==null?void 0:K.paceMode)==="time_aware"?"time_aware":"days_only",Le=Array.isArray(K==null?void 0:K.groupIds)?K.groupIds.map(we=>Number(we)).filter(we=>Number.isFinite(we)&&we>=0&&we<=9):[];return{id:ue,label:Q,targetHours:te,includeWeekend:be,paceMode:De,groupIds:Le}}),n=a.length?a:t.categories;return{totalHours:Rt(s.totalHours,0,1e4),categories:n,pace:{includeWeekendTotal:!!(((o=s.pace)==null?void 0:o.includeWeekendTotal)??t.pace.includeWeekendTotal),mode:((i=s.pace)==null?void 0:i.mode)==="time_aware"?"time_aware":t.pace.mode,thresholds:{onTrack:Rt(((g=(c=s.pace)==null?void 0:c.thresholds)==null?void 0:g.onTrack)??t.pace.thresholds.onTrack,-100,100),atRisk:Rt(((d=(p=s.pace)==null?void 0:p.thresholds)==null?void 0:d.atRisk)??t.pace.thresholds.atRisk,-100,100)}},forecast:{methodPrimary:((f=s.forecast)==null?void 0:f.methodPrimary)==="momentum"?"momentum":"linear",momentumLastNDays:(()=>{var ue;const K=Math.round(((ue=s.forecast)==null?void 0:ue.momentumLastNDays)??t.forecast.momentumLastNDays);return Math.min(14,Math.max(1,Number.isFinite(K)?K:t.forecast.momentumLastNDays))})(),padding:Rt(((u=s.forecast)==null?void 0:u.padding)??t.forecast.padding,0,100)},ui:{showTotalDelta:!!(((b=s.ui)==null?void 0:b.showTotalDelta)??t.ui.showTotalDelta),showNeedPerDay:!!(((h=s.ui)==null?void 0:h.showNeedPerDay)??t.ui.showNeedPerDay),showCategoryBlocks:!!(((w=s.ui)==null?void 0:w.showCategoryBlocks)??t.ui.showCategoryBlocks),badges:!!(((T=s.ui)==null?void 0:T.badges)??t.ui.badges),includeWeekendToggle:!!(((x=s.ui)==null?void 0:x.includeWeekendToggle)??t.ui.includeWeekendToggle),showCalendarCharts:((S=s.ui)==null?void 0:S.showCalendarCharts)===void 0?t.ui.showCalendarCharts:!!s.ui.showCalendarCharts,showCategoryCharts:((E=s.ui)==null?void 0:E.showCategoryCharts)===void 0?t.ui.showCategoryCharts:!!s.ui.showCategoryCharts},allDayHours:Rt(s.allDayHours??t.allDayHours,0,24),timeSummary:{showTotal:((R=s.timeSummary)==null?void 0:R.showTotal)===void 0?t.timeSummary.showTotal:!!s.timeSummary.showTotal,showAverage:((X=s.timeSummary)==null?void 0:X.showAverage)===void 0?t.timeSummary.showAverage:!!s.timeSummary.showAverage,showMedian:((J=s.timeSummary)==null?void 0:J.showMedian)===void 0?t.timeSummary.showMedian:!!s.timeSummary.showMedian,showBusiest:((V=s.timeSummary)==null?void 0:V.showBusiest)===void 0?t.timeSummary.showBusiest:!!s.timeSummary.showBusiest,showWorkday:((re=s.timeSummary)==null?void 0:re.showWorkday)===void 0?t.timeSummary.showWorkday:!!s.timeSummary.showWorkday,showWeekend:((Z=s.timeSummary)==null?void 0:Z.showWeekend)===void 0?t.timeSummary.showWeekend:!!s.timeSummary.showWeekend,showWeekendShare:((le=s.timeSummary)==null?void 0:le.showWeekendShare)===void 0?t.timeSummary.showWeekendShare:!!s.timeSummary.showWeekendShare,showCalendarSummary:((xe=s.timeSummary)==null?void 0:xe.showCalendarSummary)===void 0?t.timeSummary.showCalendarSummary:!!s.timeSummary.showCalendarSummary,showTopCategory:((Me=s.timeSummary)==null?void 0:Me.showTopCategory)===void 0?t.timeSummary.showTopCategory:!!s.timeSummary.showTopCategory,showBalance:((Ne=s.timeSummary)==null?void 0:Ne.showBalance)===void 0?t.timeSummary.showBalance:!!s.timeSummary.showBalance},activityCard:Uu(s.activityCard,t.activityCard),balance:Vu(s.balance,n,t.balance),includeZeroDaysInStats:!!(s.includeZeroDaysInStats??t.includeZeroDaysInStats)}}function ju(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function Rt(e,t,s){const a=Number(e);return Number.isFinite(a)?Math.min(s,Math.max(t,Math.round(a*100)/100)):t}function dn(e,t,s){const a=Number(e);if(!Number.isFinite(a))return t;const n=Math.round(a);return n<t?t:n>s?s:n}function Uu(e,t){const s={...t};if(!e||typeof e!="object")return s;["showWeekendShare","showEveningShare","showEarliestLatest","showOverlaps","showLongestSession","showLastDayOff","showHint"].forEach(r=>{Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=!!e[r])});const n=e==null?void 0:e.forecastMode;if(typeof n=="string"){const r=n.toLowerCase();(r==="off"||r==="total"||r==="calendar"||r==="category")&&(s.forecastMode=r)}return s}function Vu(e,t,s){var g,p,d,f;const a=t.map(u=>u.id),n=new Set([...a,"__uncategorized__"]),r=Array.isArray(e==null?void 0:e.categories)?e.categories:s.categories,o=[];for(const u of r){const b=typeof u=="string"?u.trim():String(u??"").trim();b&&(n.size&&!n.has(b)||o.includes(b)||o.push(b))}o.length||(a.length?o.push(...a.slice(0,s.categories.length)):o.push(...s.categories));const i=(e==null?void 0:e.thresholds)??{},c=(e==null?void 0:e.ui)??{};return{categories:o,useCategoryMapping:!!((e==null?void 0:e.useCategoryMapping)??s.useCategoryMapping),index:{method:((g=e==null?void 0:e.index)==null?void 0:g.method)==="shannon_evenness"?"shannon_evenness":s.index.method},thresholds:{noticeMaxShare:Rt(i.noticeMaxShare??s.thresholds.noticeMaxShare,0,1),warnMaxShare:Rt(i.warnMaxShare??s.thresholds.warnMaxShare,0,1),warnIndex:Rt(i.warnIndex??s.thresholds.warnIndex,0,1)},relations:{displayMode:((p=e==null?void 0:e.relations)==null?void 0:p.displayMode)==="factor"?"factor":s.relations.displayMode},trend:{lookbackWeeks:dn(((d=e==null?void 0:e.trend)==null?void 0:d.lookbackWeeks)??s.trend.lookbackWeeks,1,12)},dayparts:{enabled:!!(((f=e==null?void 0:e.dayparts)==null?void 0:f.enabled)??s.dayparts.enabled)},ui:{roundPercent:dn(c.roundPercent??s.ui.roundPercent,0,3),roundRatio:dn(c.roundRatio??s.ui.roundRatio,0,3),showDailyStacks:!!(c.showDailyStacks??s.ui.showDailyStacks),showInsights:!!(c.showInsights??s.ui.showInsights)}}}function zu(e,t,s){if(!Array.isArray(t))return 0;const a=Array.isArray(e.groupIds)&&e.groupIds.length?new Set(e.groupIds):null;let n=0;for(const r of t){const o=Number((r==null?void 0:r.total_hours)??(r==null?void 0:r.hours)??0);if(!isFinite(o)||o<=0)continue;const i=String((r==null?void 0:r.id)??(r==null?void 0:r.calendar)??""),c=Number((r==null?void 0:r.group)??(r==null?void 0:r.group_id)??(s==null?void 0:s[i])??0);a&&!a.has(c)||(n+=o)}return n}function ho(e){const t=Math.max(0,e.target||0),s=Math.max(0,e.actual||0),a=t>0?fn(s/t*100):0,n=t-s,r=s-t,o=e.pace.daysLeft>0?Math.max(0,n)/e.pace.daysLeft:0,i=a-e.pace.calendarPercent,c=Ku({percent:a,target:t,gap:i,thresholds:e.thresholds});return{id:e.id,label:e.label,actualHours:lt(s),targetHours:lt(t),percent:a,deltaHours:lt(r),remainingHours:lt(Math.max(0,n)),needPerDay:lt(o),daysLeft:Math.max(0,Math.ceil(e.pace.daysLeft)),calendarPercent:fn(e.pace.calendarPercent),gap:lt(i),status:c,statusLabel:Gu(c),includeWeekend:e.includeWeekend,paceMode:e.paceMode}}function Ku(e){return e.target<=0?"none":e.percent>=100?"done":e.gap>=e.thresholds.onTrack?"on_track":e.gap>=e.thresholds.atRisk?"at_risk":"behind"}function Gu(e){switch(e){case"on_track":return"On Track";case"at_risk":return"At Risk";case"behind":return"Behind";case"done":return"Done";default:return""}}function mo(e){const{start:t,end:s}=e;if(!t||!s)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};const a=wa(new Date),n=Kt(t),r=Kt(s),o=Yu(t,s).filter(d=>e.includeWeekend||!Xu(d)),i=o.length;if(i===0)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};if(Kt(a)>r)return{totalEligible:i,elapsedEligible:i,daysLeft:0,calendarPercent:100};if(Kt(a)<n)return{totalEligible:i,elapsedEligible:0,daysLeft:i,calendarPercent:0};let c=0;for(const d of o){const f=Kt(d),u=e.dailyHours.get(f)??0;if(!(!e.includeZeroDays&&u<=0&&f!==Kt(a))){if(f<Kt(a))c+=1;else if(f===Kt(a))if(e.mode==="time_aware"){const h=Math.min(new Date().getTime(),d.getTime()+ln)-d.getTime(),w=Math.max(0,Math.min(1,h/ln));(e.includeZeroDays||u>0||w>0)&&(c+=w)}else(e.includeZeroDays||u>0)&&(c+=1)}}const g=fn(c/i*100),p=Math.max(0,i-c);return{totalEligible:i,elapsedEligible:c,daysLeft:p,calendarPercent:g}}function qu(e){const t=e.pace.totalEligible>0?e.pace.elapsedEligible/e.pace.totalEligible:0,s=t>0?e.totalProgress.actualHours/t:e.totalProgress.actualHours,a=Math.max(0,Math.ceil(e.pace.daysLeft)),n=Ju(e.dailyHours,e.config.forecast.momentumLastNDays),r=e.totalProgress.actualHours+n*a,o=Math.max(0,Math.min(s,r)-e.config.forecast.padding),i=Math.max(s,r)+e.config.forecast.padding,c=e.config.forecast.methodPrimary==="momentum"?"momentum":"linear",g=c==="momentum"?r:s,p=Math.max(0,g-e.config.forecast.padding),d=Math.max(0,g+e.config.forecast.padding),f=c==="momentum"?"Momentum":"Linear";return{linear:lt(s),momentum:lt(r),low:lt(Math.max(0,o)),high:lt(Math.max(0,i)),text:`${f} ${gn(e.config.forecast.padding)}h  ${gn(p)}${gn(d)} h`,primaryMethod:c,primary:lt(g),bandLow:lt(p),bandHigh:lt(d)}}function Ju(e,t){if(t<=0)return 0;const s=Array.from(e.entries());if(!s.length)return 0;s.sort((r,o)=>r[0].localeCompare(o[0]));const a=s.slice(-t),n=a.reduce((r,[,o])=>r+Math.max(0,o||0),0);return a.length?n/a.length:0}function Zu(e){const t=new Map;if(!Array.isArray(e))return t;for(const s of e){const a=String((s==null?void 0:s.date)??(s==null?void 0:s.day)??"");if(!a)continue;const n=Number((s==null?void 0:s.total_hours)??(s==null?void 0:s.hours)??0);isFinite(n)&&t.set(a,n)}return t}function Yu(e,t){const s=[];let a=wa(e);const n=wa(t).getTime();for(;a.getTime()<=n;)s.push(new Date(a)),a=new Date(a.getTime()+ln);return s}function vo(e){if(!e)return null;const t=e.split("-").map(a=>Number(a));if(t.length!==3||t.some(a=>!Number.isInteger(a)))return null;const s=new Date(Date.UTC(t[0],t[1]-1,t[2]));return Number.isNaN(s.getTime())?null:wa(s)}function wa(e){const t=new Date(e);return t.setUTCHours(0,0,0,0),t}function Kt(e){return e.toISOString().slice(0,10)}function Xu(e){const t=e.getUTCDay();return t===0||t===6}function fn(e){return isFinite(e)?Math.max(0,Math.min(999,Number(e.toFixed(2)))):0}function lt(e){return isFinite(e)?Number(e.toFixed(2)):0}function gn(e){if(!isFinite(e))return"0";const t=lt(Math.max(0,e));return Math.abs(t-Math.round(t))<.05?Math.round(t).toString():t.toFixed(1)}function Qu(e){let t=0;for(let s=0;s<e.length;s++)t=(t<<5)-t+e.charCodeAt(s),t|=0;return`cat-${Math.abs(t)}`}const ed={class:"card activity-card"},td={class:"activity-card__header"},sd={key:0,class:"pill"},ad={key:0,class:"activity-card__hero"},nd={key:1,class:"activity-card__subline"},rd={key:2,class:"activity-card__meta"},od={key:3,class:"activity-card__extra"},id={key:4,class:"activity-card__hint"},ld=Ht(Ie({__name:"ActivityScheduleCard",props:{summary:{},rangeLabel:{},categoryHint:{},config:{}},setup(e){const t=us(),s=e,a=G(()=>Object.assign({},t,s.config??{})),n=G(()=>{const f=[];f.push(`Events ${s.summary.events}`),s.summary.activeDays!=null&&f.push(`Active Days ${s.summary.activeDays}`);const u=c(s.summary.typicalStart,s.summary.typicalEnd);return u&&f.push(`Typical ${u}`),f.join("  ")}),r=G(()=>{const f=[];return a.value.showWeekendShare&&s.summary.weekendShare!=null&&f.push(`Weekend ${g(s.summary.weekendShare)}`),a.value.showEveningShare&&s.summary.eveningShare!=null&&f.push(`Evening ${g(s.summary.eveningShare)}`),f.join("  ")}),o=G(()=>{const f=[];if(a.value.showEarliestLatest){const u=p(s.summary.earliestStart),b=p(s.summary.latestEnd);(u||b)&&f.push({label:"Earliest/Late",value:`${u||""} / ${b||""}`})}return a.value.showOverlaps&&s.summary.overlapEvents!=null&&f.push({label:"Overlaps",value:s.summary.overlapEvents.toString()}),f}),i=G(()=>{const f=[];return a.value.showLongestSession&&s.summary.longestSession!=null&&s.summary.longestSession>0&&f.push({label:"Longest Session",value:`${Number(s.summary.longestSession).toFixed(1)} h`}),a.value.showLastDayOff&&s.summary.lastDayOff&&f.push({label:"Last day off",value:d(s.summary.lastDayOff)}),a.value.showLastDayOff&&s.summary.lastHalfDayOff&&f.push({label:"Last half day",value:d(s.summary.lastHalfDayOff)}),f});function c(f,u){return f&&u?`${f}${u}`:f?`${f}`:u?`${u}`:""}function g(f){return`${Number(f||0).toFixed(1)}%`}function p(f){return f?f.length>=16?f.slice(11,16):f.length>=5?f.slice(0,5):null:null}function d(f){const u=f.trim();if(!u)return"";if(u.split("-").length>=2){const h=new Date(u.length===10?`${u}T00:00:00`:u);if(!Number.isNaN(h.getTime()))return new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}).format(h)}return u}return(f,u)=>($(),D("div",ed,[l("div",td,[l("span",null,"Activity & Schedule ("+I(f.rangeLabel)+")",1),f.summary.rangeLabel?($(),D("span",sd,I(f.summary.rangeLabel),1)):q("",!0)]),n.value?($(),D("div",ad,[l("span",null,I(n.value),1)])):q("",!0),r.value?($(),D("div",nd,[l("span",null,I(r.value),1)])):q("",!0),o.value.length?($(),D("div",rd,[($(!0),D(de,null,ze(o.value,b=>($(),D("span",{key:b.label},[l("strong",null,I(b.label),1),ye(" "+I(b.value),1)]))),128))])):q("",!0),i.value.length?($(),D("div",od,[($(!0),D(de,null,ze(i.value,b=>($(),D("span",{key:b.label},[l("strong",null,I(b.label),1),ye(" "+I(b.value),1)]))),128))])):q("",!0),a.value.showHint&&f.categoryHint?($(),D("div",id,I(f.categoryHint),1)):q("",!0)]))}}),[["__scopeId","data-v-054cbd84"]]),cd={class:"card balance-card"},ud={class:"balance-card__header"},dd={key:0,class:"balance-card__hero"},fd={key:1,class:"balance-card__relations"},gd={key:2,class:"balance-card__trend"},pd={key:3,class:"balance-card__insights"},hd={key:4,class:"balance-card__warnings"},md=Ht(Ie({__name:"BalanceOverviewCard",props:{overview:{},rangeLabel:{},config:{}},setup(e){const t={showInsights:!0,showDailyStacks:!1},s=e,a=G(()=>Object.assign({},t,s.config??{})),n=G(()=>{if(!s.overview)return"";const g=s.overview.index??0,p=s.overview.categories.filter(f=>f.share>.1).slice(0,4).map(f=>`${f.label} ${f.share.toFixed(0)}%`),d=p.length?`  ${p.join(" | ")}`:"";return`Balance Index ${g.toFixed(2)}${d}`}),r=G(()=>{var g;return!s.overview||!((g=s.overview.relations)!=null&&g.length)?"":s.overview.relations.map(p=>`${p.label} ${p.value}`).join("  ")}),o=G(()=>{var p;if(!s.overview)return"";const g=((p=s.overview.trend)==null?void 0:p.delta)??[];return g.length?g.map(d=>{const f=d.delta>0?"+":d.delta<0?"":"";return`${d.label} ${f}${Math.abs(d.delta).toFixed(1)} pp`}).join(", "):""}),i=G(()=>{var g;return a.value.showInsights?((g=s.overview)==null?void 0:g.insights)??[]:[]}),c=G(()=>{var g;return((g=s.overview)==null?void 0:g.warnings)??[]});return(g,p)=>($(),D("div",cd,[l("div",ud,[l("span",null,"Balance Overview ("+I(g.rangeLabel)+")",1)]),n.value?($(),D("div",dd,[l("span",null,I(n.value),1)])):q("",!0),r.value?($(),D("div",fd,I(r.value),1)):q("",!0),o.value?($(),D("div",gd,[p[0]||(p[0]=l("strong",null,"WoW-:",-1)),ye(" "+I(o.value),1)])):q("",!0),i.value.length?($(),D("ul",pd,[($(!0),D(de,null,ze(i.value,d=>($(),D("li",{key:d}," "+I(d),1))),128))])):q("",!0),c.value.length?($(),D("ul",hd,[($(!0),D(de,null,ze(c.value,d=>($(),D("li",{key:d}," "+I(d),1))),128))])):q("",!0)]))}}),[["__scopeId","data-v-a9a4a7a3"]]),vd={id:"opsdash-sidebar-pane-calendars",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-calendars"},yd={class:"sb-actions"},bd={class:"sb-list"},wd=["aria-pressed","onClick"],_d={class:"cal-name"},kd={class:"cal-fields"},xd={class:"field"},Sd=["value","onChange"],Cd=["value"],$d={class:"field"},Md=["value","title","aria-invalid","onInput"],Td=Ie({__name:"SidebarCalendarsPane",props:{calendars:{},selected:{},range:{},isLoading:{type:Boolean},categoryOptions:{},calendarTargetMessages:{},calendarCategoryId:{type:Function},getTarget:{type:Function}},emits:["select-all","toggle-calendar","set-category","target-input"],setup(e){const t=e,{calendars:s,selected:a,range:n,isLoading:r,categoryOptions:o,calendarTargetMessages:i,calendarCategoryId:c,getTarget:g}=t;return(p,d)=>($(),D("div",vd,[l("div",yd,[ie(C(gt),{type:"tertiary",disabled:C(r),onClick:d[0]||(d[0]=f=>p.$emit("select-all",!0))},{default:We(()=>[...d[2]||(d[2]=[ye("All",-1)])]),_:1},8,["disabled"]),ie(C(gt),{type:"tertiary",disabled:C(r),onClick:d[1]||(d[1]=f=>p.$emit("select-all",!1))},{default:We(()=>[...d[3]||(d[3]=[ye("None",-1)])]),_:1},8,["disabled"])]),d[8]||(d[8]=yl('<div class="sb-hints"><div class="sb-title" style="margin:0;">PerCalendar Settings</div><div class="sb-hintline" title="Use categories to drive targets, balance, and summaries."><strong>Category</strong>: choose how this calendar contributes to targets &amp; balance.</div><div class="sb-hintline" title="Define weekly/monthly goals per calendar. Values sync between ranges."><strong>Target (h)</strong>: goal hours for the active range (week  month converts automatically).</div><div class="sb-hintline" title="Only calendars marked Selected contribute to dashboards and KPIs.">Toggle calendars to include or exclude them from stats.</div></div>',1)),l("div",bd,[($(!0),D(de,null,ze(C(s),f=>{var u,b;return $(),D("div",{key:f.id,class:"cal-card"},[l("div",{class:"cal-card-head",role:"button",tabindex:"0","aria-pressed":C(a).includes(f.id),onClick:h=>p.$emit("toggle-calendar",f.id)},[l("span",{class:"color-dot",style:Dt({background:f.color||"var(--brand)"})},null,4),l("span",_d,I(f.displayname||f.id),1),l("span",{class:ve(["cal-state",{on:C(a).includes(f.id)}])},I(C(a).includes(f.id)?"Selected":"Hidden"),3)],8,wd),l("div",kd,[l("label",xd,[d[5]||(d[5]=l("span",{class:"label"},"Category",-1)),l("select",{value:C(c)(f.id),onChange:h=>p.$emit("set-category",{id:f.id,category:h.target.value})},[d[4]||(d[4]=l("option",{value:""},"Unassigned",-1)),($(!0),D(de,null,ze(C(o),h=>($(),D("option",{key:h.id,value:h.id},I(h.label),9,Cd))),128))],40,Sd)]),l("label",$d,[d[6]||(d[6]=l("span",{class:"label"},"Target (h)",-1)),l("input",{type:"number",value:C(g)(f.id),min:"0",max:"10000",step:"0.25","aria-label":"Target hours",title:`Target (${C(n)==="week"?"week":"month"}) in hours`,"aria-invalid":!!C(i)[f.id],class:"target-input",onInput:h=>p.$emit("target-input",{id:f.id,value:h.target.value})},null,40,Md),C(i)[f.id]?($(),D("div",{key:0,class:ve(["input-message",(u=C(i)[f.id])==null?void 0:u.tone])},I((b=C(i)[f.id])==null?void 0:b.text),3)):q("",!0)])])])}),128)),d[7]||(d[7]=l("div",{class:"hint mt-8"},"Selection is stored per user.",-1))])]))}}),Ad={id:"opsdash-sidebar-pane-targets",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-targets"},Dd={class:"target-config"},Ed={class:"field"},Pd=["value","aria-invalid"],Id={class:"field"},Nd=["value","aria-invalid"],Ld={class:"preset-buttons"},Od={class:"cat-header"},Hd=["value","onInput"],Rd=["disabled","onClick"],Fd={class:"cat-fields"},Wd={class:"field"},Bd=["value","aria-invalid","onInput"],jd={class:"field"},Ud=["value","onChange"],Vd={class:"field checkbox"},zd=["checked","onChange"],Kd={class:"target-section"},Gd={class:"field checkbox"},qd=["checked"],Jd={class:"field"},Zd=["value"],Yd={class:"field"},Xd=["value","aria-invalid"],Qd={class:"field"},ef=["value","aria-invalid"],tf={class:"target-section"},sf={class:"field"},af=["value"],nf={class:"field"},rf=["value","aria-invalid"],of={class:"field"},lf=["value","aria-invalid"],cf={class:"target-section"},uf={class:"field checkbox"},df=["checked"],ff={class:"field checkbox"},gf=["checked"],pf={class:"field checkbox"},hf=["checked"],mf={class:"field checkbox"},vf=["checked"],yf={class:"field checkbox"},bf=["checked"],wf={class:"field checkbox"},_f=["checked"],kf={class:"field checkbox"},xf=["checked"],Sf={class:"field checkbox"},Cf=["checked"],$f=Ie({__name:"SidebarTargetsPane",props:{targets:{},categoryOptions:{},totalTargetMessage:{},allDayHoursMessage:{},categoryTargetMessages:{},paceThresholdMessages:{},forecastMomentumMessage:{},forecastPaddingMessage:{},canAddCategory:{type:Boolean}},emits:["total-target-input","apply-preset","set-all-day-hours","set-category-label","remove-category","set-category-target","set-category-pace","set-category-weekend","add-category","set-include-weekend-total","set-pace-mode","set-threshold","set-forecast-method","set-forecast-momentum","set-forecast-padding","set-ui-option","set-include-zero-days"],setup(e){return(t,s)=>{var a,n,r,o,i,c,g,p,d,f,u,b;return $(),D("div",Ad,[s[49]||(s[49]=l("div",{class:"sb-title"},"Target Settings",-1)),l("div",Dd,[l("div",Ed,[s[20]||(s[20]=l("span",{class:"label"},"Total target (h)",-1)),l("input",{type:"number",value:t.targets.totalHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!t.totalTargetMessage,onInput:s[0]||(s[0]=h=>t.$emit("total-target-input",h.target.value))},null,40,Pd),t.totalTargetMessage?($(),D("div",{key:0,class:ve(["input-message",(a=t.totalTargetMessage)==null?void 0:a.tone])},I((n=t.totalTargetMessage)==null?void 0:n.text),3)):q("",!0)]),l("div",Id,[s[21]||(s[21]=l("span",{class:"label"},"All-day event (h per day)",-1)),l("input",{type:"number",value:t.targets.allDayHours,min:"0",max:"24",step:"0.25","aria-invalid":!!t.allDayHoursMessage,onInput:s[1]||(s[1]=h=>t.$emit("set-all-day-hours",h.target.value))},null,40,Nd),t.allDayHoursMessage?($(),D("div",{key:0,class:ve(["input-message",(r=t.allDayHoursMessage)==null?void 0:r.tone])},I((o=t.allDayHoursMessage)==null?void 0:o.text),3)):q("",!0)]),l("div",Ld,[ie(C(gt),{type:"tertiary",onClick:s[2]||(s[2]=h=>t.$emit("apply-preset","work-week"))},{default:We(()=>[...s[22]||(s[22]=[ye("Preset: Work-Week",-1)])]),_:1}),ie(C(gt),{type:"tertiary",onClick:s[3]||(s[3]=h=>t.$emit("apply-preset","balanced-life"))},{default:We(()=>[...s[23]||(s[23]=[ye("Preset: Balanced-Life",-1)])]),_:1})]),($(!0),D(de,null,ze(t.categoryOptions,h=>{var w,T;return $(),D("div",{class:"target-category",key:h.id},[l("div",Od,[l("input",{class:"cat-name",type:"text",value:h.label,placeholder:"Category name",onInput:x=>t.$emit("set-category-label",{id:h.id,label:x.target.value})},null,40,Hd),l("button",{class:"remove-cat",type:"button",disabled:t.categoryOptions.length<=1,title:"Remove category",onClick:x=>t.$emit("remove-category",h.id)},"  ",8,Rd)]),l("div",Fd,[l("label",Wd,[s[24]||(s[24]=l("span",{class:"label"},"Target (h)",-1)),l("input",{type:"number",value:h.targetHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!t.categoryTargetMessages[h.id],onInput:x=>t.$emit("set-category-target",{id:h.id,value:x.target.value})},null,40,Bd),t.categoryTargetMessages[h.id]?($(),D("div",{key:0,class:ve(["input-message",(w=t.categoryTargetMessages[h.id])==null?void 0:w.tone])},I((T=t.categoryTargetMessages[h.id])==null?void 0:T.text),3)):q("",!0)]),l("label",jd,[s[26]||(s[26]=l("span",{class:"label"},"Pace mode",-1)),l("select",{value:h.paceMode||t.targets.pace.mode,onChange:x=>t.$emit("set-category-pace",{id:h.id,mode:x.target.value})},[...s[25]||(s[25]=[l("option",{value:"days_only"},"Days only",-1),l("option",{value:"time_aware"},"Time aware",-1)])],40,Ud)]),l("label",Vd,[l("input",{type:"checkbox",checked:h.includeWeekend,onChange:x=>t.$emit("set-category-weekend",{id:h.id,value:x.target.checked})},null,40,zd),s[27]||(s[27]=l("span",null,"Weekend",-1))])])])}),128)),ie(C(gt),{type:"tertiary",class:"add-category",disabled:!t.canAddCategory,onClick:s[4]||(s[4]=h=>t.$emit("add-category"))},{default:We(()=>[...s[28]||(s[28]=[ye(" Add category ",-1)])]),_:1},8,["disabled"]),l("div",Kd,[s[34]||(s[34]=l("div",{class:"section-title"},"Pace",-1)),l("label",Gd,[l("input",{type:"checkbox",checked:t.targets.pace.includeWeekendTotal,onChange:s[5]||(s[5]=h=>t.$emit("set-include-weekend-total",h.target.checked))},null,40,qd),s[29]||(s[29]=l("span",null,"Count weekend in total pace",-1))]),l("label",Jd,[s[31]||(s[31]=l("span",{class:"label"},"Mode",-1)),l("select",{value:t.targets.pace.mode,onChange:s[6]||(s[6]=h=>t.$emit("set-pace-mode",h.target.value))},[...s[30]||(s[30]=[l("option",{value:"days_only"},"Days only",-1),l("option",{value:"time_aware"},"Time aware",-1)])],40,Zd)]),l("label",Yd,[s[32]||(s[32]=l("span",{class:"label"},"On track  gap (%)",-1)),l("input",{type:"number",value:t.targets.pace.thresholds.onTrack,step:"0.1","aria-invalid":!!t.paceThresholdMessages.onTrack,onInput:s[7]||(s[7]=h=>t.$emit("set-threshold",{key:"onTrack",value:h.target.value}))},null,40,Xd),t.paceThresholdMessages.onTrack?($(),D("div",{key:0,class:ve(["input-message",(i=t.paceThresholdMessages.onTrack)==null?void 0:i.tone])},I((c=t.paceThresholdMessages.onTrack)==null?void 0:c.text),3)):q("",!0)]),l("label",Qd,[s[33]||(s[33]=l("span",{class:"label"},"At risk  gap (%)",-1)),l("input",{type:"number",value:t.targets.pace.thresholds.atRisk,step:"0.1","aria-invalid":!!t.paceThresholdMessages.atRisk,onInput:s[8]||(s[8]=h=>t.$emit("set-threshold",{key:"atRisk",value:h.target.value}))},null,40,ef),t.paceThresholdMessages.atRisk?($(),D("div",{key:0,class:ve(["input-message",(g=t.paceThresholdMessages.atRisk)==null?void 0:g.tone])},I((p=t.paceThresholdMessages.atRisk)==null?void 0:p.text),3)):q("",!0)])]),l("div",tf,[s[39]||(s[39]=l("div",{class:"section-title"},"Forecast",-1)),l("label",sf,[s[36]||(s[36]=l("span",{class:"label"},"Primary method",-1)),l("select",{value:t.targets.forecast.methodPrimary,onChange:s[9]||(s[9]=h=>t.$emit("set-forecast-method",h.target.value))},[...s[35]||(s[35]=[l("option",{value:"linear"},"Linear",-1),l("option",{value:"momentum"},"Momentum",-1)])],40,af)]),l("label",nf,[s[37]||(s[37]=l("span",{class:"label"},"Momentum window (days)",-1)),l("input",{type:"number",value:t.targets.forecast.momentumLastNDays,min:"1",max:"14",step:"1","aria-invalid":!!t.forecastMomentumMessage,onInput:s[10]||(s[10]=h=>t.$emit("set-forecast-momentum",h.target.value))},null,40,rf),t.forecastMomentumMessage?($(),D("div",{key:0,class:ve(["input-message",(d=t.forecastMomentumMessage)==null?void 0:d.tone])},I((f=t.forecastMomentumMessage)==null?void 0:f.text),3)):q("",!0)]),l("label",of,[s[38]||(s[38]=l("span",{class:"label"},"Padding (h)",-1)),l("input",{type:"number",value:t.targets.forecast.padding,min:"0",step:"0.1","aria-invalid":!!t.forecastPaddingMessage,onInput:s[11]||(s[11]=h=>t.$emit("set-forecast-padding",h.target.value))},null,40,lf),t.forecastPaddingMessage?($(),D("div",{key:0,class:ve(["input-message",(u=t.forecastPaddingMessage)==null?void 0:u.tone])},I((b=t.forecastPaddingMessage)==null?void 0:b.text),3)):q("",!0)])]),l("div",cf,[s[48]||(s[48]=l("div",{class:"section-title"},"Display",-1)),l("label",uf,[l("input",{type:"checkbox",checked:t.targets.ui.showCalendarCharts,onChange:s[12]||(s[12]=h=>t.$emit("set-ui-option",{key:"showCalendarCharts",value:h.target.checked}))},null,40,df),s[40]||(s[40]=l("span",null,"Show calendar charts",-1))]),l("label",ff,[l("input",{type:"checkbox",checked:t.targets.ui.showCategoryCharts,onChange:s[13]||(s[13]=h=>t.$emit("set-ui-option",{key:"showCategoryCharts",value:h.target.checked}))},null,40,gf),s[41]||(s[41]=l("span",null,"Show category charts",-1))]),l("label",pf,[l("input",{type:"checkbox",checked:t.targets.ui.showTotalDelta,onChange:s[14]||(s[14]=h=>t.$emit("set-ui-option",{key:"showTotalDelta",value:h.target.checked}))},null,40,hf),s[42]||(s[42]=l("span",null,"Show total delta",-1))]),l("label",mf,[l("input",{type:"checkbox",checked:t.targets.ui.showNeedPerDay,onChange:s[15]||(s[15]=h=>t.$emit("set-ui-option",{key:"showNeedPerDay",value:h.target.checked}))},null,40,vf),s[43]||(s[43]=l("span",null,"Show need per day",-1))]),l("label",yf,[l("input",{type:"checkbox",checked:t.targets.ui.showCategoryBlocks,onChange:s[16]||(s[16]=h=>t.$emit("set-ui-option",{key:"showCategoryBlocks",value:h.target.checked}))},null,40,bf),s[44]||(s[44]=l("span",null,"Show categories",-1))]),l("label",wf,[l("input",{type:"checkbox",checked:t.targets.ui.badges,onChange:s[17]||(s[17]=h=>t.$emit("set-ui-option",{key:"badges",value:h.target.checked}))},null,40,_f),s[45]||(s[45]=l("span",null,"Status badges",-1))]),l("label",kf,[l("input",{type:"checkbox",checked:t.targets.ui.includeWeekendToggle,onChange:s[18]||(s[18]=h=>t.$emit("set-ui-option",{key:"includeWeekendToggle",value:h.target.checked}))},null,40,xf),s[46]||(s[46]=l("span",null,"Weekend toggle",-1))]),l("label",Sf,[l("input",{type:"checkbox",checked:t.targets.includeZeroDaysInStats,onChange:s[19]||(s[19]=h=>t.$emit("set-include-zero-days",h.target.checked))},null,40,Cf),s[47]||(s[47]=l("span",null,"Include zero days in pace",-1))])])])])}}}),Mf={id:"opsdash-sidebar-pane-summary",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-summary"},Tf={class:"target-config"},Af={class:"field"},Df={class:"summary-mode-toggle"},Ef={class:"target-section"},Pf=["checked","onChange"],If=Ie({__name:"SidebarSummaryPane",props:{summaryOptions:{},activeDayMode:{}},emits:["update:activeMode","toggle-option"],setup(e,{emit:t}){const s=e,a=t,n={showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},r=G(()=>({...n,...s.summaryOptions??{}})),o=[{key:"showTotal",label:"Total hours"},{key:"showAverage",label:"Average per day"},{key:"showMedian",label:"Median per day"},{key:"showBusiest",label:"Busiest day"},{key:"showWorkday",label:"Workdays row"},{key:"showWeekend",label:"Weekend row"},{key:"showWeekendShare",label:"Weekend share"},{key:"showCalendarSummary",label:"Top calendars"},{key:"showTopCategory",label:"Top category"},{key:"showBalance",label:"Balance index"}];return(i,c)=>($(),D("div",Mf,[c[6]||(c[6]=l("div",{class:"sb-title"},"Time Summary",-1)),l("div",Tf,[l("div",Af,[c[4]||(c[4]=l("span",{class:"label"},"Average mode",-1)),l("div",Df,[ie(C(ba),{type:"radio",name:"summary-mode-active",checked:i.activeDayMode==="active","onUpdate:checked":c[0]||(c[0]=g=>{g&&a("update:activeMode","active")})},{default:We(()=>[...c[2]||(c[2]=[ye(" Active days ",-1)])]),_:1},8,["checked"]),ie(C(ba),{type:"radio",name:"summary-mode-all",checked:i.activeDayMode==="all","onUpdate:checked":c[1]||(c[1]=g=>{g&&a("update:activeMode","all")})},{default:We(()=>[...c[3]||(c[3]=[ye(" All days ",-1)])]),_:1},8,["checked"])])]),l("div",Ef,[c[5]||(c[5]=l("div",{class:"section-title"},"Display",-1)),($(),D(de,null,ze(o,g=>l("label",{key:g.key,class:"field checkbox"},[l("input",{type:"checkbox",checked:r.value[g.key],onChange:p=>a("toggle-option",{key:g.key,value:p.target.checked})},null,40,Pf),l("span",null,I(g.label),1)])),64))])])]))}}),Nf={id:"opsdash-sidebar-pane-activity",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-activity"},Lf={class:"section-title-row"},Of=["aria-expanded"],Hf={key:0,class:"section-hint"},Rf={class:"target-section toggle-grid"},Ff=["checked","onChange"],Wf={class:"forecast-block"},Bf={class:"field"},jf=["value"],Uf=["value"],Vf={key:0,class:"section-hint forecast-hint"},zf=Ht(Ie({__name:"SidebarActivityPane",props:{activitySettings:{},activityToggles:{},forecastMode:{},forecastOptions:{},helpOpen:{type:Boolean}},emits:["toggle-help","toggle-option","update-forecast-mode"],setup(e,{emit:t}){const s=e,a=t,{activitySettings:n,activityToggles:r,forecastMode:o,forecastOptions:i,helpOpen:c}=tr(s),g=G(()=>{var f;const d=(f=i.value)==null?void 0:f.find(u=>u.value===o.value);return(d==null?void 0:d.description)??""});function p(d){(d==="off"||d==="total"||d==="calendar"||d==="category")&&a("update-forecast-mode",d)}return(d,f)=>($(),D("div",Nf,[l("div",Lf,[f[3]||(f[3]=l("div",{class:"section-title"},"Activity & Schedule",-1)),l("button",{type:"button",class:"info-button","aria-expanded":C(c),"aria-label":"Activity & Schedule help",onClick:f[0]||(f[0]=u=>a("toggle-help"))},[...f[2]||(f[2]=[l("span",null,"?",-1)])],8,Of)]),C(c)?($(),D("p",Hf,"Choose which metrics appear on the Activity & Schedule card.")):q("",!0),l("div",Rf,[($(!0),D(de,null,ze(C(r),([u,b])=>($(),D("label",{key:u,class:"field checkbox toggle-field"},[l("input",{type:"checkbox",checked:C(n)[u],onChange:h=>a("toggle-option",{key:u,value:h.target.checked})},null,40,Ff),l("span",null,I(b),1)]))),128))]),l("div",Wf,[f[5]||(f[5]=l("div",{class:"section-title"},"Bar chart projection",-1)),l("label",Bf,[f[4]||(f[4]=l("span",{class:"label"},"Projection mode",-1)),l("select",{value:C(o),onChange:f[1]||(f[1]=u=>p(u.target.value))},[($(!0),D(de,null,ze(C(i),u=>($(),D("option",{key:u.value,value:u.value},I(u.label),9,Uf))),128))],40,jf)]),g.value?($(),D("p",Vf,I(g.value),1)):q("",!0)])]))}}),[["__scopeId","data-v-4d86aa83"]]),Kf={id:"opsdash-sidebar-pane-balance",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-balance"},Gf={class:"section-title-row"},qf=["aria-expanded"],Jf={class:"target-section"},Zf={class:"section-title-row"},Yf=["aria-expanded"],Xf={key:0,class:"section-hint"},Qf={class:"field-grid"},eg={class:"field"},tg=["value","aria-invalid"],sg={class:"field"},ag=["value","aria-invalid"],ng={class:"field"},rg=["value","aria-invalid"],og={class:"target-section"},ig={class:"section-title-row"},lg=["aria-expanded"],cg={key:0,class:"section-hint"},ug={class:"field-grid"},dg={class:"field"},fg=["value"],gg={class:"field"},pg=["value","aria-invalid"],hg={class:"target-section"},mg={class:"section-title-row"},vg=["aria-expanded"],yg={key:0,class:"section-hint"},bg={class:"toggle-grid"},wg={class:"field checkbox toggle-field"},_g=["checked"],kg={class:"field checkbox toggle-field"},xg=["checked"],Sg={class:"field checkbox toggle-field"},Cg=["checked"],$g={class:"field-grid mt-8"},Mg={class:"field"},Tg=["value","aria-invalid"],Ag=["value"],Dg={class:"field"},Eg=["value","aria-invalid"],Pg=["value"],Ig=Ie({__name:"SidebarBalancePane",props:{balanceSettings:{},balanceThresholdMessages:{},balanceLookbackMessage:{},balanceUiPrecisionMessages:{},roundingOptions:{},helpThresholds:{type:Boolean},helpTrend:{type:Boolean},helpDisplay:{type:Boolean}},emits:["toggle-help","set-threshold","set-relation","set-lookback","set-ui-toggle","set-ui-precision"],setup(e,{emit:t}){const s=e,a=t,{balanceSettings:n,balanceThresholdMessages:r,balanceLookbackMessage:o,balanceUiPrecisionMessages:i,roundingOptions:c,helpThresholds:g,helpTrend:p,helpDisplay:d}=tr(s);return(f,u)=>{var b,h,w,T,x,S,E,R,X,J,V,re;return $(),D("div",Kf,[l("div",Gf,[u[15]||(u[15]=l("div",{class:"section-title subtitle"},"Balance Overview",-1)),l("button",{type:"button",class:"info-button","aria-expanded":C(g)||C(p)||C(d),"aria-label":"Balance Overview help",onClick:u[0]||(u[0]=Z=>a("toggle-help","all"))},[...u[14]||(u[14]=[l("span",null,"?",-1)])],8,qf)]),l("div",Jf,[l("div",Zf,[u[17]||(u[17]=l("div",{class:"section-subtitle subtitle"},"Thresholds",-1)),l("button",{type:"button",class:"info-button","aria-expanded":C(g),"aria-label":"Thresholds help",onClick:u[1]||(u[1]=Z=>a("toggle-help","thresholds"))},[...u[16]||(u[16]=[l("span",null,"?",-1)])],8,Yf)]),C(g)?($(),D("p",Xf,"Set the share/index limits that trigger balance warnings.")):q("",!0),l("div",Qf,[l("label",eg,[u[18]||(u[18]=l("span",{class:"label"},"Notice max share",-1)),l("input",{type:"number",min:"0",max:"1",step:"0.01",value:C(n).thresholds.noticeMaxShare,"aria-invalid":!!C(r).noticeMaxShare,onInput:u[2]||(u[2]=Z=>a("set-threshold",{key:"noticeMaxShare",value:Z.target.value}))},null,40,tg),C(r).noticeMaxShare?($(),D("div",{key:0,class:ve(["input-message",(b=C(r).noticeMaxShare)==null?void 0:b.tone])},I((h=C(r).noticeMaxShare)==null?void 0:h.text),3)):q("",!0)]),l("label",sg,[u[19]||(u[19]=l("span",{class:"label"},"Warn max share",-1)),l("input",{type:"number",min:"0",max:"1",step:"0.01",value:C(n).thresholds.warnMaxShare,"aria-invalid":!!C(r).warnMaxShare,onInput:u[3]||(u[3]=Z=>a("set-threshold",{key:"warnMaxShare",value:Z.target.value}))},null,40,ag),C(r).warnMaxShare?($(),D("div",{key:0,class:ve(["input-message",(w=C(r).warnMaxShare)==null?void 0:w.tone])},I((T=C(r).warnMaxShare)==null?void 0:T.text),3)):q("",!0)]),l("label",ng,[u[20]||(u[20]=l("span",{class:"label"},"Warn index",-1)),l("input",{type:"number",min:"0",max:"1",step:"0.01",value:C(n).thresholds.warnIndex,"aria-invalid":!!C(r).warnIndex,onInput:u[4]||(u[4]=Z=>a("set-threshold",{key:"warnIndex",value:Z.target.value}))},null,40,rg),C(r).warnIndex?($(),D("div",{key:0,class:ve(["input-message",(x=C(r).warnIndex)==null?void 0:x.tone])},I((S=C(r).warnIndex)==null?void 0:S.text),3)):q("",!0)])])]),l("div",og,[l("div",ig,[u[22]||(u[22]=l("div",{class:"section-subtitle subtitle"},"Trend & Relations",-1)),l("button",{type:"button",class:"info-button","aria-expanded":C(p),"aria-label":"Trend help",onClick:u[5]||(u[5]=Z=>a("toggle-help","trend"))},[...u[21]||(u[21]=[l("span",null,"?",-1)])],8,lg)]),C(p)?($(),D("p",cg,"Control the comparison window and how ratios are expressed.")):q("",!0),l("div",ug,[l("label",dg,[u[24]||(u[24]=l("span",{class:"label"},"Relation display",-1)),l("select",{value:C(n).relations.displayMode,onChange:u[6]||(u[6]=Z=>a("set-relation",Z.target.value))},[...u[23]||(u[23]=[l("option",{value:"ratio"},"Ratio (A : B)",-1),l("option",{value:"factor"},"Factor (A)",-1)])],40,fg)]),l("label",gg,[u[25]||(u[25]=l("span",{class:"label"},"Trend lookback (weeks)",-1)),l("input",{type:"number",min:"1",max:"12",step:"1",value:C(n).trend.lookbackWeeks,"aria-invalid":!!C(o),onInput:u[7]||(u[7]=Z=>a("set-lookback",Z.target.value))},null,40,pg),C(o)?($(),D("div",{key:0,class:ve(["input-message",(E=C(o))==null?void 0:E.tone])},I((R=C(o))==null?void 0:R.text),3)):q("",!0)])])]),l("div",hg,[l("div",mg,[u[27]||(u[27]=l("div",{class:"section-subtitle subtitle"},"Display",-1)),l("button",{type:"button",class:"info-button","aria-expanded":C(d),"aria-label":"Display help",onClick:u[8]||(u[8]=Z=>a("toggle-help","display"))},[...u[26]||(u[26]=[l("span",null,"?",-1)])],8,vg)]),C(d)?($(),D("p",yg,"Toggle optional insights and adjust rounding for the card values.")):q("",!0),l("div",bg,[l("label",wg,[l("input",{type:"checkbox",checked:C(n).ui.showInsights,onChange:u[9]||(u[9]=Z=>a("set-ui-toggle",{key:"showInsights",value:Z.target.checked}))},null,40,_g),u[28]||(u[28]=l("span",null,"Insights",-1))]),l("label",kg,[l("input",{type:"checkbox",checked:C(n).ui.showDailyStacks,onChange:u[10]||(u[10]=Z=>a("set-ui-toggle",{key:"showDailyStacks",value:Z.target.checked}))},null,40,xg),u[29]||(u[29]=l("span",null,"Daily mix (experimental)",-1))]),l("label",Sg,[l("input",{type:"checkbox",checked:C(n).dayparts.enabled,onChange:u[11]||(u[11]=Z=>a("set-ui-toggle",{key:"dayparts",value:Z.target.checked}))},null,40,Cg),u[30]||(u[30]=l("span",null,"Dayparts",-1))])]),l("div",$g,[l("label",Mg,[u[31]||(u[31]=l("span",{class:"label"},"Percent precision",-1)),l("select",{value:C(n).ui.roundPercent,"aria-invalid":!!C(i).roundPercent,onChange:u[12]||(u[12]=Z=>a("set-ui-precision",{key:"roundPercent",value:Z.target.value}))},[($(!0),D(de,null,ze(C(c),Z=>($(),D("option",{key:`round-percent-${Z}`,value:Z},I(Z),9,Ag))),128))],40,Tg),C(i).roundPercent?($(),D("div",{key:0,class:ve(["input-message",(X=C(i).roundPercent)==null?void 0:X.tone])},I((J=C(i).roundPercent)==null?void 0:J.text),3)):q("",!0)]),l("label",Dg,[u[32]||(u[32]=l("span",{class:"label"},"Ratio precision",-1)),l("select",{value:C(n).ui.roundRatio,"aria-invalid":!!C(i).roundRatio,onChange:u[13]||(u[13]=Z=>a("set-ui-precision",{key:"roundRatio",value:Z.target.value}))},[($(!0),D(de,null,ze(C(c),Z=>($(),D("option",{key:`round-ratio-${Z}`,value:Z},I(Z),9,Pg))),128))],40,Eg),C(i).roundRatio?($(),D("div",{key:0,class:ve(["input-message",(V=C(i).roundRatio)==null?void 0:V.tone])},I((re=C(i).roundRatio)==null?void 0:re.text),3)):q("",!0)])])])])}}}),Ng={class:"notes-section"},Lg=["title"],Og=["value"],Hg=["title"],Rg=["value"],Fg={class:"notes-actions"},Wg=Ht(Ie({__name:"NotesPanel",props:{previous:{},modelValue:{},prevLabel:{},currLabel:{},prevTitle:{},currTitle:{},saving:{type:Boolean}},emits:["update:modelValue","save"],setup(e){return(t,s)=>($(),D("div",Ng,[l("div",{class:"hint",title:t.prevTitle},I(t.prevLabel),9,Lg),l("textarea",{value:t.previous,readonly:"",rows:"5",class:"notes-textarea","aria-label":"Previous notes"},null,8,Og),l("div",{class:"hint",title:t.currTitle},I(t.currLabel),9,Hg),l("textarea",{value:t.modelValue,onInput:s[0]||(s[0]=a=>t.$emit("update:modelValue",a.target.value)),rows:"5",class:"notes-textarea notes-textarea--editable",placeholder:"Write your notes","aria-label":"Current notes"},null,40,Rg),l("div",Fg,[ie(C(gt),{type:"tertiary",disabled:t.saving,onClick:s[1]||(s[1]=a=>t.$emit("save"))},{default:We(()=>[...s[2]||(s[2]=[ye("Save",-1)])]),_:1},8,["disabled"])])]))}}),[["__scopeId","data-v-f84bfd89"]]),Bg={id:"opsdash-sidebar-pane-notes",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-notes"},jg=Ie({__name:"SidebarNotesPane",props:{previous:{},modelValue:{},prevLabel:{},currLabel:{},prevTitle:{},currTitle:{},saving:{type:Boolean}},emits:["update:modelValue","save"],setup(e,{emit:t}){const s=e,a=t,{previous:n,modelValue:r,prevLabel:o,currLabel:i,prevTitle:c,currTitle:g,saving:p}=s;return(d,f)=>($(),D("div",Bg,[f[2]||(f[2]=l("div",{class:"sb-title"},"Notes",-1)),ie(Wg,{previous:C(n),"model-value":C(r),"prev-label":C(o),"curr-label":C(i),"prev-title":C(c),"curr-title":C(g),saving:C(p),"onUpdate:modelValue":f[0]||(f[0]=u=>a("update:modelValue",u)),onSave:f[1]||(f[1]=u=>a("save"))},null,8,["previous","model-value","prev-label","curr-label","prev-title","curr-title","saving"])]))}}),Ug={id:"opsdash-sidebar-pane-config",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-config"},Vg={class:"preset-form"},zg=["disabled"],Kg={key:0,class:"preset-error"},Gg={key:0,class:"preset-warnings"},qg={class:"preset-header"},Jg={key:1,class:"preset-empty"},Zg={key:2,class:"preset-list"},Yg={class:"preset-meta"},Xg={class:"preset-name"},Qg={class:"preset-info"},ep={key:0},tp={class:"preset-actions"},sp=Ht(Ie({__name:"SidebarConfigPane",props:{presets:{},isLoading:{type:Boolean},isSaving:{type:Boolean},isApplying:{type:Boolean},warnings:{}},emits:["save","load","delete","refresh","clear-warnings"],setup(e,{emit:t}){const s=t,a=ne(""),n=ne(null);function r(){const g=a.value.trim();if(!g){n.value="Enter a profile name";return}n.value=null,s("save",g),a.value=""}function o(g){s("load",g)}function i(g){window.confirm(`Delete profile "${g}"?`)&&s("delete",g)}function c(g){if(!g)return"";const p=new Date(g);if(Number.isNaN(p.getTime()))return g;const f=new Date().getTime()-p.getTime(),u=Math.round(f/6e4);if(u<1)return"just now";if(u<60)return`${u} min ago`;const b=Math.round(u/60);if(b<24)return`${b} h ago`;const h=Math.round(b/24);return h<7?`${h} d ago`:p.toLocaleDateString()}return os(()=>{s("refresh")}),(g,p)=>($(),D("div",Ug,[p[8]||(p[8]=l("div",{class:"sb-title"},"Configuration Profiles",-1)),p[9]||(p[9]=l("p",{class:"sb-description"}," Save and restore complete sidebar configurations (calendars, groups, targets, settings). ",-1)),l("div",Vg,[p[3]||(p[3]=l("label",{class:"preset-label",for:"preset-name"},"Profile name",-1)),ks(l("input",{id:"preset-name","onUpdate:modelValue":p[0]||(p[0]=d=>a.value=d),type:"text",placeholder:"e.g. Focus week",disabled:g.isSaving,onKeyup:tc(r,["enter"])},null,40,zg),[[Yl,a.value]]),n.value?($(),D("div",Kg,I(n.value),1)):q("",!0),ie(C(gt),{class:"preset-save",type:"primary",disabled:g.isSaving||!a.value.trim(),onClick:r},{default:We(()=>[ye(I(g.isSaving?"Saving":"Save current configuration"),1)]),_:1},8,["disabled"])]),g.warnings.length?($(),D("div",Gg,[p[5]||(p[5]=l("div",{class:"warnings-title"},"Warnings",-1)),l("ul",null,[($(!0),D(de,null,ze(g.warnings,(d,f)=>($(),D("li",{key:f},I(d),1))),128))]),ie(C(gt),{type:"tertiary",class:"preset-clear",onClick:p[1]||(p[1]=d=>s("clear-warnings"))},{default:We(()=>[...p[4]||(p[4]=[ye(" Clear warnings ",-1)])]),_:1})])):q("",!0),l("div",qg,[p[6]||(p[6]=l("h3",null,"Saved profiles",-1)),ie(C(gt),{type:"tertiary",disabled:g.isLoading,onClick:p[2]||(p[2]=d=>s("refresh"))},{default:We(()=>[ye(I(g.isLoading?"Refreshing":"Refresh list"),1)]),_:1},8,["disabled"])]),!g.presets.length&&!g.isLoading?($(),D("div",Jg," No profiles yet. Save one above to get started. ")):($(),D("ul",Zg,[($(!0),D(de,null,ze(g.presets,d=>($(),D("li",{key:d.name,class:"preset-item"},[l("div",Yg,[l("div",Xg,I(d.name),1),l("div",Qg,[l("span",null,I(d.selectedCount)+" calendars",1),l("span",null,I(d.calendarCount)+" groups",1),d.updatedAt?($(),D("span",ep,"Updated "+I(c(d.updatedAt)),1)):q("",!0)])]),l("div",tp,[ie(C(gt),{type:"primary",disabled:g.isApplying,onClick:f=>o(d.name)},{default:We(()=>[ye(I(g.isApplying?"Applying":"Load"),1)]),_:2},1032,["disabled","onClick"]),ie(C(gt),{type:"tertiary",disabled:g.isApplying,onClick:f=>i(d.name)},{default:We(()=>[...p[7]||(p[7]=[ye(" Delete ",-1)])]),_:2},1032,["disabled","onClick"])])]))),128))]))]))}}),[["__scopeId","data-v-d602d23c"]]);function ap(e,t){const{allowEmpty:s=!1}=t;if(e===""||e===null||e===void 0)return s?{value:null}:{value:null,error:"Enter a number"};const a=Number(e);if(!Number.isFinite(a))return{value:null,error:"Enter a valid number"};let n=a,r;if(typeof t.min=="number"&&n<t.min&&(n=t.min,r=pn(t)),typeof t.max=="number"&&n>t.max&&(n=t.max,r=pn(t)),typeof t.step=="number"&&t.step>0){const i=rp(n,t.step);i!==n&&(n=i,r=pn(t))}const o=yo(t);return typeof o=="number"&&(n=Number(n.toFixed(o))),{value:n,warning:r}}function np(e,t){const s=ap(e,t),a=[];return s.error&&a.push({severity:"error",message:s.error}),s.warning&&a.push({severity:"warning",message:s.warning}),{value:s.value,issues:a}}function rp(e,t){const s=yo({step:t}),a=Math.round(e/t)*t;return typeof s=="number"?Number(a.toFixed(s)):a}function yo(e){if(typeof e.decimals=="number")return e.decimals;if(typeof e.step=="number")return op(e.step)}function op(e){const t=e.toString();if(t.includes("e-")){const[,a]=t.split("e-");return Number(a)}const[,s=""]=t.split(".");return s.length}function pn(e){const t=[];return typeof e.min=="number"&&typeof e.max=="number"?t.push(`Allowed range ${e.min}  ${e.max}`):typeof e.min=="number"?t.push(`Minimum ${e.min}`):typeof e.max=="number"&&t.push(`Maximum ${e.max}`),typeof e.step=="number"&&e.step>0&&t.push(`step ${e.step}`),`Adjusted to allowed value (${t.join(", ")})`}function ip(e,t,s="Enter a valid number"){const a=np(e,t),n=a.issues.find(i=>i.severity==="error"),r=a.issues.find(i=>i.severity==="warning");let o=null;return n||a.value===null?o={text:(n==null?void 0:n.message)??s,tone:"error"}:r&&(o={text:r.message,tone:"warning"}),{ok:!n&&a.value!==null,value:a.value,message:o}}function Tt(e,t,s,a,n){const{ok:r,value:o,message:i}=ip(e,t,n);return s(i),!r||o===null?!1:(a(o),!0)}const lp={class:"rangebar",title:"Time range"},cp={class:"range-actions"},up=["disabled"],dp=["aria-label"],fp={class:"range-toggle"},gp={class:"range-nav"},pp={class:"range-dates"},hp={class:"sb-tabs sb-tabs--primary",role:"tablist","aria-label":"Sidebar sections"},mp=["aria-selected"],vp=["aria-selected"],yp=["aria-selected"],bp={class:"sb-tabs sb-tabs--secondary",role:"tablist","aria-label":"Detail settings"},wp=["aria-selected"],_p=["aria-selected"],kp=["aria-selected"],xp={class:"sb-tabs sb-tabs--secondary",role:"tablist","aria-label":"Advanced configuration"},Sp=["aria-selected"],Cp=Ht(Ie({__name:"Sidebar",props:{calendars:{},selected:{},groupsById:{},isLoading:{type:Boolean},range:{},offset:{},from:{},to:{},targetsWeek:{},targetsMonth:{},notesPrev:{},notesCurrDraft:{},notesLabelPrev:{},notesLabelCurr:{},notesLabelPrevTitle:{},notesLabelCurrTitle:{},isSavingNote:{type:Boolean},targetsConfig:{},activeDayMode:{},navToggleLabel:{},navToggleIcon:{},presets:{},presetsLoading:{type:Boolean},presetSaving:{type:Boolean},presetApplying:{type:Boolean},presetWarnings:{}},emits:["load","update:range","update:offset","select-all","toggle-calendar","set-group","set-target","update:notes","save-notes","update:targets-config","update:active-mode","toggle-nav","save-preset","load-preset","delete-preset","refresh-presets","clear-preset-warnings"],setup(e,{emit:t}){const s=e,a=t,n=ne("calendars"),r=G(()=>s.targetsConfig),o=G(()=>{var _;return((_=r.value)==null?void 0:_.categories)??[]}),i=G(()=>s.presets??[]);function c(_){const y=vt(JSON.parse(JSON.stringify(s.targetsConfig||{})));_(y),a("update:targets-config",y)}const g=G(()=>xe()!==null),p=G(()=>{var _;return((_=r.value)==null?void 0:_.timeSummary)??{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0}}),d=G(()=>{var _;return{...us(),...((_=r.value)==null?void 0:_.activityCard)??{}}}),f={showWeekendShare:"Weekend share",showEveningShare:"Evening share",showEarliestLatest:"Earliest/Late times",showOverlaps:"Overlaps",showLongestSession:"Longest session",showLastDayOff:"Last day off",showHint:"Show mapping hint"},u=G(()=>Object.entries(f)),b=[{value:"off",label:"Do not project future days",description:"Keep charts empty until events occur."},{value:"total",label:"Distribute remaining total target",description:"Split leftover total target hours evenly across future days using current calendar mix."},{value:"calendar",label:"Respect calendar targets",description:"Use per-calendar targets for the current range and spread remaining hours across future days."},{value:"category",label:"Respect category targets",description:"Allocate remaining category targets across future days according to current mappings."}],h=G(()=>{var L;const _=on(),y=((L=r.value)==null?void 0:L.balance)??_;return{..._,...y,thresholds:{..._.thresholds,...y.thresholds??{}},relations:{..._.relations,...y.relations??{}},trend:{..._.trend,...y.trend??{}},dayparts:{..._.dayparts,...y.dayparts??{}},ui:{..._.ui,...y.ui??{}}}}),w=[0,1,2,3],T=xt({activity:!1,balanceThresholds:!1,balanceTrend:!1,balanceDisplay:!1}),x=xt({}),S=xt({}),E=ne(null),R=ne(null),X=xt({onTrack:null,atRisk:null}),J=xt({noticeMaxShare:null,warnMaxShare:null,warnIndex:null}),V=ne(null),re=ne(null),Z=ne(null),le=xt({roundPercent:null,roundRatio:null});function xe(){const _=new Set;for(const y of o.value)(y.groupIds||[]).forEach(L=>_.add(Number(L)));Object.values(s.groupsById||{}).forEach(y=>_.add(Number(y)));for(let y=1;y<=9;y++)if(!_.has(y))return y;return null}function Me(){return`cat-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`}function Ne(_){const y=te(_),L=o.value.find(he=>Array.isArray(he.groupIds)&&he.groupIds.includes(y));return L?L.id:""}function K(_,y){if(!y){a("set-group",{id:_,n:0});return}const L=o.value.find(pt=>pt.id===y);if(!L){a("set-group",{id:_,n:0});return}const he=ue(L.id);a("set-group",{id:_,n:he})}function ue(_){const y=o.value.find(pt=>pt.id===_);if(!y)return 0;const L=Array.isArray(y.groupIds)&&y.groupIds.length?Number(y.groupIds[0]):null;if(L&&Number.isFinite(L))return L;const he=xe()??0;return c(pt=>{const xa=pt.categories.find(gs=>gs.id===_);xa&&(xa.groupIds=he?[he]:[])}),he}function Q(_,y){c(L=>{const he=L.categories.find(pt=>pt.id===_);he&&y(he)})}function te(_){const y=Number((s.groupsById||{})[_]??0);return isFinite(y)?Math.max(0,Math.min(9,Math.trunc(y))):0}function be(_){const y=s.range==="month"?s.targetsMonth||{}:s.targetsWeek||{},L=Number(y[_]??"");return isFinite(L)?L:""}function De(_){a("select-all",_)}function Le(_){a("toggle-calendar",_)}function we(_){K(_.id,_.category)}function _e(_){m(_.id,_.value)}function Te(_){W(_.key,_.value)}function je(_){F(_.key,_.value)}function Ee(_){_!=="off"&&_!=="total"&&_!=="calendar"&&_!=="category"||c(y=>{y.activityCard||(y.activityCard=us()),y.activityCard.forecastMode=_})}function Ce(){T.activity=!T.activity}function se(_){if(_==="all"){const y=!(T.balanceThresholds&&T.balanceTrend&&T.balanceDisplay);T.balanceThresholds=y,T.balanceTrend=y,T.balanceDisplay=y;return}_==="thresholds"?T.balanceThresholds=!T.balanceThresholds:_==="trend"?T.balanceTrend=!T.balanceTrend:_==="display"&&(T.balanceDisplay=!T.balanceDisplay)}function Ke(_){ae(_.key,_.value)}function He(_){if(_.key==="dayparts"){c(y=>{y.balance.dayparts.enabled=_.value});return}ge(_.key,_.value)}function Ue(_){$e(_.key,_.value)}function m(_,y){Tt(y,{min:0,max:1e4,step:.25,decimals:2},L=>{x[_]=L},L=>a("set-target",{id:_,h:L}))}function v(_){Tt(_,{min:0,max:1e3,step:.5,decimals:2},y=>{E.value=y},y=>c(L=>{L.totalHours=y}))}function M(_){Tt(_,{min:0,max:24,step:.25,decimals:2},y=>{R.value=y},y=>c(L=>{L.allDayHours=y}),"024 hours per day")}function O(_,y){Tt(y,{min:0,max:1e3,step:.5,decimals:2},L=>{S[_]=L},L=>Q(_,he=>{he.targetHours=L}))}function P(_,y){Q(_,L=>{L.label=y.trim()||L.label})}function N(_,y){Q(_,L=>{L.includeWeekend=y})}function B(_){s.activeDayMode!==_&&a("update:active-mode",_)}function W(_,y){c(L=>{L.timeSummary||(L.timeSummary=JSON.parse(JSON.stringify(p.value))),L.timeSummary[_]=y})}function F(_,y){c(L=>{L.activityCard||(L.activityCard=us()),L.activityCard[_]=y})}function H(_,y){y!=="days_only"&&y!=="time_aware"||Q(_,L=>{L.paceMode=y})}function ee(_){c(y=>{y.pace.includeWeekendTotal=_})}function z(_){_!=="days_only"&&_!=="time_aware"||c(y=>{y.pace.mode=_})}function Y(_,y){Tt(y,{min:-100,max:100,step:.1,decimals:1},L=>{X[_]=L},L=>c(he=>{he.pace.thresholds[_]=L}))}function ae(_,y){Tt(y,{min:0,max:1,step:.01,decimals:2},L=>{J[_]=L},L=>c(he=>{he.balance.thresholds[_]=Number(L.toFixed(2))}))}function fe(_){const y=_==="factor"?"factor":"ratio";c(L=>{L.balance.relations.displayMode=y})}function pe(_){Tt(_,{min:1,max:12,step:1,decimals:0},y=>{Z.value=y},y=>c(L=>{L.balance.trend.lookbackWeeks=y}))}function ge(_,y){c(L=>{L.balance.ui[_]=y})}function $e(_,y){Tt(y,{min:0,max:3,step:1,decimals:0},L=>{le[_]=L},L=>c(he=>{he.balance.ui[_]=L}))}function Re(_){const y=_==="momentum"?"momentum":"linear";c(L=>{L.forecast.methodPrimary=y})}function Ve(_){Tt(_,{min:1,max:14,step:1,decimals:0},y=>{V.value=y},y=>c(L=>{L.forecast.momentumLastNDays=y}))}function Ye(_){Tt(_,{min:0,max:100,step:.1,decimals:1},y=>{re.value=y},y=>c(L=>{L.forecast.padding=y}))}function at(_,y){c(L=>{L.ui[_]=y})}function fs(_){c(y=>{y.includeZeroDaysInStats=_})}function Xe(_){c(y=>{_==="work-week"?(y.totalHours=48,y.categories=[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",groupIds:[1]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",groupIds:[2]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",groupIds:[3]}],y.allDayHours=8,y.pace.includeWeekendTotal=!0,y.pace.mode="days_only",y.pace.thresholds={onTrack:-2,atRisk:-10},y.forecast.methodPrimary="linear",y.forecast.momentumLastNDays=2,y.forecast.padding=1.5,y.includeZeroDaysInStats=!1,y.ui.showCalendarCharts=!0,y.ui.showCategoryCharts=!0):_==="balanced-life"&&(y.totalHours=48,y.categories=[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"time_aware",groupIds:[1]},{id:"hobby",label:"Hobby",targetHours:8,includeWeekend:!0,paceMode:"time_aware",groupIds:[2]},{id:"sport",label:"Sport",targetHours:6,includeWeekend:!0,paceMode:"time_aware",groupIds:[3]}],y.allDayHours=8,y.pace.includeWeekendTotal=!0,y.pace.mode="time_aware",y.pace.thresholds={onTrack:-2,atRisk:-10},y.forecast.methodPrimary="linear",y.forecast.momentumLastNDays=2,y.forecast.padding=1.5,y.includeZeroDaysInStats=!1,y.ui.showCalendarCharts=!0,y.ui.showCategoryCharts=!0)})}function Qe(){var y;const _=xe();if(_===null){(y=window.alert)==null||y.call(window,"All category slots are currently in use (max 9).");return}c(L=>{L.categories=[...L.categories,{id:Me(),label:`Category ${L.categories.length+1}`,targetHours:0,includeWeekend:!0,paceMode:"days_only",groupIds:[_]}]})}function Wt(_){if(o.value.length<=1)return;const y=o.value.find(he=>he.id===_);if(!y)return;const L=Array.isArray(y.groupIds)&&y.groupIds.length?Number(y.groupIds[0]):null;c(he=>{he.categories=he.categories.filter(pt=>pt.id!==_)}),L!==null&&Object.entries(s.groupsById||{}).forEach(([he,pt])=>{Number(pt)===L&&a("set-group",{id:he,n:0})})}return(_,y)=>($(),qe(C(lc),null,{default:We(()=>[Fi(_.$slots,"actions",{},void 0,!0),y[30]||(y[30]=l("div",{class:"sb-title",title:"Kalender filtern und gruppieren"},"Filter Calendars",-1)),l("div",lp,[l("div",cp,[l("button",{class:"sidebar-action-btn",type:"button",disabled:_.isLoading,onClick:y[0]||(y[0]=L=>_.$emit("load"))}," Refresh ",8,up),l("button",{class:"sidebar-action-btn sidebar-action-btn--icon",type:"button",onClick:y[1]||(y[1]=L=>_.$emit("toggle-nav")),"aria-label":_.navToggleLabel},I(_.navToggleIcon),9,dp)]),l("div",fp,[ie(C(ba),{type:"radio",name:"range-week",checked:_.range==="week","onUpdate:checked":y[2]||(y[2]=L=>{L&&_.$emit("update:range","week")})},{default:We(()=>[...y[26]||(y[26]=[ye("Week",-1)])]),_:1},8,["checked"]),ie(C(ba),{type:"radio",name:"range-month",checked:_.range==="month","onUpdate:checked":y[3]||(y[3]=L=>{L&&_.$emit("update:range","month")})},{default:We(()=>[...y[27]||(y[27]=[ye("Month",-1)])]),_:1},8,["checked"])]),l("div",gp,[ie(C(gt),{class:"nav-btn",type:"tertiary",disabled:_.isLoading,onClick:y[4]||(y[4]=L=>_.$emit("update:offset",_.offset-1)),title:"Previous"},{default:We(()=>[...y[28]||(y[28]=[ye("",-1)])]),_:1},8,["disabled"]),l("span",pp,I(_.from)+"  "+I(_.to),1),ie(C(gt),{class:"nav-btn",type:"tertiary",disabled:_.isLoading,onClick:y[5]||(y[5]=L=>_.$emit("update:offset",_.offset+1)),title:"Next"},{default:We(()=>[...y[29]||(y[29]=[ye("",-1)])]),_:1},8,["disabled"])])]),l("div",hp,[l("button",{id:"opsdash-sidebar-tab-calendars",type:"button",class:ve(["sb-tab",{active:n.value==="calendars"}]),role:"tab","aria-selected":n.value==="calendars","aria-controls":"opsdash-sidebar-pane-calendars",onClick:y[6]||(y[6]=L=>n.value="calendars")}," Calendars ",10,mp),l("button",{id:"opsdash-sidebar-tab-targets",type:"button",class:ve(["sb-tab",{active:n.value==="targets"}]),role:"tab","aria-selected":n.value==="targets","aria-controls":"opsdash-sidebar-pane-targets",onClick:y[7]||(y[7]=L=>n.value="targets")}," Targets ",10,vp),l("button",{id:"opsdash-sidebar-tab-summary",type:"button",class:ve(["sb-tab",{active:n.value==="summary"}]),role:"tab","aria-selected":n.value==="summary","aria-controls":"opsdash-sidebar-pane-summary",onClick:y[8]||(y[8]=L=>n.value="summary")}," Summary ",10,yp)]),l("div",bp,[l("button",{id:"opsdash-sidebar-tab-activity",type:"button",class:ve(["sb-tab",{active:n.value==="activity"}]),role:"tab","aria-selected":n.value==="activity","aria-controls":"opsdash-sidebar-pane-activity",onClick:y[9]||(y[9]=L=>n.value="activity")}," Activity & Schedule ",10,wp),l("button",{id:"opsdash-sidebar-tab-balance",type:"button",class:ve(["sb-tab",{active:n.value==="balance"}]),role:"tab","aria-selected":n.value==="balance","aria-controls":"opsdash-sidebar-pane-balance",onClick:y[10]||(y[10]=L=>n.value="balance")}," Balance ",10,_p),l("button",{id:"opsdash-sidebar-tab-notes",type:"button",class:ve(["sb-tab",{active:n.value==="notes"}]),role:"tab","aria-selected":n.value==="notes","aria-controls":"opsdash-sidebar-pane-notes",onClick:y[11]||(y[11]=L=>n.value="notes")}," Notes ",10,kp)]),l("div",xp,[l("button",{id:"opsdash-sidebar-tab-config",type:"button",class:ve(["sb-tab",{active:n.value==="config"}]),role:"tab","aria-selected":n.value==="config","aria-controls":"opsdash-sidebar-pane-config",onClick:y[12]||(y[12]=L=>n.value="config")}," Config ",10,Sp)]),n.value==="calendars"?($(),qe(Td,{key:0,calendars:_.calendars,selected:_.selected,range:_.range,"is-loading":_.isLoading,"category-options":o.value,"calendar-target-messages":x,"calendar-category-id":Ne,"get-target":be,onSelectAll:De,onToggleCalendar:Le,onSetCategory:we,onTargetInput:_e},null,8,["calendars","selected","range","is-loading","category-options","calendar-target-messages"])):n.value==="targets"?($(),qe($f,{key:1,targets:r.value,"category-options":o.value,"total-target-message":E.value,"all-day-hours-message":R.value,"category-target-messages":S,"pace-threshold-messages":X,"forecast-momentum-message":V.value,"forecast-padding-message":re.value,"can-add-category":g.value,onTotalTargetInput:v,onApplyPreset:Xe,onSetAllDayHours:M,onSetCategoryLabel:y[13]||(y[13]=({id:L,label:he})=>P(L,he)),onRemoveCategory:Wt,onSetCategoryTarget:y[14]||(y[14]=({id:L,value:he})=>O(L,he)),onSetCategoryPace:y[15]||(y[15]=({id:L,mode:he})=>H(L,he)),onSetCategoryWeekend:y[16]||(y[16]=({id:L,value:he})=>N(L,he)),onAddCategory:Qe,onSetIncludeWeekendTotal:ee,onSetPaceMode:z,onSetThreshold:y[17]||(y[17]=({key:L,value:he})=>Y(L,he)),onSetForecastMethod:Re,onSetForecastMomentum:Ve,onSetForecastPadding:Ye,onSetUiOption:y[18]||(y[18]=({key:L,value:he})=>at(L,he)),onSetIncludeZeroDays:fs},null,8,["targets","category-options","total-target-message","all-day-hours-message","category-target-messages","pace-threshold-messages","forecast-momentum-message","forecast-padding-message","can-add-category"])):n.value==="summary"?($(),qe(If,{key:2,"summary-options":p.value,"active-day-mode":_.activeDayMode,"onUpdate:activeMode":B,onToggleOption:Te},null,8,["summary-options","active-day-mode"])):n.value==="config"?($(),qe(sp,{key:3,presets:i.value,"is-loading":s.presetsLoading,"is-saving":s.presetSaving,"is-applying":s.presetApplying,warnings:s.presetWarnings,onSave:y[19]||(y[19]=L=>a("save-preset",L)),onLoad:y[20]||(y[20]=L=>a("load-preset",L)),onDelete:y[21]||(y[21]=L=>a("delete-preset",L)),onRefresh:y[22]||(y[22]=()=>a("refresh-presets")),onClearWarnings:y[23]||(y[23]=()=>a("clear-preset-warnings"))},null,8,["presets","is-loading","is-saving","is-applying","warnings"])):n.value==="activity"?($(),qe(zf,{key:4,"activity-settings":d.value,"activity-toggles":u.value,"forecast-mode":d.value.forecastMode,"forecast-options":b,"help-open":T.activity,onToggleHelp:Ce,onToggleOption:je,onUpdateForecastMode:Ee},null,8,["activity-settings","activity-toggles","forecast-mode","help-open"])):n.value==="balance"?($(),qe(Ig,{key:5,"balance-settings":h.value,"balance-threshold-messages":J,"balance-lookback-message":Z.value,"balance-ui-precision-messages":le,"rounding-options":w,"help-thresholds":T.balanceThresholds,"help-trend":T.balanceTrend,"help-display":T.balanceDisplay,onToggleHelp:se,onSetThreshold:Ke,onSetRelation:fe,onSetLookback:pe,onSetUiToggle:He,onSetUiPrecision:Ue},null,8,["balance-settings","balance-threshold-messages","balance-lookback-message","balance-ui-precision-messages","help-thresholds","help-trend","help-display"])):n.value==="notes"?($(),qe(jg,{key:6,previous:_.notesPrev,"model-value":_.notesCurrDraft,"prev-label":_.notesLabelPrev,"curr-label":_.notesLabelCurr,"prev-title":_.notesLabelPrevTitle,"curr-title":_.notesLabelCurrTitle,saving:_.isSavingNote,"onUpdate:modelValue":y[24]||(y[24]=L=>_.$emit("update:notes",L)),onSave:y[25]||(y[25]=L=>_.$emit("save-notes"))},null,8,["previous","model-value","prev-label","curr-label","prev-title","curr-title","saving"])):q("",!0)]),_:3}))}}),[["__scopeId","data-v-4d654bff"]]);function $p(e){const t=ne(""),s=ne(""),a=ne(!1);async function n(){var i,c;const o=await e.getJson(e.route("notes"),{range:e.range.value,offset:e.offset.value|0});t.value=String(((i=o==null?void 0:o.notes)==null?void 0:i.previous)??""),s.value=String(((c=o==null?void 0:o.notes)==null?void 0:c.current)??"")}async function r(){try{a.value=!0,await e.postJson(e.route("notesSave"),{range:e.range.value,offset:e.offset.value|0,content:s.value??""}),e.notifySuccess("Notes saved"),await n()}catch(o){console.error(o),e.notifyError("Failed to save notes")}finally{a.value=!1}}return{notesPrev:t,notesCurrDraft:s,isSavingNote:a,fetchNotes:n,saveNotes:r}}function Mp(e){const t=ne([]),s=ne({}),a=ne({}),n=ne({}),r=ne([]),o=ne(!1),i=ne(!1),c=ne(null),g=ne(""),p=ne(""),d=ne(""),f=xt({}),u=ne([]),b=ne([]),h=ne([]),w=ne({}),T=ne({}),x=ne({}),S=ne(vt(Is()));let E=0;async function R(){var J,V,re,Z,le,xe,Me,Ne,K,ue,Q,te,be,De,Le,we,_e,Te,je,Ee;const X=++E;o.value=!0;try{const Ce={range:e.range.value,offset:e.offset.value|0,save:!1},se=await e.getJson(e.route("load"),Ce);if(X!==E){(J=e.isDebug)!=null&&J.call(e)&&console.warn("discarding stale load response",{currentSeq:X,loadSeq:E});return}g.value=String(((V=se.meta)==null?void 0:V.uid)??""),p.value=String(((re=se.meta)==null?void 0:re.from)??""),d.value=String(((Z=se.meta)==null?void 0:Z.to)??""),i.value=!!((le=se.meta)!=null&&le.truncated),c.value=((xe=se.meta)==null?void 0:xe.limits)??null,t.value=Array.isArray(se.calendars)?se.calendars:[],s.value=((Me=se.colors)==null?void 0:Me.byName)??{},a.value=((Ne=se.colors)==null?void 0:Ne.byId)??{};const Ke=((K=se.groups)==null?void 0:K.byId)??((ue=se.groups)==null?void 0:ue.byID)??((Q=se.groups)==null?void 0:Q.ids)??{},He={};t.value.forEach(v=>{const M=String((v==null?void 0:v.id)??""),O=Number((Ke==null?void 0:Ke[M])??0);He[M]=Number.isFinite(O)?Math.max(0,Math.min(9,Math.trunc(O))):0}),n.value=He;const Ue=((te=se.targets)==null?void 0:te.week)??{},m=((be=se.targets)==null?void 0:be.month)??{};if(T.value=Ue&&typeof Ue=="object"?Ue:{},x.value=m&&typeof m=="object"?m:{},S.value=vt(se.targetsConfig??Is()),(De=e.isDebug)!=null&&De.call(e)&&(console.group("[opsdash] calendars/colors"),console.table((t.value||[]).map(v=>({id:v.id,name:v.displayname,color:v.color,raw:v.color_raw,src:v.color_src}))),console.log("colors.byId",a.value),console.log("colors.byName",s.value),se.calDebug&&console.log("server calDebug",se.calDebug),se.debug&&(console.group("[opsdash] server query debug"),console.log(se.debug),console.groupEnd()),console.groupEnd()),t.value.length&&e.fetchDavColors&&t.value.filter(M=>!M.color||M.color_src==="fallback").length)try{const M=await e.fetchDavColors(g.value,t.value.map(P=>String(P.id)));let O=!1;if(t.value=t.value.map(P=>{const N=M[P.id];return N&&N!==P.color&&(P.color_src="dav"(P).color_raw=N,P.color=N,O=!0),P}),Object.entries(M).forEach(([P,N])=>{N&&(a.value[P]=String(N))}),O){(Le=e.isDebug)!=null&&Le.call(e)&&console.log("[opsdash] dav colors applied",M);try{const P=((we=w.value)==null?void 0:we.pie)||{},N=P.ids||[],B=P.colors||[],W=N.map((F,H)=>a.value[F]||B[H]||"#60a5fa");w.value={...w.value||{},pie:{...P,colors:W}},(_e=e.isDebug)!=null&&_e.call(e)&&console.log("[opsdash] recomputed pie colors",W)}catch(P){(Te=e.isDebug)!=null&&Te.call(e)&&console.warn("recompute pie colors failed",P)}try{const P=(je=w.value)==null?void 0:je.perDaySeries;if(P&&Array.isArray(P.series)){const N=P.series.map(B=>({...B,color:a.value[B.id]||B.color||"#60a5fa"}));w.value={...w.value||{},perDaySeries:{labels:P.labels,series:N}}}}catch{}e.scheduleDraw()}}catch(M){(Ee=e.isDebug)!=null&&Ee.call(e)&&console.warn("dav colors failed",M)}r.value=Array.isArray(se.selected)?se.selected:Array.isArray(se.saved)?se.saved:[],e.userChangedSelection.value=!1,Object.assign(f,se.stats??{}),u.value=Array.isArray(se.byCal)?se.byCal:[],b.value=Array.isArray(se.byDay)?se.byDay:[],h.value=Array.isArray(se.longest)?se.longest:[],w.value=se.charts??{},await aa(),e.scheduleDraw(),await e.fetchNotes().catch(()=>{})}catch(Ce){console.error(Ce),e.notifyError("Failed to load data")}finally{o.value=!1}}return{calendars:t,colorsByName:s,colorsById:a,groupsById:n,selected:r,isLoading:o,isTruncated:i,truncLimits:c,uid:g,from:p,to:d,stats:f,byCal:u,byDay:b,longest:h,charts:w,targetsWeek:T,targetsMonth:x,targetsConfig:S,load:R}}function Tp(e){const t=ne(!1);let s=null;function a(n=!0){s&&clearTimeout(s),s=setTimeout(async()=>{s=null;try{t.value=!0;const r=await e.postJson(e.route("persist"),{cals:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:un(e.targetsConfig.value)});Array.isArray(r.read)?e.selected.value=r.read.map(c=>String(c)):Array.isArray(r.saved)&&(e.selected.value=r.saved.map(c=>String(c)));const o=r.targets_config_read,i=r.targets_config_saved;o?e.targetsConfig.value=vt(o):i&&(e.targetsConfig.value=vt(i)),n&&e.onReload&&await e.onReload(),e.notifySuccess("Selection saved")}catch(r){console.error(r),e.notifyError("Failed to save selection")}finally{t.value=!1}},250)}return{queueSave:a,isSaving:t}}function Ap(e){const t=G(()=>{var n,r;return Pp({perDaySeries:(n=e.charts.value)==null?void 0:n.perDaySeries,forecastMode:((r=e.activityCardConfig.value)==null?void 0:r.forecastMode)??"total",targetsConfig:e.targetsConfig.value,currentTargets:e.currentTargets.value,calendarCategoryMap:e.calendarCategoryMap.value})}),s=G(()=>{var n;return{pie:((n=e.charts.value)==null?void 0:n.pie)||null,stacked:t.value}}),a=G(()=>{var w,T;const n={},r=(w=e.charts.value)==null?void 0:w.pie,o=(T=e.charts.value)==null?void 0:T.perDaySeries,i=t.value||o,c=r&&Array.isArray(r.data)&&Array.isArray(r.ids),g=i&&Array.isArray(i.series)&&Array.isArray(i.labels),p=e.calendarCategoryMap.value,d=c?(r.ids||[]).map(x=>String(x??"")):[],f=c?(r.labels||[]).map(x=>String(x??"")):[],u=c?(r.data||[]).map(x=>Number(x)||0):[],b=c?r.colors||[]:[],h=g?i.series:[];return e.calendarGroups.value.forEach(x=>{const S=[];c&&d.forEach((J,V)=>{p[J]===x.id&&S.push(V)});const E=S.length?{ids:S.map(J=>d[J]),labels:S.map(J=>f[J]),data:S.map(J=>u[J]),colors:S.map(J=>{var V;return b[J]||((V=e.colorsById.value)==null?void 0:V[d[J]])||"#60a5fa"})}:null,R=g?h.filter(J=>p[String((J==null?void 0:J.id)??"")]===x.id):[],X=R.length?{labels:i.labels,series:R}:null;n[x.id]={pie:E,stacked:X}}),n});return{calendarChartData:s,categoryChartsById:a}}const Dp=/^\d{4}-\d{2}-\d{2}$/,Ep="__uncategorized__";function Pp(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const s=t.labels.map(h=>String(h??"")),a=t.series.map(h=>{const w=String((h==null?void 0:h.id)??"");return{...h,id:w,name:String((h==null?void 0:h.name)??(h==null?void 0:h.label)??w),color:String((h==null?void 0:h.color)??""),data:s.map((T,x)=>{var E;const S=Number(((E=h==null?void 0:h.data)==null?void 0:E[x])??0);return Number.isFinite(S)?Math.max(0,S):0})}}),n=Ip(e.forecastMode),r=Np(new Date),o=s.map(h=>Dp.test(h)&&h>r),i=[];if(o.forEach((h,w)=>{h&&i.push(w)}),!i.length||n==="off")return{labels:s,series:a};const c=e.targetsConfig??Is(),g=Op(e.currentTargets),p=e.calendarCategoryMap??{},d=i.length,f=new Map;a.forEach(h=>{let w=0;h.data.forEach((T,x)=>{o[x]||(w+=Math.max(0,T))}),f.set(h.id,w)});const u=Array.from(f.values()).reduce((h,w)=>h+w,0),b=new Map;if(a.forEach(h=>{b.set(h.id,Lp(s.length))}),n==="total"){const h=Math.max(0,Number(c.totalHours??0)),w=Math.max(0,h-u);if(w>1e-4){const T=w/d,x=a.map(E=>E.id),S=bo(x,f,g);x.forEach(E=>{const R=S[E]??0;if(R<=0)return;const X=b.get(E);X&&i.forEach(J=>{X[J]=_a(T*R)})})}}else if(n==="calendar")a.forEach(h=>{const w=g[h.id]??0;if(w<=0)return;const T=Math.max(0,f.get(h.id)??0),x=Math.max(0,w-T);if(x<=1e-4)return;const S=x/d,E=b.get(h.id);E&&i.forEach(R=>{E[R]=_a(S)})});else if(n==="category"){const h=new Set,w=Array.isArray(c.categories)?c.categories:[],T=new Map;w.forEach(S=>{T.set(String(S.id),Math.max(0,Number(S.targetHours??0)))});const x=new Map;a.forEach(S=>{const E=p==null?void 0:p[S.id],R=E?String(E):Ep;x.has(R)||x.set(R,[]),x.get(R).push(S.id)}),x.forEach((S,E)=>{if(!S.length)return;const R=T.get(E)??0;if(R<=0)return;const X=S.reduce((le,xe)=>le+Math.max(0,f.get(xe)??0),0),J=Math.max(0,R-X);if(J<=1e-4)return;const V=J/d,re={};S.forEach(le=>{re[le]=g[le]??0});const Z=bo(S,f,re);S.forEach(le=>{const xe=Z[le]??0;if(xe<=0)return;const Me=b.get(le);Me&&(i.forEach(Ne=>{Me[Ne]=_a(V*xe)}),h.add(le))})}),a.forEach(S=>{if(h.has(S.id))return;const E=g[S.id]??0;if(E<=0)return;const R=Math.max(0,f.get(S.id)??0),X=Math.max(0,E-R);if(X<=1e-4)return;const J=X/d,V=b.get(S.id);V&&i.forEach(re=>{V[re]=_a(J)})})}return a.forEach(h=>{const w=b.get(h.id);w&&w.some(T=>T>1e-4)&&(h.forecast=w)}),{labels:s,series:a}}function Ip(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function Np(e){const t=e.getFullYear(),s=`${e.getMonth()+1}`.padStart(2,"0"),a=`${e.getDate()}`.padStart(2,"0");return`${t}-${s}-${a}`}function Lp(e){return Array.from({length:e},()=>0)}function _a(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function Op(e){const t={};return e&&Object.entries(e).forEach(([s,a])=>{const n=Number(a);Number.isFinite(n)&&n>0&&(t[String(s)]=n)}),t}function bo(e,t,s){const a={},n=e.reduce((i,c)=>i+Math.max(0,t.get(c)??0),0);if(n>1e-4)return e.forEach(i=>{const c=Math.max(0,t.get(i)??0);a[i]=c/n}),a;const r=e.reduce((i,c)=>i+Math.max(0,(s==null?void 0:s[c])??0),0);if(r>1e-4)return e.forEach(i=>{const c=Math.max(0,(s==null?void 0:s[i])??0);a[i]=c/r}),a;const o=e.length?1/e.length:0;return e.forEach(i=>{a[i]=o}),a}const Ft="__uncategorized__",wo="Unassigned";function Hp(e){const t=G(()=>{var p;const g=(p=e.targetsConfig.value)==null?void 0:p.categories;return Array.isArray(g)?g:[]}),s=G(()=>{const g={};return t.value.forEach(p=>{g[String(p.id)]=p.label||String(p.id)}),g}),a=G(()=>{var d;const g=new Map;return(((d=e.targetsSummary.value)==null?void 0:d.categories)||[]).forEach(f=>g.set(String(f.id),f)),g}),n=G(()=>{const g=new Map;return t.value.forEach(p=>{(Array.isArray(p.groupIds)?p.groupIds:[]).forEach(f=>{const u=Math.max(0,Math.min(9,Math.trunc(Number(f)||0)));g.set(u,String(p.id))})}),g}),r=G(()=>{var d;const g=e.calendars.value;if(!Array.isArray(g))return(d=e.isDebug)!=null&&d.call(e)&&console.warn("[opsdash] calendars not array",g),{};const p={};return g.forEach(f=>{var h;const u=String((f==null?void 0:f.id)??"");if(!u)return;const b=((h=e.colorsById.value)==null?void 0:h[u])||String((f==null?void 0:f.color)||"");p[u]={name:String((f==null?void 0:f.displayname)||(f==null?void 0:f.name)||(f==null?void 0:f.calendar)||u),color:b||void 0}}),p}),o=G(()=>{var b;const g={},p=n.value,d=e.groupsById.value||{},f=h=>{const w=d==null?void 0:d[h],T=Math.max(0,Math.min(9,Math.trunc(Number(w)||0))),x=p.get(T);g[h]=x||Ft},u=e.calendars.value;return Array.isArray(u)?(u.forEach(h=>{const w=String((h==null?void 0:h.id)??"");w&&f(w)}),(e.selected.value||[]).forEach(h=>{const w=String(h??"");w&&(g[w]||f(w))}),g):((b=e.isDebug)!=null&&b.call(e)&&console.warn("[opsdash] calendarCategoryMap: calendars not array",u),g)}),i=G(()=>{const g=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"],p={};let d=0;const f=u=>{if(p[u])return p[u];const b=Object.entries(o.value).filter(([,w])=>w===u).map(([w])=>w);for(const w of b){const T=r.value[w];if(T!=null&&T.color)return p[u]=T.color,T.color}const h=g[d%g.length];return d+=1,p[u]=h,h};return t.value.forEach(u=>f(String(u.id))),Object.values(o.value||{}).some(u=>u===Ft)&&f(Ft),p}),c=G(()=>{var R,X,J,V,re,Z,le,xe,Me,Ne;const g=[],p=o.value,d=a.value,f=e.byCal.value;if(!Array.isArray(f))return(R=e.isDebug)!=null&&R.call(e)&&console.warn("[opsdash] aggregateCategoryRows: byCal not array",f),g;const u=new Map;f.forEach(K=>{const ue=String((K==null?void 0:K.id)??(K==null?void 0:K.calendar_id)??(K==null?void 0:K.calendar)??"");if(!ue)return;const Q=p[ue]||Ft;u.has(Q)||u.set(Q,[]),u.get(Q).push({...K,calendarId:ue})}),(X=e.isDebug)!=null&&X.call(e)&&console.log("[opsdash] aggregateCategoryRows",{rowsSourceIsArray:Array.isArray(f),rowsSourceLength:f.length,byCat:u,assignments:p});const b=((V=(J=e.targetsSummary.value)==null?void 0:J.total)==null?void 0:V.daysLeft)??0,h=((Z=(re=e.targetsSummary.value)==null?void 0:re.total)==null?void 0:Z.calendarPercent)??0,w=((xe=(le=e.targetsSummary.value)==null?void 0:le.total)==null?void 0:xe.paceMode)??((Ne=(Me=e.targetsConfig.value)==null?void 0:Me.pace)==null?void 0:Ne.mode)??"days_only",T=K=>Math.round(K*100)/100,x=e.currentTargets.value||{},S=(K,ue,Q)=>{const te=Q.reduce((Ee,Ce)=>{const se=Number(x[Ce.calendarId]??0);return Number.isFinite(se)?Ee+Math.max(0,se):Ee},0),be=Q.reduce((Ee,Ce)=>{const se=Number((Ce==null?void 0:Ce.total_hours)??(Ce==null?void 0:Ce.hours)??0);return Number.isFinite(se)?Ee+Math.max(0,se):Ee},0),De=te>0?Math.max(0,Math.min(100,be/te*100)):0,Le=be-te,we=Math.max(0,te-be),_e=te<=0?"none":De>=100?"done":Le>=0?"on_track":"behind",Te=_e==="done"?"Done":_e==="on_track"?"On Track":_e==="behind"?"Behind":"",je=b>0?we/b:0;return{id:K,label:ue,actualHours:T(be),targetHours:T(te),percent:De,deltaHours:T(Le),remainingHours:T(we),needPerDay:T(je),daysLeft:b,calendarPercent:Math.max(0,Math.min(100,h)),gap:T(De-h),status:_e,statusLabel:Te,includeWeekend:!0,paceMode:w}};if(t.value.map(K=>String(K.id)).forEach(K=>{const ue=s.value[K]||K,Q=u.get(K)||[],te=d.get(K)||S(K,ue,Q);g.push({id:K,label:ue,rows:Q,summary:te,color:i.value[K]})}),u.has(Ft)){const K=u.get(Ft)||[];g.push({id:Ft,label:wo,rows:K,summary:S(Ft,wo,K),color:i.value[Ft]})}return g});return{categoryConfigList:t,categoryLabelById:s,categoryColorMap:i,calendarCategoryMap:o,calendarGroups:c}}function Rp(e){const t=Number(e);return Number.isFinite(t)?Math.round(t):0}function ct(e){const t=Number(e);return Number.isFinite(t)?t:null}function ds(e){if(e==null)return null;const t=String(e).trim();return t===""?null:t}function Fp(e){const t=G(()=>{var x;const u=(x=e.charts.value)==null?void 0:x.pie;if(!u||!Array.isArray(u.data)||!Array.isArray(u.labels))return[];const b=u.data.map(S=>Number(S)||0),h=u.labels.map(S=>String(S||"")),w=b.reduce((S,E)=>S+Math.max(0,E),0);if(w<=0)return[];const T=b.map((S,E)=>({name:h[E]||"",value:Math.max(0,S)}));return T.sort((S,E)=>E.value-S.value),T.slice(0,3).map(S=>({name:S.name,share:S.value/w*100}))}),s=G(()=>{var b;if(t.value.length)return t.value.map(h=>`${h.name} ${ko(h.share)}`).join(", ");const u=(b=e.stats)==null?void 0:b.top_calendar;if(u&&u.calendar){const h=Number(u.share??0);return`${u.calendar} ${ko(h)}`}return""}),a=G(()=>{var u;return e.selected.value.length||(((u=e.calendars.value)==null?void 0:u.length)??0)}),n=G(()=>(e.byDay.value||[]).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),r=G(()=>{const u=n.value.map(b=>Number(b)||0);return e.activeDayMode.value==="active"?u.filter(b=>b>0):u}),o=G(()=>(e.byDay.value||[]).filter(u=>{const b=_o(String(u==null?void 0:u.date));return b>=1&&b<=5}).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),i=G(()=>(e.byDay.value||[]).filter(u=>{const b=_o(String(u==null?void 0:u.date));return b===0||b===6}).map(u=>Number((u==null?void 0:u.total_hours)??(u==null?void 0:u.hours)??0))),c=G(()=>e.activeDayMode.value==="active"?o.value.filter(u=>u>0):o.value),g=G(()=>e.activeDayMode.value==="active"?i.value.filter(u=>u>0):i.value),p=G(()=>{var h,w,T,x;const u=((h=e.stats)==null?void 0:h.balance_index)??((w=e.stats)==null?void 0:w.balanceIndex)??((x=(T=e.stats)==null?void 0:T.balance_overview)==null?void 0:x.index),b=Number(u);return Number.isFinite(b)?b:null}),d=G(()=>{var u,b,h,w;return{rangeLabel:e.rangeLabel.value,totalHours:Number(((u=e.stats)==null?void 0:u.total_hours)??0),avgDay:hn(r.value),avgEvent:Number(((b=e.stats)==null?void 0:b.avg_per_event)??0),medianDay:mn(r.value),busiest:((h=e.stats)==null?void 0:h.busiest_day)??null,workdayAvg:hn(c.value),workdayMedian:mn(c.value),weekendAvg:hn(g.value),weekendMedian:mn(g.value),weekendShare:((w=e.stats)==null?void 0:w.weekend_share)??null,activeCalendars:a.value,calendarSummary:s.value,balanceIndex:p.value,topCategory:e.topCategory.value?{label:e.topCategory.value.label,actualHours:e.topCategory.value.summary.actualHours,targetHours:e.topCategory.value.summary.targetHours,percent:e.topCategory.value.summary.percent,statusLabel:e.topCategory.value.summary.statusLabel,status:e.topCategory.value.summary.status,color:e.topCategory.value.color}:null}}),f=G(()=>{const u=e.stats;return{rangeLabel:e.rangeLabel.value,events:Rp(u.events),activeDays:ct(u.active_days),typicalStart:ds(u.typical_start),typicalEnd:ds(u.typical_end),weekendShare:ct(u.weekend_share),eveningShare:ct(u.evening_share),earliestStart:ds(u.earliest_start),latestEnd:ds(u.latest_end),overlapEvents:ct(u.overlap_events),longestSession:ct(u.longest_session),lastDayOff:ds(u.last_day_off),lastHalfDayOff:ds(u.last_half_day_off)}});return{topThree:t,topCalendarsSummary:s,timeSummary:d,activitySummary:f}}function hn(e){return e.length?e.reduce((s,a)=>s+a,0)/e.length:0}function mn(e){if(!e.length)return 0;const t=[...e].sort((a,n)=>a-n),s=Math.floor(t.length/2);return t.length%2?t[s]:(t[s-1]+t[s])/2}function _o(e){return new Date(`${e}T00:00:00Z`).getUTCDay()}function ko(e){return`${Number(e||0).toFixed(1)}%`}function Wp(e){return{balanceOverview:G(()=>{var d,f,u;const s=(d=e.stats)==null?void 0:d.balance_overview;if(!s||typeof s!="object")return null;const a=Array.isArray(s.categories)?s.categories.map(b=>({id:String((b==null?void 0:b.id)??""),label:String((b==null?void 0:b.label)??""),hours:ct(b==null?void 0:b.hours)??0,share:ct(b==null?void 0:b.share)??0,prevShare:ct(b==null?void 0:b.prev_share)??0,delta:ct(b==null?void 0:b.delta)??0,color:e.categoryColorMap.value[String((b==null?void 0:b.id)??"")]})):[],n=Array.isArray(s.relations)?s.relations.map(b=>({label:String((b==null?void 0:b.label)??""),value:String((b==null?void 0:b.value)??"")})):[],r={delta:Array.isArray((f=s.trend)==null?void 0:f.delta)?s.trend.delta.map(b=>({id:String((b==null?void 0:b.id)??""),label:String((b==null?void 0:b.label)??""),delta:ct(b==null?void 0:b.delta)??0})):[],badge:String(((u=s.trend)==null?void 0:u.badge)??"")},o=Array.isArray(s.daily)?s.daily.map(b=>({date:String((b==null?void 0:b.date)??""),weekday:String((b==null?void 0:b.weekday)??""),total_hours:ct(b==null?void 0:b.total_hours)??0,categories:Array.isArray(b==null?void 0:b.categories)?b.categories.map(h=>({id:String((h==null?void 0:h.id)??""),label:String((h==null?void 0:h.label)??""),hours:ct(h==null?void 0:h.hours)??0,share:ct(h==null?void 0:h.share)??0})):[]})):[],i=Array.isArray(s.insights)?s.insights.map(b=>String(b)):[],c=Array.isArray(s.warnings)?s.warnings.map(b=>String(b)):[],g=ct(s.index)??0,p=e.balanceCardConfig.value.showInsights?i:[];return{index:g,categories:a,relations:n,trend:r,daily:o,insights:p,warnings:c}})}}const Bp={version:"0.4.3"},jp={class:"app-shell"},Up={class:"app-main"},Vp={class:"app-container"},zp={key:0,class:"range-toolbar",role:"toolbar","aria-label":"Collapsed range controls"},Kp=["aria-expanded","aria-label"],Gp=["disabled"],qp=["disabled","aria-pressed"],Jp={class:"range-toolbar__group",role:"group","aria-label":"Navigate periods"},Zp=["disabled"],Yp=["title"],Xp=["disabled"],Qp={class:"appbar"},eh={class:"title"},th=["src"],sh=["textContent"],ah={class:"hint appbar-meta"},nh=["textContent"],rh={key:1,title:"Results truncated for performance"},oh=["title"],ih={class:"cards"},lh={class:"tabs"},ch={class:"card full tab-panel"},uh={key:0,class:"chart-section"},dh={class:"grid2 mt-12"},fh={class:"card chart-card"},gh={class:"card chart-card"},ph={key:1,class:"chart-section"},hh={key:0,class:"category-chart-block"},mh={class:"category-chart-header"},vh={class:"name"},yh={class:"grid2 mt-8"},bh={class:"card chart-card"},wh={class:"card chart-card"},_h={class:"card full tab-panel"},kh={class:"card full tab-panel"},xh={class:"card full tab-panel"},Sh={class:"hint footer"},Ch=["href"],xo="opsdash.sidebarOpen",$h=Ie({__name:"App",setup(e){function t(k){var U,j;const A=window;(j=(U=A.OC)==null?void 0:U.Notification)!=null&&j.showTemporary?A.OC.Notification.showTemporary(k):console.log("SUCCESS:",k)}function s(k){var U,j;const A=window;(j=(U=A.OC)==null?void 0:U.Notification)!=null&&j.showTemporary?A.OC.Notification.showTemporary(k):(console.error("ERROR:",k),alert(k))}const a=ne((()=>{if(typeof window>"u")return!0;const k=window.localStorage.getItem(xo);return k==null?!0:k==="1"})()),n=()=>{a.value=!a.value},r=G(()=>a.value?"Hide sidebar":"Show sidebar"),o=G(()=>a.value?"":"");bt(a,k=>{typeof window<"u"&&(window.localStorage.setItem(xo,k?"1":"0"),aa(()=>{window.dispatchEvent(new Event("resize"))}))});const i=ne("cal"),c=ne("week"),g=ne(0),p=G(()=>!a.value),d=G(()=>c.value==="week"?"Switch to month":"Switch to week"),f=G(()=>!Te.value||!je.value?"":`${Te.value}  ${je.value}`),u=ne([]),b=ne(!1),h=ne(!1),w=ne(!1),T=ne([]),x=ne(null);function S(){M().catch(console.error)}function E(){c.value=c.value==="week"?"month":"week",g.value=0,M().catch(console.error)}function R(){g.value=(g.value||0)-1,M().catch(console.error)}function X(){g.value=(g.value||0)+1,M().catch(console.error)}const J=G(()=>{const k=we.value;if(!k)return"Partial data due to caps";const A=[];return k.maxPerCal!=null&&A.push(`cap per calendar: ${k.maxPerCal}`),k.maxTotal!=null&&A.push(`cap total: ${k.maxTotal}`),k.totalProcessed!=null&&A.push(`processed: ${k.totalProcessed}`),A.join("  ")}),V=ne(!1),re=$p({range:c,offset:g,route:k=>Gt(k),getJson:Rs,postJson:kn,notifySuccess:t,notifyError:s}),{notesPrev:Z,notesCurrDraft:le,isSavingNote:xe,fetchNotes:Me,saveNotes:Ne}=re,{calendars:K,colorsByName:ue,colorsById:Q,groupsById:te,selected:be,isLoading:De,isTruncated:Le,truncLimits:we,uid:_e,from:Te,to:je,stats:Ee,byCal:Ce,byDay:se,longest:Ke,charts:He,targetsWeek:Ue,targetsMonth:m,targetsConfig:v,load:M}=Mp({range:c,offset:g,userChangedSelection:V,route:k=>Gt(k),getJson:Rs,notifyError:s,scheduleDraw:Zh,fetchNotes:Me,isDebug:gs,fetchDavColors:Jh}),{queueSave:O}=Tp({route:k=>Gt(k),postJson:kn,notifyError:s,notifySuccess:t,onReload:()=>M(),selected:be,groupsById:te,targetsWeek:Ue,targetsMonth:m,targetsConfig:v});function P(k){return be.value.includes(k)}function N(k,A){const U=new Set(be.value);A?U.add(k):U.delete(k),be.value=Array.from(U)}function B(k){N(k,!P(k)),V.value=!0,O()}function W(k,A){const U=Math.max(0,Math.min(9,Math.trunc(Number(A)||0)));te.value||(te.value={}),te.value={...te.value,[k]:U},O(!1)}function F(k,A){const U=Number(A);if(!isFinite(U)||U<0)return;const j=Math.min(1e4,Math.round(U*100)/100);if(c.value==="month"){const me=Math.min(1e4,Math.round(j/4*100)/100);m.value={...m.value||{},[k]:j},Ue.value={...Ue.value||{},[k]:me}}else{const me=Math.min(1e4,Math.round(j*4*100)/100);Ue.value={...Ue.value||{},[k]:j},m.value={...m.value||{},[k]:me}}O(!1)}function H(k){v.value=vt(k),O(!1)}const ee=ne("active"),z=G(()=>c.value==="month"?"Month":"Week"),Y=G(()=>{const k=un(v.value);return c.value==="month"&&(k.totalHours=cn(k.totalHours),k.categories=k.categories.map(A=>({...A,targetHours:cn(A.targetHours)}))),k}),ae=G(()=>{const k=Y.value;try{return Bu({config:k,stats:Ee,byDay:se.value||[],byCal:Ce.value||[],groupsById:te.value||{},range:c.value,from:Te.value,to:je.value})}catch(A){return console.error("[opsdash] targets summary failed",A),Fu(k)}}),fe=G(()=>{if(c.value==="month"){const k=m.value||{};if(k&&Object.keys(k).length>0)return k;const A=Ue.value||{},U={};return Object.entries(A).forEach(([j,me])=>{const Fe=Number(me);Number.isFinite(Fe)&&(U[j]=cn(Fe))}),U}return Ue.value||{}}),pe=G(()=>{var k;return{...us(),...((k=v.value)==null?void 0:k.activityCard)??{}}}),ge=G(()=>{var U;const k=on(),A=((U=v.value)==null?void 0:U.balance)??k;return{...k,...A,thresholds:{...k.thresholds,...A.thresholds??{}},relations:{...k.relations,...A.relations??{}},trend:{...k.trend,...A.trend??{}},dayparts:{...k.dayparts,...A.dayparts??{}},ui:{...k.ui,...A.ui??{}}}}),$e=G(()=>({showInsights:!!ge.value.ui.showInsights,showDailyStacks:!!ge.value.ui.showDailyStacks})),{categoryLabelById:Re,categoryColorMap:Ve,calendarCategoryMap:Ye,calendarGroups:at}=Hp({calendars:K,selected:be,groupsById:te,colorsById:Q,targetsConfig:Y,targetsSummary:ae,byCal:Ce,currentTargets:fe,isDebug:gs}),{balanceOverview:fs}=Wp({stats:Ee,categoryColorMap:Ve,balanceCardConfig:$e}),Xe=G(()=>{var U,j;if(!pe.value.showHint)return"";const A=(Array.isArray((j=(U=v.value)==null?void 0:U.balance)==null?void 0:j.categories)?v.value.balance.categories:[]).map(me=>{const Fe=String(me??"").trim();if(!Fe)return"";const nt=Re.value[Fe];return nt||Fe.toUpperCase()}).filter(me=>me);return A.length?`Mapping via Sidebar  ${A.join(" / ")}`:""}),{calendarChartData:Qe,categoryChartsById:Wt}=Ap({charts:He,colorsById:Q,calendarGroups:at,calendarCategoryMap:Ye,targetsConfig:Y,currentTargets:fe,activityCardConfig:pe}),_=G(()=>{const k=at.value||[];return k.length&&[...k].sort((U,j)=>(j.summary.actualHours||0)-(U.summary.actualHours||0))[0]||null}),{timeSummary:y,activitySummary:L}=Fp({stats:Ee,byDay:se,charts:He,calendars:K,selected:be,rangeLabel:z,activeDayMode:ee,topCategory:_}),he=ne(null);function pt(k){he.value=he.value===k?null:k}function xa(k){const A=window;return A.OC&&typeof A.OC.generateUrl=="function"?A.OC.generateUrl("/apps/calendar/timeGridDay/"+k):Hs()+"/index.php/apps/calendar/timeGridDay/"+k}function gs(){return!1}const bn=ne(0),wn=G(()=>{var j;const k=window,A=[];try{if((j=k.OC)!=null&&j.imagePath){const me=k.OC.imagePath("opsdash","app.svg");me&&A.push(me)}}catch{}const U=Hs();return A.push(U+"/apps/opsdash/img/app.svg"),A.push(U+"/apps-extra/opsdash/img/app.svg"),A.push(U+"/apps-writable/opsdash/img/app.svg"),A}),Ih=G(()=>wn.value[Math.min(bn.value,wn.value.length-1)]||"");function Nh(){bn.value+1<wn.value.length&&bn.value++}function Co(k){const A=document.getElementById("app");return(A&&A.dataset?A.dataset[k]:"")||""}const Ls=ne(Co("opsdashVersion")||String(Bp.version)),Os=ne(Co("opsdashChangelog"));async function Lh(){if(!(Ls.value&&Os.value))try{const k=await Rs(Gt("load").replace("/overview/load","/overview/ping"),{});!Ls.value&&typeof(k==null?void 0:k.version)=="string"&&(Ls.value=k.version),!Os.value&&typeof(k==null?void 0:k.changelog)=="string"&&(Os.value=k.changelog)}catch{}}Lh();const Oh=G(()=>c.value==="month"?"Last month":"Last week"),Hh=G(()=>c.value==="month"?"This month":"This week"),Rh=G(()=>c.value==="month"?"Notes for previous month":"Notes for previous week"),Fh=G(()=>c.value==="month"?"Notes for current month":"Notes for current week");function _n(k){return Number(k??0).toFixed(2)}function Hs(){var A,U;const k=window;return k.OC&&(k.OC.webroot||((U=(A=k.OC).getRootPath)==null?void 0:U.call(A)))||k._oc_webroot||""}function Wh(k){const A=new URLSearchParams;return Object.entries(k).forEach(([U,j])=>{Array.isArray(j)?j.forEach(me=>A.append(U,String(me))):j!=null&&A.set(U,String(j))}),A.toString()}async function Rs(k,A){const U=Wh(A||{}),j=U?k+(k.includes("?")?"&":"?")+U:k,me=await fetch(j,{method:"GET",credentials:"same-origin"});if(!me.ok)throw new Error("HTTP "+me.status);return await me.json()}async function kn(k,A){var nt;const U=window,j=((nt=U.OC)==null?void 0:nt.requestToken)||U.oc_requesttoken||"",me={"Content-Type":"application/json"};j&&(me.requesttoken=j);const Fe=await fetch(k,{method:"POST",credentials:"same-origin",headers:me,body:JSON.stringify(A||{})});if(!Fe.ok)throw new Error("HTTP "+Fe.status);return await Fe.json()}async function Bh(k){var nt;const A=window,U=((nt=A.OC)==null?void 0:nt.requestToken)||A.oc_requesttoken||"",j={};U&&(j.requesttoken=U);const me=await fetch(k,{method:"DELETE",credentials:"same-origin",headers:j});if(!me.ok)throw new Error("HTTP "+me.status);const Fe=await me.text();return Fe?JSON.parse(Fe):{}}function Gt(k,A){const U=window;if(U.OC&&typeof U.OC.generateUrl=="function")return k==="load"?U.OC.generateUrl("/apps/opsdash/overview/load"):k==="persist"?U.OC.generateUrl("/apps/opsdash/overview/persist"):k==="notes"||k==="notesSave"?U.OC.generateUrl("/apps/opsdash/overview/notes"):k==="presetsList"||k==="presetsSave"?U.OC.generateUrl("/apps/opsdash/overview/presets"):k==="presetsLoad"||k==="presetsDelete"?U.OC.generateUrl("/apps/opsdash/overview/presets/"+encodeURIComponent(String(A??""))):U.OC.generateUrl("/apps/opsdash/overview");const j=Hs()+"/apps/opsdash/overview";return k==="load"?j+"/load":k==="persist"?j+"/persist":k==="notes"||k==="notesSave"?j+"/notes":k==="presetsList"||k==="presetsSave"?j+"/presets":k==="presetsLoad"||k==="presetsDelete"?j+"/presets/"+encodeURIComponent(A??""):Hs()+"/apps/opsdash/overview"}async function xn(){b.value=!0;try{const k=await Rs(Gt("presetsList"),{});u.value=Array.isArray(k==null?void 0:k.presets)?k.presets:[]}catch(k){console.error(k),s("Failed to load presets")}finally{b.value=!1}}async function jh(k){const A=k.trim();if(A===""){s("Enter a preset name.");return}h.value=!0;try{const U={name:A,selected:be.value,groups:te.value,targets_week:Ue.value,targets_month:m.value,targets_config:v.value},j=await kn(Gt("presetsSave"),U);u.value=Array.isArray(j==null?void 0:j.presets)?j.presets:u.value;const me=Array.isArray(j==null?void 0:j.warnings)?j.warnings:[];T.value=me,x.value=A,t(`Profile "${A}" saved`)}catch(U){console.error(U),s("Failed to save preset")}finally{h.value=!1}}function Uh(k){const A=Array.isArray(k==null?void 0:k.selected)?k.selected.map(me=>String(me)):[];be.value=A;const U=k!=null&&k.groups&&typeof k.groups=="object"?k.groups:{};te.value={...U},Ue.value=k!=null&&k.targets_week&&typeof k.targets_week=="object"?k.targets_week:{},m.value=k!=null&&k.targets_month&&typeof k.targets_month=="object"?k.targets_month:{};const j=k!=null&&k.targets_config&&typeof k.targets_config=="object"?vt(k.targets_config):un(v.value);v.value=j,V.value=!1}async function Vh(k){const A=k.trim();if(A!==""){w.value=!0;try{const U=await Rs(Gt("presetsLoad",A),{}),j=(U==null?void 0:U.preset)??{},me=Array.isArray(j==null?void 0:j.warnings)?j.warnings:Array.isArray(U==null?void 0:U.warnings)?U.warnings:[];if(me.length){const Fe=`Some items in the saved profile are no longer available:

${me.map(nt=>` ${nt}`).join(`
`)}

Apply the remaining values?`;if(!window.confirm(Fe)){T.value=me,w.value=!1;return}}Uh(j),T.value=me,x.value=A,t(`Profile "${A}" applied`),O(!0),xn().catch(Fe=>console.warn("[opsdash] refresh presets after load failed",Fe))}catch(U){console.error(U),s("Failed to load preset")}finally{w.value=!1}}}async function zh(k){const A=k.trim();if(A!=="")try{const U=await Bh(Gt("presetsDelete",A));u.value=Array.isArray(U==null?void 0:U.presets)?U.presets:u.value,t(`Profile "${A}" deleted`),x.value===A&&(x.value=null)}catch(U){console.error(U),s("Failed to delete preset")}}function Kh(){T.value=[]}function Gh(k){be.value=k?K.value.map(A=>A.id):[]}function qh(k){ee.value!==k&&(ee.value=k)}async function Jh(k,A){var Fe;const U={};if(!k)return U;const j=((Fe=window.OC)==null?void 0:Fe.requestToken)||window.oc_requesttoken||"",me=Hs();for(const nt of A)try{const Fs=`${me}/remote.php/dav/calendars/${encodeURIComponent(k)}/${encodeURIComponent(nt)}/`,Yh=`<?xml version="1.0" encoding="UTF-8"?>
<d:propfind xmlns:d="DAV:" xmlns:ical="http://apple.com/ns/ical/">
  <d:prop><ical:calendar-color/></d:prop>
</d:propfind>`;gs();const $o=await fetch(Fs,{method:"PROPFIND",credentials:"same-origin",headers:{Depth:"0","Content-Type":"application/xml",requesttoken:j},body:Yh});if(!$o.ok)continue;const Xh=await $o.text();gs();const Mo=Xh.match(/<[^>]*calendar-color[^>]*>(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{8}|rgb\([^<]+\))<\/[^>]*calendar-color>/i);Mo&&(U[nt]=Mo[1])}catch{}return U}function Zh(){}return os(()=>{console.info("[opsdash] start"),M().catch(k=>{console.error(k),alert("Initial load failed")}),xn().catch(k=>console.warn("[opsdash] presets fetch failed",k))}),bt(c,()=>{g.value=0,M().catch(console.error)}),(k,A)=>{const U=Oi("NcAppSidebarToggle");return $(),D("div",{id:"opsdash",class:ve(["opsdash",{"is-nav-collapsed":!a.value}])},[ie(C(ic),{"app-name":"Operational Dashboard","show-navigation":a.value},{navigation:We(()=>[ie(Cp,{id:"opsdash-sidebar",calendars:C(K),selected:C(be),"groups-by-id":C(te),"is-loading":C(De),range:c.value,offset:g.value,from:C(Te),to:C(je),"targets-week":C(Ue),"targets-month":C(m),"targets-config":C(v),"notes-prev":C(Z),"notes-curr-draft":C(le),"notes-label-prev":Oh.value,"notes-label-curr":Hh.value,"notes-label-prev-title":Rh.value,"notes-label-curr-title":Fh.value,"is-saving-note":C(xe),"active-day-mode":ee.value,"nav-toggle-label":r.value,"nav-toggle-icon":o.value,presets:u.value,"presets-loading":b.value,"preset-saving":h.value,"preset-applying":w.value,"preset-warnings":T.value,onLoad:C(M),"onUpdate:range":A[0]||(A[0]=j=>{c.value=j,g.value=0,C(M)()}),"onUpdate:offset":A[1]||(A[1]=j=>{g.value=j,C(M)()}),onSelectAll:A[2]||(A[2]=j=>Gh(j)),onToggleCalendar:A[3]||(A[3]=j=>B(j)),onSetGroup:A[4]||(A[4]=j=>W(j.id,j.n)),onSetTarget:A[5]||(A[5]=j=>F(j.id,j.h)),"onUpdate:notes":A[6]||(A[6]=j=>le.value=j),onSaveNotes:C(Ne),"onUpdate:targetsConfig":H,"onUpdate:activeMode":qh,onToggleNav:n,onSavePreset:jh,onLoadPreset:Vh,onDeletePreset:zh,onRefreshPresets:xn,onClearPresetWarnings:Kh},null,8,["calendars","selected","groups-by-id","is-loading","range","offset","from","to","targets-week","targets-month","targets-config","notes-prev","notes-curr-draft","notes-label-prev","notes-label-curr","notes-label-prev-title","notes-label-curr-title","is-saving-note","active-day-mode","nav-toggle-label","nav-toggle-icon","presets","presets-loading","preset-saving","preset-applying","preset-warnings","onLoad","onSaveNotes"])]),"sidebar-toggle":We(()=>[ie(U,{open:a.value,onToggle:n},null,8,["open"])]),default:We(()=>[l("div",jp,[l("div",Up,[l("div",Vp,[p.value?($(),D("div",zp,[l("button",{class:"range-toolbar__btn",type:"button",onClick:n,"aria-expanded":a.value,"aria-controls":"opsdash-sidebar","aria-label":r.value},I(o.value),9,Kp),l("button",{class:"range-toolbar__btn",type:"button",disabled:C(De),onClick:S}," Refresh ",8,Gp),A[11]||(A[11]=l("div",{class:"range-toolbar__divider","aria-hidden":"true"},null,-1)),l("button",{class:"range-toolbar__btn",type:"button",disabled:C(De),onClick:E,"aria-pressed":c.value==="month"},I(d.value),9,qp),l("div",Jp,[l("button",{class:"range-toolbar__btn",type:"button",disabled:C(De),onClick:R},"  ",8,Zp),l("span",{class:"range-toolbar__label",title:f.value},I(f.value),9,Yp),l("button",{class:"range-toolbar__btn",type:"button",disabled:C(De),onClick:X},"  ",8,Xp)])])):q("",!0),l("div",Qp,[l("div",eh,[l("img",{src:Ih.value,onError:Nh,class:"app-icon",alt:"","aria-hidden":"true"},null,40,th),A[12]||(A[12]=l("span",null,"Operational Dashboard",-1)),l("span",{class:"chip",textContent:I(c.value.toUpperCase())},null,8,sh)]),l("div",ah,[C(De)?($(),qe(C(cc),{key:0,size:16})):q("",!0),l("span",{textContent:I(C(_e))},null,8,nh),C(Le)?($(),D("span",rh," Partial data")):q("",!0)])]),C(Le)?($(),D("div",{key:1,class:"banner warn",title:J.value},[A[13]||(A[13]=ye(" Showing partial data to keep things fast. ",-1)),C(we)&&C(we).totalProcessed!=null?($(),D(de,{key:0},[ye(" Processed "+I(C(we).totalProcessed)+" items. ",1)],64)):q("",!0)],8,oh)):q("",!0),l("div",ih,[ie(gu,{summary:C(y),mode:ee.value,config:C(v).timeSummary},null,8,["summary","mode","config"]),ie(Ru,{summary:ae.value,config:C(v),groups:C(at)},null,8,["summary","config","groups"]),ie(ld,{summary:C(L),"range-label":z.value,"category-hint":Xe.value,config:pe.value},null,8,["summary","range-label","category-hint","config"]),ie(md,{overview:C(fs),"range-label":z.value,config:$e.value},null,8,["overview","range-label","config"])]),l("div",lh,[l("a",{href:"#",class:ve({active:i.value==="cal"}),onClick:A[7]||(A[7]=va(j=>i.value="cal",["prevent"]))},"By Calendar",2),l("a",{href:"#",class:ve({active:i.value==="day"}),onClick:A[8]||(A[8]=va(j=>i.value="day",["prevent"]))},"By Day",2),l("a",{href:"#",class:ve({active:i.value==="top"}),onClick:A[9]||(A[9]=va(j=>i.value="top",["prevent"]))},"Longest Tasks",2),l("a",{href:"#",class:ve({active:i.value==="heat"}),onClick:A[10]||(A[10]=va(j=>i.value="heat",["prevent"]))},"Heatmap",2)]),ks(l("div",ch,[C(Ce).length===0?($(),qe(C(ya),{key:0,name:"No data",description:"Try changing the range or calendars"})):($(),D(de,{key:1},[ie(Ic,{rows:C(Ce),n2:_n,targets:fe.value,groups:C(at)},null,8,["rows","targets","groups"]),C(v).ui.showCalendarCharts&&(C(Qe).pie||C(Qe).stacked)?($(),D("div",uh,[A[16]||(A[16]=l("h3",{class:"section-title"},"Calendars (all)",-1)),l("div",dh,[l("div",fh,[A[14]||(A[14]=l("div",{class:"chart-card__title"},"Distribution by calendar",-1)),ie(go,{data:C(Qe).pie,"colors-by-id":C(Q),"colors-by-name":C(ue)},null,8,["data","colors-by-id","colors-by-name"])]),l("div",gh,[A[15]||(A[15]=l("div",{class:"chart-card__title"},"Hours per day",-1)),ie(po,{stacked:C(Qe).stacked,legacy:C(He).perDay,"colors-by-id":C(Q)},null,8,["stacked","legacy","colors-by-id"])])])])):q("",!0),C(v).ui.showCategoryCharts&&C(at).length?($(),D("div",ph,[A[19]||(A[19]=l("h3",{class:"section-title"},"Categories",-1)),($(!0),D(de,null,ze(C(at),j=>{var me,Fe,nt,Fs;return $(),D(de,{key:"cat-charts-"+j.id},[(me=C(Wt)[j.id])!=null&&me.pie||(Fe=C(Wt)[j.id])!=null&&Fe.stacked?($(),D("div",hh,[l("div",mh,[l("span",{class:"dot",style:Dt({background:C(Ve)[j.id]||"var(--brand)"})},null,4),l("span",vh,I(j.label),1)]),l("div",yh,[l("div",bh,[A[17]||(A[17]=l("div",{class:"chart-card__title"},"Calendar share",-1)),ie(go,{data:(nt=C(Wt)[j.id])==null?void 0:nt.pie,"colors-by-id":C(Q),"colors-by-name":C(ue)},null,8,["data","colors-by-id","colors-by-name"])]),l("div",wh,[A[18]||(A[18]=l("div",{class:"chart-card__title"},"Hours per day",-1)),ie(po,{stacked:(Fs=C(Wt)[j.id])==null?void 0:Fs.stacked,legacy:null,"colors-by-id":C(Q)},null,8,["stacked","colors-by-id"])])])])):q("",!0)],64)}),128))])):q("",!0)],64))],512),[[ha,i.value==="cal"]]),ks(l("div",_h,[C(se).length===0?($(),qe(C(ya),{key:0,name:"No data",description:"Try changing the range or calendars"})):($(),qe(Fc,{key:1,rows:C(se),n2:_n,link:xa},null,8,["rows"]))],512),[[ha,i.value==="day"]]),ks(l("div",kh,[C(Ke).length===0?($(),qe(C(ya),{key:0,name:"No data",description:"Try changing the range or calendars"})):($(),qe(Jc,{key:1,rows:C(Ke),n2:_n,"details-index":he.value,onToggle:pt},null,8,["rows","details-index"]))],512),[[ha,i.value==="top"]]),ks(l("div",xh,[!C(He).hod||!C(He).hod.matrix||C(He).hod.matrix.length===0?($(),qe(C(ya),{key:0,name:"No data",description:"Try changing the range or calendars"})):($(),D(de,{key:1},[ie(dc,{hod:C(He).hod},null,8,["hod"]),A[20]||(A[20]=l("div",{class:"hint"},"247 Heatmap: cumulated hours by weekday (rows) and hour (columns).",-1))],64))],512),[[ha,i.value==="heat"]]),l("div",Sh,[A[22]||(A[22]=ye(" Powered by ",-1)),A[23]||(A[23]=l("strong",null,"Gellert Innovation",-1)),A[24]||(A[24]=ye("  Built with ",-1)),A[25]||(A[25]=l("span",{class:"mono"},"opsdash",-1)),Ls.value?($(),D(de,{key:0},[ye(" v"+I(Ls.value),1)],64)):q("",!0),Os.value?($(),D(de,{key:1},[A[21]||(A[21]=ye("  ",-1)),l("a",{href:Os.value,target:"_blank",rel:"noreferrer noopener"},"Changelog",8,Ch)],64)):q("",!0)])])])])]),_:1},8,["show-navigation"])],2)}}});let Ns=null,vn=null,So=!1;function Mh(){if(!(typeof window>"u"))try{ka(),Th()}catch(e){Ph()&&console.warn("[opsdash] theme boot install failed",e)}}function Th(){if(Ns||vn||So)return;const e=[];if(document.documentElement&&e.push(document.documentElement),document.body&&document.body!==document.documentElement&&e.push(document.body),e.length&&(Ns=new MutationObserver(()=>ka()),e.forEach(t=>{Ns==null||Ns.observe(t,{attributes:!0,attributeFilter:["data-theme","class"]})})),window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)"),s=()=>ka();typeof t.addEventListener=="function"?(t.addEventListener("change",s),vn=()=>t.removeEventListener("change",s)):typeof t.addListener=="function"&&(t.addListener(s),vn=()=>{t.removeListener(s)})}window.addEventListener("oc:theme:changed",ka),So=!0}function ka(){const e=Ah();if(!e)return;["icon","shortcut icon"].forEach(s=>{let a=document.querySelector(`link[rel="${s}"]`);a||(a=document.createElement("link"),a.rel=s,document.head.appendChild(a)),a.type="image/svg+xml",a.href=e})}function Ah(){const e=Dh()==="dark",t=Eh(),s=t("favicon.svg");if(s)return s;if(e){const n=t("app-dark.svg");if(n)return n}const a=t(e?"app-dark.svg":"app.svg");return a||"/apps-extra/opsdash/img/favicon.svg"}function Dh(){var a,n,r,o,i;const e=(a=document.documentElement)==null?void 0:a.getAttribute("data-theme");if(e==="dark"||e==="light")return e;const t=(n=document.body)==null?void 0:n.getAttribute("data-theme");if(t==="dark"||t==="light")return t;if((r=document.body)!=null&&r.classList.contains("theme--dark"))return"dark";if((o=document.body)!=null&&o.classList.contains("theme--light"))return"light";const s=(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: dark)");return s!=null&&s.matches?"dark":"light"}function Eh(){const e=window;return t=>{var s;return typeof((s=e.OC)==null?void 0:s.imagePath)=="function"?e.OC.imagePath("opsdash",t):""}}function Ph(){var t;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function yn(){const e=document.getElementById("app");if(e){try{console.log("[opsdash] booting");const t=nc($h);t.config.errorHandler=(n,r,o)=>{const i=r!=null&&r.type&&r.type.name?r.type.name:"",c={err:n,info:o,name:i,stack:n instanceof Error?n.stack:void 0},g=window;Array.isArray(g.__opsdashErrors)||(g.__opsdashErrors=[]),g.__opsdashErrors.push(c),console.error("[opsdash] Vue error",c)};const s=t.mount(e),a=window;a.__opsdashApp=t,a.__opsdashRoot=s,Mh(),console.log("[opsdash] mounted")}catch(t){console.error("Mount failed",t)}return}document.readyState==="complete"||document.readyState==="interactive"?setTimeout(yn,50):window.addEventListener("DOMContentLoaded",yn,{once:!0})}yn()})();
