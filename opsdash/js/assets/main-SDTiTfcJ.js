(function(){"use strict";var Ws=document.createElement("style");Ws.textContent=`.sb-description[data-v-de8b693e]{font-size:12px;color:var(--text-color-tertiary);margin:0 0 10px}.setup-actions[data-v-de8b693e]{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:12px}.setup-actions .import-input[data-v-de8b693e]{display:none}.preset-form[data-v-de8b693e]{display:flex;flex-direction:column;gap:6px;margin-bottom:12px}.preset-label[data-v-de8b693e]{font-size:12px;font-weight:600}.preset-form input[data-v-de8b693e]{width:100%;padding:6px 8px;border-radius:4px;border:1px solid var(--color-border);background:var(--color-main-background);color:var(--color-main-text)}.preset-save[data-v-de8b693e]{align-self:flex-start}.preset-error[data-v-de8b693e]{color:var(--color-error);font-size:12px}.preset-warnings[data-v-de8b693e]{border:1px solid var(--color-warning);background:color-mix(in srgb,var(--color-warning) 10%,transparent);border-radius:6px;padding:8px;margin-bottom:12px}.warnings-title[data-v-de8b693e]{font-weight:600;margin-bottom:4px}.preset-warnings ul[data-v-de8b693e]{padding-left:18px;margin:0 0 6px}.preset-clear[data-v-de8b693e]{padding:2px 6px}.preset-header[data-v-de8b693e]{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}.preset-header h3[data-v-de8b693e]{margin:0;font-size:15px;font-weight:600}.preset-empty[data-v-de8b693e]{font-size:12px;color:var(--text-color-tertiary)}.preset-list[data-v-de8b693e]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:8px}.preset-item[data-v-de8b693e]{border:1px solid rgba(56,189,248,.55);border-radius:6px;padding:8px;display:flex;flex-direction:column;gap:6px;background:#dff1ff;color:var(--color-main-text)}.preset-meta[data-v-de8b693e]{display:flex;flex-direction:column;gap:2px}.preset-name[data-v-de8b693e]{font-weight:600}.preset-info[data-v-de8b693e]{display:flex;flex-wrap:wrap;gap:8px;font-size:11px;color:var(--color-text-lighter)}#opsdash.opsdash-theme-dark .preset-item{background:#dff1ff;border-color:#38bdf88c;color:#0f172a}#opsdash.opsdash-theme-dark .preset-info{color:#475569}.preset-actions[data-v-de8b693e]{display:flex;gap:6px}.sidebar-toggle-btn[data-v-c8fcbb4e]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:14px;border:1px solid color-mix(in oklab,var(--brand),transparent 55%);background:color-mix(in oklab,var(--brand),transparent 86%);color:var(--brand);width:26px;height:26px;display:flex;align-items:center;justify-content:center;box-shadow:0 6px 14px #0f172a1f;cursor:pointer;font-size:11px}.sidebar-toggle-btn[data-v-c8fcbb4e]:hover{background:color-mix(in oklab,var(--brand),transparent 76%);border-color:color-mix(in oklab,var(--brand),transparent 40%)}.sidebar-toggle-btn[data-v-c8fcbb4e]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand),transparent 40%);outline-offset:2px}.app-opsdash #app-navigation,.app-opsdash .app-navigation{position:relative}.rangebar[data-v-c8fcbb4e]{margin-top:12px}.sidebar-toggle-btn--corner[data-v-c8fcbb4e]{position:absolute;top:-10px;right:-10px;border-color:color-mix(in oklab,var(--brand),var(--line) 70%);background:color-mix(in oklab,var(--card),transparent 10%);box-shadow:0 6px 16px #0f172a1f,inset 0 0 0 1px color-mix(in oklab,var(--brand),transparent 82%)}.sidebar-shortcuts[data-v-c8fcbb4e]{margin:8px 0 4px}.sidebar-shortcuts--bottom[data-v-c8fcbb4e]{display:flex;flex-direction:column;align-items:center;margin-top:12px}.sidebar-shortcuts--bottom .shortcuts-btn[data-v-c8fcbb4e]{margin:0 auto}.sidebar-shortcuts--bottom .shortcuts-box[data-v-c8fcbb4e]{width:100%}.sidebar-block[data-v-c8fcbb4e]{margin:8px 0 12px}.sidebar-block--framed[data-v-c8fcbb4e]{border:1px solid color-mix(in oklab,var(--brand),var(--line) 70%);border-radius:14px;background:color-mix(in oklab,var(--card),transparent 10%);padding:12px 14px;box-shadow:0 6px 16px #0f172a1f,inset 0 0 0 1px color-mix(in oklab,var(--brand),transparent 82%)}.rerun-btn__icon[data-v-c8fcbb4e]{display:inline-flex;margin-right:6px;font-size:12px;line-height:1}.onboarding-jumps[data-v-c8fcbb4e]{display:grid;gap:4px;margin:6px 0 4px;padding-left:18px;font-size:12px;color:var(--muted, #6b7280);list-style:decimal;list-style-position:inside}.onboarding-jumps .link[data-v-c8fcbb4e]{background:transparent;border:0;padding:0;color:inherit;text-align:left;text-decoration:none;cursor:pointer}.onboarding-jumps .link[data-v-c8fcbb4e]:hover{color:var(--color-primary-text);text-decoration:underline}.onboarding-help[data-v-c8fcbb4e]{font-size:12px;color:var(--muted, #6b7280);margin-top:2px;margin-bottom:4px}.shortcuts-box[data-v-c8fcbb4e]{margin:8px 0 12px;background:color-mix(in oklab,#111827,#1f2937 60%);border:1px solid color-mix(in oklab,#4b5563,transparent 20%);border-radius:10px;box-shadow:0 10px 18px #0000002e;padding:10px}.shortcuts-box__header[data-v-c8fcbb4e]{display:flex;align-items:center;justify-content:space-between;font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.04em;color:#cbd5f5;margin-bottom:8px}.shortcuts-box__body[data-v-c8fcbb4e]{display:flex;flex-direction:column;gap:10px}.shortcuts-box__title[data-v-c8fcbb4e]{font-size:11px;font-weight:700;color:#9ca3af;text-transform:uppercase;letter-spacing:.04em;margin-bottom:4px}.shortcuts-box__group ul[data-v-c8fcbb4e]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:6px}.shortcuts-box__group li[data-v-c8fcbb4e]{display:grid;grid-template-columns:1fr auto;gap:6px 10px;align-items:center;color:#e5e7eb;font-size:12px}.shortcuts-box__group .combo[data-v-c8fcbb4e]{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:11px;background:#0f172acc;border-radius:6px;padding:2px 6px;color:#f8fafc}.shortcuts-box__group .desc[data-v-c8fcbb4e]{grid-column:1 / -1;color:#94a3b8;font-size:11px}.onboarding-fade-enter-active,.onboarding-fade-leave-active{transition:opacity .2s ease}.onboarding-fade-enter-from,.onboarding-fade-leave-to{opacity:0}.onboarding-overlay{position:fixed;top:0;right:0;bottom:0;left:0;z-index:2000;display:flex;align-items:center;justify-content:center;padding:24px}.onboarding-backdrop{position:absolute;top:0;right:0;bottom:0;left:0;background:#0f172a73}.onboarding-panel{position:relative;z-index:1;width:min(960px,100%);max-height:calc(100vh - 48px);background:var(--color-main-background, #fff);border:1px solid color-mix(in oklab,var(--brand, #2563eb),var(--line, #e2e8f0) 70%);border-radius:14px;box-shadow:0 18px 48px #0f172a59,inset 0 0 0 1px color-mix(in oklab,var(--brand, #2563eb),transparent 82%);display:flex;flex-direction:column;padding:24px 28px}.onboarding-panel.theme-light{color:#0f172a;background:#fff}.onboarding-panel.theme-dark{--color-main-background: #0f172a;--color-background-contrast: #111827;--color-text: #e5e7eb;--color-text-maxcontrast: #e5e7eb;--color-text-light: #94a3b8;--color-border: #1f2937;--color-primary-element: #60a5fa;--color-primary: #60a5fa;color:#e5e7eb;background:#0f172a;box-shadow:0 18px 48px #00000080,inset 0 0 0 1px color-mix(in oklab,var(--brand, #60a5fa),transparent 82%)}.onboarding-panel.theme-dark .hint,.onboarding-panel.theme-dark .subtitle,.onboarding-panel.theme-dark .step-pill{color:#94a3b8}.onboarding-panel.theme-dark h2,.onboarding-panel.theme-dark h3,.onboarding-panel.theme-dark h4,.onboarding-panel.theme-dark p,.onboarding-panel.theme-dark li{color:#e5e7eb}.onboarding-panel.theme-dark .step-pill{background:#111827;border-color:#1f2937}.onboarding-panel.theme-dark .step-pill.active{color:#93c5fd;border-color:#60a5fa99;background:#60a5fa2e}.onboarding-panel.theme-dark input,.onboarding-panel.theme-dark select,.onboarding-panel.theme-dark textarea{background:#111827;color:#e5e7eb;border:1px solid #1f2937}.onboarding-panel.theme-dark .calendar-item{background:#0b1220;border-color:#1f2937}.onboarding-panel.theme-dark .category-card,.onboarding-panel.theme-dark .pref-card,.onboarding-panel.theme-dark .strategy-card,.onboarding-panel.theme-dark .mode-card,.onboarding-panel.theme-dark .input-unit,.onboarding-panel.theme-dark .empty-state{background:#111827;border-color:#1f2937}.onboarding-panel.theme-dark .mode-card.active{border-color:#60a5fa99;box-shadow:0 12px 24px #0006}.onboarding-panel.theme-dark .input-unit .unit{background:#0b1220;color:#94a3b8}.onboarding-panel.theme-dark .config-warning{border-color:#fb923c80;background:#fb923c1f}.onboarding-panel.theme-dark .config-warning p{color:#fde68a}.onboarding-panel.theme-dark .snapshot-notice--success{background:#22c55e2e;color:#bbf7d0}.onboarding-panel.theme-dark .snapshot-notice--error{background:#ef444433;color:#fecaca}.onboarding-panel.theme-dark .close-btn{color:#cbd5f5}.onboarding-panel.theme-dark .close-btn:hover{color:#93c5fd}.onboarding-panel.theme-dark .color-popover{background:#0b1220;border-color:#1f2937}.onboarding-panel.theme-dark .color-link{color:#93c5fd}.onboarding-panel.theme-dark .review-grid h5{color:#e2e8f0}.onboarding-panel.theme-dark .warning{background:#f871711f;border-color:#f8717166;color:#fecaca}.onboarding-header{display:flex;justify-content:space-between;align-items:baseline;margin-bottom:16px}.onboarding-actions{display:flex;align-items:center;gap:12px}.onboarding-title h2{margin:0;font-size:1.6rem}.onboarding-title .subtitle{margin:4px 0 0;color:var(--color-text-light)}.onboarding-overlay .skip-link{background:none;border:none;color:var(--color-primary);cursor:pointer;font-size:.95rem}.onboarding-overlay .close-btn{background:none;border:none;font-size:1.4rem;line-height:1;cursor:pointer;color:var(--color-text-light)}.onboarding-overlay .close-btn:hover{color:var(--color-primary)}.onboarding-step-nav{display:flex;flex-wrap:wrap;gap:8px;margin:0 0 12px}.onboarding-overlay .step-pill{border:1px solid var(--color-border);background:var(--color-background-contrast);padding:6px 10px;border-radius:999px;font-size:12px;cursor:pointer;color:var(--color-text)}.onboarding-overlay .step-pill.active{border-color:var(--color-primary);color:var(--color-primary);background:#2563eb14}.onboarding-overlay .step-pill:disabled{opacity:.6;cursor:default}.onboarding-body{flex:1;overflow-y:auto;padding-right:8px;margin-right:-8px}.onboarding-step h3{margin-top:0}.onboarding-overlay .highlights{padding-left:18px}.onboarding-overlay .config-warning{border:1px solid color-mix(in srgb,var(--color-warning, #f97316) 35%,transparent);background:color-mix(in srgb,var(--color-warning, #f97316) 12%,transparent);border-radius:8px;padding:12px;margin:12px 0;display:flex;flex-direction:column;gap:8px}.onboarding-overlay .config-warning p{margin:0;font-size:.95rem;color:var(--color-text)}.onboarding-overlay .hint{color:var(--color-text-light);margin-top:12px}.onboarding-overlay .snapshot-notice{margin-top:12px;padding:10px 12px;border-radius:8px;font-size:.9rem}.onboarding-overlay .snapshot-notice--success{background:color-mix(in srgb,#22c55e 15%,transparent);color:#14532d}.onboarding-overlay .snapshot-notice--error{background:color-mix(in srgb,#ef4444 15%,transparent);color:#7f1d1d}.onboarding-overlay .strategy-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px}.onboarding-overlay .strategy-card{border:1px solid var(--color-border);border-radius:8px;padding:16px;cursor:pointer;display:flex;flex-direction:column;gap:8px;transition:border-color .15s ease,box-shadow .15s ease}.onboarding-overlay .strategy-card.active{border-color:var(--color-primary);box-shadow:0 0 0 2px #3b82f633}.onboarding-overlay .strategy-card h4{margin:0}.onboarding-overlay .strategy-card .subtitle{color:var(--color-text-light);margin:0}.onboarding-overlay .strategy-card footer{margin-top:auto;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .calendar-list{display:grid;gap:8px;margin-top:8px}.onboarding-overlay .calendar-item{display:grid;grid-template-columns:auto auto 1fr;align-items:center;gap:8px;padding:8px 12px;border:1px solid var(--color-border);border-radius:6px}.onboarding-overlay .calendar-item.checked{border-color:var(--color-primary)}.onboarding-overlay .calendar-item input{margin:0}.onboarding-overlay .calendar-item .dot{width:12px;height:12px;border-radius:50%}.onboarding-overlay .warning{color:var(--color-error);margin-top:12px}.onboarding-overlay .review-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .review-grid h5{margin:0 0 8px;font-size:.95rem;color:var(--color-text-light)}.onboarding-overlay .review-profile{display:grid;gap:8px}.onboarding-overlay .onboarding-mode{margin:16px 0}.onboarding-overlay .mode-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .mode-card{border:1px solid var(--color-border);background:var(--color-background-contrast);border-radius:10px;padding:12px 14px;text-align:left;cursor:pointer;display:grid;gap:6px;transition:border-color .2s ease,box-shadow .2s ease,transform .2s ease}.onboarding-overlay .mode-card strong{font-size:.98rem}.onboarding-overlay .mode-card span{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .mode-card.active{border-color:color-mix(in oklab,var(--color-primary),transparent 35%);box-shadow:0 12px 24px #0f172a26;transform:translateY(-1px)}.onboarding-overlay .mode-card:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .categories-editor{display:grid;gap:16px}.onboarding-overlay .category-presets{display:grid;gap:8px;margin-bottom:16px}.onboarding-overlay .preset-grid{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(220px,1fr))}.onboarding-overlay .preset-card{text-align:left;border:1px solid var(--color-border);background:var(--color-background-contrast);border-radius:12px;padding:12px 14px;display:grid;gap:6px;cursor:pointer;transition:border-color .2s ease,box-shadow .2s ease,transform .2s ease}.onboarding-overlay .preset-card:hover{border-color:color-mix(in oklab,var(--color-primary),transparent 40%);box-shadow:0 8px 18px #0f172a1f;transform:translateY(-1px)}.onboarding-overlay .preset-card:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .preset-title{font-weight:600}.onboarding-overlay .preset-desc{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .preset-swatches{display:flex;gap:6px;align-items:center}.onboarding-overlay .preset-swatch{width:14px;height:14px;border-radius:50%;border:1px solid color-mix(in oklab,var(--color-border),transparent 30%)}.onboarding-overlay .empty-state{padding:12px 14px;border-radius:10px;border:1px dashed color-mix(in oklab,var(--color-border),transparent 30%);background:color-mix(in oklab,var(--color-background-contrast),transparent 20%);color:var(--color-text-light)}.onboarding-overlay .category-card{border:1px solid var(--color-border);border-radius:8px;padding:16px;background:var(--color-main-background, #fff);display:flex;flex-direction:column;gap:12px}.onboarding-overlay .category-card__header{display:flex;gap:12px;align-items:center;flex-wrap:wrap}.onboarding-overlay .category-color-indicator{width:14px;height:14px;border-radius:50%;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);flex-shrink:0}.onboarding-overlay .category-name{flex:1;padding:6px 8px;border:1px solid var(--color-border);border-radius:4px;min-width:180px}.onboarding-overlay .category-actions{display:flex;gap:8px}.onboarding-overlay .remove-category{background:none;border:none;color:var(--color-text-light);cursor:pointer;font-size:1.1rem}.onboarding-overlay .remove-category:disabled{opacity:.4;cursor:default}.onboarding-overlay .remove-category:not(:disabled):hover{color:var(--color-error)}.onboarding-overlay .category-card__fields{display:flex;flex-wrap:wrap;gap:16px}.onboarding-overlay .color-field{display:flex;flex-direction:column;gap:6px;position:relative}.onboarding-overlay .color-button{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--color-border);background:var(--color-background-contrast);padding:4px 8px;border-radius:999px;font-size:12px;color:var(--color-text);cursor:pointer}.onboarding-overlay .color-button:hover{border-color:color-mix(in oklab,var(--color-primary),transparent 35%)}.onboarding-overlay .color-button:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .color-button .category-color-indicator{width:12px;height:12px}.onboarding-overlay .color-link{align-self:flex-start;border:none;background:transparent;padding:0;font-size:12px;color:var(--brand, #2563eb);text-decoration:underline;cursor:pointer}.onboarding-overlay .color-link:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .color-popover{position:absolute;top:calc(100% + 6px);left:0;z-index:30;min-width:160px;padding:10px;border-radius:10px;border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);background:var(--color-main-background, #fff);box-shadow:0 12px 32px #0f172a40;display:flex;flex-direction:column;gap:8px}.onboarding-overlay .color-popover:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:2px}.onboarding-overlay .swatch-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,20px));justify-content:flex-start;gap:6px}.onboarding-overlay .color-swatch{width:18px;height:18px;aspect-ratio:1 / 1;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0;cursor:pointer;display:inline-flex;align-items:center;justify-content:center}.onboarding-overlay .color-swatch.active{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 55%)}.onboarding-overlay .color-swatch:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 45%);outline-offset:1px}.onboarding-overlay .custom-color{display:flex;align-items:center;justify-content:space-between;gap:8px;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .color-input{width:44px;height:26px;padding:0;border-radius:6px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:transparent}.onboarding-overlay .add-category{justify-self:flex-start}.onboarding-overlay .category-total{font-size:.9rem;color:var(--color-text-light)}.onboarding-overlay .input-unit{display:grid;grid-template-columns:1fr auto;align-items:center;border:1px solid var(--color-border);border-radius:8px;overflow:hidden;background:var(--color-background-contrast)}.onboarding-overlay .input-unit input{border:none;padding:7px 10px;background:transparent}.onboarding-overlay .input-unit .unit{padding:6px 10px;font-size:.75rem;color:var(--color-text-light);background:color-mix(in oklab,var(--color-border),transparent 70%);white-space:nowrap}.onboarding-overlay .field{display:flex;flex-direction:column;gap:6px}.onboarding-overlay .field .label{font-size:.8rem;color:var(--color-text-light)}.onboarding-overlay .field-hint{display:block;margin-top:4px;font-size:.75rem;color:var(--color-text-light)}.onboarding-overlay .calendar-assignments{margin-top:24px;display:grid;gap:12px}.onboarding-overlay .calendar-targets{margin-top:16px;display:grid;gap:12px}.onboarding-overlay .assignment-row{display:grid;grid-template-columns:1fr minmax(160px,220px) auto;gap:12px;align-items:center}.onboarding-overlay .target-row{display:grid;grid-template-columns:1fr minmax(150px,200px);gap:12px;align-items:center}.onboarding-overlay .assignment-row select{padding:6px 8px}.onboarding-overlay .cal-name{font-size:.95rem}.onboarding-overlay .assignment-warning{font-size:.75rem;color:var(--color-error)}.onboarding-overlay .assignment-row.is-unassigned select{border-color:color-mix(in oklab,var(--color-error),transparent 50%)}.onboarding-footer{display:flex;justify-content:flex-end;gap:12px;margin-top:24px}.onboarding-overlay .preferences-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}.onboarding-overlay .pref-card{border:1px solid color-mix(in oklab,var(--color-border),transparent 30%);border-radius:10px;padding:12px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:12px}.onboarding-overlay .pref-card h4{margin:0}.onboarding-overlay .toggle-row{display:flex;gap:10px;align-items:center;font-size:.95rem}.onboarding-overlay .toggle-row input[type=checkbox]{transform:scale(1.05)}.onboarding-overlay .pref-card--deck .toggle-row{display:flex;gap:10px;align-items:center;font-size:.95rem}.onboarding-overlay .pref-card--deck input[type=checkbox]{transform:scale(1.05)}.onboarding-overlay .deck-board-list{border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);border-radius:8px;padding:10px;background:color-mix(in oklab,var(--color-main-background, #fff),transparent 6%);display:flex;flex-direction:column;gap:8px}.onboarding-overlay .deck-board-options{display:flex;flex-direction:column;gap:6px}.onboarding-overlay .deck-board-option{display:flex;gap:8px;align-items:center;font-size:.9rem}.onboarding-overlay .deck-status{font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .deck-status--error{color:var(--color-error)}.onboarding-overlay .pref-desc{margin:0;font-size:.9rem;color:var(--color-text-light)}.onboarding-overlay .pref-hint{margin:0;font-size:.85rem;color:var(--color-text-light)}.onboarding-overlay .theme-options{display:flex;flex-direction:column;gap:8px}.onboarding-overlay .theme-option{display:flex;gap:10px;align-items:flex-start;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,var(--color-border),transparent 40%);background:color-mix(in oklab,var(--color-main-background, #fff),transparent 8%)}.onboarding-overlay .theme-option input[type=radio]{margin-top:4px}.onboarding-overlay .theme-copy{display:flex;flex-direction:column;gap:2px;font-size:.9rem}.onboarding-overlay .theme-option__title{font-weight:600;color:var(--color-text)}.onboarding-overlay .theme-option__desc{color:var(--color-text-light);font-size:.85rem}.onboarding-overlay .theme-preview{font-size:.85rem;color:var(--color-text-light)}:global(body.opsdash-onboarding-lock){overflow:hidden}.shortcuts-overlay[data-v-f8126e32]{position:fixed;top:0;right:0;bottom:0;left:0;background:color-mix(in srgb,var(--color-background-dark-default, rgba(0, 0, 0, .85)) 90%,transparent);display:flex;align-items:center;justify-content:center;padding:24px;z-index:9999}.shortcuts-panel[data-v-f8126e32]{width:min(720px,100%);max-height:90vh;overflow:auto;background:var(--color-main-background, #fff);border-radius:16px;box-shadow:0 12px 48px #00000059;padding:20px;display:flex;flex-direction:column;gap:16px;outline:none}.shortcuts-header[data-v-f8126e32]{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}.shortcuts-title h2[data-v-f8126e32]{margin:0;font-size:20px}.shortcuts-hint[data-v-f8126e32]{margin:4px 0 0;font-size:13px;color:var(--text-color-tertiary)}.shortcuts-close[data-v-f8126e32]{border:none;background:transparent;font-size:24px;line-height:1;cursor:pointer;color:var(--text-color-primary, #111)}.shortcuts-body[data-v-f8126e32]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px}.shortcuts-group h3[data-v-f8126e32]{margin:0 0 8px;font-size:14px;text-transform:uppercase;color:var(--text-color-tertiary);letter-spacing:.06em}.shortcuts-group ul[data-v-f8126e32]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}.shortcuts-group li[data-v-f8126e32]{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 0;border-bottom:1px solid color-mix(in srgb,var(--color-border, rgba(0, 0, 0, .1)) 60%,transparent)}.shortcuts-group li[data-v-f8126e32]:last-child{border-bottom:none}.shortcut-label[data-v-f8126e32]{font-weight:600;display:flex;flex-direction:column;gap:2px}.shortcut-label small[data-v-f8126e32]{font-weight:400;font-size:12px;color:var(--text-color-tertiary)}.shortcut-combo[data-v-f8126e32]{display:inline-flex;gap:6px}kbd[data-v-f8126e32]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;padding:4px 8px;border-radius:6px;border:1px solid color-mix(in srgb,var(--color-border, rgba(0, 0, 0, .2)) 80%,transparent);background:color-mix(in srgb,var(--color-main-background, #fff) 80%,rgba(0,0,0,.05));color:var(--text-color-primary, #111);box-shadow:inset 0 -1px #fff9}.shortcuts-footer[data-v-f8126e32]{display:flex;justify-content:flex-end}@media (max-width: 600px){.shortcuts-panel[data-v-f8126e32]{padding:16px}.shortcuts-body[data-v-f8126e32]{grid-template-columns:1fr}}.layout-grid[data-v-9017abee]{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:100%;position:relative;--grid-row: 24px;grid-auto-rows:var(--grid-row);grid-auto-flow:row}.layout-item[data-v-9017abee]{position:relative}.layout-item.is-loading[data-v-9017abee]>:not(.widget-loading){opacity:.35;filter:saturate(.85)}.widget-loading[data-v-9017abee]{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;background:color-mix(in oklab,var(--card),transparent 20%);border-radius:16px;z-index:2}.widget-loading__spinner[data-v-9017abee]{width:20px;height:20px;border-radius:50%;border:2px solid color-mix(in oklab,var(--brand),transparent 65%);border-top-color:var(--brand);animation:widget-spin-9017abee .8s linear infinite}.widget-loading__label[data-v-9017abee]{font-size:12px;font-weight:600;color:var(--muted, #6b7280)}@keyframes widget-spin-9017abee{to{transform:rotate(360deg)}}.layout-grid.show-guides[data-v-9017abee]{background-image:linear-gradient(to right,rgba(148,163,184,.15) 1px,transparent 1px),linear-gradient(to bottom,rgba(148,163,184,.12) 1px,transparent 1px);background-size:calc((100% - 36px)/4) 100%,100% var(--grid-row);background-position:0 0,0 0}.layout-grid.show-guides[data-v-9017abee]:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.layout-item[data-v-9017abee]{min-width:0;position:relative;display:flex;padding:0;cursor:grab;align-self:stretch;overflow:hidden;--widget-scale:1;--widget-space:1;--widget-density:1;--widget-text-scale: var(--widget-scale);--widget-pad: calc(12px * var(--widget-space));--widget-gap: calc(8px * var(--widget-space));--widget-gap-tight: calc(6px * var(--widget-space));--widget-font: calc(14px * var(--widget-scale))}.layout-item[data-v-9017abee]>*{flex:1 1 auto;min-width:0;min-height:0;height:100%;overflow:auto}.w-quarter[data-v-9017abee]{grid-column:span 1}.w-half[data-v-9017abee]{grid-column:span 2}.w-full[data-v-9017abee]{grid-column:span 4}.h-s[data-v-9017abee]{grid-row-end:span 4}.h-m[data-v-9017abee]{grid-row-end:span 8}.h-l[data-v-9017abee]{grid-row-end:span 13}.h-xl[data-v-9017abee]{grid-row-end:span 22}.is-editable[data-v-9017abee]{outline:1px dashed rgba(107,114,128,.5);border-radius:10px}.is-selected[data-v-9017abee]{outline:2px solid var(--color-primary,#2563EB)}.is-dragging[data-v-9017abee]{opacity:.6}.scale-sm[data-v-9017abee]{--widget-scale:.85}.scale-md[data-v-9017abee]{--widget-scale:1}.scale-lg[data-v-9017abee]{--widget-scale:1.2}.scale-xl[data-v-9017abee]{--widget-scale:1.4}@media (max-width: 1024px){.w-quarter[data-v-9017abee],.w-half[data-v-9017abee]{grid-column:span 2}.w-full[data-v-9017abee]{grid-column:span 4}}@media (max-width: 768px){.w-quarter[data-v-9017abee],.w-half[data-v-9017abee],.w-full[data-v-9017abee]{grid-column:span 4}}.options-wrapper[data-v-adf460eb]{position:relative}.options-pop[data-v-adf460eb]{position:absolute;bottom:calc(100% + 6px);right:0;top:auto;background:color-mix(in oklab,#111827,#1f2937 60%);border:1px solid color-mix(in oklab,#4b5563,transparent 20%);border-radius:8px;box-shadow:0 10px 22px #00000038;padding:8px;width:33vw;z-index:30;max-height:360px;overflow:auto;overflow-x:hidden}.opt-row[data-v-adf460eb]{display:grid;grid-template-columns:minmax(120px,1fr) minmax(140px,1fr);align-items:center;gap:10px;margin-bottom:6px}.opt-row[data-v-adf460eb]:last-child{margin-bottom:0}.opt-row--footer[data-v-adf460eb]{grid-template-columns:1fr;justify-items:end}.opt-row--footer[data-v-adf460eb]{justify-content:flex-end}.link-btn[data-v-adf460eb]{border:none;background:transparent;color:var(--brand,#2563eb);cursor:pointer;font-size:12px;text-decoration:underline}.opt-row label[data-v-adf460eb]{font-size:17px;color:#e5e7eb}.opt-row input[type='"number"'][data-v-adf460eb],.opt-row select[data-v-adf460eb],.opt-row input[type='"text"'][data-v-adf460eb]{width:100%;background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:6px 8px;font-size:15px}.opt-row input[type='"checkbox"'][data-v-adf460eb]{width:12px;height:12px;transform:scale(.85);transform-origin:center;align-self:center}.opt-row textarea[data-v-adf460eb]{width:100%;background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:7px}.opt-section[data-v-adf460eb]{margin-bottom:10px;padding:8px;border-radius:8px;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);background:color-mix(in oklab,#0f172a,#111827 75%)}.opt-section[data-v-adf460eb]:last-child{margin-bottom:0}.opt-section__title[data-v-adf460eb]{font-size:15px;text-transform:uppercase;letter-spacing:.04em;color:#9ca3af;margin-bottom:8px;font-weight:700}.colorlist[data-v-adf460eb]{display:flex;align-items:center;gap:6px;flex-wrap:wrap}.colorlist__item input[type=color][data-v-adf460eb]{width:38px;height:28px;padding:0;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);background:#0f172a}.multi[data-v-adf460eb]{display:grid;gap:6px;grid-template-columns:repeat(2,minmax(0,1fr))}.multi__item[data-v-adf460eb]{display:flex;align-items:center;gap:6px;font-size:16px}.multi__item input[type='"checkbox"'][data-v-adf460eb]{width:12px;height:12px;transform:scale(.85);transform-origin:center}.multi__item span[data-v-adf460eb]{color:#e5e7eb}.taglist[data-v-adf460eb]{display:flex;flex-direction:column;gap:6px}.taglist__hint[data-v-adf460eb]{font-size:12px;color:#9ca3af;line-height:1.35}.taglist__item[data-v-adf460eb]{display:flex;align-items:center;justify-content:space-between;gap:10px;font-size:15px}.taglist__meta[data-v-adf460eb]{display:flex;align-items:center;gap:6px}.taglist__label[data-v-adf460eb]{color:#e5e7eb}.taglist__count[data-v-adf460eb]{font-size:12px;color:#9ca3af}.filter-builder[data-v-adf460eb]{display:flex;flex-direction:column;gap:8px;width:100%}.filter-builder__row[data-v-adf460eb]{display:grid;grid-template-columns:minmax(120px,1fr) minmax(140px,1fr) minmax(140px,1fr) auto;gap:6px;align-items:center}.filter-builder__hint[data-v-adf460eb]{font-size:12px;color:#9ca3af;line-height:1.35}.filter-builder__hint code[data-v-adf460eb]{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:10px;color:#e5e7eb;background:#0f172acc;padding:1px 4px;border-radius:4px}.filter-builder__label[data-v-adf460eb],.filter-builder__input[data-v-adf460eb]{background:#0f172a;border:1px solid color-mix(in oklab,#4b5563,transparent 30%);color:#e5e7eb;border-radius:6px;padding:4px 6px;font-size:13px}@media (max-width: 720px){.filter-builder__row[data-v-adf460eb]{grid-template-columns:1fr;align-items:stretch}.filter-builder__row .ghost[data-v-adf460eb]{justify-self:end}}.ghost[data-v-c1764b36]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.ghost.danger[data-v-c1764b36]{color:#b91c1c;border-color:#fca5a5}.widget-toolbar-layer[data-v-c1764b36]{position:fixed;inset:auto 24px 10px calc(24px + var(--opsdash-nav-offset, 0px));pointer-events:none;z-index:2147480000;display:flex;align-items:flex-end;justify-content:center;padding:0;background:none}.widget-toolbar[data-v-c1764b36]{pointer-events:auto;position:relative;margin-top:0;padding:7px 10px;border:1px solid rgba(59,130,246,.55);background:#0b1222;border:1px solid color-mix(in oklab,var(--color-primary,#2563eb),transparent 20%);background:linear-gradient(180deg,#0f172afa,#020617fa);border-radius:8px;display:flex;align-items:center;justify-content:space-between;gap:6px;box-shadow:0 8px 20px #0f172a8c,0 0 0 1px #3b82f62e;max-width:1200px;width:min(100%,1200px);opacity:1;z-index:2147480001;-webkit-backdrop-filter:blur(6px);backdrop-filter:blur(6px);transition:background .14s ease,box-shadow .14s ease,transform .14s ease}.widget-toolbar[data-v-c1764b36]:hover{background:linear-gradient(180deg,#1e293bfa,#0f172afa);box-shadow:0 10px 24px #0f172a99,0 0 0 1px #3b82f640}.toolbar-title[data-v-c1764b36]{font-weight:600;font-size:13px;color:#e5e7eb}.toolbar-actions[data-v-c1764b36],.toolbar-quick[data-v-c1764b36]{display:flex;gap:6px;flex-wrap:wrap;align-items:center}.toolbar-field[data-v-c1764b36]{display:flex;align-items:center;gap:6px;font-size:12px;color:#e5e7eb}.toolbar-field span[data-v-c1764b36]{opacity:.75}.toolbar-field input[type=text][data-v-c1764b36],.toolbar-field select[data-v-c1764b36]{border-radius:6px;border:1px solid color-mix(in oklab,#4b5563,transparent 35%);background:color-mix(in oklab,#0f172a,#111827 70%);color:#e2e8f0;padding:3px 6px;font-size:12px;min-width:88px}.toolbar-field input[type=color][data-v-c1764b36]{width:26px;height:20px;padding:0;border:1px solid color-mix(in oklab,#4b5563,transparent 35%);border-radius:6px;background:transparent}.toolbar-field--toggle[data-v-c1764b36]{gap:4px}.widget-toolbar .ghost[data-v-c1764b36]{padding:5px 8px;font-size:12px;background:#0f172a;border-color:#4b5563;background:color-mix(in oklab,#111827,#1f2937 80%);border-color:color-mix(in oklab,#4b5563,transparent 35%);color:#f1f5f9}.widget-toolbar .ghost[data-v-c1764b36]:hover{background:#1e3a8a;border-color:#2563eb;background:color-mix(in oklab,#2563EB,#111827 85%);border-color:color-mix(in oklab,#2563EB,transparent 50%)}.cat-header[data-v-1e606590]{display:flex;align-items:center;gap:8px}.cat-color-indicator[data-v-1e606590]{width:12px;height:12px;border-radius:50%;border:1px solid color-mix(in oklab,var(--fg),transparent 80%);flex-shrink:0}.cat-header .cat-name[data-v-1e606590]{flex:1;padding:6px 8px;border:1px solid var(--line);border-radius:6px;background:color-mix(in oklab,var(--card),transparent 5%);color:var(--fg)}.color-trigger-wrapper[data-v-1e606590]{position:relative;display:inline-flex;align-items:center}.color-link[data-v-1e606590]{border:none;background:transparent;padding:0;font-size:12px;color:var(--brand, #2563eb);text-decoration:underline;cursor:pointer}.color-link[data-v-1e606590]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 40%);outline-offset:2px}.swatch-grid[data-v-1e606590]{display:grid;grid-template-columns:repeat(auto-fit,minmax(0,20px));justify-content:flex-start;gap:6px}.color-swatch[data-v-1e606590]{width:18px!important;height:18px!important;border-radius:50%;border:1px solid color-mix(in oklab,#000,transparent 80%);padding:0!important;display:inline-flex;align-items:center;justify-content:center;cursor:pointer}.color-swatch.active[data-v-1e606590]{box-shadow:0 0 0 2px color-mix(in oklab,var(--brand, #2563eb),transparent 60%)}.color-swatch[data-v-1e606590]:focus-visible{outline:2px solid color-mix(in oklab,var(--brand, #2563eb),transparent 40%);outline-offset:1px}.ghost[data-v-539a10f9]{border:1px solid var(--color-border, #d1d5db);background:#ffffffe6;padding:2px 6px;border-radius:6px;font-size:12px;cursor:pointer}.ghost.primary[data-v-539a10f9]{border-color:var(--color-primary, #2563EB);color:var(--color-primary, #2563EB)}.advanced-overlay[data-v-539a10f9]{position:fixed;top:0;right:0;bottom:0;left:0;background:#0006;display:flex;align-items:flex-start;justify-content:center;padding:48px 16px;z-index:50}.advanced-panel[data-v-539a10f9]{background:var(--color-main-background, #fff);color:var(--color-main-text, #0f172a);width:min(960px,100%);max-height:calc(100vh - 96px);border-radius:12px;box-shadow:0 20px 60px #00000040;overflow:hidden;display:flex;flex-direction:column;border:1px solid var(--color-border, #e5e7eb)}.advanced-panel>.sb-pane[data-v-539a10f9]{flex:1 1 auto;overflow:auto;padding:16px}.overlay-header[data-v-539a10f9]{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--color-border, #e5e7eb);background:var(--color-background-hover, #f8fafc)}.overlay-title[data-v-539a10f9]{font-weight:600;font-size:16px}.overlay-subtitle[data-v-539a10f9]{font-size:12px;color:var(--muted, #6b7280);margin-top:2px}.overlay-actions[data-v-539a10f9]{display:flex;justify-content:space-between;align-items:center;gap:8px;padding:12px 16px;border-top:1px solid var(--color-border, #e5e7eb);background:var(--color-background-hover, #f8fafc)}.overlay-actions__left[data-v-539a10f9],.overlay-actions__right[data-v-539a10f9]{display:flex;gap:8px;flex-wrap:wrap}@media (max-width: 640px){.advanced-overlay[data-v-539a10f9]{padding:16px;align-items:flex-start}}.layout-wrapper[data-v-98fee2cd]{position:relative}.layout-wrapper.editable-mode[data-v-98fee2cd]{padding-bottom:120px;overflow:visible}:root{--widget-scale:1;--widget-space:1;--widget-density:1;--widget-text-scale:1}.balance-card[data-v-e115cf77]{background:var(--card,#fff);border:1px solid var(--color-border,#e5e7eb);border-radius:calc(12px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg,#0f172a);display:flex;flex-direction:column;gap:var(--widget-gap, 10px);font-size:calc(14px * var(--widget-scale, 1))}.header[data-v-e115cf77]{display:flex;align-items:center;justify-content:space-between;gap:var(--widget-gap, 10px)}.header.compact[data-v-e115cf77]{justify-content:center}.title-row[data-v-e115cf77]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1))}.title[data-v-e115cf77]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.pill[data-v-e115cf77]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(10px * var(--widget-scale, 1));border-radius:999px;background:color-mix(in srgb,var(--brand, #2563eb) 15%,white);color:var(--brand, #2563eb);text-transform:uppercase;letter-spacing:.06em}.index[data-v-e115cf77]{text-align:right}.index.centered[data-v-e115cf77]{text-align:center;width:100%}.index-badge[data-v-e115cf77]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));padding:calc(6px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(12px * var(--widget-space, 1));background:color-mix(in oklab,var(--index-color, #2563eb) 14%,transparent);box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--index-color, #2563eb) 35%,transparent)}.index-badge__ring[data-v-e115cf77]{width:calc(44px * var(--widget-scale, 1));height:calc(44px * var(--widget-scale, 1));border-radius:999px;background:conic-gradient(var(--index-color, #2563eb) var(--index-fill, 0%),color-mix(in srgb,var(--color-border, #e5e7eb),transparent 40%) 0);display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.index-badge__ring[data-v-e115cf77]:after{content:"";position:absolute;inset:calc(5px * var(--widget-space, 1));border-radius:999px;background:var(--color-main-background, #fff);box-shadow:inset 0 0 0 1px color-mix(in srgb,var(--index-color, #2563eb) 22%,transparent)}.index-badge__value[data-v-e115cf77]{position:relative;z-index:1;font-weight:700;font-size:calc(14px * var(--widget-scale, 1));font-variant-numeric:tabular-nums;color:var(--fg,#0f172a)}.index-badge__meta[data-v-e115cf77]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1));text-align:left}.index-badge__label[data-v-e115cf77]{font-size:calc(9px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.08em;color:var(--muted)}.index-badge__range[data-v-e115cf77]{font-size:calc(11px * var(--widget-scale, 1));color:var(--fg);white-space:nowrap}.trend[data-v-e115cf77]{display:flex;align-items:center;gap:var(--widget-gap, 10px)}.trend-line[data-v-e115cf77]{flex:1;display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(92px * var(--widget-scale, 1)),1fr));gap:calc(6px * var(--widget-space, 1));justify-content:flex-start}.trend-block[data-v-e115cf77]{min-width:0;background:color-mix(in oklab,var(--color-primary,#2563eb),#e5e7eb 50%);border-radius:calc(8px * var(--widget-space, 1));padding:calc(4px * var(--widget-space, 1)) calc(5px * var(--widget-space, 1));display:flex;align-items:center;justify-content:center;position:relative;color:#fff;font-size:calc(11px * var(--widget-scale, 1));border:none;cursor:default}.trend-block.no-range[data-v-e115cf77]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1)) calc(5px * var(--widget-space, 1))}.trend-block.no-range.no-offset[data-v-e115cf77]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1))}.trend-block.no-offset[data-v-e115cf77]{grid-column:span 1;padding:calc(4px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.trend-block.current[data-v-e115cf77]{background:var(--color-primary,#2563eb);box-shadow:0 0 0 2px color-mix(in oklab,var(--color-primary,#2563eb),#ffffff 60%)}.trend-line-row[data-v-e115cf77]{display:flex;align-items:center;justify-content:space-between;gap:calc(4px * var(--widget-space, 1));width:100%}.trend-value[data-v-e115cf77]{font-weight:700;font-size:calc(13px * var(--widget-scale, 1));text-align:left;white-space:nowrap}.trend-range[data-v-e115cf77]{flex:1;text-align:center;font-size:calc(10px * var(--widget-scale, 1));color:#e5e7eb;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.trend-offset[data-v-e115cf77]{min-width:calc(52px * var(--widget-scale, 1));text-align:right;font-size:calc(10px * var(--widget-scale, 1));color:#cbd5f5;white-space:nowrap}.trend-delta[data-v-e115cf77]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted);display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.trend-left[data-v-e115cf77]{font-weight:700;color:var(--fg,#0f172a)}.trend-center[data-v-e115cf77]{flex:1;text-align:center;font-size:calc(11px * var(--widget-scale, 1))}.trend-right[data-v-e115cf77]{min-width:calc(56px * var(--widget-scale, 1));text-align:right;font-size:calc(11px * var(--widget-scale, 1))}.section-title[data-v-e115cf77]{font-weight:600;font-size:calc(13px * var(--widget-scale, 1));margin-bottom:calc(4px * var(--widget-space, 1))}.messages ul[data-v-e115cf77]{margin:0;padding-left:calc(18px * var(--widget-space, 1));color:var(--muted);font-size:calc(13px * var(--widget-scale, 1))}.messages li[data-v-e115cf77]{margin-bottom:calc(2px * var(--widget-space, 1))}.messages li[data-v-e115cf77]:last-child{margin-bottom:0}.config[data-v-e115cf77]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted);display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(140px * var(--widget-scale, 1)),1fr));gap:calc(6px * var(--widget-space, 1))}.empty[data-v-e115cf77]{text-align:center;color:var(--muted);font-size:calc(13px * var(--widget-scale, 1))}.mix-card[data-v-9b471bde]{display:flex;flex-direction:column;gap:var(--widget-gap, 10px);--mix-label-width: clamp(34px, calc(52px * var(--widget-scale, 1)), 64px);--mix-gap: clamp(2px, calc(6px * var(--widget-space, 1)), 8px);--mix-row-gap: clamp(4px, calc(8px * var(--widget-space, 1)), 12px);--mix-cell-padding: clamp(2px, calc(6px * var(--widget-space, 1)), 8px);--mix-cell-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 14px);--mix-label-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 13px);--mix-column-font: clamp(9px, calc(12px * var(--widget-scale, 1)), 12px);--mix-cell-min: clamp(18px, calc(30px * var(--widget-scale, 1)), 36px);--mix-radius: clamp(4px, calc(8px * var(--widget-space, 1)), 10px)}.mix-card--dense[data-v-9b471bde]{gap:calc(6px * var(--widget-space, 1));--mix-label-width: clamp(28px, calc(40px * var(--widget-scale, 1)), 52px);--mix-gap: clamp(1px, calc(3px * var(--widget-space, 1)), 6px);--mix-row-gap: clamp(3px, calc(5px * var(--widget-space, 1)), 8px);--mix-cell-padding: clamp(1px, calc(3px * var(--widget-space, 1)), 5px);--mix-cell-font: clamp(8px, calc(10px * var(--widget-scale, 1)), 12px);--mix-label-font: clamp(8px, calc(10px * var(--widget-scale, 1)), 11px);--mix-column-font: clamp(8px, calc(9px * var(--widget-scale, 1)), 10px);--mix-cell-min: clamp(16px, calc(22px * var(--widget-scale, 1)), 30px);--mix-radius: clamp(3px, calc(5px * var(--widget-space, 1)), 8px)}.mix-card--no-header[data-v-9b471bde]{gap:calc(6px * var(--widget-space, 1))}.mix-header[data-v-9b471bde]{display:flex;justify-content:space-between;align-items:center}.mix-title[data-v-9b471bde]{font-weight:700;color:var(--fg);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.mix-subtitle[data-v-9b471bde]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.mix-badge[data-v-9b471bde]{padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));font-weight:600;background:color-mix(in oklab,var(--brand),transparent 80%);border:1px solid color-mix(in oklab,var(--brand),transparent 60%);color:var(--brand)}.mix-list[data-v-9b471bde]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:var(--mix-row-gap)}.mix-row[data-v-9b471bde]{display:grid;grid-template-columns:var(--mix-label-width) 1fr;gap:var(--mix-gap);align-items:center}.mix-label[data-v-9b471bde]{font-weight:600;color:var(--fg);font-size:var(--mix-label-font);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mix-columns[data-v-9b471bde]{display:grid;gap:var(--mix-gap);align-items:center;justify-content:start;font-size:var(--mix-column-font);color:var(--muted)}.mix-column-label[data-v-9b471bde]{text-align:center;white-space:nowrap;font-variant-numeric:tabular-nums;line-height:1.1;overflow:hidden;text-overflow:ellipsis}.mix-column-label--label[data-v-9b471bde]{text-align:left}.mix-column-label--current[data-v-9b471bde]{font-weight:700;color:var(--fg)}.mix-cells[data-v-9b471bde]{display:grid;gap:var(--mix-gap);align-items:stretch;justify-content:start;width:100%;min-width:0}.mix-cell[data-v-9b471bde]{position:relative;border-radius:var(--mix-radius);padding:var(--mix-cell-padding);background:linear-gradient(135deg,color-mix(in oklab,var(--mix-bg),white 12%),var(--mix-bg));color:var(--mix-fg, var(--fg));text-align:center;font-size:var(--mix-cell-font);border:1px solid color-mix(in oklab,var(--mix-bg),var(--fg) 12%);box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--mix-bg),transparent 60%);min-height:var(--mix-cell-min);display:flex;align-items:center;justify-content:center}.mix-cell--current[data-v-9b471bde]{outline:1px solid color-mix(in oklab,var(--brand),transparent 35%);outline-offset:1px}.mix-cell--mode-hybrid[data-v-9b471bde]{box-shadow:inset 0 -3px color-mix(in oklab,var(--mix-accent),transparent 30%)}.mix-cell--mode-share[data-v-9b471bde]{box-shadow:inset 0 0 0 1px color-mix(in oklab,var(--mix-bg),transparent 40%)}.mix-card--square .mix-cell[data-v-9b471bde]{aspect-ratio:1 / 1;min-height:0}.mix-cell__value[data-v-9b471bde]{font-weight:700;font-variant-numeric:tabular-nums;white-space:nowrap}.pill[data-v-9b471bde]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;font-size:11px;border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.hint[data-v-9b471bde]{font-size:12px;color:var(--muted)}.chart-widget[data-v-05ee383b]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-05ee383b]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-05ee383b]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-05ee383b]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-05ee383b]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-05ee383b]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-05ee383b]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.chart-widget__legend .dot[data-v-05ee383b]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.heatmap-lookback[data-v-d04eb3d7]{display:flex;flex-direction:column;gap:calc(10px * var(--widget-space, 1))}.heatmap-lookback__stacked[data-v-d04eb3d7]{display:grid;gap:calc(12px * var(--widget-space, 1))}.heatmap-lookback__panel[data-v-d04eb3d7]{display:grid;gap:calc(6px * var(--widget-space, 1))}.heatmap-lookback__label[data-v-d04eb3d7]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.heatmap-lookback__label .dot[data-v-d04eb3d7],.heatmap-lookback__legend-weeks .dot[data-v-d04eb3d7]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%;flex:0 0 auto}.heatmap-lookback__legend[data-v-d04eb3d7]{display:grid;gap:calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.heatmap-lookback__legend-scale[data-v-d04eb3d7]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.heatmap-lookback__legend-bar[data-v-d04eb3d7]{flex:1;height:calc(8px * var(--widget-space, 1));border-radius:999px;background:linear-gradient(90deg,var(--heatmap-low),var(--heatmap-high))}.heatmap-lookback__legend-meta[data-v-d04eb3d7]{font-size:calc(10px * var(--widget-scale, 1));color:var(--muted)}.heatmap-lookback__legend-weeks[data-v-d04eb3d7]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1))}.heatmap-lookback__legend-weeks li[data-v-d04eb3d7]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.chart-widget[data-v-639549e5]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-639549e5]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-639549e5]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-639549e5]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-639549e5]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__hint[data-v-639549e5],.chart-widget__meta[data-v-639549e5]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.chart-widget--hod[data-v-639549e5]{--heatmap-low: color-mix(in srgb, var(--brand, #2563eb) 10%, var(--card, #ffffff));--heatmap-high: color-mix(in srgb, var(--brand, #2563eb) 80%, var(--card, #ffffff))}.chart-widget[data-v-66cec46a]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-66cec46a]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-66cec46a]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-66cec46a]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-66cec46a]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-66cec46a]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-66cec46a]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.chart-widget__legend .dot[data-v-66cec46a]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.chart[data-v-0b0f384d]{cursor:pointer}.chart-widget[data-v-1a53cec2]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-1a53cec2]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-1a53cec2]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-1a53cec2]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-1a53cec2]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-1a53cec2]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-1a53cec2]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1));transition:color .15s ease,background .15s ease;cursor:pointer}.chart-widget__legend li.hovered[data-v-1a53cec2]{color:var(--brand);background:color-mix(in oklab,var(--brand),transparent 90%)}.chart-widget__legend .dot[data-v-1a53cec2]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}.chart-widget__legend .val[data-v-1a53cec2]{margin-left:auto;color:var(--muted)}.chart[data-v-4bcde162]{cursor:pointer}.chart-widget[data-v-20b54b56]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.chart-widget__header[data-v-20b54b56]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.chart-widget__title[data-v-20b54b56]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.chart-widget__subtitle[data-v-20b54b56]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.chart-widget__empty[data-v-20b54b56]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.chart-widget__legend[data-v-20b54b56]{list-style:none;padding:0;margin:0;display:grid;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.chart-widget__legend li[data-v-20b54b56]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));border-radius:999px;padding:calc(2px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1));transition:color .15s ease,background .15s ease;cursor:pointer}.chart-widget__legend li.hovered[data-v-20b54b56]{color:var(--brand);background:color-mix(in oklab,var(--brand),transparent 90%)}.chart-widget__legend .dot[data-v-20b54b56]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%}table[data-v-2efa83d5]{width:100%;border-collapse:collapse;font-size:13px}thead th[data-v-2efa83d5]{text-align:left;padding:6px 8px;font-weight:600;color:var(--muted);border-bottom:1px solid var(--line)}thead th.num[data-v-2efa83d5]{text-align:right}tbody td[data-v-2efa83d5]{padding:6px 8px;border-top:1px solid var(--line);vertical-align:top}.col-w-42[data-v-2efa83d5]{width:42%}.col-w-12[data-v-2efa83d5]{width:12%}.col-w-14[data-v-2efa83d5]{width:14%}.col-w-18[data-v-2efa83d5]{width:18%}.group-row td[data-v-2efa83d5]{padding-top:12px;padding-bottom:8px;background:color-mix(in srgb,var(--muted) 6%,transparent)}.group-header[data-v-2efa83d5]{display:flex;justify-content:space-between;align-items:center;gap:12px;font-size:12px}.group-label[data-v-2efa83d5]{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--fg)}.group-label .dot[data-v-2efa83d5]{width:10px;height:10px;border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 12%,transparent)}.group-meta[data-v-2efa83d5]{display:flex;align-items:center;gap:8px;flex-wrap:wrap;color:var(--muted)}.group-meta .summary[data-v-2efa83d5]{font-size:12px}.group-meta .summary-percent[data-v-2efa83d5]{font-variant-numeric:tabular-nums;color:var(--fg);font-weight:600}.badge[data-v-2efa83d5]{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;border-radius:999px;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-2efa83d5]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-2efa83d5]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-2efa83d5]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-2efa83d5]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-2efa83d5]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.cell[data-v-2efa83d5]{display:flex;flex-direction:column;gap:4px}.row-name[data-v-2efa83d5]{font-weight:600;color:var(--fg)}.progress[data-v-2efa83d5]{position:relative;height:6px;background:color-mix(in srgb,var(--muted) 22%,transparent);border-radius:999px;overflow:hidden}.progress-bar[data-v-2efa83d5]{height:100%;border-radius:999px;background:var(--brand);transition:width .2s ease}.progress-today[data-v-2efa83d5]{position:absolute;top:-2px;height:10px;border-radius:8px;opacity:.9;display:flex;align-items:center;justify-content:center;box-shadow:0 1px 4px #0000001f}.progress-chip[data-v-2efa83d5]{font-size:10px;font-weight:700;color:#fff;padding:0 6px;white-space:nowrap;text-shadow:0 1px 3px rgba(0,0,0,.25)}.num[data-v-2efa83d5]{text-align:right;font-variant-numeric:tabular-nums;color:var(--fg)}.hint[data-v-2efa83d5]{color:var(--muted);font-size:11px}.delta[data-v-2efa83d5]{font-weight:600}.delta.pos[data-v-2efa83d5]{color:var(--pos)}.delta.neg[data-v-2efa83d5]{color:var(--neg)}.empty-row td.empty[data-v-2efa83d5]{font-style:italic;color:var(--muted);text-align:center}.table-widget[data-v-e75cc444]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px)}.table-widget__header[data-v-e75cc444]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.table-widget__title[data-v-e75cc444]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.table-widget__subtitle[data-v-e75cc444]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.table-widget__empty[data-v-e75cc444]{padding:calc(12px * var(--widget-space, 1));border:1px dashed var(--line);border-radius:calc(10px * var(--widget-space, 1));color:var(--muted);text-align:center}.dayoff-card[data-v-443671a9]{display:flex;flex-direction:column;gap:var(--widget-gap, 10px)}.dayoff-card__header[data-v-443671a9]{display:flex;align-items:center;justify-content:space-between;font-weight:600;color:var(--fg);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.dayoff-heatmap[data-v-443671a9]{display:grid;grid-template-columns:repeat(auto-fit,minmax(calc(110px * var(--widget-scale, 1)),1fr));gap:var(--widget-gap, 8px)}.dayoff-tile[data-v-443671a9]{border-radius:calc(10px * var(--widget-space, 1));padding:calc(10px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1));text-align:center;background:var(--tile-bg, color-mix(in oklab, var(--muted), transparent 85%));color:var(--tile-fg, var(--fg));transition:transform .2s ease,background .2s ease}.dayoff-tile--current[data-v-443671a9]{outline:1px solid color-mix(in oklab,var(--brand),transparent 30%);outline-offset:1px}.dayoff-tile--low[data-v-443671a9]{background:var(--tile-bg, color-mix(in oklab, #dc2626, white 70%));color:var(--tile-fg, #7f1d1d)}.dayoff-tile--mid[data-v-443671a9]{background:var(--tile-bg, color-mix(in oklab, #f97316, white 68%));color:var(--tile-fg, #7c2d12)}.dayoff-tile--high[data-v-443671a9]{background:var(--tile-bg, color-mix(in oklab, #16a34a, white 65%));color:var(--tile-fg, #14532d)}.dayoff-tile__label[data-v-443671a9]{font-size:calc(11px * var(--widget-scale, 1));font-weight:600}.dayoff-tile__value[data-v-443671a9]{font-size:calc(14px * var(--widget-scale, 1));font-weight:700;font-variant-numeric:tabular-nums}.dayoff-tile__meta[data-v-443671a9]{font-size:calc(10px * var(--widget-scale, 1));color:color-mix(in oklab,currentColor,transparent 55%);font-variant-numeric:tabular-nums}.pill[data-v-443671a9]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));border-radius:999px;background:color-mix(in srgb,var(--brand) 15%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.hint[data-v-443671a9]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.deck-panel[data-v-4ebb7081]{display:flex;flex-direction:column;gap:calc(16px * var(--widget-space, 1));height:100%;min-height:0;font-size:var(--widget-font, 14px)}.deck-panel__header[data-v-4ebb7081]{display:flex;align-items:center;justify-content:space-between}.deck-panel__title[data-v-4ebb7081]{font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)));font-weight:600}.deck-panel__subtitle[data-v-4ebb7081]{font-size:calc(14px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-panel__actions[data-v-4ebb7081]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1))}.deck-panel__count[data-v-4ebb7081]{font-size:calc(14px * var(--widget-scale, 1));background:var(--color-background-darker);border:1px solid var(--color-border-dark);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(12px * var(--widget-space, 1))}.deck-panel__refresh[data-v-4ebb7081]{border:1px solid var(--color-primary);background:transparent;color:var(--color-primary);border-radius:999px;padding:calc(4px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));font-size:calc(14px * var(--widget-scale, 1));cursor:pointer}.deck-panel__refresh[data-v-4ebb7081]:disabled{opacity:.6;cursor:default}.deck-panel__link[data-v-4ebb7081]{font-size:calc(14px * var(--widget-scale, 1));text-decoration:none;color:var(--color-text-maxcontrast)}.deck-panel__loading[data-v-4ebb7081]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));color:var(--color-text-maxcontrast)}.deck-panel__filters[data-v-4ebb7081]{display:flex;gap:calc(8px * var(--widget-space, 1));flex-wrap:wrap}.deck-panel--compact[data-v-4ebb7081]{gap:calc(10px * var(--widget-space, 1))}.deck-panel--compact .deck-panel__filters[data-v-4ebb7081]{gap:calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card-list[data-v-4ebb7081]{gap:calc(10px * var(--widget-space, 1))}.deck-panel--compact .deck-card[data-v-4ebb7081]{padding:calc(6px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));gap:0;border-radius:calc(8px * var(--widget-space, 1))}.deck-panel--compact .deck-card__row[data-v-4ebb7081]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));white-space:nowrap;overflow-x:auto;padding-bottom:2px}.deck-panel--compact .deck-card__row[data-v-4ebb7081]::-webkit-scrollbar{height:6px}.deck-panel--compact .deck-card__row[data-v-4ebb7081]::-webkit-scrollbar-thumb{background:color-mix(in oklab,var(--color-border),transparent 30%);border-radius:999px}.deck-panel--compact .deck-card__status-row[data-v-4ebb7081]{font-size:calc(12px * var(--widget-scale, 1));gap:calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card__status[data-v-4ebb7081]{font-size:calc(11px * var(--widget-scale, 1));letter-spacing:.04em}.deck-panel--compact .deck-card__time[data-v-4ebb7081]{font-size:calc(11px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-panel--compact .deck-card__title[data-v-4ebb7081]{font-size:calc(13px * var(--widget-scale, 1));font-weight:600}.deck-panel--compact .deck-card__meta[data-v-4ebb7081]{font-size:calc(11px * var(--widget-scale, 1));gap:calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card__board[data-v-4ebb7081]{padding:calc(1px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1));font-size:calc(10px * var(--widget-scale, 1))}.deck-panel--compact .deck-card__labels[data-v-4ebb7081]{gap:calc(4px * var(--widget-space, 1));flex-wrap:nowrap}.deck-panel--compact .deck-card__label[data-v-4ebb7081]{font-size:calc(10px * var(--widget-scale, 1));padding:calc(1px * var(--widget-space, 1)) calc(6px * var(--widget-space, 1))}.deck-panel--compact .deck-card__assignees[data-v-4ebb7081]{font-size:calc(11px * var(--widget-scale, 1));gap:calc(4px * var(--widget-space, 1));flex-wrap:nowrap}.deck-panel__body[data-v-4ebb7081]{flex:1;min-height:0;overflow:auto;padding-right:calc(4px * var(--widget-space, 1))}.deck-filter-btn[data-v-4ebb7081]{border:1px solid var(--color-border-maxcontrast);background:var(--color-main-background);border-radius:999px;padding:calc(3px * var(--widget-space, 1)) calc(14px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1));cursor:pointer;display:inline-flex;align-items:center;gap:calc(6px * var(--widget-space, 1))}.deck-filter-btn.is-draggable[data-v-4ebb7081]{cursor:grab}.deck-filter-btn.is-draggable[data-v-4ebb7081]:active{cursor:grabbing}.deck-filter-btn.active[data-v-4ebb7081]{border-color:var(--color-primary);color:var(--color-primary)}.deck-filter-count[data-v-4ebb7081]{font-size:calc(11px * var(--widget-scale, 1));opacity:.7}.deck-filter-btn[data-v-4ebb7081]:disabled{opacity:.5;cursor:not-allowed}.deck-panel__error[data-v-4ebb7081]{padding:calc(12px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));background:var(--color-error-hover);color:var(--color-error-text)}.deck-card-list[data-v-4ebb7081]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:calc(16px * var(--widget-space, 1))}.deck-card[data-v-4ebb7081]{border:1px solid var(--color-border);border-radius:calc(12px * var(--widget-space, 1));padding:calc(14px * var(--widget-space, 1));background:var(--color-main-background);display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1))}.deck-card__status-row[data-v-4ebb7081]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));font-size:calc(14px * var(--widget-scale, 1));color:var(--color-text-maxcontrast)}.deck-card__status[data-v-4ebb7081]{font-weight:600;text-transform:uppercase;font-size:calc(12px * var(--widget-scale, 1));letter-spacing:.05em}.deck-card__status.done[data-v-4ebb7081]{color:var(--color-success)}.deck-card__status.archived[data-v-4ebb7081]{color:var(--color-text-maxcontrast)}.deck-card__title[data-v-4ebb7081]{font-size:calc(16px * var(--widget-scale, 1));font-weight:600;color:var(--color-text)}.deck-card__meta[data-v-4ebb7081]{display:flex;align-items:center;gap:calc(8px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1))}.deck-card__board[data-v-4ebb7081]{border:2px solid var(--color-border);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;text-transform:uppercase;font-size:calc(11px * var(--widget-scale, 1))}.deck-card__stack[data-v-4ebb7081]{color:var(--color-text-maxcontrast)}.deck-card__labels[data-v-4ebb7081]{display:flex;gap:calc(6px * var(--widget-space, 1));flex-wrap:wrap}.deck-card__label[data-v-4ebb7081]{color:#fff;font-size:calc(11px * var(--widget-scale, 1));padding:calc(2px * var(--widget-space, 1)) calc(7px * var(--widget-space, 1));border-radius:999px}.deck-card__assignees[data-v-4ebb7081]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1))}.deck-card__assignees-label[data-v-4ebb7081]{color:var(--color-text-maxcontrast)}.deck-card__assignee[data-v-4ebb7081]{font-weight:500}.note-card[data-v-5e293970]{background:var(--card,#fff);border:1px solid var(--color-border,#d1d5db);border-radius:calc(10px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg,#0f172a);display:flex;flex-direction:column;gap:var(--widget-gap, 10px);font-size:var(--widget-font, 14px)}.note-header[data-v-5e293970]{display:flex;align-items:center;justify-content:space-between}.title[data-v-5e293970]{font-weight:600;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.btn[data-v-5e293970]{padding:calc(6px * var(--widget-space, 1)) calc(10px * var(--widget-space, 1));border-radius:calc(6px * var(--widget-space, 1));border:1px solid var(--color-border,#d1d5db);background:var(--card,#fff);cursor:pointer;font-size:calc(12px * var(--widget-scale, 1))}.field[data-v-5e293970]{display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1))}.field-head[data-v-5e293970]{display:flex;align-items:center;justify-content:space-between;gap:calc(6px * var(--widget-space, 1))}.label[data-v-5e293970]{font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.note[data-v-5e293970]{width:100%;min-height:calc(80px * var(--widget-scale, 1));border:1px solid var(--color-border,#d1d5db);border-radius:calc(6px * var(--widget-space, 1));padding:calc(8px * var(--widget-space, 1));resize:vertical;font-size:calc(13px * var(--widget-scale, 1))}.note--compact[data-v-5e293970]{min-height:calc(60px * var(--widget-scale, 1));font-size:calc(12px * var(--widget-scale, 1))}.note-select[data-v-5e293970]{max-width:55%;padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(6px * var(--widget-space, 1));border:1px solid var(--color-border,#d1d5db);background:var(--card,#fff);color:var(--fg,#0f172a);font-size:calc(12px * var(--widget-scale, 1))}.text-card[data-v-01eb6d28]{background:var(--card, #fff);border:1px solid var(--color-border, #d1d5db);border-radius:calc(10px * var(--widget-space, 1));padding:var(--widget-pad, 12px);color:var(--fg, #0f172a);line-height:calc(1.4 * var(--widget-density, 1));font-size:var(--widget-font, 14px)}.text-card h3[data-v-01eb6d28]{margin:0 0 calc(6px * var(--widget-space, 1)) 0;font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.text-card .body[data-v-01eb6d28]{margin:0;white-space:pre-wrap;font-size:calc(.95em * var(--widget-scale, 1))}.text-card .body.empty[data-v-01eb6d28]{color:var(--muted)}.targets-card[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:var(--widget-gap, 8px);font-size:var(--widget-font, 14px)}.targets-header[data-v-9ee23cb0]{display:flex;justify-content:space-between;align-items:center}.targets-header strong[data-v-9ee23cb0]{font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)))}.targets-main[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(4px * var(--widget-space, 1));font-size:calc(13px * var(--widget-scale, 1))}.targets-main .line[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.targets-main .line.forecast[data-v-9ee23cb0]{flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.targets-main .line .value[data-v-9ee23cb0]{display:flex;gap:calc(6px * var(--widget-space, 1));align-items:center}.targets-badges[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.targets-categories[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(10px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px solid var(--line)}.category[data-v-9ee23cb0]{display:flex;flex-direction:column;gap:calc(6px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));padding:calc(4px * var(--widget-space, 1)) 0}.category .cat-top[data-v-9ee23cb0]{display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.category .cat-label[data-v-9ee23cb0]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-weight:600;color:var(--fg)}.category .cat-label .dot[data-v-9ee23cb0]{width:calc(10px * var(--widget-space, 1));height:calc(10px * var(--widget-space, 1));border-radius:50%;background:var(--brand);box-shadow:0 0 0 1px color-mix(in srgb,var(--fg) 10%,transparent)}.category .cat-label .name[data-v-9ee23cb0]{color:var(--fg)}.category .cat-meta[data-v-9ee23cb0]{display:flex;align-items:center;gap:calc(6px * var(--widget-space, 1));font-weight:600;color:var(--muted)}.category .cat-meta .percent[data-v-9ee23cb0]{font-variant-numeric:tabular-nums;color:var(--fg)}.cat-progress .bar[data-v-9ee23cb0]{position:relative;width:100%;height:calc(8px * var(--widget-space, 1));border-radius:999px;background:color-mix(in srgb,var(--muted) 20%,transparent);overflow:hidden}.cat-progress .bar .fill[data-v-9ee23cb0]{height:100%;border-radius:999px;transition:width .2s ease;max-width:100%}.cat-progress .bar .today-overlay[data-v-9ee23cb0]{position:absolute;top:calc(-2px * var(--widget-space, 1));height:calc(12px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));opacity:.85;border:1px solid transparent;pointer-events:none}.today-chip[data-v-9ee23cb0]{position:absolute;top:calc(-22px * var(--widget-space, 1));transform:translate(-50%);padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(10px * var(--widget-scale, 1));font-weight:700;color:#fff;border:1px solid transparent;white-space:nowrap;box-shadow:0 2px 6px #0000001f}.today-label[data-v-9ee23cb0]{font-size:calc(10px * var(--widget-scale, 1));line-height:1.2}.category .cat-metrics[data-v-9ee23cb0]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1));align-items:center;color:var(--fg)}.cat-footer[data-v-9ee23cb0]{display:flex;justify-content:space-between;align-items:center}.hint[data-v-9ee23cb0]{color:var(--muted);font-size:calc(12px * var(--widget-scale, 1))}.badge[data-v-9ee23cb0]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(11px * var(--widget-scale, 1));font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-label[data-v-9ee23cb0]{font-weight:600}.status-on[data-v-9ee23cb0]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-9ee23cb0]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-9ee23cb0]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-9ee23cb0]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-9ee23cb0]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}.delta[data-v-9ee23cb0]{font-weight:600}.delta.pos[data-v-9ee23cb0]{color:var(--pos)}.delta.neg[data-v-9ee23cb0]{color:var(--neg)}.cat-metrics .hint[data-v-9ee23cb0],.cat-footer .hint[data-v-9ee23cb0]{font-size:calc(11px * var(--widget-scale, 1))}.cat-progress[data-v-9ee23cb0]{padding:calc(2px * var(--widget-space, 1)) 0}.cat-meta .badge[data-v-9ee23cb0]{font-size:calc(10px * var(--widget-scale, 1))}.card.time-summary[data-v-2f547f8a]{display:flex;flex-direction:column;gap:var(--widget-gap, 6px);font-size:var(--widget-font, 13px);color:var(--muted);--widget-pad: calc(14px * var(--widget-space, 1));padding:var(--widget-pad, 14px)}.today-highlight[data-v-2f547f8a]{display:flex;align-items:center;justify-content:space-between;padding:calc(10px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));border-radius:calc(10px * var(--widget-space, 1));background:color-mix(in oklab,var(--brand, #2563eb) 14%,transparent);border:1px solid color-mix(in oklab,var(--brand, #2563eb),transparent 70%);color:var(--fg)}.today-label[data-v-2f547f8a]{font-size:calc(12px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.04em;color:color-mix(in oklab,var(--fg),transparent 35%)}.today-value[data-v-2f547f8a]{font-size:calc(18px * var(--widget-scale, 1));font-weight:700;letter-spacing:-.02em}.today-cats[data-v-2f547f8a]{display:flex;flex-wrap:wrap;gap:calc(8px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--fg)}.today-cat[data-v-2f547f8a]{display:inline-flex;align-items:center;gap:calc(6px * var(--widget-space, 1));padding:calc(4px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:calc(8px * var(--widget-space, 1));background:color-mix(in oklab,var(--card, #fff),transparent 6%);border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 30%)}.today-cat .dot[data-v-2f547f8a]{width:calc(9px * var(--widget-space, 1));height:calc(9px * var(--widget-space, 1));border-radius:50%;box-shadow:0 0 0 1px color-mix(in oklab,var(--fg) 10%,transparent)}.today-cat .name[data-v-2f547f8a]{font-weight:600}.today-cat .value[data-v-2f547f8a]{color:var(--muted)}.time-summary-firstline[data-v-2f547f8a]{display:flex;align-items:center;justify-content:space-between;gap:var(--widget-gap, 8px);font-size:var(--widget-title-size, calc(14px * var(--widget-scale, 1)));color:var(--fg);font-weight:600}.mode-pill[data-v-2f547f8a]{display:inline-flex;align-items:center;padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));font-size:calc(11px * var(--widget-scale, 1));font-weight:600;border-radius:999px;background:color-mix(in srgb,var(--brand) 18%,white);color:var(--brand);text-transform:uppercase;letter-spacing:.05em}.time-summary-metrics[data-v-2f547f8a]{display:grid;gap:calc(4px * var(--widget-space, 1));margin:0;padding:0;list-style:none}.time-summary-metrics li[data-v-2f547f8a]{display:flex;flex-wrap:wrap;gap:calc(4px * var(--widget-space, 1));color:var(--muted)}.time-summary-metrics strong[data-v-2f547f8a]{color:var(--fg);font-size:calc(14px * var(--widget-scale, 1))}.time-summary-inline[data-v-2f547f8a]{font-size:calc(13px * var(--widget-scale, 1));color:var(--fg)}.time-summary-row[data-v-2f547f8a]{display:flex;flex-wrap:wrap;gap:calc(4px * var(--widget-space, 1));line-height:1.4;color:var(--muted)}.time-summary-row .label[data-v-2f547f8a]{color:var(--fg);font-weight:600}.time-summary-row.calendars[data-v-2f547f8a]{word-break:break-word}.time-summary-row .sep[data-v-2f547f8a],.time-summary-row .hint[data-v-2f547f8a],.time-summary-row .share[data-v-2f547f8a]{color:var(--muted)}.time-summary-row.top-category[data-v-2f547f8a]{align-items:center;gap:calc(6px * var(--widget-space, 1))}.time-summary-activity[data-v-2f547f8a]{margin-top:calc(6px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px solid var(--line);display:grid;gap:calc(2px * var(--widget-space, 1));font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.time-summary-activity__title[data-v-2f547f8a]{font-weight:600;color:var(--fg)}.time-summary-activity__line[data-v-2f547f8a]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.time-summary-activity__delta[data-v-2f547f8a]{color:var(--muted)}.time-summary-delta[data-v-2f547f8a]{margin-top:calc(6px * var(--widget-space, 1));padding-top:calc(6px * var(--widget-space, 1));border-top:1px dashed color-mix(in oklab,var(--muted),transparent 70%);font-size:calc(12px * var(--widget-scale, 1));color:var(--muted)}.time-summary-history[data-v-2f547f8a]{margin-top:calc(8px * var(--widget-space, 1));padding-top:calc(8px * var(--widget-space, 1));border-top:1px solid var(--line);display:grid;gap:calc(8px * var(--widget-space, 1))}.time-summary-history__header[data-v-2f547f8a]{display:flex;align-items:center;justify-content:space-between;gap:calc(8px * var(--widget-space, 1))}.time-summary-history__title[data-v-2f547f8a]{font-weight:600;color:var(--fg)}.time-summary-history__mode[data-v-2f547f8a]{font-size:calc(11px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.08em;color:var(--muted)}.time-summary-history__list[data-v-2f547f8a]{display:grid;gap:calc(10px * var(--widget-space, 1))}.history-entry[data-v-2f547f8a]{border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 20%);border-radius:calc(12px * var(--widget-space, 1));padding:calc(10px * var(--widget-space, 1));background:color-mix(in oklab,var(--card, #fff),transparent 6%)}.history-entry__header[data-v-2f547f8a]{display:flex;flex-wrap:wrap;align-items:center;gap:calc(6px * var(--widget-space, 1)) calc(10px * var(--widget-space, 1));margin-bottom:calc(8px * var(--widget-space, 1))}.history-entry__title[data-v-2f547f8a]{font-weight:600;color:var(--fg)}.history-entry__range[data-v-2f547f8a]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted)}.history-entry__metrics[data-v-2f547f8a]{display:grid;gap:calc(6px * var(--widget-space, 1));grid-template-columns:repeat(auto-fit,minmax(160px,1fr))}.history-entry__metric[data-v-2f547f8a]{display:flex;flex-direction:column;gap:calc(2px * var(--widget-space, 1))}.history-entry__metric-label[data-v-2f547f8a]{font-size:calc(11px * var(--widget-scale, 1));color:var(--muted);text-transform:uppercase;letter-spacing:.05em}.history-entry__metric-value[data-v-2f547f8a]{font-size:calc(12px * var(--widget-scale, 1));color:var(--fg)}.time-summary-history__pills[data-v-2f547f8a]{display:grid;gap:calc(10px * var(--widget-space, 1))}.history-pill[data-v-2f547f8a]{border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 20%);border-radius:calc(999px * var(--widget-space, 1));padding:calc(8px * var(--widget-space, 1)) calc(12px * var(--widget-space, 1));background:color-mix(in oklab,var(--card, #fff),transparent 6%);display:grid;gap:calc(6px * var(--widget-space, 1))}.history-pill__title[data-v-2f547f8a]{font-weight:600;color:var(--fg);font-size:calc(12px * var(--widget-scale, 1))}.history-pill__metrics[data-v-2f547f8a]{display:flex;flex-wrap:wrap;gap:calc(6px * var(--widget-space, 1))}.history-pill__metric[data-v-2f547f8a]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;background:color-mix(in oklab,var(--card, #fff),transparent 12%);border:1px solid color-mix(in oklab,var(--line, #e5e7eb),transparent 35%)}.history-pill__metric-label[data-v-2f547f8a]{font-size:calc(10px * var(--widget-scale, 1));text-transform:uppercase;letter-spacing:.06em;color:var(--muted)}.history-pill__metric-value[data-v-2f547f8a]{font-size:calc(11px * var(--widget-scale, 1));color:var(--fg);font-weight:600}.summary-badge[data-v-2f547f8a]{display:inline-flex;align-items:center;gap:calc(4px * var(--widget-space, 1));padding:calc(2px * var(--widget-space, 1)) calc(8px * var(--widget-space, 1));border-radius:999px;font-size:calc(11px * var(--widget-scale, 1));font-weight:600;text-transform:uppercase;letter-spacing:.05em}.status-on[data-v-2f547f8a]{background:color-mix(in srgb,var(--brand) 20%,white);color:var(--brand)}.status-risk[data-v-2f547f8a]{background:color-mix(in srgb,#f97316 20%,white);color:#f97316}.status-behind[data-v-2f547f8a]{background:color-mix(in srgb,#ef4444 20%,white);color:#ef4444}.status-done[data-v-2f547f8a]{background:color-mix(in srgb,var(--pos) 25%,white);color:var(--pos)}.status-none[data-v-2f547f8a]{background:color-mix(in srgb,var(--muted) 12%,white);color:var(--muted)}
/*$vite$:1*/`,document.head.appendChild(Ws);/**
* @vue/shared v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function nn(e){const t=Object.create(null);for(const a of e.split(","))t[a]=1;return a=>a in t}const Ye={},qa=[],ra=()=>{},zs=()=>!1,sr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),sn=e=>e.startsWith("onUpdate:"),pt=Object.assign,ln=(e,t)=>{const a=e.indexOf(t);a>-1&&e.splice(a,1)},dd=Object.prototype.hasOwnProperty,Ke=(e,t)=>dd.call(e,t),De=Array.isArray,Ga=e=>bo(e)==="[object Map]",lr=e=>bo(e)==="[object Set]",Rs=e=>bo(e)==="[object Date]",Ie=e=>typeof e=="function",nt=e=>typeof e=="string",Jt=e=>typeof e=="symbol",Ze=e=>e!==null&&typeof e=="object",js=e=>(Ze(e)||Ie(e))&&Ie(e.then)&&Ie(e.catch),Us=Object.prototype.toString,bo=e=>Us.call(e),ud=e=>bo(e).slice(8,-1),Vs=e=>bo(e)==="[object Object]",cn=e=>nt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,yo=nn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ir=e=>{const t=Object.create(null);return a=>t[a]||(t[a]=e(a))},fd=/-(\w)/g,Vt=ir(e=>e.replace(fd,(t,a)=>a?a.toUpperCase():"")),gd=/\B([A-Z])/g,xa=ir(e=>e.replace(gd,"-$1").toLowerCase()),cr=ir(e=>e.charAt(0).toUpperCase()+e.slice(1)),dn=ir(e=>e?`on${cr(e)}`:""),Ca=(e,t)=>!Object.is(e,t),dr=(e,...t)=>{for(let a=0;a<e.length;a++)e[a](...t)},Ks=(e,t,a,o=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:o,value:a})},ur=e=>{const t=parseFloat(e);return isNaN(t)?e:t},pd=e=>{const t=nt(e)?Number(e):NaN;return isNaN(t)?e:t};let qs;const fr=()=>qs||(qs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ee(e){if(De(e)){const t={};for(let a=0;a<e.length;a++){const o=e[a],r=nt(o)?bd(o):Ee(o);if(r)for(const n in r)t[n]=r[n]}return t}else if(nt(e)||Ze(e))return e}const hd=/;(?![^(]*\))/g,md=/:([^]+)/,vd=/\/\*[^]*?\*\//g;function bd(e){const t={};return e.replace(vd,"").split(hd).forEach(a=>{if(a){const o=a.split(md);o.length>1&&(t[o[0].trim()]=o[1].trim())}}),t}function Be(e){let t="";if(nt(e))t=e;else if(De(e))for(let a=0;a<e.length;a++){const o=Be(e[a]);o&&(t+=o+" ")}else if(Ze(e))for(const a in e)e[a]&&(t+=a+" ");return t.trim()}const yd=nn("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Gs(e){return!!e||e===""}function wd(e,t){if(e.length!==t.length)return!1;let a=!0;for(let o=0;a&&o<e.length;o++)a=gr(e[o],t[o]);return a}function gr(e,t){if(e===t)return!0;let a=Rs(e),o=Rs(t);if(a||o)return a&&o?e.getTime()===t.getTime():!1;if(a=Jt(e),o=Jt(t),a||o)return e===t;if(a=De(e),o=De(t),a||o)return a&&o?wd(e,t):!1;if(a=Ze(e),o=Ze(t),a||o){if(!a||!o)return!1;const r=Object.keys(e).length,n=Object.keys(t).length;if(r!==n)return!1;for(const l in e){const i=e.hasOwnProperty(l),s=t.hasOwnProperty(l);if(i&&!s||!i&&s||!gr(e[l],t[l]))return!1}}return String(e)===String(t)}function kd(e,t){return e.findIndex(a=>gr(a,t))}const Js=e=>!!(e&&e.__v_isRef===!0),W=e=>nt(e)?e:e==null?"":De(e)||Ze(e)&&(e.toString===Us||!Ie(e.toString))?Js(e)?W(e.value):JSON.stringify(e,Ys,2):String(e),Ys=(e,t)=>Js(t)?Ys(e,t.value):Ga(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((a,[o,r],n)=>(a[un(o,n)+" =>"]=r,a),{})}:lr(t)?{[`Set(${t.size})`]:[...t.values()].map(a=>un(a))}:Jt(t)?un(t):Ze(t)&&!De(t)&&!Vs(t)?String(t):t,un=(e,t="")=>{var a;return Jt(e)?`Symbol(${(a=e.description)!=null?a:t})`:e};/**
* @vue/reactivity v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Dt;class _d{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Dt,!t&&Dt&&(this.index=(Dt.scopes||(Dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].pause();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,a;if(this.scopes)for(t=0,a=this.scopes.length;t<a;t++)this.scopes[t].resume();for(t=0,a=this.effects.length;t<a;t++)this.effects[t].resume()}}run(t){if(this._active){const a=Dt;try{return Dt=this,t()}finally{Dt=a}}}on(){++this._on===1&&(this.prevScope=Dt,Dt=this)}off(){this._on>0&&--this._on===0&&(Dt=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let a,o;for(a=0,o=this.effects.length;a<o;a++)this.effects[a].stop();for(this.effects.length=0,a=0,o=this.cleanups.length;a<o;a++)this.cleanups[a]();if(this.cleanups.length=0,this.scopes){for(a=0,o=this.scopes.length;a<o;a++)this.scopes[a].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function xd(){return Dt}let tt;const fn=new WeakSet;class Zs{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Dt&&Dt.active&&Dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,fn.has(this)&&(fn.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Qs(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,rl(this),el(this);const t=tt,a=Yt;tt=this,Yt=!0;try{return this.fn()}finally{tl(this),tt=t,Yt=a,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)mn(t);this.deps=this.depsTail=void 0,rl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?fn.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){hn(this)&&this.run()}get dirty(){return hn(this)}}let Xs=0,wo,ko;function Qs(e,t=!1){if(e.flags|=8,t){e.next=ko,ko=e;return}e.next=wo,wo=e}function gn(){Xs++}function pn(){if(--Xs>0)return;if(ko){let t=ko;for(ko=void 0;t;){const a=t.next;t.next=void 0,t.flags&=-9,t=a}}let e;for(;wo;){let t=wo;for(wo=void 0;t;){const a=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(o){e||(e=o)}t=a}}if(e)throw e}function el(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function tl(e){let t,a=e.depsTail,o=a;for(;o;){const r=o.prevDep;o.version===-1?(o===a&&(a=r),mn(o),Cd(o)):t=o,o.dep.activeLink=o.prevActiveLink,o.prevActiveLink=void 0,o=r}e.deps=t,e.depsTail=a}function hn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(al(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function al(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===_o)||(e.globalVersion=_o,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!hn(e))))return;e.flags|=2;const t=e.dep,a=tt,o=Yt;tt=e,Yt=!0;try{el(e);const r=e.fn(e._value);(t.version===0||Ca(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{tt=a,Yt=o,tl(e),e.flags&=-3}}function mn(e,t=!1){const{dep:a,prevSub:o,nextSub:r}=e;if(o&&(o.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=o,e.nextSub=void 0),a.subs===e&&(a.subs=o,!o&&a.computed)){a.computed.flags&=-5;for(let n=a.computed.deps;n;n=n.nextDep)mn(n,!0)}!t&&!--a.sc&&a.map&&a.map.delete(a.key)}function Cd(e){const{prevDep:t,nextDep:a}=e;t&&(t.nextDep=a,e.prevDep=void 0),a&&(a.prevDep=t,e.nextDep=void 0)}let Yt=!0;const ol=[];function na(){ol.push(Yt),Yt=!1}function sa(){const e=ol.pop();Yt=e===void 0?!0:e}function rl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const a=tt;tt=void 0;try{t()}finally{tt=a}}}let _o=0;class Sd{constructor(t,a){this.sub=t,this.dep=a,this.version=a.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vn{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!tt||!Yt||tt===this.computed)return;let a=this.activeLink;if(a===void 0||a.sub!==tt)a=this.activeLink=new Sd(tt,this),tt.deps?(a.prevDep=tt.depsTail,tt.depsTail.nextDep=a,tt.depsTail=a):tt.deps=tt.depsTail=a,nl(a);else if(a.version===-1&&(a.version=this.version,a.nextDep)){const o=a.nextDep;o.prevDep=a.prevDep,a.prevDep&&(a.prevDep.nextDep=o),a.prevDep=tt.depsTail,a.nextDep=void 0,tt.depsTail.nextDep=a,tt.depsTail=a,tt.deps===a&&(tt.deps=o)}return a}trigger(t){this.version++,_o++,this.notify(t)}notify(t){gn();try{for(let a=this.subs;a;a=a.prevSub)a.sub.notify()&&a.sub.dep.notify()}finally{pn()}}}function nl(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let o=t.deps;o;o=o.nextDep)nl(o)}const a=e.dep.subs;a!==e&&(e.prevSub=a,a&&(a.nextSub=e)),e.dep.subs=e}}const pr=new WeakMap,Pa=Symbol(""),bn=Symbol(""),xo=Symbol("");function yt(e,t,a){if(Yt&&tt){let o=pr.get(e);o||pr.set(e,o=new Map);let r=o.get(a);r||(o.set(a,r=new vn),r.map=o,r.key=a),r.track()}}function fa(e,t,a,o,r,n){const l=pr.get(e);if(!l){_o++;return}const i=s=>{s&&s.trigger()};if(gn(),t==="clear")l.forEach(i);else{const s=De(e),c=s&&cn(a);if(s&&a==="length"){const u=Number(o);l.forEach((h,m)=>{(m==="length"||m===xo||!Jt(m)&&m>=u)&&i(h)})}else switch((a!==void 0||l.has(void 0))&&i(l.get(a)),c&&i(l.get(xo)),t){case"add":s?c&&i(l.get("length")):(i(l.get(Pa)),Ga(e)&&i(l.get(bn)));break;case"delete":s||(i(l.get(Pa)),Ga(e)&&i(l.get(bn)));break;case"set":Ga(e)&&i(l.get(Pa));break}}pn()}function $d(e,t){const a=pr.get(e);return a&&a.get(t)}function Ja(e){const t=ze(e);return t===e?t:(yt(t,"iterate",xo),Kt(e)?t:t.map(mt))}function hr(e){return yt(e=ze(e),"iterate",xo),e}const Td={__proto__:null,[Symbol.iterator](){return yn(this,Symbol.iterator,mt)},concat(...e){return Ja(this).concat(...e.map(t=>De(t)?Ja(t):t))},entries(){return yn(this,"entries",e=>(e[1]=mt(e[1]),e))},every(e,t){return ga(this,"every",e,t,void 0,arguments)},filter(e,t){return ga(this,"filter",e,t,a=>a.map(mt),arguments)},find(e,t){return ga(this,"find",e,t,mt,arguments)},findIndex(e,t){return ga(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ga(this,"findLast",e,t,mt,arguments)},findLastIndex(e,t){return ga(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ga(this,"forEach",e,t,void 0,arguments)},includes(...e){return wn(this,"includes",e)},indexOf(...e){return wn(this,"indexOf",e)},join(e){return Ja(this).join(e)},lastIndexOf(...e){return wn(this,"lastIndexOf",e)},map(e,t){return ga(this,"map",e,t,void 0,arguments)},pop(){return Co(this,"pop")},push(...e){return Co(this,"push",e)},reduce(e,...t){return sl(this,"reduce",e,t)},reduceRight(e,...t){return sl(this,"reduceRight",e,t)},shift(){return Co(this,"shift")},some(e,t){return ga(this,"some",e,t,void 0,arguments)},splice(...e){return Co(this,"splice",e)},toReversed(){return Ja(this).toReversed()},toSorted(e){return Ja(this).toSorted(e)},toSpliced(...e){return Ja(this).toSpliced(...e)},unshift(...e){return Co(this,"unshift",e)},values(){return yn(this,"values",mt)}};function yn(e,t,a){const o=hr(e),r=o[t]();return o!==e&&!Kt(e)&&(r._next=r.next,r.next=()=>{const n=r._next();return n.value&&(n.value=a(n.value)),n}),r}const Md=Array.prototype;function ga(e,t,a,o,r,n){const l=hr(e),i=l!==e&&!Kt(e),s=l[t];if(s!==Md[t]){const h=s.apply(e,n);return i?mt(h):h}let c=a;l!==e&&(i?c=function(h,m){return a.call(this,mt(h),m,e)}:a.length>2&&(c=function(h,m){return a.call(this,h,m,e)}));const u=s.call(l,c,o);return i&&r?r(u):u}function sl(e,t,a,o){const r=hr(e);let n=a;return r!==e&&(Kt(e)?a.length>3&&(n=function(l,i,s){return a.call(this,l,i,s,e)}):n=function(l,i,s){return a.call(this,l,mt(i),s,e)}),r[t](n,...o)}function wn(e,t,a){const o=ze(e);yt(o,"iterate",xo);const r=o[t](...a);return(r===-1||r===!1)&&_n(a[0])?(a[0]=ze(a[0]),o[t](...a)):r}function Co(e,t,a=[]){na(),gn();const o=ze(e)[t].apply(e,a);return pn(),sa(),o}const Ad=nn("__proto__,__v_isRef,__isVue"),ll=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Jt));function Dd(e){Jt(e)||(e=String(e));const t=ze(this);return yt(t,"has",e),t.hasOwnProperty(e)}class il{constructor(t=!1,a=!1){this._isReadonly=t,this._isShallow=a}get(t,a,o){if(a==="__v_skip")return t.__v_skip;const r=this._isReadonly,n=this._isShallow;if(a==="__v_isReactive")return!r;if(a==="__v_isReadonly")return r;if(a==="__v_isShallow")return n;if(a==="__v_raw")return o===(r?n?pl:gl:n?fl:ul).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(o)?t:void 0;const l=De(t);if(!r){let s;if(l&&(s=Td[a]))return s;if(a==="hasOwnProperty")return Dd}const i=Reflect.get(t,a,dt(t)?t:o);return(Jt(a)?ll.has(a):Ad(a))||(r||yt(t,"get",a),n)?i:dt(i)?l&&cn(a)?i:i.value:Ze(i)?r?hl(i):Ya(i):i}}class cl extends il{constructor(t=!1){super(!1,t)}set(t,a,o,r){let n=t[a];if(!this._isShallow){const s=Sa(n);if(!Kt(o)&&!Sa(o)&&(n=ze(n),o=ze(o)),!De(t)&&dt(n)&&!dt(o))return s||(n.value=o),!0}const l=De(t)&&cn(a)?Number(a)<t.length:Ke(t,a),i=Reflect.set(t,a,o,dt(t)?t:r);return t===ze(r)&&(l?Ca(o,n)&&fa(t,"set",a,o):fa(t,"add",a,o)),i}deleteProperty(t,a){const o=Ke(t,a);t[a];const r=Reflect.deleteProperty(t,a);return r&&o&&fa(t,"delete",a,void 0),r}has(t,a){const o=Reflect.has(t,a);return(!Jt(a)||!ll.has(a))&&yt(t,"has",a),o}ownKeys(t){return yt(t,"iterate",De(t)?"length":Pa),Reflect.ownKeys(t)}}class dl extends il{constructor(t=!1){super(!0,t)}set(t,a){return!0}deleteProperty(t,a){return!0}}const Ed=new cl,Ld=new dl,Nd=new cl(!0),Id=new dl(!0),kn=e=>e,mr=e=>Reflect.getPrototypeOf(e);function Bd(e,t,a){return function(...o){const r=this.__v_raw,n=ze(r),l=Ga(n),i=e==="entries"||e===Symbol.iterator&&l,s=e==="keys"&&l,c=r[e](...o),u=a?kn:t?wr:mt;return!t&&yt(n,"iterate",s?bn:Pa),{next(){const{value:h,done:m}=c.next();return m?{value:h,done:m}:{value:i?[u(h[0]),u(h[1])]:u(h),done:m}},[Symbol.iterator](){return this}}}}function vr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Od(e,t){const a={get(r){const n=this.__v_raw,l=ze(n),i=ze(r);e||(Ca(r,i)&&yt(l,"get",r),yt(l,"get",i));const{has:s}=mr(l),c=t?kn:e?wr:mt;if(s.call(l,r))return c(n.get(r));if(s.call(l,i))return c(n.get(i));n!==l&&n.get(r)},get size(){const r=this.__v_raw;return!e&&yt(ze(r),"iterate",Pa),r.size},has(r){const n=this.__v_raw,l=ze(n),i=ze(r);return e||(Ca(r,i)&&yt(l,"has",r),yt(l,"has",i)),r===i?n.has(r):n.has(r)||n.has(i)},forEach(r,n){const l=this,i=l.__v_raw,s=ze(i),c=t?kn:e?wr:mt;return!e&&yt(s,"iterate",Pa),i.forEach((u,h)=>r.call(n,c(u),c(h),l))}};return pt(a,e?{add:vr("add"),set:vr("set"),delete:vr("delete"),clear:vr("clear")}:{add(r){!t&&!Kt(r)&&!Sa(r)&&(r=ze(r));const n=ze(this);return mr(n).has.call(n,r)||(n.add(r),fa(n,"add",r,r)),this},set(r,n){!t&&!Kt(n)&&!Sa(n)&&(n=ze(n));const l=ze(this),{has:i,get:s}=mr(l);let c=i.call(l,r);c||(r=ze(r),c=i.call(l,r));const u=s.call(l,r);return l.set(r,n),c?Ca(n,u)&&fa(l,"set",r,n):fa(l,"add",r,n),this},delete(r){const n=ze(this),{has:l,get:i}=mr(n);let s=l.call(n,r);s||(r=ze(r),s=l.call(n,r)),i&&i.call(n,r);const c=n.delete(r);return s&&fa(n,"delete",r,void 0),c},clear(){const r=ze(this),n=r.size!==0,l=r.clear();return n&&fa(r,"clear",void 0,void 0),l}}),["keys","values","entries",Symbol.iterator].forEach(r=>{a[r]=Bd(r,e,t)}),a}function br(e,t){const a=Od(e,t);return(o,r,n)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?o:Reflect.get(Ke(a,r)&&r in o?a:o,r,n)}const Pd={get:br(!1,!1)},Fd={get:br(!1,!0)},Hd={get:br(!0,!1)},Wd={get:br(!0,!0)},ul=new WeakMap,fl=new WeakMap,gl=new WeakMap,pl=new WeakMap;function zd(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Rd(e){return e.__v_skip||!Object.isExtensible(e)?0:zd(ud(e))}function Ya(e){return Sa(e)?e:yr(e,!1,Ed,Pd,ul)}function jd(e){return yr(e,!1,Nd,Fd,fl)}function hl(e){return yr(e,!0,Ld,Hd,gl)}function BC(e){return yr(e,!0,Id,Wd,pl)}function yr(e,t,a,o,r){if(!Ze(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const n=Rd(e);if(n===0)return e;const l=r.get(e);if(l)return l;const i=new Proxy(e,n===2?o:a);return r.set(e,i),i}function Za(e){return Sa(e)?Za(e.__v_raw):!!(e&&e.__v_isReactive)}function Sa(e){return!!(e&&e.__v_isReadonly)}function Kt(e){return!!(e&&e.__v_isShallow)}function _n(e){return e?!!e.__v_raw:!1}function ze(e){const t=e&&e.__v_raw;return t?ze(t):e}function Ud(e){return!Ke(e,"__v_skip")&&Object.isExtensible(e)&&Ks(e,"__v_skip",!0),e}const mt=e=>Ze(e)?Ya(e):e,wr=e=>Ze(e)?hl(e):e;function dt(e){return e?e.__v_isRef===!0:!1}function ie(e){return Vd(e,!1)}function Vd(e,t){return dt(e)?e:new Kd(e,t)}class Kd{constructor(t,a){this.dep=new vn,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=a?t:ze(t),this._value=a?t:mt(t),this.__v_isShallow=a}get value(){return this.dep.track(),this._value}set value(t){const a=this._rawValue,o=this.__v_isShallow||Kt(t)||Sa(t);t=o?t:ze(t),Ca(t,a)&&(this._rawValue=t,this._value=o?t:mt(t),this.dep.trigger())}}function D(e){return dt(e)?e.value:e}const qd={get:(e,t,a)=>t==="__v_raw"?e:D(Reflect.get(e,t,a)),set:(e,t,a,o)=>{const r=e[t];return dt(r)&&!dt(a)?(r.value=a,!0):Reflect.set(e,t,a,o)}};function ml(e){return Za(e)?e:new Proxy(e,qd)}function Gd(e){const t=De(e)?new Array(e.length):{};for(const a in e)t[a]=Yd(e,a);return t}class Jd{constructor(t,a,o){this._object=t,this._key=a,this._defaultValue=o,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return $d(ze(this._object),this._key)}}function Yd(e,t,a){const o=e[t];return dt(o)?o:new Jd(e,t,a)}class Zd{constructor(t,a,o){this.fn=t,this.setter=a,this._value=void 0,this.dep=new vn(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=_o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!a,this.isSSR=o}notify(){if(this.flags|=16,!(this.flags&8)&&tt!==this)return Qs(this,!0),!0}get value(){const t=this.dep.track();return al(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Xd(e,t,a=!1){let o,r;return Ie(e)?o=e:(o=e.get,r=e.set),new Zd(o,r,a)}const kr={},_r=new WeakMap;let Fa;function Qd(e,t=!1,a=Fa){if(a){let o=_r.get(a);o||_r.set(a,o=[]),o.push(e)}}function eu(e,t,a=Ye){const{immediate:o,deep:r,once:n,scheduler:l,augmentJob:i,call:s}=a,c=T=>r?T:Kt(T)||r===!1||r===0?pa(T,1):pa(T);let u,h,m,p,d=!1,f=!1;if(dt(e)?(h=()=>e.value,d=Kt(e)):Za(e)?(h=()=>c(e),d=!0):De(e)?(f=!0,d=e.some(T=>Za(T)||Kt(T)),h=()=>e.map(T=>{if(dt(T))return T.value;if(Za(T))return c(T);if(Ie(T))return s?s(T,2):T()})):Ie(e)?t?h=s?()=>s(e,2):e:h=()=>{if(m){na();try{m()}finally{sa()}}const T=Fa;Fa=u;try{return s?s(e,3,[p]):e(p)}finally{Fa=T}}:h=ra,t&&r){const T=h,P=r===!0?1/0:r;h=()=>pa(T(),P)}const y=xd(),C=()=>{u.stop(),y&&y.active&&ln(y.effects,u)};if(n&&t){const T=t;t=(...P)=>{T(...P),C()}}let $=f?new Array(e.length).fill(kr):kr;const E=T=>{if(!(!(u.flags&1)||!u.dirty&&!T))if(t){const P=u.run();if(r||d||(f?P.some((I,w)=>Ca(I,$[w])):Ca(P,$))){m&&m();const I=Fa;Fa=u;try{const w=[P,$===kr?void 0:f&&$[0]===kr?[]:$,p];$=P,s?s(t,3,w):t(...w)}finally{Fa=I}}}else u.run()};return i&&i(E),u=new Zs(h),u.scheduler=l?()=>l(E,!1):E,p=T=>Qd(T,!1,u),m=u.onStop=()=>{const T=_r.get(u);if(T){if(s)s(T,4);else for(const P of T)P();_r.delete(u)}},t?o?E(!0):$=u.run():l?l(E.bind(null,!0),!0):u.run(),C.pause=u.pause.bind(u),C.resume=u.resume.bind(u),C.stop=C,C}function pa(e,t=1/0,a){if(t<=0||!Ze(e)||e.__v_skip||(a=a||new Set,a.has(e)))return e;if(a.add(e),t--,dt(e))pa(e.value,t,a);else if(De(e))for(let o=0;o<e.length;o++)pa(e[o],t,a);else if(lr(e)||Ga(e))e.forEach(o=>{pa(o,t,a)});else if(Vs(e)){for(const o in e)pa(e[o],t,a);for(const o of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,o)&&pa(e[o],t,a)}return e}/**
* @vue/runtime-core v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const So=[];let xn=!1;function OC(e,...t){if(xn)return;xn=!0,na();const a=So.length?So[So.length-1].component:null,o=a&&a.appContext.config.warnHandler,r=tu();if(o)Xa(o,a,11,[e+t.map(n=>{var l,i;return(i=(l=n.toString)==null?void 0:l.call(n))!=null?i:JSON.stringify(n)}).join(""),a&&a.proxy,r.map(({vnode:n})=>`at <${xi(a,n.type)}>`).join(`
`),r]);else{const n=[`[Vue warn]: ${e}`,...t];r.length&&n.push(`
`,...au(r)),console.warn(...n)}sa(),xn=!1}function tu(){let e=So[So.length-1];if(!e)return[];const t=[];for(;e;){const a=t[0];a&&a.vnode===e?a.recurseCount++:t.push({vnode:e,recurseCount:0});const o=e.component&&e.component.parent;e=o&&o.vnode}return t}function au(e){const t=[];return e.forEach((a,o)=>{t.push(...o===0?[]:[`
`],...ou(a))}),t}function ou({vnode:e,recurseCount:t}){const a=t>0?`... (${t} recursive calls)`:"",o=e.component?e.component.parent==null:!1,r=` at <${xi(e.component,e.type,o)}`,n=">"+a;return e.props?[r,...ru(e.props),n]:[r+n]}function ru(e){const t=[],a=Object.keys(e);return a.slice(0,3).forEach(o=>{t.push(...vl(o,e[o]))}),a.length>3&&t.push(" ..."),t}function vl(e,t,a){return nt(t)?(t=JSON.stringify(t),a?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?a?t:[`${e}=${t}`]:dt(t)?(t=vl(e,ze(t.value),!0),a?t:[`${e}=Ref<`,t,">"]):Ie(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=ze(t),a?t:[`${e}=`,t])}function Xa(e,t,a,o){try{return o?e(...o):e()}catch(r){$o(r,t,a)}}function Zt(e,t,a,o){if(Ie(e)){const r=Xa(e,t,a,o);return r&&js(r)&&r.catch(n=>{$o(n,t,a)}),r}if(De(e)){const r=[];for(let n=0;n<e.length;n++)r.push(Zt(e[n],t,a,o));return r}}function $o(e,t,a,o=!0){const r=t?t.vnode:null,{errorHandler:n,throwUnhandledErrorInProduction:l}=t&&t.appContext.config||Ye;if(t){let i=t.parent;const s=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${a}`;for(;i;){const u=i.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,s,c)===!1)return}i=i.parent}if(n){na(),Xa(n,null,10,[e,s,c]),sa();return}}nu(e,a,r,o,l)}function nu(e,t,a,o=!0,r=!1){if(r)throw e;console.error(e)}const St=[];let la=-1;const Qa=[];let $a=null,eo=0;const bl=Promise.resolve();let xr=null;function Xt(e){const t=xr||bl;return e?t.then(this?e.bind(this):e):t}function su(e){let t=la+1,a=St.length;for(;t<a;){const o=t+a>>>1,r=St[o],n=To(r);n<e||n===e&&r.flags&2?t=o+1:a=o}return t}function Cn(e){if(!(e.flags&1)){const t=To(e),a=St[St.length-1];!a||!(e.flags&2)&&t>=To(a)?St.push(e):St.splice(su(t),0,e),e.flags|=1,yl()}}function yl(){xr||(xr=bl.then(_l))}function lu(e){De(e)?Qa.push(...e):$a&&e.id===-1?$a.splice(eo+1,0,e):e.flags&1||(Qa.push(e),e.flags|=1),yl()}function wl(e,t,a=la+1){for(;a<St.length;a++){const o=St[a];if(o&&o.flags&2){if(e&&o.id!==e.uid)continue;St.splice(a,1),a--,o.flags&4&&(o.flags&=-2),o(),o.flags&4||(o.flags&=-2)}}}function kl(e){if(Qa.length){const t=[...new Set(Qa)].sort((a,o)=>To(a)-To(o));if(Qa.length=0,$a){$a.push(...t);return}for($a=t,eo=0;eo<$a.length;eo++){const a=$a[eo];a.flags&4&&(a.flags&=-2),a.flags&8||a(),a.flags&=-2}$a=null,eo=0}}const To=e=>e.id==null?e.flags&2?-1:1/0:e.id;function _l(e){try{for(la=0;la<St.length;la++){const t=St[la];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Xa(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;la<St.length;la++){const t=St[la];t&&(t.flags&=-2)}la=-1,St.length=0,kl(),xr=null,(St.length||Qa.length)&&_l()}}let vt=null,xl=null;function Cr(e){const t=vt;return vt=e,xl=e&&e.type.__scopeId||null,t}function Xe(e,t=vt,a){if(!t||e._n)return e;const o=(...r)=>{o._d&&pi(-1);const n=Cr(t);let l;try{l=e(...r)}finally{Cr(n),o._d&&pi(1)}return l};return o._n=!0,o._c=!0,o._d=!0,o}function to(e,t){if(vt===null)return e;const a=Or(vt),o=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[n,l,i,s=Ye]=t[r];n&&(Ie(n)&&(n={mounted:n,updated:n}),n.deep&&pa(l),o.push({dir:n,instance:a,value:l,oldValue:void 0,arg:i,modifiers:s}))}return e}function Ha(e,t,a,o){const r=e.dirs,n=t&&t.dirs;for(let l=0;l<r.length;l++){const i=r[l];n&&(i.oldValue=n[l].value);let s=i.dir[o];s&&(na(),Zt(s,a,8,[e.el,i,e,t]),sa())}}const Cl=Symbol("_vte"),Sl=e=>e.__isTeleport,Mo=e=>e&&(e.disabled||e.disabled===""),$l=e=>e&&(e.defer||e.defer===""),Tl=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Ml=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Sn=(e,t)=>{const a=e&&e.to;return nt(a)?t?t(a):null:a},Al={name:"Teleport",__isTeleport:!0,process(e,t,a,o,r,n,l,i,s,c){const{mc:u,pc:h,pbc:m,o:{insert:p,querySelector:d,createText:f,createComment:y}}=c,C=Mo(t.props);let{shapeFlag:$,children:E,dynamicChildren:T}=t;if(e==null){const P=t.el=f(""),I=t.anchor=f("");p(P,a,o),p(I,a,o);const w=(O,z)=>{$&16&&(r&&r.isCE&&(r.ce._teleportTarget=O),u(E,O,z,r,n,l,i,s))},A=()=>{const O=t.target=Sn(t.props,d),z=Dl(O,t,f,p);O&&(l!=="svg"&&Tl(O)?l="svg":l!=="mathml"&&Ml(O)&&(l="mathml"),C||(w(O,z),$r(t,!1)))};C&&(w(a,I),$r(t,!0)),$l(t.props)?(t.el.__isMounted=!1,Mt(()=>{A(),delete t.el.__isMounted},n)):A()}else{if($l(t.props)&&e.el.__isMounted===!1){Mt(()=>{Al.process(e,t,a,o,r,n,l,i,s,c)},n);return}t.el=e.el,t.targetStart=e.targetStart;const P=t.anchor=e.anchor,I=t.target=e.target,w=t.targetAnchor=e.targetAnchor,A=Mo(e.props),O=A?a:I,z=A?P:w;if(l==="svg"||Tl(I)?l="svg":(l==="mathml"||Ml(I))&&(l="mathml"),T?(m(e.dynamicChildren,T,O,r,n,l,i),Hn(e,t,!0)):s||h(e,t,O,z,r,n,l,i,!1),C)A?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Sr(t,a,P,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const J=t.target=Sn(t.props,d);J&&Sr(t,J,null,c,0)}else A&&Sr(t,I,w,c,1);$r(t,C)}},remove(e,t,a,{um:o,o:{remove:r}},n){const{shapeFlag:l,children:i,anchor:s,targetStart:c,targetAnchor:u,target:h,props:m}=e;if(h&&(r(c),r(u)),n&&r(s),l&16){const p=n||!Mo(m);for(let d=0;d<i.length;d++){const f=i[d];o(f,t,a,p,!!f.dynamicChildren)}}},move:Sr,hydrate:iu};function Sr(e,t,a,{o:{insert:o},m:r},n=2){n===0&&o(e.targetAnchor,t,a);const{el:l,anchor:i,shapeFlag:s,children:c,props:u}=e,h=n===2;if(h&&o(l,t,a),(!h||Mo(u))&&s&16)for(let m=0;m<c.length;m++)r(c[m],t,a,2);h&&o(i,t,a)}function iu(e,t,a,o,r,n,{o:{nextSibling:l,parentNode:i,querySelector:s,insert:c,createText:u}},h){const m=t.target=Sn(t.props,s);if(m){const p=Mo(t.props),d=m._lpa||m.firstChild;if(t.shapeFlag&16)if(p)t.anchor=h(l(e),t,i(e),a,o,r,n),t.targetStart=d,t.targetAnchor=d&&l(d);else{t.anchor=l(e);let f=d;for(;f;){if(f&&f.nodeType===8){if(f.data==="teleport start anchor")t.targetStart=f;else if(f.data==="teleport anchor"){t.targetAnchor=f,m._lpa=t.targetAnchor&&l(t.targetAnchor);break}}f=l(f)}t.targetAnchor||Dl(m,t,u,c),h(d&&l(d),t,m,a,o,r,n)}$r(t,p)}return t.anchor&&l(t.anchor)}const cu=Al;function $r(e,t){const a=e.ctx;if(a&&a.ut){let o,r;for(t?(o=e.el,r=e.anchor):(o=e.targetStart,r=e.targetAnchor);o&&o!==r;)o.nodeType===1&&o.setAttribute("data-v-owner",a.uid),o=o.nextSibling;a.ut()}}function Dl(e,t,a,o){const r=t.targetStart=a(""),n=t.targetAnchor=a("");return r[Cl]=n,e&&(o(r,e),o(n,e)),n}const ha=Symbol("_leaveCb"),Tr=Symbol("_enterCb");function du(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return $t(()=>{e.isMounted=!0}),wt(()=>{e.isUnmounting=!0}),e}const qt=[Function,Array],El={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:qt,onEnter:qt,onAfterEnter:qt,onEnterCancelled:qt,onBeforeLeave:qt,onLeave:qt,onAfterLeave:qt,onLeaveCancelled:qt,onBeforeAppear:qt,onAppear:qt,onAfterAppear:qt,onAppearCancelled:qt},Ll=e=>{const t=e.subTree;return t.component?Ll(t.component):t},uu={name:"BaseTransition",props:El,setup(e,{slots:t}){const a=Ir(),o=du();return()=>{const r=t.default&&Ol(t.default(),!0);if(!r||!r.length)return;const n=Nl(r),l=ze(e),{mode:i}=l;if(o.isLeaving)return Tn(n);const s=Bl(n);if(!s)return Tn(n);let c=$n(s,l,o,a,h=>c=h);s.type!==kt&&Ao(s,c);let u=a.subTree&&Bl(a.subTree);if(u&&u.type!==kt&&!za(s,u)&&Ll(a).type!==kt){let h=$n(u,l,o,a);if(Ao(u,h),i==="out-in"&&s.type!==kt)return o.isLeaving=!0,h.afterLeave=()=>{o.isLeaving=!1,a.job.flags&8||a.update(),delete h.afterLeave,u=void 0},Tn(n);i==="in-out"&&s.type!==kt?h.delayLeave=(m,p,d)=>{const f=Il(o,u);f[String(u.key)]=u,m[ha]=()=>{p(),m[ha]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{d(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return n}}};function Nl(e){let t=e[0];if(e.length>1){for(const a of e)if(a.type!==kt){t=a;break}}return t}const fu=uu;function Il(e,t){const{leavingVNodes:a}=e;let o=a.get(t.type);return o||(o=Object.create(null),a.set(t.type,o)),o}function $n(e,t,a,o,r){const{appear:n,mode:l,persisted:i=!1,onBeforeEnter:s,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:m,onLeave:p,onAfterLeave:d,onLeaveCancelled:f,onBeforeAppear:y,onAppear:C,onAfterAppear:$,onAppearCancelled:E}=t,T=String(e.key),P=Il(a,e),I=(O,z)=>{O&&Zt(O,o,9,z)},w=(O,z)=>{const J=z[1];I(O,z),De(O)?O.every(H=>H.length<=1)&&J():O.length<=1&&J()},A={mode:l,persisted:i,beforeEnter(O){let z=s;if(!a.isMounted)if(n)z=y||s;else return;O[ha]&&O[ha](!0);const J=P[T];J&&za(e,J)&&J.el[ha]&&J.el[ha](),I(z,[O])},enter(O){let z=c,J=u,H=h;if(!a.isMounted)if(n)z=C||c,J=$||u,H=E||h;else return;let x=!1;const v=O[Tr]=b=>{x||(x=!0,b?I(H,[O]):I(J,[O]),A.delayedLeave&&A.delayedLeave(),O[Tr]=void 0)};z?w(z,[O,v]):v()},leave(O,z){const J=String(e.key);if(O[Tr]&&O[Tr](!0),a.isUnmounting)return z();I(m,[O]);let H=!1;const x=O[ha]=v=>{H||(H=!0,z(),v?I(f,[O]):I(d,[O]),O[ha]=void 0,P[J]===e&&delete P[J])};P[J]=e,p?w(p,[O,x]):x()},clone(O){const z=$n(O,t,a,o,r);return r&&r(z),z}};return A}function Tn(e){if(Eo(e))return e=Ta(e),e.children=null,e}function Bl(e){if(!Eo(e))return Sl(e.type)&&e.children?Nl(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:a}=e;if(a){if(t&16)return a[0];if(t&32&&Ie(a.default))return a.default()}}function Ao(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ao(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ol(e,t=!1,a){let o=[],r=0;for(let n=0;n<e.length;n++){let l=e[n];const i=a==null?l.key:String(a)+String(l.key!=null?l.key:n);l.type===pe?(l.patchFlag&128&&r++,o=o.concat(Ol(l.children,t,i))):(t||l.type!==kt)&&o.push(i!=null?Ta(l,{key:i}):l)}if(r>1)for(let n=0;n<o.length;n++)o[n].patchFlag=-2;return o}/*! #__NO_SIDE_EFFECTS__ */function Le(e,t){return Ie(e)?pt({name:e.name},t,{setup:e}):e}function Mn(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Do(e,t,a,o,r=!1){if(De(e)){e.forEach((d,f)=>Do(d,t&&(De(t)?t[f]:t),a,o,r));return}if(ao(o)&&!r){o.shapeFlag&512&&o.type.__asyncResolved&&o.component.subTree.component&&Do(e,t,a,o.component.subTree);return}const n=o.shapeFlag&4?Or(o.component):o.el,l=r?null:n,{i,r:s}=e,c=t&&t.r,u=i.refs===Ye?i.refs={}:i.refs,h=i.setupState,m=ze(h),p=h===Ye?zs:d=>Ke(m,d);if(c!=null&&c!==s){if(nt(c))u[c]=null,p(c)&&(h[c]=null);else if(dt(c)){c.value=null;const d=t;d.k&&(u[d.k]=null)}}if(Ie(s))Xa(s,i,12,[l,u]);else{const d=nt(s),f=dt(s);if(d||f){const y=()=>{if(e.f){const C=d?p(s)?h[s]:u[s]:s.value;if(r)De(C)&&ln(C,n);else if(De(C))C.includes(n)||C.push(n);else if(d)u[s]=[n],p(s)&&(h[s]=u[s]);else{const $=[n];s.value=$,e.k&&(u[e.k]=$)}}else d?(u[s]=l,p(s)&&(h[s]=l)):f&&(s.value=l,e.k&&(u[e.k]=l))};l?(y.id=-1,Mt(y,a)):y()}}}const Pl=e=>e.nodeType===8;fr().requestIdleCallback,fr().cancelIdleCallback;function gu(e,t){if(Pl(e)&&e.data==="["){let a=1,o=e.nextSibling;for(;o;){if(o.nodeType===1){if(t(o)===!1)break}else if(Pl(o))if(o.data==="]"){if(--a===0)break}else o.data==="["&&a++;o=o.nextSibling}}else t(e)}const ao=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Et(e){Ie(e)&&(e={loader:e});const{loader:t,loadingComponent:a,errorComponent:o,delay:r=200,hydrate:n,timeout:l,suspensible:i=!0,onError:s}=e;let c=null,u,h=0;const m=()=>(h++,c=null,p()),p=()=>{let d;return c||(d=c=t().catch(f=>{if(f=f instanceof Error?f:new Error(String(f)),s)return new Promise((y,C)=>{s(f,()=>y(m()),()=>C(f),h+1)});throw f}).then(f=>d!==c&&c?c:(f&&(f.__esModule||f[Symbol.toStringTag]==="Module")&&(f=f.default),u=f,f)))};return Le({name:"AsyncComponentWrapper",__asyncLoader:p,__asyncHydrate(d,f,y){let C=!1;(f.bu||(f.bu=[])).push(()=>C=!0);const $=()=>{C||y()},E=n?()=>{const T=n($,P=>gu(d,P));T&&(f.bum||(f.bum=[])).push(T)}:$;u?E():p().then(()=>!f.isUnmounted&&E())},get __asyncResolved(){return u},setup(){const d=bt;if(Mn(d),u)return()=>An(u,d);const f=E=>{c=null,$o(E,d,13,!o)};if(i&&d.suspense||ro)return p().then(E=>()=>An(E,d)).catch(E=>(f(E),()=>o?Me(o,{error:E}):null));const y=ie(!1),C=ie(),$=ie(!!r);return r&&setTimeout(()=>{$.value=!1},r),l!=null&&setTimeout(()=>{if(!y.value&&!C.value){const E=new Error(`Async component timed out after ${l}ms.`);f(E),C.value=E}},l),p().then(()=>{y.value=!0,d.parent&&Eo(d.parent.vnode)&&d.parent.update()}).catch(E=>{f(E),C.value=E}),()=>{if(y.value&&u)return An(u,d);if(C.value&&o)return Me(o,{error:C.value});if(a&&!$.value)return Me(a)}}})}function An(e,t){const{ref:a,props:o,children:r,ce:n}=t.vnode,l=Me(e,o,r);return l.ref=a,l.ce=n,delete t.vnode.ce,l}const Eo=e=>e.type.__isKeepAlive;function pu(e,t){Fl(e,"a",t)}function hu(e,t){Fl(e,"da",t)}function Fl(e,t,a=bt){const o=e.__wdc||(e.__wdc=()=>{let r=a;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Mr(t,o,a),a){let r=a.parent;for(;r&&r.parent;)Eo(r.parent.vnode)&&mu(o,t,a,r),r=r.parent}}function mu(e,t,a,o){const r=Mr(t,e,o,!0);Dn(()=>{ln(o[t],r)},a)}function Mr(e,t,a=bt,o=!1){if(a){const r=a[e]||(a[e]=[]),n=t.__weh||(t.__weh=(...l)=>{na();const i=Po(a),s=Zt(t,a,e,l);return i(),sa(),s});return o?r.unshift(n):r.push(n),n}}const ma=e=>(t,a=bt)=>{(!ro||e==="sp")&&Mr(e,(...o)=>t(...o),a)},vu=ma("bm"),$t=ma("m"),bu=ma("bu"),yu=ma("u"),wt=ma("bum"),Dn=ma("um"),wu=ma("sp"),ku=ma("rtg"),_u=ma("rtc");function xu(e,t=bt){Mr("ec",e,t)}const Hl="components";function Cu(e,t){return zl(Hl,e,!0,t)||e}const Wl=Symbol.for("v-ndc");function Su(e){return nt(e)?zl(Hl,e,!1)||e:e||Wl}function zl(e,t,a=!0,o=!1){const r=vt||bt;if(r){const n=r.type;{const i=_i(n,!1);if(i&&(i===t||i===Vt(t)||i===cr(Vt(t))))return n}const l=Rl(r[e]||n[e],t)||Rl(r.appContext[e],t);return!l&&o?n:l}}function Rl(e,t){return e&&(e[t]||e[Vt(t)]||e[cr(Vt(t))])}function xe(e,t,a,o){let r;const n=a,l=De(e);if(l||nt(e)){const i=l&&Za(e);let s=!1,c=!1;i&&(s=!Kt(e),c=Sa(e),e=hr(e)),r=new Array(e.length);for(let u=0,h=e.length;u<h;u++)r[u]=t(s?c?wr(mt(e[u])):mt(e[u]):e[u],u,void 0,n)}else if(typeof e=="number"){r=new Array(e);for(let i=0;i<e;i++)r[i]=t(i+1,i,void 0,n)}else if(Ze(e))if(e[Symbol.iterator])r=Array.from(e,(i,s)=>t(i,s,void 0,n));else{const i=Object.keys(e);r=new Array(i.length);for(let s=0,c=i.length;s<c;s++){const u=i[s];r[s]=t(e[u],u,s,n)}}else r=[];return r}function $u(e,t,a={},o,r){if(vt.ce||vt.parent&&ao(vt.parent)&&vt.parent.ce)return a.name=t,k(),lt(pe,null,[Me("slot",a,o)],64);let n=e[t];n&&n._c&&(n._d=!1),k();const l=n&&jl(n(a)),i=a.key||l&&l.key,s=lt(pe,{key:(i&&!Jt(i)?i:`_${t}`)+(!l&&o?"_fb":"")},l||[],l&&e._===1?64:-2);return n&&n._c&&(n._d=!0),s}function jl(e){return e.some(t=>Oo(t)?!(t.type===kt||t.type===pe&&!jl(t.children)):!0)?e:null}const En=e=>e?yi(e)?Or(e):En(e.parent):null,Lo=pt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>En(e.parent),$root:e=>En(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ql(e),$forceUpdate:e=>e.f||(e.f=()=>{Cn(e.update)}),$nextTick:e=>e.n||(e.n=Xt.bind(e.proxy)),$watch:e=>Gu.bind(e)}),Ln=(e,t)=>e!==Ye&&!e.__isScriptSetup&&Ke(e,t),Tu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:a,setupState:o,data:r,props:n,accessCache:l,type:i,appContext:s}=e;let c;if(t[0]!=="$"){const p=l[t];if(p!==void 0)switch(p){case 1:return o[t];case 2:return r[t];case 4:return a[t];case 3:return n[t]}else{if(Ln(o,t))return l[t]=1,o[t];if(r!==Ye&&Ke(r,t))return l[t]=2,r[t];if((c=e.propsOptions[0])&&Ke(c,t))return l[t]=3,n[t];if(a!==Ye&&Ke(a,t))return l[t]=4,a[t];Nn&&(l[t]=0)}}const u=Lo[t];let h,m;if(u)return t==="$attrs"&&yt(e.attrs,"get",""),u(e);if((h=i.__cssModules)&&(h=h[t]))return h;if(a!==Ye&&Ke(a,t))return l[t]=4,a[t];if(m=s.config.globalProperties,Ke(m,t))return m[t]},set({_:e},t,a){const{data:o,setupState:r,ctx:n}=e;return Ln(r,t)?(r[t]=a,!0):o!==Ye&&Ke(o,t)?(o[t]=a,!0):Ke(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(n[t]=a,!0)},has({_:{data:e,setupState:t,accessCache:a,ctx:o,appContext:r,propsOptions:n,type:l}},i){let s,c;return!!(a[i]||e!==Ye&&i[0]!=="$"&&Ke(e,i)||Ln(t,i)||(s=n[0])&&Ke(s,i)||Ke(o,i)||Ke(Lo,i)||Ke(r.config.globalProperties,i)||(c=l.__cssModules)&&c[i])},defineProperty(e,t,a){return a.get!=null?e._.accessCache[t]=0:Ke(a,"value")&&this.set(e,t,a.value,null),Reflect.defineProperty(e,t,a)}};function Ul(e){return De(e)?e.reduce((t,a)=>(t[a]=null,t),{}):e}let Nn=!0;function Mu(e){const t=ql(e),a=e.proxy,o=e.ctx;Nn=!1,t.beforeCreate&&Vl(t.beforeCreate,e,"bc");const{data:r,computed:n,methods:l,watch:i,provide:s,inject:c,created:u,beforeMount:h,mounted:m,beforeUpdate:p,updated:d,activated:f,deactivated:y,beforeDestroy:C,beforeUnmount:$,destroyed:E,unmounted:T,render:P,renderTracked:I,renderTriggered:w,errorCaptured:A,serverPrefetch:O,expose:z,inheritAttrs:J,components:H,directives:x,filters:v}=t;if(c&&Au(c,o,null),l)for(const F in l){const X=l[F];Ie(X)&&(o[F]=X.bind(a))}if(r){const F=r.call(a,a);Ze(F)&&(e.data=Ya(F))}if(Nn=!0,n)for(const F in n){const X=n[F],ne=Ie(X)?X.bind(a,a):Ie(X.get)?X.get.bind(a,a):ra,Y=!Ie(X)&&Ie(X.set)?X.set.bind(a):ra,re=N({get:ne,set:Y});Object.defineProperty(o,F,{enumerable:!0,configurable:!0,get:()=>re.value,set:se=>re.value=se})}if(i)for(const F in i)Kl(i[F],o,a,F);if(s){const F=Ie(s)?s.call(a):s;Reflect.ownKeys(F).forEach(X=>{Bu(X,F[X])})}u&&Vl(u,e,"c");function j(F,X){De(X)?X.forEach(ne=>F(ne.bind(a))):X&&F(X.bind(a))}if(j(vu,h),j($t,m),j(bu,p),j(yu,d),j(pu,f),j(hu,y),j(xu,A),j(_u,I),j(ku,w),j(wt,$),j(Dn,T),j(wu,O),De(z))if(z.length){const F=e.exposed||(e.exposed={});z.forEach(X=>{Object.defineProperty(F,X,{get:()=>a[X],set:ne=>a[X]=ne,enumerable:!0})})}else e.exposed||(e.exposed={});P&&e.render===ra&&(e.render=P),J!=null&&(e.inheritAttrs=J),H&&(e.components=H),x&&(e.directives=x),O&&Mn(e)}function Au(e,t,a=ra){De(e)&&(e=In(e));for(const o in e){const r=e[o];let n;Ze(r)?"default"in r?n=Dr(r.from||o,r.default,!0):n=Dr(r.from||o):n=Dr(r),dt(n)?Object.defineProperty(t,o,{enumerable:!0,configurable:!0,get:()=>n.value,set:l=>n.value=l}):t[o]=n}}function Vl(e,t,a){Zt(De(e)?e.map(o=>o.bind(t.proxy)):e.bind(t.proxy),t,a)}function Kl(e,t,a,o){let r=o.includes(".")?ci(a,o):()=>a[o];if(nt(e)){const n=t[e];Ie(n)&&Ae(r,n)}else if(Ie(e))Ae(r,e.bind(a));else if(Ze(e))if(De(e))e.forEach(n=>Kl(n,t,a,o));else{const n=Ie(e.handler)?e.handler.bind(a):t[e.handler];Ie(n)&&Ae(r,n,e)}}function ql(e){const t=e.type,{mixins:a,extends:o}=t,{mixins:r,optionsCache:n,config:{optionMergeStrategies:l}}=e.appContext,i=n.get(t);let s;return i?s=i:!r.length&&!a&&!o?s=t:(s={},r.length&&r.forEach(c=>Ar(s,c,l,!0)),Ar(s,t,l)),Ze(t)&&n.set(t,s),s}function Ar(e,t,a,o=!1){const{mixins:r,extends:n}=t;n&&Ar(e,n,a,!0),r&&r.forEach(l=>Ar(e,l,a,!0));for(const l in t)if(!(o&&l==="expose")){const i=Du[l]||a&&a[l];e[l]=i?i(e[l],t[l]):t[l]}return e}const Du={data:Gl,props:Jl,emits:Jl,methods:No,computed:No,beforeCreate:Tt,created:Tt,beforeMount:Tt,mounted:Tt,beforeUpdate:Tt,updated:Tt,beforeDestroy:Tt,beforeUnmount:Tt,destroyed:Tt,unmounted:Tt,activated:Tt,deactivated:Tt,errorCaptured:Tt,serverPrefetch:Tt,components:No,directives:No,watch:Lu,provide:Gl,inject:Eu};function Gl(e,t){return t?e?function(){return pt(Ie(e)?e.call(this,this):e,Ie(t)?t.call(this,this):t)}:t:e}function Eu(e,t){return No(In(e),In(t))}function In(e){if(De(e)){const t={};for(let a=0;a<e.length;a++)t[e[a]]=e[a];return t}return e}function Tt(e,t){return e?[...new Set([].concat(e,t))]:t}function No(e,t){return e?pt(Object.create(null),e,t):t}function Jl(e,t){return e?De(e)&&De(t)?[...new Set([...e,...t])]:pt(Object.create(null),Ul(e),Ul(t??{})):t}function Lu(e,t){if(!e)return t;if(!t)return e;const a=pt(Object.create(null),e);for(const o in t)a[o]=Tt(e[o],t[o]);return a}function Yl(){return{app:null,config:{isNativeTag:zs,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Nu=0;function Iu(e,t){return function(o,r=null){Ie(o)||(o=pt({},o)),r!=null&&!Ze(r)&&(r=null);const n=Yl(),l=new WeakSet,i=[];let s=!1;const c=n.app={_uid:Nu++,_component:o,_props:r,_container:null,_context:n,_instance:null,version:mf,get config(){return n.config},set config(u){},use(u,...h){return l.has(u)||(u&&Ie(u.install)?(l.add(u),u.install(c,...h)):Ie(u)&&(l.add(u),u(c,...h))),c},mixin(u){return n.mixins.includes(u)||n.mixins.push(u),c},component(u,h){return h?(n.components[u]=h,c):n.components[u]},directive(u,h){return h?(n.directives[u]=h,c):n.directives[u]},mount(u,h,m){if(!s){const p=c._ceVNode||Me(o,r);return p.appContext=n,m===!0?m="svg":m===!1&&(m=void 0),e(p,u,m),s=!0,c._container=u,u.__vue_app__=c,Or(p.component)}},onUnmount(u){i.push(u)},unmount(){s&&(Zt(i,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,h){return n.provides[u]=h,c},runWithContext(u){const h=oo;oo=c;try{return u()}finally{oo=h}}};return c}}let oo=null;function Bu(e,t){if(bt){let a=bt.provides;const o=bt.parent&&bt.parent.provides;o===a&&(a=bt.provides=Object.create(o)),a[e]=t}}function Dr(e,t,a=!1){const o=Ir();if(o||oo){let r=oo?oo._context.provides:o?o.parent==null||o.ce?o.vnode.appContext&&o.vnode.appContext.provides:o.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return a&&Ie(t)?t.call(o&&o.proxy):t}}const Zl={},Xl=()=>Object.create(Zl),Ql=e=>Object.getPrototypeOf(e)===Zl;function Ou(e,t,a,o=!1){const r={},n=Xl();e.propsDefaults=Object.create(null),ei(e,t,r,n);for(const l in e.propsOptions[0])l in r||(r[l]=void 0);a?e.props=o?r:jd(r):e.type.props?e.props=r:e.props=n,e.attrs=n}function Pu(e,t,a,o){const{props:r,attrs:n,vnode:{patchFlag:l}}=e,i=ze(r),[s]=e.propsOptions;let c=!1;if((o||l>0)&&!(l&16)){if(l&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let m=u[h];if(Er(e.emitsOptions,m))continue;const p=t[m];if(s)if(Ke(n,m))p!==n[m]&&(n[m]=p,c=!0);else{const d=Vt(m);r[d]=Bn(s,i,d,p,e,!1)}else p!==n[m]&&(n[m]=p,c=!0)}}}else{ei(e,t,r,n)&&(c=!0);let u;for(const h in i)(!t||!Ke(t,h)&&((u=xa(h))===h||!Ke(t,u)))&&(s?a&&(a[h]!==void 0||a[u]!==void 0)&&(r[h]=Bn(s,i,h,void 0,e,!0)):delete r[h]);if(n!==i)for(const h in n)(!t||!Ke(t,h))&&(delete n[h],c=!0)}c&&fa(e.attrs,"set","")}function ei(e,t,a,o){const[r,n]=e.propsOptions;let l=!1,i;if(t)for(let s in t){if(yo(s))continue;const c=t[s];let u;r&&Ke(r,u=Vt(s))?!n||!n.includes(u)?a[u]=c:(i||(i={}))[u]=c:Er(e.emitsOptions,s)||(!(s in o)||c!==o[s])&&(o[s]=c,l=!0)}if(n){const s=ze(a),c=i||Ye;for(let u=0;u<n.length;u++){const h=n[u];a[h]=Bn(r,s,h,c[h],e,!Ke(c,h))}}return l}function Bn(e,t,a,o,r,n){const l=e[a];if(l!=null){const i=Ke(l,"default");if(i&&o===void 0){const s=l.default;if(l.type!==Function&&!l.skipFactory&&Ie(s)){const{propsDefaults:c}=r;if(a in c)o=c[a];else{const u=Po(r);o=c[a]=s.call(null,t),u()}}else o=s;r.ce&&r.ce._setProp(a,o)}l[0]&&(n&&!i?o=!1:l[1]&&(o===""||o===xa(a))&&(o=!0))}return o}const Fu=new WeakMap;function ti(e,t,a=!1){const o=a?Fu:t.propsCache,r=o.get(e);if(r)return r;const n=e.props,l={},i=[];let s=!1;if(!Ie(e)){const u=h=>{s=!0;const[m,p]=ti(h,t,!0);pt(l,m),p&&i.push(...p)};!a&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!n&&!s)return Ze(e)&&o.set(e,qa),qa;if(De(n))for(let u=0;u<n.length;u++){const h=Vt(n[u]);ai(h)&&(l[h]=Ye)}else if(n)for(const u in n){const h=Vt(u);if(ai(h)){const m=n[u],p=l[h]=De(m)||Ie(m)?{type:m}:pt({},m),d=p.type;let f=!1,y=!0;if(De(d))for(let C=0;C<d.length;++C){const $=d[C],E=Ie($)&&$.name;if(E==="Boolean"){f=!0;break}else E==="String"&&(y=!1)}else f=Ie(d)&&d.name==="Boolean";p[0]=f,p[1]=y,(f||Ke(p,"default"))&&i.push(h)}}const c=[l,i];return Ze(e)&&o.set(e,c),c}function ai(e){return e[0]!=="$"&&!yo(e)}const On=e=>e==="_"||e==="_ctx"||e==="$stable",Pn=e=>De(e)?e.map(ia):[ia(e)],Hu=(e,t,a)=>{if(t._n)return t;const o=Xe((...r)=>Pn(t(...r)),a);return o._c=!1,o},oi=(e,t,a)=>{const o=e._ctx;for(const r in e){if(On(r))continue;const n=e[r];if(Ie(n))t[r]=Hu(r,n,o);else if(n!=null){const l=Pn(n);t[r]=()=>l}}},ri=(e,t)=>{const a=Pn(t);e.slots.default=()=>a},ni=(e,t,a)=>{for(const o in t)(a||!On(o))&&(e[o]=t[o])},Wu=(e,t,a)=>{const o=e.slots=Xl();if(e.vnode.shapeFlag&32){const r=t._;r?(ni(o,t,a),a&&Ks(o,"_",r,!0)):oi(t,o)}else t&&ri(e,t)},zu=(e,t,a)=>{const{vnode:o,slots:r}=e;let n=!0,l=Ye;if(o.shapeFlag&32){const i=t._;i?a&&i===1?n=!1:ni(r,t,a):(n=!t.$stable,oi(t,r)),l=t}else t&&(ri(e,t),l={default:1});if(n)for(const i in r)!On(i)&&l[i]==null&&delete r[i]},Mt=tf;function Ru(e){return ju(e)}function ju(e,t){const a=fr();a.__VUE__=!0;const{insert:o,remove:r,patchProp:n,createElement:l,createText:i,createComment:s,setText:c,setElementText:u,parentNode:h,nextSibling:m,setScopeId:p=ra,insertStaticContent:d}=e,f=(S,R,L,U=null,q=null,Q=null,ge=void 0,ue=null,le=!!R.dynamicChildren)=>{if(S===R)return;S&&!za(S,R)&&(U=M(S),se(S,q,Q,!0),S=null),R.patchFlag===-2&&(le=!1,R.dynamicChildren=null);const{type:de,ref:ke,shapeFlag:be}=R;switch(de){case Lr:y(S,R,L,U);break;case kt:C(S,R,L,U);break;case Wn:S==null&&$(R,L,U,ge);break;case pe:H(S,R,L,U,q,Q,ge,ue,le);break;default:be&1?P(S,R,L,U,q,Q,ge,ue,le):be&6?x(S,R,L,U,q,Q,ge,ue,le):(be&64||be&128)&&de.process(S,R,L,U,q,Q,ge,ue,le,oe)}ke!=null&&q?Do(ke,S&&S.ref,Q,R||S,!R):ke==null&&S&&S.ref!=null&&Do(S.ref,null,Q,S,!0)},y=(S,R,L,U)=>{if(S==null)o(R.el=i(R.children),L,U);else{const q=R.el=S.el;R.children!==S.children&&c(q,R.children)}},C=(S,R,L,U)=>{S==null?o(R.el=s(R.children||""),L,U):R.el=S.el},$=(S,R,L,U)=>{[S.el,S.anchor]=d(S.children,R,L,U,S.el,S.anchor)},E=({el:S,anchor:R},L,U)=>{let q;for(;S&&S!==R;)q=m(S),o(S,L,U),S=q;o(R,L,U)},T=({el:S,anchor:R})=>{let L;for(;S&&S!==R;)L=m(S),r(S),S=L;r(R)},P=(S,R,L,U,q,Q,ge,ue,le)=>{R.type==="svg"?ge="svg":R.type==="math"&&(ge="mathml"),S==null?I(R,L,U,q,Q,ge,ue,le):O(S,R,q,Q,ge,ue,le)},I=(S,R,L,U,q,Q,ge,ue)=>{let le,de;const{props:ke,shapeFlag:be,transition:me,dirs:ye}=S;if(le=S.el=l(S.type,Q,ke&&ke.is,ke),be&8?u(le,S.children):be&16&&A(S.children,le,null,U,q,Fn(S,Q),ge,ue),ye&&Ha(S,null,U,"created"),w(le,S,S.scopeId,ge,U),ke){for(const _e in ke)_e!=="value"&&!yo(_e)&&n(le,_e,null,ke[_e],Q,U);"value"in ke&&n(le,"value",null,ke.value,Q),(de=ke.onVnodeBeforeMount)&&ca(de,U,S)}ye&&Ha(S,null,U,"beforeMount");const Ce=Uu(q,me);Ce&&me.beforeEnter(le),o(le,R,L),((de=ke&&ke.onVnodeMounted)||Ce||ye)&&Mt(()=>{de&&ca(de,U,S),Ce&&me.enter(le),ye&&Ha(S,null,U,"mounted")},q)},w=(S,R,L,U,q)=>{if(L&&p(S,L),U)for(let Q=0;Q<U.length;Q++)p(S,U[Q]);if(q){let Q=q.subTree;if(R===Q||gi(Q.type)&&(Q.ssContent===R||Q.ssFallback===R)){const ge=q.vnode;w(S,ge,ge.scopeId,ge.slotScopeIds,q.parent)}}},A=(S,R,L,U,q,Q,ge,ue,le=0)=>{for(let de=le;de<S.length;de++){const ke=S[de]=ue?Ma(S[de]):ia(S[de]);f(null,ke,R,L,U,q,Q,ge,ue)}},O=(S,R,L,U,q,Q,ge)=>{const ue=R.el=S.el;let{patchFlag:le,dynamicChildren:de,dirs:ke}=R;le|=S.patchFlag&16;const be=S.props||Ye,me=R.props||Ye;let ye;if(L&&Wa(L,!1),(ye=me.onVnodeBeforeUpdate)&&ca(ye,L,R,S),ke&&Ha(R,S,L,"beforeUpdate"),L&&Wa(L,!0),(be.innerHTML&&me.innerHTML==null||be.textContent&&me.textContent==null)&&u(ue,""),de?z(S.dynamicChildren,de,ue,L,U,Fn(R,q),Q):ge||X(S,R,ue,null,L,U,Fn(R,q),Q,!1),le>0){if(le&16)J(ue,be,me,L,q);else if(le&2&&be.class!==me.class&&n(ue,"class",null,me.class,q),le&4&&n(ue,"style",be.style,me.style,q),le&8){const Ce=R.dynamicProps;for(let _e=0;_e<Ce.length;_e++){const Se=Ce[_e],$e=be[Se],Ne=me[Se];(Ne!==$e||Se==="value")&&n(ue,Se,$e,Ne,q,L)}}le&1&&S.children!==R.children&&u(ue,R.children)}else!ge&&de==null&&J(ue,be,me,L,q);((ye=me.onVnodeUpdated)||ke)&&Mt(()=>{ye&&ca(ye,L,R,S),ke&&Ha(R,S,L,"updated")},U)},z=(S,R,L,U,q,Q,ge)=>{for(let ue=0;ue<R.length;ue++){const le=S[ue],de=R[ue],ke=le.el&&(le.type===pe||!za(le,de)||le.shapeFlag&198)?h(le.el):L;f(le,de,ke,null,U,q,Q,ge,!0)}},J=(S,R,L,U,q)=>{if(R!==L){if(R!==Ye)for(const Q in R)!yo(Q)&&!(Q in L)&&n(S,Q,R[Q],null,q,U);for(const Q in L){if(yo(Q))continue;const ge=L[Q],ue=R[Q];ge!==ue&&Q!=="value"&&n(S,Q,ue,ge,q,U)}"value"in L&&n(S,"value",R.value,L.value,q)}},H=(S,R,L,U,q,Q,ge,ue,le)=>{const de=R.el=S?S.el:i(""),ke=R.anchor=S?S.anchor:i("");let{patchFlag:be,dynamicChildren:me,slotScopeIds:ye}=R;ye&&(ue=ue?ue.concat(ye):ye),S==null?(o(de,L,U),o(ke,L,U),A(R.children||[],L,ke,q,Q,ge,ue,le)):be>0&&be&64&&me&&S.dynamicChildren?(z(S.dynamicChildren,me,L,q,Q,ge,ue),(R.key!=null||q&&R===q.subTree)&&Hn(S,R,!0)):X(S,R,L,ke,q,Q,ge,ue,le)},x=(S,R,L,U,q,Q,ge,ue,le)=>{R.slotScopeIds=ue,S==null?R.shapeFlag&512?q.ctx.activate(R,L,U,ge,le):v(R,L,U,q,Q,ge,le):b(S,R,le)},v=(S,R,L,U,q,Q,ge)=>{const ue=S.component=lf(S,U,q);if(Eo(S)&&(ue.ctx.renderer=oe),cf(ue,!1,ge),ue.asyncDep){if(q&&q.registerDep(ue,j,ge),!S.el){const le=ue.subTree=Me(kt);C(null,le,R,L),S.placeholder=le.el}}else j(ue,S,R,L,q,Q,ge)},b=(S,R,L)=>{const U=R.component=S.component;if(Qu(S,R,L))if(U.asyncDep&&!U.asyncResolved){F(U,R,L);return}else U.next=R,U.update();else R.el=S.el,U.vnode=R},j=(S,R,L,U,q,Q,ge)=>{const ue=()=>{if(S.isMounted){let{next:be,bu:me,u:ye,parent:Ce,vnode:_e}=S;{const We=si(S);if(We){be&&(be.el=_e.el,F(S,be,ge)),We.asyncDep.then(()=>{S.isUnmounted||ue()});return}}let Se=be,$e;Wa(S,!1),be?(be.el=_e.el,F(S,be,ge)):be=_e,me&&dr(me),($e=be.props&&be.props.onVnodeBeforeUpdate)&&ca($e,Ce,be,_e),Wa(S,!0);const Ne=ui(S),Oe=S.subTree;S.subTree=Ne,f(Oe,Ne,h(Oe.el),M(Oe),S,q,Q),be.el=Ne.el,Se===null&&ef(S,Ne.el),ye&&Mt(ye,q),($e=be.props&&be.props.onVnodeUpdated)&&Mt(()=>ca($e,Ce,be,_e),q)}else{let be;const{el:me,props:ye}=R,{bm:Ce,m:_e,parent:Se,root:$e,type:Ne}=S,Oe=ao(R);Wa(S,!1),Ce&&dr(Ce),!Oe&&(be=ye&&ye.onVnodeBeforeMount)&&ca(be,Se,R),Wa(S,!0);{$e.ce&&$e.ce._def.shadowRoot!==!1&&$e.ce._injectChildStyle(Ne);const We=S.subTree=ui(S);f(null,We,L,U,S,q,Q),R.el=We.el}if(_e&&Mt(_e,q),!Oe&&(be=ye&&ye.onVnodeMounted)){const We=R;Mt(()=>ca(be,Se,We),q)}(R.shapeFlag&256||Se&&ao(Se.vnode)&&Se.vnode.shapeFlag&256)&&S.a&&Mt(S.a,q),S.isMounted=!0,R=L=U=null}};S.scope.on();const le=S.effect=new Zs(ue);S.scope.off();const de=S.update=le.run.bind(le),ke=S.job=le.runIfDirty.bind(le);ke.i=S,ke.id=S.uid,le.scheduler=()=>Cn(ke),Wa(S,!0),de()},F=(S,R,L)=>{R.component=S;const U=S.vnode.props;S.vnode=R,S.next=null,Pu(S,R.props,U,L),zu(S,R.children,L),na(),wl(S),sa()},X=(S,R,L,U,q,Q,ge,ue,le=!1)=>{const de=S&&S.children,ke=S?S.shapeFlag:0,be=R.children,{patchFlag:me,shapeFlag:ye}=R;if(me>0){if(me&128){Y(de,be,L,U,q,Q,ge,ue,le);return}else if(me&256){ne(de,be,L,U,q,Q,ge,ue,le);return}}ye&8?(ke&16&&G(de,q,Q),be!==de&&u(L,be)):ke&16?ye&16?Y(de,be,L,U,q,Q,ge,ue,le):G(de,q,Q,!0):(ke&8&&u(L,""),ye&16&&A(be,L,U,q,Q,ge,ue,le))},ne=(S,R,L,U,q,Q,ge,ue,le)=>{S=S||qa,R=R||qa;const de=S.length,ke=R.length,be=Math.min(de,ke);let me;for(me=0;me<be;me++){const ye=R[me]=le?Ma(R[me]):ia(R[me]);f(S[me],ye,L,null,q,Q,ge,ue,le)}de>ke?G(S,q,Q,!0,!1,be):A(R,L,U,q,Q,ge,ue,le,be)},Y=(S,R,L,U,q,Q,ge,ue,le)=>{let de=0;const ke=R.length;let be=S.length-1,me=ke-1;for(;de<=be&&de<=me;){const ye=S[de],Ce=R[de]=le?Ma(R[de]):ia(R[de]);if(za(ye,Ce))f(ye,Ce,L,null,q,Q,ge,ue,le);else break;de++}for(;de<=be&&de<=me;){const ye=S[be],Ce=R[me]=le?Ma(R[me]):ia(R[me]);if(za(ye,Ce))f(ye,Ce,L,null,q,Q,ge,ue,le);else break;be--,me--}if(de>be){if(de<=me){const ye=me+1,Ce=ye<ke?R[ye].el:U;for(;de<=me;)f(null,R[de]=le?Ma(R[de]):ia(R[de]),L,Ce,q,Q,ge,ue,le),de++}}else if(de>me)for(;de<=be;)se(S[de],q,Q,!0),de++;else{const ye=de,Ce=de,_e=new Map;for(de=Ce;de<=me;de++){const Fe=R[de]=le?Ma(R[de]):ia(R[de]);Fe.key!=null&&_e.set(Fe.key,de)}let Se,$e=0;const Ne=me-Ce+1;let Oe=!1,We=0;const ht=new Array(Ne);for(de=0;de<Ne;de++)ht[de]=0;for(de=ye;de<=be;de++){const Fe=S[de];if($e>=Ne){se(Fe,q,Q,!0);continue}let st;if(Fe.key!=null)st=_e.get(Fe.key);else for(Se=Ce;Se<=me;Se++)if(ht[Se-Ce]===0&&za(Fe,R[Se])){st=Se;break}st===void 0?se(Fe,q,Q,!0):(ht[st-Ce]=de+1,st>=We?We=st:Oe=!0,f(Fe,R[st],L,null,q,Q,ge,ue,le),$e++)}const at=Oe?Vu(ht):qa;for(Se=at.length-1,de=Ne-1;de>=0;de--){const Fe=Ce+de,st=R[Fe],zt=R[Fe+1],Ge=Fe+1<ke?zt.el||zt.placeholder:U;ht[de]===0?f(null,st,L,Ge,q,Q,ge,ue,le):Oe&&(Se<0||de!==at[Se]?re(st,L,Ge,2):Se--)}}},re=(S,R,L,U,q=null)=>{const{el:Q,type:ge,transition:ue,children:le,shapeFlag:de}=S;if(de&6){re(S.component.subTree,R,L,U);return}if(de&128){S.suspense.move(R,L,U);return}if(de&64){ge.move(S,R,L,oe);return}if(ge===pe){o(Q,R,L);for(let be=0;be<le.length;be++)re(le[be],R,L,U);o(S.anchor,R,L);return}if(ge===Wn){E(S,R,L);return}if(U!==2&&de&1&&ue)if(U===0)ue.beforeEnter(Q),o(Q,R,L),Mt(()=>ue.enter(Q),q);else{const{leave:be,delayLeave:me,afterLeave:ye}=ue,Ce=()=>{S.ctx.isUnmounted?r(Q):o(Q,R,L)},_e=()=>{Q._isLeaving&&Q[ha](!0),be(Q,()=>{Ce(),ye&&ye()})};me?me(Q,Ce,_e):_e()}else o(Q,R,L)},se=(S,R,L,U=!1,q=!1)=>{const{type:Q,props:ge,ref:ue,children:le,dynamicChildren:de,shapeFlag:ke,patchFlag:be,dirs:me,cacheIndex:ye}=S;if(be===-2&&(q=!1),ue!=null&&(na(),Do(ue,null,L,S,!0),sa()),ye!=null&&(R.renderCache[ye]=void 0),ke&256){R.ctx.deactivate(S);return}const Ce=ke&1&&me,_e=!ao(S);let Se;if(_e&&(Se=ge&&ge.onVnodeBeforeUnmount)&&ca(Se,R,S),ke&6)V(S.component,L,U);else{if(ke&128){S.suspense.unmount(L,U);return}Ce&&Ha(S,null,R,"beforeUnmount"),ke&64?S.type.remove(S,R,L,oe,U):de&&!de.hasOnce&&(Q!==pe||be>0&&be&64)?G(de,R,L,!1,!0):(Q===pe&&be&384||!q&&ke&16)&&G(le,R,L),U&&fe(S)}(_e&&(Se=ge&&ge.onVnodeUnmounted)||Ce)&&Mt(()=>{Se&&ca(Se,R,S),Ce&&Ha(S,null,R,"unmounted")},L)},fe=S=>{const{type:R,el:L,anchor:U,transition:q}=S;if(R===pe){ce(L,U);return}if(R===Wn){T(S);return}const Q=()=>{r(L),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(S.shapeFlag&1&&q&&!q.persisted){const{leave:ge,delayLeave:ue}=q,le=()=>ge(L,Q);ue?ue(S.el,Q,le):le()}else Q()},ce=(S,R)=>{let L;for(;S!==R;)L=m(S),r(S),S=L;r(R)},V=(S,R,L)=>{const{bum:U,scope:q,job:Q,subTree:ge,um:ue,m:le,a:de}=S;li(le),li(de),U&&dr(U),q.stop(),Q&&(Q.flags|=8,se(ge,S,R,L)),ue&&Mt(ue,R),Mt(()=>{S.isUnmounted=!0},R)},G=(S,R,L,U=!1,q=!1,Q=0)=>{for(let ge=Q;ge<S.length;ge++)se(S[ge],R,L,U,q)},M=S=>{if(S.shapeFlag&6)return M(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const R=m(S.anchor||S.el),L=R&&R[Cl];return L?m(L):R};let B=!1;const K=(S,R,L)=>{S==null?R._vnode&&se(R._vnode,null,null,!0):f(R._vnode||null,S,R,null,null,null,L),R._vnode=S,B||(B=!0,wl(),kl(),B=!1)},oe={p:f,um:se,m:re,r:fe,mt:v,mc:A,pc:X,pbc:z,n:M,o:e};return{render:K,hydrate:void 0,createApp:Iu(K)}}function Fn({type:e,props:t},a){return a==="svg"&&e==="foreignObject"||a==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:a}function Wa({effect:e,job:t},a){a?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Uu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Hn(e,t,a=!1){const o=e.children,r=t.children;if(De(o)&&De(r))for(let n=0;n<o.length;n++){const l=o[n];let i=r[n];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=r[n]=Ma(r[n]),i.el=l.el),!a&&i.patchFlag!==-2&&Hn(l,i)),i.type===Lr&&i.patchFlag!==-1&&(i.el=l.el),i.type===kt&&!i.el&&(i.el=l.el)}}function Vu(e){const t=e.slice(),a=[0];let o,r,n,l,i;const s=e.length;for(o=0;o<s;o++){const c=e[o];if(c!==0){if(r=a[a.length-1],e[r]<c){t[o]=r,a.push(o);continue}for(n=0,l=a.length-1;n<l;)i=n+l>>1,e[a[i]]<c?n=i+1:l=i;c<e[a[n]]&&(n>0&&(t[o]=a[n-1]),a[n]=o)}}for(n=a.length,l=a[n-1];n-- >0;)a[n]=l,l=t[l];return a}function si(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:si(t)}function li(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ku=Symbol.for("v-scx"),qu=()=>Dr(Ku);function Ae(e,t,a){return ii(e,t,a)}function ii(e,t,a=Ye){const{immediate:o,deep:r,flush:n,once:l}=a,i=pt({},a),s=t&&o||!t&&n!=="post";let c;if(ro){if(n==="sync"){const p=qu();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!s){const p=()=>{};return p.stop=ra,p.resume=ra,p.pause=ra,p}}const u=bt;i.call=(p,d,f)=>Zt(p,u,d,f);let h=!1;n==="post"?i.scheduler=p=>{Mt(p,u&&u.suspense)}:n!=="sync"&&(h=!0,i.scheduler=(p,d)=>{d?p():Cn(p)}),i.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const m=eu(e,t,i);return ro&&(c?c.push(m):s&&m()),m}function Gu(e,t,a){const o=this.proxy,r=nt(e)?e.includes(".")?ci(o,e):()=>o[e]:e.bind(o,o);let n;Ie(t)?n=t:(n=t.handler,a=t);const l=Po(this),i=ii(r,n.bind(o),a);return l(),i}function ci(e,t){const a=t.split(".");return()=>{let o=e;for(let r=0;r<a.length&&o;r++)o=o[a[r]];return o}}const Ju=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Vt(t)}Modifiers`]||e[`${xa(t)}Modifiers`];function Yu(e,t,...a){if(e.isUnmounted)return;const o=e.vnode.props||Ye;let r=a;const n=t.startsWith("update:"),l=n&&Ju(o,t.slice(7));l&&(l.trim&&(r=a.map(u=>nt(u)?u.trim():u)),l.number&&(r=a.map(ur)));let i,s=o[i=dn(t)]||o[i=dn(Vt(t))];!s&&n&&(s=o[i=dn(xa(t))]),s&&Zt(s,e,6,r);const c=o[i+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,Zt(c,e,6,r)}}function di(e,t,a=!1){const o=t.emitsCache,r=o.get(e);if(r!==void 0)return r;const n=e.emits;let l={},i=!1;if(!Ie(e)){const s=c=>{const u=di(c,t,!0);u&&(i=!0,pt(l,u))};!a&&t.mixins.length&&t.mixins.forEach(s),e.extends&&s(e.extends),e.mixins&&e.mixins.forEach(s)}return!n&&!i?(Ze(e)&&o.set(e,null),null):(De(n)?n.forEach(s=>l[s]=null):pt(l,n),Ze(e)&&o.set(e,l),l)}function Er(e,t){return!e||!sr(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ke(e,t[0].toLowerCase()+t.slice(1))||Ke(e,xa(t))||Ke(e,t))}function PC(){}function ui(e){const{type:t,vnode:a,proxy:o,withProxy:r,propsOptions:[n],slots:l,attrs:i,emit:s,render:c,renderCache:u,props:h,data:m,setupState:p,ctx:d,inheritAttrs:f}=e,y=Cr(e);let C,$;try{if(a.shapeFlag&4){const T=r||o,P=T;C=ia(c.call(P,T,u,h,p,m,d)),$=i}else{const T=t;C=ia(T.length>1?T(h,{attrs:i,slots:l,emit:s}):T(h,null)),$=t.props?i:Zu(i)}}catch(T){Io.length=0,$o(T,e,1),C=Me(kt)}let E=C;if($&&f!==!1){const T=Object.keys($),{shapeFlag:P}=E;T.length&&P&7&&(n&&T.some(sn)&&($=Xu($,n)),E=Ta(E,$,!1,!0))}return a.dirs&&(E=Ta(E,null,!1,!0),E.dirs=E.dirs?E.dirs.concat(a.dirs):a.dirs),a.transition&&Ao(E,a.transition),C=E,Cr(y),C}const Zu=e=>{let t;for(const a in e)(a==="class"||a==="style"||sr(a))&&((t||(t={}))[a]=e[a]);return t},Xu=(e,t)=>{const a={};for(const o in e)(!sn(o)||!(o.slice(9)in t))&&(a[o]=e[o]);return a};function Qu(e,t,a){const{props:o,children:r,component:n}=e,{props:l,children:i,patchFlag:s}=t,c=n.emitsOptions;if(t.dirs||t.transition)return!0;if(a&&s>=0){if(s&1024)return!0;if(s&16)return o?fi(o,l,c):!!l;if(s&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const m=u[h];if(l[m]!==o[m]&&!Er(c,m))return!0}}}else return(r||i)&&(!i||!i.$stable)?!0:o===l?!1:o?l?fi(o,l,c):!0:!!l;return!1}function fi(e,t,a){const o=Object.keys(t);if(o.length!==Object.keys(e).length)return!0;for(let r=0;r<o.length;r++){const n=o[r];if(t[n]!==e[n]&&!Er(a,n))return!0}return!1}function ef({vnode:e,parent:t},a){for(;t;){const o=t.subTree;if(o.suspense&&o.suspense.activeBranch===e&&(o.el=e.el),o===e)(e=t.vnode).el=a,t=t.parent;else break}}const gi=e=>e.__isSuspense;function tf(e,t){t&&t.pendingBranch?De(e)?t.effects.push(...e):t.effects.push(e):lu(e)}const pe=Symbol.for("v-fgt"),Lr=Symbol.for("v-txt"),kt=Symbol.for("v-cmt"),Wn=Symbol.for("v-stc"),Io=[];let Ht=null;function k(e=!1){Io.push(Ht=e?null:[])}function af(){Io.pop(),Ht=Io[Io.length-1]||null}let Bo=1;function pi(e,t=!1){Bo+=e,e<0&&Ht&&t&&(Ht.hasOnce=!0)}function hi(e){return e.dynamicChildren=Bo>0?Ht||qa:null,af(),Bo>0&&Ht&&Ht.push(e),e}function _(e,t,a,o,r,n){return hi(g(e,t,a,o,r,n,!0))}function lt(e,t,a,o,r){return hi(Me(e,t,a,o,r,!0))}function Oo(e){return e?e.__v_isVNode===!0:!1}function za(e,t){return e.type===t.type&&e.key===t.key}const mi=({key:e})=>e??null,Nr=({ref:e,ref_key:t,ref_for:a})=>(typeof e=="number"&&(e=""+e),e!=null?nt(e)||dt(e)||Ie(e)?{i:vt,r:e,k:t,f:!!a}:e:null);function g(e,t=null,a=null,o=0,r=null,n=e===pe?0:1,l=!1,i=!1){const s={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&mi(t),ref:t&&Nr(t),scopeId:xl,slotScopeIds:null,children:a,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:o,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:vt};return i?(zn(s,a),n&128&&e.normalize(s)):a&&(s.shapeFlag|=nt(a)?8:16),Bo>0&&!l&&Ht&&(s.patchFlag>0||n&6)&&s.patchFlag!==32&&Ht.push(s),s}const Me=of;function of(e,t=null,a=null,o=0,r=null,n=!1){if((!e||e===Wl)&&(e=kt),Oo(e)){const i=Ta(e,t,!0);return a&&zn(i,a),Bo>0&&!n&&Ht&&(i.shapeFlag&6?Ht[Ht.indexOf(e)]=i:Ht.push(i)),i.patchFlag=-2,i}if(hf(e)&&(e=e.__vccOpts),t){t=rf(t);let{class:i,style:s}=t;i&&!nt(i)&&(t.class=Be(i)),Ze(s)&&(_n(s)&&!De(s)&&(s=pt({},s)),t.style=Ee(s))}const l=nt(e)?1:gi(e)?128:Sl(e)?64:Ze(e)?4:Ie(e)?2:0;return g(e,t,a,o,r,l,n,!0)}function rf(e){return e?_n(e)||Ql(e)?pt({},e):e:null}function Ta(e,t,a=!1,o=!1){const{props:r,ref:n,patchFlag:l,children:i,transition:s}=e,c=t?vi(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&mi(c),ref:t&&t.ref?a&&n?De(n)?n.concat(Nr(t)):[n,Nr(t)]:Nr(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pe?l===-1?16:l|16:l,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:s,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ta(e.ssContent),ssFallback:e.ssFallback&&Ta(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return s&&o&&Ao(u,s.clone(u)),u}function Pe(e=" ",t=0){return Me(Lr,null,e,t)}function ae(e="",t=!1){return t?(k(),lt(kt,null,e)):Me(kt,null,e)}function ia(e){return e==null||typeof e=="boolean"?Me(kt):De(e)?Me(pe,null,e.slice()):Oo(e)?Ma(e):Me(Lr,null,String(e))}function Ma(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ta(e)}function zn(e,t){let a=0;const{shapeFlag:o}=e;if(t==null)t=null;else if(De(t))a=16;else if(typeof t=="object")if(o&65){const r=t.default;r&&(r._c&&(r._d=!1),zn(e,r()),r._c&&(r._d=!0));return}else{a=32;const r=t._;!r&&!Ql(t)?t._ctx=vt:r===3&&vt&&(vt.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ie(t)?(t={default:t,_ctx:vt},a=32):(t=String(t),o&64?(a=16,t=[Pe(t)]):a=8);e.children=t,e.shapeFlag|=a}function vi(...e){const t={};for(let a=0;a<e.length;a++){const o=e[a];for(const r in o)if(r==="class")t.class!==o.class&&(t.class=Be([t.class,o.class]));else if(r==="style")t.style=Ee([t.style,o.style]);else if(sr(r)){const n=t[r],l=o[r];l&&n!==l&&!(De(n)&&n.includes(l))&&(t[r]=n?[].concat(n,l):l)}else r!==""&&(t[r]=o[r])}return t}function ca(e,t,a,o=null){Zt(e,t,7,[a,o])}const nf=Yl();let sf=0;function lf(e,t,a){const o=e.type,r=(t?t.appContext:e.appContext)||nf,n={uid:sf++,vnode:e,type:o,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _d(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ti(o,r),emitsOptions:di(o,r),emit:null,emitted:null,propsDefaults:Ye,inheritAttrs:o.inheritAttrs,ctx:Ye,data:Ye,props:Ye,attrs:Ye,slots:Ye,refs:Ye,setupState:Ye,setupContext:null,suspense:a,suspenseId:a?a.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=t?t.root:n,n.emit=Yu.bind(null,n),e.ce&&e.ce(n),n}let bt=null;const Ir=()=>bt||vt;let Br,Rn;{const e=fr(),t=(a,o)=>{let r;return(r=e[a])||(r=e[a]=[]),r.push(o),n=>{r.length>1?r.forEach(l=>l(n)):r[0](n)}};Br=t("__VUE_INSTANCE_SETTERS__",a=>bt=a),Rn=t("__VUE_SSR_SETTERS__",a=>ro=a)}const Po=e=>{const t=bt;return Br(e),e.scope.on(),()=>{e.scope.off(),Br(t)}},bi=()=>{bt&&bt.scope.off(),Br(null)};function yi(e){return e.vnode.shapeFlag&4}let ro=!1;function cf(e,t=!1,a=!1){t&&Rn(t);const{props:o,children:r}=e.vnode,n=yi(e);Ou(e,o,n,t),Wu(e,r,a||t);const l=n?df(e,t):void 0;return t&&Rn(!1),l}function df(e,t){const a=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Tu);const{setup:o}=a;if(o){na();const r=e.setupContext=o.length>1?ff(e):null,n=Po(e),l=Xa(o,e,0,[e.props,r]),i=js(l);if(sa(),n(),(i||e.sp)&&!ao(e)&&Mn(e),i){if(l.then(bi,bi),t)return l.then(s=>{wi(e,s)}).catch(s=>{$o(s,e,0)});e.asyncDep=l}else wi(e,l)}else ki(e)}function wi(e,t,a){Ie(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Ze(t)&&(e.setupState=ml(t)),ki(e)}function ki(e,t,a){const o=e.type;e.render||(e.render=o.render||ra);{const r=Po(e);na();try{Mu(e)}finally{sa(),r()}}}const uf={get(e,t){return yt(e,"get",""),e[t]}};function ff(e){const t=a=>{e.exposed=a||{}};return{attrs:new Proxy(e.attrs,uf),slots:e.slots,emit:e.emit,expose:t}}function Or(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(ml(Ud(e.exposed)),{get(t,a){if(a in t)return t[a];if(a in Lo)return Lo[a](e)},has(t,a){return a in t||a in Lo}})):e.proxy}const gf=/(?:^|[-_])(\w)/g,pf=e=>e.replace(gf,t=>t.toUpperCase()).replace(/[-_]/g,"");function _i(e,t=!0){return Ie(e)?e.displayName||e.name:e.name||t&&e.__name}function xi(e,t,a=!1){let o=_i(t);if(!o&&t.__file){const r=t.__file.match(/([^/\\]+)\.\w+$/);r&&(o=r[1])}if(!o&&e&&e.parent){const r=n=>{for(const l in n)if(n[l]===t)return l};o=r(e.components||e.parent.type.components)||r(e.appContext.components)}return o?pf(o):a?"App":"Anonymous"}function hf(e){return Ie(e)&&"__vccOpts"in e}const N=(e,t)=>Xd(e,t,ro);function Lt(e,t,a){const o=arguments.length;return o===2?Ze(t)&&!De(t)?Oo(t)?Me(e,null,[t]):Me(e,t):Me(e,null,t):(o>3?a=Array.prototype.slice.call(arguments,2):o===3&&Oo(a)&&(a=[a]),Me(e,t,a))}const mf="3.5.20";/**
* @vue/runtime-dom v3.5.20
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let jn;const Ci=typeof window<"u"&&window.trustedTypes;if(Ci)try{jn=Ci.createPolicy("vue",{createHTML:e=>e})}catch{}const Si=jn?e=>jn.createHTML(e):e=>e,vf="http://www.w3.org/2000/svg",bf="http://www.w3.org/1998/Math/MathML",va=typeof document<"u"?document:null,$i=va&&va.createElement("template"),yf={insert:(e,t,a)=>{t.insertBefore(e,a||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,a,o)=>{const r=t==="svg"?va.createElementNS(vf,e):t==="mathml"?va.createElementNS(bf,e):a?va.createElement(e,{is:a}):va.createElement(e);return e==="select"&&o&&o.multiple!=null&&r.setAttribute("multiple",o.multiple),r},createText:e=>va.createTextNode(e),createComment:e=>va.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>va.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,a,o,r,n){const l=a?a.previousSibling:t.lastChild;if(r&&(r===n||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),a),!(r===n||!(r=r.nextSibling)););else{$i.innerHTML=Si(o==="svg"?`<svg>${e}</svg>`:o==="mathml"?`<math>${e}</math>`:e);const i=$i.content;if(o==="svg"||o==="mathml"){const s=i.firstChild;for(;s.firstChild;)i.appendChild(s.firstChild);i.removeChild(s)}t.insertBefore(i,a)}return[l?l.nextSibling:t.firstChild,a?a.previousSibling:t.lastChild]}},Aa="transition",Fo="animation",Ho=Symbol("_vtc"),Ti={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},wf=pt({},El,Ti),kf=(e=>(e.displayName="Transition",e.props=wf,e))((e,{slots:t})=>Lt(fu,_f(e),t)),Ra=(e,t=[])=>{De(e)?e.forEach(a=>a(...t)):e&&e(...t)},Mi=e=>e?De(e)?e.some(t=>t.length>1):e.length>1:!1;function _f(e){const t={};for(const H in e)H in Ti||(t[H]=e[H]);if(e.css===!1)return t;const{name:a="v",type:o,duration:r,enterFromClass:n=`${a}-enter-from`,enterActiveClass:l=`${a}-enter-active`,enterToClass:i=`${a}-enter-to`,appearFromClass:s=n,appearActiveClass:c=l,appearToClass:u=i,leaveFromClass:h=`${a}-leave-from`,leaveActiveClass:m=`${a}-leave-active`,leaveToClass:p=`${a}-leave-to`}=e,d=xf(r),f=d&&d[0],y=d&&d[1],{onBeforeEnter:C,onEnter:$,onEnterCancelled:E,onLeave:T,onLeaveCancelled:P,onBeforeAppear:I=C,onAppear:w=$,onAppearCancelled:A=E}=t,O=(H,x,v,b)=>{H._enterCancelled=b,ja(H,x?u:i),ja(H,x?c:l),v&&v()},z=(H,x)=>{H._isLeaving=!1,ja(H,h),ja(H,p),ja(H,m),x&&x()},J=H=>(x,v)=>{const b=H?w:$,j=()=>O(x,H,v);Ra(b,[x,j]),Ai(()=>{ja(x,H?s:n),ba(x,H?u:i),Mi(b)||Di(x,o,f,j)})};return pt(t,{onBeforeEnter(H){Ra(C,[H]),ba(H,n),ba(H,l)},onBeforeAppear(H){Ra(I,[H]),ba(H,s),ba(H,c)},onEnter:J(!1),onAppear:J(!0),onLeave(H,x){H._isLeaving=!0;const v=()=>z(H,x);ba(H,h),H._enterCancelled?(ba(H,m),Ni()):(Ni(),ba(H,m)),Ai(()=>{H._isLeaving&&(ja(H,h),ba(H,p),Mi(T)||Di(H,o,y,v))}),Ra(T,[H,v])},onEnterCancelled(H){O(H,!1,void 0,!0),Ra(E,[H])},onAppearCancelled(H){O(H,!0,void 0,!0),Ra(A,[H])},onLeaveCancelled(H){z(H),Ra(P,[H])}})}function xf(e){if(e==null)return null;if(Ze(e))return[Un(e.enter),Un(e.leave)];{const t=Un(e);return[t,t]}}function Un(e){return pd(e)}function ba(e,t){t.split(/\s+/).forEach(a=>a&&e.classList.add(a)),(e[Ho]||(e[Ho]=new Set)).add(t)}function ja(e,t){t.split(/\s+/).forEach(o=>o&&e.classList.remove(o));const a=e[Ho];a&&(a.delete(t),a.size||(e[Ho]=void 0))}function Ai(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Cf=0;function Di(e,t,a,o){const r=e._endId=++Cf,n=()=>{r===e._endId&&o()};if(a!=null)return setTimeout(n,a);const{type:l,timeout:i,propCount:s}=Sf(e,t);if(!l)return o();const c=l+"end";let u=0;const h=()=>{e.removeEventListener(c,m),n()},m=p=>{p.target===e&&++u>=s&&h()};setTimeout(()=>{u<s&&h()},i+1),e.addEventListener(c,m)}function Sf(e,t){const a=window.getComputedStyle(e),o=d=>(a[d]||"").split(", "),r=o(`${Aa}Delay`),n=o(`${Aa}Duration`),l=Ei(r,n),i=o(`${Fo}Delay`),s=o(`${Fo}Duration`),c=Ei(i,s);let u=null,h=0,m=0;t===Aa?l>0&&(u=Aa,h=l,m=n.length):t===Fo?c>0&&(u=Fo,h=c,m=s.length):(h=Math.max(l,c),u=h>0?l>c?Aa:Fo:null,m=u?u===Aa?n.length:s.length:0);const p=u===Aa&&/\b(transform|all)(,|$)/.test(o(`${Aa}Property`).toString());return{type:u,timeout:h,propCount:m,hasTransform:p}}function Ei(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((a,o)=>Li(a)+Li(e[o])))}function Li(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Ni(){return document.body.offsetHeight}function $f(e,t,a){const o=e[Ho];o&&(t=(t?[t,...o]:[...o]).join(" ")),t==null?e.removeAttribute("class"):a?e.setAttribute("class",t):e.className=t}const Pr=Symbol("_vod"),Ii=Symbol("_vsh"),Bi={name:"show",beforeMount(e,{value:t},{transition:a}){e[Pr]=e.style.display==="none"?"":e.style.display,a&&t?a.beforeEnter(e):Wo(e,t)},mounted(e,{value:t},{transition:a}){a&&t&&a.enter(e)},updated(e,{value:t,oldValue:a},{transition:o}){!t!=!a&&(o?t?(o.beforeEnter(e),Wo(e,!0),o.enter(e)):o.leave(e,()=>{Wo(e,!1)}):Wo(e,t))},beforeUnmount(e,{value:t}){Wo(e,t)}};function Wo(e,t){e.style.display=t?e[Pr]:"none",e[Ii]=!t}const Tf=Symbol(""),Mf=/(^|;)\s*display\s*:/;function Af(e,t,a){const o=e.style,r=nt(a);let n=!1;if(a&&!r){if(t)if(nt(t))for(const l of t.split(";")){const i=l.slice(0,l.indexOf(":")).trim();a[i]==null&&Fr(o,i,"")}else for(const l in t)a[l]==null&&Fr(o,l,"");for(const l in a)l==="display"&&(n=!0),Fr(o,l,a[l])}else if(r){if(t!==a){const l=o[Tf];l&&(a+=";"+l),o.cssText=a,n=Mf.test(a)}}else t&&e.removeAttribute("style");Pr in e&&(e[Pr]=n?o.display:"",e[Ii]&&(o.display="none"))}const Oi=/\s*!important$/;function Fr(e,t,a){if(De(a))a.forEach(o=>Fr(e,t,o));else if(a==null&&(a=""),t.startsWith("--"))e.setProperty(t,a);else{const o=Df(e,t);Oi.test(a)?e.setProperty(xa(o),a.replace(Oi,""),"important"):e[o]=a}}const Pi=["Webkit","Moz","ms"],Vn={};function Df(e,t){const a=Vn[t];if(a)return a;let o=Vt(t);if(o!=="filter"&&o in e)return Vn[t]=o;o=cr(o);for(let r=0;r<Pi.length;r++){const n=Pi[r]+o;if(n in e)return Vn[t]=n}return t}const Fi="http://www.w3.org/1999/xlink";function Hi(e,t,a,o,r,n=yd(t)){o&&t.startsWith("xlink:")?a==null?e.removeAttributeNS(Fi,t.slice(6,t.length)):e.setAttributeNS(Fi,t,a):a==null||n&&!Gs(a)?e.removeAttribute(t):e.setAttribute(t,n?"":Jt(a)?String(a):a)}function Wi(e,t,a,o,r){if(t==="innerHTML"||t==="textContent"){a!=null&&(e[t]=t==="innerHTML"?Si(a):a);return}const n=e.tagName;if(t==="value"&&n!=="PROGRESS"&&!n.includes("-")){const i=n==="OPTION"?e.getAttribute("value")||"":e.value,s=a==null?e.type==="checkbox"?"on":"":String(a);(i!==s||!("_value"in e))&&(e.value=s),a==null&&e.removeAttribute(t),e._value=a;return}let l=!1;if(a===""||a==null){const i=typeof e[t];i==="boolean"?a=Gs(a):a==null&&i==="string"?(a="",l=!0):i==="number"&&(a=0,l=!0)}try{e[t]=a}catch{}l&&e.removeAttribute(r||t)}function Ua(e,t,a,o){e.addEventListener(t,a,o)}function Ef(e,t,a,o){e.removeEventListener(t,a,o)}const zi=Symbol("_vei");function Lf(e,t,a,o,r=null){const n=e[zi]||(e[zi]={}),l=n[t];if(o&&l)l.value=o;else{const[i,s]=Nf(t);if(o){const c=n[t]=Of(o,r);Ua(e,i,c,s)}else l&&(Ef(e,i,l,s),n[t]=void 0)}}const Ri=/(?:Once|Passive|Capture)$/;function Nf(e){let t;if(Ri.test(e)){t={};let o;for(;o=e.match(Ri);)e=e.slice(0,e.length-o[0].length),t[o[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):xa(e.slice(2)),t]}let Kn=0;const If=Promise.resolve(),Bf=()=>Kn||(If.then(()=>Kn=0),Kn=Date.now());function Of(e,t){const a=o=>{if(!o._vts)o._vts=Date.now();else if(o._vts<=a.attached)return;Zt(Pf(o,a.value),t,5,[o])};return a.value=e,a.attached=Bf(),a}function Pf(e,t){if(De(t)){const a=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{a.call(e),e._stopped=!0},t.map(o=>r=>!r._stopped&&o&&o(r))}else return t}const ji=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ff=(e,t,a,o,r,n)=>{const l=r==="svg";t==="class"?$f(e,o,l):t==="style"?Af(e,a,o):sr(t)?sn(t)||Lf(e,t,a,o,n):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Hf(e,t,o,l))?(Wi(e,t,o),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Hi(e,t,o,l,n,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!nt(o))?Wi(e,Vt(t),o,n,t):(t==="true-value"?e._trueValue=o:t==="false-value"&&(e._falseValue=o),Hi(e,t,o,l))};function Hf(e,t,a,o){if(o)return!!(t==="innerHTML"||t==="textContent"||t in e&&ji(t)&&Ie(a));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return ji(t)&&nt(a)?!1:t in e}const Hr=e=>{const t=e.props["onUpdate:modelValue"]||!1;return De(t)?a=>dr(t,a):t};function Wf(e){e.target.composing=!0}function Ui(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const no=Symbol("_assign"),Vi={created(e,{modifiers:{lazy:t,trim:a,number:o}},r){e[no]=Hr(r);const n=o||r.props&&r.props.type==="number";Ua(e,t?"change":"input",l=>{if(l.target.composing)return;let i=e.value;a&&(i=i.trim()),n&&(i=ur(i)),e[no](i)}),a&&Ua(e,"change",()=>{e.value=e.value.trim()}),t||(Ua(e,"compositionstart",Wf),Ua(e,"compositionend",Ui),Ua(e,"change",Ui))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:a,modifiers:{lazy:o,trim:r,number:n}},l){if(e[no]=Hr(l),e.composing)return;const i=(n||e.type==="number")&&!/^0\d/.test(e.value)?ur(e.value):e.value,s=t??"";i!==s&&(document.activeElement===e&&e.type!=="range"&&(o&&t===a||r&&e.value.trim()===s)||(e.value=s))}},Ki={deep:!0,created(e,{value:t,modifiers:{number:a}},o){const r=lr(t);Ua(e,"change",()=>{const n=Array.prototype.filter.call(e.options,l=>l.selected).map(l=>a?ur(Wr(l)):Wr(l));e[no](e.multiple?r?new Set(n):n:n[0]),e._assigning=!0,Xt(()=>{e._assigning=!1})}),e[no]=Hr(o)},mounted(e,{value:t}){qi(e,t)},beforeUpdate(e,t,a){e[no]=Hr(a)},updated(e,{value:t}){e._assigning||qi(e,t)}};function qi(e,t){const a=e.multiple,o=De(t);if(!(a&&!o&&!lr(t))){for(let r=0,n=e.options.length;r<n;r++){const l=e.options[r],i=Wr(l);if(a)if(o){const s=typeof i;s==="string"||s==="number"?l.selected=t.some(c=>String(c)===String(i)):l.selected=kd(t,i)>-1}else l.selected=t.has(i);else if(gr(Wr(l),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!a&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Wr(e){return"_value"in e?e._value:e.value}const zf=["ctrl","shift","alt","meta"],Rf={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>zf.some(a=>e[`${a}Key`]&&!t.includes(a))},it=(e,t)=>{const a=e._withMods||(e._withMods={}),o=t.join(".");return a[o]||(a[o]=(r,...n)=>{for(let l=0;l<t.length;l++){const i=Rf[t[l]];if(i&&i(r,t))return}return e(r,...n)})},jf={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},so=(e,t)=>{const a=e._withKeys||(e._withKeys={}),o=t.join(".");return a[o]||(a[o]=r=>{if(!("key"in r))return;const n=xa(r.key);if(t.some(l=>l===n||jf[l]===n))return e(r)})},Uf=pt({patchProp:Ff},yf);let Gi;function Vf(){return Gi||(Gi=Ru(Uf))}const Kf=(...e)=>{const t=Vf().createApp(...e),{mount:a}=t;return t.mount=o=>{const r=Gf(o);if(!r)return;const n=t._component;!Ie(n)&&!n.render&&!n.template&&(n.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const l=a(r,!1,qf(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),l},t};function qf(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Gf(e){return nt(e)?document.querySelector(e):e}const Jf=Le({name:"NcAppContent",props:{appName:{type:String,default:""},showNavigation:{type:Boolean,default:!0}},setup(e,{slots:t,attrs:a}){return()=>{const o=e.showNavigation!==!1,r={...a,class:[a.class,"app-content",o?null:"app-content--navigation-hidden"]},n={class:"app-content__navigation","aria-label":e.appName||"App navigation","aria-hidden":o?"false":"true"};return Lt("div",r,[Lt("aside",n,t.navigation?t.navigation():[]),Lt("section",{class:"app-content__main",role:"main"},t.default?t.default():[])])}}}),Yf=Le({name:"NcAppNavigation",setup(e,{slots:t,attrs:a}){return()=>{const o={...a,class:[a.class,"app-navigation"]};"role"in o||(o.role="navigation");const r=[];return t.actions&&r.push(Lt("div",{class:"app-navigation__actions"},t.actions())),t.default&&r.push(...t.default()),Lt("nav",o,r)}}}),ut=Le({name:"NcButton",props:{type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(e,{emit:t,slots:a,attrs:o}){return()=>{const r={...o,class:[o.class,"btn",e.type],disabled:e.disabled,onClick:()=>t("click")};return"type"in r||(r.type="button"),Lt("button",r,a.default?a.default():[])}}}),Zf=Le({name:"NcEmptyContent",props:{name:{type:String,default:""},description:{type:String,default:""}},setup(e,{attrs:t}){return()=>Lt("div",{...t,class:[t.class,"card empty"]},[Lt("div",{class:"value"},e.name),Lt("div",{class:"hint"},e.description)])}}),Ji=Le({name:"NcCheckboxRadioSwitch",props:{type:{type:String,default:"checkbox"},name:{type:String,default:""},checked:{type:Boolean,default:!1}},emits:["update:checked"],setup(e,{emit:t,slots:a,attrs:o}){const r=l=>{var i;return t("update:checked",!!((i=l==null?void 0:l.target)!=null&&i.checked))},n={...o,class:[o.class,"nc-checkbox-radio-switch"]};return()=>Lt("label",n,[Lt("input",{type:e.type,name:e.name,checked:e.checked,onInput:r}),Lt("span",{},a.default?a.default():[])])}}),Xf=Le({name:"NcLoadingIcon",props:{size:{type:[String,Number],default:16}},setup(e,{attrs:t}){return()=>Lt("span",{...t,class:[t.class,"nc-loading-icon"],style:`width:${e.size}px;height:${e.size}px;border:2px solid var(--line);border-top-color:var(--brand);border-radius:50%;display:inline-block;animation:spin 1s linear infinite`})}}),Qf={id:"opsdash-sidebar-pane-profiles",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-profiles"},eg={class:"setup-actions"},tg={class:"preset-form"},ag=["disabled"],og={key:0,class:"preset-error"},rg={key:0,class:"preset-warnings"},ng={class:"preset-header"},sg={key:1,class:"preset-empty"},lg={key:2,class:"preset-list"},ig={class:"preset-meta"},cg={class:"preset-name"},dg={class:"preset-info"},ug={key:0},fg={class:"preset-actions"},gg=Le({__name:"SidebarProfilesPane",props:{presets:{},isLoading:{type:Boolean},isSaving:{type:Boolean},isApplying:{type:Boolean},warnings:{}},emits:["save","load","delete","refresh","clear-warnings","export-config","import-config"],setup(e,{emit:t}){const a=t,o=ie(""),r=ie(null),n=ie(null);function l(){const m=o.value.trim();if(!m){r.value="Enter a profile name";return}r.value=null,a("save",m),o.value=""}function i(m){a("load",m)}function s(m){window.confirm(`Delete profile "${m}"?`)&&a("delete",m)}function c(){var m;(m=n.value)==null||m.click()}function u(m){var f;const p=m.target,d=(f=p==null?void 0:p.files)==null?void 0:f[0];d&&a("import-config",d),p&&(p.value="")}function h(m){if(!m)return"";const p=new Date(m);if(Number.isNaN(p.getTime()))return m;const f=new Date().getTime()-p.getTime(),y=Math.round(f/6e4);if(y<1)return"just now";if(y<60)return`${y} min ago`;const C=Math.round(y/60);if(C<24)return`${C}h ago`;const $=Math.round(C/24);if($<7)return`${$}d ago`;const E=Math.round($/7);return E<5?`${E}w ago`:p.toLocaleDateString()}return(m,p)=>(k(),_("div",Qf,[p[11]||(p[11]=g("div",{class:"sb-title"},"Profiles",-1)),p[12]||(p[12]=g("p",{class:"sb-description"}," Export/import full configs or save/load named profiles (calendars, groups, targets, widgets, settings). ",-1)),g("div",eg,[Me(D(ut),{type:"tertiary",size:"small",onClick:p[0]||(p[0]=d=>a("export-config"))},{default:Xe(()=>[...p[4]||(p[4]=[Pe(" Export configuration ",-1)])]),_:1}),Me(D(ut),{type:"tertiary",size:"small",onClick:c},{default:Xe(()=>[...p[5]||(p[5]=[Pe(" Import configuration ",-1)])]),_:1}),g("input",{ref_key:"fileInput",ref:n,type:"file",accept:"application/json",class:"import-input",onChange:u},null,544)]),g("div",tg,[p[6]||(p[6]=g("label",{class:"preset-label",for:"preset-name"},"Profile name",-1)),to(g("input",{id:"preset-name","onUpdate:modelValue":p[1]||(p[1]=d=>o.value=d),type:"text",placeholder:"e.g. Focus week",disabled:m.isSaving,onKeyup:so(l,["enter"])},null,40,ag),[[Vi,o.value]]),r.value?(k(),_("div",og,W(r.value),1)):ae("",!0),Me(D(ut),{class:"preset-save",type:"primary",disabled:m.isSaving||!o.value.trim(),onClick:l},{default:Xe(()=>[Pe(W(m.isSaving?"Saving":"Save current configuration"),1)]),_:1},8,["disabled"])]),m.warnings.length?(k(),_("div",rg,[p[8]||(p[8]=g("div",{class:"warnings-title"},"Warnings",-1)),g("ul",null,[(k(!0),_(pe,null,xe(m.warnings,(d,f)=>(k(),_("li",{key:f},W(d),1))),128))]),Me(D(ut),{type:"tertiary",class:"preset-clear",onClick:p[2]||(p[2]=d=>a("clear-warnings"))},{default:Xe(()=>[...p[7]||(p[7]=[Pe(" Clear warnings ",-1)])]),_:1})])):ae("",!0),g("div",ng,[p[9]||(p[9]=g("h3",null,"Saved profiles",-1)),Me(D(ut),{type:"tertiary",disabled:m.isLoading,onClick:p[3]||(p[3]=d=>a("refresh"))},{default:Xe(()=>[Pe(W(m.isLoading?"Refreshing":"Refresh list"),1)]),_:1},8,["disabled"])]),!m.presets.length&&!m.isLoading?(k(),_("div",sg," No profiles yet. Save one above to get started. ")):(k(),_("ul",lg,[(k(!0),_(pe,null,xe(m.presets,d=>(k(),_("li",{key:d.name,class:"preset-item"},[g("div",ig,[g("div",cg,W(d.name),1),g("div",dg,[g("span",null,W(d.selectedCount)+" calendars",1),g("span",null,W(d.calendarCount)+" groups",1),d.updatedAt?(k(),_("span",ug,"Updated "+W(h(d.updatedAt)),1)):ae("",!0)])]),g("div",fg,[Me(D(ut),{type:"primary",disabled:m.isApplying,onClick:f=>i(d.name)},{default:Xe(()=>[Pe(W(m.isApplying?"Applying":"Load"),1)]),_:2},1032,["disabled","onClick"]),Me(D(ut),{type:"tertiary",disabled:m.isApplying,onClick:f=>s(d.name)},{default:Xe(()=>[...p[10]||(p[10]=[Pe(" Delete ",-1)])]),_:2},1032,["disabled","onClick"])])]))),128))]))]))}}),Qe=(e,t)=>{const a=e.__vccOpts||e;for(const[o,r]of t)a[o]=r;return a},pg=Qe(gg,[["__scopeId","data-v-de8b693e"]]),Yi=[{id:"navigation",title:"Navigation",items:[{id:"nav-prev",label:"Previous period",combo:["Alt",""],description:"Go to the previous week or month"},{id:"nav-next",label:"Next period",combo:["Alt",""],description:"Go to the next week or month"},{id:"nav-toggle-range",label:"Toggle week/month",combo:["Alt","Shift","R"],description:"Switch between week and month range"}]},{id:"notes",title:"Notes",items:[{id:"notes-save",label:"Save note",combo:["Ctrl / ","S"],description:"Persist the current note draft"}]},{id:"targets",title:"Targets",items:[{id:"targets-focus",label:"Open Theme",combo:["Alt","T"],description:"Jump to theme controls"}]},{id:"misc",title:"Misc",items:[{id:"shortcuts-open",label:"Open cheat sheet",combo:["?"],description:"Display this overlay"},{id:"widget-options",label:"Open widget options",combo:["Shift","C"],description:"Toggle options for the selected widget (edit mode)"},{id:"layout-edit",label:"Toggle edit layout",combo:["Shift","E"],description:"Enter or exit widget layout editing"}]}],hg={class:"rangebar",title:"Time range"},mg=["aria-label","title"],vg={class:"range-toggle"},bg={class:"range-nav"},yg={class:"range-dates"},wg={class:"range-refresh"},kg=["disabled"],_g={class:"sidebar-block sidebar-block--framed"},xg={class:"sb-actions sb-actions--secondary"},Cg={class:"onboarding-jumps"},Sg={key:0,class:"sidebar-block sidebar-block--framed"},$g={class:"sidebar-shortcuts sidebar-shortcuts--bottom"},Tg={key:0,class:"shortcuts-box",role:"region","aria-label":"Keyboard shortcuts"},Mg={class:"shortcuts-box__header"},Ag={class:"shortcuts-box__body"},Dg={class:"shortcuts-box__title"},Eg={class:"label"},Lg={class:"combo"},Ng={key:0,class:"desc"},Ig=Qe(Le({__name:"Sidebar",props:{isLoading:{type:Boolean},range:{},offset:{},from:{},to:{},navToggleLabel:{},navToggleIcon:{},presets:{},presetsLoading:{type:Boolean},presetSaving:{type:Boolean},presetApplying:{type:Boolean},presetWarnings:{},dashboardMode:{}},emits:["load","update:range","update:offset","toggle-nav","save-preset","load-preset","delete-preset","refresh-presets","clear-preset-warnings","rerun-onboarding","export-config","import-config"],setup(e,{emit:t}){const a=e,o=t,r=N(()=>a.presets??[]),n=ie(!1),l=Yi;return(i,s)=>(k(),lt(D(Yf),null,{default:Xe(()=>[$u(i.$slots,"actions",{},void 0,!0),g("div",hg,[g("button",{class:"sidebar-toggle-btn sidebar-toggle-btn--corner",type:"button",onClick:s[0]||(s[0]=c=>i.$emit("toggle-nav")),"aria-label":i.navToggleLabel,title:i.navToggleLabel},W(i.navToggleIcon),9,mg),g("div",vg,[Me(D(Ji),{type:"radio",name:"range-week",checked:i.range==="week","onUpdate:checked":s[1]||(s[1]=c=>{c&&i.$emit("update:range","week")})},{default:Xe(()=>[...s[21]||(s[21]=[Pe("Week",-1)])]),_:1},8,["checked"]),Me(D(Ji),{type:"radio",name:"range-month",checked:i.range==="month","onUpdate:checked":s[2]||(s[2]=c=>{c&&i.$emit("update:range","month")})},{default:Xe(()=>[...s[22]||(s[22]=[Pe("Month",-1)])]),_:1},8,["checked"])]),g("div",bg,[Me(D(ut),{class:"nav-btn",type:"tertiary",disabled:i.isLoading,onClick:s[3]||(s[3]=c=>i.$emit("update:offset",i.offset-1)),title:"Previous"},{default:Xe(()=>[...s[23]||(s[23]=[Pe("",-1)])]),_:1},8,["disabled"]),g("span",yg,W(i.from)+"  "+W(i.to),1),Me(D(ut),{class:"nav-btn",type:"tertiary",disabled:i.isLoading,onClick:s[4]||(s[4]=c=>i.$emit("update:offset",i.offset+1)),title:"Next"},{default:Xe(()=>[...s[24]||(s[24]=[Pe("",-1)])]),_:1},8,["disabled"])]),g("div",wg,[g("button",{class:"sidebar-action-btn",type:"button",disabled:i.isLoading,onClick:s[5]||(s[5]=c=>i.$emit("load"))}," Refresh ",8,kg)])]),g("div",_g,[s[26]||(s[26]=g("div",{class:"sb-title"},"Guided Setup",-1)),g("div",xg,[Me(D(ut),{type:"primary",size:"small",class:"rerun-btn",title:"Open the setup wizard again",onClick:s[6]||(s[6]=c=>i.$emit("rerun-onboarding"))},{default:Xe(()=>[...s[25]||(s[25]=[g("span",{class:"rerun-btn__icon","aria-hidden":"true"},"",-1),Pe(" Setup wizard ",-1)])]),_:1})]),s[27]||(s[27]=g("div",{class:"onboarding-help"}," Revisit the setup wizard to adjust your dashboard step by step. ",-1)),g("ol",Cg,[g("li",null,[g("button",{type:"button",class:"link",onClick:s[7]||(s[7]=c=>i.$emit("rerun-onboarding","dashboard"))},"Dashboard")]),g("li",null,[g("button",{type:"button",class:"link",onClick:s[8]||(s[8]=c=>i.$emit("rerun-onboarding","calendars"))},"Calendars")]),g("li",null,[g("button",{type:"button",class:"link",onClick:s[9]||(s[9]=c=>i.$emit("rerun-onboarding","categories"))},"Targets")]),g("li",null,[g("button",{type:"button",class:"link",onClick:s[10]||(s[10]=c=>i.$emit("rerun-onboarding","preferences"))},"Preferences")]),g("li",null,[g("button",{type:"button",class:"link",onClick:s[11]||(s[11]=c=>i.$emit("rerun-onboarding","review"))},"Review")])])]),a.dashboardMode!=="quick"?(k(),_("div",Sg,[Me(pg,{presets:r.value,"is-loading":a.presetsLoading,"is-saving":a.presetSaving,"is-applying":a.presetApplying,warnings:a.presetWarnings,onSave:s[12]||(s[12]=c=>o("save-preset",c)),onLoad:s[13]||(s[13]=c=>o("load-preset",c)),onDelete:s[14]||(s[14]=c=>o("delete-preset",c)),onRefresh:s[15]||(s[15]=()=>o("refresh-presets")),onClearWarnings:s[16]||(s[16]=()=>o("clear-preset-warnings")),onExportConfig:s[17]||(s[17]=()=>o("export-config")),onImportConfig:s[18]||(s[18]=c=>o("import-config",c))},null,8,["presets","is-loading","is-saving","is-applying","warnings"])])):ae("",!0),g("div",$g,[Me(D(ut),{type:"tertiary",size:"small",class:"shortcuts-btn",onClick:s[19]||(s[19]=c=>n.value=!n.value)},{default:Xe(()=>[...s[28]||(s[28]=[Pe(" Keyboard shortcuts ",-1)])]),_:1}),n.value?(k(),_("div",Tg,[g("div",Mg,[s[29]||(s[29]=g("span",null,"Keyboard shortcuts",-1)),g("button",{type:"button",class:"ghost sm",onClick:s[20]||(s[20]=c=>n.value=!1)},"")]),g("div",Ag,[(k(!0),_(pe,null,xe(D(l),c=>(k(),_("div",{key:c.id,class:"shortcuts-box__group"},[g("div",Dg,W(c.title),1),g("ul",null,[(k(!0),_(pe,null,xe(c.items,u=>(k(),_("li",{key:u.id},[g("span",Eg,W(u.label),1),g("span",Lg,W(u.combo.join(" + ")),1),u.description?(k(),_("span",Ng,W(u.description),1)):ae("",!0)]))),128))])]))),128))])])):ae("",!0)])]),_:3}))}}),[["__scopeId","data-v-c8fcbb4e"]]),Bg={key:0,class:"onboarding-mode"},Og={class:"mode-grid"},Pg={key:1,class:"config-warning"},Fg=Le({__name:"OnboardingIntroStep",props:{hasExistingConfig:{type:Boolean},snapshotSaving:{type:Boolean},saving:{type:Boolean},snapshotNotice:{},profileMode:{},setProfileMode:{type:Function},onSaveCurrentConfig:{type:Function}},setup(e){return(t,a)=>(k(),_(pe,null,[a[7]||(a[7]=g("h3",null,"Opsdash visualises your calendar time and keeps goals on track.",-1)),a[8]||(a[8]=g("ul",{class:"highlights"},[g("li",null,"Targets  stay aligned with your weekly/monthly goals."),g("li",null,"Balance  ensure your focus areas get the right attention."),g("li",null,"Notes  capture insights and the story behind the numbers.")],-1)),t.hasExistingConfig?(k(),_("div",Bg,[a[4]||(a[4]=g("p",{class:"hint"},"Choose how to start.",-1)),g("div",Og,[g("button",{type:"button",class:Be(["mode-card",{active:t.profileMode==="existing"}]),onClick:a[0]||(a[0]=o=>t.setProfileMode("existing"))},[...a[2]||(a[2]=[g("strong",null,"Edit current setup",-1),g("span",null,"Start from your existing calendars, targets, widgets, and theme.",-1)])],2),g("button",{type:"button",class:Be(["mode-card",{active:t.profileMode==="new"}]),onClick:a[1]||(a[1]=o=>t.setProfileMode("new"))},[...a[3]||(a[3]=[g("strong",null,"Create new profile",-1),g("span",null,"Start with empty selections and build a fresh layout.",-1)])],2)])])):ae("",!0),t.hasExistingConfig?(k(),_("div",Pg,[a[6]||(a[6]=g("p",null," You already have a dashboard configuration. Save a profile backup of widgets/tabs, targets, deck, reporting, and theme before onboarding applies changes. ",-1)),Me(D(ut),{type:"tertiary",size:"small",disabled:t.snapshotSaving||t.saving,"aria-busy":t.snapshotSaving,onClick:t.onSaveCurrentConfig},{default:Xe(()=>[...a[5]||(a[5]=[Pe(" Save current setup as profile ",-1)])]),_:1},8,["disabled","aria-busy","onClick"])])):ae("",!0),a[9]||(a[9]=g("p",{class:"hint"},"You can change configuration later from the Sidebar.",-1)),t.snapshotNotice?(k(),_("div",{key:2,class:Be(["snapshot-notice",`snapshot-notice--${t.snapshotNotice.type}`]),role:"status"},W(t.snapshotNotice.message),3)):ae("",!0)],64))}}),Hg={class:"preferences-grid"},Wg={class:"pref-card"},zg={class:"theme-options",role:"radiogroup","aria-label":"Theme preference"},Rg={class:"theme-option"},jg=["checked"],Ug={class:"theme-copy"},Vg={class:"theme-option__desc"},Kg={class:"theme-option"},qg=["checked"],Gg={class:"theme-option"},Jg=["checked"],Yg={class:"theme-preview"},Zg={class:"pref-card"},Xg={class:"field"},Qg=["value","disabled"],ep={key:0,class:"pref-hint"},tp={class:"pref-card"},ap={class:"field"},op=["value"],rp={class:"pref-card"},np={class:"field"},sp=["value"],lp={class:"pref-card pref-card--deck"},ip={class:"toggle-row"},cp=["checked"],dp={class:"deck-board-list"},up={key:0,class:"deck-status"},fp={key:1,class:"deck-status deck-status--error"},gp={key:0,class:"deck-status"},pp={key:1,class:"deck-board-options",role:"list"},hp=["checked","onChange"],mp={class:"pref-card pref-card--reporting"},vp={class:"toggle-row"},bp=["checked"],yp={class:"field"},wp=["value"],kp={class:"field"},_p=["value"],xp={class:"field checkbox toggle-row"},Cp=["checked"],Sp={class:"pref-card pref-card--activity"},$p={class:"toggle-row"},Tp=["checked"],Mp=Le({__name:"OnboardingPreferencesStep",props:{themePreference:{},systemThemeLabel:{},previewTheme:{},setThemePreference:{type:Function},totalHoursInput:{},categoryTotalHours:{},categoriesEnabled:{type:Boolean},onTotalHoursChange:{type:Function},allDayHoursInput:{},onAllDayHoursChange:{type:Function},trendLookbackInput:{},onTrendLookbackChange:{type:Function},deckSettingsDraft:{},setDeckEnabled:{type:Function},deckBoards:{},deckBoardsLoading:{type:Boolean},deckBoardsError:{},isDeckBoardVisible:{type:Function},toggleDeckBoard:{type:Function},reportingDraft:{},setReportingEnabled:{type:Function},setReportingSchedule:{type:Function},setReportingInterim:{type:Function},updateReporting:{type:Function},activityDraft:{},setActivityDayOff:{type:Function}},setup(e){return(t,a)=>(k(),_(pe,null,[a[44]||(a[44]=g("h3",null,"Final tweaks",-1)),a[45]||(a[45]=g("p",{class:"hint"},"You can change these options later from Config & Setup.",-1)),g("div",Hg,[g("article",Wg,[a[15]||(a[15]=g("h4",null,"Theme & appearance",-1)),a[16]||(a[16]=g("p",{class:"pref-desc"},"Choose how Opsdash reacts to your Nextcloud theme. Charts keep their calendar colors.",-1)),g("div",zg,[g("label",Rg,[g("input",{type:"radio",name:"onboarding-theme",value:"auto",checked:t.themePreference==="auto",onChange:a[0]||(a[0]=o=>t.setThemePreference("auto"))},null,40,jg),g("div",Ug,[a[12]||(a[12]=g("div",{class:"theme-option__title"},"Follow Nextcloud",-1)),g("div",Vg,"Matches your account theme (currently "+W(t.systemThemeLabel)+").",1)])]),g("label",Kg,[g("input",{type:"radio",name:"onboarding-theme",value:"light",checked:t.themePreference==="light",onChange:a[1]||(a[1]=o=>t.setThemePreference("light"))},null,40,qg),a[13]||(a[13]=g("div",{class:"theme-copy"},[g("div",{class:"theme-option__title"},"Force light"),g("div",{class:"theme-option__desc"},"Always use the light palette, even if Nextcloud switches to dark.")],-1))]),g("label",Gg,[g("input",{type:"radio",name:"onboarding-theme",value:"dark",checked:t.themePreference==="dark",onChange:a[2]||(a[2]=o=>t.setThemePreference("dark"))},null,40,Jg),a[14]||(a[14]=g("div",{class:"theme-copy"},[g("div",{class:"theme-option__title"},"Force dark"),g("div",{class:"theme-option__desc"},"Keep Opsdash dark, even when Nextcloud stays light.")],-1))])]),g("div",Yg,"Preview: "+W(t.previewTheme==="dark"?"Dark":"Light")+" mode",1)]),g("article",Zg,[a[18]||(a[18]=g("h4",null,"Total weekly target",-1)),a[19]||(a[19]=g("p",{class:"pref-desc"},"Set your overall weekly goal. You can fine-tune per-category targets later.",-1)),g("label",Xg,[a[17]||(a[17]=g("span",{class:"label"},"Total target (h / week)",-1)),g("input",{type:"number",value:t.totalHoursInput??t.categoryTotalHours,disabled:t.categoriesEnabled,min:"0",max:"1000",step:"0.5",onInput:a[3]||(a[3]=o=>t.onTotalHoursChange(o.target))},null,40,Qg)]),t.categoriesEnabled?(k(),_("p",ep," Using categories  total derives from category targets ("+W(t.categoryTotalHours.toFixed(1))+" h). ",1)):ae("",!0)]),g("article",tp,[a[21]||(a[21]=g("h4",null,"All-day events",-1)),a[22]||(a[22]=g("p",{class:"pref-desc"},"Tell Opsdash how many hours an all-day calendar event should contribute per day.",-1)),g("label",ap,[a[20]||(a[20]=g("span",{class:"label"},"All-day hours per day",-1)),g("input",{type:"number",value:t.allDayHoursInput,min:"0",max:"24",step:"0.25",onInput:a[4]||(a[4]=o=>t.onAllDayHoursChange(o.target))},null,40,op)]),a[23]||(a[23]=g("p",{class:"pref-hint"},"Default is 8 h  adjust if your organisation tracks different durations.",-1))]),g("article",rp,[a[25]||(a[25]=g("h4",null,"Trend lookback (global)",-1)),a[26]||(a[26]=g("p",{class:"pref-desc"},"Controls lookback for Balance, Day-off, and Category mix trends.",-1)),g("label",np,[a[24]||(a[24]=g("span",{class:"label"},"Lookback (weeks / months)",-1)),g("input",{type:"number",value:t.trendLookbackInput,min:"1",max:"6",step:"1",onInput:a[5]||(a[5]=o=>t.onTrendLookbackChange(o.target))},null,40,sp)]),a[27]||(a[27]=g("p",{class:"pref-hint"},"Applies to both week and month views.",-1))]),g("article",lp,[a[30]||(a[30]=g("h4",null,"Deck cards",-1)),a[31]||(a[31]=g("p",{class:"pref-desc"},"Bring Deck boards into Opsdash. Cards remain read-only so you can focus on status.",-1)),g("label",ip,[g("input",{type:"checkbox",checked:t.deckSettingsDraft.enabled,onChange:a[6]||(a[6]=o=>t.setDeckEnabled(o.target.checked))},null,40,cp),a[28]||(a[28]=g("span",null,"Enable Deck cards on dashboard",-1))]),t.deckSettingsDraft.enabled?(k(),_(pe,{key:0},[a[29]||(a[29]=g("p",{class:"pref-hint"},"Select which boards appear. Deck permissions still apply.",-1)),g("div",dp,[t.deckBoardsLoading?(k(),_("p",up,"Loading Deck boards")):t.deckBoardsError?(k(),_("p",fp,W(t.deckBoardsError),1)):(k(),_(pe,{key:2},[t.deckBoards.length?(k(),_("div",pp,[(k(!0),_(pe,null,xe(t.deckBoards,o=>(k(),_("label",{key:o.id,class:"deck-board-option",role:"listitem"},[g("input",{type:"checkbox",checked:t.isDeckBoardVisible(o.id),onChange:r=>t.toggleDeckBoard(o.id,r.target.checked)},null,40,hp),g("span",null,W(o.title),1)]))),128))])):(k(),_("p",gp,"Open the Deck app to create a board."))],64))])],64)):ae("",!0)]),g("article",mp,[a[38]||(a[38]=g("h4",null,"Weekly/monthly recap",-1)),a[39]||(a[39]=g("p",{class:"pref-desc"},"Opsdash can send a summary of targets, balance, and notes so you stay aligned.",-1)),g("label",vp,[g("input",{type:"checkbox",checked:t.reportingDraft.enabled,onChange:a[7]||(a[7]=o=>t.setReportingEnabled(o.target.checked))},null,40,bp),a[32]||(a[32]=g("span",null,"Send a recap automatically",-1))]),t.reportingDraft.enabled?(k(),_(pe,{key:0},[g("label",yp,[a[34]||(a[34]=g("span",{class:"label"},"Schedule",-1)),g("select",{value:t.reportingDraft.schedule,onChange:a[8]||(a[8]=o=>t.setReportingSchedule(o.target.value))},[...a[33]||(a[33]=[g("option",{value:"week"},"Weekly",-1),g("option",{value:"month"},"Monthly",-1),g("option",{value:"both"},"Weekly + Monthly",-1)])],40,wp)]),g("label",kp,[a[36]||(a[36]=g("span",{class:"label"},"Mid-range reminders",-1)),g("select",{value:t.reportingDraft.interim,onChange:a[9]||(a[9]=o=>t.setReportingInterim(o.target.value))},[...a[35]||(a[35]=[g("option",{value:"none"},"No interim reminder",-1),g("option",{value:"midweek"},"Mid-week / mid-month only",-1),g("option",{value:"daily"},"Daily nudge while enabled",-1)])],40,_p)]),g("label",xp,[g("input",{type:"checkbox",checked:t.reportingDraft.alertOnRisk,onChange:a[10]||(a[10]=o=>t.updateReporting({alertOnRisk:o.target.checked}))},null,40,Cp),a[37]||(a[37]=g("span",null,"Highlight when targets drift off-track",-1))])],64)):ae("",!0)]),g("article",Sp,[a[41]||(a[41]=g("h4",null,"Activity insights",-1)),a[42]||(a[42]=g("p",{class:"pref-desc"},"Choose whether the Activity & Schedule card shows the day-off heatmap.",-1)),g("label",$p,[g("input",{type:"checkbox",checked:t.activityDraft.showDayOffTrend,onChange:a[11]||(a[11]=o=>t.setActivityDayOff(o.target.checked))},null,40,Tp),a[40]||(a[40]=g("span",null,"Show Days off trend heatmap",-1))]),a[43]||(a[43]=g("p",{class:"pref-hint"},"Helps you compare recent weeks/months at a glance.",-1))])])],64))}}),Ap={class:"strategy-grid"},Dp=["onClick"],Ep={class:"subtitle"},Lp=Le({__name:"OnboardingDashboardStep",props:{dashboardMode:{},setDashboardMode:{type:Function},dashboardPresets:{}},setup(e){return(t,a)=>(k(),_(pe,null,[a[0]||(a[0]=g("h3",null,"Dashboard layout",-1)),a[1]||(a[1]=g("p",{class:"hint"},"Pick how much you want to see by default. You can change widgets later.",-1)),g("div",Ap,[(k(!0),_(pe,null,xe(t.dashboardPresets,o=>(k(),_("article",{key:o.id,class:Be(["strategy-card",{active:t.dashboardMode===o.id}]),onClick:r=>t.setDashboardMode(o.id)},[g("h4",null,W(o.title),1),g("p",Ep,W(o.subtitle),1),g("ul",null,[(k(!0),_(pe,null,xe(o.highlights,r=>(k(),_("li",{key:r},W(r),1))),128))]),g("footer",null,"Widgets: "+W(o.widgets),1)],10,Dp))),128))])],64))}}),Np={class:"strategy-grid"},Ip=["onClick"],Bp={class:"subtitle"},Op=Le({__name:"OnboardingStrategyStep",props:{strategies:{},selectedStrategy:{},setSelectedStrategy:{type:Function}},setup(e){return(t,a)=>(k(),_(pe,null,[a[0]||(a[0]=g("h3",null,"Select a starting strategy",-1)),g("div",Np,[(k(!0),_(pe,null,xe(t.strategies,o=>(k(),_("article",{key:o.id,class:Be(["strategy-card",{active:t.selectedStrategy===o.id}]),onClick:r=>t.setSelectedStrategy(o.id)},[g("h4",null,W(o.title),1),g("p",Bp,W(o.subtitle),1),g("ul",null,[(k(!0),_(pe,null,xe(o.highlights,r=>(k(),_("li",{key:r},W(r),1))),128))]),g("footer",null,"Best for: "+W(o.recommendedFor),1)],10,Ip))),128))]),a[1]||(a[1]=g("p",{class:"hint"},"Balanced and Power include a Targets step for categories and calendar assignments.",-1))],64))}}),Pp={class:"calendar-list"},Fp=["value","checked","onChange"],Hp={key:0,class:"calendar-targets"},Wp={class:"cal-name"},zp={class:"input-unit"},Rp=["value","onInput"],jp={key:1,class:"hint"},Up={key:2,class:"warning"},Vp=Le({__name:"OnboardingCalendarsStep",props:{calendars:{},localSelection:{},toggleCalendar:{type:Function},calendarTargets:{},getCalendarTarget:{type:Function},setCalendarTarget:{type:Function},showCalendarTargets:{type:Boolean}},setup(e){return(t,a)=>(k(),_(pe,null,[a[3]||(a[3]=g("h3",null,"Choose calendars to include",-1)),a[4]||(a[4]=g("p",null,"Select the calendars you want to track. You can adjust later at any time.",-1)),g("div",Pp,[(k(!0),_(pe,null,xe(t.calendars,o=>(k(),_("label",{key:o.id,class:Be(["calendar-item",{checked:t.localSelection.includes(o.id)}])},[g("input",{type:"checkbox",value:o.id,checked:t.localSelection.includes(o.id),onChange:r=>t.toggleCalendar(o.id,r.target)},null,40,Fp),g("span",{class:"dot",style:Ee({backgroundColor:o.color||"#3B82F6"})},null,4),g("span",null,W(o.displayname),1)],2))),128))]),t.localSelection.length&&t.showCalendarTargets?(k(),_("div",Hp,[a[1]||(a[1]=g("h4",null,"Calendar targets (h / week)",-1)),a[2]||(a[2]=g("p",{class:"hint"},"Optional in Power mode  set only if you need per-calendar pacing.",-1)),(k(!0),_(pe,null,xe(t.calendars.filter(o=>t.localSelection.includes(o.id)),o=>(k(),_("div",{key:`target-${o.id}`,class:"target-row"},[g("span",Wp,W(o.displayname),1),g("div",zp,[g("input",{type:"number",min:"0",step:"0.25",value:t.getCalendarTarget(o.id),onInput:r=>t.setCalendarTarget(o.id,r.target.value)},null,40,Rp),a[0]||(a[0]=g("span",{class:"unit"},"h / week",-1))])]))),128))])):t.localSelection.length&&!t.showCalendarTargets?(k(),_("p",jp," Per-calendar targets are available in Power mode. ")):ae("",!0),t.localSelection.length?ae("",!0):(k(),_("div",Up,"Select at least one calendar to continue."))],64))}}),Kp={key:0,class:"hint"},qp={class:"category-presets"},Gp={class:"preset-grid"},Jp=["onClick"],Yp={class:"preset-title"},Zp={class:"preset-desc"},Xp={class:"preset-swatches"},Qp={class:"categories-editor"},eh={key:0,class:"empty-state"},th={class:"category-card__header"},ah={class:"color-field","data-color-popover":""},oh=["aria-expanded","aria-label","onClick"],rh=["id"],nh={class:"swatch-grid",role:"group","aria-label":"Preset colors"},sh=["aria-label","onClick"],lh={class:"custom-color"},ih=["value","onInput"],ch=["value","onInput"],dh={class:"category-actions"},uh=["disabled","onClick"],fh={class:"category-card__fields"},gh={class:"field"},ph={class:"input-unit"},hh=["value","onInput"],mh={class:"field"},vh=["value","onChange"],bh={class:"field checkbox"},yh=["checked","onChange"],wh={key:1,class:"category-total"},kh={key:0,class:"calendar-assignments"},_h={class:"cal-name"},xh=["value","onChange"],Ch=["value"],Sh={key:0,class:"assignment-warning"},$h={key:0,class:"warning"},Th={key:1,class:"calendar-targets"},Mh={class:"cal-name"},Ah={class:"input-unit"},Dh=["value","onInput"],Eh={key:2,class:"hint"},Lh=Le({__name:"OnboardingCategoriesStep",props:{categoriesEnabled:{type:Boolean},categories:{},categoryTotalHours:{},selectedCalendars:{},assignments:{},showCalendarTargets:{type:Boolean},calendarTargets:{},getCalendarTarget:{type:Function},setCalendarTarget:{type:Function},addCategory:{type:Function},removeCategory:{type:Function},setCategoryLabel:{type:Function},categoryPresets:{},applyCategoryPreset:{type:Function},setCategoryTarget:{type:Function},setCategoryPaceMode:{type:Function},toggleCategoryWeekend:{type:Function},assignCalendar:{type:Function},openColorId:{},toggleColorPopover:{type:Function},closeColorPopover:{type:Function},categoryColorPalette:{},resolvedColor:{type:Function},applyColor:{type:Function},onColorInput:{type:Function}},setup(e){return(t,a)=>(k(),_(pe,null,[a[18]||(a[18]=g("h3",null,"Configure categories & targets",-1)),t.categoriesEnabled?(k(),_(pe,{key:1},[g("div",qp,[a[1]||(a[1]=g("h4",null,"Quick start presets",-1)),a[2]||(a[2]=g("p",{class:"hint"},"Pick a preset to create categories fast. You can edit everything after.",-1)),g("div",Gp,[(k(!0),_(pe,null,xe(t.categoryPresets,o=>(k(),_("button",{key:o.id,type:"button",class:"preset-card",onClick:r=>t.applyCategoryPreset(o)},[g("div",Yp,W(o.title),1),g("div",Zp,W(o.description),1),g("div",Xp,[(k(!0),_(pe,null,xe(o.colors,r=>(k(),_("span",{key:`${o.id}-${r}`,class:"preset-swatch",style:Ee({backgroundColor:r}),"aria-hidden":"true"},null,4))),128))])],8,Jp))),128))])]),g("div",Qp,[t.categories.length?ae("",!0):(k(),_("div",eh,[...a[3]||(a[3]=[g("p",null,"No categories yet. Add at least one to continue.",-1)])])),(k(!0),_(pe,null,xe(t.categories,o=>(k(),_("article",{key:o.id,class:"category-card"},[g("header",th,[g("div",ah,[g("button",{type:"button",class:"color-button","aria-expanded":t.openColorId===o.id,"aria-label":`Choose color for ${o.label}`,onClick:it(r=>t.toggleColorPopover(o.id),["stop"])},[g("span",{class:"category-color-indicator",style:Ee({backgroundColor:t.resolvedColor(o)}),"aria-hidden":"true"},null,4),a[4]||(a[4]=g("span",null,"Color",-1))],8,oh),t.openColorId===o.id?(k(),_("div",{key:0,class:"color-popover",id:`onboarding-color-popover-${o.id}`,tabindex:"-1",onKeydown:a[0]||(a[0]=so(it(r=>t.closeColorPopover(),["prevent"]),["esc"]))},[g("div",nh,[(k(!0),_(pe,null,xe(t.categoryColorPalette,r=>(k(),_("button",{key:`${o.id}-swatch-${r}`,type:"button",class:Be(["color-swatch",{active:t.resolvedColor(o)===r}]),style:Ee({backgroundColor:r}),"aria-label":`Use color ${r}`,onClick:n=>t.applyColor(o.id,r)},null,14,sh))),128))]),g("label",lh,[a[5]||(a[5]=g("span",null,"Custom",-1)),g("input",{class:"color-input",type:"color",value:t.resolvedColor(o),"aria-label":"Pick custom color",onInput:r=>t.onColorInput(o.id,r.target.value)},null,40,ih)])],40,rh)):ae("",!0)]),g("input",{class:"category-name",type:"text",value:o.label,placeholder:"Category name",onInput:r=>t.setCategoryLabel(o.id,r.target.value)},null,40,ch),g("div",dh,[g("button",{class:"remove-category",type:"button",disabled:t.categories.length<=1,title:"Remove category",onClick:r=>t.removeCategory(o.id)},"  ",8,uh)])]),g("div",fh,[g("label",gh,[a[7]||(a[7]=g("span",{class:"label"},"Target",-1)),g("div",ph,[g("input",{type:"number",value:o.targetHours,min:"0",step:"0.5",onInput:r=>t.setCategoryTarget(o.id,r.target.value)},null,40,hh),a[6]||(a[6]=g("span",{class:"unit"},"h / week",-1))])]),g("label",mh,[a[9]||(a[9]=g("span",{class:"label"},"Pacing",-1)),g("select",{value:o.paceMode,onChange:r=>t.setCategoryPaceMode(o.id,r.target.value)},[...a[8]||(a[8]=[g("option",{value:"days_only"},"Days only",-1),g("option",{value:"time_aware"},"Time aware",-1)])],40,vh),a[10]||(a[10]=g("span",{class:"field-hint"},"Time aware adjusts for time already logged.",-1))]),g("label",bh,[g("input",{type:"checkbox",checked:o.includeWeekend,onChange:r=>t.toggleCategoryWeekend(o.id,r.target.checked)},null,40,yh),a[11]||(a[11]=g("span",null,"Include weekend",-1))])])]))),128)),Me(D(ut),{type:"tertiary",class:"add-category",onClick:t.addCategory},{default:Xe(()=>[...a[12]||(a[12]=[Pe("Add category",-1)])]),_:1},8,["onClick"]),t.categories.length?(k(),_("div",wh,"Total weekly target: "+W(t.categoryTotalHours.toFixed(1))+" h",1)):ae("",!0)]),t.selectedCalendars.length?(k(),_("div",kh,[a[14]||(a[14]=g("h4",null,"Assign calendars",-1)),a[15]||(a[15]=g("p",{class:"hint"},"Every selected calendar must be assigned before you continue.",-1)),(k(!0),_(pe,null,xe(t.selectedCalendars,o=>(k(),_("div",{key:o.id,class:Be(["assignment-row",{"is-unassigned":!t.assignments[o.id]}])},[g("span",_h,W(o.displayname),1),g("select",{value:t.assignments[o.id],onChange:r=>t.assignCalendar(o.id,r.target.value)},[a[13]||(a[13]=g("option",{value:""},"Unassigned",-1)),(k(!0),_(pe,null,xe(t.categories,r=>(k(),_("option",{key:r.id,value:r.id},W(r.label),9,Ch))),128))],40,xh),t.assignments[o.id]?ae("",!0):(k(),_("span",Sh,"Required"))],2))),128)),t.categories.length?ae("",!0):(k(),_("p",$h,"Add at least one category to assign calendars."))])):ae("",!0),t.selectedCalendars.length&&t.showCalendarTargets?(k(),_("div",Th,[a[17]||(a[17]=g("h4",null,"Calendar targets (h / week)",-1)),(k(!0),_(pe,null,xe(t.selectedCalendars,o=>(k(),_("div",{key:`targets-${o.id}`,class:"target-row"},[g("span",Mh,W(o.displayname),1),g("div",Ah,[g("input",{type:"number",min:"0",step:"0.25",value:t.getCalendarTarget(o.id),onInput:r=>t.setCalendarTarget(o.id,r.target.value)},null,40,Dh),a[16]||(a[16]=g("span",{class:"unit"},"h / week",-1))])]))),128))])):ae("",!0),t.selectedCalendars.length?ae("",!0):(k(),_("p",Eh,"Select at least one calendar to continue."))],64)):(k(),_("p",Kp,"This strategy does not require categories."))],64))}}),Nh={class:"review-grid"},Ih={class:"hint"},Bh={key:1},Oh={key:0},Ph={key:0},Fh={key:0,class:"review-profile"},Hh={class:"toggle-row"},Wh=["checked"],zh={key:0,class:"field"},Rh=["value"],jh=Le({__name:"OnboardingReviewStep",props:{strategyTitle:{},categoriesEnabled:{type:Boolean},selectedCalendars:{},draftTargetsCategories:{},draftTotalHours:{},totalHoursInput:{},categoryTotalHours:{},deckReviewSummary:{},deckEnabled:{type:Boolean},deckVisibleBoards:{},reportingEnabled:{type:Boolean},reportingSummary:{},showDayOffTrend:{type:Boolean},themePreference:{},dashboardMode:{},saveProfile:{type:Boolean},profileName:{},showSaveProfile:{type:Boolean},setSaveProfile:{type:Function},setProfileName:{type:Function}},setup(e){const t=e,a=N(()=>Number.isFinite(t.totalHoursInput??NaN)?Number(t.totalHoursInput):Number.isFinite(t.draftTotalHours)?Number(t.draftTotalHours):0),o=N(()=>t.dashboardMode==="quick"?"Quick layout":t.dashboardMode==="pro"?"Pro layout":"Standard layout"),r=N(()=>t.themePreference==="light"?"Light theme":t.themePreference==="dark"?"Dark theme":"Follow Nextcloud theme");return(n,l)=>(k(),_(pe,null,[l[14]||(l[14]=g("h3",null,"Review your setup",-1)),g("div",Nh,[g("div",null,[l[2]||(l[2]=g("h5",null,"Strategy",-1)),g("p",null,W(n.strategyTitle),1)]),g("div",null,[l[3]||(l[3]=g("h5",null,"Calendars",-1)),g("ul",null,[(k(!0),_(pe,null,xe(n.selectedCalendars,i=>(k(),_("li",{key:i.id},W(i.displayname),1))),128))])]),g("div",null,[l[4]||(l[4]=g("h5",null,"Targets preview",-1)),n.categoriesEnabled&&n.draftTargetsCategories.length?(k(),_(pe,{key:0},[g("ul",null,[(k(!0),_(pe,null,xe(n.draftTargetsCategories,i=>(k(),_("li",{key:i.id},W(i.label)+"  "+W(i.targetHours)+" h",1))),128))]),g("p",Ih,"Total weekly target: "+W(n.categoryTotalHours.toFixed(1))+" h",1)],64)):(k(),_("p",Bh,"Total target: "+W(a.value)+" h per week",1))]),g("div",null,[l[5]||(l[5]=g("h5",null,"Dashboard",-1)),g("p",null,W(o.value),1)]),g("div",null,[l[6]||(l[6]=g("h5",null,"Theme",-1)),g("p",null,W(r.value),1)]),g("div",null,[l[7]||(l[7]=g("h5",null,"Deck tab",-1)),g("p",null,W(n.deckReviewSummary),1),n.deckEnabled&&n.deckVisibleBoards.length?(k(),_("ul",Oh,[(k(!0),_(pe,null,xe(n.deckVisibleBoards.slice(0,3),i=>(k(),_("li",{key:i.id},W(i.title),1))),128)),n.deckVisibleBoards.length>3?(k(),_("li",Ph,"+"+W(n.deckVisibleBoards.length-3)+" more",1)):ae("",!0)])):ae("",!0)]),g("div",null,[l[8]||(l[8]=g("h5",null,"Reporting",-1)),g("p",null,W(n.reportingEnabled?n.reportingSummary:"Recap disabled"),1)]),g("div",null,[l[9]||(l[9]=g("h5",null,"Activity card",-1)),g("p",null,W(n.showDayOffTrend?"Days-off heatmap enabled":"Heatmap hidden"),1)]),n.showSaveProfile?(k(),_("div",Fh,[l[12]||(l[12]=g("h5",null,"Save profile",-1)),g("label",Hh,[g("input",{type:"checkbox",checked:n.saveProfile,onChange:l[0]||(l[0]=i=>n.setSaveProfile(i.target.checked))},null,40,Wh),l[10]||(l[10]=g("span",null,"Save as new profile",-1))]),n.saveProfile?(k(),_("div",zh,[l[11]||(l[11]=g("span",{class:"label"},"Profile name",-1)),g("input",{type:"text",value:n.profileName,placeholder:"e.g. Team workload",onInput:l[1]||(l[1]=i=>n.setProfileName(i.target.value))},null,40,Rh)])):ae("",!0),l[13]||(l[13]=g("p",{class:"hint"},"Profiles store widgets/tabs, targets, theme, Deck, and reporting settings.",-1))])):ae("",!0)]),l[15]||(l[15]=g("p",{class:"hint"},"You can fine-tune categories, goals, and pacing once the dashboard loads.",-1))],64))}});function Uh(){const e=ie(!1),t=ie(!1),a=ie(0),o=ie(null),r=N(()=>e.value||t.value);async function n(l){a.value+=1,o.value=l??null,e.value=!1,t.value=!0,await Xt()}return{autoWizardNeeded:e,manualWizardOpen:t,onboardingRunId:a,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:o}}const qn=24*60*60*1e3;function Qt(e,t,a){const o=Number(e);return Number.isFinite(o)?Math.min(a,Math.max(t,Math.round(o*100)/100)):t}function Vh(e,t,a){const o=Number(e);if(!Number.isFinite(o))return t;const r=Math.round(o);return r<t?t:r>a?a:r}function Nt(e){return Number.isFinite(e)?Number(e.toFixed(2)):0}function Gn(e){return Number.isFinite(e)?Math.max(0,Math.min(999,Number(e.toFixed(2)))):0}function Jn(e){if(!Number.isFinite(e))return"0";const t=Nt(Math.max(0,e));return Math.abs(t-Math.round(t))<.05?Math.round(t).toString():t.toFixed(1)}function zo(e){const t=Number(e);if(!Number.isFinite(t))return 0;const a=Math.min(1e4,Math.max(0,t));return Number(a.toFixed(2))}function ya(e){return zo(Number(e)*4)}function Zi(){return{showWeekendShare:!0,showEveningShare:!0,showEarliestLatest:!0,showOverlaps:!0,showLongestSession:!0,showLastDayOff:!0,showDayOffTrend:!0,showHint:!0,forecastMode:"total"}}function lo(){return{categories:["work","hobby","sport"],useCategoryMapping:!0,index:{method:"simple_range",basis:"category"},thresholds:{noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6},relations:{displayMode:"ratio"},trend:{lookbackWeeks:3},dayparts:{enabled:!1},ui:{showNotes:!1}}}function da(){return{totalHours:48,categories:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",color:"#2563EB",groupIds:[1]},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#F97316",groupIds:[2]},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#10B981",groupIds:[3]}],pace:{includeWeekendTotal:!0,mode:"days_only",thresholds:{onTrack:-2,atRisk:-10}},forecast:{methodPrimary:"linear",momentumLastNDays:2,padding:1.5},ui:{showTotalDelta:!0,showNeedPerDay:!0,showCategoryBlocks:!0,badges:!0,includeWeekendToggle:!0,showCalendarCharts:!0,showCategoryCharts:!0},allDayHours:8,timeSummary:{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},activityCard:Zi(),balance:lo(),includeZeroDaysInStats:!1}}function ua(e){return JSON.parse(JSON.stringify(At(e)))}function At(e){var l,i,s,c,u,h,m,p,d,f,y,C,$,E,T,P,I,w,A,O,z,J,H,x,v;if(typeof e=="string")try{const b=JSON.parse(e);return At(b)}catch{return At(void 0)}const t=da(),a=JSON.parse(JSON.stringify(e??{}));if(typeof a!="object"||a===null||Array.isArray(a))return t;Array.isArray(a.categories)||(a.categories=[]);const o=a.categories.map(b=>{const j=(b!=null&&b.id&&typeof b.id=="string"?b.id:"")||Yh(String((b==null?void 0:b.label)??"cat")),F=typeof(b==null?void 0:b.label)=="string"&&b.label.trim()!==""?b.label.trim():Jh(j),X=Qt(b==null?void 0:b.targetHours,0,1e4),ne=!!(b!=null&&b.includeWeekend),Y=(b==null?void 0:b.paceMode)==="time_aware"?"time_aware":"days_only",re=Gh(b==null?void 0:b.color),se=Array.isArray(b==null?void 0:b.groupIds)?b.groupIds.map(fe=>Number(fe)).filter(fe=>Number.isFinite(fe)&&fe>=0&&fe<=9):[];return{id:j,label:F,targetHours:X,includeWeekend:ne,paceMode:Y,color:re,groupIds:se}}),r=o.length?o:t.categories;return{totalHours:Qt(a.totalHours,0,1e4),categories:r,pace:{includeWeekendTotal:!!(((l=a.pace)==null?void 0:l.includeWeekendTotal)??t.pace.includeWeekendTotal),mode:((i=a.pace)==null?void 0:i.mode)==="time_aware"?"time_aware":t.pace.mode,thresholds:{onTrack:Qt(((c=(s=a.pace)==null?void 0:s.thresholds)==null?void 0:c.onTrack)??t.pace.thresholds.onTrack,-100,100),atRisk:Qt(((h=(u=a.pace)==null?void 0:u.thresholds)==null?void 0:h.atRisk)??t.pace.thresholds.atRisk,-100,100)}},forecast:{methodPrimary:((m=a.forecast)==null?void 0:m.methodPrimary)==="momentum"?"momentum":"linear",momentumLastNDays:(()=>{var j;const b=Math.round(((j=a.forecast)==null?void 0:j.momentumLastNDays)??t.forecast.momentumLastNDays);return Math.min(14,Math.max(1,Number.isFinite(b)?b:t.forecast.momentumLastNDays))})(),padding:Qt(((p=a.forecast)==null?void 0:p.padding)??t.forecast.padding,0,100)},ui:{showTotalDelta:!!(((d=a.ui)==null?void 0:d.showTotalDelta)??t.ui.showTotalDelta),showNeedPerDay:!!(((f=a.ui)==null?void 0:f.showNeedPerDay)??t.ui.showNeedPerDay),showCategoryBlocks:!!(((y=a.ui)==null?void 0:y.showCategoryBlocks)??t.ui.showCategoryBlocks),badges:!!(((C=a.ui)==null?void 0:C.badges)??t.ui.badges),includeWeekendToggle:!!((($=a.ui)==null?void 0:$.includeWeekendToggle)??t.ui.includeWeekendToggle),showCalendarCharts:((E=a.ui)==null?void 0:E.showCalendarCharts)===void 0?t.ui.showCalendarCharts:!!a.ui.showCalendarCharts,showCategoryCharts:((T=a.ui)==null?void 0:T.showCategoryCharts)===void 0?t.ui.showCategoryCharts:!!a.ui.showCategoryCharts},allDayHours:Qt(a.allDayHours??t.allDayHours,0,24),timeSummary:{showTotal:((P=a.timeSummary)==null?void 0:P.showTotal)===void 0?t.timeSummary.showTotal:!!a.timeSummary.showTotal,showAverage:((I=a.timeSummary)==null?void 0:I.showAverage)===void 0?t.timeSummary.showAverage:!!a.timeSummary.showAverage,showMedian:((w=a.timeSummary)==null?void 0:w.showMedian)===void 0?t.timeSummary.showMedian:!!a.timeSummary.showMedian,showBusiest:((A=a.timeSummary)==null?void 0:A.showBusiest)===void 0?t.timeSummary.showBusiest:!!a.timeSummary.showBusiest,showWorkday:((O=a.timeSummary)==null?void 0:O.showWorkday)===void 0?t.timeSummary.showWorkday:!!a.timeSummary.showWorkday,showWeekend:((z=a.timeSummary)==null?void 0:z.showWeekend)===void 0?t.timeSummary.showWeekend:!!a.timeSummary.showWeekend,showWeekendShare:((J=a.timeSummary)==null?void 0:J.showWeekendShare)===void 0?t.timeSummary.showWeekendShare:!!a.timeSummary.showWeekendShare,showCalendarSummary:((H=a.timeSummary)==null?void 0:H.showCalendarSummary)===void 0?t.timeSummary.showCalendarSummary:!!a.timeSummary.showCalendarSummary,showTopCategory:((x=a.timeSummary)==null?void 0:x.showTopCategory)===void 0?t.timeSummary.showTopCategory:!!a.timeSummary.showTopCategory,showBalance:((v=a.timeSummary)==null?void 0:v.showBalance)===void 0?t.timeSummary.showBalance:!!a.timeSummary.showBalance},activityCard:Kh(a.activityCard,t.activityCard),balance:qh(a.balance,r,t.balance),includeZeroDaysInStats:!!(a.includeZeroDaysInStats??t.includeZeroDaysInStats)}}function Kh(e,t){const a={...t};if(!e||typeof e!="object")return a;["showWeekendShare","showEveningShare","showEarliestLatest","showOverlaps","showLongestSession","showLastDayOff","showDayOffTrend","showHint"].forEach(n=>{Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=!!e[n])});const r=e==null?void 0:e.forecastMode;if(typeof r=="string"){const n=r.toLowerCase();(n==="off"||n==="total"||n==="calendar"||n==="category")&&(a.forecastMode=n)}return a}function qh(e,t,a){var u,h,m;const o=t.map(p=>p.id),r=new Set([...o,"__uncategorized__"]),n=Array.isArray(e==null?void 0:e.categories)?e.categories:a.categories,l=[];for(const p of n){const d=typeof p=="string"?p.trim():String(p??"").trim();d&&(r.size&&!r.has(d)||l.includes(d)||l.push(d))}l.length||(o.length?l.push(...o.slice(0,a.categories.length)):l.push(...a.categories));const i=(e==null?void 0:e.thresholds)??{},s=(e==null?void 0:e.ui)??{},c=(e==null?void 0:e.index)??{};return{categories:l,useCategoryMapping:!!((e==null?void 0:e.useCategoryMapping)??a.useCategoryMapping),index:{method:(c==null?void 0:c.method)==="shannon_evenness"?"shannon_evenness":a.index.method,basis:(c==null?void 0:c.basis)==="calendar"||(c==null?void 0:c.basis)==="both"||(c==null?void 0:c.basis)==="off"?c.basis:a.index.basis},thresholds:{noticeAbove:Qt(i.noticeAbove??a.thresholds.noticeAbove,0,1),noticeBelow:Qt(i.noticeBelow??a.thresholds.noticeBelow,0,1),warnAbove:Qt(i.warnAbove??a.thresholds.warnAbove,0,1),warnBelow:Qt(i.warnBelow??a.thresholds.warnBelow,0,1),warnIndex:Qt(i.warnIndex??a.thresholds.warnIndex,0,1)},relations:{displayMode:((u=e==null?void 0:e.relations)==null?void 0:u.displayMode)==="factor"?"factor":a.relations.displayMode},trend:{lookbackWeeks:Vh(((h=e==null?void 0:e.trend)==null?void 0:h.lookbackWeeks)??a.trend.lookbackWeeks,1,6)},dayparts:{enabled:!!(((m=e==null?void 0:e.dayparts)==null?void 0:m.enabled)??a.dayparts.enabled)},ui:{showNotes:!!(s.showNotes??a.ui.showNotes)}}}function Gh(e){if(typeof e!="string")return;const t=e.trim();if(/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t)){if(t.length===4){const[,a,o,r]=t;return`#${a}${a}${o}${o}${r}${r}`.toUpperCase()}return t.toUpperCase()}}function Jh(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function Yh(e){let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t|=0;return`cat-${Math.abs(t)}`}function Zh(e){const t=e.pace.totalEligible>0?e.pace.elapsedEligible/e.pace.totalEligible:0,a=t>0?e.totalProgress.actualHours/t:e.totalProgress.actualHours,o=Math.max(0,Math.ceil(e.pace.daysLeft)),r=Xh(e.dailyHours,e.config.forecast.momentumLastNDays),n=e.totalProgress.actualHours+r*o,l=Math.max(0,Math.min(a,n)-e.config.forecast.padding),i=Math.max(a,n)+e.config.forecast.padding,s=e.config.forecast.methodPrimary==="momentum"?"momentum":"linear",c=s==="momentum"?n:a,u=Math.max(0,c-e.config.forecast.padding),h=Math.max(0,c+e.config.forecast.padding),m=s==="momentum"?"Momentum":"Linear";return{linear:Nt(a),momentum:Nt(n),low:Nt(Math.max(0,l)),high:Nt(Math.max(0,i)),text:`${m} ${Jn(e.config.forecast.padding)}h  ${Jn(u)}${Jn(h)} h`,primaryMethod:s,primary:Nt(c),bandLow:Nt(u),bandHigh:Nt(h)}}function Xh(e,t){if(t<=0)return 0;const a=Array.from(e.entries());if(!a.length)return 0;a.sort((n,l)=>n[0].localeCompare(l[0]));const o=a.slice(-t),r=o.reduce((n,[,l])=>n+Math.max(0,l||0),0);return o.length?r/o.length:0}function Qh(e,t){var o,r;if(typeof window<"u"){const n=window;try{if(typeof(n==null?void 0:n.t)=="function")return n.t("opsdash",e,t||{});if(typeof((r=(o=n==null?void 0:n.OC)==null?void 0:o.L10N)==null?void 0:r.translate)=="function")return n.OC.L10N.translate("opsdash",e,t||{})}catch(l){n!=null&&n.console&&console.warn("[opsdash] translate failed",l)}}let a=e;return t&&Object.entries(t).forEach(([n,l])=>{a=a.replace(new RegExp(`{${n}}`,"g"),String(l))}),a}const io=Qh;function Xi(e){const t=e?At(e):da(),a=(t==null?void 0:t.totalHours)??0,o=(t==null?void 0:t.categories)??[],r={id:"total",label:io("Total"),actualHours:0,targetHours:a,percent:0,deltaHours:0,remainingHours:a,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"};return{total:r,categories:o.map(n=>({...r,id:n.id,label:n.label,targetHours:n.targetHours,remainingHours:n.targetHours})),forecast:{linear:0,momentum:0,low:0,high:0,text:"~00 h",primaryMethod:(t==null?void 0:t.forecast.methodPrimary)??"linear",primary:0,bandLow:0,bandHigh:0}}}function Qi(e){const t=e.config,a=ac(e.from),o=ac(e.to),r=om(e.byDay),n=(e.byCal||[]).reduce((h,m)=>{const p=Number((m==null?void 0:m.total_hours)??(m==null?void 0:m.hours)??0);return Number.isFinite(p)?h+p:h},0),l=t.totalHours||0,i=ec({includeWeekend:t.pace.includeWeekendTotal,mode:t.pace.mode,includeZeroDays:t.includeZeroDaysInStats,start:a,end:o,dailyHours:r}),s=tc({id:"total",label:io("Total"),actual:n,target:l,pace:i,thresholds:t.pace.thresholds,includeWeekend:t.pace.includeWeekendTotal,paceMode:t.pace.mode}),c=t.categories.map(h=>{const m=am(h,e.byCal,e.groupsById),p=h.paceMode||t.pace.mode,d=ec({includeWeekend:h.includeWeekend,mode:p,includeZeroDays:t.includeZeroDaysInStats,start:a,end:o,dailyHours:r});return tc({id:h.id,label:h.label,actual:m,target:h.targetHours,pace:d,thresholds:t.pace.thresholds,includeWeekend:h.includeWeekend,paceMode:p})}),u=Zh({config:t,totalProgress:s,dailyHours:r,pace:i});return{total:s,categories:c,forecast:u}}function ec(e){const{start:t,end:a}=e;if(!t||!a)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};const o=zr(new Date),r=Da(t),n=Da(a),l=rm(t,a).filter(h=>e.includeWeekend||!nm(h)),i=l.length;if(i===0)return{totalEligible:0,elapsedEligible:0,daysLeft:0,calendarPercent:0};if(Da(o)>n)return{totalEligible:i,elapsedEligible:i,daysLeft:0,calendarPercent:100};if(Da(o)<r)return{totalEligible:i,elapsedEligible:0,daysLeft:i,calendarPercent:0};let s=0;for(const h of l){const m=Da(h),p=e.dailyHours.get(m)??0;if(!(!e.includeZeroDays&&p<=0&&m!==Da(o))){if(m<Da(o))s+=1;else if(m===Da(o))if(e.mode==="time_aware"){const f=Math.min(new Date().getTime(),h.getTime()+qn)-h.getTime(),y=Math.max(0,Math.min(1,f/qn));(e.includeZeroDays||p>0||y>0)&&(s+=y)}else(e.includeZeroDays||p>0)&&(s+=1)}}const c=Gn(s/i*100),u=Math.max(0,i-s);return{totalEligible:i,elapsedEligible:s,daysLeft:u,calendarPercent:c}}function tc(e){const t=Math.max(0,e.target||0),a=Math.max(0,e.actual||0),o=t>0?Gn(a/t*100):0,r=t-a,n=a-t,l=e.pace.daysLeft>0?Math.max(0,r)/e.pace.daysLeft:0,i=o-e.pace.calendarPercent,s=em({percent:o,target:t,gap:i,thresholds:e.thresholds});return{id:e.id,label:e.label,actualHours:Nt(a),targetHours:Nt(t),percent:o,deltaHours:Nt(n),remainingHours:Nt(Math.max(0,r)),needPerDay:Nt(l),daysLeft:Math.max(0,Math.ceil(e.pace.daysLeft)),calendarPercent:Gn(e.pace.calendarPercent),gap:Nt(i),status:s,statusLabel:tm(s),includeWeekend:e.includeWeekend,paceMode:e.paceMode}}function em(e){return e.target<=0?"none":e.percent>=100?"done":e.gap>=e.thresholds.onTrack?"on_track":e.gap>=e.thresholds.atRisk?"at_risk":"behind"}function tm(e){switch(e){case"on_track":return io("On Track");case"at_risk":return io("At Risk");case"behind":return io("Behind");case"done":return io("Done");default:return""}}function am(e,t,a){if(!Array.isArray(t))return 0;const o=Array.isArray(e.groupIds)&&e.groupIds.length?new Set(e.groupIds):null;let r=0;for(const n of t){const l=Number((n==null?void 0:n.total_hours)??(n==null?void 0:n.hours)??0);if(!Number.isFinite(l)||l<=0)continue;const i=String((n==null?void 0:n.id)??(n==null?void 0:n.calendar)??""),s=Number((n==null?void 0:n.group)??(n==null?void 0:n.group_id)??(a==null?void 0:a[i])??0);o&&!o.has(s)||(r+=l)}return r}function om(e){const t=new Map;if(!Array.isArray(e))return t;for(const a of e){const o=String((a==null?void 0:a.date)??(a==null?void 0:a.day)??"");if(!o)continue;const r=Number((a==null?void 0:a.total_hours)??(a==null?void 0:a.hours)??0);Number.isFinite(r)&&t.set(o,r)}return t}function rm(e,t){const a=[];let o=zr(e);const r=zr(t).getTime();for(;o.getTime()<=r;)a.push(new Date(o)),o=new Date(o.getTime()+qn);return a}function ac(e){if(!e)return null;const t=e.split("-").map(o=>Number(o));if(t.length!==3||t.some(o=>!Number.isInteger(o)))return null;const a=new Date(Date.UTC(t[0],t[1]-1,t[2]));return Number.isNaN(a.getTime())?null:zr(a)}function zr(e){const t=new Date(e);return t.setUTCHours(0,0,0,0),t}function Da(e){return e.toISOString().slice(0,10)}function nm(e){const t=e.getUTCDay();return t===0||t===6}const Ea=1,sm=[{id:"total_only",title:"Focused",subtitle:"Keep it simple with one total goal",highlights:["Single weekly/monthly target","Great for personal overview","Upgradable later"],layers:{total:!0,categories:!1,calendars:!1},recommendedFor:"Individuals tracking a single workload"},{id:"total_plus_categories",title:"Balanced",subtitle:"Track balance across a few life areas",highlights:["Total goal plus key categories","Automatic category summaries","Calendar grouping suggestions"],layers:{total:!0,categories:!0,calendars:!1},recommendedFor:"Work/life blend with a handful of focus areas"},{id:"full_granular",title:"Power",subtitle:"Targets per category and calendar",highlights:["Detailed per-calendar goals","Category dashboards & pacing","Best for multi-project oversight"],layers:{total:!0,categories:!0,calendars:!0},recommendedFor:"Power users managing several project calendars"}],oc=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1"];function lm(e){const t={};return Object.entries(e).forEach(([a,o])=>{t[a]=Number((o*4).toFixed(2))}),t}function Rr(e){if(typeof e!="string")return null;const t=e.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(t))return null;if(t.length===4){const[,a,o,r]=t;return`#${a}${a}${o}${o}${r}${r}`.toUpperCase()}return t.toUpperCase()}function im(e){const t=new Set,a=[];return e.forEach((o,r)=>{const n=((o==null?void 0:o.id)||`cat_${r}`).trim()||`cat_${r}`;t.has(n)||(t.add(n),a.push({id:n,label:((o==null?void 0:o.label)||n).trim()||`Category ${r+1}`,targetHours:Number.isFinite(o==null?void 0:o.targetHours)?Number(o.targetHours):0,includeWeekend:!!(o!=null&&o.includeWeekend),paceMode:(o==null?void 0:o.paceMode)==="time_aware"?"time_aware":"days_only",color:Rr(o==null?void 0:o.color)??null}))}),a}function cm(e,t,a){const o={};if(!t.length)return o;const r=new Set(t.map(n=>n.id));return e.forEach(n=>{const l=a[n];r.has(l)&&(o[n]=l)}),o}function dm(){return sm}function rc(e,t,a){const o=[...new Set(a.filter(r=>t.some(n=>n.id===r)))];return e==="total_only"?{categories:[],assignments:{}}:{categories:[],assignments:Object.fromEntries(o.map(r=>[r,""]))}}function Yn(e,t,a,o){var y;const r=[...new Set(a.filter(C=>t.some($=>$.id===C)))],n=At(da()),l={},i={};if(e==="total_only"){const C=ua(n);return C.totalHours=C.totalHours||40,C.categories=[],C.ui.showCategoryBlocks=!1,C.ui.showCategoryCharts=!1,C.ui.showCalendarCharts=!1,{selected:r,targetsConfig:At(C),groups:l,targetsWeek:i,targetsMonth:{}}}const s=rc(e,t,r),c=im((y=o==null?void 0:o.categories)!=null&&y.length?o.categories:s.categories),u=cm(r,c.length?c:s.categories,(o==null?void 0:o.assignments)??s.assignments),h=ua(n),m=new Map;let p=0;const d=C=>{const $=Rr(C.color);if($)return $;const E=t.find(P=>u[P.id]===C.id&&Rr(P.color));if(E)return Rr(E.color)??null;const T=oc[p%oc.length];return p+=1,T??null};h.categories=c.map((C,$)=>{const E=$+1;return m.set(C.id,E),{id:C.id,label:C.label,targetHours:Number(C.targetHours.toFixed(2)),includeWeekend:C.includeWeekend,paceMode:C.paceMode,color:d(C),groupIds:[E]}}),h.totalHours=h.categories.reduce((C,$)=>C+$.targetHours,0),h.totalHours<=0&&(h.totalHours=40),h.ui.showCategoryBlocks=h.categories.length>0,h.ui.showCategoryCharts=h.categories.length>0,h.ui.showCalendarCharts=e==="full_granular",h.includeZeroDaysInStats=!1,h.balance.categories=h.categories.map(C=>C.id),h.balance.useCategoryMapping=!0;const f={};return Object.values(u).forEach(C=>{f[C]=(f[C]??0)+1}),Object.entries(u).forEach(([C,$])=>{const E=m.get($);if(E&&(l[C]=E,e==="full_granular")){const T=h.categories.find(w=>w.id===$);if(!T)return;const P=f[$]||1,I=Number((T.targetHours/P).toFixed(2));i[C]=I}}),{selected:r,targetsConfig:At(h),groups:l,targetsWeek:i,targetsMonth:lm(i)}}function Ro(){return{enabled:!1,schedule:"both",interim:"none",reminderLead:"1d",alertOnRisk:!0,riskThreshold:.85,notifyEmail:!0,notifyNotification:!0}}function Zn(e,t){const a=t??Ro();if(!e||typeof e!="object")return{...a};const o=e.schedule==="week"||e.schedule==="month"?e.schedule:"both",r=e.interim==="midweek"||e.interim==="daily"?e.interim:"none",n=e.reminderLead==="1d"||e.reminderLead==="2d"?e.reminderLead:"none",l=Number(e.riskThreshold),i=Number.isFinite(l)&&l>=0&&l<=1?l:a.riskThreshold;return{enabled:!!e.enabled,schedule:o,interim:r,reminderLead:n,alertOnRisk:e.alertOnRisk!==!1,riskThreshold:i,notifyEmail:e.notifyEmail!==!1,notifyNotification:!!e.notifyNotification}}function jo(){return{enabled:!0,filtersEnabled:!0,defaultFilter:"all",hiddenBoards:[],mineMode:"assignee",solvedIncludesArchived:!0,ticker:{autoScroll:!0,intervalSeconds:5,showBoardBadges:!0}}}function Xn(e,t){var h,m,p;const a=t??jo();if(!e||typeof e!="object")return{...a};const o=(d,f)=>{if(typeof d=="boolean")return d;if(typeof d=="number")return d===1?!0:d===0?!1:f;if(typeof d=="string"){const y=d.trim().toLowerCase();if(["1","true","yes","on"].includes(y))return!0;if(["0","false","no","off","null",""].includes(y))return!1}return f},r=d=>{const f=Number(d);return!Number.isInteger(f)||f<=0||f>1e5?null:f},l=["all","mine","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine"].includes(e.defaultFilter)?e.defaultFilter:"all",i=e.mineMode==="creator"||e.mineMode==="both"?e.mineMode:"assignee",s=o(e.solvedIncludesArchived,a.solvedIncludesArchived),c={autoScroll:o((h=e.ticker)==null?void 0:h.autoScroll,a.ticker.autoScroll),intervalSeconds:um((m=e.ticker)==null?void 0:m.intervalSeconds,a.ticker.intervalSeconds),showBoardBadges:o((p=e.ticker)==null?void 0:p.showBoardBadges,a.ticker.showBoardBadges)},u=Array.isArray(e.hiddenBoards)?Array.from(new Set(e.hiddenBoards.map(d=>r(d)).filter(d=>Number.isInteger(d)&&d>0))):a.hiddenBoards.slice();return{enabled:o(e.enabled,a.enabled),filtersEnabled:o(e.filtersEnabled,a.filtersEnabled),defaultFilter:l,hiddenBoards:u,mineMode:i,solvedIncludesArchived:s,ticker:c}}function um(e,t){const a=Number(e);return Number.isFinite(a)?Math.min(10,Math.max(3,Math.trunc(a))):t}class Qn extends Error{constructor(t,a,o){super(t),this.status=a,this.body=o}}async function fm(e){const t=Date.parse(e.from),a=Date.parse(e.to);if(!Number.isFinite(t)||!Number.isFinite(a)||t>a)return[];const o=e.includeCompleted!==!1,r=e.includeArchived!==!1,n=await nc();if(n.length===0)return[];const l=new Map;n.forEach(s=>{s.id!=null&&l.set(s.id,{id:s.id,title:s.title||`Board ${s.id}`,color:ic(s.color)})});const i=[];for(const s of n){if(s.id==null)continue;let c;const u=r?{details:1,archived:1,includeArchived:1}:{details:1};try{c=await Ur(Vr(`/apps/deck/api/v1/boards/${s.id}/stacks`,u))}catch(d){if(cc(d))continue;if(d instanceof Qn&&d.status===400){const f=r?{archived:1,includeArchived:1}:void 0;c=await Ur(Vr(`/apps/deck/api/v1/boards/${s.id}/stacks`,f))}else throw d}const h=sc(c);let m=[];if(r)try{const d=await Ur(Vr(`/apps/deck/api/v1/boards/${s.id}/stacks/archived`));m=sc(d)}catch{}const p=[...h.map(d=>({stack:d,forceArchived:!1})),...m.map(d=>({stack:d,forceArchived:!0}))];for(const{stack:d,forceArchived:f}of p){if(d.cards==null||d.id==null)continue;const y=d.title||`Stack ${d.id}`;for(const C of d.cards){const $=pm(C,l.get(s.id),{stackId:d.id,stackTitle:y},{forceArchived:f});if(!$)continue;if(!($.dueTs!=null||$.doneTs!=null)){if($.status==="archived"&&!r)continue;i.push({...$,match:"due"});continue}if($.status==="archived"&&!r)continue;const T=$.dueTs!=null&&lc($.dueTs,t,a),P=o&&$.doneTs!=null&&lc($.doneTs,t,a),I=$.status!=="active",w=o&&(P||I&&T);!(T&&!w)&&!w||i.push({...$,match:w?"completed":"due"})}}}return i.sort((s,c)=>{const u=Number.MAX_SAFE_INTEGER,h=s.match==="due"?s.dueTs??s.doneTs??u:s.doneTs??s.dueTs??u,m=c.match==="due"?c.dueTs??c.doneTs??u:c.doneTs??c.dueTs??u;return h!==m?h-m:s.boardId!==c.boardId?s.boardId-c.boardId:s.id-c.id})}async function nc(){let e;try{e=await Ur(Vr("/apps/deck/api/v1/boards",{details:0}))}catch(t){if(cc(t))return[];throw t}return gm(e)}function gm(e){if(Array.isArray(e))return e;if(e&&typeof e=="object"){if(Array.isArray(e.data))return e.data;if(e.ocs&&Array.isArray(e.ocs.data))return e.ocs.data}return[]}function sc(e){if(Array.isArray(e))return e;if(e&&typeof e=="object"){if(Array.isArray(e.data))return e.data;if(e.ocs&&Array.isArray(e.ocs.data))return e.ocs.data}return[]}function pm(e,t,a,o){var h,m,p,d;if(!e||typeof e!="object"||e.id==null||!a)return null;const r=es(e.duedate),n=es(e.done),l=es(e.createdAt??e.created),i=e.boardId||(t==null?void 0:t.id);if(i==null)return null;const s=!!e.archived||!!(o!=null&&o.forceArchived),c=s?"archived":n!=null?"done":"active",u=(t==null?void 0:t.title)||`Board ${i}`;return{id:e.id,title:e.title||`Card ${e.id}`,description:e.description||"",boardId:i,boardTitle:u,boardColor:t==null?void 0:t.color,stackTitle:a.stackTitle,stackId:a.stackId,due:r!=null?new Date(r).toISOString():void 0,dueTs:r??void 0,done:n!=null?new Date(n).toISOString():void 0,doneTs:n??void 0,archived:s,status:c,created:l!=null?new Date(l).toISOString():void 0,createdTs:l??void 0,createdBy:(h=jr(e.owner??e.createdBy??e.creator))==null?void 0:h.uid,createdByDisplay:(m=jr(e.owner??e.createdBy??e.creator))==null?void 0:m.displayName,doneBy:(p=jr(e.doneBy??e.completedBy??e.lastEditor))==null?void 0:p.uid,doneByDisplay:(d=jr(e.doneBy??e.completedBy??e.lastEditor))==null?void 0:d.displayName,labels:Array.isArray(e.labels)?e.labels.filter(f=>!!(f&&typeof f=="object")).map(f=>({id:f.id,title:f.title||`Label ${f.id??""}`.trim(),color:ic(f.color)})):[],assignees:Array.isArray(e.assignedUsers)?e.assignedUsers.map(f=>hm(f)).filter(Boolean):[],match:"due"}}function hm(e){if(!e)return null;const t=e.participant;if(t&&typeof t=="object"){const a=typeof t.uid=="string"?t.uid:void 0,o=typeof t.displayname=="string"?t.displayname:void 0;if(a||o)return{id:e.id,uid:a,displayName:o}}return typeof t=="string"?{id:e.id,uid:t}:null}function jr(e){if(!e)return null;if(typeof e=="string"){const t=e.trim();return t?{uid:t}:null}if(typeof e=="object"){const t=typeof e.uid=="string"?e.uid:typeof e.participant=="string"?e.participant:void 0,a=typeof e.displayname=="string"?e.displayname:typeof e.id=="string"||typeof e.id=="number"?String(e.id):void 0;if(t||a)return{uid:t,displayName:a}}return null}function es(e){if(typeof e=="number"&&Number.isFinite(e))return e>1e12?Math.trunc(e):e*1e3;if(typeof e=="string"&&e.trim()!==""){const t=Date.parse(e);return Number.isFinite(t)?t:null}return null}function lc(e,t,a){return e>=t&&e<=a}function ic(e){if(!e||typeof e!="string")return;const t=e.trim();if(t!=="")return t.startsWith("#")?t:`#${t}`}async function Ur(e){const t={Accept:"application/json","OCS-APIREQUEST":"true"},a=vm();a&&(t.requesttoken=a);const o=await fetch(e,{credentials:"same-origin",headers:t}),r=await o.text();if(!o.ok)throw new Qn(`Deck request failed (${o.status})`,o.status,r);return r?JSON.parse(r):null}function Vr(e,t){var i,s,c;const a=e.startsWith("/")?e:`/${e}`,o=t?mm(t):"",r=typeof window<"u"?window:{};if(r.OC&&typeof r.OC.generateUrl=="function"){const u=r.OC.generateUrl(a);return o?`${u}?${o}`:u}const n=r.OC&&(r.OC.webroot||((s=(i=r.OC).getRootPath)==null?void 0:s.call(i)))||r._oc_webroot||"",l=typeof((c=r.location)==null?void 0:c.origin)=="string"?r.location.origin:"";return n?o?`${n}${a}?${o}`:`${n}${a}`:l?o?`${l}${a}?${o}`:`${l}${a}`:o?`${a}?${o}`:a}function mm(e){const t=new URLSearchParams;return Object.entries(e).forEach(([a,o])=>{o!=null&&t.append(a,String(o))}),t.toString()}function vm(){var a;const e=typeof window<"u"?window:{},t=((a=e.OC)==null?void 0:a.requestToken)||e.oc_requesttoken;return typeof t=="string"?t:void 0}function cc(e){return e instanceof Qn&&(e.status===404||e.status===401||e.status===503)}function bm(e){var on,or;const{props:t,emit:a}=e,o=["intro","strategy","dashboard","calendars","categories","preferences","review"],r=ie(0),n=ie("total_only"),l=ie(t.initialDashboardMode||"standard"),i=ie(t.hasExistingConfig?"existing":"new"),s=ie(!1),c=ie(""),u=ie([]),h=ie([]),m=ie({}),p=ie({}),d=ie("auto"),f=ie(8),y=ie(null),C=ie(3),$=ie(xt(t.initialDeckSettings??jo())),E=ie({...t.initialReportingConfig??Ro()}),T=ie({showDayOffTrend:((or=(on=t.initialTargetsConfig)==null?void 0:on.activityCard)==null?void 0:or.showDayOffTrend)??!0}),P=ie([]),I=ie(!1),w=ie(""),A=[{id:"quick",title:"Quick",subtitle:"Minimal, KPI-first layout",highlights:["Time summary + targets","Balance index","Days-off trend"],widgets:"4 widgets"},{id:"standard",title:"Standard",subtitle:"Balanced layout with charts",highlights:["Targets + time summary","Balance & category mix","Calendar table + charts"],widgets:"11 widgets"},{id:"pro",title:"Pro",subtitle:"Full layout with everything",highlights:["Everything in Standard","Deck cards + notes editor","Extended charts"],widgets:"13 widgets"}],O=[{id:"work_hobby_sport",title:"Work / Hobby / Sport",description:"Simple split for work, play, and fitness.",categories:[{id:"work",label:"Work",targetHours:32,includeWeekend:!1,paceMode:"days_only",color:"#2563EB"},{id:"hobby",label:"Hobby",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#F97316"},{id:"sport",label:"Sport",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#10B981"}],colors:["#2563EB","#F97316","#10B981"]},{id:"focus_personal_recovery",title:"Focus / Personal / Recovery",description:"Balance deep work, personal time, and rest.",categories:[{id:"focus",label:"Focus",targetHours:30,includeWeekend:!1,paceMode:"days_only",color:"#6366F1"},{id:"personal",label:"Personal",targetHours:8,includeWeekend:!0,paceMode:"days_only",color:"#EC4899"},{id:"recovery",label:"Recovery",targetHours:6,includeWeekend:!0,paceMode:"days_only",color:"#14B8A6"}],colors:["#6366F1","#EC4899","#14B8A6"]},{id:"client_internal_learning",title:"Client / Internal / Learning",description:"Great for agency or team workloads.",categories:[{id:"client",label:"Client",targetHours:28,includeWeekend:!1,paceMode:"days_only",color:"#0EA5E9"},{id:"internal",label:"Internal",targetHours:8,includeWeekend:!1,paceMode:"days_only",color:"#F59E0B"},{id:"learning",label:"Learning",targetHours:4,includeWeekend:!0,paceMode:"days_only",color:"#22C55E"}],colors:["#0EA5E9","#F59E0B","#22C55E"]}],z=N(()=>{if(!$.value.enabled)return[];const ee=new Set($.value.hiddenBoards||[]);return P.value.filter(te=>!ee.has(te.id))}),J=N(()=>{if(!$.value.enabled)return"Deck tab disabled";if(I.value)return"Deck tab enabled  loading boards";if(w.value)return"Deck tab enabled  open Deck to finish setup.";if(!P.value.length)return"Deck tab enabled  create a Deck board to see cards.";if(!z.value.length)return"Deck tab enabled  all boards hidden";if(z.value.length===P.value.length){const ee=z.value.length;return ee===1?"Showing 1 board":`Showing all ${ee} boards`}return z.value.length===1?`Showing ${z.value[0].title}`:z.value.length===2?`Showing ${z.value[0].title} and ${z.value[1].title}`:`Showing ${z.value.length} boards`}),H=N(()=>{if(!E.value.enabled)return"Recap disabled";const ee=E.value.schedule==="both"?"Weekly + monthly recap":E.value.schedule==="week"?"Weekly recap":"Monthly recap",te=E.value.interim==="daily"?"Daily reminder":E.value.interim==="midweek"?"Mid-range reminder":"No interim reminder";return`${ee}  ${te}`}),x=ie(null),v=N(()=>d.value==="auto"?t.systemTheme==="dark"?"dark":"light":d.value),b=N(()=>t.systemTheme==="dark"?"dark":"light"),j=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],F=N(()=>h.value.reduce((ee,te)=>ee+(Number.isFinite(te.targetHours)?te.targetHours:0),0)),X=N(()=>{const ee=new Set,te=we=>{const rt=st(we);rt&&ee.add(rt)};return t.calendars.forEach(we=>te(we.color)),h.value.forEach(we=>te(we.color)),j.forEach(we=>ee.add(we)),Array.from(ee)}),ne=dm(),Y=N(()=>ne.find(ee=>ee.id===n.value)??ne[0]),re=N(()=>Y.value.layers.categories),se=N(()=>Y.value.layers.calendars),fe=N(()=>t.closable!==!1),ce=N(()=>o.filter(ee=>ee==="categories"?re.value:!0)),V=N(()=>ce.value[Math.min(r.value,ce.value.length-1)]),G=N(()=>r.value+1),M=N(()=>ce.value.length),B=N(()=>t.saving===!0),K=N(()=>t.snapshotSaving===!0),oe=N(()=>t.snapshotNotice??null),ve="opsdash-onboarding-lock";function S(ee){if(typeof document>"u")return;const te=document.body;te&&(ee?(te.classList.add(ve),te.dataset.opsdashOnboarding="1"):(te.classList.remove(ve),delete te.dataset.opsdashOnboarding))}Ae(()=>t.visible,ee=>{ee&&(R(),at()),S(ee)},{immediate:!0}),$t(()=>{typeof document<"u"&&document.addEventListener("click",Fe),ta().catch(ee=>{console.error("[opsdash] deck board load failed",ee)})}),Dn(()=>{typeof document<"u"&&document.removeEventListener("click",Fe),S(!1)});function R(ee){var He,Ut,rr;const te=ee??(t.hasExistingConfig?"existing":"new");i.value=te;const we=te==="existing";r.value=0,n.value=we?t.initialStrategy??"total_only":"total_only",l.value=we&&t.initialDashboardMode||"standard";const rt=we?[...t.initialSelection??[]]:[];u.value=Array.from(new Set(rt.filter(mo=>t.calendars.some(nr=>nr.id===mo)))),d.value=we?t.initialThemePreference??"auto":"auto",f.value=Re(we?t.initialAllDayHours??8:8),y.value=Ue(we?t.initialTotalHours??null:null),C.value=ft(we?((He=t.initialTargetsConfig)==null?void 0:He.balanceTrendLookback)??3:3),p.value={},we&&Object.entries(t.initialTargetsWeek??{}).forEach(([mo,nr])=>{t.calendars.some(Ts=>Ts.id===mo)&&(p.value[mo]=zo(nr))}),$.value=xt(we?t.initialDeckSettings??jo():jo()),E.value={...we?t.initialReportingConfig??Ro():Ro()},T.value={showDayOffTrend:we?((rr=(Ut=t.initialTargetsConfig)==null?void 0:Ut.activityCard)==null?void 0:rr.showDayOffTrend)??!0:!0},t.hasExistingConfig?(s.value=te==="new",c.value=""):(s.value=!1,c.value=""),Q(),re.value?h.value.length?y.value=Ue(F.value):y.value=null:y.value===null&&we&&(y.value=Ue(t.initialTotalHours??40)),be()}function L(ee){i.value!==ee&&R(ee)}function U(ee){s.value=ee,ee||(c.value="")}function q(ee){c.value=ee}function Q(){var ee;if(!re.value){h.value=[],m.value={},ke();return}if(i.value==="existing"&&((ee=t.initialCategories)!=null&&ee.length))h.value=zt(t.initialCategories),m.value={...t.initialAssignments??{}};else{const te=rc(n.value,t.calendars,u.value);h.value=te.categories.map(we=>({...we})),m.value={...te.assignments}}ge(),ke()}function ge(){if(!re.value||!h.value.length){m.value={};return}const ee=new Set(h.value.map(we=>we.id)),te={};u.value.forEach(we=>{const rt=m.value[we];te[we]=ee.has(rt)?rt:""}),m.value=te}const ue=N(()=>t.calendars.filter(ee=>u.value.includes(ee.id))),le=N(()=>Yn(n.value,t.calendars,u.value,re.value?{categories:h.value,assignments:m.value}:void 0)),de=N(()=>Y.value.title);function ke(){if(re.value){y.value=Ue(F.value);return}y.value===null&&(y.value=i.value==="existing"?Ue(t.initialTotalHours??40):null)}function be(){if(!t.startStep)return;const ee=ce.value.indexOf(t.startStep);ee>=0&&(r.value=ee)}function me(ee){const te=ce.value.indexOf(ee);te>=0&&(r.value=te)}function ye(ee){switch(ee){case"intro":return"Intro";case"strategy":return"Modes";case"dashboard":return"Dashboard";case"calendars":return"Calendars";case"categories":return"Targets";case"preferences":return"Preferences";case"review":return"Review";default:return ee}}Ae(n,()=>{Q(),r.value=Math.min(r.value,ce.value.length-1)}),Ae(ce,ee=>{r.value>=ee.length&&(r.value=Math.max(ee.length-1,0))}),Ae(()=>t.startStep,be),Ae(re,()=>{ke()}),Ae(F,ee=>{re.value&&(y.value=Ue(ee))}),Ae(V,ee=>{ee!=="categories"&&at()}),Ae(()=>t.visible,ee=>{ee||at()}),Ae(u,()=>{const ee=new Set(u.value),te={};Object.entries(p.value).forEach(([we,rt])=>{ee.has(we)&&(te[we]=rt)}),p.value=te,ge()},{deep:!0}),Ae(h,()=>{ge()},{deep:!0});function Ce(){const ee=`cat_${Date.now().toString(36)}_${h.value.length}`;h.value=[...h.value,{id:ee,label:`Category ${h.value.length+1}`,targetHours:8,includeWeekend:!1,paceMode:"days_only"}],ge()}function _e(ee){h.value.length<=1||(h.value=h.value.filter(te=>te.id!==ee),ge())}function Se(ee,te){h.value=h.value.map(we=>we.id===ee?{...we,label:te}:we)}function $e(ee){h.value=ee.categories.map((te,we)=>({id:String(te.id||`cat_${we}`),label:te.label||`Category ${we+1}`,targetHours:Number.isFinite(te.targetHours)?Number(te.targetHours):0,includeWeekend:!!te.includeWeekend,paceMode:te.paceMode==="time_aware"?"time_aware":"days_only",color:st(te.color)??null})),m.value={},ge(),ke()}function Ne(ee,te){const we=Number(te),rt=Number.isFinite(we)?Math.max(0,Math.min(1e3,we)):void 0;h.value=h.value.map(He=>He.id===ee?{...He,targetHours:rt??He.targetHours}:He)}function Oe(ee,te){h.value=h.value.map(we=>we.id===ee?{...we,includeWeekend:te}:we)}function We(ee,te){m.value={...m.value,[ee]:te}}function ht(ee){if(x.value===ee){at();return}x.value=ee,Xt(()=>{const te=document.getElementById(`onboarding-color-popover-${ee}`);te==null||te.focus()})}function at(){x.value=null}function Fe(ee){const te=ee.target;te!=null&&te.closest("[data-color-popover]")||at()}function st(ee){if(typeof ee!="string")return null;const te=ee.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(te))return null;if(te.length===4){const[,we,rt,He]=te;return`#${we}${we}${rt}${rt}${He}${He}`.toUpperCase()}return te.toUpperCase()}function zt(ee){return Array.isArray(ee)?ee.map((te,we)=>({id:String((te==null?void 0:te.id)??`cat_${we}`).trim()||`cat_${we}`,label:String((te==null?void 0:te.label)??`Category ${we+1}`).trim()||`Category ${we+1}`,targetHours:Number.isFinite(te==null?void 0:te.targetHours)?Number(te.targetHours):0,includeWeekend:!!(te!=null&&te.includeWeekend),paceMode:(te==null?void 0:te.paceMode)==="time_aware"?"time_aware":"days_only",color:st(te==null?void 0:te.color)??null})):[]}function Ge(ee){return st(ee==null?void 0:ee.color)??ot.value}const ot=N(()=>X.value[0]??"#2563EB");function qe(ee,te){h.value=h.value.map(we=>we.id===ee?{...we,color:te}:we)}function Rt(ee,te){const we=st(te);qe(ee,we??ot.value)}function _t(ee,te){const we=st(te);qe(ee,we??ot.value),at()}function Re(ee){if(!Number.isFinite(ee))return 8;const te=Math.max(0,Math.min(24,ee));return Math.round(te*100)/100}function Ue(ee){if(!Number.isFinite(ee))return null;const te=Math.max(0,Math.min(1e3,Number(ee)));return Math.round(te*100)/100}function ft(ee){return Number.isFinite(ee)?Math.max(1,Math.min(6,Math.round(ee))):3}function xt(ee){return JSON.parse(JSON.stringify(ee))}async function ta(){if(I.value=!0,w.value="",!(typeof window<"u"&&typeof window.OC<"u")){I.value=!1,P.value=[];return}try{const te=await nc();P.value=te,w.value=""}catch{w.value="Unable to load Deck boards. Open Deck to create one.",P.value=[]}finally{I.value=!1}}function Na(ee){$.value={...$.value,enabled:ee}}function ka(ee){return!($.value.hiddenBoards||[]).includes(ee)}function Ft(ee,te){const we=new Set($.value.hiddenBoards||[]);te?we.delete(ee):we.add(ee),$.value={...$.value,hiddenBoards:Array.from(we).sort((rt,He)=>rt-He)}}function jt(ee,te){h.value=h.value.map(we=>we.id===ee?{...we,paceMode:te}:we)}function je(ee){if(re.value)return;const te=Number(ee.value);if(!Number.isFinite(te)){y.value=null;return}y.value=Ue(te)}function et(ee){const te=Number(ee.value);f.value=Re(Number.isFinite(te)?te:f.value)}function Ia(ee){const te=Number(ee.value);Number.isFinite(te)&&(C.value=ft(te))}function er(ee){E.value={...E.value,enabled:ee}}function Ba(ee){E.value={...E.value,schedule:ee}}function aa(ee){E.value={...E.value,interim:ee}}function en(ee){E.value={...E.value,...ee}}function bs(ee){T.value={...T.value,showDayOffTrend:ee}}const tn=N(()=>r.value>0),tr=N(()=>r.value<ce.value.length-1),an=N(()=>{if(V.value==="strategy")return!n.value;if(V.value==="calendars")return u.value.length===0;if(V.value==="categories"&&re.value){if(!u.value.length||!h.value.length)return!0;const ee=new Set(h.value.map(te=>te.id));if(u.value.some(te=>!ee.has(m.value[te]||"")))return!0}return!!(V.value==="preferences"&&(!re.value&&(y.value===null||y.value<0)||f.value<0||f.value>24)||V.value==="review"&&s.value&&c.value.trim()==="")});function ys(){tr.value&&!an.value&&r.value++}function ws(){tn.value&&r.value--}function ks(){a("skip")}function po(){fe.value&&a("close")}function ho(){const ee=Yn(n.value,t.calendars,u.value,re.value?{categories:h.value.map(He=>({...He})),assignments:{...m.value}}:void 0),te=ee.targetsConfig;if(te.allDayHours=Re(f.value),te.balance||(te.balance={basis:"events",trend:{lookbackWeeks:C.value}}),te.balance.trend||(te.balance.trend={lookbackWeeks:C.value}),te.balance.trend.lookbackWeeks=ft(C.value),re.value){const He=Ue(F.value);He!=null&&(te.totalHours=He)}else if(y.value!=null){const He=Ue(y.value);He!=null&&(te.totalHours=He)}const we={...ee.targetsWeek};Object.entries(p.value).forEach(([He,Ut])=>{u.value.includes(He)&&(we[He]=zo(Ut))});const rt=Object.fromEntries(Object.entries(we).map(([He,Ut])=>[He,ya(Ut)]));Object.keys(we).length&&(te.ui.showCalendarCharts=!0),a("complete",{strategy:n.value,selected:[...u.value],targetsConfig:te,groups:ee.groups,targetsWeek:we,targetsMonth:rt,themePreference:d.value,deckSettings:xt($.value),reportingConfig:{...E.value},activityCard:{...T.value},dashboardMode:l.value,saveProfile:s.value,profileName:s.value?c.value.trim():""})}function _s(){const ee=Yn(n.value,t.calendars,u.value,re.value?{categories:h.value.map(He=>({...He})),assignments:{...m.value}}:void 0),te=ee.targetsConfig;if(te.allDayHours=Re(f.value),te.balance||(te.balance={basis:"events",trend:{lookbackWeeks:C.value}}),te.balance.trend||(te.balance.trend={lookbackWeeks:C.value}),te.balance.trend.lookbackWeeks=ft(C.value),re.value){const He=Ue(F.value);He!=null&&(te.totalHours=He)}else if(y.value!=null){const He=Ue(y.value);He!=null&&(te.totalHours=He)}const we={...ee.targetsWeek};Object.entries(p.value).forEach(([He,Ut])=>{u.value.includes(He)&&(we[He]=zo(Ut))});const rt=Object.fromEntries(Object.entries(we).map(([He,Ut])=>[He,ya(Ut)]));return Object.keys(we).length&&(te.ui.showCalendarCharts=!0),{targetsConfig:te,groups:ee.groups,targetsWeek:we,targetsMonth:rt,selected:[...u.value]}}function xs(){return{completed:!1,version:t.onboardingVersion,strategy:n.value,completed_at:"",dashboardMode:l.value}}function ar(ee){const te=_s(),we=xs();return ee==="intro"?{onboarding:we}:ee==="strategy"?{onboarding:we,targets_config:te.targetsConfig,groups:te.groups,targets_week:te.targetsWeek,targets_month:te.targetsMonth}:ee==="dashboard"?{onboarding:we,dashboardMode:l.value}:ee==="calendars"?{cals:te.selected}:ee==="categories"?{targets_config:te.targetsConfig,groups:te.groups,targets_week:te.targetsWeek,targets_month:te.targetsMonth}:ee==="preferences"?{targets_config:te.targetsConfig,theme_preference:d.value,deck_settings:xt($.value),reporting_config:{...E.value},targets_config_activity:{...T.value}}:{cals:te.selected,targets_config:te.targetsConfig,groups:te.groups,targets_week:te.targetsWeek,targets_month:te.targetsMonth,theme_preference:d.value,deck_settings:xt($.value),reporting_config:{...E.value},targets_config_activity:{...T.value},onboarding:we}}function Cs(ee,te){if(te.checked){u.value.includes(ee)||(u.value=[...u.value,ee]);return}u.value=u.value.filter(we=>we!==ee)}function Ss(ee,te){const we=Number(te);if(!Number.isFinite(we)){const rt={...p.value};delete rt[ee],p.value=rt;return}p.value={...p.value,[ee]:zo(we)}}function $s(ee){return Number.isFinite(p.value[ee])?p.value[ee]:""}return{stepOrder:o,stepIndex:r,selectedStrategy:n,dashboardMode:l,profileMode:i,saveProfile:s,profileName:c,localSelection:u,categories:h,assignments:m,calendarTargets:p,themePreference:d,allDayHoursInput:f,totalHoursInput:y,trendLookbackInput:C,deckSettingsDraft:$,reportingDraft:E,activityDraft:T,deckBoards:P,deckBoardsLoading:I,deckBoardsError:w,dashboardPresets:A,deckVisibleBoards:z,deckReviewSummary:J,reportingSummary:H,openColorId:x,previewTheme:v,systemThemeLabel:b,categoryTotalHours:F,categoryColorPalette:X,categoryPresets:O,strategies:ne,categoriesEnabled:re,calendarTargetsEnabled:se,isClosable:fe,enabledSteps:ce,currentStep:V,stepNumber:G,totalSteps:M,saving:B,snapshotSaving:K,snapshotNotice:oe,selectedCalendars:ue,draft:le,strategyTitle:de,setProfileMode:L,setSaveProfile:U,setProfileName:q,applyStartStep:be,goToStep:me,stepLabel:ye,addCategory:Ce,removeCategory:_e,setCategoryLabel:Se,applyCategoryPreset:$e,setCategoryTarget:Ne,toggleCategoryWeekend:Oe,assignCalendar:We,setCalendarTarget:Ss,getCalendarTarget:$s,toggleColorPopover:ht,closeColorPopover:at,resolvedColor:Ge,applyColor:_t,onColorInput:Rt,setDeckEnabled:Na,isDeckBoardVisible:ka,toggleDeckBoard:Ft,setCategoryPaceMode:jt,onTotalHoursChange:je,onAllDayHoursChange:et,onTrendLookbackChange:Ia,setReportingEnabled:er,setReportingSchedule:Ba,setReportingInterim:aa,updateReporting:en,setActivityDayOff:bs,canGoBack:tn,canGoNext:tr,nextDisabled:an,nextStep:ys,prevStep:ws,handleSkip:ks,handleClose:po,emitComplete:ho,toggleCalendar:Cs,resetWizard:R,buildStepPayload:ar}}const ym={key:0,class:"onboarding-overlay",role:"dialog","aria-modal":"true"},wm={class:"onboarding-header"},km={class:"onboarding-title"},_m={class:"subtitle"},xm={class:"onboarding-actions"},Cm=["disabled"],Sm=["disabled"],$m={class:"onboarding-step-nav","aria-label":"Onboarding steps"},Tm=["disabled","onClick"],Mm={class:"onboarding-body"},Am={key:0,class:"onboarding-step"},Dm={key:1,class:"onboarding-step"},Em={key:2,class:"onboarding-step"},Lm={key:3,class:"onboarding-step"},Nm={key:4,class:"onboarding-step"},Im={key:5,class:"onboarding-step"},Bm={key:6,class:"onboarding-step"},Om={class:"onboarding-footer"},Pm=Le({__name:"OnboardingWizard",props:{visible:{type:Boolean},calendars:{},initialSelection:{},initialStrategy:{},startStep:{},onboardingVersion:{},saving:{type:Boolean},closable:{type:Boolean},initialThemePreference:{},systemTheme:{},initialAllDayHours:{},initialTotalHours:{},initialDeckSettings:{},initialReportingConfig:{},hasExistingConfig:{type:Boolean},initialCategories:{},initialAssignments:{},snapshotSaving:{type:Boolean},snapshotNotice:{},initialDashboardMode:{},initialTargetsWeek:{},initialTargetsConfig:{}},emits:["close","skip","complete","save-step","save-current-config"],setup(e,{emit:t}){const a=e,o=t,{stepNumber:r,totalSteps:n,enabledSteps:l,currentStep:i,isClosable:s,saving:c,stepLabel:u,goToStep:h,handleClose:m,handleSkip:p,canGoBack:d,canGoNext:f,nextDisabled:y,prevStep:C,nextStep:$,emitComplete:E,profileMode:T,saveProfile:P,profileName:I,themePreference:w,systemThemeLabel:A,previewTheme:O,totalHoursInput:z,categoryTotalHours:J,categoriesEnabled:H,calendarTargetsEnabled:x,onTotalHoursChange:v,allDayHoursInput:b,onAllDayHoursChange:j,trendLookbackInput:F,onTrendLookbackChange:X,deckSettingsDraft:ne,setDeckEnabled:Y,deckBoards:re,deckBoardsLoading:se,deckBoardsError:fe,isDeckBoardVisible:ce,toggleDeckBoard:V,reportingDraft:G,setReportingEnabled:M,setReportingSchedule:B,setReportingInterim:K,updateReporting:oe,activityDraft:ve,setActivityDayOff:S,dashboardMode:R,dashboardPresets:L,strategies:U,selectedStrategy:q,localSelection:Q,toggleCalendar:ge,categories:ue,selectedCalendars:le,assignments:de,calendarTargets:ke,addCategory:be,removeCategory:me,setCategoryLabel:ye,setCategoryTarget:Ce,setCategoryPaceMode:_e,toggleCategoryWeekend:Se,assignCalendar:$e,setCalendarTarget:Ne,getCalendarTarget:Oe,openColorId:We,toggleColorPopover:ht,closeColorPopover:at,categoryColorPalette:Fe,categoryPresets:st,resolvedColor:zt,applyColor:Ge,onColorInput:ot,draft:qe,strategyTitle:Rt,applyCategoryPreset:_t,deckReviewSummary:Re,deckVisibleBoards:Ue,reportingSummary:ft,setProfileMode:xt,setSaveProfile:ta,setProfileName:Na,buildStepPayload:ka}=bm({props:a,emit:o});function Ft(){o("save-step",ka(i.value))}return(jt,je)=>(k(),lt(kf,{name:"onboarding-fade"},{default:Xe(()=>[jt.visible?(k(),_("div",ym,[g("div",{class:"onboarding-backdrop",onClick:je[0]||(je[0]=(...et)=>D(m)&&D(m)(...et))}),g("div",{class:Be(["onboarding-panel",`theme-${D(O)}`]),onClick:je[3]||(je[3]=it(()=>{},["stop"]))},[g("header",wm,[g("div",km,[je[4]||(je[4]=g("h2",null,"Welcome to Opsdash",-1)),g("p",_m,"Step "+W(D(r))+" of "+W(D(n)),1)]),g("div",xm,[g("button",{type:"button",class:"skip-link",onClick:je[1]||(je[1]=(...et)=>D(p)&&D(p)(...et)),disabled:D(c)},"Maybe later",8,Cm),D(s)?(k(),_("button",{key:0,type:"button",class:"close-btn",disabled:D(c),onClick:je[2]||(je[2]=(...et)=>D(m)&&D(m)(...et)),"aria-label":"Close onboarding"},"  ",8,Sm)):ae("",!0)])]),g("nav",$m,[(k(!0),_(pe,null,xe(D(l),et=>(k(),_("button",{key:et,type:"button",class:Be(["step-pill",{active:et===D(i)}]),disabled:D(c),onClick:Ia=>D(h)(et)},W(D(u)(et)),11,Tm))),128))]),g("main",Mm,[D(i)==="intro"?(k(),_("section",Am,[Me(Fg,{"has-existing-config":a.hasExistingConfig??!1,"snapshot-saving":a.snapshotSaving??!1,saving:D(c),"snapshot-notice":a.snapshotNotice??null,"profile-mode":D(T),"set-profile-mode":D(xt),"on-save-current-config":()=>o("save-current-config")},null,8,["has-existing-config","snapshot-saving","saving","snapshot-notice","profile-mode","set-profile-mode","on-save-current-config"])])):D(i)==="preferences"?(k(),_("section",Dm,[Me(Mp,{"theme-preference":D(w),"system-theme-label":D(A),"preview-theme":D(O),"set-theme-preference":et=>w.value=et,"total-hours-input":D(z),"category-total-hours":D(J),"categories-enabled":D(H),"on-total-hours-change":D(v),"all-day-hours-input":D(b),"on-all-day-hours-change":D(j),"trend-lookback-input":D(F),"on-trend-lookback-change":D(X),"deck-settings-draft":D(ne),"set-deck-enabled":D(Y),"deck-boards":D(re),"deck-boards-loading":D(se),"deck-boards-error":D(fe),"is-deck-board-visible":D(ce),"toggle-deck-board":D(V),"reporting-draft":D(G),"set-reporting-enabled":D(M),"set-reporting-schedule":D(B),"set-reporting-interim":D(K),"update-reporting":D(oe),"activity-draft":D(ve),"set-activity-day-off":D(S)},null,8,["theme-preference","system-theme-label","preview-theme","set-theme-preference","total-hours-input","category-total-hours","categories-enabled","on-total-hours-change","all-day-hours-input","on-all-day-hours-change","trend-lookback-input","on-trend-lookback-change","deck-settings-draft","set-deck-enabled","deck-boards","deck-boards-loading","deck-boards-error","is-deck-board-visible","toggle-deck-board","reporting-draft","set-reporting-enabled","set-reporting-schedule","set-reporting-interim","update-reporting","activity-draft","set-activity-day-off"])])):D(i)==="dashboard"?(k(),_("section",Em,[Me(Lp,{"dashboard-mode":D(R),"set-dashboard-mode":et=>R.value=et,"dashboard-presets":D(L)},null,8,["dashboard-mode","set-dashboard-mode","dashboard-presets"])])):D(i)==="strategy"?(k(),_("section",Lm,[Me(Op,{strategies:D(U),"selected-strategy":D(q),"set-selected-strategy":et=>q.value=et},null,8,["strategies","selected-strategy","set-selected-strategy"])])):D(i)==="calendars"?(k(),_("section",Nm,[Me(Vp,{calendars:jt.calendars,"local-selection":D(Q),"toggle-calendar":D(ge),"calendar-targets":D(ke),"get-calendar-target":D(Oe),"set-calendar-target":D(Ne),"show-calendar-targets":D(x)},null,8,["calendars","local-selection","toggle-calendar","calendar-targets","get-calendar-target","set-calendar-target","show-calendar-targets"])])):D(i)==="categories"?(k(),_("section",Im,[Me(Lh,{"categories-enabled":D(H),categories:D(ue),"category-total-hours":D(J),"selected-calendars":D(le),assignments:D(de),"show-calendar-targets":D(x),"calendar-targets":D(ke),"get-calendar-target":D(Oe),"set-calendar-target":D(Ne),"add-category":D(be),"remove-category":D(me),"set-category-label":D(ye),"category-presets":D(st),"apply-category-preset":D(_t),"set-category-target":D(Ce),"set-category-pace-mode":D(_e),"toggle-category-weekend":D(Se),"assign-calendar":D($e),"open-color-id":D(We),"toggle-color-popover":D(ht),"close-color-popover":D(at),"category-color-palette":D(Fe),"resolved-color":D(zt),"apply-color":D(Ge),"on-color-input":D(ot)},null,8,["categories-enabled","categories","category-total-hours","selected-calendars","assignments","show-calendar-targets","calendar-targets","get-calendar-target","set-calendar-target","add-category","remove-category","set-category-label","category-presets","apply-category-preset","set-category-target","set-category-pace-mode","toggle-category-weekend","assign-calendar","open-color-id","toggle-color-popover","close-color-popover","category-color-palette","resolved-color","apply-color","on-color-input"])])):D(i)==="review"?(k(),_("section",Bm,[Me(jh,{"strategy-title":D(Rt),"categories-enabled":D(H),"selected-calendars":D(le),"draft-targets-categories":D(qe).targetsConfig.categories,"draft-total-hours":D(qe).targetsConfig.totalHours,"total-hours-input":D(z),"category-total-hours":D(J),"deck-review-summary":D(Re),"deck-enabled":D(ne).enabled,"deck-visible-boards":D(Ue),"reporting-enabled":D(G).enabled,"reporting-summary":D(ft),"show-day-off-trend":D(ve).showDayOffTrend,"theme-preference":D(w),"dashboard-mode":D(R),"save-profile":D(P),"profile-name":D(I),"show-save-profile":a.hasExistingConfig??!1,"set-save-profile":D(ta),"set-profile-name":D(Na)},null,8,["strategy-title","categories-enabled","selected-calendars","draft-targets-categories","draft-total-hours","total-hours-input","category-total-hours","deck-review-summary","deck-enabled","deck-visible-boards","reporting-enabled","reporting-summary","show-day-off-trend","theme-preference","dashboard-mode","save-profile","profile-name","show-save-profile","set-save-profile","set-profile-name"])])):ae("",!0)]),g("footer",Om,[D(d)?(k(),lt(D(ut),{key:0,type:"tertiary",disabled:D(c),onClick:D(C)},{default:Xe(()=>[...je[5]||(je[5]=[Pe("Back",-1)])]),_:1},8,["disabled","onClick"])):ae("",!0),Me(D(ut),{type:"tertiary",disabled:D(c)||D(y),onClick:Ft},{default:Xe(()=>[...je[6]||(je[6]=[Pe("Save step",-1)])]),_:1},8,["disabled"]),D(f)?(k(),lt(D(ut),{key:1,type:"primary",disabled:D(y)||D(c),onClick:D($)},{default:Xe(()=>[...je[7]||(je[7]=[Pe("Continue",-1)])]),_:1},8,["disabled","onClick"])):(k(),lt(D(ut),{key:2,type:"primary",disabled:D(c)||D(y),onClick:D(E)},{default:Xe(()=>[...je[8]||(je[8]=[Pe(" Start dashboard ",-1)])]),_:1},8,["disabled","onClick"]))])],2)])):ae("",!0)]),_:1}))}}),Fm=["onKeydown"],Hm={class:"shortcuts-body"},Wm={class:"shortcut-label"},zm={key:0},Rm={class:"shortcut-combo","aria-hidden":"true"},jm={class:"shortcuts-footer"},Um=Qe(Le({__name:"KeyboardShortcutsModal",props:{visible:{type:Boolean},groups:{}},emits:["close"],setup(e,{emit:t}){const a=e,o=t,r=ie(null);function n(){o("close")}return Ae(()=>a.visible,l=>{l&&Xt(()=>{var i;(i=r.value)==null||i.focus()}).catch(()=>{})}),(l,i)=>l.visible?(k(),_("div",{key:0,class:"shortcuts-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"opsdash-shortcuts-title",onClick:it(n,["self"])},[g("div",{ref_key:"panelRef",ref:r,class:"shortcuts-panel",tabindex:"-1",onKeydown:so(it(n,["prevent"]),["esc"])},[g("header",{class:"shortcuts-header"},[i[0]||(i[0]=g("div",{class:"shortcuts-title"},[g("h2",{id:"opsdash-shortcuts-title"},"Keyboard Shortcuts"),g("p",{class:"shortcuts-hint"},"Press Esc to close or ? to reopen.")],-1)),g("button",{type:"button",class:"shortcuts-close","aria-label":"Close shortcuts overlay",onClick:n},"  ")]),g("div",Hm,[(k(!0),_(pe,null,xe(l.groups,s=>(k(),_("section",{key:s.id,class:"shortcuts-group"},[g("h3",null,W(s.title),1),g("ul",null,[(k(!0),_(pe,null,xe(s.items,c=>(k(),_("li",{key:c.id},[g("span",Wm,[Pe(W(c.label)+" ",1),c.description?(k(),_("small",zm,W(c.description),1)):ae("",!0)]),g("span",Rm,[(k(!0),_(pe,null,xe(c.combo,(u,h)=>(k(),_("kbd",{key:h},W(u),1))),128))])]))),128))])]))),128))]),g("footer",jm,[Me(D(ut),{type:"primary",size:"small",onClick:n},{default:Xe(()=>[...i[1]||(i[1]=[Pe(" Close ",-1)])]),_:1})])],40,Fm)])):ae("",!0)}}),[["__scopeId","data-v-f8126e32"]]),zC="modulepreload",RC=function(e){return"/"+e},jC={},It=function(t,a,o){let r=Promise.resolve();function n(l){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=l,window.dispatchEvent(i),!i.defaultPrevented)throw l}return r.then(l=>{for(const i of l||[])i.status==="rejected"&&n(i.reason);return t().catch(n)})};function Vm(e,t){const a=JSON.parse(JSON.stringify(e||{}));return t==="month"&&(a.totalHours=ya(a.totalHours??0),a.categories=(a.categories||[]).map(o=>({...o,targetHours:ya(o.targetHours??0)}))),a}function Km(e){return{...e,ui:{...(e==null?void 0:e.ui)??{}}}}function qm(e,t){try{return Qi({config:e,stats:t.stats,byDay:t.byDay||[],byCal:t.byCal||[],groupsById:t.groupsById||{},range:t.rangeMode==="month"?"month":"week",from:t.from||"",to:t.to||""})}catch(a){return console.error("[opsdash] targets widget local summary failed",a),Xi(e)}}function Bt(e,t){if(!t)return e;const a=String(t).trim();return a?`${a}  ${e}`:e}function Uo(e,t){if(t!=null&&t!==""){const o=Number(t);if(Number.isFinite(o))return o}const a=Number(e);return Number.isFinite(a)?a:void 0}function ts(e){return Array.isArray(e)?Array.from(new Set(e.map(t=>Number(t)).filter(t=>Number.isInteger(t)&&t>0))):typeof e=="string"?ts(e.split(",")):[]}function dc(e){return Array.isArray(e)?e.map(t=>String(t).trim()).filter(Boolean):typeof e=="string"?e.split(",").map(t=>t.trim()).filter(Boolean):["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"]}function Ot(e){switch(e){case"all":return"All cards";case"mine":return"Mine (any status)";case"open_all":return"Open  All";case"open_mine":return"Open  Mine";case"done_all":return"Done  All";case"done_mine":return"Done  Mine";case"archived_all":return"Archived  All";case"archived_mine":return"Archived  Mine";case"due_all":return"Due  All";case"due_mine":return"Due  Mine";case"due_today_all":return"Due today  All";case"due_today_mine":return"Due today  Mine";case"created_today_all":return"Created today  All";case"created_today_mine":return"Created today  Mine";case"created_range_all":return"Created this range  All";case"created_range_mine":return"Created this range  Mine";default:return e}}const Gm=Et(()=>It(()=>Promise.resolve().then(()=>z0),void 0).then(e=>e.default)),uc="Balance Index",Jm={component:Gm,defaultLayout:{width:"half",height:"s",order:32},label:"Balance Index",baseTitle:uc,configurable:!0,supportsColors:!0,defaultOptions:(()=>{const e=lo();return{showTrend:!0,showMessages:!0,showConfig:!0,indexBasis:e.index.basis,noticeAbove:e.thresholds.noticeAbove,noticeBelow:e.thresholds.noticeBelow,warnAbove:e.thresholds.warnAbove,warnBelow:e.thresholds.warnBelow,warnIndex:e.thresholds.warnIndex,lookbackWeeks:e.trend.lookbackWeeks,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1}})(),controls:[{key:"showConfig",label:"Show config summary",type:"toggle"},{key:"showTrend",label:"Show trend",type:"toggle"},{key:"showMessages",label:"Show messages",type:"toggle"},{key:"lookbackWeeks",label:"Trend lookback (weeks)",type:"number",min:1,max:6,step:1},{key:"messageDensity",label:"Messages shown",type:"select",options:[{value:"few",label:"Few"},{value:"normal",label:"Normal"},{value:"many",label:"Many"}]},{key:"indexBasis",label:"Index basis",type:"select",options:[{value:"off",label:"Disabled"},{value:"category",label:"Total categories"},{value:"calendar",label:"Total calendars"},{value:"both",label:"Categories + calendars"}]},{key:"noticeAbove",label:"Notice above target",type:"number",min:0,max:1,step:.01},{key:"noticeBelow",label:"Notice below target",type:"number",min:0,max:1,step:.01},{key:"warnAbove",label:"Warn above target",type:"number",min:0,max:1,step:.01},{key:"warnBelow",label:"Warn below target",type:"number",min:0,max:1,step:.01},{key:"warnIndex",label:"Warn index",type:"number",min:0,max:1,step:.01},{key:"trendColor",label:"Trend color",type:"color"},{key:"showCurrent",label:"Show current period",type:"toggle"},{key:"reverseTrend",label:"Oldest first (reverse)",type:"toggle"},{key:"labelMode",label:"Trend label",type:"select",options:[{value:"date",label:"Date range"},{value:"period",label:"Week/Month"},{value:"offset",label:"Offset only"}]}],buildProps:(e,t)=>{var f,y,C,$,E,T,P,I,w,A,O,z,J,H,x,v,b,j,F,X,ne,Y,re,se,fe,ce,V,G,M,B,K,oe,ve,S,R;const a=t.balanceConfig?JSON.parse(JSON.stringify(t.balanceConfig)):lo(),o=lo(),r=((f=e.options)==null?void 0:f.showBadge)!==!1,n=((y=e.options)==null?void 0:y.showTrend)!==!1,l=((C=e.options)==null?void 0:C.showMessages)??(($=a.ui)==null?void 0:$.showMessages)??!0,i=((E=e.options)==null?void 0:E.messageDensity)||"normal",s=i==="few"?1:i==="many"?1/0:3,c=Number.isFinite((T=e.options)==null?void 0:T.lookbackWeeks)?Number((P=e.options)==null?void 0:P.lookbackWeeks):Number.isFinite(t.lookbackWeeks)?Number(t.lookbackWeeks):((I=o.trend)==null?void 0:I.lookbackWeeks)??3,u={noticeAbove:Uo((w=a==null?void 0:a.thresholds)==null?void 0:w.noticeAbove,(A=e.options)==null?void 0:A.noticeAbove),noticeBelow:Uo((O=a==null?void 0:a.thresholds)==null?void 0:O.noticeBelow,(z=e.options)==null?void 0:z.noticeBelow),warnAbove:Uo((J=a==null?void 0:a.thresholds)==null?void 0:J.warnAbove,(H=e.options)==null?void 0:H.warnAbove),warnBelow:Uo((x=a==null?void 0:a.thresholds)==null?void 0:x.warnBelow,(v=e.options)==null?void 0:v.warnBelow),warnIndex:Uo((b=a==null?void 0:a.thresholds)==null?void 0:b.warnIndex,(j=e.options)==null?void 0:j.warnIndex)},h=((F=e.options)==null?void 0:F.indexBasis)||((X=a==null?void 0:a.index)==null?void 0:X.basis)||"category",m=typeof((ne=e.options)==null?void 0:ne.trendColor)=="string"&&((Y=e.options)!=null&&Y.trendColor.trim())?e.options.trendColor.trim():"#2563EB",p=Number.isFinite((re=e.options)==null?void 0:re.loopbackCount)?Number((se=e.options)==null?void 0:se.loopbackCount):void 0,d=Number.isFinite(p)?Number(p):Number.isFinite(c)?Number(c):((fe=o.trend)==null?void 0:fe.lookbackWeeks)??4;return{overview:t.balanceOverview,targetsCategories:((ce=t.targetsConfig)==null?void 0:ce.categories)||[],rangeLabel:t.rangeLabel,showBadge:r,showTrend:n,showMessages:l,showHeader:((V=e.options)==null?void 0:V.showHeader)!==!1,showConfig:((G=e.options)==null?void 0:G.showConfig)!==!1,messageLimit:s,lookbackWeeks:d,loopbackCount:d,showCurrent:((M=e.options)==null?void 0:M.showCurrent)!==!1,labelMode:((B=e.options)==null?void 0:B.labelMode)||"period",reverseTrend:((K=e.options)==null?void 0:K.reverseTrend)===!0,indexBasis:h,thresholds:u,title:Bt(uc,(oe=e.options)==null?void 0:oe.titlePrefix),cardBg:((S=(ve=e.options)==null?void 0:ve.colors)==null?void 0:S.background)??((R=e.options)==null?void 0:R.cardBg),trendColor:m,from:t.from,to:t.to,rangeMode:t.rangeMode}}},Ym=Et(()=>It(()=>Promise.resolve().then(()=>X0),void 0).then(e=>e.default)),fc="Category Mix Trend",Zm={component:Ym,defaultLayout:{width:"half",height:"m",order:47},label:"Category Mix Trend",baseTitle:fc,defaultOptions:{lookbackWeeks:3,density:"normal",labelMode:"period",colorMode:"hybrid",squareCells:!1,showHeader:!0,showBadge:!0},configurable:!0,controls:[{key:"lookbackWeeks",label:"Lookback (weeks)",type:"number",min:1,max:4,step:1},{key:"density",label:"Density",type:"select",options:[{value:"normal",label:"Normal"},{value:"dense",label:"Dense"}]},{key:"squareCells",label:"Square cells",type:"toggle"},{key:"labelMode",label:"History label",type:"select",options:[{value:"period",label:"Week/Month"},{value:"date",label:"Date range"},{value:"compact",label:"Compact (W-4)"},{value:"offset",label:"Offset only"},{value:"label",label:"Use server label"}]},{key:"colorMode",label:"Color mode",type:"select",options:[{value:"hybrid",label:"Hybrid (share + trend)"},{value:"share",label:"Share heatmap"},{value:"trend",label:"Trend only"}]},{key:"shareLowColor",label:"Share low",type:"color"},{key:"shareHighColor",label:"Share high",type:"color"},{key:"showBadge",label:"Show badge",type:"toggle"},{key:"toneLowColor",label:"Low color",type:"color"},{key:"toneHighColor",label:"High color",type:"color"}],buildProps:(e,t)=>{var a,o,r,n,l,i,s,c,u,h,m,p,d;return{overview:t.balanceOverview,rangeMode:t.rangeMode,rangeLabel:t.rangeLabel,from:t.from,to:t.to,lookbackWeeks:((a=e.options)==null?void 0:a.lookbackWeeks)??t.lookbackWeeks??3,showBadge:((o=e.options)==null?void 0:o.showBadge)??!0,showHeader:((r=e.options)==null?void 0:r.showHeader)!==!1,density:(n=e.options)==null?void 0:n.density,labelMode:(l=e.options)==null?void 0:l.labelMode,squareCells:((i=e.options)==null?void 0:i.squareCells)===!0,colorMode:(s=e.options)==null?void 0:s.colorMode,title:Bt(fc,(c=e.options)==null?void 0:c.titlePrefix),cardBg:(u=e.options)==null?void 0:u.cardBg,toneLowColor:(h=e.options)==null?void 0:h.toneLowColor,toneHighColor:(m=e.options)==null?void 0:m.toneHighColor,shareLowColor:(p=e.options)==null?void 0:p.shareLowColor,shareHighColor:(d=e.options)==null?void 0:d.shareHighColor}}},gc=["#2563eb","#f97316","#10b981","#a855f7","#ec4899","#14b8a6"];function as(e){return gc[e%gc.length]||"#60a5fa"}function Kr(e){return e.slice().sort((t,a)=>{const o=Number((t==null?void 0:t.offset)??0),r=Number((a==null?void 0:a.offset)??0);return o-r})}function qr(e,t){const a=String(t||"").toLowerCase()==="month"?"Month":"Week",o=Number((e==null?void 0:e.offset)??0),r=o===0?`Current ${a.toLowerCase()}`:`${a} -${o}`,n=String((e==null?void 0:e.from)??"").trim(),l=String((e==null?void 0:e.to)??"").trim();return n&&l?`${r} (${n} to ${l})`:n?`${r} (${n})`:r}function ea(e){return Array.isArray(e)?e.map(t=>String(t??"").trim()).filter(Boolean):typeof e=="string"?e.split(",").map(t=>t.trim()).filter(Boolean):[]}function Xm(e,t){if(!e||!Array.isArray(e.data))return null;if(!t.size)return e;const a=e.ids||[],o=e.labels||[],r=e.data||[],n=e.colors||[],l=a.map((i,s)=>t.has(String(i))?s:-1).filter(i=>i>=0);return l.length?{ids:l.map(i=>String(a[i]??"")),labels:l.map(i=>String(o[i]??"")),data:l.map(i=>Number(r[i]??0)),colors:l.map(i=>n[i])}:null}function Vo(e,t){if(!e||!Array.isArray(e.series))return null;if(!t.size)return e;const a=e.series.filter(o=>t.has(String((o==null?void 0:o.id)??"")));return a.length?{labels:e.labels||[],series:a}:null}function Ko(e,t,a,o){if(!e||!Array.isArray(e.series))return null;const r=e.labels||[],n=new Map;if(e.series.forEach(i=>{const s=String((i==null?void 0:i.id)??""),c=String((t==null?void 0:t[s])??"");if(!c||a.size&&!a.has(c))return;n.has(c)||n.set(c,Array.from({length:r.length},()=>0));const u=n.get(c),h=Array.isArray(i==null?void 0:i.data)?i.data:[];u&&r.forEach((m,p)=>{u[p]+=Math.max(0,Number(h[p]??0))})}),!n.size)return null;const l=Array.from(n.entries()).map(([i,s])=>({id:i,name:i,label:i,color:o==null?void 0:o[i],data:s}));return{labels:r,series:l}}function Gr(e){if(!e||!Array.isArray(e.series))return null;const t=e.labels||[],a=t.map((o,r)=>e.series.reduce((n,l)=>{var i;return n+Math.max(0,Number(((i=l==null?void 0:l.data)==null?void 0:i[r])??0))},0));return{labels:t,data:a}}function pc(e){if(!e)return null;const t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],a=new Map;return t.forEach(o=>a.set(o,0)),e.labels.forEach((o,r)=>{const n=ev(o);n&&a.set(n,(a.get(n)||0)+Math.max(0,Number(e.data[r]??0)))}),{labels:t,data:t.map(o=>a.get(o)||0)}}function Qm(e,t,a){if(!Array.isArray(e)||!e.length)return null;const o=e.filter(r=>!r||!r.id?!1:t.size?t.has(String(r.id)):!0);return o.length?{ids:o.map(r=>String(r.id)),labels:o.map(r=>String(r.label??r.id)),data:o.map(r=>{var n;return Math.max(0,Number(((n=r.summary)==null?void 0:n.actualHours)??0))}),colors:o.map(r=>r.color||(a==null?void 0:a[String(r.id)]))}:null}function qo(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const a=t.labels.map(f=>String(f??"")),o=t.series.map(f=>{const y=String((f==null?void 0:f.id)??"");return{...f,id:y,name:String((f==null?void 0:f.name)??(f==null?void 0:f.label)??y),color:String((f==null?void 0:f.color)??""),data:a.map((C,$)=>{var T;const E=Number(((T=f==null?void 0:f.data)==null?void 0:T[$])??0);return Number.isFinite(E)?Math.max(0,E):0})}}),r=ov(e.forecastMode),n=rv(new Date),l=a.map(f=>tv.test(f)&&f>n),i=[];if(l.forEach((f,y)=>{f&&i.push(y)}),!i.length||r==="off")return{labels:a,series:o};const s=e.targetsConfig??da(),c=sv(e.currentTargets),u=e.calendarCategoryMap??{},h=i.length,m=new Map;o.forEach(f=>{let y=0;f.data.forEach((C,$)=>{l[$]||(y+=Math.max(0,C))}),m.set(f.id,y)});const p=Array.from(m.values()).reduce((f,y)=>f+y,0),d=new Map;if(o.forEach(f=>{d.set(f.id,nv(a.length))}),r==="total"){const f=Math.max(0,Number(s.totalHours??0)),y=Math.max(0,f-p);if(y>1e-4){const C=y/h,$=o.map(T=>T.id),E=hc($,m,c);$.forEach(T=>{const P=E[T]??0;if(P<=0)return;const I=d.get(T);I&&i.forEach(w=>{I[w]=Jr(C*P)})})}}else if(r==="calendar")o.forEach(f=>{const y=c[f.id]??0;if(y<=0)return;const C=Math.max(0,m.get(f.id)??0),$=Math.max(0,y-C);if($<=1e-4)return;const E=$/h,T=d.get(f.id);T&&i.forEach(P=>{T[P]=Jr(E)})});else if(r==="category"){const f=new Set,y=Array.isArray(s.categories)?s.categories:[],C=new Map;y.forEach(E=>{C.set(String(E.id),Math.max(0,Number(E.targetHours??0)))});const $=new Map;o.forEach(E=>{const T=u==null?void 0:u[E.id],P=T?String(T):av;$.has(P)||$.set(P,[]),$.get(P).push(E.id)}),$.forEach((E,T)=>{if(!E.length)return;const P=C.get(T)??0;if(P<=0)return;const I=E.reduce((J,H)=>J+Math.max(0,m.get(H)??0),0),w=Math.max(0,P-I);if(w<=1e-4)return;const A=w/h,O={};E.forEach(J=>{O[J]=c[J]??0});const z=hc(E,m,O);E.forEach(J=>{const H=z[J]??0;if(H<=0)return;const x=d.get(J);x&&(i.forEach(v=>{x[v]=Jr(A*H)}),f.add(J))})}),o.forEach(E=>{if(f.has(E.id))return;const T=c[E.id]??0;if(T<=0)return;const P=Math.max(0,m.get(E.id)??0),I=Math.max(0,T-P);if(I<=1e-4)return;const w=I/h,A=d.get(E.id);A&&i.forEach(O=>{A[O]=Jr(w)})})}return o.forEach(f=>{const y=d.get(f.id);y&&y.some(C=>C>1e-4)&&(f.forecast=y)}),{labels:a,series:o}}function ev(e){const t=/^(\d{4})-(\d{2})-(\d{2})$/.exec(String(e));if(!t)return null;const a=new Date(`${t[1]}-${t[2]}-${t[3]}T00:00:00`);if(Number.isNaN(a.getTime()))return null;const r=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][a.getDay()];return r?r==="Sun"?"Sun":r:null}const tv=/^\d{4}-\d{2}-\d{2}$/,av="__uncategorized__";function ov(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function rv(e){const t=e.getFullYear(),a=`${e.getMonth()+1}`.padStart(2,"0"),o=`${e.getDate()}`.padStart(2,"0");return`${t}-${a}-${o}`}function nv(e){return Array.from({length:e},()=>0)}function Jr(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function sv(e){const t={};return e&&Object.entries(e).forEach(([a,o])=>{const r=Number(o);Number.isFinite(r)&&r>0&&(t[String(a)]=r)}),t}function hc(e,t,a){const o={},r=e.reduce((i,s)=>i+Math.max(0,t.get(s)??0),0);if(r>1e-4)return e.forEach(i=>{const s=Math.max(0,t.get(i)??0);o[i]=s/r}),o;const n=e.reduce((i,s)=>i+Math.max(0,(a==null?void 0:a[s])??0),0);if(n>1e-4)return e.forEach(i=>{const s=Math.max(0,(a==null?void 0:a[i])??0);o[i]=s/n}),o;const l=e.length?1/e.length:0;return e.forEach(i=>{o[i]=l}),o}const lv=Et(()=>It(()=>Promise.resolve().then(()=>nw),void 0).then(e=>e.default)),mc="Day-of-Week Chart",iv={component:lv,defaultLayout:{width:"half",height:"m",order:84},label:"Day-of-Week Chart",baseTitle:mc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLabels:!0,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var h,m,p,d,f,y,C,$,E,T,P;const a=((h=e.options)==null?void 0:h.scope)==="category"?"category":"calendar",o=new Set(ea((m=e.options)==null?void 0:m.calendarFilter)),r=new Set(ea((p=e.options)==null?void 0:p.categoryFilter)),n=t.categoryColorMap||{},i=(Number.isFinite(t.lookbackWeeks)?Math.max(1,Math.min(6,Number(t.lookbackWeeks))):1)>1&&Array.isArray((d=t.charts)==null?void 0:d.perDaySeriesByOffset)?t.charts.perDaySeriesByOffset:null;let s=null,c=null,u=[];if(i&&i.length){const I=Kr(i),w=[],A=[];u=[],I.forEach((O,z)=>{var X;const J={labels:O.labels||[],series:O.series||[]},H=qo({perDaySeries:J,forecastMode:(X=e.options)==null?void 0:X.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),x=a==="category"?Ko(H,t.calendarCategoryMap||{},r,n):Vo(H,o),v=Gr(x),b=pc(v);if(!b)return;w.length||w.push(...b.labels||[]);const j=as(z),F=qr(O,t.rangeMode);A.push({id:`offset-${O.offset??z}`,name:F,label:F,color:j,data:b.data||[]}),u.push({id:`offset-${O.offset??z}`,label:F,color:j})}),c=w.length&&A.length?{labels:w,series:A}:null}else{const I=(f=t.charts)==null?void 0:f.perDaySeries,w=qo({perDaySeries:I,forecastMode:(y=e.options)==null?void 0:y.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),A=a==="category"?Ko(w,t.calendarCategoryMap||{},r,n):Vo(w,o),O=Gr(A);s=pc(O)}return{title:Bt(mc,(C=e.options)==null?void 0:C.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:($=e.options)==null?void 0:$.cardBg,showHeader:((E=e.options)==null?void 0:E.showHeader)!==!1,showLabels:((T=e.options)==null?void 0:T.showLabels)!==!1,compact:((P=e.options)==null?void 0:P.compact)===!0,xLabel:"Weekday",yLabel:"Hours (h)",chartData:s,groupedData:c,legendItems:u}}},cv=Et(()=>It(()=>Promise.resolve().then(()=>ww),void 0).then(e=>e.default)),vc="Time-of-Day Chart",dv={component:cv,defaultLayout:{width:"full",height:"l",order:86},label:"Time-of-Day Chart",baseTitle:vc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showHint:!1,showLegend:!0,lookbackMode:"stacked",compact:!1},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"lookbackMode",label:"Lookback view",type:"select",options:[{value:"stacked",label:"Stacked weeks"},{value:"overlay",label:"Overlay stripes"}]},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showHint",label:"Show hint",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var u,h,m,p,d,f,y,C,$,E,T;const a=ea((u=e.options)==null?void 0:u.calendarFilter),o=ea((h=e.options)==null?void 0:h.categoryFilter),r=a.length>0||o.length>0,n=Number.isFinite(t.lookbackWeeks)?Math.max(1,Math.min(6,Number(t.lookbackWeeks))):1,l=n>1&&Array.isArray((m=t.charts)==null?void 0:m.hodByOffset)?t.charts.hodByOffset:null,s=(l?Kr(l):[]).map((P,I)=>{const w=as(I);return{id:`offset-${P.offset??I}`,label:qr(P,t.rangeMode),color:w,hod:{dows:P.dows||[],hours:P.hours||[],matrix:P.matrix||[]}}}),c=n>1&&((p=t.charts)!=null&&p.hodLookback)?t.charts.hodLookback:((d=t.charts)==null?void 0:d.hod)||null;return{title:Bt(vc,(f=e.options)==null?void 0:f.titlePrefix),subtitle:r?"Filters currently not applied":void 0,cardBg:(y=e.options)==null?void 0:y.cardBg,showHeader:((C=e.options)==null?void 0:C.showHeader)!==!1,showHint:(($=e.options)==null?void 0:$.showHint)===!0,showLegend:((E=e.options)==null?void 0:E.showLegend)!==!1,lookbackMode:(T=e.options)==null?void 0:T.lookbackMode,lookbackWeeks:t.lookbackWeeks,rangeMode:t.rangeMode,hodData:c,lookbackEntries:s}}},uv=Et(()=>It(()=>Promise.resolve().then(()=>$w),void 0).then(e=>e.default)),bc="Daily Chart",fv={component:uv,defaultLayout:{width:"half",height:"m",order:82},label:"Daily Chart",baseTitle:bc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLabels:!1,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var u,h,m,p,d,f,y,C,$,E,T;const a=((u=e.options)==null?void 0:u.scope)==="category"?"category":"calendar",o=new Set(ea((h=e.options)==null?void 0:h.calendarFilter)),r=new Set(ea((m=e.options)==null?void 0:m.categoryFilter)),n=t.categoryColorMap||{},i=(Number.isFinite(t.lookbackWeeks)?Math.max(1,Math.min(6,Number(t.lookbackWeeks))):1)>1&&Array.isArray((p=t.charts)==null?void 0:p.perDaySeriesByOffset)?t.charts.perDaySeriesByOffset:null;let s=null,c=[];if(i&&i.length){const P=Kr(i),I=[],w=[],A=[];c=[],P.forEach((O,z)=>{var j;const J={labels:O.labels||[],series:O.series||[]},H=qo({perDaySeries:J,forecastMode:(j=e.options)==null?void 0:j.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),x=a==="category"?Ko(H,t.calendarCategoryMap||{},r,n):Vo(H,o),v=Gr(x);if(!v)return;const b=as(z);I.push(...v.labels),w.push(...v.data),A.push(...v.data.map(()=>b)),c.push({id:`offset-${O.offset??z}`,label:qr(O,t.rangeMode),color:b})}),s=I.length?{labels:I,data:w,colors:A}:null}else{const P=qo({perDaySeries:(d=t.charts)==null?void 0:d.perDaySeries,forecastMode:(f=e.options)==null?void 0:f.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),I=a==="category"?Ko(P,t.calendarCategoryMap||{},r,n):Vo(P,o);s=Gr(I)}return{title:Bt(bc,(y=e.options)==null?void 0:y.titlePrefix),subtitle:a==="category"?"Totals by category":"Totals by calendar",cardBg:(C=e.options)==null?void 0:C.cardBg,showHeader:(($=e.options)==null?void 0:$.showHeader)!==!1,showLabels:((E=e.options)==null?void 0:E.showLabels)===!0,compact:((T=e.options)==null?void 0:T.compact)===!0,xLabel:"Date",yLabel:"Hours (h)",chartData:s,legendItems:c}}},gv=Et(()=>It(()=>Promise.resolve().then(()=>Bw),void 0).then(e=>e.default)),yc="Pie Chart",pv={component:gv,defaultLayout:{width:"half",height:"m",order:75},label:"Pie Chart",baseTitle:yc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLegend:!0,showLabels:!0,compact:!1},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var c,u,h,m,p,d,f,y,C,$;const a=((c=e.options)==null?void 0:c.scope)==="category"?"category":"calendar",o=new Set(ea((u=e.options)==null?void 0:u.calendarFilter)),r=new Set(ea((h=e.options)==null?void 0:h.categoryFilter)),n=t.colorsById||{},l=t.colorsByName||{},i=t.categoryColorMap||{},s=a==="category"?Qm(t.calendarGroups||[],r,i):Xm(((m=t.calendarChartData)==null?void 0:m.pie)||null,o);return{title:Bt(yc,(p=e.options)==null?void 0:p.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(d=e.options)==null?void 0:d.cardBg,showHeader:((f=e.options)==null?void 0:f.showHeader)!==!1,compact:((y=e.options)==null?void 0:y.compact)===!0,showLegend:((C=e.options)==null?void 0:C.showLegend)!==!1,showLabels:(($=e.options)==null?void 0:$.showLabels)!==!1,chartData:s,colorsById:n,colorsByName:l}}},hv=Et(()=>It(()=>Promise.resolve().then(()=>jw),void 0).then(e=>e.default)),wc="Stacked Chart",mv={component:hv,defaultLayout:{width:"full",height:"l",order:80},label:"Stacked Chart",baseTitle:wc,configurable:!0,defaultOptions:{scope:"calendar",calendarFilter:[],categoryFilter:[],showLegend:!0,showLabels:!1,compact:!1,forecastMode:"total"},dynamicControls:(e,t)=>{const a=Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(r=>({value:r.id,label:r.displayname||r.name||r.id})):[],o=Array.isArray(t==null?void 0:t.calendarGroups)?t.calendarGroups.map(r=>({value:r.id,label:r.label||r.id})):[];return[{key:"scope",label:"Scope",type:"select",options:[{value:"calendar",label:"Calendar"},{value:"category",label:"Category"}]},{key:"calendarFilter",label:"Calendars",type:"multiselect",options:a},{key:"categoryFilter",label:"Categories",type:"multiselect",options:o},{key:"forecastMode",label:"Projection mode",type:"select",options:[{value:"off",label:"No projection"},{value:"total",label:"Distribute remaining total target"},{value:"calendar",label:"Respect calendar targets"},{value:"category",label:"Respect category targets"}]},{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showLabels",label:"Show labels",type:"toggle"},{key:"compact",label:"Compact",type:"toggle"}]},buildProps:(e,t)=>{var s,c,u,h,m,p,d,f,y,C,$;const a=((s=e.options)==null?void 0:s.scope)==="category"?"category":"calendar",o=new Set(ea((c=e.options)==null?void 0:c.calendarFilter)),r=new Set(ea((u=e.options)==null?void 0:u.categoryFilter)),n=t.categoryColorMap||{},l=qo({perDaySeries:(h=t.charts)==null?void 0:h.perDaySeries,forecastMode:(m=e.options)==null?void 0:m.forecastMode,targetsConfig:t.targetsConfig,currentTargets:t.currentTargets,calendarCategoryMap:t.calendarCategoryMap}),i=a==="category"?Ko(l,t.calendarCategoryMap||{},r,n):Vo(l,o);return{title:Bt(wc,(p=e.options)==null?void 0:p.titlePrefix),subtitle:a==="category"?"By category":"By calendar",cardBg:(d=e.options)==null?void 0:d.cardBg,showHeader:((f=e.options)==null?void 0:f.showHeader)!==!1,compact:((y=e.options)==null?void 0:y.compact)===!0,showLegend:((C=e.options)==null?void 0:C.showLegend)!==!1,showLabels:(($=e.options)==null?void 0:$.showLabels)===!0,stacked:i,colorsById:t.colorsById||{}}}},vv=Et(()=>It(()=>Promise.resolve().then(()=>mk),void 0).then(e=>e.default)),kc="Calendar Table",bv={component:vv,defaultLayout:{width:"full",height:"l",order:70},label:"Calendar Table",baseTitle:kc,configurable:!0,defaultOptions:{calendarFilter:[],compact:!1},dynamicControls:(e,t)=>[{key:"calendarFilter",label:"Calendars",type:"multiselect",options:Array.isArray(t==null?void 0:t.calendars)?t.calendars.map(o=>({value:o.id,label:o.displayname||o.name||o.id})):[]},{key:"compact",label:"Compact",type:"toggle"}],buildProps:(e,t)=>{var n,l,i,s;const a=new Set(ea((n=e.options)==null?void 0:n.calendarFilter)),o=Array.isArray(t.byCal)?t.byCal:[],r=a.size?o.filter(c=>a.has(String((c==null?void 0:c.id)??(c==null?void 0:c.calendar_id)??(c==null?void 0:c.calendar)??""))):o;return{title:Bt(kc,(l=e.options)==null?void 0:l.titlePrefix),subtitle:a.size?"Filtered calendars":void 0,cardBg:(i=e.options)==null?void 0:i.cardBg,showHeader:((s=e.options)==null?void 0:s.showHeader)!==!1,rows:r,targets:t.currentTargets||{},groups:t.calendarGroups||[],todayHours:t.calendarTodayHours||{}}}},yv=Et(()=>It(()=>Promise.resolve().then(()=>Sk),void 0).then(e=>e.default)),_c="Time Off Trend",wv={component:yv,defaultLayout:{width:"quarter",height:"s",order:45},label:"Time Off Trend",baseTitle:_c,configurable:!0,defaultOptions:{lookback:3,showBadges:!0,labelMode:"period",toneLowColor:"#dc2626",toneHighColor:"#16a34a"},controls:[{key:"lookback",label:"Lookback (periods)",type:"number",min:1,max:6,step:1},{key:"showBadges",label:"Show badges",type:"toggle"},{key:"labelMode",label:"Trend label",type:"select",options:[{value:"date",label:"Date range"},{value:"period",label:"Week/Month"},{value:"offset",label:"Offset only"}]},{key:"toneLowColor",label:"Low color",type:"color"},{key:"toneHighColor",label:"High color",type:"color"}],buildProps:(e,t)=>{var a,o,r,n,l,i,s,c;return{trend:t.activityDayOffTrend,unit:t.activityTrendUnit??"wk",lookback:((a=e.options)==null?void 0:a.lookback)??t.activityDayOffLookback??3,showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,showBadges:((r=e.options)==null?void 0:r.showBadges)!==!1,labelMode:(n=e.options)==null?void 0:n.labelMode,title:Bt(_c,(l=e.options)==null?void 0:l.titlePrefix),cardBg:(i=e.options)==null?void 0:i.cardBg,toneLowColor:(s=e.options)==null?void 0:s.toneLowColor,toneHighColor:(c=e.options)==null?void 0:c.toneHighColor}}};function xc(e){const t=typeof e.title=="string"?e.title.trim():"";if(!t)return null;const o=(e.id!=null?String(e.id).trim():"")||_v(t);return o?`tag_${o}`:null}function Cc(e){const t=new Map;return e.forEach(a=>{const o=new Set;(Array.isArray(a.labels)?a.labels:[]).forEach(n=>{const l=xc(n),i=typeof n.title=="string"?n.title.trim():"";if(!l||!i||o.has(l))return;o.add(l);const s=t.get(l)||{label:i,count:0};s.count+=1,t.set(l,s)})}),Array.from(t.entries()).map(([a,o])=>({value:a,label:o.label,count:o.count})).sort((a,o)=>o.count-a.count||a.label.localeCompare(o.label))}function kv(e,t){return(Array.isArray(e.labels)?e.labels:[]).some(o=>xc(o)===t)}function _v(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}const xv=Et(()=>It(()=>Promise.resolve().then(()=>r_),void 0).then(e=>e.default)),Sc="Deck cards",Cv={component:xv,defaultLayout:{width:"half",height:"m",order:52},label:"Deck cards",baseTitle:Sc,configurable:!0,defaultOptions:{allowMine:!0,includeArchived:!0,includeCompleted:!0,autoScroll:!0,intervalSeconds:5,showCount:!0,autoTagsEnabled:!0,compactList:!1,customFilters:[],filters:["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],defaultFilter:"open_all",mineMode:"assignee"},controls:[{key:"boardIds",label:"Boards to include",type:"multiselect",options:[]},{key:"filters",label:"Filters to show",type:"multiselect",options:[]},{key:"autoTagsEnabled",label:"Auto tag filters",type:"toggle"},{key:"allowMine",label:"Allow mine filters",type:"toggle"},{key:"mineMode",label:"Mine mode",type:"select",options:[{value:"assignee",label:"Assignee"},{value:"creator",label:"Creator"},{value:"both",label:"Assignee + Creator"}]},{key:"includeArchived",label:"Include archived cards",type:"toggle"},{key:"includeCompleted",label:"Include completed cards",type:"toggle"},{key:"autoScroll",label:"Auto-scroll list",type:"toggle"},{key:"intervalSeconds",label:"Scroll every (s)",type:"number",min:3,max:10,step:1},{key:"showCount",label:"Show count pill",type:"toggle"},{key:"compactList",label:"Compact list",type:"toggle"},{key:"customFilters",label:"Custom filters",type:"filterbuilder"}],dynamicControls:(e,t)=>{var d;const o={key:"defaultFilter",label:"Default filter",type:"select",options:dc(e.filters??((d=e.defaultOptions)==null?void 0:d.filters)).map(f=>({value:f,label:Ot(f)}))},r=[{value:"all",label:Ot("all")},{value:"open_all",label:Ot("open_all")},{value:"open_mine",label:Ot("open_mine")},{value:"done_all",label:Ot("done_all")},{value:"done_mine",label:Ot("done_mine")},{value:"archived_all",label:Ot("archived_all")},{value:"archived_mine",label:Ot("archived_mine")},{value:"due_all",label:Ot("due_all")},{value:"due_mine",label:Ot("due_mine")},{value:"due_today_all",label:Ot("due_today_all")},{value:"due_today_mine",label:Ot("due_today_mine")},{value:"created_today_all",label:Ot("created_today_all")},{value:"created_today_mine",label:Ot("created_today_mine")}],n=Array.isArray(t.deckBoards)?t.deckBoards.map(f=>({value:f.id,label:f.title||`Board ${f.id}`})):[],l=Array.isArray(e.boardIds)?e.boardIds:ts(e.boardIds),i=e.includeArchived!==!1,s=e.includeCompleted!==!1,c=new Set(l.map(f=>Number(f)).filter(f=>Number.isInteger(f))),h=(Array.isArray(t.deckCards)?t.deckCards:[]).filter(f=>!(c.size&&!((f==null?void 0:f.boardId)!=null&&c.has(Number(f.boardId)))||!i&&(f==null?void 0:f.status)==="archived"||!s&&(f==null?void 0:f.status)==="done")),m=Cc(h),p=[];return e.autoTagsEnabled!==!1&&m.length&&p.push({key:"autoTagSelection",label:"Tag filters",type:"taglist",options:m,hint:"Uncheck tags to hide their filters. Counts reflect the current cards."}),[{key:"filters",label:"Filters",type:"multiselect",options:r},o,{key:"boardIds",label:"Boards",type:"multiselect",options:n},...p]},buildProps:(e,t)=>{var l,i,s,c,u,h,m,p,d,f,y,C,$,E,T,P,I,w,A,O,z,J;const a=dc(((l=e.options)==null?void 0:l.filters)??((s=(i=e.options)==null?void 0:i.defaultOptions)==null?void 0:s.filters)),o=Array.isArray((c=e.options)==null?void 0:c.boardIds)?e.options.boardIds:ts((u=e.options)==null?void 0:u.boardIds),r=a.includes((h=e.options)==null?void 0:h.defaultFilter)?(m=e.options)==null?void 0:m.defaultFilter:a[0]||"all",n=Sv((p=e.options)==null?void 0:p.customFilters);return{title:Bt(Sc,(d=e.options)==null?void 0:d.titlePrefix),cardBg:(f=e.options)==null?void 0:f.cardBg,cards:t.deckCards||[],rangeLabel:t.deckRangeLabel||t.rangeLabel||"",from:t.from,to:t.to,uid:t.uid,deckUrl:t.deckUrl,lastFetchedAt:t.deckRangeLabel,loading:t.deckLoading,error:t.deckError,boardIds:o,filters:a,defaultFilter:r,allowMine:((y=e.options)==null?void 0:y.allowMine)!==!1,mineMode:((C=e.options)==null?void 0:C.mineMode)||"assignee",includeArchived:(($=e.options)==null?void 0:$.includeArchived)!==!1,includeCompleted:((E=e.options)==null?void 0:E.includeCompleted)!==!1,autoScroll:((T=e.options)==null?void 0:T.autoScroll)!==!1,intervalSeconds:((P=e.options)==null?void 0:P.intervalSeconds)??5,showCount:((I=e.options)==null?void 0:I.showCount)!==!1,compactList:((w=e.options)==null?void 0:w.compactList)===!0,autoTagsEnabled:((A=e.options)==null?void 0:A.autoTagsEnabled)!==!1,autoTagSelection:Array.isArray((O=e.options)==null?void 0:O.autoTagSelection)?(z=e.options)==null?void 0:z.autoTagSelection:void 0,showHeader:((J=e.options)==null?void 0:J.showHeader)!==!1,customFilters:n,editable:t.isLayoutEditing===!0,onUpdateFilters:H=>{var x;return(x=t.onUpdateWidgetOptions)==null?void 0:x.call(t,e.id,"filters",H)}}}};function Sv(e){let t=[];if(Array.isArray(e))t=e;else if(typeof e=="string"&&e.trim()!=="")try{const a=JSON.parse(e);Array.isArray(a)&&(t=a)}catch{t=[]}return t.map(a=>{if(!a||typeof a!="object")return null;const o=String(a.label||a.name||"").trim();if(!o)return null;const r=$v(String(a.id||o)),n=Array.isArray(a.labelIds)?a.labelIds.map(s=>String(s).trim()).filter(Boolean):[],l=Array.isArray(a.labels)?a.labels.map(s=>String(s).trim()).filter(Boolean):[],i=Array.isArray(a.assignees)?a.assignees.map(s=>String(s).trim()).filter(Boolean):[];return{id:r,label:o,labelIds:n,labels:l,assignees:i}}).filter(Boolean)}function $v(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}const Tv=Et(()=>It(()=>Promise.resolve().then(()=>v_),void 0).then(e=>e.default)),$c="Notes",Mv={component:Tv,defaultLayout:{width:"half",height:"m",order:69},label:"Notes editor",baseTitle:$c,configurable:!0,controls:[{key:"prevLabel",label:"Prev label",type:"text"},{key:"currLabel",label:"Current label",type:"text"}],buildProps:(e,t)=>{var a,o,r,n,l;return{title:Bt($c,(a=e.options)==null?void 0:a.titlePrefix),showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,cardBg:(r=e.options)==null?void 0:r.cardBg,prevLabel:((n=e.options)==null?void 0:n.prevLabel)||(t.notesLabelPrev??"Previous"),currLabel:((l=e.options)==null?void 0:l.currLabel)||(t.notesLabelCurr??"Current"),previous:t.notesPrev??"",history:t.notesHistory??[],modelValue:t.notesCurr??"",saving:t.isSavingNote??!1,onSave:t.onSaveNote,onUpdateModelValue:t.onUpdateNotes}}},Av=Et(()=>It(()=>Promise.resolve().then(()=>k_),void 0).then(e=>e.default)),Tc="Note",Dv={component:Av,defaultLayout:{width:"quarter",height:"s",order:68},label:"Notes snippet",baseTitle:Tc,configurable:!0,controls:[],buildProps:(e,t)=>{var a,o,r;return{notesCurr:t.notesCurr??"",notesPrev:t.notesPrev??"",title:Bt(Tc,(a=e.options)==null?void 0:a.titlePrefix),showHeader:((o=e.options)==null?void 0:o.showHeader)!==!1,cardBg:(r=e.options)==null?void 0:r.cardBg}}},Ev=Et(()=>It(()=>Promise.resolve().then(()=>K_),void 0).then(e=>e.default)),Mc="Targets",Lv={component:Ev,defaultLayout:{width:"half",height:"m",order:18},label:"Targets",baseTitle:Mc,configurable:!0,defaultOptions:{showForecast:!0,showPace:!0,useLocalConfig:!1,localConfig:null},controls:[{key:"showLegend",label:"Show legend",type:"toggle"},{key:"showDelta",label:"Show delta",type:"toggle"},{key:"showForecast",label:"Show forecast",type:"toggle"},{key:"showPace",label:"Show pace line",type:"toggle"},{key:"showToday",label:"Show today overlay",type:"toggle"},{key:"useLocalConfig",label:"Use custom targets for this widget",type:"toggle"},{key:"showTotalDelta",label:"Show total delta",type:"toggle"},{key:"showNeedPerDay",label:"Show need per day",type:"toggle"},{key:"showCategoryBlocks",label:"Show categories",type:"toggle"},{key:"badges",label:"Status badges",type:"toggle"},{key:"includeWeekendToggle",label:"Weekend toggle",type:"toggle"},{key:"includeZeroDaysInStats",label:"Include zero days in pace",type:"toggle"}],buildProps:(e,t)=>{var s,c,u,h,m,p,d,f,y,C,$;const a=!!((s=e.options)!=null&&s.useLocalConfig),o=a&&((c=e.options)!=null&&c.localConfig)?JSON.parse(JSON.stringify(e.options.localConfig)):t.targetsConfig?JSON.parse(JSON.stringify(t.targetsConfig)):da(),r=Km(Vm(o,t.rangeMode)),n=(E,T)=>{var P;((P=e.options)==null?void 0:P[E])!==void 0&&T(!!e.options[E])};n("showTotalDelta",E=>{r.ui.showTotalDelta=E}),n("showNeedPerDay",E=>{r.ui.showNeedPerDay=E}),n("showCategoryBlocks",E=>{r.ui.showCategoryBlocks=E}),n("badges",E=>{r.ui.badges=E}),n("includeWeekendToggle",E=>{r.ui.includeWeekendToggle=E}),n("includeZeroDaysInStats",E=>{r.includeZeroDaysInStats=E});const l=a&&t.stats?qm(r,t):t.targetsSummary??t.summary,i=a?null:((u=e.props)==null?void 0:u.groups)??t.groups;return{summary:l,config:r,groups:i,showHeader:((h=e.options)==null?void 0:h.showHeader)!==!1,showLegend:((m=e.options)==null?void 0:m.showLegend)!==!1,showDelta:((p=e.options)==null?void 0:p.showDelta)!==!1,showForecast:((d=e.options)==null?void 0:d.showForecast)!==!1,showPace:((f=e.options)==null?void 0:f.showPace)!==!1,showToday:((y=e.options)==null?void 0:y.showToday)!==!1,title:Bt(Mc,(C=e.options)==null?void 0:C.titlePrefix),cardBg:($=e.options)==null?void 0:$.cardBg}}};function Ac(e){var i;const t=e.basis||"category";if(t==="off")return 0;const a={},o=(i=e.targets)!=null&&i.length?e.targets.reduce((s,c)=>s+(c.targetHours??0),0):0;t!=="calendar"&&o>0&&e.targets.forEach(s=>{const c=(s.targetHours??0)/o;a[s.id]=c});const r=new Set;if(Object.keys(e.shares||{}).forEach(s=>r.add(s)),Object.keys(a).forEach(s=>r.add(s)),r.size===0)return 0;let n=0;r.forEach(s=>{var m;const c=Number(((m=e.shares)==null?void 0:m[s])??0),u=t==="calendar"?1/r.size:a[s]??0,h=Math.abs(c-u);h>n&&(n=h)});const l=1-n;return Math.max(0,Math.min(1,Number(l.toFixed(2))))}const Nv=Et(()=>It(()=>Promise.resolve().then(()=>Ix),void 0).then(e=>e.default)),Dc="Time Summary",Iv={component:Nv,defaultLayout:{width:"half",height:"s",order:9},label:"Time Summary",baseTitle:Dc,configurable:!0,defaultOptions:{...da().timeSummary,mode:"active",showHistory:!0,historyView:"list",showActivityDetails:!0},controls:[{key:"mode",label:"Average mode",type:"select",options:[{value:"active",label:"Active days"},{value:"all",label:"All days"}]},{key:"showHistory",label:"Show history",type:"toggle"},{key:"historyView",label:"History layout",type:"select",options:[{value:"list",label:"List"},{value:"pills",label:"Pills"}]},{key:"showActivityDetails",label:"Activity details",type:"toggle"},{key:"showTotal",label:"Total hours",type:"toggle"},{key:"showAverage",label:"Average per day",type:"toggle"},{key:"showMedian",label:"Median per day",type:"toggle"},{key:"showBusiest",label:"Busiest day",type:"toggle"},{key:"showWorkday",label:"Workdays row",type:"toggle"},{key:"showWeekend",label:"Weekend row",type:"toggle"},{key:"showWeekendShare",label:"Weekend share",type:"toggle"},{key:"showCalendarSummary",label:"Top calendars",type:"toggle"},{key:"showTopCategory",label:"Top category",type:"toggle"},{key:"showBalance",label:"Balance index",type:"toggle"}],buildProps:(e,t)=>{var h,m,p,d,f,y,C,$,E,T,P;const a=t.targetsConfig?JSON.parse(JSON.stringify(t.targetsConfig)):da(),o={...a,timeSummary:{...a.timeSummary}},r=String(t.rangeMode||"week").toLowerCase()==="month"?"month":"week",n=((h=e.options)==null?void 0:h.mode)??t.activeDayMode??"active",l=((m=e.options)==null?void 0:m.showHistory)!==!1,i=((p=e.options)==null?void 0:p.historyView)==="pills"?"pills":"list",s=((d=e.options)==null?void 0:d.showActivityDetails)!==!1,c=I=>{var w;((w=e.options)==null?void 0:w[I])!==void 0&&(o.timeSummary[I]=!!e.options[I])};["showTotal","showAverage","showMedian","showBusiest","showWorkday","showWeekend","showWeekendShare","showCalendarSummary","showTopCategory","showBalance"].forEach(c);const u=l&&Number(t.lookbackWeeks)>1?Bv({mode:n,rangeMode:r,lookbackWeeks:Number(t.lookbackWeeks),perDaySeriesByOffset:(f=t.charts)==null?void 0:f.perDaySeriesByOffset,hodByOffset:(y=t.charts)==null?void 0:y.hodByOffset,summaryByOffset:(C=t.charts)==null?void 0:C.summaryByOffset,targetsConfig:Ov(o,r),calendarCategoryMap:t.calendarCategoryMap||{},calendarGroups:Array.isArray(t.calendarGroups)?t.calendarGroups:[],categoryColorMap:t.categoryColorMap||{}}):[];return{summary:t.summary,activitySummary:t.activitySummary,mode:n,config:o.timeSummary,todayGroups:(($=e.props)==null?void 0:$.todayGroups)??t.groups,title:Bt(Dc,(E=e.options)==null?void 0:E.titlePrefix),cardBg:(T=e.options)==null?void 0:T.cardBg,rangeMode:t.rangeMode,rangeStart:t.from,rangeEnd:t.to,offset:t.offset,showHeader:((P=e.options)==null?void 0:P.showHeader)!==!1,showHistory:l,historyView:i,showActivityDetails:s,history:u}}};function Bv(e){const t=Array.isArray(e.perDaySeriesByOffset)?e.perDaySeriesByOffset:[];if(!t.length)return[];const a=Array.isArray(e.hodByOffset)?e.hodByOffset:[],o=Array.isArray(e.summaryByOffset)?e.summaryByOffset:[],r=new Map;t.forEach(u=>{const h=Number((u==null?void 0:u.offset)??0);Number.isFinite(h)&&r.set(h,u)});const n=new Map;a.forEach(u=>{const h=Number((u==null?void 0:u.offset)??0);Number.isFinite(h)&&n.set(h,u)});const l=new Map;o.forEach(u=>{const h=Number((u==null?void 0:u.offset)??0);Number.isFinite(h)&&l.set(h,u)});const i=Math.max(0,Math.min(6,Math.floor(e.lookbackWeeks)-1));if(i<=0)return[];const s=Kr(t).map(u=>Number((u==null?void 0:u.offset)??0)).filter(u=>Number.isFinite(u)&&u>0&&u<=i),c=new Map;return e.calendarGroups.forEach(u=>{const h=String((u==null?void 0:u.id)??"").trim();h&&c.set(h,String((u==null?void 0:u.label)??h))}),e.targetsConfig.categories.forEach(u=>{const h=String((u==null?void 0:u.id)??"").trim();h&&!c.has(h)&&c.set(h,String((u==null?void 0:u.label)??h))}),s.map(u=>{const h=r.get(u);if(!h)return null;const m=Pv(h),p=l.get(u),d=n.get(u),f=Wt(m.totalHours),y=Number((p==null?void 0:p.events)??(p==null?void 0:p.eventsCount)??0)||0,C=Number((p==null?void 0:p.overlap_events)??(p==null?void 0:p.overlapEvents)??0)||0,$=Number((p==null?void 0:p.longest_session)??(p==null?void 0:p.longestSession)??0)||0,E=Ec((p==null?void 0:p.earliest_start)??(p==null?void 0:p.earliestStart)),T=Ec((p==null?void 0:p.latest_end)??(p==null?void 0:p.latestEnd)),P=d?Fv(d,f):null,I=m.activeDays,w=Wt(os(m.filteredTotals(e.mode))),A=Wt(rs(m.filteredTotals(e.mode))),O=y>0?Wt(f/y):0,z=Wt(os(m.filteredWorkdayTotals(e.mode))),J=Wt(rs(m.filteredWorkdayTotals(e.mode))),H=Wt(os(m.filteredWeekendTotals(e.mode))),x=Wt(rs(m.filteredWeekendTotals(e.mode))),v=(P==null?void 0:P.weekendShare)??m.weekendShare,b=Hv(m.calendarTotals,f),j=Wv({calendarTotals:m.calendarTotals,categoryLabelById:c,categoryColorMap:e.categoryColorMap,calendarCategoryMap:e.calendarCategoryMap,targetsConfig:e.targetsConfig}),F=zv({totalHours:f,calendarTotals:m.calendarTotals,calendarCategoryMap:e.calendarCategoryMap,targetsConfig:e.targetsConfig});return{offset:u,label:qr({offset:u,from:h==null?void 0:h.from,to:h==null?void 0:h.to},e.rangeMode),rangeStart:String((h==null?void 0:h.from)??""),rangeEnd:String((h==null?void 0:h.to)??""),totalHours:f,avgDay:w,avgEvent:O,medianDay:A,busiest:m.busiest,workdayAvg:z,workdayMedian:J,weekendAvg:H,weekendMedian:x,weekendShare:v,activeCalendars:m.activeCalendars,calendarSummary:b,topCategory:j,balanceIndex:F,activity:{events:y,activeDays:I,typicalStart:(P==null?void 0:P.typicalStart)??null,typicalEnd:(P==null?void 0:P.typicalEnd)??null,weekendShare:(P==null?void 0:P.weekendShare)??null,eveningShare:(P==null?void 0:P.eveningShare)??null,earliestStart:E,latestEnd:T,overlapEvents:C,longestSession:Wt($),lastDayOff:m.lastDayOff,lastHalfDayOff:m.lastHalfDayOff}}}).filter(u=>!!u)}function Ov(e,t){const a=JSON.parse(JSON.stringify(e));return t==="month"&&(a.totalHours=ya(a.totalHours),a.categories=a.categories.map(o=>({...o,targetHours:ya(o.targetHours)}))),a}function Pv(e){const t=Array.isArray(e==null?void 0:e.labels)?e.labels.map(d=>String(d??"")):[],a=Array.isArray(e==null?void 0:e.series)?e.series:[],o=t.map((d,f)=>a.reduce((y,C)=>{var E;const $=Number(((E=C==null?void 0:C.data)==null?void 0:E[f])??0);return y+(Number.isFinite($)?Math.max(0,$):0)},0)),r=a.map(d=>{const f=String((d==null?void 0:d.id)??""),y=String((d==null?void 0:d.name)??(d==null?void 0:d.label)??f),C=Array.isArray(d==null?void 0:d.data)?d.data.reduce(($,E)=>{const T=Number(E??0);return $+(Number.isFinite(T)?Math.max(0,T):0)},0):0;return{id:f,name:y,total:Wt(C),color:d!=null&&d.color?String(d.color):void 0}}),n=o.reduce((d,f)=>d+f,0),l=r.filter(d=>d.total>0).length,i=(()=>{if(!t.length)return null;let d=-1,f=-1;return o.forEach((y,C)=>{y>d&&(d=y,f=C)}),f<0||d<=0?null:{date:t[f],hours:Wt(d)}})(),s=[],c=[];o.forEach((d,f)=>{const y=Rv(t[f]);y!=null&&(y===0||y===6?c.push(d):s.push(d))});const u=n>0?Go(c.reduce((d,f)=>d+f,0)/n*100):null,{lastDayOff:h,lastHalfDayOff:m}=jv(t,o),p=o.filter(d=>d>.01).length;return{labels:t,totals:o,totalHours:n,activeCalendars:l,busiest:i,workdayTotals:s,weekendTotals:c,weekendShare:u,lastDayOff:h,lastHalfDayOff:m,activeDays:p,filteredTotals:d=>d==="active"?o.filter(f=>f>0):o,filteredWorkdayTotals:d=>d==="active"?s.filter(f=>f>0):s,filteredWeekendTotals:d=>d==="active"?c.filter(f=>f>0):c,calendarTotals:r}}function Fv(e,t){const a=Array.isArray(e==null?void 0:e.dows)?e.dows.map(p=>String(p??"")):[],o=Array.isArray(e==null?void 0:e.matrix)?e.matrix:[],r=new Map;a.forEach((p,d)=>{const f=Array.isArray(o[d])?o[d]:[];r.set(p,f.map(y=>Number(y??0)))});const n=Array.from({length:24},(p,d)=>Array.from(r.values()).reduce((f,y)=>f+Number(y[d]??0),0)),l=.25;let i=null,s=null;for(let p=0;p<24;p+=1)if(n[p]>=l){i=`${String(p).padStart(2,"0")}:00`;break}for(let p=23;p>=0;p-=1)if(n[p]>=l){s=`${String(p+1).padStart(2,"0")}:00`;break}const c=(r.get("Sat")||[]).reduce((p,d)=>p+Number(d??0),0)+(r.get("Sun")||[]).reduce((p,d)=>p+Number(d??0),0);let u=0;r.forEach(p=>{for(let d=18;d<24;d+=1)u+=Number(p[d]??0)});const h=t>0?Go(c/t*100):null,m=t>0?Go(u/t*100):null;return{typicalStart:i,typicalEnd:s,weekendShare:h,eveningShare:m}}function Hv(e,t){return t<=0?"":e.slice().sort((o,r)=>r.total-o.total).filter(o=>o.total>0).slice(0,3).map(o=>`${o.name} ${Go(o.total/t*100)}%`).join(", ")}function Wv(e){var i;const t=new Map;if(e.calendarTotals.forEach(s=>{var u;const c=String(((u=e.calendarCategoryMap)==null?void 0:u[s.id])??"");c&&t.set(c,(t.get(c)||0)+s.total)}),!t.size)return null;let a="",o=-1;if(t.forEach((s,c)=>{s>o&&(o=s,a=c)}),!a)return null;const r=e.targetsConfig.categories.find(s=>String(s.id)===a),n=Number((r==null?void 0:r.targetHours)??0)||0,l=n>0?Go(o/n*100):0;return{label:e.categoryLabelById.get(a)||a,actualHours:Wt(o),targetHours:Wt(n),percent:l,color:(i=e.categoryColorMap)==null?void 0:i[a]}}function zv(e){var o,r;if(e.totalHours<=0)return null;const t=((r=(o=e.targetsConfig.balance)==null?void 0:o.index)==null?void 0:r.basis)||"category";if(t==="off")return null;const a={};if(t==="calendar")e.calendarTotals.forEach(n=>{n.total<=0||(a[n.id]=n.total/e.totalHours)});else{const n=new Map;e.calendarTotals.forEach(l=>{var s;const i=String(((s=e.calendarCategoryMap)==null?void 0:s[l.id])??"");i&&n.set(i,(n.get(i)||0)+l.total)}),n.forEach((l,i)=>{l<=0||(a[i]=l/e.totalHours)})}return Object.keys(a).length?Ac({shares:a,targets:e.targetsConfig.categories,basis:t}):null}function os(e){return e.length?e.reduce((t,a)=>t+a,0)/e.length:0}function rs(e){if(!e.length)return 0;const t=[...e].sort((o,r)=>o-r),a=Math.floor(t.length/2);return t.length%2?t[a]:(t[a-1]+t[a])/2}function Rv(e){if(!e)return null;const t=new Date(`${e}T00:00:00`);return Number.isNaN(t.getTime())?null:t.getDay()}function jv(e,t){let a=null,o=null;const r=4;for(let n=e.length-1;n>=0;n-=1){const l=t[n]??0;if(!a&&l<=.01&&(a=e[n]),!o&&l>.01&&l<=r&&(o=e[n]),a&&o)break}return{lastDayOff:a,lastHalfDayOff:o}}function Go(e){return Math.round(e*10)/10}function Wt(e){return Math.round(e*100)/100}function Ec(e){if(e==null)return null;const t=String(e).trim();return t||null}const Va={time_summary_v2:Iv,targets_v2:Lv,balance_index:Jm,dayoff_trend:wv,category_mix_trend:Zm,chart_pie:pv,chart_stacked:mv,chart_per_day:fv,chart_dow:iv,chart_hod:dv,calendar_table:bv,deck_cards:Cv,note_snippet:Dv,note_editor:Mv};function Lc(e,t){if(!Array.isArray(e))return t;const a=[];return e.forEach((o,r)=>{const n=String((o==null?void 0:o.type)??"");if(!n)return;const l=Va[n];if(!l)return;const i=String((o==null?void 0:o.id)??"")||`widget-${n}-${r+1}`,s=(o==null?void 0:o.layout)??{},c=s.width==="quarter"||s.width==="half"?s.width:"full",u=s.height==="s"||s.height==="l"||s.height==="xl"?s.height:"m",h=Number(s.order??0),p={...l.defaultOptions||{},...o!=null&&o.options&&typeof o.options=="object"?o.options:{}};p.scale==null&&p.textSize!=null&&(p.scale=p.textSize,delete p.textSize),a.push({id:i,type:n,options:p,layout:{width:c,height:u,order:Number.isFinite(h)?h:0},version:Number((o==null?void 0:o.version)??1)||1})}),a.length?a:t}function Nc(){return ns("standard")}function Jo(e){const t=[{id:"tab-1",label:"Overview",widgets:ns(e)}];return{tabs:t,defaultTabId:t[0].id}}function Yo(e,t){var s,c,u,h;if(Array.isArray(e)){const m=Lc(e,((s=t.tabs[0])==null?void 0:s.widgets)||Nc()),p=((c=t.tabs[0])==null?void 0:c.id)||"tab-1";return{tabs:[{id:p,label:((u=t.tabs[0])==null?void 0:u.label)||"Overview",widgets:m}],defaultTabId:p}}if(!e||typeof e!="object")return t;const a=Array.isArray(e.tabs)?e.tabs:[],o=t.tabs||[],r=a.map((m,p)=>{var E,T;const d=String((m==null?void 0:m.id)??"").trim()||`tab-${p+1}`,f=String((m==null?void 0:m.label)??"").trim(),y=f?f.slice(0,48):`Tab ${p+1}`,C=((E=o[p])==null?void 0:E.widgets)||((T=o[0])==null?void 0:T.widgets)||Nc(),$=Lc(m==null?void 0:m.widgets,C);return{id:d,label:y,widgets:$}}),n=r.length?r:o,l=String(e.defaultTabId??e.defaultTab??e.active??""),i=n.some(m=>m.id===l)?l:((h=n[0])==null?void 0:h.id)||"tab-1";return{tabs:n,defaultTabId:i}}function Uv(e,t){const a=t.hasInitialLoad===!1||!!t.isLoading;return e.type==="deck_cards"?a||!!t.deckLoading:a}function Vv(e,t){const a=Va[e.type];if(!a)return null;const o=a.buildProps(e,t)||{},r=Uv(e,t);return{component:a.component,props:o,loading:r}}function Je(e,t={},a){const o=Va[e],r=(o==null?void 0:o.defaultLayout)??{width:"half",height:"s",order:50},n=(o==null?void 0:o.defaultOptions)||{};return{id:`widget-${e}-${Math.random().toString(36).slice(2,8)}`,type:e,options:{...n,...t||{}},layout:{...r,...a||{}},version:1}}function ns(e){return e==="quick"?[Je("time_summary_v2",{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0,mode:"active",scale:"xl"},{width:"full",height:"xl",order:5}),Je("targets_v2",{showForecast:!0,showHeader:!1,showLegend:!0,showDelta:!0,showPace:!0,showToday:!0,scale:"lg"},{width:"full",height:"xl",order:10}),Je("balance_index",{showTrend:!0,showMessages:!0,showConfig:!1,indexBasis:"category",noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6,lookbackWeeks:3,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1},{width:"full",height:"m",order:20}),Je("dayoff_trend",{},{width:"full",height:"s",order:30})]:e==="pro"?[Je("targets_v2",{showForecast:!0,showPace:!0,useLocalConfig:!1,localConfig:null,showCategoryBlocks:!0},{width:"half",height:"xl",order:10}),Je("time_summary_v2",{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0,mode:"active",scale:"md"},{width:"half",height:"xl",order:30}),Je("balance_index",{showTrend:!0,showMessages:!0,showConfig:!1,indexBasis:"category",noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6,lookbackWeeks:3,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1},{width:"half",height:"m",order:40}),Je("dayoff_trend",{},{width:"half",height:"s",order:50}),Je("category_mix_trend",{lookbackWeeks:3,density:"normal",labelMode:"period",colorMode:"hybrid",squareCells:!1,showHeader:!0,showBadge:!0},{width:"full",height:"l",order:55}),Je("calendar_table",{},{width:"full",height:"l",order:56}),Je("chart_pie",{scope:"calendar",showLegend:!0,showLabels:!0},{width:"half",height:"m",order:57}),Je("chart_stacked",{scope:"calendar",showLegend:!0,showLabels:!1},{width:"full",height:"l",order:58}),Je("chart_per_day",{scope:"calendar",showLabels:!1},{width:"half",height:"m",order:59}),Je("chart_dow",{scope:"calendar",showLabels:!0},{width:"half",height:"m",order:59.5}),Je("chart_hod",{showHint:!1},{width:"full",height:"l",order:59.8}),Je("deck_cards",{allowMine:!0,includeArchived:!0,includeCompleted:!0,autoScroll:!0,intervalSeconds:5,showCount:!0,filters:["open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],defaultFilter:"open_all",mineMode:"assignee"},{width:"half",height:"xl",order:60}),Je("note_editor",{},{width:"half",height:"l",order:70})]:[Je("targets_v2",{showForecast:!0,showHeader:!1,showLegend:!0,showDelta:!0,showPace:!0,showToday:!0,scale:"lg"},{width:"half",height:"l",order:10}),Je("time_summary_v2",{showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0,mode:"active",scale:"md"},{width:"half",height:"xl",order:20}),Je("balance_index",{showTrend:!0,showMessages:!0,showConfig:!1,indexBasis:"category",noticeAbove:.15,noticeBelow:.15,warnAbove:.3,warnBelow:.3,warnIndex:.6,lookbackWeeks:3,messageDensity:"normal",trendColor:"#2563EB",showCurrent:!0,labelMode:"period",reverseTrend:!1},{width:"half",height:"m",order:30}),Je("dayoff_trend",{},{width:"half",height:"s",order:40}),Je("category_mix_trend",{lookbackWeeks:3,density:"normal",labelMode:"period",colorMode:"hybrid",squareCells:!1,showHeader:!0,showBadge:!0},{width:"full",height:"l",order:50}),Je("calendar_table",{},{width:"full",height:"l",order:55}),Je("chart_pie",{scope:"calendar",showLegend:!0,showLabels:!0},{width:"half",height:"m",order:56}),Je("chart_stacked",{scope:"calendar",showLegend:!0,showLabels:!1},{width:"full",height:"l",order:57}),Je("chart_per_day",{scope:"calendar",showLabels:!1},{width:"half",height:"m",order:58}),Je("chart_dow",{scope:"calendar",showLabels:!0},{width:"half",height:"m",order:58.5}),Je("chart_hod",{showHint:!1},{width:"full",height:"l",order:59})]}const Kv=["draggable","aria-busy","onClick","onDragstart"],qv={key:0,class:"widget-loading","aria-live":"polite"},Gv=Qe(Le({__name:"DashboardGrid",props:{ordered:{},editable:{type:Boolean},selectedId:{},widgetTypeList:{}},emits:["select","add","reorder","select-cell"],setup(e,{emit:t}){const a=e,o=t,r=ie(null),n=ie(null),l=ie(null),i=N(()=>a.widgetTypeList||[]),s=N(()=>{const w=[];let A={items:[],col:1,remaining:4};const O=()=>{A.items.length&&w.push({items:A.items}),A={items:[],col:1,remaining:4}};return a.ordered.forEach(z=>{const J=u(z.layout.width);J>A.remaining&&O();const H=A.col;A.items.push({...z,span:J,start:H}),A.col+=J,A.remaining-=J}),O(),w});function c(w){switch(w){case"quarter":return"w-quarter";case"half":return"w-half";default:return"w-full"}}function u(w){return w==="quarter"?1:w==="half"?2:4}function h(w){switch(w){case"s":return"h-s";case"l":return"h-l";case"xl":return"h-xl";default:return"h-m"}}function m(w){const A=(w==null?void 0:w.scale)||(w==null?void 0:w.textSize)||"md";return A==="sm"?"scale-sm":A==="lg"?"scale-lg":A==="xl"?"scale-xl":"scale-md"}function p(w){const A=(w==null?void 0:w.scale)||(w==null?void 0:w.textSize)||"md",O=A==="sm"?.85:A==="lg"?1.35:A==="xl"?1.6:1.1,z=w!=null&&w.dense?.72:1,J=O*z,H=18*O;return{"--widget-scale":String(O),"--widget-space":String(J),"--widget-density":String(z),"--widget-title-size":`${H}px`}}function d(w){const A=r.value;if(!A)return{row:0,col:1};const O=A.getBoundingClientRect(),z=12,H=(O.width-z*3)/4,x=Math.max(0,Math.min(O.width,w.clientX-O.left)),v=Math.min(3,Math.max(0,Math.floor(x/(H+z))))+1,b=Math.max(0,Math.min(O.height+400,w.clientY-O.top)),j=Number.parseFloat(getComputedStyle(A).getPropertyValue("--grid-row"))||24;return{row:Math.max(0,Math.floor(b/(j+z))),col:v}}function f(w,A){var v,b,j,F;const O=s.value,z=O[w]||O[O.length-1]||{items:[]},J=[...z.items||[]].filter(X=>X.start<A).sort((X,ne)=>X.start-ne.start).pop(),H=[...z.items||[]].filter(X=>X.start>=A).sort((X,ne)=>X.start-ne.start)[0];if(J&&H)return(J.layout.order+H.layout.order)/2;if(J)return(J.layout.order||0)+5;if(H)return(H.layout.order||0)-5;const x=O[w-1]||O[O.length-1];return x&&x.items.length?(x.items[x.items.length-1].layout.order||0)+10:((((F=(j=(b=(v=O[0])==null?void 0:v.items)==null?void 0:b[0])==null?void 0:j.layout)==null?void 0:F.order)??0)||0)-10}function y(w){if(!a.editable||!i.value.length)return;const{row:A,col:O}=d(w),z=f(A,O);o("select-cell",z)}function C(w){a.editable&&(w.target.closest(".layout-item")||y(w))}function $(w){a.editable&&(w.target.closest(".layout-item")||y(w))}function E(w){if(!a.editable||!n.value)return;const{row:A,col:O}=d(w);l.value=f(A,O)}function T(){if(!a.editable||!n.value)return;const w=n.value,A=l.value??void 0;n.value=null,l.value=null,o("reorder",w,A)}function P(w){a.editable&&(n.value=w,l.value=null)}function I(){n.value=null,l.value=null}return(w,A)=>(k(),_("div",{ref_key:"gridEl",ref:r,class:Be(["layout-grid",{"show-guides":w.editable}]),onClick:C,onContextmenu:it($,["prevent"]),onDragover:it(E,["prevent"]),onDrop:it(T,["prevent"])},[(k(!0),_(pe,null,xe(w.ordered,O=>(k(),_("div",{key:O.id,class:Be(["layout-item",[c(O.layout.width),h(O.layout.height),m(O.options),{"is-editable":w.editable,"is-selected":w.editable&&w.selectedId===O.id,"is-dragging":w.editable&&n.value===O.id,"is-loading":!!O.loading}]]),style:Ee(p(O.options)),draggable:w.editable,"aria-busy":O.loading?"true":"false",onClick:it(z=>o("select",O.id),["stop"]),onDragstart:z=>P(O.id),onDragend:I},[O.loading?(k(),_("div",qv,[...A[0]||(A[0]=[g("span",{class:"widget-loading__spinner","aria-hidden":"true"},null,-1),g("span",{class:"widget-loading__label"},"Loading",-1)])])):ae("",!0),(k(),lt(Su(O.component),vi({ref_for:!0},O.props),null,16))],46,Kv))),128))],34))}}),[["__scopeId","data-v-9017abee"]]),Jv={key:0,class:"options-pop"},Yv={class:"opt-section"},Zv=["for"],Xv=["id","min","max","step","value","onInput"],Qv=["id","value","onChange"],eb=["value"],tb=["id","checked","onChange"],ab=["id","value","onInput"],ob=["id","value","onInput"],rb={key:0,class:"opt-section"},nb=["for"],sb=["id","min","max","step","value","onInput"],lb=["id","value","onChange"],ib=["value"],cb=["id","checked","onChange"],db=["id","value","onInput"],ub=["id","value","onInput"],fb={key:5,class:"colorlist"},gb=["value","onInput"],pb=["onClick"],hb={key:6,class:"multi"},mb=["value","checked","onChange"],vb={key:7,class:"taglist"},bb={key:0,class:"taglist__hint"},yb={key:1,class:"taglist__hint"},wb={class:"taglist__meta"},kb=["value","checked","onChange"],_b={class:"taglist__label"},xb={key:0,class:"taglist__count"},Cb=["id","value","onInput"],Sb={key:9,class:"filter-builder"},$b=["value","onInput"],Tb=["value","onInput"],Mb=["value","onInput"],Ab=["onClick"],Db=["onClick"],Eb={key:1,class:"opt-row opt-row--footer"},Lb=Qe(Le({__name:"WidgetOptionsMenu",props:{entry:{},options:{},open:{type:Boolean},showAdvanced:{type:Boolean},context:{}},emits:["change","toggle","open-advanced"],setup(e,{emit:t}){const a=e,o=t,r=ie({}),n=[{key:"titlePrefix",label:"Title prefix",type:"text"},{key:"showHeader",label:"Show title",type:"toggle"},{key:"cardBg",label:"Card background",type:"color",hint:"Pick a card fill; leave empty for default."},{key:"scale",label:"Scale",type:"select",options:[{value:"sm",label:"Small"},{value:"md",label:"Normal"},{value:"lg",label:"Large"},{value:"xl",label:"Extra large"}]},{key:"dense",label:"Dense mode",type:"toggle"}],l=N(()=>{var j,F;const H=new Set(n.map(X=>X.key)),x=((j=a.entry)==null?void 0:j.controls)||[],v=typeof((F=a.entry)==null?void 0:F.dynamicControls)=="function"?a.entry.dynamicControls(a.options||{},a.context||{}):[];return[...x,...v].filter(X=>!H.has(X.key))});Ae(()=>a.options,H=>{var v;const x=((v=a.entry)==null?void 0:v.defaultOptions)||{};r.value={...x,...H||{}}},{immediate:!0,deep:!0});const i=N({get:()=>!!a.open,set:H=>o("toggle",H)});function s(H,x){const v=Number(x.target.value);o("change",H,v)}function c(H,x){const v=x.target.value;o("change",H,v)}function u(H,x){const v=x.target.checked;o("change",H,v)}function h(H,x){const v=x.target.value;o("change",H,v)}function m(H,x,v){const b=v.target.checked,j=Array.isArray(r.value[H])?[...r.value[H]]:[],F=new Set(j);b?F.add(x):F.delete(x),o("change",H,Array.from(F))}function p(H){return Array.isArray(H==null?void 0:H.options)?H.options.map(x=>String((x==null?void 0:x.value)??"")).filter(Boolean):[]}function d(H,x){const v=C(H.key);return(Array.isArray(v)?v.map(j=>String(j)):p(H)).includes(String(x))}function f(H){return!Array.isArray(C(H.key))}function y(H,x,v){const b=v.target.checked,j=p(H),F=C(H.key),X=Array.isArray(F)?F.map(se=>String(se)):j,ne=new Set(X),Y=String(x);b?ne.add(Y):ne.delete(Y);const re=j.filter(se=>ne.has(se));o("change",H.key,re)}function C(H){if(H==="scale")return r.value.scale??r.value.textSize;if(!H.includes("."))return r.value[H];const x=H.split(".");let v=r.value;for(const b of x){if(v==null)return;v=v[b]}return v}function $(H){const x=C(H);return Array.isArray(x)&&x.length?x:typeof x=="string"&&x.trim()?x.split(",").map(v=>v.trim()).filter(Boolean):P.slice(0,5)}function E(H,x,v){const b=v.target.value,j=[...$(H)];j[x]=b,o("change",H,j)}function T(H){const x=[...$(H),"#cccccc"];o("change",H,x)}const P=["#2563EB","#F97316","#10B981","#A855F7","#EC4899"];function I(H){const x=C(H);if(Array.isArray(x))return x.map(v=>({label:String((v==null?void 0:v.label)||""),labels:Array.isArray(v==null?void 0:v.labels)?v.labels.join(", "):String((v==null?void 0:v.labels)||""),assignees:Array.isArray(v==null?void 0:v.assignees)?v.assignees.join(", "):String((v==null?void 0:v.assignees)||"")}));if(typeof x=="string"&&x.trim())try{const v=JSON.parse(x);if(Array.isArray(v))return v.map(b=>({label:String((b==null?void 0:b.label)||""),labels:Array.isArray(b==null?void 0:b.labels)?b.labels.join(", "):String((b==null?void 0:b.labels)||""),assignees:Array.isArray(b==null?void 0:b.assignees)?b.assignees.join(", "):String((b==null?void 0:b.assignees)||"")}))}catch{return[]}return[]}function w(H){const x=[...I(H),{label:"",labels:"",assignees:""}];o("change",H,z(x))}function A(H,x){const v=I(H).filter((b,j)=>j!==x);o("change",H,z(v))}function O(H,x,v,b){const j=b.target.value,F=I(H).map((X,ne)=>ne===x?{...X,[v]:j}:X);o("change",H,z(F))}function z(H){return H.map(x=>({label:x.label.trim(),labels:J(x.labels),assignees:J(x.assignees)}))}function J(H){return H.split(",").map(x=>x.trim()).filter(Boolean)}return(H,x)=>(k(),_("div",{class:"options-wrapper",onKeydown:x[2]||(x[2]=it(()=>{},["stop"]))},[g("button",{type:"button",class:"ghost",title:"Configure widget",onClick:x[0]||(x[0]=it(v=>i.value=!i.value,["stop"]))},""),i.value?(k(),_("div",Jv,[g("div",Yv,[x[3]||(x[3]=g("div",{class:"opt-section__title"},"Layout & title",-1)),(k(),_(pe,null,xe(n,v=>g("div",{key:v.key,class:"opt-row"},[g("label",{for:`opt-${v.key}`},W(v.label),9,Zv),v.type==="number"?(k(),_("input",{key:0,id:`opt-${v.key}`,type:"number",min:v.min,max:v.max,step:v.step||1,value:C(v.key)??"",onInput:b=>s(v.key,b)},null,40,Xv)):v.type==="select"?(k(),_("select",{key:1,id:`opt-${v.key}`,value:C(v.key),onChange:b=>c(v.key,b)},[(k(!0),_(pe,null,xe(v.options||[],b=>(k(),_("option",{key:b.value,value:b.value},W(b.label),9,eb))),128))],40,Qv)):v.type==="toggle"?(k(),_("input",{key:2,id:`opt-${v.key}`,type:"checkbox",checked:!!C(v.key),onChange:b=>u(v.key,b)},null,40,tb)):v.type==="text"?(k(),_("input",{key:3,id:`opt-${v.key}`,type:"text",value:C(v.key)??"",onInput:b=>h(v.key,b)},null,40,ab)):v.type==="color"?(k(),_("input",{key:4,id:`opt-${v.key}`,type:"color",value:C(v.key)||"#000000",onInput:b=>h(v.key,b)},null,40,ob)):ae("",!0)])),64))]),l.value.length?(k(),_("div",rb,[x[5]||(x[5]=g("div",{class:"opt-section__title"},"Widget options",-1)),(k(!0),_(pe,null,xe(l.value,v=>(k(),_("div",{key:v.key,class:"opt-row"},[g("label",{for:`opt-${v.key}`},W(v.label),9,nb),v.type==="number"?(k(),_("input",{key:0,id:`opt-${v.key}`,type:"number",min:v.min,max:v.max,step:v.step||1,value:C(v.key)??"",onInput:b=>s(v.key,b)},null,40,sb)):v.type==="select"?(k(),_("select",{key:1,id:`opt-${v.key}`,value:C(v.key),onChange:b=>c(v.key,b)},[(k(!0),_(pe,null,xe(v.options||[],b=>(k(),_("option",{key:b.value,value:b.value},W(b.label),9,ib))),128))],40,lb)):v.type==="toggle"?(k(),_("input",{key:2,id:`opt-${v.key}`,type:"checkbox",checked:!!C(v.key),onChange:b=>u(v.key,b)},null,40,cb)):v.type==="text"?(k(),_("input",{key:3,id:`opt-${v.key}`,type:"text",value:C(v.key)??"",onInput:b=>h(v.key,b)},null,40,db)):v.type==="color"?(k(),_("input",{key:4,id:`opt-${v.key}`,type:"color",value:C(v.key)||"#000000",onInput:b=>h(v.key,b)},null,40,ub)):v.type==="colorlist"?(k(),_("div",fb,[(k(!0),_(pe,null,xe($(v.key),(b,j)=>(k(),_("div",{key:`${v.key}-${j}`,class:"colorlist__item"},[g("input",{type:"color",value:b,onInput:F=>E(v.key,j,F)},null,40,gb)]))),128)),g("button",{type:"button",class:"ghost sm",onClick:b=>T(v.key)},"+",8,pb)])):v.type==="multiselect"?(k(),_("div",hb,[(k(!0),_(pe,null,xe(v.options||[],b=>(k(),_("label",{key:`${v.key}-${b.value}`,class:"multi__item"},[g("input",{type:"checkbox",value:b.value,checked:Array.isArray(C(v.key))?C(v.key).includes(b.value):!1,onChange:j=>m(v.key,b.value,j)},null,40,mb),g("span",null,W(b.label),1)]))),128))])):v.type==="taglist"?(k(),_("div",vb,[v.hint?(k(),_("div",bb,W(v.hint),1)):f(v)?(k(),_("div",yb," All tags are active by default. Uncheck to hide a filter. ")):ae("",!0),(k(!0),_(pe,null,xe(v.options||[],b=>(k(),_("label",{key:`${v.key}-${b.value}`,class:"taglist__item"},[g("span",wb,[g("input",{type:"checkbox",value:b.value,checked:d(v,b.value),onChange:j=>y(v,b.value,j)},null,40,kb),g("span",_b,W(b.label),1)]),typeof b.count=="number"?(k(),_("span",xb,W(b.count),1)):ae("",!0)]))),128))])):v.type==="textarea"?(k(),_("textarea",{key:8,id:`opt-${v.key}`,rows:"3",value:C(v.key)??"",onInput:b=>h(v.key,b)},null,40,Cb)):v.type==="filterbuilder"?(k(),_("div",Sb,[x[4]||(x[4]=g("div",{class:"filter-builder__hint"},[Pe(" Tags and assigned can be used independentlyleave one empty to ignore it. Use commas. Special assignees: "),g("code",null,"me"),Pe(", "),g("code",null,"unassigned"),Pe(". ")],-1)),(k(!0),_(pe,null,xe(I(v.key),(b,j)=>(k(),_("div",{key:`${v.key}-row-${j}`,class:"filter-builder__row"},[g("input",{type:"text",class:"filter-builder__label",value:b.label,placeholder:"Filter label",onInput:F=>O(v.key,j,"label",F)},null,40,$b),g("input",{type:"text",class:"filter-builder__input",value:b.labels,placeholder:"Tags (comma separated)",onInput:F=>O(v.key,j,"labels",F)},null,40,Tb),g("input",{type:"text",class:"filter-builder__input",value:b.assignees,placeholder:"Assigned (comma separated)",onInput:F=>O(v.key,j,"assignees",F)},null,40,Mb),g("button",{type:"button",class:"ghost sm",onClick:F=>A(v.key,j)},"",8,Ab)]))),128)),g("button",{type:"button",class:"ghost sm",onClick:b=>w(v.key)},"+ Add filter",8,Db)])):ae("",!0)]))),128))])):ae("",!0),H.showAdvanced?(k(),_("div",Eb,[g("button",{type:"button",class:"link-btn",title:"Opens a full targets editor for this widget only. Use the reset inside to go back to global.",onClick:x[1]||(x[1]=it(v=>o("open-advanced"),["stop"]))}," Advanced targets (widget only) ")])):ae("",!0)])):ae("",!0)],32))}}),[["__scopeId","data-v-adf460eb"]]),Nb={key:0,class:"widget-toolbar-layer"},Ib={class:"widget-toolbar"},Bb={class:"toolbar-title"},Ob={key:0,class:"toolbar-actions"},Pb={class:"toolbar-quick"},Fb={class:"toolbar-field"},Hb=["value"],Wb={class:"toolbar-field"},zb=["value"],Rb={class:"toolbar-field"},jb=["value"],Ub={class:"toolbar-field toolbar-field--toggle"},Vb=["checked"],Kb={class:"toolbar-field toolbar-field--toggle"},qb=["checked"],Gb={key:1,class:"toolbar-actions"},Jb=Qe(Le({__name:"DashboardToolbar",props:{editable:{type:Boolean},selectedItem:{},openOptionsId:{},presetLabel:{},context:{}},emits:["select-first","move","cycle-width","cycle-height","remove","reset-preset","toggle-options","open-advanced","edit-options"],setup(e){const t=e,a=N(()=>{var u,h,m;const s=((h=(u=t.selectedItem)==null?void 0:u.props)==null?void 0:h.title)||"";if(s)return s;const c=t.selectedItem?Va[t.selectedItem.type]:null;return(c==null?void 0:c.label)||((m=t.selectedItem)==null?void 0:m.type)||"Widget"});function o(s){var c,u;return(u=(c=t.selectedItem)==null?void 0:c.options)==null?void 0:u[s]}function r(s){return Va[s]}function n(s){var c;return!!((c=Va[s])!=null&&c.configurable)}function l(s){return s==="quarter"?"":s==="half"?"":"1"}function i(s){return s==="s"?"S":s==="l"?"L":s==="xl"?"XL":"M"}return(s,c)=>(k(),lt(cu,{to:"body"},[s.editable?(k(),_("div",Nb,[g("div",Ib,[g("div",Bb,[s.selectedItem?(k(),_(pe,{key:0},[Pe(W(a.value),1)],64)):(k(),_(pe,{key:1},[Pe("Click a widget to edit")],64))]),s.selectedItem?(k(),_("div",Ob,[g("button",{type:"button",class:"ghost",title:"Move earlier",onClick:c[0]||(c[0]=u=>s.$emit("move","up"))},""),g("button",{type:"button",class:"ghost",title:"Move later",onClick:c[1]||(c[1]=u=>s.$emit("move","down"))},""),g("button",{type:"button",class:"ghost",title:"Cycle width",onClick:c[2]||(c[2]=u=>s.$emit("cycle-width"))},W(l(s.selectedItem.layout.width)),1),g("button",{type:"button",class:"ghost",title:"Cycle height",onClick:c[3]||(c[3]=u=>s.$emit("cycle-height"))},W(i(s.selectedItem.layout.height)),1),g("div",Pb,[g("label",Fb,[c[15]||(c[15]=g("span",null,"Title",-1)),g("input",{type:"text",value:o("titlePrefix")||"",placeholder:"Prefix",onInput:c[4]||(c[4]=u=>s.$emit("edit-options",s.selectedItem.id,"titlePrefix",u.target.value))},null,40,Hb)]),g("label",Wb,[c[16]||(c[16]=g("span",null,"Card",-1)),g("input",{type:"color",value:o("cardBg")||"#ffffff",onInput:c[5]||(c[5]=u=>s.$emit("edit-options",s.selectedItem.id,"cardBg",u.target.value))},null,40,zb)]),g("label",Rb,[c[18]||(c[18]=g("span",null,"Scale",-1)),g("select",{value:o("scale")||"md",onChange:c[6]||(c[6]=u=>s.$emit("edit-options",s.selectedItem.id,"scale",u.target.value))},[...c[17]||(c[17]=[g("option",{value:"sm"},"Small",-1),g("option",{value:"md"},"Normal",-1),g("option",{value:"lg"},"Large",-1),g("option",{value:"xl"},"Extra large",-1)])],40,jb)]),g("label",Ub,[g("input",{type:"checkbox",checked:o("showHeader")!==!1,onChange:c[7]||(c[7]=u=>s.$emit("edit-options",s.selectedItem.id,"showHeader",u.target.checked))},null,40,Vb),c[19]||(c[19]=g("span",null,"Show title",-1))]),g("label",Kb,[g("input",{type:"checkbox",checked:!!o("dense"),onChange:c[8]||(c[8]=u=>s.$emit("edit-options",s.selectedItem.id,"dense",u.target.checked))},null,40,qb),c[20]||(c[20]=g("span",null,"Dense",-1))])]),s.selectedItem&&n(s.selectedItem.type)?(k(),lt(Lb,{key:0,entry:r(s.selectedItem.type),options:s.selectedItem.options,open:s.openOptionsId===s.selectedItem.id,"show-advanced":s.selectedItem.type==="targets_v2",context:s.context,onToggle:c[9]||(c[9]=u=>s.$emit("toggle-options",s.selectedItem.id,u)),onOpenAdvanced:c[10]||(c[10]=u=>s.$emit("open-advanced",s.selectedItem.id)),onChange:c[11]||(c[11]=(u,h)=>s.$emit("edit-options",s.selectedItem.id,u,h))},null,8,["entry","options","open","show-advanced","context"])):ae("",!0),s.presetLabel?(k(),_("button",{key:1,type:"button",class:"ghost",title:"Reset widgets to preset",onClick:c[12]||(c[12]=u=>s.$emit("reset-preset"))}," Reset "+W(s.presetLabel),1)):ae("",!0),g("button",{type:"button",class:"ghost danger",title:"Remove widget",onClick:c[13]||(c[13]=u=>s.$emit("remove"))},"")])):(k(),_("div",Gb,[g("button",{type:"button",class:"ghost",onClick:c[14]||(c[14]=u=>s.$emit("select-first"))},"Select first widget")]))])])):ae("",!0)]))}}),[["__scopeId","data-v-c1764b36"]]),Yb={id:"opsdash-sidebar-pane-targets",class:"sb-pane",role:"tabpanel","aria-labelledby":"opsdash-sidebar-tab-targets"},Zb={class:"target-config"},Xb={class:"field"},Qb=["value","aria-invalid"],ey={class:"field"},ty=["value","aria-invalid"],ay={class:"cat-header"},oy=["value","onInput"],ry=["disabled","onClick"],ny={class:"cat-fields"},sy={class:"field"},ly=["value","aria-invalid","onInput"],iy={class:"field"},cy=["value","onChange"],dy={class:"field checkbox"},uy=["checked","onChange"],fy={class:"field color-field"},gy=["aria-expanded","aria-label","onClick"],py=["id"],hy={class:"swatch-grid",role:"group","aria-label":"Preset colors"},my=["aria-label","onClick"],vy={class:"custom-color"},by=["value","onInput"],yy={class:"target-section"},wy={class:"field checkbox"},ky=["checked"],_y={class:"field"},xy=["value"],Cy={class:"field"},Sy=["value","aria-invalid"],$y={class:"field"},Ty=["value","aria-invalid"],My={class:"target-section"},Ay={class:"field"},Dy=["value"],Ey={class:"field"},Ly=["value","aria-invalid"],Ny={class:"field"},Iy=["value","aria-invalid"],By={class:"target-section"},Oy={class:"field checkbox"},Py=["checked"],Fy={class:"field checkbox"},Hy=["checked"],Wy=Qe(Le({__name:"SidebarTargetsPane",props:{targets:{},categoryOptions:{},totalTargetMessage:{},allDayHoursMessage:{},categoryTargetMessages:{},paceThresholdMessages:{},forecastMomentumMessage:{},forecastPaddingMessage:{},canAddCategory:{type:Boolean},colorPalette:{}},emits:["total-target-input","set-all-day-hours","set-category-label","remove-category","set-category-target","set-category-pace","set-category-weekend","set-category-color","add-category","set-include-weekend-total","set-pace-mode","set-threshold","set-forecast-method","set-forecast-momentum","set-forecast-padding","set-ui-option"],setup(e,{emit:t}){const a=e,{targets:o,categoryOptions:r,totalTargetMessage:n,allDayHoursMessage:l,categoryTargetMessages:i,paceThresholdMessages:s,forecastMomentumMessage:c,forecastPaddingMessage:u,canAddCategory:h,colorPalette:m}=Gd(a),p=t,d=N(()=>{var w;return E((w=m.value)==null?void 0:w[0])??"#2563EB"}),f=ie(null);function y(w){const A=w.target;A!=null&&A.closest("[data-color-popover]")||$()}$t(()=>{document.addEventListener("click",y)}),wt(()=>{document.removeEventListener("click",y)});function C(w){if(f.value===w){$();return}f.value=w,Xt(()=>{const A=document.getElementById(`opsdash-color-popover-${w}`);A==null||A.focus()})}function $(){f.value=null}function E(w){if(typeof w!="string")return null;const A=w.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(A))return null;if(A.length===4){const[,O,z,J]=A;return`#${O}${O}${z}${z}${J}${J}`.toUpperCase()}return A.toUpperCase()}function T(w){return E(w==null?void 0:w.color)??d.value}function P(w,A){const O=E(A)??d.value;p("set-category-color",{id:w,color:O})}function I(w,A){const O=E(A)??d.value;p("set-category-color",{id:w,color:O}),$()}return(w,A)=>{var O,z,J,H,x,v,b,j,F,X,ne,Y;return k(),_("div",Yb,[A[36]||(A[36]=g("div",{class:"sb-title"},"Target Settings",-1)),g("div",Zb,[g("div",Xb,[A[14]||(A[14]=g("span",{class:"label"},"Total target (h)",-1)),g("input",{type:"number",value:D(o).totalHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!D(n),onInput:A[0]||(A[0]=re=>w.$emit("total-target-input",re.target.value))},null,40,Qb),D(n)?(k(),_("div",{key:0,class:Be(["input-message",(O=D(n))==null?void 0:O.tone])},W((z=D(n))==null?void 0:z.text),3)):ae("",!0)]),g("div",ey,[A[15]||(A[15]=g("span",{class:"label"},"All-day event (h per day)",-1)),g("input",{type:"number",value:D(o).allDayHours,min:"0",max:"24",step:"0.25","aria-invalid":!!D(l),onInput:A[1]||(A[1]=re=>w.$emit("set-all-day-hours",re.target.value))},null,40,ty),D(l)?(k(),_("div",{key:0,class:Be(["input-message",(J=D(l))==null?void 0:J.tone])},W((H=D(l))==null?void 0:H.text),3)):ae("",!0)]),(k(!0),_(pe,null,xe(D(r),re=>{var se,fe;return k(),_("div",{class:"target-category",key:re.id},[g("div",ay,[g("span",{class:"cat-color-indicator",style:Ee({backgroundColor:T(re)}),"aria-hidden":"true"},null,4),g("input",{class:"cat-name",type:"text",value:re.label,placeholder:"Category name",onInput:ce=>w.$emit("set-category-label",{id:re.id,label:ce.target.value})},null,40,oy),g("button",{class:"remove-cat",type:"button",disabled:D(r).length<=1,title:"Remove category",onClick:ce=>w.$emit("remove-category",re.id)},"  ",8,ry)]),g("div",ny,[g("label",sy,[A[16]||(A[16]=g("span",{class:"label"},"Target (h)",-1)),g("input",{type:"number",value:re.targetHours,min:"0",max:"1000",step:"0.5","aria-invalid":!!D(i)[re.id],onInput:ce=>w.$emit("set-category-target",{id:re.id,value:ce.target.value})},null,40,ly),D(i)[re.id]?(k(),_("div",{key:0,class:Be(["input-message",(se=D(i)[re.id])==null?void 0:se.tone])},W((fe=D(i)[re.id])==null?void 0:fe.text),3)):ae("",!0)]),g("label",iy,[A[18]||(A[18]=g("span",{class:"label"},"Pace mode",-1)),g("select",{value:re.paceMode||D(o).pace.mode,onChange:ce=>w.$emit("set-category-pace",{id:re.id,mode:ce.target.value})},[...A[17]||(A[17]=[g("option",{value:"days_only"},"Days only",-1),g("option",{value:"time_aware"},"Time aware",-1)])],40,cy)]),g("label",dy,[g("input",{type:"checkbox",checked:re.includeWeekend,onChange:ce=>w.$emit("set-category-weekend",{id:re.id,value:ce.target.checked})},null,40,uy),A[19]||(A[19]=g("span",null,"Weekend",-1))]),g("div",fy,[g("div",{class:"color-trigger-wrapper","data-color-popover":"",onClick:A[3]||(A[3]=it(()=>{},["stop"]))},[g("button",{type:"button",class:"color-link","aria-expanded":f.value===re.id,"aria-label":`Choose color for ${re.label}`,onClick:ce=>C(re.id)}," Color ",8,gy),f.value===re.id?(k(),_("div",{key:0,class:"color-popover",id:`opsdash-color-popover-${re.id}`,tabindex:"-1",onKeydown:A[2]||(A[2]=so(it(ce=>$(),["prevent"]),["esc"]))},[g("div",hy,[(k(!0),_(pe,null,xe(D(m),ce=>(k(),_("button",{key:`${re.id}-swatch-${ce}`,type:"button",class:Be(["color-swatch",{active:T(re)===ce}]),style:Ee({backgroundColor:ce}),"aria-label":`Use color ${ce}`,onClick:V=>I(re.id,ce)},null,14,my))),128))]),g("label",vy,[A[20]||(A[20]=g("span",null,"Custom",-1)),g("input",{class:"color-input",type:"color",value:T(re),"aria-label":"Pick custom color",onInput:ce=>P(re.id,ce.target.value)},null,40,by)])],40,py)):ae("",!0)])])])])}),128)),Me(D(ut),{type:"tertiary",class:"add-category",disabled:!D(h),onClick:A[4]||(A[4]=re=>w.$emit("add-category"))},{default:Xe(()=>[...A[21]||(A[21]=[Pe(" Add category ",-1)])]),_:1},8,["disabled"]),g("div",yy,[A[27]||(A[27]=g("div",{class:"section-title"},"Pace",-1)),g("label",wy,[g("input",{type:"checkbox",checked:D(o).pace.includeWeekendTotal,onChange:A[5]||(A[5]=re=>w.$emit("set-include-weekend-total",re.target.checked))},null,40,ky),A[22]||(A[22]=g("span",null,"Count weekend in total pace",-1))]),g("label",_y,[A[24]||(A[24]=g("span",{class:"label"},"Mode",-1)),g("select",{value:D(o).pace.mode,onChange:A[6]||(A[6]=re=>w.$emit("set-pace-mode",re.target.value))},[...A[23]||(A[23]=[g("option",{value:"days_only"},"Days only",-1),g("option",{value:"time_aware"},"Time aware",-1)])],40,xy)]),g("label",Cy,[A[25]||(A[25]=g("span",{class:"label"},"On track  gap (%)",-1)),g("input",{type:"number",value:D(o).pace.thresholds.onTrack,step:"0.1","aria-invalid":!!D(s).onTrack,onInput:A[7]||(A[7]=re=>w.$emit("set-threshold",{key:"onTrack",value:re.target.value}))},null,40,Sy),D(s).onTrack?(k(),_("div",{key:0,class:Be(["input-message",(x=D(s).onTrack)==null?void 0:x.tone])},W((v=D(s).onTrack)==null?void 0:v.text),3)):ae("",!0)]),g("label",$y,[A[26]||(A[26]=g("span",{class:"label"},"At risk  gap (%)",-1)),g("input",{type:"number",value:D(o).pace.thresholds.atRisk,step:"0.1","aria-invalid":!!D(s).atRisk,onInput:A[8]||(A[8]=re=>w.$emit("set-threshold",{key:"atRisk",value:re.target.value}))},null,40,Ty),D(s).atRisk?(k(),_("div",{key:0,class:Be(["input-message",(b=D(s).atRisk)==null?void 0:b.tone])},W((j=D(s).atRisk)==null?void 0:j.text),3)):ae("",!0)])]),g("div",My,[A[32]||(A[32]=g("div",{class:"section-title"},"Forecast",-1)),g("label",Ay,[A[29]||(A[29]=g("span",{class:"label"},"Primary method",-1)),g("select",{value:D(o).forecast.methodPrimary,onChange:A[9]||(A[9]=re=>w.$emit("set-forecast-method",re.target.value))},[...A[28]||(A[28]=[g("option",{value:"linear"},"Linear",-1),g("option",{value:"momentum"},"Momentum",-1)])],40,Dy)]),g("label",Ey,[A[30]||(A[30]=g("span",{class:"label"},"Momentum window (days)",-1)),g("input",{type:"number",value:D(o).forecast.momentumLastNDays,min:"1",max:"14",step:"1","aria-invalid":!!D(c),onInput:A[10]||(A[10]=re=>w.$emit("set-forecast-momentum",re.target.value))},null,40,Ly),D(c)?(k(),_("div",{key:0,class:Be(["input-message",(F=D(c))==null?void 0:F.tone])},W((X=D(c))==null?void 0:X.text),3)):ae("",!0)]),g("label",Ny,[A[31]||(A[31]=g("span",{class:"label"},"Padding (h)",-1)),g("input",{type:"number",value:D(o).forecast.padding,min:"0",step:"0.1","aria-invalid":!!D(u),onInput:A[11]||(A[11]=re=>w.$emit("set-forecast-padding",re.target.value))},null,40,Iy),D(u)?(k(),_("div",{key:0,class:Be(["input-message",(ne=D(u))==null?void 0:ne.tone])},W((Y=D(u))==null?void 0:Y.text),3)):ae("",!0)])]),g("div",By,[A[35]||(A[35]=g("div",{class:"section-title"},"Display",-1)),g("label",Oy,[g("input",{type:"checkbox",checked:D(o).ui.showCalendarCharts,onChange:A[12]||(A[12]=re=>w.$emit("set-ui-option",{key:"showCalendarCharts",value:re.target.checked}))},null,40,Py),A[33]||(A[33]=g("span",null,"Show calendar charts",-1))]),g("label",Fy,[g("input",{type:"checkbox",checked:D(o).ui.showCategoryCharts,onChange:A[13]||(A[13]=re=>w.$emit("set-ui-option",{key:"showCategoryCharts",value:re.target.checked}))},null,40,Hy),A[34]||(A[34]=g("span",null,"Show category charts",-1))])])])])}}}),[["__scopeId","data-v-1e606590"]]);function zy(e,t){const{allowEmpty:a=!1}=t;if(e===""||e===null||e===void 0)return a?{value:null}:{value:null,error:"Enter a number"};const o=Number(e);if(!Number.isFinite(o))return{value:null,error:"Enter a valid number"};let r=o,n;if(typeof t.min=="number"&&r<t.min&&(r=t.min,n=ss(t)),typeof t.max=="number"&&r>t.max&&(r=t.max,n=ss(t)),typeof t.step=="number"&&t.step>0){const i=jy(r,t.step);i!==r&&(r=i,n=ss(t))}const l=Ic(t);return typeof l=="number"&&(r=Number(r.toFixed(l))),{value:r,warning:n}}function Ry(e,t){const a=zy(e,t),o=[];return a.error&&o.push({severity:"error",message:a.error}),a.warning&&o.push({severity:"warning",message:a.warning}),{value:a.value,issues:o}}function jy(e,t){const a=Ic({step:t}),o=Math.round(e/t)*t;return typeof a=="number"?Number(o.toFixed(a)):o}function Ic(e){if(typeof e.decimals=="number")return e.decimals;if(typeof e.step=="number")return Uy(e.step)}function Uy(e){const t=e.toString();if(t.includes("e-")){const[,o]=t.split("e-");return Number(o)}const[,a=""]=t.split(".");return a.length}function ss(e){const t=[];return typeof e.min=="number"&&typeof e.max=="number"?t.push(`Allowed range ${e.min}  ${e.max}`):typeof e.min=="number"?t.push(`Minimum ${e.min}`):typeof e.max=="number"&&t.push(`Maximum ${e.max}`),typeof e.step=="number"&&e.step>0&&t.push(`step ${e.step}`),`Adjusted to allowed value (${t.join(", ")})`}function Vy(e,t,a="Enter a valid number"){const o=Ry(e,t),r=o.issues.find(i=>i.severity==="error"),n=o.issues.find(i=>i.severity==="warning");let l=null;return r||o.value===null?l={text:(r==null?void 0:r.message)??a,tone:"error"}:n&&(l={text:n.message,tone:"warning"}),{ok:!r&&o.value!==null,value:o.value,message:l}}function co(e,t,a,o,r){const{ok:n,value:l,message:i}=Vy(e,t,r);return a(i),!n||l===null?!1:(o(l),!0)}const Ky={key:0,class:"advanced-overlay",role:"dialog","aria-modal":"true","aria-label":"Targets configuration"},qy={class:"advanced-panel"},Gy=Qe(Le({__name:"DashboardAdvancedTargetsOverlay",props:{widgetId:{},widgets:{},contextTargetsConfig:{}},emits:["close","save","use-global","open-onboarding"],setup(e,{emit:t}){const a=e,o=t,r=ie(null),n=ie(null),l=ie(null),i=ie(null),s=ie(null),c=Ya({onTrack:null,atRisk:null}),u=Ya({}),h=At(void 0);Ae(()=>a.widgetId,M=>{if(!M){r.value=null,y();return}const B=a.widgets.find(ve=>ve.id===M),K=(B==null?void 0:B.options)||{},oe=K.useLocalConfig&&K.localConfig?At(K.localConfig):At(a.contextTargetsConfig);r.value=ua(oe),y()},{immediate:!0});const m=N(()=>{var M;return((M=r.value)==null?void 0:M.categories)??[]}),p=["#2563EB","#F97316","#10B981","#A855F7","#EC4899","#14B8A6","#F59E0B","#6366F1","#0EA5E9","#65A30D"],d=N(()=>{const M=new Set,B=K=>{const oe=P(K);oe&&M.add(oe)};return m.value.forEach(K=>B(K.color)),p.forEach(K=>M.add(K)),Array.from(M)}),f=N(()=>{const M=r.value;return M?I(M)!==null:!1});function y(){n.value=null,l.value=null,i.value=null,s.value=null,c.onTrack=null,c.atRisk=null,Object.keys(u).forEach(M=>{delete u[M]})}function C(){o("close")}function $(){!a.widgetId||!r.value||o("save",a.widgetId,ua(r.value))}function E(){a.widgetId&&o("use-global",a.widgetId)}function T(){o("open-onboarding","categories")}function P(M){if(typeof M!="string")return null;const B=M.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(B))return null;if(B.length===4){const[,K,oe,ve]=B;return`#${K}${K}${oe}${oe}${ve}${ve}`.toUpperCase()}return B.toUpperCase()}function I(M){const B=new Set;M.categories.forEach(K=>{(K.groupIds||[]).forEach(oe=>{const ve=Number(oe);Number.isFinite(ve)&&B.add(ve)})});for(let K=1;K<=9;K++)if(!B.has(K))return K;return null}function w(){return`cat-${Date.now().toString(36)}-${Math.random().toString(36).slice(2,5)}`}function A(M){const B=new Set;M.categories.forEach(K=>{const oe=P(K==null?void 0:K.color);oe&&B.add(oe)});for(const K of p)if(!B.has(K))return K;return p[0]??null}function O(M){if(!r.value)return;const B=ua(r.value);M(B),r.value=B}function z(M,B){O(K=>{const oe=K.categories.find(ve=>ve.id===M);oe&&B(oe)})}function J(M){co(M,{min:0,max:1e3,step:.5,decimals:2},B=>{n.value=B},B=>O(K=>{K.totalHours=B}))}function H(M){co(M,{min:0,max:24,step:.25,decimals:2},B=>{l.value=B},B=>O(K=>{K.allDayHours=B}),"024 hours per day")}function x(M,B){co(B,{min:0,max:1e3,step:.5,decimals:2},K=>{u[M]=K},K=>z(M,oe=>{oe.targetHours=K}))}function v(M,B){z(M,K=>{K.label=B.trim()||K.label})}function b(M,B){z(M,K=>{K.includeWeekend=B})}function j(M,B){const K=P(B);z(M,oe=>{oe.color=K??null})}function F(M,B){B!=="days_only"&&B!=="time_aware"||z(M,K=>{K.paceMode=B})}function X(M){O(B=>{B.pace.includeWeekendTotal=M})}function ne(M){M!=="days_only"&&M!=="time_aware"||O(B=>{B.pace.mode=M})}function Y(M,B){co(B,{min:-100,max:100,step:.1,decimals:1},K=>{c[M]=K},K=>O(oe=>{oe.pace.thresholds[M]=K}))}function re(M){const B=M==="momentum"?"momentum":"linear";O(K=>{K.forecast.methodPrimary=B})}function se(M){co(M,{min:1,max:14,step:1,decimals:0},B=>{i.value=B},B=>O(K=>{K.forecast.momentumLastNDays=B}))}function fe(M){co(M,{min:0,max:100,step:.1,decimals:1},B=>{s.value=B},B=>O(K=>{K.forecast.padding=B}))}function ce(M,B){O(K=>{K.ui||(K.ui={...h.ui}),K.ui[M]=B})}function V(){const M=r.value;if(!M)return;const B=I(M);B!==null&&O(K=>{const oe=A(K);K.categories=[...K.categories,{id:w(),label:`Category ${K.categories.length+1}`,targetHours:0,includeWeekend:!0,paceMode:"days_only",color:oe,groupIds:[B]}]})}function G(M){const B=r.value;!B||B.categories.length<=1||(O(K=>{K.categories=K.categories.filter(oe=>oe.id!==M)}),delete u[M])}return(M,B)=>M.widgetId&&r.value?(k(),_("div",Ky,[g("div",qy,[g("div",{class:"overlay-header"},[B[7]||(B[7]=g("div",null,[g("div",{class:"overlay-title"},"Targets (this widget only)"),g("div",{class:"overlay-subtitle"},"Starts from global targets; saving keeps a local copy for this widget.")],-1)),g("button",{type:"button",class:"ghost danger",onClick:C,"aria-label":"Close"},"")]),Me(Wy,{targets:r.value,"category-options":m.value,"total-target-message":n.value,"all-day-hours-message":l.value,"category-target-messages":u,"pace-threshold-messages":c,"forecast-momentum-message":i.value,"forecast-padding-message":s.value,"color-palette":d.value,"can-add-category":f.value,onTotalTargetInput:J,onSetAllDayHours:H,onSetCategoryTarget:B[0]||(B[0]=({id:K,value:oe})=>x(K,oe)),onSetCategoryLabel:B[1]||(B[1]=({id:K,label:oe})=>v(K,oe)),onSetCategoryWeekend:B[2]||(B[2]=({id:K,value:oe})=>b(K,oe)),onSetCategoryPace:B[3]||(B[3]=({id:K,mode:oe})=>F(K,oe)),onSetCategoryColor:B[4]||(B[4]=({id:K,color:oe})=>j(K,oe)),onAddCategory:V,onRemoveCategory:G,onSetIncludeWeekendTotal:X,onSetPaceMode:ne,onSetThreshold:B[5]||(B[5]=({key:K,value:oe})=>Y(K,oe)),onSetForecastMethod:re,onSetForecastMomentum:se,onSetForecastPadding:fe,onSetUiOption:B[6]||(B[6]=({key:K,value:oe})=>ce(K,oe))},null,8,["targets","category-options","total-target-message","all-day-hours-message","category-target-messages","pace-threshold-messages","forecast-momentum-message","forecast-padding-message","color-palette","can-add-category"]),g("div",{class:"overlay-actions"},[g("div",{class:"overlay-actions__left"},[g("button",{type:"button",class:"ghost",onClick:E},"Use global targets"),g("button",{type:"button",class:"ghost",onClick:T},"Edit via onboarding")]),g("div",{class:"overlay-actions__right"},[g("button",{type:"button",class:"ghost",onClick:C},"Cancel"),g("button",{type:"button",class:"ghost primary",onClick:$},"Save")])])])])):ae("",!0)}}),[["__scopeId","data-v-539a10f9"]]),Jy=Qe(Le({__name:"DashboardLayout",props:{widgets:{},context:{},editable:{type:Boolean},widgetTypes:{},presetLabel:{}},emits:["edit:width","edit:height","edit:remove","edit:move","edit:options","edit:add","edit:reorder","open:onboarding","reset:preset","select:cell"],setup(e,{expose:t,emit:a}){const o=e,r=a,n=ie(null),l=ie(null),i=ie(null),s=N(()=>(o.widgets||[]).slice().sort((z,J)=>(z.layout.order||0)-(J.layout.order||0)).map(z=>{const J=Vv(z,o.context);if(!J)return null;const H=z.options||{};return{...J,id:z.id,layout:z.layout,type:z.type,options:H}}).filter(Boolean)),c=N(()=>s.value.find(z=>z.id===i.value)||null),u=N(()=>o.widgetTypes||[]);Ae(()=>o.editable,z=>{z||(i.value=null,n.value=null,l.value=null)},{immediate:!0}),Ae(()=>s.value.map(z=>z.id).join("|"),()=>{i.value&&!s.value.find(z=>z.id===i.value)&&(i.value=null)});function h(z,J){n.value=J?z:null,!J&&l.value===z&&(l.value=null)}function m(z){i.value=z,n.value=null}function p(){s.value.length&&(i.value=s.value[0].id)}function d(){i.value=null,n.value=null,l.value=null}function f(){i.value&&r("edit:width",i.value)}function y(){i.value&&r("edit:height",i.value)}function C(z){i.value&&r("edit:move",i.value,z)}function $(){i.value&&r("edit:remove",i.value)}function E(z){i.value=z,n.value=z,l.value=z}function T(){n.value=null,l.value=null}function P(z,J){r("edit:options",z,"localConfig",J),r("edit:options",z,"useLocalConfig",!0),T()}function I(z){r("edit:options",z,"useLocalConfig",!1),r("edit:options",z,"localConfig",null),T()}function w(z){T(),r("open:onboarding",z)}function A(){i.value&&(n.value=i.value)}function O(z){r("select:cell",z)}return t({openOptionsForSelected:A}),(z,J)=>(k(),_("div",{class:Be(["layout-wrapper",{"editable-mode":z.editable}]),onClick:it(d,["self"])},[Me(Gv,{ordered:s.value,editable:z.editable,"selected-id":i.value,"widget-type-list":u.value,onSelect:m,onSelectCell:O,onAdd:J[0]||(J[0]=(H,x)=>r("edit:add",H,x)),onReorder:J[1]||(J[1]=(H,x)=>r("edit:reorder",H,x))},null,8,["ordered","editable","selected-id","widget-type-list"]),Me(Jb,{editable:z.editable,"selected-item":c.value,"open-options-id":n.value,"preset-label":z.presetLabel,context:z.context,onSelectFirst:p,onMove:C,onCycleWidth:f,onCycleHeight:y,onRemove:$,onResetPreset:J[2]||(J[2]=H=>r("reset:preset")),onToggleOptions:h,onOpenAdvanced:E,onEditOptions:J[3]||(J[3]=(H,x,v)=>r("edit:options",H,x,v))},null,8,["editable","selected-item","open-options-id","preset-label","context"]),Me(Gy,{"widget-id":l.value,widgets:z.widgets,"context-targets-config":z.context.targetsConfig,onClose:T,onSave:P,onUseGlobal:I,onOpenOnboarding:w},null,8,["widget-id","widgets","context-targets-config"])],2))}}),[["__scopeId","data-v-98fee2cd"]]);function Yy(e){const t=ie(""),a=ie(""),o=ie(!1),r=ie([]),n=(c,u,h)=>c==="month"?`Month of ${u?u.slice(0,7):`-${h}`}`:`Week of ${u||`-${h}`}`,l=(c,u)=>{const h=c==="month"?"Notes for month starting":"Notes for week starting";return u?`${h} ${u}`:h};async function i(){var h,m,p;const c=await e.getJson(e.route("notes"),{range:e.range.value,offset:e.offset.value|0});t.value=String(((h=c==null?void 0:c.notes)==null?void 0:h.previous)??""),a.value=String(((m=c==null?void 0:c.notes)==null?void 0:m.current)??"");const u=Array.isArray((p=c==null?void 0:c.notes)==null?void 0:p.history)?c.notes.history:[];r.value=u.map((d,f)=>{const y=Number((d==null?void 0:d.offset)??f+1),C=String((d==null?void 0:d.from)??"").trim(),$=String((d==null?void 0:d.content)??"");if(!$.trim())return null;const E=n(e.range.value,C,y),T=l(e.range.value,C);return{id:`offset-${y}-${C||f}`,label:E,title:T,content:$,from:C||void 0,offset:y}}).filter(Boolean)}async function s(){try{o.value=!0,await e.postJson(e.route("notesSave"),{range:e.range.value,offset:e.offset.value|0,content:a.value??""}),e.notifySuccess("Notes saved"),await i()}catch(c){console.error(c),e.notifyError("Failed to save notes")}finally{o.value=!1}}return{notesPrev:t,notesCurrDraft:a,isSavingNote:o,notesHistory:r,fetchNotes:i,saveNotes:s}}let Zo=null,ls=null,Bc=!1;function Oc(){var t;if(typeof document>"u")return null;const e=(t=document.getElementById("app"))==null?void 0:t.getAttribute("data-opsdash-theme-preference");return e==="auto"||e==="light"||e==="dark"?e:null}function Zy(){if(!(typeof window>"u"))try{Yr(),Xy()}catch(e){t1()&&console.warn("[opsdash] theme boot install failed",e)}}function Xy(){if(Zo||ls||Bc)return;const e=[];if(document.documentElement&&e.push(document.documentElement),document.body&&document.body!==document.documentElement&&e.push(document.body),e.length&&(Zo=new MutationObserver(()=>Yr()),e.forEach(t=>{Zo==null||Zo.observe(t,{attributes:!0,attributeFilter:["data-theme","class"]})})),window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)"),a=()=>Yr();typeof t.addEventListener=="function"?(t.addEventListener("change",a),ls=()=>t.removeEventListener("change",a)):typeof t.addListener=="function"&&(t.addListener(a),ls=()=>{t.removeListener(a)})}window.addEventListener("oc:theme:changed",Yr),Bc=!0}function Yr(){const e=Qy();if(!e)return;["icon","shortcut icon"].forEach(a=>{let o=document.querySelector(`link[rel="${a}"]`);o||(o=document.createElement("link"),o.rel=a,document.head.appendChild(o)),o.type="image/svg+xml",o.href=e})}function Qy(){const e=is()==="dark",t=e1(),a=t("favicon.svg");if(a)return a;if(e){const r=t("app-dark.svg");if(r)return r}const o=t(e?"app-dark.svg":"app.svg");return o||"/apps-extra/opsdash/img/favicon.svg"}function is(){var o,r,n,l,i;const e=(o=document.documentElement)==null?void 0:o.getAttribute("data-theme");if(e==="dark"||e==="light")return e;const t=(r=document.body)==null?void 0:r.getAttribute("data-theme");if(t==="dark"||t==="light")return t;if((n=document.body)!=null&&n.classList.contains("theme--dark"))return"dark";if((l=document.body)!=null&&l.classList.contains("theme--light"))return"light";const a=(i=window.matchMedia)==null?void 0:i.call(window,"(prefers-color-scheme: dark)");return a!=null&&a.matches?"dark":"light"}function e1(){const e=window;return t=>{var a;return typeof((a=e.OC)==null?void 0:a.imagePath)=="function"?e.OC.imagePath("opsdash",t):""}}function t1(){var t;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function a1(e){const t=ie([]),a=ie({}),o=ie({}),r=ie({}),n=ie([]),l=ie(!1),i=ie(!1),s=ie(null),c=ie(""),u=ie(""),h=ie(""),m=Ya({}),p=ie([]),d=ie([]),f=ie([]),y=ie({}),C=ie({}),$=ie({}),E=ie(At(da())),T=ie(null),P=Oc()??"auto",I=ie(P),w=ie(Ro()),A=ie(jo());let O=0;async function z(){var b,j,F,X,ne,Y,re,se,fe,ce,V,G,M,B,K,oe;const J=++O;l.value=!0;const H={...o.value},x={...a.value};let v=!1;try{const ve={range:e.range.value,offset:e.offset.value|0,save:!1},S=await e.getJson(e.route("load"),ve);if(J!==O){(b=e.isDebug)!=null&&b.call(e)&&console.warn("discarding stale load response",{currentSeq:J,loadSeq:O});return}c.value=String(((j=S.meta)==null?void 0:j.uid)??""),u.value=String(((F=S.meta)==null?void 0:F.from)??""),h.value=String(((X=S.meta)==null?void 0:X.to)??""),i.value=!!((ne=S.meta)!=null&&ne.truncated),s.value=((Y=S.meta)==null?void 0:Y.limits)??null;const R=me=>{const ye={};return me&&typeof me=="object"&&Object.entries(me).forEach(([Ce,_e])=>{typeof _e=="string"&&_e.trim()!==""&&(ye[String(Ce)]=_e)}),ye},L=Array.isArray(S.calendars)?S.calendars:[],U=R((re=S.colors)==null?void 0:re.byId),q=R((se=S.colors)==null?void 0:se.byName),Q=L.map(me=>{if(!me||typeof me!="object")return me;const ye={...me},Ce=String(ye.id??""),_e=String(ye.displayname??ye.name??ye.calendar??Ce),Se=typeof ye.color=="string"?ye.color:"",$e=typeof ye.color_src=="string"?ye.color_src:"",Ne=Ce?U[Ce]:"",Oe=_e?q[_e]:"",We=Ce?H[Ce]:"",ht=_e?x[_e]:"",at=We||ht;let Fe=Se;return!Fe&&Ne&&(Fe=Ne),!Fe&&Oe&&(Fe=Oe),(!Fe||$e==="fallback")&&at&&(Fe=at),!Fe&&at&&(Fe=at),Fe&&(Fe!==Se&&(v=!0),ye.color=Fe,Ce&&(U[Ce]=Fe),_e&&(q[_e]=Fe)),ye});if(t.value=Q,a.value=q,o.value=U,T.value=S.onboarding?{...S.onboarding}:null,w.value=Zn(S.reportingConfig,w.value),A.value=Xn(S.deckSettings,A.value),e.widgetTabs){const me=e.widgetTabs.value||Jo("standard");e.widgetTabs.value=Yo(S.widgets,me)}const ge=()=>{var ye,Ce,_e,Se;let me=!1;try{const $e=((ye=y.value)==null?void 0:ye.pie)||{},Ne=Array.isArray($e.ids)?$e.ids.map(Oe=>String(Oe??"")):[];if(Ne.length){const Oe=Array.isArray($e.colors)?$e.colors:[],We=Ne.map((ht,at)=>o.value[ht]||Oe[at]||"#60a5fa");y.value={...y.value||{},pie:{...$e,colors:We}},me=!0}}catch($e){(Ce=e.isDebug)!=null&&Ce.call(e)&&console.warn("recompute pie colors failed",$e)}try{const $e=(_e=y.value)==null?void 0:_e.perDaySeries;if($e&&Array.isArray($e.series)){const Ne=$e.series.map(Oe=>{const We=String((Oe==null?void 0:Oe.id)??""),ht=o.value[We]||Oe.color||"#60a5fa";return{...Oe,color:ht}});y.value={...y.value||{},perDaySeries:{labels:$e.labels,series:Ne}},me=!0}}catch($e){(Se=e.isDebug)!=null&&Se.call(e)&&console.warn("recompute stacked colors failed",$e)}return me},ue=((fe=S.groups)==null?void 0:fe.byId)??((ce=S.groups)==null?void 0:ce.byID)??((V=S.groups)==null?void 0:V.ids)??{},le={};t.value.forEach(me=>{const ye=String((me==null?void 0:me.id)??""),Ce=Number((ue==null?void 0:ue[ye])??0);le[ye]=Number.isFinite(Ce)?Math.max(0,Math.min(9,Math.trunc(Ce))):0}),r.value=le;const de=((G=S.targets)==null?void 0:G.week)??{},ke=((M=S.targets)==null?void 0:M.month)??{};C.value=de&&typeof de=="object"?de:{},$.value=ke&&typeof ke=="object"?ke:{},E.value=At(S.targetsConfig??da());const be=typeof S.themePreference=="string"?S.themePreference:"";if(I.value=be==="light"||be==="dark"?be:"auto",(B=e.isDebug)!=null&&B.call(e)&&(console.group("[opsdash] calendars/colors"),console.table((t.value||[]).map(me=>({id:me.id,name:me.displayname,color:me.color,raw:me.color_raw,src:me.color_src}))),console.log("colors.byId",o.value),console.log("colors.byName",a.value),S.calDebug&&console.log("server calDebug",S.calDebug),S.debug&&(console.group("[opsdash] server query debug"),console.log(S.debug),console.groupEnd()),console.groupEnd()),t.value.length&&e.fetchDavColors&&t.value.filter(ye=>!ye.color||ye.color_src==="fallback").length)try{const ye=await e.fetchDavColors(c.value,t.value.map(_e=>String(_e.id)));let Ce=!1;t.value=t.value.map(_e=>{const Se=ye[_e.id];return Se&&Se!==_e.color&&(_e.color_src="dav"(_e).color_raw=Se,_e.color=Se,Ce=!0),_e}),Object.entries(ye).forEach(([_e,Se])=>{if(Se){const $e=String(Se);o.value[_e]=$e;const Ne=t.value.find(We=>String((We==null?void 0:We.id)??"")===_e);Ne&&(Ne.color=$e);const Oe=Ne?String(Ne.displayname??Ne.name??""):"";Oe&&(a.value[Oe]=$e)}}),Ce&&((K=e.isDebug)!=null&&K.call(e)&&console.log("[opsdash] dav colors applied",ye),v=!0)}catch(ye){(oe=e.isDebug)!=null&&oe.call(e)&&console.warn("dav colors failed",ye)}n.value=Array.isArray(S.selected)?S.selected.map(me=>String(me)):Array.isArray(S.saved)?S.saved.map(me=>String(me)):[],e.userChangedSelection.value=!1,Object.assign(m,S.stats??{}),p.value=Array.isArray(S.byCal)?S.byCal:[],d.value=Array.isArray(S.byDay)?S.byDay:[],f.value=Array.isArray(S.longest)?S.longest:[],y.value=S.charts??{},v&&ge(),await Xt(),e.scheduleDraw(),await e.fetchNotes().catch(()=>{})}catch(ve){console.error(ve),e.notifyError("Failed to load data")}finally{l.value=!1}}return{calendars:t,colorsByName:a,colorsById:o,groupsById:r,selected:n,isLoading:l,isTruncated:i,truncLimits:s,uid:c,from:u,to:h,stats:m,byCal:p,byDay:d,longest:f,charts:y,targetsWeek:C,targetsMonth:$,targetsConfig:E,onboarding:T,load:z,themePreference:I,reportingConfig:w,deckSettings:A}}function o1(e){const t=ie(!1);let a=null;function o(r=!0){a&&clearTimeout(a),a=setTimeout(async()=>{a=null;try{t.value=!0;const n=ua(e.targetsConfig.value),l={cals:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:n};e.themePreference&&(l.theme_preference=e.themePreference.value),e.reportingConfig&&(l.reporting_config=e.reportingConfig.value),e.deckSettings&&(l.deck_settings=e.deckSettings.value),e.widgetTabs&&(l.widgets=e.widgetTabs.value);const i=await e.postJson(e.route("persist"),l);Array.isArray(i.read)?e.selected.value=i.read.map(h=>String(h)):Array.isArray(i.saved)&&(e.selected.value=i.saved.map(h=>String(h)));const s=i.targets_config_read,c=i.targets_config_saved,u=n1(s??c,n);if(u&&(e.targetsConfig.value=u),e.themePreference){const h=r1(i.theme_preference_read??i.theme_preference_saved);h&&(e.themePreference.value=h)}if(e.reportingConfig){const h=Zn(i.reporting_config_read??i.reporting_config_saved,e.reportingConfig.value);h&&(e.reportingConfig.value=h)}if(e.deckSettings){const h=Xn(i.deck_settings_read??i.deck_settings_saved,e.deckSettings.value);h&&(e.deckSettings.value=h)}if(e.widgetTabs){const h=i.widgets_read??i.widgets_saved??i.widgets,m=e.widgetTabs.value||Jo("standard");e.widgetTabs.value=Yo(h,m)}r&&e.onReload&&await e.onReload(),e.notifySuccess("Selection saved")}catch(n){console.error(n),e.notifyError("Failed to save selection")}finally{t.value=!1}},250)}return{queueSave:o,isSaving:t}}function r1(e){return e==="light"||e==="dark"||e==="auto"?e:null}function n1(e,t){if(!e)return;const a=JSON.parse(JSON.stringify(e)),o=Array.isArray(t==null?void 0:t.categories)?t.categories:[],r=new Map;return o.forEach(n=>{const l=String((n==null?void 0:n.id)??"");l&&r.set(l,n)}),Array.isArray(a.categories)&&(a.categories=a.categories.map(n=>{const l=String((n==null?void 0:n.id)??"");if(!l)return n;const i=r.get(l);return i&&((n==null?void 0:n.color)==null||n.color==="")&&typeof i.color=="string"&&i.color&&(n.color=i.color),n})),At(a)}function s1(e){const t=ie([]),a=ie(!1),o=ie(!1),r=ie(!1),n=ie([]),l=ie(null);async function i(){a.value=!0;try{const p=await e.getJson(e.route("presetsList"),{});t.value=Array.isArray(p==null?void 0:p.presets)?p.presets:[]}catch(p){console.error(p),e.notifyError("Failed to load presets")}finally{a.value=!1}}async function s(p){const d=p.trim();if(d===""){e.notifyError("Enter a preset name.");return}o.value=!0;try{const f={name:d,selected:e.selected.value,groups:e.groupsById.value,targets_week:e.targetsWeek.value,targets_month:e.targetsMonth.value,targets_config:e.targetsConfig.value,...e.widgetTabs?{widgets:e.widgetTabs.value}:{},...e.themePreference?{theme_preference:e.themePreference.value}:{},...e.reportingConfig?{reporting_config:e.reportingConfig.value}:{},...e.deckSettings?{deck_settings:e.deckSettings.value}:{}},y=await e.postJson(e.route("presetsSave"),f);t.value=Array.isArray(y==null?void 0:y.presets)?y.presets:t.value;const C=Array.isArray(y==null?void 0:y.warnings)?y.warnings:[];n.value=C,l.value=d,e.notifySuccess(`Profile "${d}" saved`)}catch(f){console.error(f),e.notifyError("Failed to save preset")}finally{o.value=!1}}function c(p){const d=Array.isArray(p==null?void 0:p.selected)?p.selected.map(C=>String(C)):[];e.selected.value=d;const f=p!=null&&p.groups&&typeof p.groups=="object"?p.groups:{};e.groupsById.value={...f},e.targetsWeek.value=p!=null&&p.targets_week&&typeof p.targets_week=="object"?p.targets_week:{},e.targetsMonth.value=p!=null&&p.targets_month&&typeof p.targets_month=="object"?p.targets_month:{};const y=p!=null&&p.targets_config&&typeof p.targets_config=="object"?At(p.targets_config):ua(e.targetsConfig.value);if(e.targetsConfig.value=y,e.themePreference&&(p!=null&&p.theme_preference)){const C=p.theme_preference;e.setThemePreference?e.setThemePreference(C,{persist:!1}):e.themePreference.value=C}if(e.reportingConfig&&(p!=null&&p.reporting_config)&&(e.reportingConfig.value=Zn(p.reporting_config,e.reportingConfig.value)),e.deckSettings&&(p!=null&&p.deck_settings)&&(e.deckSettings.value=Xn(p.deck_settings,e.deckSettings.value)),e.widgetTabs&&(p!=null&&p.widgets)){const C=e.widgetTabs.value||Jo("standard");e.widgetTabs.value=Yo(p.widgets,C)}e.userChangedSelection.value=!1}async function u(p){const d=p.trim();if(d!==""){r.value=!0;try{const f=await e.getJson(e.route("presetsLoad",d),{}),y=(f==null?void 0:f.preset)??{},C=Array.isArray(y==null?void 0:y.warnings)?y.warnings:Array.isArray(f==null?void 0:f.warnings)?f.warnings:[];if(C.length){const $=`Some items in the saved profile are no longer available:

${C.map(E=>` ${E}`).join(`
`)}

Apply the remaining values?`;if(!window.confirm($)){n.value=C,r.value=!1;return}}c(y),n.value=C,l.value=d,e.notifySuccess(`Profile "${d}" applied`),e.queueSave(!0),i().catch($=>console.warn("[opsdash] refresh presets after load failed",$))}catch(f){console.error(f),e.notifyError("Failed to load preset")}finally{r.value=!1}}}async function h(p){const d=p.trim();if(d!=="")try{const f=await e.deleteJson(e.route("presetsDelete",d));t.value=Array.isArray(f==null?void 0:f.presets)?f.presets:t.value,e.notifySuccess(`Profile "${d}" deleted`),l.value===d&&(l.value=null)}catch(f){console.error(f),e.notifyError("Failed to delete preset")}}function m(){n.value=[]}return{presets:t,presetsLoading:a,presetSaving:o,presetApplying:r,presetWarnings:n,lastLoadedPreset:l,refreshPresets:i,savePreset:s,loadPreset:u,deletePreset:h,clearPresetWarnings:m}}function l1(){let e=null;function t(){typeof window>"u"||typeof window.requestAnimationFrame!="function"||(e!==null&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(()=>{e=null,window.dispatchEvent(new Event("resize"))}))}return wt(()=>{e!==null&&typeof window<"u"&&typeof window.cancelAnimationFrame=="function"&&(window.cancelAnimationFrame(e),e=null)}),{scheduleDraw:t}}const i1={load:"/apps/opsdash/overview/load",persist:"/apps/opsdash/overview/persist",notes:"/apps/opsdash/overview/notes",notesSave:"/apps/opsdash/overview/notes",presetsList:"/apps/opsdash/overview/presets",presetsSave:"/apps/opsdash/overview/presets",presetsLoad:"/apps/opsdash/overview/presets",presetsDelete:"/apps/opsdash/overview/presets",ping:"/apps/opsdash/overview/ping"};function c1(){var t,a;const e=typeof window<"u"?window:{};return e.OC&&(e.OC.webroot||((a=(t=e.OC).getRootPath)==null?void 0:a.call(t)))||e._oc_webroot||""}function d1(){const e=N(()=>c1());function t(l,i){const s=typeof window<"u"?window:{},c=i1[l];if(l==="presetsLoad"||l==="presetsDelete"){const u=`${c}/${encodeURIComponent(String(i??""))}`;return s.OC&&typeof s.OC.generateUrl=="function"?s.OC.generateUrl(u):`${e.value}${u}`}return s.OC&&typeof s.OC.generateUrl=="function"?s.OC.generateUrl(c):`${e.value}${c}`}function a(l){const i=new URLSearchParams;return Object.entries(l||{}).forEach(([s,c])=>{Array.isArray(c)?c.forEach(u=>i.append(s,String(u))):c!=null&&i.set(s,String(c))}),i.toString()}async function o(l,i){const s=a(i),c=s?`${l}${l.includes("?")?"&":"?"}${s}`:l,u=await fetch(c,{method:"GET",credentials:"same-origin"});if(!u.ok)throw new Error(`HTTP ${u.status}`);return await u.json()}async function r(l,i){var m;const s=typeof window<"u"?window:{},c=((m=s.OC)==null?void 0:m.requestToken)||s.oc_requesttoken||"",u={"Content-Type":"application/json"};c&&(u.requesttoken=c);const h=await fetch(l,{method:"POST",credentials:"same-origin",headers:u,body:JSON.stringify(i||{})});if(!h.ok)throw new Error(`HTTP ${h.status}`);return await h.json()}async function n(l){var m;const i=typeof window<"u"?window:{},s=((m=i.OC)==null?void 0:m.requestToken)||i.oc_requesttoken||"",c={};s&&(c.requesttoken=s);const u=await fetch(l,{method:"DELETE",credentials:"same-origin",headers:c});if(!u.ok)throw new Error(`HTTP ${u.status}`);const h=await u.text();return h?JSON.parse(h):{}}return{route:t,getJson:o,postJson:r,deleteJson:n,root:e}}function Pc(e){const t=typeof document<"u"?document.getElementById("app"):null;if(!t||!t.dataset)return"";const a=t.dataset;return a?String(a[e]??""):""}function u1(e){const t=ie(0),a=N(()=>{var h;const s=[],c=typeof window<"u"?window:{};try{if((h=c.OC)!=null&&h.imagePath){const m=c.OC.imagePath("opsdash","app.svg");m&&s.push(m)}}catch{}const u=e.root.value;return s.push(`${u}/apps/opsdash/img/app.svg`),s.push(`${u}/apps-extra/opsdash/img/app.svg`),s.push(`${u}/apps-writable/opsdash/img/app.svg`),s}),o=N(()=>a.value[Math.min(t.value,a.value.length-1)]||"");function r(){t.value+1<a.value.length&&t.value++}const n=ie(Pc("opsdashVersion")||(e.pkgVersion?String(e.pkgVersion):"")),l=ie(Pc("opsdashChangelog"));async function i(){if(!(n.value&&l.value))try{const s=await e.getJson(e.pingUrl(),{});!n.value&&typeof(s==null?void 0:s.version)=="string"&&(n.value=s.version),!l.value&&typeof(s==null?void 0:s.changelog)=="string"&&(l.value=s.changelog)}catch{}}return i(),{iconSrc:o,onIconError:r,appVersion:n,changelogUrl:l}}function f1(e){function t(o){const r=typeof window<"u"?window:{};return r.OC&&typeof r.OC.generateUrl=="function"?r.OC.generateUrl(`/apps/calendar/timeGridDay/${o}`):`${e.root.value}/index.php/apps/calendar/timeGridDay/${o}`}async function a(o,r){var s,c,u;const n={};if(!o)return n;const l=((s=window.OC)==null?void 0:s.requestToken)||window.oc_requesttoken||"",i=e.root.value;for(const h of r)try{const m=`${i}/remote.php/dav/calendars/${encodeURIComponent(o)}/${encodeURIComponent(h)}/`,p=`<?xml version="1.0" encoding="UTF-8"?>
<d:propfind xmlns:d="DAV:" xmlns:ical="http://apple.com/ns/ical/">
  <d:prop><ical:calendar-color/></d:prop>
</d:propfind>`;(c=e.isDebug)!=null&&c.call(e)&&console.log("[opsdash] PROPFIND",{url:m,id:h});const d=await fetch(m,{method:"PROPFIND",credentials:"same-origin",headers:{Depth:"0","Content-Type":"application/xml",requesttoken:l},body:p});if(!d.ok)continue;const f=await d.text();(u=e.isDebug)!=null&&u.call(e)&&console.log("[opsdash] PROPFIND response",{id:h,status:d.status,length:f.length,sample:f.slice(0,400)});const y=f.match(/<[^>]*calendar-color[^>]*>(#[0-9a-fA-F]{6}|#[0-9a-fA-F]{8}|rgb\([^<]+\))<\/[^>]*calendar-color>/i);y&&(n[h]=y[1])}catch{}return n}return{calendarDayLink:t,fetchDavColors:a}}function g1(e){const t=N(()=>{var r,n;return m1({perDaySeries:(r=e.charts.value)==null?void 0:r.perDaySeries,forecastMode:((n=e.activityCardConfig.value)==null?void 0:n.forecastMode)??"total",targetsConfig:e.targetsConfig.value,currentTargets:e.currentTargets.value,calendarCategoryMap:e.calendarCategoryMap.value})}),a=N(()=>{var r;return{pie:((r=e.charts.value)==null?void 0:r.pie)||null,stacked:t.value}}),o=N(()=>{var y,C;const r={},n=(y=e.charts.value)==null?void 0:y.pie,l=(C=e.charts.value)==null?void 0:C.perDaySeries,i=t.value||l,s=n&&Array.isArray(n.data)&&Array.isArray(n.ids),c=i&&Array.isArray(i.series)&&Array.isArray(i.labels),u=e.calendarCategoryMap.value,h=s?(n.ids||[]).map($=>String($??"")):[],m=s?(n.labels||[]).map($=>String($??"")):[],p=s?(n.data||[]).map($=>Number($)||0):[],d=s?n.colors||[]:[],f=c?i.series:[];return e.calendarGroups.value.forEach($=>{const E=[];s&&h.forEach((w,A)=>{u[w]===$.id&&E.push(A)});const T=E.length?{ids:E.map(w=>h[w]),labels:E.map(w=>m[w]),data:E.map(w=>p[w]),colors:E.map(w=>{var A;return d[w]||((A=e.colorsById.value)==null?void 0:A[h[w]])||"#60a5fa"})}:null,P=c?f.filter(w=>u[String((w==null?void 0:w.id)??"")]===$.id):[],I=P.length?{labels:i.labels,series:P}:null;r[$.id]={pie:T,stacked:I}}),r});return{calendarChartData:a,categoryChartsById:o}}const p1=/^\d{4}-\d{2}-\d{2}$/,h1="__uncategorized__";function m1(e){const t=e.perDaySeries;if(!t||!Array.isArray(t.labels)||!Array.isArray(t.series))return null;const a=t.labels.map(f=>String(f??"")),o=t.series.map(f=>{const y=String((f==null?void 0:f.id)??"");return{...f,id:y,name:String((f==null?void 0:f.name)??(f==null?void 0:f.label)??y),color:String((f==null?void 0:f.color)??""),data:a.map((C,$)=>{var T;const E=Number(((T=f==null?void 0:f.data)==null?void 0:T[$])??0);return Number.isFinite(E)?Math.max(0,E):0})}}),r=v1(e.forecastMode),n=b1(new Date),l=a.map(f=>p1.test(f)&&f>n),i=[];if(l.forEach((f,y)=>{f&&i.push(y)}),!i.length||r==="off")return{labels:a,series:o};const s=e.targetsConfig??da(),c=w1(e.currentTargets),u=e.calendarCategoryMap??{},h=i.length,m=new Map;o.forEach(f=>{let y=0;f.data.forEach((C,$)=>{l[$]||(y+=Math.max(0,C))}),m.set(f.id,y)});const p=Array.from(m.values()).reduce((f,y)=>f+y,0),d=new Map;if(o.forEach(f=>{d.set(f.id,y1(a.length))}),r==="total"){const f=Math.max(0,Number(s.totalHours??0)),y=Math.max(0,f-p);if(y>1e-4){const C=y/h,$=o.map(T=>T.id),E=Fc($,m,c);$.forEach(T=>{const P=E[T]??0;if(P<=0)return;const I=d.get(T);I&&i.forEach(w=>{I[w]=Zr(C*P)})})}}else if(r==="calendar")o.forEach(f=>{const y=c[f.id]??0;if(y<=0)return;const C=Math.max(0,m.get(f.id)??0),$=Math.max(0,y-C);if($<=1e-4)return;const E=$/h,T=d.get(f.id);T&&i.forEach(P=>{T[P]=Zr(E)})});else if(r==="category"){const f=new Set,y=Array.isArray(s.categories)?s.categories:[],C=new Map;y.forEach(E=>{C.set(String(E.id),Math.max(0,Number(E.targetHours??0)))});const $=new Map;o.forEach(E=>{const T=u==null?void 0:u[E.id],P=T?String(T):h1;$.has(P)||$.set(P,[]),$.get(P).push(E.id)}),$.forEach((E,T)=>{if(!E.length)return;const P=C.get(T)??0;if(P<=0)return;const I=E.reduce((J,H)=>J+Math.max(0,m.get(H)??0),0),w=Math.max(0,P-I);if(w<=1e-4)return;const A=w/h,O={};E.forEach(J=>{O[J]=c[J]??0});const z=Fc(E,m,O);E.forEach(J=>{const H=z[J]??0;if(H<=0)return;const x=d.get(J);x&&(i.forEach(v=>{x[v]=Zr(A*H)}),f.add(J))})}),o.forEach(E=>{if(f.has(E.id))return;const T=c[E.id]??0;if(T<=0)return;const P=Math.max(0,m.get(E.id)??0),I=Math.max(0,T-P);if(I<=1e-4)return;const w=I/h,A=d.get(E.id);A&&i.forEach(O=>{A[O]=Zr(w)})})}return o.forEach(f=>{const y=d.get(f.id);y&&y.some(C=>C>1e-4)&&(f.forecast=y)}),{labels:a,series:o}}function v1(e){return e==="off"||e==="calendar"||e==="category"?e:"total"}function b1(e){const t=e.getFullYear(),a=`${e.getMonth()+1}`.padStart(2,"0"),o=`${e.getDate()}`.padStart(2,"0");return`${t}-${a}-${o}`}function y1(e){return Array.from({length:e},()=>0)}function Zr(e){const t=Math.round(e*100)/100;return Number.isFinite(t)?t:0}function w1(e){const t={};return e&&Object.entries(e).forEach(([a,o])=>{const r=Number(o);Number.isFinite(r)&&r>0&&(t[String(a)]=r)}),t}function Fc(e,t,a){const o={},r=e.reduce((i,s)=>i+Math.max(0,t.get(s)??0),0);if(r>1e-4)return e.forEach(i=>{const s=Math.max(0,t.get(i)??0);o[i]=s/r}),o;const n=e.reduce((i,s)=>i+Math.max(0,(a==null?void 0:a[s])??0),0);if(n>1e-4)return e.forEach(i=>{const s=Math.max(0,(a==null?void 0:a[i])??0);o[i]=s/n}),o;const l=e.length?1/e.length:0;return e.forEach(i=>{o[i]=l}),o}const wa="__uncategorized__",Hc="Unassigned";function k1(e){const t=N(()=>{var u;const c=(u=e.targetsConfig.value)==null?void 0:u.categories;return Array.isArray(c)?c:[]}),a=N(()=>{const c={};return t.value.forEach(u=>{c[String(u.id)]=u.label||String(u.id)}),c}),o=N(()=>{var h;const c=new Map;return(((h=e.targetsSummary.value)==null?void 0:h.categories)||[]).forEach(m=>c.set(String(m.id),m)),c}),r=N(()=>{const c=new Map;return t.value.forEach(u=>{(Array.isArray(u.groupIds)?u.groupIds:[]).forEach(m=>{const p=Math.max(0,Math.min(9,Math.trunc(Number(m)||0)));c.set(p,String(u.id))})}),c}),n=N(()=>{var h;const c=e.calendars.value;if(!Array.isArray(c))return(h=e.isDebug)!=null&&h.call(e)&&console.warn("[opsdash] calendars not array",c),{};const u={};return c.forEach(m=>{var f;const p=String((m==null?void 0:m.id)??"");if(!p)return;const d=((f=e.colorsById.value)==null?void 0:f[p])||String((m==null?void 0:m.color)||"");u[p]={name:String((m==null?void 0:m.displayname)||(m==null?void 0:m.name)||(m==null?void 0:m.calendar)||p),color:d||void 0}}),u}),l=N(()=>{var d;const c={},u=r.value,h=e.groupsById.value||{},m=f=>{const y=h==null?void 0:h[f],C=Math.max(0,Math.min(9,Math.trunc(Number(y)||0))),$=u.get(C);c[f]=$||wa},p=e.calendars.value;return Array.isArray(p)?(p.forEach(f=>{const y=String((f==null?void 0:f.id)??"");y&&m(y)}),(e.selected.value||[]).forEach(f=>{const y=String(f??"");y&&(c[y]||m(y))}),c):((d=e.isDebug)!=null&&d.call(e)&&console.warn("[opsdash] calendarCategoryMap: calendars not array",p),c)}),i=N(()=>{const c=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"],u={};let h=0;const m=p=>{const d=String((p==null?void 0:p.id)??"");if(!d)return;if(u[d])return u[d];const f=typeof(p==null?void 0:p.color)=="string"&&p.color?p.color:void 0;if(f)return u[d]=f,f;const y=Object.entries(l.value).filter(([,$])=>$===d).map(([$])=>$);for(const $ of y){const E=n.value[$];if(E!=null&&E.color)return u[d]=E.color,E.color}const C=c[h%c.length];return h+=1,u[d]=C,C};return t.value.forEach(p=>m(p)),Object.values(l.value||{}).some(p=>p===wa)&&m({id:wa}),u}),s=N(()=>{var P,I,w,A,O,z,J,H,x,v;const c=[],u=l.value,h=o.value,m=e.byCal.value;if(!Array.isArray(m))return(P=e.isDebug)!=null&&P.call(e)&&console.warn("[opsdash] aggregateCategoryRows: byCal not array",m),c;const p=new Map;m.forEach(b=>{const j=String((b==null?void 0:b.id)??(b==null?void 0:b.calendar_id)??(b==null?void 0:b.calendar)??"");if(!j)return;const F=u[j]||wa;p.has(F)||p.set(F,[]),p.get(F).push({...b,calendarId:j})}),(I=e.isDebug)!=null&&I.call(e)&&console.log("[opsdash] aggregateCategoryRows",{rowsSourceIsArray:Array.isArray(m),rowsSourceLength:m.length,byCat:p,assignments:u});const d=((A=(w=e.targetsSummary.value)==null?void 0:w.total)==null?void 0:A.daysLeft)??0,f=((z=(O=e.targetsSummary.value)==null?void 0:O.total)==null?void 0:z.calendarPercent)??0,y=((H=(J=e.targetsSummary.value)==null?void 0:J.total)==null?void 0:H.paceMode)??((v=(x=e.targetsConfig.value)==null?void 0:x.pace)==null?void 0:v.mode)??"days_only",C=b=>Math.round(b*100)/100,$=e.currentTargets.value||{},E=(b,j,F)=>{const X=F.reduce((G,M)=>{const B=Number($[M.calendarId]??0);return Number.isFinite(B)?G+Math.max(0,B):G},0),ne=F.reduce((G,M)=>{const B=Number((M==null?void 0:M.total_hours)??(M==null?void 0:M.hours)??0);return Number.isFinite(B)?G+Math.max(0,B):G},0),Y=X>0?Math.max(0,Math.min(100,ne/X*100)):0,re=ne-X,se=Math.max(0,X-ne),fe=X<=0?"none":Y>=100?"done":re>=0?"on_track":"behind",ce=fe==="done"?"Done":fe==="on_track"?"On Track":fe==="behind"?"Behind":"",V=d>0?se/d:0;return{id:b,label:j,actualHours:C(ne),targetHours:C(X),percent:Y,deltaHours:C(re),remainingHours:C(se),needPerDay:C(V),daysLeft:d,calendarPercent:Math.max(0,Math.min(100,f)),gap:C(Y-f),status:fe,statusLabel:ce,includeWeekend:!0,paceMode:y}};if(t.value.map(b=>String(b.id)).forEach(b=>{const j=a.value[b]||b,F=p.get(b)||[],X=h.get(b)||E(b,j,F);c.push({id:b,label:j,rows:F,summary:X,color:i.value[b]})}),p.has(wa)){const b=p.get(wa)||[];c.push({id:wa,label:Hc,rows:b,summary:E(wa,Hc,b),color:i.value[wa]})}return c});return{categoryConfigList:t,categoryLabelById:a,categoryColorMap:i,calendarCategoryMap:l,calendarGroups:s}}function cs(e){const t=Number(e);return Number.isFinite(t)?Math.round(t):0}function ct(e){const t=Number(e);return Number.isFinite(t)?t:null}function uo(e){if(e==null)return null;const t=String(e).trim();return t===""?null:t}function _1(e){const t=N(()=>{var E;const d=(E=e.charts.value)==null?void 0:E.pie;if(!d||!Array.isArray(d.data)||!Array.isArray(d.labels))return[];const f=d.data.map(T=>Number(T)||0),y=d.labels.map(T=>String(T||"")),C=f.reduce((T,P)=>T+Math.max(0,P),0);if(C<=0)return[];const $=f.map((T,P)=>({name:y[P]||"",value:Math.max(0,T)}));return $.sort((T,P)=>P.value-T.value),$.slice(0,3).map(T=>({name:T.name,share:T.value/C*100}))}),a=N(()=>{var f;if(t.value.length)return t.value.map(y=>`${y.name} ${zc(y.share)}`).join(", ");const d=(f=e.stats)==null?void 0:f.top_calendar;if(d&&d.calendar){const y=Number(d.share??0);return`${d.calendar} ${zc(y)}`}return""}),o=N(()=>{var d;return e.selected.value.length||(((d=e.calendars.value)==null?void 0:d.length)??0)}),r=N(()=>(e.byDay.value||[]).map(d=>Number((d==null?void 0:d.total_hours)??(d==null?void 0:d.hours)??0))),n=N(()=>{const d=r.value.map(f=>Number(f)||0);return e.activeDayMode.value==="active"?d.filter(f=>f>0):d}),l=N(()=>(e.byDay.value||[]).filter(d=>{const f=Wc(String(d==null?void 0:d.date));return f>=1&&f<=5}).map(d=>Number((d==null?void 0:d.total_hours)??(d==null?void 0:d.hours)??0))),i=N(()=>(e.byDay.value||[]).filter(d=>{const f=Wc(String(d==null?void 0:d.date));return f===0||f===6}).map(d=>Number((d==null?void 0:d.total_hours)??(d==null?void 0:d.hours)??0))),s=N(()=>e.activeDayMode.value==="active"?l.value.filter(d=>d>0):l.value),c=N(()=>e.activeDayMode.value==="active"?i.value.filter(d=>d>0):i.value),u=N(()=>{var y,C,$,E;const d=((y=e.stats)==null?void 0:y.balance_index)??((C=e.stats)==null?void 0:C.balanceIndex)??((E=($=e.stats)==null?void 0:$.balance_overview)==null?void 0:E.index),f=Number(d);return Number.isFinite(f)?f:null}),h=N(()=>{var d,f,y,C;return{rangeLabel:e.rangeLabel.value,rangeStart:e.rangeStart.value,rangeEnd:e.rangeEnd.value,offset:e.offset.value,totalHours:Number(((d=e.stats)==null?void 0:d.total_hours)??0),avgDay:ds(n.value),avgEvent:Number(((f=e.stats)==null?void 0:f.avg_per_event)??0),medianDay:us(n.value),busiest:((y=e.stats)==null?void 0:y.busiest_day)??null,workdayAvg:ds(s.value),workdayMedian:us(s.value),weekendAvg:ds(c.value),weekendMedian:us(c.value),weekendShare:((C=e.stats)==null?void 0:C.weekend_share)??null,activeCalendars:o.value,calendarSummary:a.value,balanceIndex:u.value,delta:(()=>{var E;const $=(E=e.stats)==null?void 0:E.delta;return!$||typeof $!="object"?null:{totalHours:ct($.total_hours)??0,avgPerDay:ct($.avg_per_day)??0,avgPerEvent:ct($.avg_per_event)??0,events:cs($.events)}})(),topCategory:e.topCategory.value?{label:e.topCategory.value.label,actualHours:e.topCategory.value.summary.actualHours,targetHours:e.topCategory.value.summary.targetHours,percent:e.topCategory.value.summary.percent,statusLabel:e.topCategory.value.summary.statusLabel,status:e.topCategory.value.summary.status,color:e.topCategory.value.color}:null}}),m=N(()=>{const d=e.stats,f=d==null?void 0:d.delta,y=ct((f==null?void 0:f.weekend_share)??(f==null?void 0:f.weekendShare)),C=ct((f==null?void 0:f.evening_share)??(f==null?void 0:f.eveningShare)),$=y!=null||C!=null?{weekendShare:y,eveningShare:C}:null;return{rangeLabel:e.rangeLabel.value,events:cs(d.events),activeDays:ct(d.active_days),typicalStart:uo(d.typical_start),typicalEnd:uo(d.typical_end),weekendShare:ct(d.weekend_share),eveningShare:ct(d.evening_share),delta:$,earliestStart:uo(d.earliest_start),latestEnd:uo(d.latest_end),overlapEvents:ct(d.overlap_events),longestSession:ct(d.longest_session),lastDayOff:uo(d.last_day_off),lastHalfDayOff:uo(d.last_half_day_off)}}),p=N(()=>{var f;const d=(f=e.stats)==null?void 0:f.day_off_trend;return Array.isArray(d)?d.map(y=>{const C=Number((y==null?void 0:y.totalDays)??(y==null?void 0:y.total_days)??0),$=Number((y==null?void 0:y.daysOff)??(y==null?void 0:y.days_off)??0),E=Number((y==null?void 0:y.daysWorked)??(y==null?void 0:y.days_worked)??0);return{offset:Number((y==null?void 0:y.offset)??0)||0,label:String((y==null?void 0:y.label)??""),from:String((y==null?void 0:y.from)??""),to:String((y==null?void 0:y.to)??""),totalDays:Number.isFinite(C)?Math.max(0,C):0,daysOff:Number.isFinite($)?Math.max(0,$):0,daysWorked:Number.isFinite(E)?Math.max(0,E):0}}).filter(y=>y.totalDays>0):[]});return{topThree:t,topCalendarsSummary:a,timeSummary:h,activitySummary:m,activityDayOffTrend:p}}function ds(e){return e.length?e.reduce((a,o)=>a+o,0)/e.length:0}function us(e){if(!e.length)return 0;const t=[...e].sort((o,r)=>o-r),a=Math.floor(t.length/2);return t.length%2?t[a]:(t[a-1]+t[a])/2}function Wc(e){return new Date(`${e}T00:00:00Z`).getUTCDay()}function zc(e){return`${Number(e||0).toFixed(1)}%`}function x1(e){return{balanceOverview:N(()=>{var u,h,m,p;const a=(u=e.stats)==null?void 0:u.balance_overview;if(!a||typeof a!="object")return null;const o=Array.isArray(a.categories)?a.categories.map(d=>({id:String((d==null?void 0:d.id)??""),label:String((d==null?void 0:d.label)??""),hours:ct(d==null?void 0:d.hours)??0,share:ct(d==null?void 0:d.share)??0,prevShare:ct(d==null?void 0:d.prev_share)??0,delta:ct(d==null?void 0:d.delta)??0,color:e.categoryColorMap.value[String((d==null?void 0:d.id)??"")]})):[],r=Array.isArray(a.relations)?a.relations.map(d=>({label:String((d==null?void 0:d.label)??""),value:String((d==null?void 0:d.value)??"")})):[],n=Array.isArray((h=a.trend)==null?void 0:h.history)?a.trend.history:Array.isArray(a==null?void 0:a.trendHistory)?a.trendHistory:[],l={delta:Array.isArray((m=a.trend)==null?void 0:m.delta)?a.trend.delta.map(d=>({id:String((d==null?void 0:d.id)??""),label:String((d==null?void 0:d.label)??""),delta:ct(d==null?void 0:d.delta)??0})):[],badge:String(((p=a.trend)==null?void 0:p.badge)??""),history:n.map(d=>({offset:cs(d==null?void 0:d.offset)??0,label:String((d==null?void 0:d.label)??""),categories:Array.isArray(d==null?void 0:d.categories)?d.categories.map(f=>({id:String((f==null?void 0:f.id)??""),label:String((f==null?void 0:f.label)??""),share:ct(f==null?void 0:f.share)??0})):[]}))},i=Array.isArray(a.daily)?a.daily.map(d=>({date:String((d==null?void 0:d.date)??""),weekday:String((d==null?void 0:d.weekday)??""),total_hours:ct(d==null?void 0:d.total_hours)??0,categories:Array.isArray(d==null?void 0:d.categories)?d.categories.map(f=>({id:String((f==null?void 0:f.id)??""),label:String((f==null?void 0:f.label)??""),hours:ct(f==null?void 0:f.hours)??0,share:ct(f==null?void 0:f.share)??0})):[]})):[],s=Array.isArray(a.warnings)?a.warnings.map(d=>String(d)):[];return{index:ct(a.index)??0,categories:o,relations:r,trend:l,daily:i,warnings:s}})}}const Xo=ie("auto"),Xr=ie("light"),Rc=ie(!1),Qo=N(()=>Xo.value==="auto"?Xr.value:Xo.value);function C1(){return Oc()??"auto"}function Qr(e){if(typeof document>"u")return;const a=[document.getElementById("opsdash"),document.body].filter(Boolean);a.length&&(a.forEach(o=>o.classList.remove("opsdash-theme-light","opsdash-theme-dark")),e==="dark"?a.forEach(o=>o.classList.add("opsdash-theme-dark")):a.forEach(o=>o.classList.add("opsdash-theme-light")))}function fs(){Xr.value=is()}let Gt=null,Ka=null;function S1(){typeof window>"u"||Gt||(Gt=window.matchMedia("(prefers-color-scheme: dark)"),Ka=()=>fs(),typeof Gt.addEventListener=="function"?Gt.addEventListener("change",Ka):typeof Gt.addListener=="function"&&Gt.addListener(Ka))}function $1(){Gt&&(Ka&&(typeof Gt.removeEventListener=="function"?Gt.removeEventListener("change",Ka):typeof Gt.removeListener=="function"&&Gt.removeListener(Ka)),Gt=null,Ka=null)}function T1(){Rc.value||(Xo.value=C1(),Xr.value=is(),Qr(Qo.value),Rc.value=!0),$t(()=>{typeof window<"u"&&window.addEventListener("oc:theme:changed",fs),S1(),Qr(Qo.value)}),wt(()=>{typeof window<"u"&&window.removeEventListener("oc:theme:changed",fs),$1()}),Ae(Qo,t=>{Qr(t)});function e(t){Xo.value=t,Qr(Qo.value)}return{preference:Xo,effectiveTheme:Qo,systemTheme:Xr,setThemePreference:e}}const gs=e=>e==="light"||e==="dark"?e:"auto";function M1(e){const t=ie(!1),a=ie(gs(e.serverPreference.value));let o=null;const r=typeof e.debounceMs=="number"?e.debounceMs:250,n=()=>{o&&(clearTimeout(o),o=null)};Ir()&&wt(()=>{n()}),Ae(e.serverPreference,s=>{const c=gs(s);a.value=c,e.localPreference.value!==c&&(t.value=!0,e.applyLocalPreference(c),t.value=!1)},{immediate:!0});function l(s){t.value||s!==a.value&&(n(),o=setTimeout(async()=>{o=null;try{await e.postJson(e.route("persist"),{theme_preference:s}),a.value=s,e.notifySuccess("Theme preference saved")}catch(c){console.error(c),e.notifyError("Failed to save theme preference")}},r))}function i(s,c){const u=gs(s);e.applyLocalPreference(u),(c==null?void 0:c.persist)!==!1&&l(u)}return{setThemePreference:i}}function A1(e){const{preference:t,effectiveTheme:a,systemTheme:o,setThemePreference:r}=T1(),{setThemePreference:n}=M1({serverPreference:e.serverPreference,localPreference:t,applyLocalPreference:r,route:e.route,postJson:e.postJson,notifySuccess:e.notifySuccess,notifyError:e.notifyError});function l(i,s){n(i,s)}return{themePreference:t,effectiveTheme:a,systemTheme:o,setThemePreference:l}}function D1(e){const{autoWizardNeeded:t,manualWizardOpen:a,onboardingRunId:o,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:l}=Uh(),i=N(()=>{var x;return!!((x=e.onboardingState.value)!=null&&x.completed)}),s=e.actions.isOnboardingSaving,c=e.actions.isSnapshotSaving,u=e.actions.snapshotNotice,h=N(()=>(e.calendars.value||[]).map(x=>({id:String((x==null?void 0:x.id)??""),displayname:String((x==null?void 0:x.displayname)??(x==null?void 0:x.name)??(x==null?void 0:x.id)??""),color:typeof(x==null?void 0:x.color)=="string"?x.color:""})).filter(x=>x.id)),m=N(()=>[...e.selected.value]),p=N(()=>{var x;return((x=e.onboardingState.value)==null?void 0:x.strategy)??"total_only"}),d=N(()=>{var x;return((x=e.targetsConfig.value)==null?void 0:x.allDayHours)??8}),f=N(()=>{var x;return((x=e.targetsConfig.value)==null?void 0:x.totalHours)??40}),y=N(()=>{var x,v,b,j;return{activityCard:(x=e.targetsConfig.value)==null?void 0:x.activityCard,balanceTrendLookback:((j=(b=(v=e.targetsConfig.value)==null?void 0:v.balance)==null?void 0:b.trend)==null?void 0:j.lookbackWeeks)??3}}),C=x=>{if(typeof x!="string")return null;const v=x.trim();if(!/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(v))return null;if(v.length===4){const[,b,j,F]=v;return`#${b}${b}${j}${j}${F}${F}`.toUpperCase()}return v.toUpperCase()},$=N(()=>{var v;return(Array.isArray((v=e.targetsConfig.value)==null?void 0:v.categories)?e.targetsConfig.value.categories:[]).map((b,j)=>({id:String((b==null?void 0:b.id)??`cat_${j}`),label:String((b==null?void 0:b.label)??`Category ${j+1}`),targetHours:Number.isFinite(b==null?void 0:b.targetHours)?Number(b.targetHours):0,includeWeekend:!!(b!=null&&b.includeWeekend),paceMode:(b==null?void 0:b.paceMode)==="time_aware"?"time_aware":"days_only",color:C(b==null?void 0:b.color)??null}))}),E=N(()=>{var F;const x={},v=new Map;(Array.isArray((F=e.targetsConfig.value)==null?void 0:F.categories)?e.targetsConfig.value.categories:[]).forEach(X=>{const ne=Array.isArray(X==null?void 0:X.groupIds)?Number(X.groupIds[0]):Number(X==null?void 0:X.groupId);Number.isFinite(ne)&&v.set(ne,String((X==null?void 0:X.id)??""))});const j=new Set(e.selected.value||[]);return Object.entries(e.groupsById.value||{}).forEach(([X,ne])=>{if(!j.has(X))return;const Y=v.get(Number(ne));Y&&(x[X]=Y)}),x}),T=N(()=>({...e.deckSettings.value||{}})),P=N(()=>({...e.reportingConfig.value||{}})),I=N(()=>{var x;return((x=e.onboardingState.value)==null?void 0:x.dashboardMode)||"standard"});function w(x){if(!x)return!0;const v=x.version_required??Ea;return!x.completed||(x.version??0)<v}function A(x){const v=x??e.onboardingState.value;if(!e.hasInitialLoad.value&&!v)return;const b=w(v);t.value=b||!!(v!=null&&v.resetRequested),(b||v!=null&&v.resetRequested)&&(l.value=null),v!=null&&v.resetRequested&&(a.value=!0)}Ae(()=>e.onboardingState.value,x=>{e.hasInitialLoad.value&&A(x)});async function O(x){try{await e.actions.complete(x),a.value=!1,t.value=!1}catch(v){console.error("[opsdash] onboarding complete failed",v)}}async function z(){try{await e.actions.skip(),a.value=!1,t.value=!1}catch(x){console.error("[opsdash] onboarding skip failed",x)}}function J(){t.value||(a.value=!1)}async function H(){try{await e.actions.saveSnapshot()}catch(x){console.error("[opsdash] onboarding snapshot failed",x)}}return{autoWizardNeeded:t,manualWizardOpen:a,onboardingRunId:o,onboardingWizardVisible:r,openWizardFromSidebar:n,wizardStartStep:l,hasExistingConfig:i,wizardCalendars:h,wizardInitialSelection:m,wizardInitialStrategy:p,wizardInitialCategories:$,wizardInitialAssignments:E,wizardInitialAllDayHours:d,wizardInitialTotalHours:f,wizardInitialTargetsConfig:y,wizardInitialDeckSettings:T,wizardInitialReportingConfig:P,wizardInitialDashboardMode:I,isOnboardingSaving:s,isSnapshotSaving:c,snapshotNotice:u,evaluateOnboarding:A,handleWizardComplete:O,handleWizardSkip:z,handleWizardClose:J,handleWizardSaveSnapshot:H}}function E1(e){const t=N(()=>!e.navOpen.value),a=N(()=>e.range.value==="week"?"Switch to month":"Switch to week"),o=N(()=>!e.from.value||!e.to.value?"":`${e.from.value}  ${e.to.value}`);function r(){try{const c=e.performLoad();if(c&&typeof c.then=="function")return c.catch(u=>{console.error("[opsdash] range load failed",u)})}catch(c){console.error("[opsdash] range load failed",c)}}function n(){r()}function l(){e.range.value=e.range.value==="week"?"month":"week",e.offset.value=0,r()}function i(){e.offset.value=(e.offset.value||0)-1,r()}function s(){e.offset.value=(e.offset.value||0)+1,r()}return{showCollapsedRangeControls:t,rangeToggleLabel:a,rangeDateLabel:o,loadCurrent:n,toggleRangeCollapsed:l,goPrevious:i,goNext:s}}const jc=["cals","groups","targets_week","targets_month","targets_config","theme_preference","onboarding","widgets"],L1=new Set(["auto","light","dark"]);function N1(e){if(!e||typeof e!="object")return{cleaned:{},ignored:["<invalid-payload>"]};const t=e,a={},o=[];if(jc.forEach(r=>{t[r]!==void 0&&(a[r]=t[r])}),Object.keys(t).forEach(r=>{jc.includes(r)||o.push(r)}),a.cals&&!Array.isArray(a.cals)&&(o.push("cals"),delete a.cals),"groups"in a&&(!a.groups||typeof a.groups!="object")&&(o.push("groups"),delete a.groups),"targets_week"in a&&(!a.targets_week||typeof a.targets_week!="object")&&(o.push("targets_week"),delete a.targets_week),"targets_month"in a&&(!a.targets_month||typeof a.targets_month!="object")&&(o.push("targets_month"),delete a.targets_month),"targets_config"in a&&(!a.targets_config||typeof a.targets_config!="object")&&(o.push("targets_config"),delete a.targets_config),a.theme_preference&&!L1.has(String(a.theme_preference))&&(o.push("theme_preference"),delete a.theme_preference),"onboarding"in a&&(a.onboarding==null||typeof a.onboarding!="object")&&(o.push("onboarding"),delete a.onboarding),"widgets"in a){const r=a.widgets,n=Array.isArray(r),l=r&&typeof r=="object"&&Array.isArray(r.tabs);!n&&!l&&(o.push("widgets"),delete a.widgets)}return{cleaned:a,ignored:o}}function I1(e,t="0.4.4"){return{version:t,generated:new Date().toISOString(),payload:e}}function B1(e){function t(){const l={cals:[...e.selected.value],groups:{...e.groupsById.value},targets_week:{...e.targetsWeek.value},targets_month:{...e.targetsMonth.value},targets_config:ua(e.targetsConfig.value),theme_preference:e.themePreference.value};return e.onboardingState.value&&(l.onboarding={...e.onboardingState.value}),e.widgetTabs&&(l.widgets=e.widgetTabs.value),l}function a(l,i){if(e.createDownload){e.createDownload(l,i);return}const s=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),c=URL.createObjectURL(s),u=document.createElement("a");u.href=c,u.download=l,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(c)}function o(){try{const l=t(),i=I1(l),s=`opsdash-config-${i.generated.slice(0,10)}.json`;a(s,i),e.notifySuccess("Configuration exported")}catch(l){console.error(l),e.notifyError("Failed to export configuration")}}async function r(l){const{cleaned:i,ignored:s}=N1(l);if(!Object.keys(i).length){e.notifyError("No recognised configuration keys found in file");return}if(i.cals&&(e.selected.value=i.cals.map(c=>String(c))),i.groups){const c={};Object.entries(i.groups).forEach(([u,h])=>{const m=Number(h);c[String(u)]=Number.isFinite(m)?m:0}),e.groupsById.value=c}if(i.targets_week){const c={};Object.entries(i.targets_week).forEach(([u,h])=>{const m=Number(h);Number.isFinite(m)&&(c[String(u)]=m)}),e.targetsWeek.value=c}if(i.targets_month){const c={};Object.entries(i.targets_month).forEach(([u,h])=>{const m=Number(h);Number.isFinite(m)&&(c[String(u)]=m)}),e.targetsMonth.value=c}if(i.targets_config&&(e.targetsConfig.value=At(i.targets_config)),i.theme_preference&&e.setThemePreference(i.theme_preference,{persist:!1}),i.onboarding&&typeof i.onboarding=="object"&&(e.onboardingState.value={...i.onboarding}),e.widgetTabs&&i.widgets){const c=e.widgetTabs.value||Jo("standard");e.widgetTabs.value=Yo(i.widgets,c)}await e.postJson(e.route("persist"),i),await e.performLoad(),s.length?e.notifyError(`Configuration imported with ignored keys: ${s.join(", ")}`):e.notifySuccess("Configuration imported")}async function n(l){try{const i=await l.text(),s=JSON.parse(i),c=s!=null&&s.payload&&typeof s.payload=="object"?s.payload:s;await r(c)}catch(i){console.error(i),e.notifyError("Failed to import configuration")}}return{collectSidebarPayload:t,exportSidebarConfig:o,importSidebarConfig:n,applyConfigSource:r}}function O1(e=null){const t=ie(e);function a(o){t.value=t.value===o?null:o}return{detailsIndex:t,toggle:a}}function P1(e){const t=N(()=>e.value==="month"?"Last month":"Last week"),a=N(()=>e.value==="month"?"This month":"This week"),o=N(()=>e.value==="month"?"Notes for previous month":"Notes for previous week"),r=N(()=>e.value==="month"?"Notes for current month":"Notes for current week");return{notesLabelPrev:t,notesLabelCurr:a,notesLabelPrevTitle:o,notesLabelCurrTitle:r}}const Uc="opsdash.sidebarOpen";function F1(){var e;if(typeof window>"u")return!0;try{const t=(e=window.localStorage)==null?void 0:e.getItem(Uc);if(t==="true")return!0;if(t==="false")return!1}catch{return!0}return!0}function H1(){const e=ie(F1());Ae(e,r=>{var n;if(typeof window<"u"){try{(n=window.localStorage)==null||n.setItem(Uc,r?"true":"false")}catch{}Xt(()=>{window.dispatchEvent(new Event("resize"))}).catch(()=>{})}},{immediate:!1});const t=()=>{e.value=!e.value},a=N(()=>e.value?"Hide sidebar":"Show sidebar"),o=N(()=>e.value?"":"");return{navOpen:e,toggleNav:t,navToggleLabel:a,navToggleIcon:o}}function W1(e){const t=ie(!1),a=ie(null);let o=!1;const r=!!Ir();function n(p,d="api"){var f;p&&(a.value=p),t.value=!0,(f=e.onOpen)==null||f.call(e,{source:d})}function l(){t.value=!1;const p=a.value;if(a.value=null,p&&typeof p.focus=="function")try{p.focus()}catch{}}function i(){typeof e.ensureSidebarVisible=="function"&&e.ensureSidebarVisible()}function s(p,d){d.preventDefault(),i(),p()}function c(p){var C;const d=p;if(!d)return!1;if(d.isContentEditable)return!0;const f=d.tagName;if(!f)return!1;if(["INPUT","TEXTAREA","SELECT"].includes(f))return!0;const y=(C=d.getAttribute)==null?void 0:C.call(d,"role");return!!(y&&["textbox","combobox"].includes(y))}function u(p){if(p.defaultPrevented)return;const d=c(p.target);if((p.key==="Escape"||p.key==="Esc")&&t.value){p.preventDefault(),l();return}if(!p.altKey&&!p.ctrlKey&&!p.metaKey&&!d&&(p.key==="?"||p.shiftKey&&p.key==="/")){p.preventDefault(),n(p.target instanceof HTMLElement?p.target:null,"keyboard");return}if(p.altKey&&!p.ctrlKey&&!p.metaKey){const f=p.key;if(f==="ArrowLeft"){s(e.goPrevious,p);return}if(f==="ArrowRight"){s(e.goNext,p);return}if(p.shiftKey&&(f==="R"||f==="r")){s(e.toggleRange,p);return}if(f==="T"||f==="t"){e.openConfigPanel&&(p.preventDefault(),i(),e.openConfigPanel());return}}if(p.shiftKey&&!p.altKey&&!p.metaKey&&!p.ctrlKey){if((p.key==="e"||p.key==="E")&&e.toggleEditLayout&&!d){p.preventDefault(),e.toggleEditLayout();return}if((p.key==="c"||p.key==="C")&&e.openWidgetOptions&&!d){p.preventDefault(),e.openWidgetOptions();return}}}function h(){o||typeof document>"u"||(document.addEventListener("keydown",u),o=!0)}function m(){!o||typeof document>"u"||(document.removeEventListener("keydown",u),o=!1)}return h(),r&&($t(()=>{h()}),wt(()=>{m()})),{shortcutsOpen:t,openShortcuts:n,closeShortcuts:l,shortcutGroups:Yi,unbindShortcuts:m}}function z1(e){const t=ie(!1),a=ie(!1),o=ie(null);async function r(s){var c,u,h;try{t.value=!0,o.value=null,e.setThemePreference(s.themePreference,{persist:!1}),await e.postJson(e.route("persist"),{cals:s.selected,groups:s.groups,targets_week:s.targetsWeek,targets_month:s.targetsMonth,targets_config:s.targetsConfig,theme_preference:s.themePreference,deck_settings:s.deckSettings,reporting_config:s.reportingConfig,targets_config_activity:s.activityCard,onboarding:{completed:!0,version:Ea,strategy:s.strategy,dashboardMode:s.dashboardMode,completed_at:new Date().toISOString()}}),e.setSelected(s.selected),e.setTargetsWeek(s.targetsWeek),e.setTargetsMonth(s.targetsMonth),e.setTargetsConfig(s.targetsConfig),e.setGroupsById(s.groups),(c=e.setDashboardMode)==null||c.call(e,s.dashboardMode),(u=e.setOnboardingState)==null||u.call(e,{completed:!0,version:Ea,strategy:s.strategy,dashboardMode:s.dashboardMode,version_required:Ea,resetRequested:!1});const m=(h=s.profileName)==null?void 0:h.trim();s.saveProfile&&m&&await e.savePreset(m),await e.reloadAfterPersist(),e.notifySuccess("Onboarding saved")}catch(m){throw console.error(m),e.notifyError("Failed to save onboarding"),m}finally{t.value=!1}}async function n(s){var c,u,h,m,p,d,f;try{t.value=!0,o.value=null,s.theme_preference&&e.setThemePreference(s.theme_preference,{persist:!1}),await e.postJson(e.route("persist"),s),s.cals&&e.setSelected(s.cals),s.targets_week&&e.setTargetsWeek(s.targets_week),s.targets_month&&e.setTargetsMonth(s.targets_month),s.targets_config&&e.setTargetsConfig(s.targets_config),s.groups&&e.setGroupsById(s.groups),s.deck_settings&&((c=e.setDeckSettings)==null||c.call(e,s.deck_settings)),s.reporting_config&&((u=e.setReportingConfig)==null||u.call(e,s.reporting_config)),s.onboarding&&((p=e.setOnboardingState)==null||p.call(e,{completed:s.onboarding.completed??!1,version:s.onboarding.version??Ea,strategy:s.onboarding.strategy??((h=e.onboardingState.value)==null?void 0:h.strategy)??"total_only",completed_at:s.onboarding.completed_at??"",dashboardMode:s.onboarding.dashboardMode??((m=e.onboardingState.value)==null?void 0:m.dashboardMode),version_required:Ea,resetRequested:!1})),s.dashboardMode&&((d=e.setDashboardMode)==null||d.call(e,s.dashboardMode)),s.widgets&&((f=e.setWidgetTabs)==null||f.call(e,s.widgets)),e.notifySuccess("Step saved")}catch(y){throw console.error(y),e.notifyError("Failed to save step"),y}finally{t.value=!1}}async function l(){var s;try{t.value=!0,o.value=null,await e.postJson(e.route("persist"),{onboarding:{completed:!0,version:Ea,strategy:((s=e.onboardingState.value)==null?void 0:s.strategy)??"total_only",completed_at:new Date().toISOString()}}),await e.reloadAfterPersist(),e.notifySuccess("You can revisit onboarding from the Targets tab any time.")}catch(c){throw console.error(c),e.notifyError("Failed to update onboarding state"),c}finally{t.value=!1}}async function i(){try{a.value=!0,o.value=null;const c=`Before onboarding ${new Date().toISOString().slice(0,16).replace("T"," ")}`;await e.savePreset(c),o.value={type:"success",message:`Profile "${c}" saved  find it under Config & Setup.`}}catch(s){throw console.error("[opsdash] profile backup failed",s),o.value={type:"error",message:"Failed to save profile backup. Please try again."},s}finally{a.value=!1}}return{isOnboardingSaving:t,isSnapshotSaving:a,snapshotNotice:o,complete:r,saveStep:n,skip:l,saveSnapshot:i}}function R1(e){const t=ie([]),a=ie(!1),o=ie(""),r=ie(null);let n=0;const l=new Map;let i="";function s(u,h){return`${u}::${h}`}async function c(u=!1){const h=(e.from.value||"").trim(),m=(e.to.value||"").trim();if(!h||!m){t.value=[],o.value="",a.value=!1,r.value=null,i="";return}const p=s(h,m);if(!u&&l.has(p)){const f=l.get(p);t.value=f.cards,r.value=f.fetchedAt,o.value="",a.value=!1,i=p;return}const d=++n;a.value=!0,o.value="";try{const f=await fm({from:h,to:m});if(d===n){const y=new Date().toISOString();t.value=f,r.value=y,l.set(p,{cards:f,fetchedAt:y}),i=p}}catch(f){d===n&&(t.value=[],o.value=f instanceof Error?f.message:"deck_fetch_failed",e.notifyError&&e.notifyError("Unable to fetch Deck cards. Check the Deck app or try again."))}finally{d===n&&(a.value=!1)}}return Ae(()=>[e.from.value,e.to.value],([u,h],[m,p])=>{if(!u||!h){t.value=[];return}u===m&&h===p||c()}),{deckCards:t,deckLoading:a,deckError:o,deckLastFetchedAt:r,refreshDeck:c}}function ps(e){return["all","mine","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine"].includes(e)?e:"all"}function La(e,t,a){const o=e.status;return t==="open"?o==="active":t==="archived"?o==="archived":t==="done"?o==="done"?!0:a&&o==="archived":!1}function hs(e){return e.dueTs!=null||e.match==="due"}function ms(e){if(e.dueTs==null)return!1;const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime(),o=a+24*60*60*1e3;return e.dueTs>=a&&e.dueTs<o}function j1(e){const{deckSettings:t,deckCards:a,uid:o,root:r}=e,n=ie(ps(t.value.defaultFilter));Ae(()=>t.value.defaultFilter,d=>{const f=ps(d);f!==n.value&&(n.value=f)});const l=N(()=>{const d=new Set((t.value.hiddenBoards||[]).map(f=>Number(f)).filter(f=>Number.isFinite(f)));return(a.value||[]).filter(f=>!d.has(Number(f.boardId)))}),i=N(()=>{const d=t.value.mineMode??"assignee",f=(o.value||"").trim().toLowerCase();return y=>{if(!f)return!1;const C=(y.assignees||[]).some(I=>typeof I.uid=="string"&&I.uid.toLowerCase()===f),$=typeof y.createdBy=="string"?y.createdBy.trim().toLowerCase():"",E=$&&$===f,T=typeof y.doneBy=="string"?y.doneBy.trim().toLowerCase():"",P=T&&T===f;return d==="creator"?E||P:d==="assignee"?C||P:C||E||P}}),s=N(()=>{const d=i.value,f=t.value.solvedIncludesArchived!==!1,y=n.value,C=l.value;if(y==="all")return C;if(y==="mine")return C.filter(T=>d(T));if(y.startsWith("due_today")){const T=y.endsWith("_mine");return C.filter(P=>{const I=ms(P),w=T?d(P):!0;return I&&w})}if(y.startsWith("due_")){const T=y.endsWith("_mine");return C.filter(P=>{const I=hs(P),w=T?d(P):!0;return I&&w})}const[$,E]=y.split("_");return C.filter(T=>{const P=La(T,$,f),I=E==="all"?!0:d(T);return P&&I})}),c=N(()=>{const d=i.value,f=t.value.solvedIncludesArchived!==!1,y=l.value;return[{value:"all",label:"All cards",mine:!1,matches:()=>!0},{value:"open_all",label:"Open  All",mine:!1,matches:$=>La($,"open",f)},{value:"open_mine",label:"Open  Mine",mine:!0,matches:$=>La($,"open",f)&&d($)},{value:"done_all",label:"Done  All",mine:!1,matches:$=>La($,"done",f)},{value:"done_mine",label:"Done  Mine",mine:!0,matches:$=>La($,"done",f)&&d($)},{value:"archived_all",label:"Archived  All",mine:!1,matches:$=>La($,"archived",f)},{value:"archived_mine",label:"Archived  Mine",mine:!0,matches:$=>La($,"archived",f)&&d($)},{value:"due_all",label:"Due  All",mine:!1,matches:$=>hs($)},{value:"due_mine",label:"Due  Mine",mine:!0,matches:$=>hs($)&&d($)},{value:"due_today_all",label:"Due today  All",mine:!1,matches:$=>ms($)},{value:"due_today_mine",label:"Due today  Mine",mine:!0,matches:$=>ms($)&&d($)}].map($=>({value:$.value,label:$.label,mine:$.mine,count:y.filter($.matches).length}))}),u=N(()=>{const d=i.value,f=t.value.solvedIncludesArchived!==!1,y=l.value,C=[];return[{key:"open_all",label:"Open  All",status:"open",mine:!1},{key:"open_mine",label:"Open  Mine",status:"open",mine:!0},{key:"done_all",label:"Done  All",status:"done",mine:!1},{key:"done_mine",label:"Done  Mine",status:"done",mine:!0},{key:"archived_all",label:"Archived  All",status:"archived",mine:!1},{key:"archived_mine",label:"Archived  Mine",status:"archived",mine:!0}].forEach(E=>{const T=y.filter(w=>{const A=La(w,E.status,f),O=E.mine?d(w):!0;return A&&O}),P=new Map;T.forEach(w=>{if(w.boardId==null)return;const A=Number(w.boardId),O=P.get(A)||{count:0,title:w.boardTitle||"",color:w.boardColor};O.count+=1,O.title=w.boardTitle||O.title,O.color=w.boardColor??O.color,P.set(A,O)});let I;if(P.size){const w=Array.from(P.entries()).sort((A,O)=>O[1].count-A[1].count);I={title:w[0][1].title,color:w[0][1].color}}C.push({key:E.key,label:E.label,titles:T.map(w=>w.title||`Card ${w.id}`),count:T.length,board:I})}),C}),h=N(()=>{const d=t.value.ticker||{autoScroll:!0,intervalSeconds:5},f=Math.min(10,Math.max(3,Number(d.intervalSeconds??5)||5));return{autoScroll:d.autoScroll!==!1,intervalSeconds:f}}),m=N(()=>t.value.filtersEnabled&&t.value.enabled&&!!(o.value||"").trim()),p=N(()=>`${r.value||""}/apps/deck/`);return{deckFilter:n,deckVisibleCards:l,deckMineMatcher:i,deckFilteredCards:s,deckSummaryBuckets:u,deckTickerConfig:h,deckCanFilterMine:m,deckUrl:p,deckFilterOptions:c}}function U1(e){const{widgetsRegistry:t,createDefaultTabs:a,normalizeWidgetTabs:o,createDashboardPreset:r,dashboardMode:n,deckEnabled:l,hasInitialLoad:i,queueSaveRef:s}=e;function c(){return a()}const u=ie(c().tabs),h=ie(c().defaultTabId),m=ie(h.value),p=ie(!1),d=ie(!1),f=ie("");function y(){var se;i.value&&p.value&&((se=s.value)==null||se.call(s,!1),p.value=!1)}Ae(()=>i.value,se=>{se&&p.value&&y()});const C=N(()=>u.value.find(se=>se.id===m.value)||u.value[0]);function $(se){u.value.some(fe=>fe.id===se)&&(m.value=se)}function E(se){u.value.some(fe=>fe.id===se)&&(h.value=se,m.value=se,p.value=!0,y())}const T=N(()=>{var fe;const se=((fe=C.value)==null?void 0:fe.widgets)||[];return l.value?se:se.filter(ce=>ce.type!=="deck")}),P=N(()=>Object.keys(t).map(se=>{var fe;return{type:se,label:((fe=t[se])==null?void 0:fe.label)||se}}));function I(se){var V;n.value=se;const fe=((V=C.value)==null?void 0:V.id)||"tab-1",ce=u.value.map(G=>G.id===fe?{...G,widgets:r(se)}:G);u.value=ce,p.value=!0,y()}function w(se,fe){u.value=u.value.map(ce=>ce.id===se?{...ce,widgets:fe([...ce.widgets])}:ce)}function A(se,fe){var V;const ce=(V=C.value)==null?void 0:V.id;ce&&(w(ce,G=>G.map(M=>M.id===se?fe({...M,layout:{...M.layout}}):M)),p.value=!0,y())}function O(se){const fe=["quarter","half","full"];A(se,ce=>{const V=fe.indexOf(ce.layout.width),G=fe[(V+1)%fe.length];return{...ce,layout:{...ce.layout,width:G}}})}function z(se){const fe=["s","m","l","xl"];A(se,ce=>{const V=fe.indexOf(ce.layout.height),G=fe[(V+1)%fe.length];return{...ce,layout:{...ce.layout,height:G}}})}function J(se,fe){var K;const ce=[...T.value].sort((oe,ve)=>(oe.layout.order||0)-(ve.layout.order||0)),V=ce.findIndex(oe=>oe.id===se);if(V<0)return;const G=fe==="up"?V-1:V+1;if(G<0||G>=ce.length)return;const M=ce[V].layout.order;ce[V].layout.order=ce[G].layout.order,ce[G].layout.order=M;const B=(K=C.value)==null?void 0:K.id;B&&(w(B,()=>ce),p.value=!0,y())}function H(se){var ce;const fe=(ce=C.value)==null?void 0:ce.id;fe&&(w(fe,V=>V.filter(G=>G.id!==se)),p.value=!0,y())}function x(se){var M;const fe=t[se];if(!fe)return;const ce=T.value.reduce((B,K)=>Math.max(B,K.layout.order||0),0),V={id:`widget-${se}-${Date.now()}`,type:se,options:{},layout:{...fe.defaultLayout,order:ce+10},version:1},G=(M=C.value)==null?void 0:M.id;G&&(w(G,B=>[...B,V]),f.value="",p.value=!0,y())}function v(se,fe){var K;const ce=t[se];if(!ce)return;const V=T.value.reduce((oe,ve)=>Math.max(oe,ve.layout.order||0),0);let G=Number.isFinite(fe)?Number(fe):V+10;for(Number.isFinite(G)||(G=V+10);T.value.some(oe=>oe.layout.order===G);)G+=.1;const M={id:`widget-${se}-${Date.now()}`,type:se,options:{},layout:{...ce.defaultLayout,order:G},version:1},B=(K=C.value)==null?void 0:K.id;B&&(w(B,oe=>[...oe,M]),p.value=!0,y())}function b(se,fe){var M;if(!Number.isFinite(fe??NaN))return;const ce=Number(fe),V=T.value.map(B=>B.id===se?{...B,layout:{...B.layout,order:ce}}:{...B});V.sort((B,K)=>(B.layout.order||0)-(K.layout.order||0));const G=(M=C.value)==null?void 0:M.id;G&&(w(G,()=>V.map((B,K)=>({...B,layout:{...B.layout,order:(K+1)*10}}))),p.value=!0,y())}function j(se,fe,ce){var G;const V=(G=C.value)==null?void 0:G.id;V&&(w(V,M=>M.map(B=>{if(B.id!==se)return B;const K={...B.options||{}};if(fe.includes(".")){const oe=fe.split("."),ve={...K};let S=ve;for(let R=0;R<oe.length-1;R+=1){const L=oe[R];S[L]={...S[L]||{}},S=S[L]}return S[oe[oe.length-1]]=ce,{...B,options:ve}}return fe==="scale"?(K.scale=ce,"textSize"in K&&delete K.textSize,{...B,options:K}):(K[fe]=ce,{...B,options:K})})),p.value=!0,y())}function F(){var fe;const se=(fe=C.value)==null?void 0:fe.id;se&&(w(se,()=>r(n.value)),p.value=!0,y())}function X(se){const fe=`tab-${Date.now().toString(36)}`,ce=String(se??"").trim()||`Tab ${u.value.length+1}`,V={id:fe,label:ce.slice(0,48),widgets:r(n.value)};u.value=[...u.value,V],m.value=V.id,p.value=!0,y()}function ne(se,fe){const ce=String(fe||"").trim().slice(0,48);ce&&(u.value=u.value.map(V=>V.id===se?{...V,label:ce}:V),p.value=!0,y())}function Y(se){var fe,ce;u.value.length<=1||(u.value=u.value.filter(V=>V.id!==se),h.value===se&&(h.value=((fe=u.value[0])==null?void 0:fe.id)||""),m.value===se&&(m.value=((ce=u.value[0])==null?void 0:ce.id)||""),p.value=!0,y())}function re(se){const fe=a(),ce=o(se,fe);u.value=ce.tabs,h.value=ce.defaultTabId;const V=m.value;V&&ce.tabs.some(G=>G.id===V)?m.value=V:m.value=ce.defaultTabId}return{layoutTabs:u,defaultTabId:h,activeTabId:m,widgetsDirty:p,isLayoutEditing:d,newWidgetType:f,widgets:T,availableWidgetTypes:P,persistWidgets:y,applyDashboardPreset:I,updateWidget:A,cycleWidth:O,cycleHeight:z,moveWidget:J,removeWidget:H,addWidget:x,addWidgetAt:v,reorderWidget:b,updateWidgetOptions:j,resetWidgets:F,activeTab:C,setActiveTab:$,setDefaultTab:E,addTab:X,renameTab:ne,removeTab:Y,setTabsFromPayload:re}}function V1(e){const{performLoad:t,refreshPresets:a,range:o,offset:r,onboardingState:n,hasInitialLoad:l,evaluateOnboarding:i,dashboardMode:s}=e;Ae(n,c=>{l.value&&i(c)}),Ae(n,c=>{const u=c==null?void 0:c.dashboardMode;(u==="quick"||u==="standard"||u==="pro")&&(s.value=u)}),$t(async()=>{console.info("[opsdash] start");try{await t()}catch(c){console.error(c),alert("Initial load failed")}a().catch(c=>console.warn("[opsdash] presets fetch failed",c))}),Ae(o,()=>{r.value=0,t().catch(console.error)})}function K1(e){return Array.from(e.reduce((t,a)=>(a.boardId==null||t.has(a.boardId)||t.set(a.boardId,{id:a.boardId,title:a.boardTitle,color:a.boardColor}),t),new Map).values())}function q1(e){return{widgetContext:N(()=>{var a,o;return{summary:e.timeSummary.value,activeDayMode:e.activeDayMode.value,targetsSummary:e.targetsSummary.value,targetsConfig:e.targetsConfig.value,stats:e.stats,byDay:e.byDay.value,byCal:e.byCal.value,groupsById:e.groupsById.value,groups:e.calendarGroupsWithToday.value,balanceOverview:e.balanceOverview.value,balanceConfig:e.balanceCardConfig.value,rangeLabel:e.rangeLabel.value,rangeMode:e.range.value,offset:e.offset.value,from:e.from.value,to:e.to.value,lookbackWeeks:e.trendLookbackWeeks.value,balanceNote:e.balanceNote.value,activitySummary:e.activitySummary.value,activityConfig:e.activityCardConfig.value,activityDayOffTrend:e.activityDayOffTrend.value,activityTrendUnit:e.range.value==="month"?"mo":"wk",activityDayOffLookback:e.trendLookbackWeeks.value,deckBuckets:e.deckSummaryBuckets.value,deckRangeLabel:e.rangeLabel.value,deckLoading:e.deckLoading.value,deckError:e.deckError.value,deckTicker:e.deckTickerConfig.value,deckFilter:e.deckFilter.value,onDeckFilter:r=>e.setDeckFilter(r),deckShowBoardBadges:((o=(a=e.deckSettings.value)==null?void 0:a.ticker)==null?void 0:o.showBoardBadges)!==!1,deckUrl:e.deckUrl.value,deckCards:e.deckCards.value,deckBoards:K1(e.deckCards.value||[]),uid:e.uid.value,notesPrev:e.notesPrev.value,notesCurr:e.notesCurrDraft.value,notesHistory:e.notesHistory.value,notesLabelPrev:e.notesLabelPrev.value,notesLabelCurr:e.notesLabelCurr.value,notesLabelPrevTitle:e.notesLabelPrevTitle.value,notesLabelCurrTitle:e.notesLabelCurrTitle.value,isSavingNote:e.isSavingNote.value,onSaveNote:()=>e.saveNotes(),onUpdateNotes:r=>{e.notesCurrDraft.value=r},isLoading:e.isLoading.value,hasInitialLoad:e.hasInitialLoad.value,isLayoutEditing:e.isLayoutEditing.value,onUpdateWidgetOptions:(r,n,l)=>{e.updateWidgetOptions(r,n,l)},charts:e.charts.value,calendarChartData:e.calendarChartData.value,categoryChartsById:e.categoryChartsById.value,calendarGroups:e.calendarGroups.value,calendarCategoryMap:e.calendarCategoryMap.value,categoryColorMap:e.categoryColorMap.value,colorsById:e.colorsById.value,colorsByName:e.colorsByName.value,currentTargets:e.currentTargets.value,calendarTodayHours:e.calendarTodayHours.value}})}}function Vc(){var t;if(typeof window>"u")return!1;const e=window;return!!((t=e==null?void 0:e.OC)!=null&&t.debug||e!=null&&e.__DEV__||e!=null&&e.__VUE_PROD_DEVTOOLS__)}function G1(e,t={}){var o,r,n,l,i,s;if(typeof window>"u")return;const a=window;try{if((r=(o=a==null?void 0:a.OCA)==null?void 0:o.Analytics)!=null&&r.trackEvent){a.OCA.Analytics.trackEvent("opsdash",e,t);return}if((l=(n=a==null?void 0:a.OCA)==null?void 0:n.Analytics)!=null&&l.track){a.OCA.Analytics.track("opsdash",e,t);return}if((s=(i=a==null?void 0:a.OC)==null?void 0:i.eventBus)!=null&&s.emit){a.OC.eventBus.emit("opsdash:telemetry",{app:"opsdash",event:e,payload:t});return}}catch(c){Vc()&&console.warn("[opsdash] telemetry emit failed",e,c);return}Vc()&&console.debug("[opsdash] telemetry (noop)",e,t)}const J1={version:"0.5.3"},Y1={class:"app-shell"},Z1={class:"app-main"},X1={class:"app-container"},Q1={key:0,class:"range-toolbar",role:"toolbar","aria-label":"Collapsed range controls"},e0=["aria-expanded","aria-label"],t0=["disabled","aria-pressed"],a0={class:"range-toolbar__group",role:"group","aria-label":"Navigate periods"},o0=["disabled"],r0=["title"],n0=["disabled"],s0=["disabled"],l0=["title"],i0={class:"cards-toolbar"},c0={class:"cards-toolbar__tabs",role:"tablist","aria-label":"Dashboard tabs"},d0=["aria-selected","onClick","onContextmenu"],u0=["onKeydown"],f0={class:"tab-label"},g0={key:0,class:"tab-default"},p0={class:"cards-toolbar__center"},h0={class:"range-badge","aria-label":"Active range"},m0=["textContent"],v0=["textContent"],b0={key:0,class:"cards-toolbar__add"},y0=["value"],w0=["disabled"],k0={class:"cards"},_0={class:"hint footer"},x0=Le({__name:"App",setup(e){function t(Z){var Ve,Te;const he=window;(Te=(Ve=he.OC)==null?void 0:Ve.Notification)!=null&&Te.showTemporary?he.OC.Notification.showTemporary(Z):console.log("SUCCESS:",Z)}function a(Z){var Ve,Te;const he=window;(Te=(Ve=he.OC)==null?void 0:Ve.Notification)!=null&&Te.showTemporary?he.OC.Notification.showTemporary(Z):(console.error("ERROR:",Z),alert(Z))}const{navOpen:o,toggleNav:r,navToggleLabel:n,navToggleIcon:l}=H1();function i(){o.value||r()}Ae(()=>o.value,Z=>{if(typeof document>"u")return;const he=Z?"var(--app-navigation-width, 300px)":"0px";document.body.style.setProperty("--opsdash-nav-offset",he)},{immediate:!0}),wt(()=>{typeof document>"u"||document.body.style.removeProperty("--opsdash-nav-offset")});const s=ie("week"),c=ie(0),u=N(()=>{const Z=_t.value;if(!Z)return"Partial data due to caps";const he=[];return Z.maxPerCal!=null&&he.push(`cap per calendar: ${Z.maxPerCal}`),Z.maxTotal!=null&&he.push(`cap total: ${Z.maxTotal}`),Z.totalProcessed!=null&&he.push(`processed: ${Z.totalProcessed}`),he.join("  ")}),h=ie(!1),{scheduleDraw:m}=l1(),{route:p,getJson:d,postJson:f,deleteJson:y,root:C}=d1(),{fetchDavColors:$}=f1({root:C,isDebug:Fs}),E=Yy({range:s,offset:c,route:Z=>p(Z),getJson:d,postJson:f,notifySuccess:t,notifyError:a}),{notesPrev:T,notesCurrDraft:P,notesHistory:I,isSavingNote:w,fetchNotes:A,saveNotes:O}=E,z=ie(!1),J=ie("standard"),H=ie(null),x=ie(!0),{layoutTabs:v,defaultTabId:b,activeTabId:j,isLayoutEditing:F,newWidgetType:X,widgets:ne,availableWidgetTypes:Y,activeTab:re,setActiveTab:se,setDefaultTab:fe,addTab:ce,renameTab:V,removeTab:G,setTabsFromPayload:M,applyDashboardPreset:B,cycleWidth:K,cycleHeight:oe,moveWidget:ve,removeWidget:S,addWidgetAt:R,reorderWidget:L,updateWidgetOptions:U,resetWidgets:q}=U1({widgetsRegistry:Va,createDefaultTabs:()=>Jo(J.value),normalizeWidgetTabs:Yo,createDashboardPreset:ns,dashboardMode:J,deckEnabled:x,hasInitialLoad:z,queueSaveRef:H}),Q=N(()=>({tabs:v.value,defaultTabId:b.value})),ge=N({get:()=>Q.value,set:Z=>{Z&&M(Z)}}),ue=ie(""),le=ie(null),de=ie({open:!1,x:0,y:0,tabId:null}),ke=ie(null);Ae(()=>j.value,()=>{var Z;le.value||(ue.value=((Z=re.value)==null?void 0:Z.label)||"")},{immediate:!0}),Ae(()=>F.value,Z=>{Z||(le.value=null,de.value={open:!1,x:0,y:0,tabId:null})});function be(Z){if(!F.value){se(Z),ke.value=null;return}if(j.value!==Z){se(Z),le.value=null,ke.value=null;return}le.value=Z;const he=v.value.find(Ve=>Ve.id===Z);ue.value=(he==null?void 0:he.label)||""}function me(Z,he){F.value&&(de.value={open:!0,x:Z.clientX,y:Z.clientY,tabId:he})}function ye(){de.value={open:!1,x:0,y:0,tabId:null}}function Ce(){de.value.tabId&&(fe(de.value.tabId),ye())}function _e(){de.value.tabId&&(G(de.value.tabId),ye())}function Se(){if(!de.value.tabId)return;le.value=de.value.tabId;const Z=v.value.find(he=>he.id===de.value.tabId);ue.value=(Z==null?void 0:Z.label)||"",ye()}function $e(){if(!le.value)return;const Z=ue.value.trim(),he=v.value.find(Ve=>Ve.id===le.value);if(!he){le.value=null;return}if(!Z){ue.value=he.label,le.value=null;return}Z!==he.label&&V(he.id,Z),le.value=null}function Ne(){if(!le.value)return;const Z=v.value.find(he=>he.id===le.value);ue.value=(Z==null?void 0:Z.label)||"",le.value=null}function Oe(Z){ke.value=Number.isFinite(Z??NaN)?Number(Z):null}function We(){if(!X.value)return;const Z=Number.isFinite(ke.value??NaN)?ke.value??void 0:void 0;R(X.value,Z),X.value="",ke.value=null}function ht(){F.value=!F.value,F.value||(le.value=null,de.value={open:!1,x:0,y:0,tabId:null},ke.value=null)}function at(Z){if(!de.value.open)return;const he=Z.target;he&&(he.closest(".tab-context-menu")||he.closest(".tab-btn")||ye())}$t(()=>{typeof window<"u"&&window.addEventListener("click",at)}),wt(()=>{typeof window<"u"&&window.removeEventListener("click",at)});const{calendars:Fe,colorsByName:st,colorsById:zt,groupsById:Ge,selected:ot,isLoading:qe,isTruncated:Rt,truncLimits:_t,uid:Re,from:Ue,to:ft,stats:xt,byCal:ta,byDay:Na,charts:ka,targetsWeek:Ft,targetsMonth:jt,targetsConfig:je,onboarding:et,load:Ia,themePreference:er,reportingConfig:Ba,deckSettings:aa}=a1({range:s,offset:c,userChangedSelection:h,route:Z=>p(Z),getJson:d,notifyError:a,scheduleDraw:m,fetchNotes:A,isDebug:Fs,fetchDavColors:$,widgetTabs:ge});Ae(()=>aa.value.enabled,Z=>{x.value=Z},{immediate:!0});const{deckCards:en,deckLoading:bs,deckError:tn}=R1({from:Ue,to:ft,notifyError:a}),{deckFilter:tr,deckSummaryBuckets:an,deckTickerConfig:ys,deckUrl:ws}=j1({deckSettings:aa,deckCards:en,uid:Re,root:C}),ks=Z=>{tr.value=ps(Z)},po=et,{themePreference:ho,effectiveTheme:_s,systemTheme:xs,setThemePreference:ar}=A1({serverPreference:er,route:Z=>p(Z),postJson:f,notifySuccess:t,notifyError:a}),Cs=N(()=>_s.value==="dark"?"opsdash-theme-dark":"opsdash-theme-light");function Ss(Z){Zc(Z||"categories")}const{exportSidebarConfig:$s,importSidebarConfig:on}=B1({selected:ot,groupsById:Ge,targetsWeek:Ft,targetsMonth:jt,targetsConfig:je,themePreference:ho,onboardingState:po,widgetTabs:ge,setThemePreference:ar,postJson:f,route:Z=>p(Z),performLoad:()=>Oa(),notifySuccess:t,notifyError:a}),{queueSave:or}=o1({route:Z=>p(Z),postJson:f,notifyError:a,notifySuccess:t,onReload:()=>Oa(),selected:ot,groupsById:Ge,targetsWeek:Ft,targetsMonth:jt,targetsConfig:je,themePreference:ho,reportingConfig:Ba,deckSettings:aa,widgetTabs:ge});H.value=or;const{presets:ee,presetsLoading:te,presetSaving:we,presetApplying:rt,presetWarnings:He,refreshPresets:Ut,savePreset:rr,loadPreset:mo,deletePreset:nr,clearPresetWarnings:Ts}=s1({route:(Z,he)=>p(Z,he),getJson:d,postJson:f,deleteJson:y,notifyError:a,notifySuccess:t,queueSave:or,selected:ot,groupsById:Ge,targetsWeek:Ft,targetsMonth:jt,targetsConfig:je,themePreference:ho,setThemePreference:ar,reportingConfig:Ba,deckSettings:aa,widgetTabs:ge,userChangedSelection:h}),Yc=z1({onboardingState:po,route:Z=>p(Z),postJson:f,notifySuccess:t,notifyError:a,setThemePreference:ar,savePreset:rr,reloadAfterPersist:()=>Oa(),setSelected:Z=>{ot.value=[...Z]},setTargetsWeek:Z=>{Ft.value={...Z}},setTargetsMonth:Z=>{jt.value={...Z}},setTargetsConfig:Z=>{je.value=ua(Z)},setGroupsById:Z=>{Ge.value={...Z}},setDeckSettings:Z=>{aa.value={...Z}},setReportingConfig:Z=>{Ba.value={...Z}},setOnboardingState:Z=>{et.value={...et.value||{},...Z}},setDashboardMode:Z=>{J.value=Z},setWidgetTabs:Z=>{M(Z)}}),{autoWizardNeeded:Bx,onboardingRunId:Ox,onboardingWizardVisible:Px,openWizardFromSidebar:Zc,wizardStartStep:Fx,hasExistingConfig:Hx,wizardCalendars:Wx,wizardInitialSelection:zx,wizardInitialStrategy:Rx,wizardInitialAllDayHours:jx,wizardInitialTotalHours:Ux,wizardInitialTargetsConfig:Vx,wizardInitialDeckSettings:Kx,wizardInitialReportingConfig:qx,wizardInitialDashboardMode:Gx,wizardInitialCategories:Jx,wizardInitialAssignments:Yx,isOnboardingSaving:Zx,isSnapshotSaving:Xx,snapshotNotice:Qx,evaluateOnboarding:Xc,handleWizardComplete:eC,handleWizardSkip:tC,handleWizardClose:aC,handleWizardSaveSnapshot:oC}=D1({onboardingState:po,calendars:Fe,selected:ot,groupsById:Ge,targetsConfig:je,deckSettings:aa,reportingConfig:Ba,hasInitialLoad:z,actions:Yc}),rC=async Z=>{await eC(Z),Z!=null&&Z.dashboardMode&&B(Z.dashboardMode)},nC=async Z=>{Z!=null&&Z.dashboardMode&&B(Z.dashboardMode),await Yc.saveStep(Z)};async function Oa(){await Ia(),z.value||(z.value=!0),Xc()}const{showCollapsedRangeControls:sC,rangeToggleLabel:lC,rangeDateLabel:Ms,loadCurrent:Qc,toggleRangeCollapsed:As,goPrevious:Ds,goNext:Es}=E1({navOpen:o,range:s,offset:c,from:Ue,to:ft,isLoading:qe,performLoad:()=>Oa()}),{shortcutsOpen:iC,closeShortcuts:cC,shortcutGroups:dC}=W1({goPrevious:Ds,goNext:Es,toggleRange:As,saveNotes:()=>O(),openConfigPanel:()=>i(),toggleEditLayout:()=>{F.value=!F.value},openWidgetOptions:()=>{var Z,he;F.value&&((he=(Z=ad.value)==null?void 0:Z.openOptionsForSelected)==null||he.call(Z))},ensureSidebarVisible:i,onOpen:({source:Z})=>G1("shortcuts_opened",{source:Z})}),ed=ie("active"),td=N(()=>s.value==="month"?"Month":"Week"),ad=ie(null);function uC(Z){const he=new Date(Date.UTC(Z.getFullYear(),Z.getMonth(),Z.getDate())),Ve=he.getUTCDay()||7;he.setUTCDate(he.getUTCDate()+4-Ve);const Te=new Date(Date.UTC(he.getUTCFullYear(),0,1));return Math.ceil(((he.getTime()-Te.getTime())/864e5+1)/7)}const fC=N(()=>{const Z=new Date(Ue.value);return Number.isFinite(Z.getTime())?s.value==="month"?`MONTH ${Z.getMonth()+1}`:`WEEK ${uC(Z)}`:s.value.toUpperCase()}),gC=N(()=>Ms.value),Ls=N(()=>{const Z=ua(je.value);return s.value==="month"&&(Z.totalHours=ya(Z.totalHours),Z.categories=Z.categories.map(he=>({...he,targetHours:ya(he.targetHours)}))),Z}),od=N(()=>{const Z=Ls.value;try{return Qi({config:Z,stats:xt,byDay:Na.value||[],byCal:ta.value||[],groupsById:Ge.value||{},range:s.value,from:Ue.value,to:ft.value})}catch(he){return console.error("[opsdash] targets summary failed",he),Xi(Z)}}),Ns=N(()=>{if(s.value==="month"){const Z=jt.value||{};if(Z&&Object.keys(Z).length>0)return Z;const he=Ft.value||{},Ve={};return Object.entries(he).forEach(([Te,Ct])=>{const gt=Number(Ct);Number.isFinite(gt)&&(Ve[Te]=ya(gt))}),Ve}return Ft.value||{}}),Is=N(()=>{var Z;return{...Zi(),...((Z=je.value)==null?void 0:Z.activityCard)??{}}}),Bs=N(()=>{var Ve;const Z=lo(),he=((Ve=je.value)==null?void 0:Ve.balance)??Z;return{...Z,...he,thresholds:{...Z.thresholds,...he.thresholds??{}},relations:{...Z.relations,...he.relations??{}},trend:{...Z.trend,...he.trend??{}},dayparts:{...Z.dayparts,...he.dayparts??{}},ui:{...Z.ui,...he.ui??{}}}}),pC=N(()=>({showNotes:!!Bs.value.ui.showNotes})),hC=N(()=>{var Z;return Math.max(1,Math.min(6,((Z=Bs.value.trend)==null?void 0:Z.lookbackWeeks)??1))}),mC=N(()=>{if(!Bs.value.ui.showNotes)return"";const Z=(P.value??"").trim();return Z||(T.value??"").trim()}),{categoryLabelById:vC,categoryColorMap:rd,calendarCategoryMap:Os,calendarGroups:rn}=k1({calendars:Fe,selected:ot,groupsById:Ge,colorsById:zt,targetsConfig:Ls,targetsSummary:od,byCal:ta,currentTargets:Ns,isDebug:Fs}),{balanceOverview:bC}=x1({stats:xt,categoryColorMap:rd});N(()=>{var Ve,Te;if(!Is.value.showHint)return"";const he=(Array.isArray((Te=(Ve=je.value)==null?void 0:Ve.balance)==null?void 0:Te.categories)?je.value.balance.categories:[]).map(Ct=>{const gt=String(Ct??"").trim();if(!gt)return"";const _a=vC.value[gt];return _a||gt.toUpperCase()}).filter(Ct=>Ct);return he.length?`Mapping via Sidebar  ${he.join(" / ")}`:""});const{calendarChartData:Ps,categoryChartsById:yC}=g1({charts:ka,colorsById:zt,calendarGroups:rn,calendarCategoryMap:Os,targetsConfig:Ls,currentTargets:Ns,activityCardConfig:Is}),wC=N(()=>{var Ct;const Z=(Ct=Ps.value)==null?void 0:Ct.stacked;if(!Z||!Array.isArray(Z.labels)||!Array.isArray(Z.series))return{};const he=sd(new Date),Ve=Z.labels.findIndex(gt=>String(gt??"")===he);if(Ve<0)return{};const Te={};return Z.series.forEach(gt=>{var vo;const _a=String((gt==null?void 0:gt.id)??""),oa=Number(((vo=gt==null?void 0:gt.data)==null?void 0:vo[Ve])??0),Hs=Number.isFinite(oa)?Math.max(0,oa):0;_a&&(Te[_a]=(Te[_a]||0)+Hs)}),Te}),kC=N(()=>{var _a;const Z=(_a=Ps.value)==null?void 0:_a.stacked,he=Z==null?void 0:Z.labels,Ve=Z==null?void 0:Z.series;if(!Z||!Array.isArray(he)||!Array.isArray(Ve))return{};const Te=sd(new Date),Ct=he.findIndex(oa=>String(oa??"")===Te);if(Ct<0)return{};const gt={};return Ve.forEach(oa=>{var id,cd;const Hs=String((oa==null?void 0:oa.id)??""),vo=(id=Os.value)==null?void 0:id[Hs];if(!vo)return;const ld=Number(((cd=oa==null?void 0:oa.data)==null?void 0:cd[Ct])??0),NC=Number.isFinite(ld)?Math.max(0,ld):0;gt[vo]=(gt[vo]||0)+NC}),gt}),_C=N(()=>rn.value.map(Z=>({...Z,todayHours:kC.value[Z.id]||0}))),xC=N(()=>{const Z=rn.value||[];return Z.length&&[...Z].sort((Ve,Te)=>(Te.summary.actualHours||0)-(Ve.summary.actualHours||0))[0]||null}),{timeSummary:CC,activitySummary:SC,activityDayOffTrend:$C}=_1({stats:xt,byDay:Na,charts:ka,calendars:Fe,selected:ot,rangeLabel:td,rangeStart:Ue,rangeEnd:ft,offset:c,activeDayMode:ed,topCategory:xC});O1();function Fs(){return!1}const{appVersion:nd}=u1({pingUrl:()=>p("ping"),getJson:d,pkgVersion:String(J1.version),root:C}),{notesLabelPrev:TC,notesLabelCurr:MC,notesLabelPrevTitle:AC,notesLabelCurrTitle:DC}=P1(s),{widgetContext:EC}=q1({timeSummary:CC,activeDayMode:ed,targetsSummary:od,targetsConfig:je,stats:xt,byDay:Na,byCal:ta,groupsById:Ge,calendarGroupsWithToday:_C,balanceOverview:bC,balanceCardConfig:pC,rangeLabel:td,range:s,offset:c,from:Ue,to:ft,trendLookbackWeeks:hC,balanceNote:mC,activitySummary:SC,activityCardConfig:Is,activityDayOffTrend:$C,deckSummaryBuckets:an,deckLoading:bs,deckError:tn,deckTickerConfig:ys,deckFilter:tr,setDeckFilter:ks,deckSettings:aa,deckUrl:ws,deckCards:en,uid:Re,notesPrev:T,notesCurrDraft:P,notesHistory:I,notesLabelPrev:TC,notesLabelCurr:MC,notesLabelPrevTitle:AC,notesLabelCurrTitle:DC,isSavingNote:w,saveNotes:O,isLoading:qe,hasInitialLoad:z,isLayoutEditing:F,updateWidgetOptions:U,charts:ka,calendarChartData:Ps,categoryChartsById:yC,calendarGroups:rn,calendarCategoryMap:Os,categoryColorMap:rd,colorsById:zt,colorsByName:st,currentTargets:Ns,calendarTodayHours:wC}),LC=N(()=>J.value==="quick"?"Quick preset":J.value==="pro"?"Pro preset":"Standard preset");function sd(Z){const he=Z.getFullYear(),Ve=`${Z.getMonth()+1}`.padStart(2,"0"),Te=`${Z.getDate()}`.padStart(2,"0");return`${he}-${Ve}-${Te}`}return V1({performLoad:Oa,refreshPresets:Ut,range:s,offset:c,onboardingState:po,hasInitialLoad:z,evaluateOnboarding:Xc,dashboardMode:J}),(Z,he)=>{const Ve=Cu("NcAppSidebarToggle");return k(),_("div",{id:"opsdash",class:Be(["opsdash",[{"is-nav-collapsed":!D(o)},Cs.value]])},[(k(),lt(Pm,{key:D(Ox),visible:D(Px),calendars:D(Wx),"initial-selection":D(zx),"initial-strategy":D(Rx),"onboarding-version":D(Ea),closable:!D(Bx),"initial-theme-preference":D(ho),"system-theme":D(xs),"initial-all-day-hours":D(jx),"initial-total-hours":D(Ux),"initial-targets-config":D(Vx),"initial-targets-week":D(Ft),"initial-deck-settings":D(Kx),"initial-reporting-config":D(qx),"initial-dashboard-mode":D(Gx),"initial-categories":D(Jx),"initial-assignments":D(Yx),"start-step":D(Fx),"has-existing-config":D(Hx),saving:D(Zx),"snapshot-saving":D(Xx),"snapshot-notice":D(Qx),onClose:D(aC),onSkip:D(tC),onComplete:rC,onSaveCurrentConfig:D(oC),onSaveStep:nC},null,8,["visible","calendars","initial-selection","initial-strategy","onboarding-version","closable","initial-theme-preference","system-theme","initial-all-day-hours","initial-total-hours","initial-targets-config","initial-targets-week","initial-deck-settings","initial-reporting-config","initial-dashboard-mode","initial-categories","initial-assignments","start-step","has-existing-config","saving","snapshot-saving","snapshot-notice","onClose","onSkip","onSaveCurrentConfig"])),Me(D(Jf),{"app-name":"Operational Dashboard","show-navigation":D(o)},{navigation:Xe(()=>[Me(Ig,{id:"opsdash-sidebar","is-loading":D(qe),range:s.value,offset:c.value,from:D(Ue),to:D(ft),"nav-toggle-label":D(n),"nav-toggle-icon":D(l),presets:D(ee),"presets-loading":D(te),"preset-saving":D(we),"preset-applying":D(rt),"preset-warnings":D(He),"dashboard-mode":J.value,onLoad:Oa,"onUpdate:range":he[0]||(he[0]=Te=>{s.value=Te,c.value=0,Oa()}),"onUpdate:offset":he[1]||(he[1]=Te=>{c.value=Te,Oa()}),onToggleNav:D(r),onSavePreset:D(rr),onLoadPreset:D(mo),onDeletePreset:D(nr),onRefreshPresets:D(Ut),onClearPresetWarnings:D(Ts),onRerunOnboarding:D(Zc),onExportConfig:D($s),onImportConfig:D(on)},null,8,["is-loading","range","offset","from","to","nav-toggle-label","nav-toggle-icon","presets","presets-loading","preset-saving","preset-applying","preset-warnings","dashboard-mode","onToggleNav","onSavePreset","onLoadPreset","onDeletePreset","onRefreshPresets","onClearPresetWarnings","onRerunOnboarding","onExportConfig","onImportConfig"])]),"sidebar-toggle":Xe(()=>[Me(Ve,{open:D(o),onToggle:D(r)},null,8,["open","onToggle"])]),default:Xe(()=>[g("div",Y1,[g("div",Z1,[g("div",X1,[D(sC)?(k(),_("div",Q1,[g("button",{class:"range-toolbar__btn range-toolbar__btn--icon",type:"button",onClick:he[2]||(he[2]=(...Te)=>D(r)&&D(r)(...Te)),"aria-expanded":D(o),"aria-controls":"opsdash-sidebar","aria-label":D(n)},W(D(l)),9,e0),g("button",{class:"range-toolbar__btn range-toolbar__btn--pill",type:"button",disabled:D(qe),onClick:he[3]||(he[3]=(...Te)=>D(As)&&D(As)(...Te)),"aria-pressed":s.value==="month"},W(D(lC)),9,t0),g("div",a0,[g("button",{class:"range-toolbar__btn",type:"button",disabled:D(qe),onClick:he[4]||(he[4]=(...Te)=>D(Ds)&&D(Ds)(...Te))},"  ",8,o0),g("span",{class:"range-toolbar__label",title:D(Ms)},W(D(Ms)),9,r0),g("button",{class:"range-toolbar__btn",type:"button",disabled:D(qe),onClick:he[5]||(he[5]=(...Te)=>D(Es)&&D(Es)(...Te))},"  ",8,n0)]),g("button",{class:"range-toolbar__btn range-toolbar__btn--refresh",type:"button",disabled:D(qe),onClick:he[6]||(he[6]=(...Te)=>D(Qc)&&D(Qc)(...Te))}," Refresh ",8,s0)])):ae("",!0),D(Rt)?(k(),_("div",{key:1,class:"banner warn",title:u.value},[he[13]||(he[13]=Pe(" Showing partial data to keep things fast. ",-1)),D(_t)&&D(_t).totalProcessed!=null?(k(),_(pe,{key:0},[Pe(" Processed "+W(D(_t).totalProcessed)+" items. ",1)],64)):ae("",!0)],8,l0)):ae("",!0),g("div",i0,[g("div",c0,[(k(!0),_(pe,null,xe(D(v),Te=>(k(),_("button",{key:Te.id,type:"button",class:Be(["tab-btn",{active:Te.id===D(j),default:Te.id===D(b)}]),role:"tab","aria-selected":Te.id===D(j),onClick:Ct=>be(Te.id),onContextmenu:it(Ct=>me(Ct,Te.id),["prevent"])},[D(F)&&le.value===Te.id?to((k(),_("input",{key:0,class:"tab-input","onUpdate:modelValue":he[7]||(he[7]=Ct=>ue.value=Ct),onBlur:$e,onKeydown:[so(it($e,["prevent"]),["enter"]),so(it(Ne,["prevent"]),["esc"])],onClick:he[8]||(he[8]=it(()=>{},["stop"]))},null,40,u0)),[[Vi,ue.value]]):(k(),_(pe,{key:1},[g("span",f0,W(Te.label),1),Te.id===D(b)?(k(),_("span",g0,"Default")):ae("",!0)],64))],42,d0))),128)),D(F)?(k(),_("button",{key:0,type:"button",class:"tab-btn tab-btn--add",onClick:he[9]||(he[9]=Te=>D(ce)())}," + Tab ")):ae("",!0)]),g("div",p0,[g("button",{type:"button",class:"ghost-btn ghost-btn--edit",onClick:ht},[he[14]||(he[14]=g("span",{class:"ghost-btn__icon","aria-hidden":"true"},"",-1)),Pe(" "+W(D(F)?"Done editing":"Edit layout"),1)]),g("span",h0,[g("span",{class:"range-badge__mode",textContent:W(fC.value)},null,8,m0),g("span",{class:"range-badge__span",textContent:W(gC.value)},null,8,v0)]),D(F)?(k(),_("div",b0,[to(g("select",{"onUpdate:modelValue":he[10]||(he[10]=Te=>dt(X)?X.value=Te:null),onChange:We},[he[15]||(he[15]=g("option",{value:"",disabled:""},"Select widget",-1)),(k(!0),_(pe,null,xe(D(Y),Te=>(k(),_("option",{key:Te.type,value:Te.type},W(Te.label),9,y0))),128))],544),[[Ki,D(X)]]),g("button",{type:"button",class:"ghost-btn",onClick:he[11]||(he[11]=(...Te)=>D(q)&&D(q)(...Te))}," Reset ")])):ae("",!0)])]),de.value.open?(k(),_("div",{key:2,class:"tab-context-menu",style:Ee({top:`${de.value.y}px`,left:`${de.value.x}px`}),role:"menu"},[g("button",{type:"button",role:"menuitem",onClick:Ce},"Set as default"),g("button",{type:"button",role:"menuitem",onClick:Se},"Rename"),g("button",{type:"button",role:"menuitem",disabled:D(v).length<=1,onClick:_e}," Remove ",8,w0)],4)):ae("",!0),g("div",k0,[Me(Jy,{ref_key:"layoutRef",ref:ad,widgets:D(ne),context:D(EC),editable:D(F),"widget-types":D(Y),"preset-label":LC.value,"onEdit:width":D(K),"onEdit:height":D(oe),"onEdit:remove":D(S),"onEdit:move":D(ve),"onEdit:options":D(U),"onEdit:add":D(R),"onEdit:reorder":D(L),"onOpen:onboarding":Ss,"onReset:preset":he[12]||(he[12]=Te=>D(B)(J.value.value)),"onSelect:cell":Oe},null,8,["widgets","context","editable","widget-types","preset-label","onEdit:width","onEdit:height","onEdit:remove","onEdit:move","onEdit:options","onEdit:add","onEdit:reorder"])]),g("div",_0,[D(nd)?(k(),_(pe,{key:0},[Pe(" Operational Dashboard  v"+W(D(nd))+"  Built by Blade34242 @ Gellert Innovation ",1)],64)):(k(),_(pe,{key:1},[Pe(" Operational Dashboard  v0.4.4  Built by Blade34242 @ Gellert Innovation ")],64))])])])])]),_:1},8,["show-navigation"]),Me(Um,{visible:D(iC),groups:D(dC),onClose:D(cC)},null,8,["visible","groups","onClose"])],2)}}});function vs(){const e=document.getElementById("app");if(e){try{console.log("[opsdash] booting");const t=Kf(x0);t.config.errorHandler=(r,n,l)=>{const i=n!=null&&n.type&&n.type.name?n.type.name:"",s={err:r,info:l,name:i,stack:r instanceof Error?r.stack:void 0},c=window;Array.isArray(c.__opsdashErrors)||(c.__opsdashErrors=[]),c.__opsdashErrors.push(s),console.error("[opsdash] Vue error",s)};const a=t.mount(e),o=window;o.__opsdashApp=t,o.__opsdashRoot=a,Zy(),console.log("[opsdash] mounted")}catch(t){console.error("Mount failed",t)}return}document.readyState==="complete"||document.readyState==="interactive"?setTimeout(vs,50):window.addEventListener("DOMContentLoaded",vs,{once:!0})}vs();const C0={key:0,class:"title-row"},S0={class:"title"},$0={key:0,class:"pill"},T0=["title"],M0={class:"index-badge__ring","aria-hidden":"true"},A0={class:"index-badge__value"},D0={class:"index-badge__meta"},E0={key:0,class:"index-badge__range"},L0={key:0,class:"trend"},N0=["title"],I0={class:"trend-line-row"},B0={class:"trend-value"},O0={class:"trend-range"},P0={class:"trend-offset"},F0={key:1,class:"messages"},H0={key:2,class:"config"},W0={key:3,class:"empty"},z0=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"BalanceIndexCard",props:{overview:{},rangeLabel:{},showBadge:{type:Boolean},showTrend:{type:Boolean},showMessages:{type:Boolean},showConfig:{type:Boolean},messageLimit:{},lookbackWeeks:{},loopbackCount:{},indexBasis:{},showCurrent:{type:Boolean,default:!0},labelMode:{},reverseTrend:{type:Boolean},from:{},to:{},rangeMode:{},thresholds:{},title:{},cardBg:{},showHeader:{type:Boolean},targetsCategories:{},trendColor:{}},setup(e){const t=e,a=N(()=>t.title||"Balance Index"),o=N(()=>t.showHeader!==!1),r=N(()=>(t.rangeMode||"").toLowerCase()==="month"?"mo":"wk"),n=N(()=>{var V,G,M;return Array.isArray((G=(V=t.overview)==null?void 0:V.trend)==null?void 0:G.history)?t.overview.trend.history:Array.isArray((M=t.overview)==null?void 0:M.trendHistory)?t.overview.trendHistory:[]}),l=N(()=>{const V=Number.isFinite(t.lookbackWeeks)?Number(t.lookbackWeeks):Number.isFinite(t.loopbackCount)?Number(t.loopbackCount):null;if(V!=null)return Math.max(0,Math.min(6,Math.floor(V)));const G=n.value.filter(M=>Number((M==null?void 0:M.offset)??0)>0);return Math.max(0,Math.min(6,G.length))}),i=N(()=>{const V=new Map,G=t.targetsCategories||[],M=t.indexBasis;return n.value.forEach((B,K)=>{const oe=Number((B==null?void 0:B.offset)??(B==null?void 0:B.step)),ve=Number.isFinite(oe)&&oe>0?Math.round(oe):K+1,S={};Array.isArray(B==null?void 0:B.categories)&&B.categories.forEach(ge=>{S[String(ge.id)]=Number(ge.share??0)});const R=Object.values(S),L=R.length?Math.max(...R):0,U=R.reduce((ge,ue)=>ge+ue,0);(L>1||U>1.5)&&Object.keys(S).forEach(ge=>{S[ge]=S[ge]/100});const q=Object.values(S).reduce((ge,ue)=>ge+ue,0);q>1.0001&&q>0&&Object.keys(S).forEach(ge=>{S[ge]=S[ge]/q});const Q=Ac({shares:S,targets:G,basis:M});V.set(ve,{index:Q,label:(B==null?void 0:B.label)||""})}),V}),s=N(()=>{var M;const V=[],G=l.value;for(let B=G;B>=1;B-=1){const K=i.value.get(B);V.push({offset:B,index:K==null?void 0:K.index,label:(K==null?void 0:K.label)||`-${B} ${r.value}`})}return V.push({offset:0,index:typeof((M=t.overview)==null?void 0:M.index)=="number"?t.overview.index:void 0,label:t.rangeLabel||""}),V}),c=N(()=>t.showCurrent!==!1),u=N(()=>{let V=s.value.slice();return c.value||(V=V.filter(G=>((G==null?void 0:G.offset)??0)!==0)),t.reverseTrend?V.slice().reverse():V}),h=N(()=>u.value.length>0),m=N(()=>{var V;return((V=t.overview)==null?void 0:V.warnings)||[]}),p=N(()=>{const V=m.value,G=Number.isFinite(t.messageLimit)?Number(t.messageLimit):1/0;return!Number.isFinite(G)||G<=0?V:V.slice(0,G)}),d=N(()=>({background:t.cardBg||void 0})),f=N(()=>{var M,B,K,oe,ve;const V=lo(),G={noticeAbove:((M=t.thresholds)==null?void 0:M.noticeAbove)??V.thresholds.noticeAbove,noticeBelow:((B=t.thresholds)==null?void 0:B.noticeBelow)??V.thresholds.noticeBelow,warnAbove:((K=t.thresholds)==null?void 0:K.warnAbove)??V.thresholds.warnAbove,warnBelow:((oe=t.thresholds)==null?void 0:oe.warnBelow)??V.thresholds.warnBelow,warnIndex:((ve=t.thresholds)==null?void 0:ve.warnIndex)??V.thresholds.warnIndex};return{basis:t.indexBasis||V.index.basis,...G}}),y=N(()=>{const V=t.showTrend===!1||!h.value,G=t.showMessages===!1||p.value.length===0,M=t.showConfig===!1;return V&&G&&M}),C=N(()=>{const V=l.value;if(V<=0)return"";const G=r.value==="mo"?"month":"week";return`Last ${V} ${V===1?G:`${G}s`}`}),$=N(()=>{var M;const V=(M=t.overview)==null?void 0:M.index,G=typeof V=="number"?V:Number(V??NaN);return Number.isFinite(G)?Math.max(0,Math.min(1,G)):null}),E=N(()=>I($.value??void 0)),T=N(()=>{const V=$.value;if(V==null)return{};const G=Math.round(V*100);let M="#dc2626";return V>=.8?M="#16a34a":V>=.65&&(M="#f59e0b"),{"--index-fill":`${G}%`,"--index-color":M}}),P=N(()=>$.value==null?"":`Balance index ${$.value.toFixed(2)}`),I=V=>Number.isFinite(V)?V.toFixed(2):"",w=N(()=>t.trendColor||"#2563EB"),A=N(()=>{const V=(t.labelMode||"period").toString().toLowerCase();return V==="date"||V==="offset"?V:"period"}),O=N(()=>({gridTemplateColumns:`repeat(auto-fit, minmax(${A.value==="date"?108:88}px, 1fr))`}));function z(V,G){const M=V.replace("#",""),B=parseInt(M.substring(0,2),16),K=parseInt(M.substring(2,4),16),oe=parseInt(M.substring(4,6),16),ve=S=>Math.max(0,Math.min(255,Math.round(S*(1-G))));return`rgb(${ve(B)}, ${ve(K)}, ${ve(oe)})`}const J=V=>{const G=w.value,M=u.value[V],B=Number((M==null?void 0:M.index)??0),K=Math.min(1,Math.max(0,1-B)),oe=z(G,K*.6);return{background:oe,boxShadow:V===0?`0 0 0 2px color-mix(in oklab, ${oe}, #ffffff 60%)`:void 0}},H=V=>{if(A.value!=="date")return"";const G=u.value[V],M=((G==null?void 0:G.offset)??0)===0;return(G==null?void 0:G.label)||M&&t.rangeLabel||""},x=V=>!!H(V),v=V=>{var M;if(A.value!=="offset")return"";const G=((M=u.value[V])==null?void 0:M.offset)??V;return G===0?"Current":`-${G}`},b=V=>{var B;if(A.value!=="date")return"";const G=H(V);return G||((((B=u.value[V])==null?void 0:B.offset)??V)===0&&t.rangeLabel?t.rangeLabel:"")};function j(V){const G=new Date(Date.UTC(V.getFullYear(),V.getMonth(),V.getDate())),M=G.getUTCDay()||7;G.setUTCDate(G.getUTCDate()+4-M);const B=new Date(Date.UTC(G.getUTCFullYear(),0,1));return Math.ceil(((G.getTime()-B.getTime())/864e5+1)/7)}const F=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"2-digit"});function X(V,G){const M=new Date(V);return M.setDate(M.getDate()+G),M}function ne(V,G){const M=new Date(V);return M.setMonth(M.getMonth()+G),M}function Y(V){return new Date(V.getFullYear(),V.getMonth()+1,0)}function re(V){return V?/^-\d+\s*(wk|mo)$/i.test(V.trim()):!0}function se(V,G){if(!V||!G)return"";const M=F.format(V),B=F.format(G);return M===B?M:`${M}${B}`}function fe(V){var S,R;const G=((S=u.value[V])==null?void 0:S.offset)??V;if(!t.from||!t.to){const L=(R=u.value[V])==null?void 0:R.label;return re(L)?"":L||""}const M=(t.rangeMode||"").toLowerCase(),B=new Date(t.from),K=new Date(t.to);if(Number.isNaN(B.getTime())||Number.isNaN(K.getTime()))return"";if(M==="month"){const L=ne(B,-G),U=Y(L);return se(L,U)}const oe=X(B,-7*G),ve=X(K,-7*G);return se(oe,ve)}function ce(V){var S;const G=((S=u.value[V])==null?void 0:S.offset)??V,M=(t.rangeMode||"").toLowerCase();if(!t.from)return G===0?"Current":`- ${G} wk`;const B=M==="month"?ne(new Date(t.from),-G):X(new Date(t.from),-7*G);if(Number.isNaN(B.getTime()))return G===0?"Current":`- ${G} wk`;if(M==="month"){B.getMonth()+1;const R=new Date(B),L=new Date(t.from).getMonth()+1;return`MONTH ${G===0?L:R.getMonth()+1}`}const K=j(B),oe=j(new Date(t.from));return`WEEK ${G===0?oe:K}`}return(V,G)=>(k(),_("div",{class:"balance-card",style:Ee(d.value)},[g("div",{class:Be(["header",{compact:y.value}])},[o.value?(k(),_("div",C0,[g("span",S0,W(a.value),1),C.value&&V.showTrend?(k(),_("span",$0,W(C.value),1)):ae("",!0)])):ae("",!0),V.overview?(k(),_("div",{key:1,class:Be(["index",{centered:y.value}])},[g("div",{class:"index-badge",style:Ee(T.value),title:P.value},[g("div",M0,[g("span",A0,W(E.value),1)]),g("div",D0,[G[0]||(G[0]=g("div",{class:"index-badge__label"},"Current index",-1)),V.rangeLabel?(k(),_("div",E0,W(V.rangeLabel),1)):ae("",!0)])],12,T0)],2)):ae("",!0)],2),V.showTrend&&h.value?(k(),_("div",L0,[g("div",{class:"trend-line",style:Ee(O.value)},[(k(!0),_(pe,null,xe(u.value,(M,B)=>(k(),_("div",{key:B,class:Be(["trend-block",{current:M.offset===0,"no-range":!x(B)}]),title:M.label||"",style:Ee(J(B))},[g("div",I0,[g("span",B0,W(I(M.index)),1),g("span",O0,W(A.value==="date"?fe(B)||b(B):""),1),g("span",P0,[A.value==="period"?(k(),_(pe,{key:0},[Pe(W(ce(B)),1)],64)):A.value==="offset"?(k(),_(pe,{key:1},[Pe(W(v(B)),1)],64)):ae("",!0)])])],14,N0))),128))],4)])):ae("",!0),V.showMessages&&p.value.length?(k(),_("div",F0,[G[1]||(G[1]=g("div",{class:"section-title"},"Messages",-1)),g("ul",null,[(k(!0),_(pe,null,xe(p.value,(M,B)=>(k(),_("li",{key:B},W(M),1))),128))])])):ae("",!0),V.showConfig?(k(),_("div",H0,[g("div",null,"Basis: "+W(f.value.basis),1),g("div",null,"Notice : +"+W(f.value.noticeAbove??"")+" / -"+W(f.value.noticeBelow??""),1),g("div",null,"Warn : +"+W(f.value.warnAbove??"")+" / -"+W(f.value.warnBelow??""),1),g("div",null,"Warn index: "+W(f.value.warnIndex??""),1)])):ae("",!0),V.overview?ae("",!0):(k(),_("div",W0,"No balance data."))],4))}}),[["__scopeId","data-v-e115cf77"]])},Symbol.toStringTag,{value:"Module"})),R0={key:0,class:"mix-header"},j0={class:"mix-title"},U0={class:"mix-subtitle"},V0={key:0,class:"mix-badge"},K0={class:"mix-column-label mix-column-label--current"},q0={key:2,class:"mix-list"},G0={class:"mix-label"},J0=["title"],Y0={class:"mix-cell__value"},Z0={key:3,class:"hint"},X0=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"CategoryMixTrendCard",props:{overview:{},rangeMode:{},lookbackWeeks:{},showBadge:{type:Boolean},showHeader:{type:Boolean},colorMode:{},density:{},labelMode:{},squareCells:{type:Boolean},rangeLabel:{},from:{},to:{},title:{},cardBg:{},toneLowColor:{},toneHighColor:{},shareLowColor:{},shareHighColor:{}},setup(e){const t=e,a=N(()=>t.showHeader!==!1),o=N(()=>t.density==="dense"?"dense":"normal"),r=N(()=>{const M=(t.labelMode||"period").toString().toLowerCase();return M==="offset"||M==="label"||M==="compact"||M==="date"?M:"period"}),n=N(()=>t.squareCells===!0),l=N(()=>{const M=t.colorMode;return M==="trend"||M==="share"||M==="hybrid"?M:"hybrid"}),i=N(()=>{var M,B;return t.showBadge===!1?"":((B=(M=t.overview)==null?void 0:M.trend)==null?void 0:B.badge)??""}),s=N(()=>t.rangeMode==="month"?"MO":"WE"),c=N(()=>t.rangeMode==="month"?"M":"W"),u=N(()=>Y()),h=N(()=>Math.max(1,Math.min(4,t.lookbackWeeks||1))),m=N(()=>t.title||"Category mix trend"),p=N(()=>({background:t.cardBg||void 0})),d=N(()=>{var B,K,oe;const M=((K=(B=t.overview)==null?void 0:B.trend)==null?void 0:K.history)??((oe=t.overview)==null?void 0:oe.trendHistory)??[];return Array.isArray(M)?M.map(ve=>({offset:Number((ve==null?void 0:ve.offset)??(ve==null?void 0:ve.step)??0)||0,label:String((ve==null?void 0:ve.label)??""),categories:Array.isArray(ve==null?void 0:ve.categories)?ve.categories.map(S=>({id:String((S==null?void 0:S.id)??""),label:String((S==null?void 0:S.label)??""),share:Number((S==null?void 0:S.share)??0)||0})):[]})).filter(ve=>ve.offset>0):[]}),f=M=>`-${M} ${s.value}`,y=(M,B)=>r.value==="label"&&B?B:r.value==="date"?X(M,B)||f(M):r.value==="offset"?`-${M}`:r.value==="compact"?`${c.value}-${M}`:ne(M),C=N(()=>{if(!t.overview)return[];const M=h.value,B=new Map;return d.value.forEach(K=>{const oe=Math.max(1,Math.min(12,Math.round(K.offset)));if(!oe||oe>M)return;const ve={};K.categories.forEach(S=>{S.id&&(ve[S.id]=Number.isFinite(S.share)?S.share:0)}),B.set(oe,{offset:oe,label:y(oe,K.label),shares:ve})}),Array.from(B.values()).sort((K,oe)=>oe.offset-K.offset)}),$=N(()=>C.value.length+1),E=N(()=>({gridTemplateColumns:`minmax(0, var(--mix-label-width, 52px)) repeat(${Math.max($.value,1)}, minmax(0, 1fr))`})),T=N(()=>({gridTemplateColumns:`repeat(${Math.max($.value,1)}, minmax(0, 1fr))`})),P=N(()=>{const M=re(t.toneLowColor)||"#e11d48",B=re(t.toneHighColor)||"#10b981",K=se(M,B,.5);return{down:V(M),flat:V(K),up:V(B)}}),I=N(()=>{const M=re(t.shareLowColor)||"#e2e8f0",B=re(t.shareHighColor)||"#60a5fa";return{low:M,high:B}}),w=M=>{const B=G(M,0,100)/100;return se(I.value.low,I.value.high,B)},A=M=>M>1?"up":M<-1?"down":"flat",O=N(()=>t.overview?(t.overview.categories??[]).map(B=>{const K=C.value.map(R=>({label:R.label,share:R.shares[B.id]??0,isCurrent:!1})),oe=typeof B.share=="number"?B.share:0,ve=[...K,{label:u.value,share:oe,isCurrent:!0}],S=ve.map((R,L)=>{const U=L===0?R.share:ve[L-1].share,q=R.share-U,Q=L===0?"flat":A(q),ge=l.value,ue=P.value[Q],le=w(R.share),de=V(le),ke=ge==="trend"?ue.background:le,be=ge==="trend"?ue.color:de.color;return{label:R.label,share:R.share,isCurrent:!!R.isCurrent,trend:Q,style:{"--mix-bg":ke,"--mix-fg":be,"--mix-accent":ue.background}}});return{id:B.id,label:B.label,cells:S}}):[]),z=N(()=>{var B;const M=h.value;if(M>1){const K=t.rangeMode==="month"?"months":"weeks";return`History  last ${M} ${K}`}return M===1&&C.value.length?((B=C.value[C.value.length-1])==null?void 0:B.label)||f(1):f(M||1)}),J=M=>`${Math.max(0,Math.round(M))}%`,H=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"2-digit"});function x(M,B){const K=new Date(M);return K.setDate(K.getDate()+B),K}function v(M,B){const K=new Date(M);return K.setMonth(K.getMonth()+B),K}function b(M){return new Date(M.getFullYear(),M.getMonth()+1,0)}function j(M){const B=new Date(Date.UTC(M.getFullYear(),M.getMonth(),M.getDate())),K=B.getUTCDay()||7;B.setUTCDate(B.getUTCDate()+4-K);const oe=new Date(Date.UTC(B.getUTCFullYear(),0,1));return Math.ceil(((B.getTime()-oe.getTime())/864e5+1)/7)}function F(M,B){if(!M||!B)return"";const K=H.format(M),oe=H.format(B);return K===oe?K:`${K}${oe}`}function X(M,B){if(!t.from||!t.to)return B||"";const K=(t.rangeMode||"").toLowerCase(),oe=new Date(t.from),ve=new Date(t.to);if(Number.isNaN(oe.getTime())||Number.isNaN(ve.getTime()))return B||"";if(K==="month"){const L=v(oe,-M),U=b(L);return F(L,U)}const S=x(oe,-7*M),R=x(ve,-7*M);return F(S,R)}function ne(M){const B=(t.rangeMode||"").toLowerCase();if(!t.from)return M===0?"Current":B==="month"?`-${M} mo`:`-${M} wk`;const K=B==="month"?v(new Date(t.from),-M):x(new Date(t.from),-7*M);if(Number.isNaN(K.getTime()))return M===0?"Current":B==="month"?`-${M} mo`:`-${M} wk`;if(B==="month"){const S=new Date(t.from).getMonth()+1;return`MONTH ${M===0?S:K.getMonth()+1}`}const oe=j(new Date(t.from));return`WEEK ${M===0?oe:j(K)}`}function Y(){return r.value==="offset"?"Current":r.value==="compact"?"CUR":r.value==="label"?t.rangeLabel||(t.rangeMode==="month"?"This month":"This week"):r.value==="date"?X(0,t.rangeLabel||"")||(t.rangeMode==="month"?"This month":"This week"):ne(0)}function re(M){if(!M||typeof M!="string")return null;const B=M.trim();return/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(B)?B:null}function se(M,B,K=.5){const oe=fe(M),ve=fe(B);if(!oe||!ve)return M;const S=G(Math.round(oe.r+(ve.r-oe.r)*K),0,255),R=G(Math.round(oe.g+(ve.g-oe.g)*K),0,255),L=G(Math.round(oe.b+(ve.b-oe.b)*K),0,255);return`#${[S,R,L].map(U=>U.toString(16).padStart(2,"0")).join("")}`}function fe(M){const B=M.replace("#","");if(B.length===3){const[K,oe,ve]=B.split("").map(S=>parseInt(S.repeat(2),16));return{r:K,g:oe,b:ve}}if(B.length===6){const K=parseInt(B.slice(0,2),16),oe=parseInt(B.slice(2,4),16),ve=parseInt(B.slice(4,6),16);return{r:K,g:oe,b:ve}}return null}function ce(M){const B=fe(M);return B?(.2126*B.r+.7152*B.g+.0722*B.b)/255:0}function V(M){const B=ce(M)>.6?"#0f172a":"#fff";return{background:M,color:B}}function G(M,B,K){return Math.min(K,Math.max(B,M))}return(M,B)=>(k(),_("div",{class:Be(["card mix-card",{"mix-card--no-header":!a.value,"mix-card--dense":o.value==="dense","mix-card--square":n.value}]),style:Ee(p.value)},[a.value?(k(),_("div",R0,[g("div",null,[g("div",j0,W(m.value),1),g("div",U0,W(z.value),1)]),i.value?(k(),_("span",V0,W(i.value),1)):ae("",!0)])):ae("",!0),C.value.length||O.value.length?(k(),_("div",{key:1,class:"mix-columns",style:Ee(E.value)},[B[0]||(B[0]=g("span",{class:"mix-column-label mix-column-label--label"},"CAT",-1)),(k(!0),_(pe,null,xe(C.value,K=>(k(),_("span",{key:`col-${K.offset}`,class:"mix-column-label"},W(K.label),1))),128)),g("span",K0,W(u.value),1)],4)):ae("",!0),O.value.length?(k(),_("ul",q0,[(k(!0),_(pe,null,xe(O.value,K=>(k(),_("li",{key:K.id,class:"mix-row"},[g("span",G0,W(K.label)+":",1),g("div",{class:"mix-cells",style:Ee(T.value)},[(k(!0),_(pe,null,xe(K.cells,(oe,ve)=>(k(),_("div",{key:`${K.id}-cell-${ve}`,class:Be(["mix-cell",[`mix-cell--trend-${oe.trend}`,`mix-cell--mode-${l.value}`,{"mix-cell--current":oe.isCurrent}]]),style:Ee(oe.style),title:`${K.label}  ${oe.label}  ${J(oe.share)}`},[g("span",Y0,W(J(oe.share)),1)],14,J0))),128))],4)]))),128))])):(k(),_("div",Z0,"No category mix history."))],6))}}),[["__scopeId","data-v-9b471bde"]])},Symbol.toStringTag,{value:"Module"}));function fo(e){if(!e)return null;const t=window.devicePixelRatio||1,a=e.getBoundingClientRect();if(a.width<2||a.height<2)return null;const o=Math.floor(a.width*t),r=Math.floor(a.height*t);e.width!==o&&(e.width=o),e.height!==r&&(e.height=r);const n=e.getContext("2d");return n?(n.setTransform(t,0,0,t,0,0),n):null}function Pt(e,t,a){var l;if(typeof document>"u")return a;const o=((l=e==null?void 0:e.closest)==null?void 0:l.call(e,"#opsdash"))??document.getElementById("opsdash"),r=o?getComputedStyle(o):null;return(r==null?void 0:r.getPropertyValue(t).trim())||a}function go(e){const t=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(e||"");return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Kc(e,t,a){const o=n=>Math.max(0,Math.min(255,Math.round(n))),r=n=>o(n).toString(16).padStart(2,"0");return`#${r(e)}${r(t)}${r(a)}`}function qc(e){const a=Math.pow((p=>p<0?0:p>1?1:p)(e),.6),o=typeof document<"u"?document.getElementById("opsdash"):null,r=o?getComputedStyle(o):null,n=(r==null?void 0:r.getPropertyValue("--heatmap-low").trim())||"#e0f2fe",l=(r==null?void 0:r.getPropertyValue("--heatmap-high").trim())||"#7c3aed",i=go(n),s=go(l);if(!i||!s)return"#7c3aed";const c=(p,d,f)=>Math.round(p+(d-p)*f),u=c(i.r,s.r,a),h=c(i.g,s.g,a),m=c(i.b,s.b,a);return`rgb(${u}, ${h}, ${m})`}const Q0=Le({__name:"GroupedBars",props:{data:{},showLabels:{type:Boolean},xLabel:{},yLabel:{}},setup(e){const t=e,a=ie(null);let o=null,r=null;function n(s){const c=Math.max(0,Number(s)||0);return(Math.round(c*10)/10).toFixed(1)}function l(){const s=a.value;if(!s||!t.data)return;const c=fo(s);if(!c)return;const u=getComputedStyle(s),h=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-scale"))||1),m=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-space"))||h),p=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-density"))||1),d=h*p,f=s.clientWidth,y=s.clientHeight,C=28*m,$=C*1.4,E=y-C,T=f-C,P=Pt(s,"--line","#e5e7eb"),I=Pt(s,"--fg","#0f172a");c.clearRect(0,0,f,y),c.strokeStyle=P,c.lineWidth=1,c.beginPath(),c.moveTo($,E),c.lineTo(T,E),c.moveTo($,E),c.lineTo($,C),c.stroke(),c.fillStyle=I,c.font=`${12*d}px ui-sans-serif,system-ui`;const w=String(t.xLabel??"").trim();if(w){const Y=c.measureText(w).width,re=Math.min(y-6*d,E+18*d);c.fillText(w,$+(T-$)/2-Y/2,re)}const A=String(t.yLabel??"").trim();A&&c.fillText(A,6*m,C*.8);const O=(t.data.labels||[]).map(Y=>String(Y??"")),z=Array.isArray(t.data.series)?t.data.series:[];if(!O.length||!z.length)return;const J=[];z.forEach(Y=>{(Array.isArray(Y.data)?Y.data:[]).forEach(se=>J.push(Math.max(0,Number(se)||0)))});const H=Math.max(1,...J),x=O.length,v=Math.max(1,z.length),b=10*m,j=4*m,F=Math.max(12*m,(T-$-b*(x+1))/x),X=Math.max(4*m,(F-j*(v-1))/v),ne=(E-C)/H;O.forEach((Y,re)=>{const se=$+b+re*(F+b);if(z.forEach((fe,ce)=>{var K;const V=Math.max(0,Number(((K=fe==null?void 0:fe.data)==null?void 0:K[re])??0)),G=Math.max(0,V*ne),M=se+ce*(X+j),B=E-G;if(c.fillStyle=(fe==null?void 0:fe.color)||"#93c5fd",c.fillRect(M,B,X,G),t.showLabels!==!1&&G>14*d&&X>20*d&&V>.01){c.fillStyle=I,c.font=`${12*d}px ui-sans-serif,system-ui`;const oe=`${n(V)}h`,ve=c.measureText(oe).width;c.fillText(oe,M+X/2-ve/2,B+G/2+4*d)}}),F>26*d){c.fillStyle=I,c.font=`${12*d}px ui-sans-serif,system-ui`;const fe=c.measureText(Y).width;c.fillText(Y,se+F/2-fe/2,E+14*d)}})}function i(){var s,c;try{o=new ResizeObserver(()=>l()),a.value&&o.observe(a.value)}catch{}try{const u=((s=a.value)==null?void 0:s.closest(".layout-item"))||((c=a.value)==null?void 0:c.parentElement);u&&(r=new MutationObserver(()=>l()),r.observe(u,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}return $t(()=>{l(),i(),window.addEventListener("resize",l)}),wt(()=>{try{window.removeEventListener("resize",l)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}o=null,r=null}),Ae(()=>t.data,()=>l(),{deep:!0}),Ae(()=>t.showLabels,()=>l()),(s,c)=>(k(),_("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),Gc=Le({__name:"SimpleBars",props:{data:{},showLabels:{type:Boolean},xLabel:{},yLabel:{}},setup(e){const t=e,a=ie(null);let o=null,r=null;function n(s){const c=Math.max(0,Number(s)||0);return(Math.round(c*10)/10).toFixed(1)}function l(){const s=a.value;if(!s||!t.data)return;const c=fo(s);if(!c)return;const u=getComputedStyle(s),h=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-scale"))||1),m=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-space"))||h),p=Math.max(.5,Number.parseFloat(u.getPropertyValue("--widget-density"))||1),d=h*p,f=s.clientWidth,y=s.clientHeight,C=28*m,$=C*1.4,E=y-C,T=f-C,P=Pt(s,"--line","#e5e7eb"),I=Pt(s,"--fg","#0f172a");c.clearRect(0,0,f,y),c.strokeStyle=P,c.lineWidth=1,c.beginPath(),c.moveTo($,E),c.lineTo(T,E),c.moveTo($,E),c.lineTo($,C),c.stroke(),c.fillStyle=I,c.font=`${12*d}px ui-sans-serif,system-ui`;const w=String(t.xLabel??"").trim();if(w){const F=c.measureText(w).width,X=Math.min(y-6*d,E+18*d);c.fillText(w,$+(T-$)/2-F/2,X)}const A=String(t.yLabel??"").trim();A&&c.fillText(A,6*m,C*.8);const O=(t.data.labels||[]).map(F=>String(F??"")),z=(t.data.data||[]).map(F=>Math.max(0,Number(F)||0)),J=Array.isArray(t.data.colors)?t.data.colors:[];if(!O.length||!z.length)return;const H=Math.max(1,...z),x=O.length,v=8*m,b=Math.max(6*m,(T-$-v*(x+1))/x),j=(E-C)/H;O.forEach((F,X)=>{const ne=z[X]??0,Y=Math.max(0,ne*j),re=$+v+X*(b+v),se=E-Y;if(c.fillStyle=J[X]||"#93c5fd",c.fillRect(re,se,b,Y),c.fillStyle=I,c.font=`${12*d}px ui-sans-serif,system-ui`,b>26){const fe=c.measureText(F).width;c.fillText(F,re+b/2-fe/2,E+14*d)}if(t.showLabels!==!1&&Y>14*d&&b>22*d&&ne>.01){const fe=`${n(ne)}h`,ce=c.measureText(fe).width;c.fillText(fe,re+b/2-ce/2,se+Y/2+4*d)}})}function i(){var s,c;try{o=new ResizeObserver(()=>l()),a.value&&o.observe(a.value)}catch{}try{const u=((s=a.value)==null?void 0:s.closest(".layout-item"))||((c=a.value)==null?void 0:c.parentElement);u&&(r=new MutationObserver(()=>l()),r.observe(u,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}return $t(()=>{l(),i(),window.addEventListener("resize",l)}),wt(()=>{try{window.removeEventListener("resize",l)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}o=null,r=null}),Ae(()=>t.data,()=>l(),{deep:!0}),Ae(()=>t.showLabels,()=>l()),(s,c)=>(k(),_("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),ew={key:0,class:"chart-widget__header"},tw={class:"chart-widget__title"},aw={key:0,class:"chart-widget__subtitle"},ow={key:3,class:"chart-widget__empty"},rw={key:4,class:"chart-widget__legend"},nw=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"ChartDowWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showLabels:{type:Boolean},xLabel:{},yLabel:{},chartData:{},groupedData:{},legendItems:{}},setup(e){const t=e,a=N(()=>t.showHeader!==!1),o=N(()=>t.title||"Day of week"),r=N(()=>({background:t.cardBg||void 0})),n=N(()=>t.legendItems||[]),l=N(()=>t.xLabel||""),i=N(()=>t.yLabel||"");return(s,c)=>(k(),_("div",{class:"card chart-widget",style:Ee(r.value)},[a.value?(k(),_("div",ew,[g("div",tw,W(o.value),1),s.subtitle?(k(),_("div",aw,W(s.subtitle),1)):ae("",!0)])):ae("",!0),s.groupedData?(k(),lt(Q0,{key:1,data:s.groupedData,"show-labels":s.showLabels,"x-label":l.value,"y-label":i.value},null,8,["data","show-labels","x-label","y-label"])):s.chartData?(k(),lt(Gc,{key:2,data:s.chartData,"show-labels":s.showLabels,"x-label":l.value,"y-label":i.value},null,8,["data","show-labels","x-label","y-label"])):(k(),_("div",ow,"No data")),n.value.length?(k(),_("ul",rw,[(k(!0),_(pe,null,xe(n.value,u=>(k(),_("li",{key:u.id},[g("span",{class:"dot",style:Ee({background:u.color})},null,4),g("span",null,W(u.label),1)]))),128))])):ae("",!0)],4))}}),[["__scopeId","data-v-05ee383b"]])},Symbol.toStringTag,{value:"Module"})),Jc=Le({__name:"HeatmapCanvas",props:{hod:{},baseColor:{}},setup(e){const t=e,a=ie(null);let o=null;function r(){var b;const n=a.value,l=t.hod;if(!n)return;if(!l){console.info("[opsdash] heatmap: no data provided");return}const i=fo(n);if(!i)return;const s=getComputedStyle(n),c=Math.max(.5,Number.parseFloat(s.getPropertyValue("--widget-scale"))||1),u=Math.max(.5,Number.parseFloat(s.getPropertyValue("--widget-space"))||c),h=Math.max(.5,Number.parseFloat(s.getPropertyValue("--widget-density"))||1),m=c*h,p=n.clientWidth,d=n.clientHeight,f=l.dows||[],y=l.hours||[],C=l.matrix||[];i.clearRect(0,0,p,d);const $=36*u,E=$,T=$,P=p-$,I=d-$,w=(P-E)/Math.max(1,y.length),A=(I-T)/Math.max(1,f.length),O=Math.max(0,...C.flat())||1,z=typeof t.baseColor=="string"?t.baseColor.trim():"",J=Pt(n,"--heatmap-low","#e0f2fe"),H=go(J),x=go(z),v=j=>{const F=Math.max(0,Math.min(1,j)),X=Math.pow(F,.6);if(!H||!x)return qc(X);const ne=(Y,re,se)=>Math.round(Y+(re-Y)*se);return Kc(ne(H.r,x.r,X),ne(H.g,x.g,X),ne(H.b,x.b,X))};f.length&&y.length&&console.info("[opsdash] heatmap draw",{rows:f.length,cols:y.length,vmax:O});for(let j=0;j<f.length;j++)for(let F=0;F<y.length;F++){const ne=(((b=C[j])==null?void 0:b[F])||0)/O,Y=E+F*w,re=T+j*A;i.fillStyle=v(ne),i.fillRect(Y,re,w-1,A-1)}i.fillStyle=Pt(n,"--fg","#0f172a"),i.font=`${12*m}px ui-sans-serif,system-ui`,f.forEach((j,F)=>i.fillText(j,8,T+F*A+12*m)),y.forEach((j,F)=>{F%2===0&&i.fillText(String(j),E+F*w+2,T-6*m)})}return $t(async()=>{await Xt(),r();try{o=new ResizeObserver(()=>r()),a.value&&o.observe(a.value)}catch{}window.addEventListener("resize",r)}),wt(()=>{try{window.removeEventListener("resize",r)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}o=null}),Ae(()=>t.hod,()=>r(),{deep:!0}),(n,l)=>(k(),_("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),sw={class:"heatmap-lookback"},lw={class:"heatmap-lookback__stacked"},iw={class:"heatmap-lookback__label"},cw={key:0,class:"heatmap-lookback__legend"},dw={class:"heatmap-lookback__legend-scale"},uw={class:"heatmap-lookback__legend-meta"},fw={class:"heatmap-lookback__legend-weeks"},gw=Qe(Le({__name:"HeatmapLookback",props:{entries:{},mode:{},showLegend:{type:Boolean}},setup(e){const t=e,a=ie(null);let o=null;const r=N(()=>Array.isArray(t.entries)?t.entries:[]),n=N(()=>t.mode==="overlay"?"overlay":"stacked"),l=N(()=>t.showLegend!==!1),i=N(()=>{let p=0;return r.value.forEach(d=>{var f,y;(y=(f=d==null?void 0:d.hod)==null?void 0:f.matrix)==null||y.forEach(C=>{C.forEach($=>{const E=Number($);Number.isFinite(E)&&(p=Math.max(p,Math.max(0,E)))})})}),{max:p}}),s=N(()=>"Less hours"),c=N(()=>"More hours"),u=N(()=>{const p=i.value.max;return!Number.isFinite(p)||p<=0?"No activity yet":`0 to ${Number.isInteger(p)?String(p):p.toFixed(1)} h`});function h(){var ce;if(n.value!=="overlay")return;const p=r.value;if(!p.length)return;const d=a.value;if(!d)return;const f=fo(d);if(!f)return;const y=getComputedStyle(d),C=Math.max(.5,Number.parseFloat(y.getPropertyValue("--widget-scale"))||1),$=Math.max(.5,Number.parseFloat(y.getPropertyValue("--widget-space"))||C),E=Math.max(.5,Number.parseFloat(y.getPropertyValue("--widget-density"))||1),T=C*E,P=d.clientWidth,I=d.clientHeight,w=(ce=p[0])==null?void 0:ce.hod,A=(w==null?void 0:w.dows)||[],O=(w==null?void 0:w.hours)||[];if(!A.length||!O.length)return;let z=0;p.forEach(V=>{var G,M;(M=(G=V.hod)==null?void 0:G.matrix)==null||M.forEach(B=>{B.forEach(K=>{z=Math.max(z,Math.max(0,Number(K)||0))})})}),z<=0&&(z=1);const J=36*$,H=J,x=J,v=P-J,b=I-J,j=(v-H)/Math.max(1,O.length),F=(b-x)/Math.max(1,A.length),X=Pt(d,"--heatmap-low","#e0f2fe"),ne=go(X),Y=p.map(V=>go(V.color)),re=V=>Math.max(0,Math.min(1,V)),se=(V,G,M)=>Math.round(V+(G-V)*M),fe=Math.max(1,p.length);f.clearRect(0,0,P,I);for(let V=0;V<A.length;V++)for(let G=0;G<O.length;G++){const M=H+G*j,B=x+V*F,K=j/fe;p.forEach((oe,ve)=>{var Q,ge,ue;const S=Math.max(0,Number(((ue=(ge=(Q=oe==null?void 0:oe.hod)==null?void 0:Q.matrix)==null?void 0:ge[V])==null?void 0:ue[G])??0)),R=re(S/z),L=Math.pow(R,.6),U=Y[ve],q=ne&&U?Kc(se(ne.r,U.r,L),se(ne.g,U.g,L),se(ne.b,U.b,L)):qc(L);f.fillStyle=q,f.fillRect(M+ve*K,B,K,F-1)})}f.fillStyle=Pt(d,"--fg","#0f172a"),f.font=`${12*T}px ui-sans-serif,system-ui`,A.forEach((V,G)=>f.fillText(V,8,x+G*F+12*T)),O.forEach((V,G)=>{G%2===0&&f.fillText(String(V),H+G*j+2,x-6*T)})}function m(){try{o=new ResizeObserver(()=>h()),a.value&&o.observe(a.value)}catch{}window.addEventListener("resize",h)}return $t(async()=>{await Xt(),h(),m()}),wt(()=>{try{window.removeEventListener("resize",h)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}o=null}),Ae(()=>[r.value,n.value],()=>{n.value==="overlay"&&Xt().then(()=>h())},{deep:!0}),(p,d)=>(k(),_("div",sw,[to(g("div",lw,[(k(!0),_(pe,null,xe(r.value,f=>(k(),_("div",{key:f.id,class:"heatmap-lookback__panel"},[g("div",iw,[g("span",{class:"dot",style:Ee({background:f.color})},null,4),g("span",null,W(f.label),1)]),Me(Jc,{hod:f.hod,"base-color":f.color},null,8,["hod","base-color"])]))),128))],512),[[Bi,n.value==="stacked"]]),to(g("canvas",{ref_key:"cv",ref:a,class:"chart heatmap-lookback__overlay"},null,512),[[Bi,n.value==="overlay"]]),l.value&&r.value.length?(k(),_("div",cw,[g("div",dw,[g("span",null,W(s.value),1),d[0]||(d[0]=g("span",{class:"heatmap-lookback__legend-bar","aria-hidden":"true"},null,-1)),g("span",null,W(c.value),1)]),g("div",uw,[g("span",null,W(u.value),1)]),g("ul",fw,[(k(!0),_(pe,null,xe(r.value,f=>(k(),_("li",{key:f.id},[g("span",{class:"dot",style:Ee({background:f.color})},null,4),g("span",null,W(f.label),1)]))),128))])])):ae("",!0)]))}}),[["__scopeId","data-v-d04eb3d7"]]),pw={key:0,class:"chart-widget__header"},hw={class:"chart-widget__title"},mw={key:0,class:"chart-widget__subtitle"},vw={key:1,class:"chart-widget__meta"},bw={key:3,class:"chart-widget__empty"},yw={key:4,class:"chart-widget__hint"},ww=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"ChartHodWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showHint:{type:Boolean},showLegend:{type:Boolean},lookbackMode:{},lookbackWeeks:{},rangeMode:{},hodData:{},lookbackEntries:{}},setup(e){const t=e,a=N(()=>t.showHeader!==!1),o=N(()=>t.title||"Hours of day"),r=N(()=>({background:t.cardBg||void 0})),n=N(()=>t.lookbackEntries||[]),l=N(()=>t.showLegend!==!1),i=N(()=>t.lookbackMode||"stacked"),s=N(()=>{const c=typeof t.lookbackWeeks=="number"?Math.max(0,Math.round(t.lookbackWeeks)):0;if(!c)return"";const u=(t.rangeMode||"").toString().toLowerCase()==="month"?"month":"week";return`History  last ${c} ${c===1?u:`${u}s`}`});return(c,u)=>(k(),_("div",{class:"card chart-widget chart-widget--hod",style:Ee(r.value)},[a.value?(k(),_("div",pw,[g("div",hw,W(o.value),1),c.subtitle?(k(),_("div",mw,W(c.subtitle),1)):ae("",!0),s.value?(k(),_("div",vw,W(s.value),1)):ae("",!0)])):ae("",!0),n.value.length?(k(),lt(gw,{key:1,entries:n.value,mode:i.value,"show-legend":l.value},null,8,["entries","mode","show-legend"])):c.hodData?(k(),lt(Jc,{key:2,hod:c.hodData},null,8,["hod"])):(k(),_("div",bw,"No data")),c.showHint&&c.hodData?(k(),_("div",yw,"247 Heatmap: hours by weekday and hour.")):ae("",!0)],4))}}),[["__scopeId","data-v-639549e5"]])},Symbol.toStringTag,{value:"Module"})),kw={key:0,class:"chart-widget__header"},_w={class:"chart-widget__title"},xw={key:0,class:"chart-widget__subtitle"},Cw={key:2,class:"chart-widget__empty"},Sw={key:3,class:"chart-widget__legend"},$w=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"ChartPerDayWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},showLabels:{type:Boolean},xLabel:{},yLabel:{},chartData:{},legendItems:{}},setup(e){const t=e,a=N(()=>t.showHeader!==!1),o=N(()=>t.title||"Per-day totals"),r=N(()=>({background:t.cardBg||void 0})),n=N(()=>t.legendItems||[]),l=N(()=>t.xLabel||""),i=N(()=>t.yLabel||"");return(s,c)=>(k(),_("div",{class:"card chart-widget",style:Ee(r.value)},[a.value?(k(),_("div",kw,[g("div",_w,W(o.value),1),s.subtitle?(k(),_("div",xw,W(s.subtitle),1)):ae("",!0)])):ae("",!0),s.chartData?(k(),lt(Gc,{key:1,data:s.chartData,"show-labels":s.showLabels,"x-label":l.value,"y-label":i.value},null,8,["data","show-labels","x-label","y-label"])):(k(),_("div",Cw,"No data")),n.value.length?(k(),_("ul",Sw,[(k(!0),_(pe,null,xe(n.value,u=>(k(),_("li",{key:u.id},[g("span",{class:"dot",style:Ee({background:u.color})},null,4),g("span",null,W(u.label),1)]))),128))])):ae("",!0)],4))}}),[["__scopeId","data-v-66cec46a"]])},Symbol.toStringTag,{value:"Module"})),Tw=Qe(Le({__name:"PieChart",props:{data:{},colorsById:{},colorsByName:{},showLabels:{type:Boolean},highlightId:{}},setup(e){const t=e,a=ie(null);let o=null,r=null,n=null;const l=ie(null);function i(){const h=t.data,m=a.value;if(!m||!h)return;const p=fo(m);if(!p)return;const d=getComputedStyle(m),f=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-scale"))||1),y=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-space"))||f),C=Math.max(.5,Number.parseFloat(d.getPropertyValue("--widget-density"))||1),$=Math.max(.6,Number.parseFloat(d.getPropertyValue("--pie-scale"))||.85),E=f*C*$,T=m.clientWidth,P=m.clientHeight,I=T/2,w=P/2,A=Math.min(T,P)*(.35*y*$),O=h.data||[],z=h.labels||[],J=h.ids||[],H=h.colors||[],x=[];for(let M=0;M<O.length;M++)(Number(O[M])||0)>0&&x.push(M);if(p.clearRect(0,0,T,P),x.length===0)return;const v=x.map(M=>Number(O[M])||0),b=x.map(M=>String(z[M]||"")),j=x.map(M=>String(J[M]||"")),F=x.map(M=>H[M]),X=v.reduce((M,B)=>M+Math.max(0,B),0)||1;let ne=-Math.PI/2;const Y=Pt(m,"--line","#e5e7eb"),re=Pt(m,"--fg","#0f172a"),se=Pt(m,"--bg","#ffffff");p.lineWidth=1,p.strokeStyle=Y;const fe=["#60a5fa","#f59e0b","#ef4444","#10b981","#a78bfa","#fb7185","#22d3ee","#f97316"];l.value&&!j.includes(l.value)&&(l.value=null);const ce=t.highlightId??l.value?String(t.highlightId??l.value):"",V=!!(ce&&j.includes(ce)),G=[];v.forEach((M,B)=>{var ue,le;const K=Math.max(0,M)/X,oe=ne+K*2*Math.PI,ve=String((b==null?void 0:b[B])||""),S=String((j==null?void 0:j[B])||""),R=F[B],L=(ue=t.colorsById)==null?void 0:ue[S],U=(le=t.colorsByName)==null?void 0:le[ve];let q=L||U||R||fe[B%fe.length];const Q=V&&S===ce,ge=V&&!Q;if(p.save(),ge&&(p.globalAlpha=.25),p.beginPath(),p.moveTo(I,w),p.arc(I,w,A,ne,oe),p.closePath(),p.fillStyle=q,p.fill(),p.lineWidth=Q?2:1,p.strokeStyle=Q?"rgba(255,255,255,0.9)":Y,p.stroke(),p.restore(),t.showLabels!==!1){const de=(ne+oe)/2,ke=I+Math.cos(de)*(A+12*y*$),be=w+Math.sin(de)*(A+12*y*$);p.save(),p.font=`${12*E}px ui-sans-serif,system-ui`,p.fillStyle=re,p.strokeStyle=se,p.lineWidth=3,p.textAlign="center",p.textBaseline="middle";const me=Math.max(0,Number(M)||0)/X*100,ye=`${b!=null&&b[B]?b[B]+" ":""}${Number(M).toFixed(2)}h  ${me.toFixed(1)}%`;p.strokeText(ye,ke,be),p.fillText(ye,ke,be),p.restore()}G.push({start:ne,end:oe,id:S}),ne=oe}),n={cx:I,cy:w,r:A,segments:G}}function s(){var h,m;try{o=new ResizeObserver(()=>i()),a.value&&o.observe(a.value)}catch{}try{const p=((h=a.value)==null?void 0:h.closest(".layout-item"))||((m=a.value)==null?void 0:m.parentElement);p&&(r=new MutationObserver(()=>i()),r.observe(p,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}$t(()=>{i(),s(),window.addEventListener("resize",i)}),wt(()=>{try{window.removeEventListener("resize",i)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}try{const h=a.value;h&&(h.removeEventListener("mousemove",c),h.removeEventListener("mouseleave",u))}catch{}o=null,r=null}),Ae(()=>t.data,()=>i(),{deep:!0}),Ae(()=>t.colorsById,()=>i(),{deep:!0}),Ae(()=>t.showLabels,()=>i()),Ae(()=>t.highlightId,()=>i());function c(h){const m=a.value;if(!m||!n)return;const p=m.getBoundingClientRect(),d=h.clientX-p.left,f=h.clientY-p.top,y=d-n.cx,C=f-n.cy,$=Math.sqrt(y*y+C*C);if(!Number.isFinite($)||$>n.r){l.value&&(l.value=null,i());return}let E=Math.atan2(C,y);E<-Math.PI/2&&(E+=Math.PI*2);const T=n.segments.find(I=>E>=I.start&&E<=I.end),P=T?T.id:null;P!==l.value&&(l.value=P,i())}function u(){l.value&&(l.value=null,i())}return Ae(()=>a.value,(h,m)=>{m&&(m.removeEventListener("mousemove",c),m.removeEventListener("mouseleave",u)),h&&(h.addEventListener("mousemove",c),h.addEventListener("mouseleave",u))},{immediate:!0}),(h,m)=>(k(),_("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),[["__scopeId","data-v-0b0f384d"]]),Mw={key:0,class:"chart-widget__header"},Aw={class:"chart-widget__title"},Dw={key:0,class:"chart-widget__subtitle"},Ew={key:2,class:"chart-widget__empty"},Lw={key:3,class:"chart-widget__legend"},Nw=["onMouseenter","onFocus"],Iw={class:"val"},Bw=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"ChartPieWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},compact:{type:Boolean},showLegend:{type:Boolean},showLabels:{type:Boolean},chartData:{},colorsById:{},colorsByName:{}},setup(e){const t=e,a=N(()=>t.showHeader!==!1),o=N(()=>t.title||"Pie chart"),r=N(()=>({background:t.cardBg||void 0})),n=N(()=>t.colorsById||{}),l=N(()=>t.colorsByName||{}),i=ie(null),s=N(()=>{const c=t.chartData;if(!c||!Array.isArray(c.data))return[];const u=c.data.reduce((h,m)=>h+Math.max(0,Number(m)||0),0)||1;return c.data.map((h,m)=>{var $,E,T;const p=Math.max(0,Number(h)||0),d=String((($=c.labels)==null?void 0:$[m])??""),f=String(((E=c.ids)==null?void 0:E[m])??d??m),y=((T=c.colors)==null?void 0:T[m])||n.value[f]||l.value[d]||"#60a5fa",C=p/u*100;return{id:f,label:d,color:y,value:`${p.toFixed(1)}h  ${C.toFixed(0)}%`}})});return(c,u)=>(k(),_("div",{class:"card chart-widget",style:Ee(r.value)},[a.value?(k(),_("div",Mw,[g("div",Aw,W(o.value),1),c.subtitle?(k(),_("div",Dw,W(c.subtitle),1)):ae("",!0)])):ae("",!0),c.chartData?(k(),lt(Tw,{key:1,data:c.chartData,"colors-by-id":n.value,"colors-by-name":l.value,"show-labels":c.showLabels,"highlight-id":i.value},null,8,["data","colors-by-id","colors-by-name","show-labels","highlight-id"])):(k(),_("div",Ew,"No data")),c.showLegend&&s.value.length?(k(),_("ul",Lw,[(k(!0),_(pe,null,xe(s.value,h=>(k(),_("li",{key:h.id,class:Be({hovered:i.value===h.id}),onMouseenter:m=>i.value=h.id,onMouseleave:u[0]||(u[0]=m=>i.value=null),onFocus:m=>i.value=h.id,onBlur:u[1]||(u[1]=m=>i.value=null),tabindex:"0"},[g("span",{class:"dot",style:Ee({background:h.color})},null,4),g("span",null,W(h.label),1),g("span",Iw,W(h.value),1)],42,Nw))),128))])):ae("",!0)],4))}}),[["__scopeId","data-v-1a53cec2"]])},Symbol.toStringTag,{value:"Module"})),Ow=Qe(Le({__name:"StackedBars",props:{stacked:{},colorsById:{},showLabels:{type:Boolean},highlightId:{}},setup(e){const t=e,a=ie(null);let o=null,r=null,n=null;const l=ie(null);function i(I,w,A,O,z){I.save(),z!=null&&z.font&&(I.font=z.font),z!=null&&z.align&&(I.textAlign=z.align),z!=null&&z.baseline&&(I.textBaseline=z.baseline),I.lineWidth=3,I.strokeStyle=(z==null?void 0:z.stroke)||"rgba(0,0,0,0.55)",I.strokeText(w,A,O),I.fillStyle=(z==null?void 0:z.fill)||"#ffffff",I.fillText(w,A,O),I.restore()}function s(I){const w=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(I||"");return w?{r:parseInt(w[1],16),g:parseInt(w[2],16),b:parseInt(w[3],16)}:null}function c(I,w){const A=s(I);return A&&(.2126*A.r+.7152*A.g+.0722*A.b)/255<.55?"#ffffff":w}function u(I){const w=Math.max(0,Number(I)||0);return(Math.round(w*10)/10).toFixed(1)}function h(I,w=.5){const A=s(I);if(!A)return I;const O=Math.max(0,Math.min(1,w)),z=Math.round(A.r+(255-A.r)*O),J=Math.round(A.g+(255-A.g)*O),H=Math.round(A.b+(255-A.b)*O);return`rgb(${z},${J},${H})`}function m(I,w=.5){const A=s(I);if(!A)return I;const O=Math.max(0,Math.min(1,w)),z=Math.round(A.r*(1-O)),J=Math.round(A.g*(1-O)),H=Math.round(A.b*(1-O));return`rgb(${z},${J},${H})`}function p(I,w){const{x:A,y:O,width:z,height:J,baseColor:H,variant:x}=w,v=x==="mixed",b=Math.max(0,Math.min(1,Number(w.alphaScale))),j=Math.min(z*(v?.35:.22),6),F=Math.max(2,v?z*.45:z-j*2),X=v?A+z-F-j:A+(z-F)/2,ne=h(H,v?.6:.45),Y=m(H,v?.4:.35);I.save(),I.fillStyle=ne,I.globalAlpha=(v?.12:.16)*b,I.fillRect(X,O,F,J),I.restore(),I.save(),I.strokeStyle=Y,I.lineWidth=v?1.25:1.5,I.globalAlpha=(v?.6:.75)*b,I.setLineDash([4,4]),I.strokeRect(X,O,F,J),I.restore(),I.save(),I.strokeStyle=Y,I.globalAlpha=(v?.35:.45)*b,I.lineWidth=1,I.beginPath(),I.moveTo(X,O),I.lineTo(X+F,O),I.stroke(),I.restore()}function d(){const I=a.value;if(!I)return;const w=fo(I);if(!w)return;const A=getComputedStyle(I),O=Math.max(.5,Number.parseFloat(A.getPropertyValue("--widget-scale"))||1),z=Math.max(.5,Number.parseFloat(A.getPropertyValue("--widget-space"))||O),J=Math.max(.5,Number.parseFloat(A.getPropertyValue("--widget-density"))||1),H=Math.max(.6,Number.parseFloat(A.getPropertyValue("--stacked-scale"))||.85),x=O*J*H,v=`${11*x}px ui-sans-serif,system-ui`,b=I.clientWidth,j=I.clientHeight,F=28*z,X=F*1.4,ne=j-F,Y=b-F,re=Pt(I,"--line","#e5e7eb"),se=Pt(I,"--fg","#0f172a"),fe=Pt(I,"--bg","#ffffff");w.clearRect(0,0,b,j),w.strokeStyle=re,w.lineWidth=1,w.beginPath(),w.moveTo(X,ne),w.lineTo(Y,ne),w.moveTo(X,ne),w.lineTo(X,F),w.stroke();const ce=t.stacked;if(ce&&ce.labels&&ce.series){const V=[];let G=ce.labels||[],M=ce.series||[];const B=$(G,M);G=B.labels,M=B.series;const K=M.map(_e=>String((_e==null?void 0:_e.id)??""));l.value&&!K.includes(l.value)&&(l.value=null);const oe=t.highlightId??l.value?String(t.highlightId??l.value):"",ve=!!(oe&&K.includes(oe)),S=G.map((_e,Se)=>M.reduce(($e,Ne)=>{var Oe;return $e+Math.max(0,Number(((Oe=Ne.data)==null?void 0:Oe[Se])||0))},0)),R=G.map((_e,Se)=>M.reduce(($e,Ne)=>{var Oe;return $e+Math.max(0,Number(((Oe=Ne.forecast)==null?void 0:Oe[Se])||0))},0)),L=S.map((_e,Se)=>_e+R[Se]),U=Math.max(1,...L),q=G.length||1,Q=8*z,ge=Math.max(6*z,(Y-X-Q*(q+1))/q),ue=Q*H,le=Math.max(4*z*H,ge*H),de=le*q+ue*(q+1),ke=X+Math.max(0,(Y-X-de)/2),be=(ne-F)/U*H;let me=0,ye=0;G.forEach((_e,Se)=>{const $e=ke+ue+Se*(le+ue);let Ne=ne,Oe=0;const We=[];M.forEach(Ge=>{var ft;const ot=Math.max(0,Number(((ft=Ge.data)==null?void 0:ft[Se])||0)),qe=ot*be;Ne-=qe;const Rt=String(Ge.id??""),_t=t.colorsById[Ge.id]||Ge.color||"#93c5fd",Re=ve&&Rt===oe,Ue=ve&&!Re;if(qe>.5&&(w.save(),Ue&&(w.globalAlpha=.25),w.fillStyle=_t,w.fillRect($e,Ne,le,qe),Re&&(w.strokeStyle="rgba(255,255,255,0.9)",w.lineWidth=1.5,w.strokeRect($e,Ne,le,qe)),w.restore()),t.showLabels!==!1&&ot>.01){const xt=u(ot);w.font=v;const ta=w.measureText(xt).width;if(qe>14*x&&le>ta+6*x)w.save(),Ue&&(w.globalAlpha=.25),w.fillStyle=c(_t,se),w.font=v,w.fillText(xt,$e+le/2-ta/2,Ne+qe/2+4),w.restore();else if(qe>.5){const ka=Ne+qe/2,Ft=6*z,jt=$e+le+Ft,je=$e-Ft,et=jt+ta<=Y,Ia=et?jt:je,er=et?"left":"right",Ba=et?$e+le:$e,aa=et?Ia-4*z:Ia+4*z;We.push({y:ka,text:xt,align:er,textX:Ia,lineStartX:Ba,lineEndX:aa,alpha:Ue?.25:1})}}qe>.5&&V.push({x:$e,y:Ne,width:le,height:qe,id:Rt}),Oe+=ot});let at=Ne,Fe=0;if(M.forEach(Ge=>{var ft;const ot=Math.max(0,Number(((ft=Ge.forecast)==null?void 0:ft[Se])||0));if(ot<=0)return;const qe=ot*be;if(at-=qe,Fe+=ot,qe<=.5)return;const Rt=String(Ge.id??""),_t=t.colorsById[Ge.id]||Ge.color||"#93c5fd",Ue=ve&&!(ve&&Rt===oe);p(w,{x:$e,y:at,width:le,height:qe,baseColor:_t,variant:Oe>.01?"mixed":"future",alphaScale:Ue?.25:1})}),t.showLabels!==!1&&We.length){const Ge=12*x,ot=F+6*x,qe=ne-6*x;We.sort((Re,Ue)=>Re.y-Ue.y),We.forEach((Re,Ue)=>{Ue===0?Re.y=Math.max(Re.y,ot):Re.y=Math.max(Re.y,We[Ue-1].y+Ge)});const Rt=We[We.length-1].y-qe;Rt>0&&We.forEach(Re=>{Re.y-=Rt});const _t=ot-We[0].y;_t>0&&We.forEach(Re=>{Re.y+=_t}),w.save(),w.font=v,w.textBaseline="middle",We.forEach(Re=>{w.save(),w.globalAlpha=Re.alpha,w.strokeStyle=re,w.lineWidth=1,w.beginPath(),w.moveTo(Re.lineStartX,Re.y),w.lineTo(Re.lineEndX,Re.y),w.stroke(),w.fillStyle=se,w.textAlign=Re.align,w.fillText(Re.text,Re.textX,Re.y),w.restore()}),w.restore()}me+=Oe,ye+=Fe,w.fillStyle=se,w.font=`${12*x}px ui-sans-serif,system-ui`;const st=E(String(G[Se]||""));if(le>26*x){const Ge=w.measureText(st).width;w.fillText(st,$e+le/2-Ge/2,ne+14*x)}const zt=Fe>.01?`~${u(Oe+Fe)}h`:Oe>.01?`${u(Oe)}h`:"";t.showLabels!==!1&&zt&&i(w,zt,$e+le/2,Math.max(F+4*x,at-2),{align:"center",baseline:"bottom",font:`${11*x}px ui-sans-serif,system-ui`,fill:se,stroke:fe})});const Ce=ye>.01?`~${u(me+ye)}h expected`:`${u(me)}h total`;t.showLabels!==!1&&i(w,Ce,Y-4,F+4*x,{align:"right",baseline:"top",font:`${12*x}px ui-sans-serif,system-ui`,fill:se,stroke:fe}),n={segments:V};return}n=null}function f(){var I,w;try{o=new ResizeObserver(()=>d()),a.value&&o.observe(a.value)}catch{}try{const A=((I=a.value)==null?void 0:I.closest(".layout-item"))||((w=a.value)==null?void 0:w.parentElement);A&&(r=new MutationObserver(()=>d()),r.observe(A,{attributes:!0,attributeFilter:["style","class"]}))}catch{}}$t(()=>{d(),f(),window.addEventListener("resize",d)}),wt(()=>{try{window.removeEventListener("resize",d)}catch{}try{o&&a.value&&o.unobserve(a.value)}catch{}try{r&&r.disconnect()}catch{}try{const I=a.value;I&&(I.removeEventListener("mousemove",y),I.removeEventListener("mouseleave",C))}catch{}o=null,r=null}),Ae(()=>t.stacked,()=>d(),{deep:!0}),Ae(()=>t.colorsById,()=>d(),{deep:!0}),Ae(()=>t.showLabels,()=>d()),Ae(()=>t.highlightId,()=>d());function y(I){const w=a.value;if(!w||!n)return;const A=w.getBoundingClientRect(),O=I.clientX-A.left,z=I.clientY-A.top;let J=null;for(let H=n.segments.length-1;H>=0;H-=1){const x=n.segments[H];if(O>=x.x&&O<=x.x+x.width&&z>=x.y&&z<=x.y+x.height){J=x.id;break}}J!==l.value&&(l.value=J,d())}function C(){l.value&&(l.value=null,d())}Ae(()=>a.value,(I,w)=>{w&&(w.removeEventListener("mousemove",y),w.removeEventListener("mouseleave",C)),I&&(I.addEventListener("mousemove",y),I.addEventListener("mouseleave",C))},{immediate:!0});function $(I,w){if(!Array.isArray(I)||I.length!==7)return{labels:I,series:w};const A=I.map(b=>T(b));if(A.some(b=>!b))return{labels:I,series:w};const O=A.map(b=>P(b)),z=[1,2,3,4,5,6,7];if(O.join(",")===z.join(","))return{labels:I,series:w};const J={};if(O.forEach((b,j)=>{J[b]=j}),!z.every(b=>b in J))return{labels:I,series:w};const H=z.map(b=>J[b]),x=H.map(b=>I[b]),v=(w||[]).map(b=>{const j=Array.isArray(b.data)?b.data:[],F=Array.isArray(b.forecast)?b.forecast:null,X=H.map(re=>j[re]??0),ne=F?H.map(re=>F[re]??0):void 0,Y={...b,data:X};return ne&&(Y.forecast=ne),Y});return{labels:x,series:v}}function E(I){const w=/^(\d{4})-(\d{2})-(\d{2})$/.exec(I);if(!w)return I;const A=new Date(`${w[1]}-${w[2]}-${w[3]}T00:00:00`);return["So","Mo","Di","Mi","Do","Fr","Sa"][A.getDay()]||I}function T(I){const w=/^(\d{4})-(\d{2})-(\d{2})$/.exec(I);if(!w)return null;const A=new Date(`${w[1]}-${w[2]}-${w[3]}T00:00:00`);return isNaN(A.getTime())?null:A}function P(I){const w=I.getDay();return w===0?7:w}return(I,w)=>(k(),_("canvas",{ref_key:"cv",ref:a,class:"chart"},null,512))}}),[["__scopeId","data-v-4bcde162"]]),Pw={key:0,class:"chart-widget__header"},Fw={class:"chart-widget__title"},Hw={key:0,class:"chart-widget__subtitle"},Ww={key:2,class:"chart-widget__empty"},zw={key:3,class:"chart-widget__legend"},Rw=["onMouseenter","onFocus"],jw=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"ChartStackedWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},compact:{type:Boolean},showLegend:{type:Boolean},showLabels:{type:Boolean},stacked:{},colorsById:{}},setup(e){const t=e,a=N(()=>t.showHeader!==!1),o=N(()=>t.title||"Stacked bars"),r=N(()=>({background:t.cardBg||void 0})),n=N(()=>t.colorsById||{}),l=ie(null),i=N(()=>{var c;return(((c=t.stacked)==null?void 0:c.series)||[]).map(u=>{const h=String((u==null?void 0:u.id)??""),m=String((u==null?void 0:u.name)??(u==null?void 0:u.label)??h),p=(u==null?void 0:u.color)||n.value[h]||"#60a5fa";return{id:h,label:m,color:p}})});return(s,c)=>(k(),_("div",{class:"card chart-widget",style:Ee(r.value)},[a.value?(k(),_("div",Pw,[g("div",Fw,W(o.value),1),s.subtitle?(k(),_("div",Hw,W(s.subtitle),1)):ae("",!0)])):ae("",!0),s.stacked?(k(),lt(Ow,{key:1,stacked:s.stacked,"colors-by-id":n.value,"show-labels":s.showLabels,"highlight-id":l.value},null,8,["stacked","colors-by-id","show-labels","highlight-id"])):(k(),_("div",Ww,"No data")),s.showLegend&&i.value.length?(k(),_("ul",zw,[(k(!0),_(pe,null,xe(i.value,u=>(k(),_("li",{key:u.id,class:Be({hovered:l.value===u.id}),onMouseenter:h=>l.value=u.id,onMouseleave:c[0]||(c[0]=h=>l.value=null),onFocus:h=>l.value=u.id,onBlur:c[1]||(c[1]=h=>l.value=null),tabindex:"0"},[g("span",{class:"dot",style:Ee({background:u.color})},null,4),g("span",null,W(u.label),1)],42,Rw))),128))])):ae("",!0)],4))}}),[["__scopeId","data-v-20b54b56"]])},Symbol.toStringTag,{value:"Module"})),Uw={class:"group-row"},Vw={colspan:"5"},Kw={class:"group-header"},qw={class:"group-label"},Gw={class:"name"},Jw={key:0,class:"group-meta"},Yw={class:"summary"},Zw={key:0,class:"summary-percent"},Xw={key:1,class:"group-meta"},Qw={class:"summary"},ek={key:0},tk=["title"],ak={class:"row-name"},ok={key:0,class:"progress"},rk={class:"progress-chip"},nk={class:"num"},sk={class:"num"},lk={class:"num"},ik={class:"num"},ck={key:0,class:"hint"},dk={key:0,class:"empty-row"},uk=Qe(Le({__name:"ByCalendarTable",props:{rows:{},n2:{type:Function},targets:{},groups:{},todayHours:{}},setup(e){const t=e,a=N(()=>Array.isArray(t.groups)&&t.groups.length?t.groups.map(T=>({id:T.id,label:T.label,summary:T.summary??null,color:T.color,rows:(T.rows||[]).map(o)})):[{id:"__all__",label:"Calendars",summary:null,color:void 0,rows:(t.rows||[]).map(o)}]);function o(T){const P=r(T);return{...T,calendarId:P}}function r(T){return T?T.calendarId?String(T.calendarId):T.id?String(T.id):T.calendar_id?String(T.calendar_id):T.calendar?String(T.calendar):"":""}function n(T){return String(T.calendar||T.displayname||T.name||T.calendarId||"")}function l(T){return r(T)||n(T)}function i(T){const P=y(T);if(!P)return!1;const I=t.targets||{},w=Number(I[P]);return isFinite(w)&&w>0}function s(T){const P=y(T);if(!P)return 0;const I=t.targets||{},w=Number(I[P]);return isFinite(w)?w:0}function c(T){const P=s(T);return P>0?(Math.round(P*100)/100).toFixed(2):""}function u(T,P){return T-P>=0?"delta pos":"delta neg"}function h(T,P){const I=T-P,w=Math.abs(Math.round(I*100)/100).toFixed(2);return(I>=0?"+":"-")+w+"h"}function m(T,P){return Math.max(0,Math.min(100,P>0?T/P*100:0)).toFixed(0)+"%"}function p(T,P){return Math.max(0,Math.min(100,P>0?T/P*100:0))}function d(T){const P=y(T);if(!P)return 0;const I=t.todayHours||{},w=Number(I[P]??0);return Number.isFinite(w)?Math.max(0,w):0}function f(T){const P=s(r(T)),I=d(r(T));if(P<=0||I<=1e-4)return null;const w=Math.max(2,Math.min(120,I/P*100)),A=p(T.total_hours,P),O=Math.max(0,A-w);return{pct:w,left:O,text:I.toFixed(2)+"h"}}function y(T){return T==null?"":String(T)}function C(T){const P=T.summary;if(!P)return`${T.rows.length} calendar${T.rows.length===1?"":"s"}`;const I=t.n2(P.actualHours);return P.targetHours>0?`${I} h / ${t.n2(P.targetHours)} h`:`${I} h`}function $(T){const P=T.summary;return!P||P.targetHours<=0?"":`${Math.round(P.percent)}%`}function E(T){switch(T){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}return(T,P)=>(k(),_("table",null,[P[1]||(P[1]=g("colgroup",null,[g("col",{class:"col-w-42"}),g("col",{class:"col-w-12"}),g("col",{class:"col-w-14"}),g("col",{class:"col-w-14"}),g("col",{class:"col-w-18"})],-1)),P[2]||(P[2]=g("thead",null,[g("tr",null,[g("th",{class:"nowrap"},"Calendar"),g("th",{class:"num"},"Events"),g("th",{class:"num"},"Hours"),g("th",{class:"num"},"Target"),g("th",{class:"num"}," / %")])],-1)),g("tbody",null,[(k(!0),_(pe,null,xe(a.value,I=>(k(),_(pe,{key:I.id},[g("tr",Uw,[g("td",Vw,[g("div",Kw,[g("div",qw,[g("span",{class:"dot",style:Ee({background:I.color||"var(--brand)"})},null,4),g("span",Gw,W(I.label),1)]),I.summary?(k(),_("div",Jw,[g("span",Yw,W(C(I)),1),$(I)?(k(),_("span",Zw,W($(I)),1)):ae("",!0),I.summary.statusLabel?(k(),_("span",{key:1,class:Be(["badge",E(I.summary.status)])},W(I.summary.statusLabel),3)):ae("",!0)])):(k(),_("div",Xw,[g("span",Qw,[Pe(W(I.rows.length)+" calendar",1),I.rows.length!==1?(k(),_("span",ek,"s")):ae("",!0)])]))])])]),(k(!0),_(pe,null,xe(I.rows,w=>(k(),_("tr",{key:l(w)},[g("td",null,[g("div",{class:"cell",title:n(w)},[g("div",ak,W(n(w)),1),i(r(w))&&s(r(w))>0?(k(),_("div",ok,[g("div",{class:"progress-bar",style:Ee({width:p(w.total_hours,s(r(w)))+"%",background:I.color||void 0})},null,4),f(w)?(k(),_("div",{key:0,class:"progress-today",style:Ee({left:f(w).left+"%",width:f(w).pct+"%",background:I.color||"var(--brand)"})},[g("span",rk,W(f(w).text),1)],4)):ae("",!0)])):ae("",!0)],8,tk)]),g("td",nk,W(w.events_count),1),g("td",sk,W(T.n2(w.total_hours)),1),g("td",lk,W(c(r(w))),1),g("td",ik,[i(r(w))?(k(),_(pe,{key:0},[g("span",{class:Be(u(w.total_hours,s(r(w))))},W(h(w.total_hours,s(r(w)))),3),s(r(w))>0?(k(),_("span",ck," ("+W(m(w.total_hours,s(r(w))))+")",1)):ae("",!0)],64)):(k(),_(pe,{key:1},[Pe("")],64))])]))),128)),I.rows.length?ae("",!0):(k(),_("tr",dk,[...P[0]||(P[0]=[g("td",{colspan:"5",class:"empty"},"No calendars assigned",-1)])]))],64))),128))])]))}}),[["__scopeId","data-v-2efa83d5"]]),fk={key:0,class:"table-widget__header"},gk={class:"table-widget__title"},pk={key:0,class:"table-widget__subtitle"},hk={key:2,class:"table-widget__empty"},mk=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"CalendarTableWidget",props:{title:{},subtitle:{},cardBg:{},showHeader:{type:Boolean},rows:{},targets:{},groups:{},todayHours:{}},setup(e){const t=e,a=N(()=>t.showHeader!==!1),o=N(()=>t.title||"By calendar"),r=N(()=>({background:t.cardBg||void 0})),n=l=>Number(l??0).toFixed(2);return(l,i)=>(k(),_("div",{class:"card table-widget",style:Ee(r.value)},[a.value?(k(),_("div",fk,[g("div",gk,W(o.value),1),l.subtitle?(k(),_("div",pk,W(l.subtitle),1)):ae("",!0)])):ae("",!0),l.rows&&l.rows.length?(k(),lt(uk,{key:1,rows:l.rows,n2:n,targets:l.targets,groups:l.groups,"today-hours":l.todayHours},null,8,["rows","targets","groups","today-hours"])):(k(),_("div",hk,"No data"))],4))}}),[["__scopeId","data-v-e75cc444"]])},Symbol.toStringTag,{value:"Module"})),vk={key:0,class:"dayoff-card__header"},bk={key:0,class:"pill"},yk={key:1,class:"dayoff-heatmap"},wk=["title"],kk={class:"dayoff-tile__label"},_k={class:"dayoff-tile__value"},xk={class:"dayoff-tile__meta"},Ck={key:2,class:"hint"},Sk=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"DayOffTrendCard",props:{trend:{},unit:{},lookback:{},title:{},cardBg:{},toneLowColor:{},toneHighColor:{},showHeader:{type:Boolean},labelMode:{}},setup(e){const t=e,a=N(()=>t.unit==="mo"?"mo":"wk"),o=N(()=>t.unit==="mo"?"This month":"This week"),r=N(()=>{const x=(t.labelMode||"period").toString().toLowerCase();return x==="date"||x==="offset"?x:"period"}),n=N(()=>{const x=typeof t.lookback=="number"?t.lookback:null;if(x!=null)return Math.max(0,Math.min(12,Math.floor(x)));const v=(t.trend??[]).filter(b=>Number((b==null?void 0:b.offset)??0)>0);return Math.max(0,Math.min(12,v.length))}),l=N(()=>{const x=Array.isArray(t.trend)?t.trend:[],v=new Map;x.forEach(Y=>{const re=Number((Y==null?void 0:Y.offset)??0)||0;v.set(re,{offset:re,label:(Y==null?void 0:Y.label)??"",from:(Y==null?void 0:Y.from)??"",to:(Y==null?void 0:Y.to)??"",totalDays:Number((Y==null?void 0:Y.totalDays)??(Y==null?void 0:Y.total_days)??0)||0,daysOff:Number((Y==null?void 0:Y.daysOff)??(Y==null?void 0:Y.days_off)??0)||0,daysWorked:Number((Y==null?void 0:Y.daysWorked)??(Y==null?void 0:Y.days_worked)??0)||0})});const b=a.value,j=o.value,F=[],X=v.get(0)??{offset:0,label:j,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};F.push(X);const ne=n.value;for(let Y=1;Y<=ne;Y+=1){const re=v.get(Y)??{offset:Y,label:`-${Y} ${b}`,from:"",to:"",totalDays:0,daysOff:0,daysWorked:0};F.push(re)}return F}),i=N(()=>l.value.map(x=>{const v=Math.max(0,Number(x.totalDays)||0),b=Math.max(0,Math.min(v,Number(x.daysOff)||0)),j=v>0?b/v:0;return{...x,label:I(x),share:j,tone:f(j)}})),s=N(()=>{const x=n.value;if(x<=0)return"";const v=t.unit==="mo"?"month":"week";return`Last ${x} ${x===1?v:`${v}s`}`}),c=N(()=>t.title||"Days off trend"),u=N(()=>({background:t.cardBg||void 0})),h=N(()=>t.showHeader!==!1),m=N(()=>{const x=w(t.toneLowColor)||"#dc2626",v=w(t.toneHighColor)||"#16a34a",b=A(x,v,.5);return{low:J(x),mid:J(b),high:J(v)}});function p(x){const v=Math.max(0,Math.min(1,x));return`${Math.round(v*100)}% off`}function d(x){const v=m.value[x];return{"--tile-bg":v.background,"--tile-fg":v.color,background:v.background,color:v.color}}function f(x){return x>=.5?"high":x>=.25?"mid":"low"}const y=new Intl.DateTimeFormat(void 0,{day:"2-digit",month:"2-digit"});function C(x){if(!x)return null;const v=new Date(x);return Number.isNaN(v.getTime())?null:v}function $(x){const v=new Date(Date.UTC(x.getFullYear(),x.getMonth(),x.getDate())),b=v.getUTCDay()||7;v.setUTCDate(v.getUTCDate()+4-b);const j=new Date(Date.UTC(v.getUTCFullYear(),0,1));return Math.ceil(((v.getTime()-j.getTime())/864e5+1)/7)}function E(x,v){const b=C(x),j=C(v);if(!b||!j)return"";const F=y.format(b),X=y.format(j);return F===X?F:`${F}${X}`}function T(x,v){return v||(x===0?o.value:`-${x} ${a.value}`)}function P(x){const v=C(x.from)||C(x.to);return v?a.value==="mo"?`MONTH ${v.getMonth()+1}`:`WEEK ${$(v)}`:T(x.offset,x.label)}function I(x){const v=Number(x.offset??0)||0;return r.value==="offset"?v===0?"Current":`-${v}`:r.value==="date"?E(x.from,x.to)||T(v,x.label):P(x)}function w(x){if(!x||typeof x!="string")return null;const v=x.trim();return/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(v)?v:null}function A(x,v,b=.5){const j=O(x),F=O(v);if(!j||!F)return x;const X=H(Math.round(j.r+(F.r-j.r)*b),0,255),ne=H(Math.round(j.g+(F.g-j.g)*b),0,255),Y=H(Math.round(j.b+(F.b-j.b)*b),0,255);return`rgb(${X}, ${ne}, ${Y})`}function O(x){const v=x.replace("#","");if(v.length===3){const[b,j,F]=v.split("").map(X=>parseInt(X.repeat(2),16));return{r:b,g:j,b:F}}if(v.length===6){const b=parseInt(v.slice(0,2),16),j=parseInt(v.slice(2,4),16),F=parseInt(v.slice(4,6),16);return{r:b,g:j,b:F}}return null}function z(x){const v=O(x);return v?(.2126*v.r+.7152*v.g+.0722*v.b)/255:0}function J(x){const v=z(x)>.6?"#0f172a":"#fff";return{background:x,color:v}}function H(x,v,b){return Math.min(b,Math.max(v,x))}return(x,v)=>(k(),_("div",{class:"card dayoff-card",style:Ee(u.value)},[h.value?(k(),_("div",vk,[g("span",null,W(c.value),1),s.value?(k(),_("span",bk,W(s.value),1)):ae("",!0)])):ae("",!0),i.value.length?(k(),_("div",yk,[(k(!0),_(pe,null,xe(i.value,b=>(k(),_("div",{key:b.offset,class:Be(["dayoff-tile",[`dayoff-tile--${b.tone}`,{"dayoff-tile--current":b.offset===0}]]),style:Ee(d(b.tone)),title:`${b.label}  ${p(b.share)}`},[g("div",kk,W(b.label),1),g("div",_k,W(p(b.share)),1),g("div",xk,W(b.daysOff)+" off  "+W(b.daysWorked)+" on ",1)],14,wk))),128))])):(k(),_("div",Ck,"No day-off history for this range."))],4))}}),[["__scopeId","data-v-443671a9"]])},Symbol.toStringTag,{value:"Module"})),$k={key:0,class:"deck-panel__header"},Tk={class:"deck-panel__heading"},Mk={class:"deck-panel__title"},Ak={key:0,class:"deck-panel__subtitle"},Dk={key:1,class:"deck-panel__subtitle"},Ek={class:"deck-panel__actions"},Lk={key:0,class:"deck-panel__count"},Nk=["href"],Ik=["disabled"],Bk={key:1,class:"deck-panel__filters",role:"group","aria-label":"Deck card filters"},Ok=["aria-pressed","disabled","draggable","onClick","onDragstart","onDragover","onDrop"],Pk={key:0,class:"deck-filter-count"},Fk={key:0,class:"deck-panel__loading"},Hk={key:0,class:"deck-panel__error"},Wk=["data-idx"],zk={key:0,class:"deck-card__row"},Rk={key:0,class:"deck-card__time"},jk={key:1,class:"deck-card__time"},Uk={class:"deck-card__title"},Vk={class:"deck-card__meta"},Kk={class:"deck-card__stack"},qk={key:2,class:"deck-card__labels"},Gk={key:3,class:"deck-card__assignees"},Jk={class:"deck-card__status-row"},Yk={key:0,class:"deck-card__time"},Zk={key:1,class:"deck-card__time"},Xk={class:"deck-card__title"},Qk={class:"deck-card__meta"},e_={class:"deck-card__stack"},t_={key:0,class:"deck-card__labels"},a_={key:1,class:"deck-card__assignees"},o_=Qe(Le({__name:"DeckCardsPanel",props:{cards:{},loading:{type:Boolean},rangeLabel:{},lastFetchedAt:{},deckUrl:{},error:{},filter:{},canFilterMine:{type:Boolean},filtersEnabled:{type:Boolean},filterOptions:{},orderableValues:{},editable:{type:Boolean},allowMineOverride:{type:Boolean},autoScroll:{type:Boolean},intervalSeconds:{},showCount:{type:Boolean},compact:{type:Boolean},title:{},cardBg:{},showHeader:{type:Boolean}},emits:["refresh","update:filter","reorder:filters"],setup(e,{emit:t}){const a=e,o=t,r=N(()=>a.filter??"all"),n=N(()=>a.title||"Deck cards"),l=N(()=>({background:a.cardBg||void 0})),i=N(()=>a.showHeader!==!1),s=N(()=>a.filtersEnabled!==!1&&u.value.length>1),c=N(()=>s.value&&a.canFilterMine!==!1&&a.allowMineOverride!==!1),u=N(()=>a.filterOptions&&a.filterOptions.length?a.filterOptions.map(x=>({...x,mine:!!x.mine})):[{value:"all",label:"All cards",mine:!1},{value:"open_all",label:"Open  All",mine:!1},{value:"open_mine",label:"Open  Mine",mine:!0},{value:"done_all",label:"Done  All",mine:!1},{value:"done_mine",label:"Done  Mine",mine:!0},{value:"archived_all",label:"Archived  All",mine:!1},{value:"archived_mine",label:"Archived  Mine",mine:!0},{value:"due_all",label:"Due  All",mine:!1},{value:"due_mine",label:"Due  Mine",mine:!0},{value:"due_today_all",label:"Due today  All",mine:!1},{value:"due_today_mine",label:"Due today  Mine",mine:!0}]),h=N(()=>a.orderableValues&&a.orderableValues.length?a.orderableValues:u.value.map(x=>x.value).filter(x=>!String(x).startsWith("custom_"))),m=ie(null),p=ie(null),d=ie(null),f=ie(null),y=ie(0),C=N(()=>{const x=Math.max(3,Math.min(10,Number(a.intervalSeconds??5)))*1e3;return Number.isFinite(x)?x:5e3});Ae(()=>a.autoScroll,()=>{I(),w()}),Ae(()=>a.cards,()=>{y.value=0,I(),w()},{deep:!0}),$t(()=>{w()}),wt(()=>{I()});function $(x,v){!a.editable||!h.value.includes(x)||(m.value=x,v.dataTransfer&&(v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",String(x))))}function E(x){!a.editable||!m.value||h.value.includes(x)}function T(x){if(!a.editable||!m.value||!h.value.includes(x))return;const v=h.value.slice(),b=v.indexOf(m.value),j=v.indexOf(x);if(b<0||j<0||b===j){m.value=null;return}if(v.splice(b,1),v.splice(j,0,m.value),m.value=null,v.length){const F=u.value.map(ne=>ne.value).filter(ne=>String(ne).startsWith("custom_")),X=[...v,...F];a.orderableValues&&a.orderableValues.length?o("reorder:filters",v):o("reorder:filters",X)}}function P(){m.value=null}function I(){f.value&&(clearInterval(f.value),f.value=null)}function w(){!a.autoScroll||(a.cards||[]).length<=1||(I(),f.value=window.setInterval(()=>{const x=(a.cards||[]).length;y.value=(y.value+1)%x,A(y.value)},C.value))}function A(x){if(!p.value||!d.value)return;const v=d.value.querySelector(`[data-idx="${x}"]`);if(!v)return;const b=v.offsetTop-d.value.offsetTop;p.value.scrollTo({top:b,behavior:"smooth"})}const O=new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric"}),z=N(()=>{if(!a.lastFetchedAt)return"";try{return O.format(new Date(a.lastFetchedAt))}catch{return""}});function J(x){try{return O.format(new Date(x))}catch{return x}}function H(x){return x==="done"?"Done":x==="archived"?"Archived":"Active"}return(x,v)=>(k(),_("div",{class:Be(["deck-panel",{"deck-panel--compact":a.compact}]),style:Ee(l.value)},[i.value?(k(),_("div",$k,[g("div",Tk,[g("div",Mk,W(n.value),1),z.value?(k(),_("div",Ak," Updated "+W(z.value),1)):(k(),_("div",Dk," Showing "+W(x.rangeLabel.toLowerCase())+" selection ",1))]),g("div",Ek,[x.showCount?(k(),_("div",Lk,W(x.cards.length)+" cards",1)):ae("",!0),x.deckUrl?(k(),_("a",{key:1,class:"deck-panel__link",href:x.deckUrl,target:"_blank",rel:"noopener"}," Open Deck  ",8,Nk)):ae("",!0),g("button",{type:"button",class:"deck-panel__refresh",onClick:v[0]||(v[0]=b=>x.$emit("refresh")),disabled:x.loading}," Refresh ",8,Ik)])])):ae("",!0),s.value?(k(),_("div",Bk,[(k(!0),_(pe,null,xe(u.value,b=>(k(),_("button",{key:b.value,type:"button",class:Be(["deck-filter-btn",{active:r.value===b.value,"is-draggable":a.editable&&h.value.includes(b.value)}]),"aria-pressed":r.value===b.value,disabled:b.mine&&!c.value,draggable:a.editable&&h.value.includes(b.value),onClick:j=>x.$emit("update:filter",b.value),onDragstart:j=>$(b.value,j),onDragover:it(j=>E(b.value),["prevent"]),onDrop:it(j=>T(b.value),["prevent"]),onDragend:P},[g("span",null,W(b.label),1),typeof b.count=="number"?(k(),_("span",Pk,W(b.count),1)):ae("",!0)],42,Ok))),128))])):ae("",!0),g("div",{class:"deck-panel__body",ref_key:"bodyEl",ref:p},[x.loading?(k(),_("div",Fk,[Me(D(Xf),{size:20}),v[1]||(v[1]=g("span",null,"Loading Deck cards",-1))])):(k(),_(pe,{key:1},[x.error?(k(),_("div",Hk,W(x.error),1)):x.cards.length?(k(),_("ul",{key:2,class:"deck-card-list",ref_key:"listEl",ref:d},[(k(!0),_(pe,null,xe(x.cards,(b,j)=>(k(),_("li",{key:b.id,class:"deck-card","data-idx":j},[a.compact?(k(),_("div",zk,[g("span",{class:Be(["deck-card__status",b.status])},W(H(b.status)),3),b.match==="due"&&b.due?(k(),_("span",Rk," Due "+W(J(b.due)),1)):b.done?(k(),_("span",jk," Completed "+W(J(b.done)),1)):ae("",!0),g("span",Uk,W(b.title),1),g("span",Vk,[g("span",{class:"deck-card__board",style:Ee({borderColor:b.boardColor||"var(--color-primary)"})},W(b.boardTitle),5),g("span",Kk,W(b.stackTitle),1)]),b.labels.length?(k(),_("span",qk,[(k(!0),_(pe,null,xe(b.labels,F=>(k(),_("span",{key:`deck-label-${b.id}-${F.id??F.title}`,class:"deck-card__label",style:Ee({background:F.color||"var(--color-background-darker)"})},W(F.title),5))),128))])):ae("",!0),b.assignees.length?(k(),_("span",Gk,[v[2]||(v[2]=g("span",{class:"deck-card__assignees-label"},"Assigned:",-1)),(k(!0),_(pe,null,xe(b.assignees,F=>(k(),_("span",{key:`deck-assignee-${b.id}-${F.uid??F.id}`,class:"deck-card__assignee"},W(F.displayName||F.uid),1))),128))])):ae("",!0)])):(k(),_(pe,{key:1},[g("div",Jk,[g("span",{class:Be(["deck-card__status",b.status])},W(H(b.status)),3),b.match==="due"&&b.due?(k(),_("span",Yk," Due "+W(J(b.due)),1)):b.done?(k(),_("span",Zk," Completed "+W(J(b.done)),1)):ae("",!0)]),g("div",Xk,W(b.title),1),g("div",Qk,[g("span",{class:"deck-card__board",style:Ee({borderColor:b.boardColor||"var(--color-primary)"})},W(b.boardTitle),5),g("span",e_,W(b.stackTitle),1)]),b.labels.length?(k(),_("div",t_,[(k(!0),_(pe,null,xe(b.labels,F=>(k(),_("span",{key:`deck-label-${b.id}-${F.id??F.title}`,class:"deck-card__label",style:Ee({background:F.color||"var(--color-background-darker)"})},W(F.title),5))),128))])):ae("",!0),b.assignees.length?(k(),_("div",a_,[v[3]||(v[3]=g("span",{class:"deck-card__assignees-label"},"Assigned:",-1)),(k(!0),_(pe,null,xe(b.assignees,F=>(k(),_("span",{key:`deck-assignee-${b.id}-${F.uid??F.id}`,class:"deck-card__assignee"},W(F.displayName||F.uid),1))),128))])):ae("",!0)],64))],8,Wk))),128))],512)):(k(),lt(D(Zf),{key:1,name:"No Deck cards",description:`No cards matched this ${x.rangeLabel.toLowerCase()}. Confirm Deck due dates or rerun seeding.`},null,8,["description"]))],64))],512)],6))}}),[["__scopeId","data-v-4ebb7081"]]),r_=Object.freeze(Object.defineProperty({__proto__:null,default:Le({__name:"DeckCardsWidget",props:{cards:{},rangeLabel:{},from:{},to:{},uid:{},deckUrl:{},lastFetchedAt:{},loading:{type:Boolean},error:{},boardIds:{},filters:{},defaultFilter:{},allowMine:{type:Boolean},mineMode:{},includeArchived:{type:Boolean},includeCompleted:{type:Boolean},autoScroll:{type:Boolean},intervalSeconds:{},showCount:{type:Boolean},showHeader:{type:Boolean},title:{},cardBg:{},customFilters:{},autoTagsEnabled:{type:Boolean,default:!0},autoTagSelection:{},compactList:{type:Boolean},editable:{type:Boolean},onUpdateFilters:{}},emits:["refresh"],setup(e){const t=e,a=["all","open_all","open_mine","done_all","done_mine","archived_all","archived_mine","due_all","due_mine","due_today_all","due_today_mine","created_today_all","created_today_mine"],o=N(()=>{const v=(t.boardIds||[]).map(b=>Number(b)).filter(b=>Number.isInteger(b));return new Set(v)}),r=N(()=>(t.cards||[]).filter(b=>o.value.size?b.boardId!=null&&o.value.has(Number(b.boardId)):!0)),n=N(()=>{const v=t.includeArchived!==!1;return r.value.filter(b=>(v||b.status!=="archived")&&(t.includeCompleted!==!1||b.status!=="done"))}),l=N(()=>t.autoTagsEnabled===!1?[]:Cc(n.value)),i=N(()=>Array.isArray(t.autoTagSelection)?new Set(t.autoTagSelection.map(v=>String(v))):null),s=N(()=>{if(t.autoTagsEnabled===!1)return[];const v=l.value;if(!v.length)return[];const b=i.value;return b?v.filter(j=>b.has(j.value)):v}),c=N(()=>(t.customFilters||[]).map(v=>`custom_${v.id}`)),u=N(()=>{const v=t.filters&&t.filters.length?t.filters:a,b=s.value.map(j=>j.value);return[...v,...c.value,...b]}),h=N(()=>{const v=t.includeArchived!==!1,b=n.value,j=new Map;return u.value.forEach(F=>{j.set(F,H(F,b,v).length)}),j}),m=ie(null),p=N(()=>m.value?m.value:(t.filters&&t.filters.length?t.filters:a).filter(Boolean)),d=N(()=>{const v=p.value,b={all:"All cards",mine:"Mine (any status)",open_all:"Open  All",open_mine:"Open  Mine",done_all:"Done  All",done_mine:"Done  Mine",archived_all:"Archived  All",archived_mine:"Archived  Mine",due_all:"Due  All",due_mine:"Due  Mine",due_today_all:"Due today  All",due_today_mine:"Due today  Mine",created_today_all:"Created today  All",created_today_mine:"Created today  Mine",created_range_all:"Created this range  All",created_range_mine:"Created this range  Mine"},j=h.value,F=v.map(Y=>({value:Y,label:b[Y]||Y,mine:Y.endsWith("_mine")||Y==="mine",count:j.get(Y)??0})),X=(t.customFilters||[]).filter(Y=>Y&&Y.id&&Y.label).map(Y=>({value:`custom_${Y.id}`,label:Y.label,mine:!1,count:j.get(`custom_${Y.id}`)??0})),ne=s.value.map(Y=>({value:Y.value,label:Y.label,mine:!1,count:j.get(Y.value)??Y.count??0}));return[...F,...X,...ne]}),f=ie(E());Ae(()=>t.defaultFilter,()=>{f.value=E()}),Ae(()=>d.value.map(v=>v.value).join("|"),()=>{const v=d.value;v.length&&(v.some(b=>b.value===f.value)||(f.value=v[0].value))});const y=N(()=>d.value.length>1),C=N(()=>t.allowMine!==!1&&!!(t.uid||"").trim()),$=N(()=>{const v=t.includeArchived!==!1||f.value.startsWith("archived"),b=r.value.filter(j=>(v||j.status!=="archived")&&(t.includeCompleted!==!1||j.status!=="done"));return H(f.value,b,v)});function E(){const v=d.value.map(j=>j.value),b=t.defaultFilter||v[0]||"all";return v.includes(b)?b:v[0]||"all"}function T(v){f.value=v}function P(v){var b;v.length&&(m.value=[...v],(b=t.onUpdateFilters)==null||b.call(t,v),v.includes(f.value)||(f.value=v[0]))}function I(v,b){const j=v.trim().toLowerCase();return F=>{if(!j)return!1;const X=(F.assignees||[]).some(re=>typeof re.uid=="string"&&re.uid.toLowerCase()===j),ne=typeof F.createdBy=="string"&&F.createdBy.trim().toLowerCase()===j,Y=typeof F.doneBy=="string"&&F.doneBy.trim().toLowerCase()===j;return b==="creator"?ne||Y:b==="assignee"?X||Y:X||ne||Y}}function w(v,b,j,F){return b==="open"?v.status==="active":b==="archived"?v.status==="archived":b==="done"?F?v.status==="done"?!0:j&&v.status==="archived"&&F:!1:b==="due"?v.match==="due":!1}function A(v){if(!v.createdTs)return!1;const b=new Date,j=new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime(),F=j+24*60*60*1e3;return v.createdTs>=j&&v.createdTs<F}function O(v,b,j){if(!v.createdTs||!b||!j)return!1;const F=Date.parse(b),X=Date.parse(j);return!Number.isFinite(F)||!Number.isFinite(X)?!1:v.createdTs>=F&&v.createdTs<=X}function z(v,b,j){if(!b||!j)return!1;const F=Date.parse(b),X=Date.parse(j);if(!Number.isFinite(F)||!Number.isFinite(X))return!1;const ne=v.dueTs??null;return ne!=null&&ne>=F&&ne<=X}function J(v){const b=v.dueTs??null;if(b==null)return!1;const j=new Date,F=new Date(j.getFullYear(),j.getMonth(),j.getDate()).getTime(),X=F+24*60*60*1e3;return b>=F&&b<X}function H(v,b,j){const F=I(t.uid||"",t.mineMode||"assignee"),X=j,ne=t.includeCompleted!==!1;if(v==="all")return b;if(v==="mine")return b.filter(Y=>F(Y));if(v.startsWith("created_today"))return b.filter(Y=>(v.endsWith("_mine")?F(Y):!0)&&A(Y));if(v.startsWith("created_range"))return b.filter(Y=>(v.endsWith("_mine")?F(Y):!0)&&O(Y,t.from,t.to));if(v.startsWith("due_today"))return b.filter(Y=>(v.endsWith("_mine")?F(Y):!0)&&J(Y));if(v.startsWith("due_"))return b.filter(Y=>(v.endsWith("_mine")?F(Y):!0)&&z(Y,t.from,t.to));if(v.startsWith("custom_")){const Y=v.slice(7),re=(t.customFilters||[]).find(se=>se.id===Y);return re?b.filter(se=>x(se,re,F)):[]}if(v.startsWith("tag_"))return b.filter(Y=>kv(Y,v));if(v.includes("_")){const[Y,re]=v.split("_");return b.filter(se=>{const fe=w(se,Y,X,ne),ce=re==="all"?!0:F(se);return fe&&ce})}return b}function x(v,b,j){const F=(b.labelIds||[]).map(V=>V.trim().toLowerCase()).filter(Boolean),X=(b.labels||[]).map(V=>V.trim().toLowerCase()).filter(Boolean),ne=(b.assignees||[]).map(V=>V.trim().toLowerCase()).filter(Boolean),Y=F.length>0,re=X.length>0,se=ne.length>0;if(!Y&&!re&&!se)return!1;let fe=!0;if(Y||re){const V=(v.labels||[]).map(M=>M.id!=null?String(M.id).trim().toLowerCase():"").filter(Boolean),G=(v.labels||[]).map(M=>String(M.title||"").trim().toLowerCase()).filter(Boolean);fe=(!Y||F.some(M=>V.includes(M)))&&(!re||X.some(M=>G.includes(M)))}let ce=!0;if(se){const V=(v.assignees||[]).map(G=>String(G.uid||"").trim().toLowerCase()).filter(Boolean);ce=ne.some(G=>V.includes(G)),!ce&&ne.includes("me")&&(ce=j(v)),!ce&&ne.includes("unassigned")&&(ce=V.length===0)}return fe&&ce}return(v,b)=>(k(),lt(o_,{cards:$.value,loading:v.loading,"range-label":v.rangeLabel,"last-fetched-at":v.lastFetchedAt,"deck-url":v.deckUrl,error:v.error,filter:f.value,"filters-enabled":y.value,"can-filter-mine":C.value,"allow-mine-override":C.value,"filter-options":d.value,"auto-scroll":t.autoScroll!==!1,"interval-seconds":t.intervalSeconds,"show-count":t.showCount!==!1,compact:t.compactList===!0,title:t.title,"card-bg":t.cardBg,"show-header":t.showHeader!==!1,editable:t.editable===!0,"orderable-values":p.value,onRefresh:b[0]||(b[0]=j=>v.$emit("refresh")),"onUpdate:filter":T,"onReorder:filters":P},null,8,["cards","loading","range-label","last-fetched-at","deck-url","error","filter","filters-enabled","can-filter-mine","allow-mine-override","filter-options","auto-scroll","interval-seconds","show-count","compact","title","card-bg","show-header","editable","orderable-values"]))}})},Symbol.toStringTag,{value:"Module"})),n_={class:"note-header"},s_={key:0,class:"title"},l_=["disabled"],i_={class:"field"},c_={class:"field-head"},d_={class:"label"},u_=["aria-label"],f_=["value"],g_=["value"],p_={class:"field"},h_={class:"label"},m_=["value","disabled"],v_=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"NoteEditorWidget",props:{previous:{},history:{},modelValue:{},prevLabel:{},currLabel:{},saving:{type:Boolean},title:{},cardBg:{},showHeader:{type:Boolean}},emits:["update:modelValue","save"],setup(e,{emit:t}){const a=e,o=t,r=N(()=>a.title||"Notes"),n=N(()=>a.showHeader!==!1),l=a.prevLabel||"Previous",i=a.currLabel||"Current",s={background:a.cardBg||void 0},c=N(()=>(a.history||[]).filter(f=>f&&f.id&&f.label)),u=ie("");Ae(()=>c.value,f=>{var y;u.value=((y=f[0])==null?void 0:y.id)||""},{immediate:!0});const h=N(()=>c.value.find(f=>f.id===u.value)||null),m=N(()=>{var f;return((f=h.value)==null?void 0:f.content)||a.previous||""});function p(f){o("update:modelValue",f.target.value)}function d(){o("save")}return(f,y)=>(k(),_("div",{class:"note-card",style:s},[g("div",n_,[n.value?(k(),_("div",s_,W(r.value),1)):ae("",!0),g("button",{class:"btn",type:"button",disabled:f.saving,onClick:d},"Save",8,l_)]),g("div",i_,[g("div",c_,[g("span",d_,W(D(l)),1),c.value.length?to((k(),_("select",{key:0,"onUpdate:modelValue":y[0]||(y[0]=C=>u.value=C),class:"note-select","aria-label":`Select ${D(l)}`},[(k(!0),_(pe,null,xe(c.value,C=>(k(),_("option",{key:C.id,value:C.id},W(C.label),9,f_))),128))],8,u_)),[[Ki,u.value]]):ae("",!0)]),g("textarea",{class:"note note--compact",value:m.value,readonly:""},null,8,g_)]),g("label",p_,[g("span",h_,W(D(i)),1),g("textarea",{class:"note",value:f.modelValue,disabled:f.saving,onInput:p},null,40,m_)])]))}}),[["__scopeId","data-v-5e293970"]])},Symbol.toStringTag,{value:"Module"})),b_={key:0},y_={key:1,class:"body"},w_={key:2,class:"body empty"},k_=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"NoteSnippetWidget",props:{notesCurr:{},notesPrev:{},title:{},cardBg:{},showHeader:{type:Boolean}},setup(e){const t=e,a=N(()=>{const l=(t.notesCurr||"").trim();return l||(t.notesPrev||"").trim()||""}),o=N(()=>t.title||"Note"),r=N(()=>({background:t.cardBg||void 0})),n=N(()=>t.showHeader!==!1);return(l,i)=>(k(),_("div",{class:"text-card",style:Ee(r.value)},[n.value?(k(),_("h3",b_,W(o.value),1)):ae("",!0),a.value?(k(),_("p",y_,W(a.value),1)):(k(),_("p",w_,""))],4))}}),[["__scopeId","data-v-01eb6d28"]])},Symbol.toStringTag,{value:"Module"})),__={key:0,class:"targets-header"},x_={key:0,class:"hint"},C_={class:"targets-main"},S_={class:"line total-line"},$_={class:"value"},T_={key:0,class:"line"},M_={key:1,class:"line"},A_={key:2,class:"line forecast"},D_={class:"hint"},E_={key:1,class:"targets-badges"},L_={key:2,class:"targets-categories"},N_={class:"cat-top"},I_={class:"cat-label"},B_={class:"name"},O_={class:"cat-meta"},P_={class:"percent"},F_={class:"cat-progress"},H_={class:"bar"},W_={class:"today-label"},z_={class:"cat-metrics"},R_={class:"hint"},j_={key:1,class:"hint"},U_={key:0,class:"cat-footer"},V_={class:"hint"},K_=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"TimeTargetsCard",props:{summary:{},config:{},groups:{},showPace:{type:Boolean,default:!0},showForecast:{type:Boolean,default:!0},showHeader:{type:Boolean},title:{default:"Targets"},cardBg:{default:null}},setup(e){const t=e,a=N(()=>{var d;return((d=t.summary)==null?void 0:d.total)??u("total","Total")}),o=N(()=>t.showHeader!==!1),r=N(()=>{var f;return Array.isArray(t.groups)&&t.groups.length?t.groups.map(y=>({id:y.id,label:y.label,summary:y.summary??u(y.id,y.label),color:y.color,rows:y.rows})):(((f=t.summary)==null?void 0:f.categories)??[]).map(y=>({id:y.id,label:y.label,summary:y,color:void 0,rows:[]}))}),n=N(()=>({background:t.cardBg||void 0})),l=N(()=>r.value.map(d=>{const f=d.summary??u(d.id,d.label),y=Number(d.todayHours??0),C=f.targetHours,$=Math.max(0,f.actualHours-C),E=Math.min($,y),T=C>0?y/C*100:0,P=h(f.percent,0,200);return{id:d.id,label:d.label||f.label,actualHours:f.actualHours,targetHours:C,percent:f.percent,deltaHours:f.deltaHours,needPerDay:f.needPerDay,daysLeft:f.daysLeft,calendarPercent:f.calendarPercent,gap:f.gap,status:f.status,statusLabel:f.statusLabel,color:d.color,calendarCount:Array.isArray(d.rows)?d.rows.length:0,progress:P,todayHours:y,overToday:E,todayWidth:C>0?h(T,2,200):0,todayRight:Math.max(0,100-P),chipLeft:Math.min(100,P),chipText:E>0?`Today ${i(y)} (+${i(E)})`:`Today ${i(y)}`,todayColor:d.color?p(d.color,.65):"var(--brand)",todayBorder:d.color?p(d.color,.35,!0):"var(--brand)",calendarLabel:Array.isArray(d.rows)&&d.rows.length===1?"calendar":"calendars"}}).filter(d=>d.targetHours>0||d.actualHours>0||d.calendarCount>0));function i(d){if(!isFinite(d))return"0";const f=Math.round(d*10)/10;return Math.abs(f-Math.round(f))<.05?String(Math.round(f)):f.toFixed(1)}function s(d){return!isFinite(d)||Math.abs(d)<.005?"0.0":(d>=0?"+":"")+i(Math.abs(d))}function c(d){switch(d){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function u(d,f){return{id:d,label:f,actualHours:0,targetHours:0,percent:0,deltaHours:0,remainingHours:0,needPerDay:0,daysLeft:0,calendarPercent:0,gap:0,status:"none",statusLabel:"",includeWeekend:!0,paceMode:"days_only"}}function h(d,f,y){return!isFinite(d)||d<f?f:d>y?y:d}function m(d){return d==="momentum"?"Momentum":"Linear"}function p(d,f=.5,y=!1){const C=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(d||"");if(!C)return d;const $=parseInt(C[1],16),E=parseInt(C[2],16),T=parseInt(C[3],16),P=Math.max(0,Math.min(1,f));return y?`rgb(${Math.round($*(1-P))},${Math.round(E*(1-P))},${Math.round(T*(1-P))})`:`rgb(${Math.round($+(255-$)*P)},${Math.round(E+(255-E)*P)},${Math.round(T+(255-T)*P)})`}return(d,f)=>(k(),_("div",{class:"card targets-card",style:Ee(n.value)},[o.value?(k(),_("div",__,[g("strong",null,W(d.title||"Targets"),1),a.value.targetHours>0?(k(),_("span",x_,W(a.value.percent.toFixed(0))+"%",1)):ae("",!0)])):ae("",!0),g("div",C_,[g("div",S_,[g("span",$_,[g("strong",null,W(i(a.value.actualHours)),1),Pe(" / "+W(i(a.value.targetHours))+" h",1)]),d.config.ui.showTotalDelta&&a.value.targetHours>0?(k(),_("span",{key:0,class:Be(["delta",a.value.deltaHours>=0?"pos":"neg"])},"  "+W(s(a.value.deltaHours))+"h ",3)):ae("",!0)]),d.config.ui.showNeedPerDay&&a.value.targetHours>0?(k(),_("div",T_," Days left "+W(a.value.daysLeft)+"  Need "+W(i(a.value.needPerDay))+" h/day ",1)):ae("",!0),d.showPace&&a.value.targetHours>0?(k(),_("div",M_,[Pe(" Pace: "+W(a.value.percent.toFixed(0))+"% vs "+W(a.value.calendarPercent.toFixed(0))+"%  ",1),g("span",{class:Be(["status-label",c(a.value.status)])},W(a.value.statusLabel),3)])):ae("",!0),d.showForecast?(k(),_("div",A_,[Pe(" Forecast: "+W(d.summary.forecast.text)+" ",1),g("span",D_," Linear "+W(i(d.summary.forecast.linear))+"h  Momentum "+W(i(d.summary.forecast.momentum))+"h  Primary: "+W(m(d.summary.forecast.primaryMethod)),1)])):ae("",!0)]),d.config.ui.badges&&a.value.targetHours>0?(k(),_("div",E_,[g("span",{class:Be(["badge",c(a.value.status)])},W(a.value.statusLabel),3)])):ae("",!0),d.config.ui.showCategoryBlocks&&l.value.length?(k(),_("div",L_,[(k(!0),_(pe,null,xe(l.value,y=>(k(),_("div",{class:"category",key:y.id},[g("div",N_,[g("div",I_,[g("span",{class:"dot",style:Ee({background:y.color||"var(--brand)"})},null,4),g("span",B_,W(y.label),1)]),g("div",O_,[g("span",P_,W(y.percent.toFixed(0))+"%",1),d.config.ui.badges&&y.targetHours>0?(k(),_("span",{key:0,class:Be(["badge",c(y.status)])},W(y.statusLabel),3)):ae("",!0)])]),g("div",F_,[g("div",H_,[g("div",{class:"fill",style:Ee({width:y.progress+"%",background:y.color||"var(--brand)"})},null,4),y.todayWidth>0?(k(),_("div",{key:0,class:"today-overlay",style:Ee({width:y.todayWidth+"%",right:y.todayRight+"%",background:y.todayColor,borderColor:y.todayBorder})},null,4)):ae("",!0),y.todayWidth>0?(k(),_("div",{key:1,class:"today-chip",style:Ee({left:y.chipLeft+"%",background:y.todayColor,borderColor:y.todayBorder})},[g("span",W_,W(y.chipText),1)],4)):ae("",!0)])]),g("div",z_,[g("strong",null,W(i(y.actualHours))+"h",1),g("span",R_,"/ "+W(i(y.targetHours))+"h",1),y.targetHours>0?(k(),_("span",{key:0,class:Be(["delta",y.deltaHours>=0?"pos":"neg"])},"  "+W(s(y.deltaHours))+"h ",3)):ae("",!0),d.config.ui.showNeedPerDay&&y.targetHours>0?(k(),_("span",j_," Need "+W(i(y.needPerDay))+"h/day  "+W(y.daysLeft)+" days left ",1)):ae("",!0)]),y.calendarCount>0?(k(),_("div",U_,[g("span",V_,W(y.calendarCount)+" "+W(y.calendarLabel),1)])):ae("",!0)]))),128))])):ae("",!0)],4))}}),[["__scopeId","data-v-9ee23cb0"]])},Symbol.toStringTag,{value:"Module"})),q_={key:0,class:"time-summary-firstline"},G_={key:1,class:"today-highlight"},J_={class:"today-value"},Y_={key:2,class:"today-cats"},Z_={class:"name"},X_={class:"value"},Q_={key:3,class:"time-summary-inline"},ex={key:4,class:"time-summary-inline"},tx={key:5,class:"time-summary-inline"},ax={key:6,class:"time-summary-row"},ox={key:7,class:"time-summary-row"},rx={key:0,class:"share"},nx={key:8,class:"time-summary-row calendars"},sx={class:"label"},lx={class:"text"},ix={key:9,class:"time-summary-row top-category"},cx={class:"text"},dx={key:10,class:"time-summary-activity"},ux={class:"time-summary-activity__line"},fx={key:0,class:"time-summary-activity__line"},gx={key:0,class:"time-summary-activity__delta"},px={key:1,class:"time-summary-activity__delta"},hx={key:1,class:"time-summary-activity__line"},mx={key:2,class:"time-summary-activity__line"},vx={key:3,class:"time-summary-activity__line"},bx={key:11,class:"time-summary-history"},yx={class:"time-summary-history__header"},wx={class:"time-summary-history__mode"},kx={key:0,class:"time-summary-history__pills"},_x={class:"history-pill__title"},xx={class:"history-pill__metrics"},Cx={class:"history-pill__metric-label"},Sx={class:"history-pill__metric-value"},$x={key:1,class:"time-summary-history__list"},Tx={class:"history-entry__header"},Mx={class:"history-entry__title"},Ax={key:0,class:"history-entry__range"},Dx={class:"history-entry__metrics"},Ex={class:"history-entry__metric-label"},Lx={class:"history-entry__metric-value"},Nx={key:12,class:"time-summary-delta"},Ix=Object.freeze(Object.defineProperty({__proto__:null,default:Qe(Le({__name:"TimeSummaryCard",props:{summary:{},activitySummary:{},mode:{},config:{},todayGroups:{},title:{},cardBg:{},rangeMode:{},rangeStart:{},rangeEnd:{},offset:{},showHeader:{type:Boolean},history:{},showHistory:{type:Boolean},historyView:{},showActivityDetails:{type:Boolean}},setup(e){const t={showTotal:!0,showAverage:!0,showMedian:!0,showBusiest:!0,showWorkday:!0,showWeekend:!0,showWeekendShare:!0,showCalendarSummary:!0,showTopCategory:!0,showBalance:!0},a=e,o=N(()=>Object.assign({},t,a.config??{})),r=N(()=>a.mode==="active"?"active days":"all days"),n=N(()=>(a.todayGroups||[]).filter(L=>Number(L.todayHours)>0).map(L=>({...L,todayHours:Number(L.todayHours)||0,color:L.color||"var(--brand)"}))),l=N(()=>{var U;if(n.value.length)return n.value.reduce((q,Q)=>q+Q.todayHours,0);const L=(U=a.summary)==null?void 0:U.todayHours;return typeof L=="number"&&Number.isFinite(L)?L:null}),i=N(()=>a.title||"Time Summary"),s=N(()=>{var q;const L=i.value,U=((q=a.summary)==null?void 0:q.rangeLabel)||"";return U?`${L}  ${U}`:L}),c=N(()=>({background:a.cardBg||void 0})),u=N(()=>a.showHeader!==!1),h=N(()=>a.showHistory!==!1),m=N(()=>a.historyView==="pills"?"pills":"list"),p=N(()=>m.value==="pills"?"Compact":"Detailed"),d=N(()=>a.showActivityDetails!==!1),f=N(()=>Number.isFinite(a.summary.offset)?a.summary.offset:a.offset??0),y=N(()=>f.value-1),C=N(()=>y.value-f.value),$=N(()=>G(y.value)),E=N(()=>V(C.value)),T=N(()=>f.value===0?"":` (offset ${G(f.value)})`),P=N(()=>{if(!o.value.showWeekendShare)return"";const L=a.summary.weekendShare;return L==null?"":`${X(L)}%`}),I=N(()=>{if(!o.value.showTopCategory)return null;const L=a.summary.topCategory;if(!L)return null;const U=ne(L.actualHours),q=Number(L.percent??0).toFixed(0),Q=L.targetHours>0?` (${q}% of ${ne(L.targetHours)} h)`:"";return{text:`${L.label}  ${U} h${Q}`,badge:L.statusLabel||"",badgeClass:re(L.status)}}),w=N(()=>{if(!o.value.showBusiest)return"";const L=a.summary.busiest;if(!L||!L.date)return"";const U=Number(L.hours??0);return`Busiest ${L.date}  ${ne(U)} h`}),A=N(()=>{const L=[];return o.value.showAverage&&(L.push(`${ne(a.summary.avgDay)} h/day (${r.value})`),L.push(`${ne(a.summary.avgEvent)} h/event`)),o.value.showMedian&&L.push(`${ne(a.summary.medianDay)} h median/day`),L.filter(Boolean).join("  ")}),O=N(()=>a.activitySummary??null),z=N(()=>{var L;return((L=O.value)==null?void 0:L.lastDayOff)||""}),J=N(()=>{var q,Q;const L=Y(((q=O.value)==null?void 0:q.typicalStart)??null),U=Y(((Q=O.value)==null?void 0:Q.typicalEnd)??null);return L&&U?`${L}${U}`:L?`${L}`:U?`${U}`:""}),H=N(()=>{var q,Q;const L=Y(((q=O.value)==null?void 0:q.earliestStart)??null),U=Y(((Q=O.value)==null?void 0:Q.latestEnd)??null);return!L&&!U?"":`${L||""} / ${U||""}`}),x=N(()=>{var U;const L=(U=O.value)==null?void 0:U.longestSession;return L==null?"":`${Number(L).toFixed(1)} h`}),v=N(()=>{var L;return(L=O.value)!=null&&L.delta?R(O.value.weekendShare,O.value.delta.weekendShare):""}),b=N(()=>{var L;return(L=O.value)!=null&&L.delta?R(O.value.eveningShare,O.value.delta.eveningShare):""}),j=N(()=>h.value?(Array.isArray(a.history)?a.history:[]).map(U=>{var Q,ge,ue,le,de,ke,be,me,ye,Ce,_e,Se;const q=[];if(o.value.showTotal&&q.push({key:"total",label:"Total",value:`${ne(U.totalHours)} h`}),o.value.showAverage&&(q.push({key:"avg-day",label:`Avg/day (${r.value})`,value:`${ne(U.avgDay)} h`}),q.push({key:"avg-event",label:"Avg/event",value:`${ne(U.avgEvent)} h`})),o.value.showMedian&&q.push({key:"median",label:"Median/day",value:`${ne(U.medianDay)} h`}),o.value.showBusiest&&q.push({key:"busiest",label:"Busiest",value:B(U.busiest)}),o.value.showWorkday&&q.push({key:"workday",label:"Workdays",value:`${ne(U.workdayAvg)} h avg  ${ne(U.workdayMedian)} h median`}),o.value.showWeekend){const $e=o.value.showWeekendShare&&U.weekendShare!=null?` (${X(U.weekendShare)}%)`:"";q.push({key:"weekend",label:"Weekend",value:`${ne(U.weekendAvg)} h avg  ${ne(U.weekendMedian)} h median${$e}`})}return o.value.showCalendarSummary&&q.push({key:"calendars",label:`${U.activeCalendars} calendars`,value:U.calendarSummary||""}),o.value.showTopCategory&&q.push({key:"top-category",label:"Top category",value:K(U.topCategory)}),o.value.showBalance&&q.push({key:"balance",label:"Balance index",value:U.balanceIndex==null?"":U.balanceIndex.toFixed(2)}),q.push({key:"events",label:"Events",value:String(((Q=U.activity)==null?void 0:Q.events)??0)}),q.push({key:"active-days",label:"Active days",value:String(((ge=U.activity)==null?void 0:ge.activeDays)??0)}),q.push({key:"typical",label:"Typical",value:oe((ue=U.activity)==null?void 0:ue.typicalStart,(le=U.activity)==null?void 0:le.typicalEnd)}),d.value&&(q.push({key:"weekend-share",label:"Weekend share",value:((de=U.activity)==null?void 0:de.weekendShare)==null?"":`${X(U.activity.weekendShare)}%`}),q.push({key:"evening-share",label:"Evening share",value:((ke=U.activity)==null?void 0:ke.eveningShare)==null?"":`${X(U.activity.eveningShare)}%`}),q.push({key:"earliest-latest",label:"Earliest/Late",value:ve((be=U.activity)==null?void 0:be.earliestStart,(me=U.activity)==null?void 0:me.latestEnd)}),q.push({key:"overlaps",label:"Overlaps",value:String(((ye=U.activity)==null?void 0:ye.overlapEvents)??0)}),q.push({key:"longest",label:"Longest",value:S((Ce=U.activity)==null?void 0:Ce.longestSession)}),q.push({key:"last-day-off",label:"Last day off",value:((_e=U.activity)==null?void 0:_e.lastDayOff)||""}),q.push({key:"last-half-day",label:"Last half day",value:((Se=U.activity)==null?void 0:Se.lastHalfDayOff)||""})),{offset:U.offset,label:U.label||`Offset ${G(U.offset)}`,range:M(U.rangeStart,U.rangeEnd),metrics:q}}):[]);N(()=>{const L=a.summary.rangeStart||a.rangeStart,U=a.summary.rangeEnd||a.rangeEnd;if(!L||!U)return"";const q=fe(L),Q=fe(U);if(!q||!Q)return"";const ge=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),ue=ge.format(q),le=ge.format(Q);return ue===le?ue:`${ue}${le}`});const F=N(()=>{const L=a.summary.delta;if(!L)return"";const q=a.summary.totalHours-L.totalHours,Q=q!==0?L.totalHours/q*100:0,ge=E.value,ue=L.totalHours>=0?"+":"",le=`${ue}${ne(Math.abs(L.totalHours))} h`,de=`${ue}${Math.abs(Q).toFixed(1)}%`,ke=$.value,be=ge?` (${ge})`:"";return` vs. offset ${ke}${be}: ${le} / ${de}`});function X(L){return Number(L??0).toFixed(1)}function ne(L){return Number(L??0).toFixed(2)}function Y(L){if(!L)return"";if(/^\d{2}:\d{2}$/.test(L))return L;const U=new Date(L);return Number.isNaN(U.getTime())?"":U.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function re(L){switch(L){case"on_track":return"status-on";case"at_risk":return"status-risk";case"behind":return"status-behind";case"done":return"status-done";default:return"status-none"}}function se(L){return L==null?"0.0%":`${Math.max(0,Math.min(100,Number(L))).toFixed(1)}%`}function fe(L){const U=L.trim();if(!U)return null;const q=new Date(U.length===10?`${U}T00:00:00`:U);return Number.isNaN(q.getTime())?null:q}function ce(L,U,q){const Q=new Date(L);return U==="month"?Q.setMonth(Q.getMonth()+q):Q.setDate(Q.getDate()+q*7),Q}function V(L){const U=(a.rangeMode||"week").toString().toLowerCase(),q=fe(a.summary.rangeStart||a.rangeStart||""),Q=fe(a.summary.rangeEnd||a.rangeEnd||"");if(!q||!Q)return"";const ge=ce(q,U,L),ue=ce(Q,U,L),le=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),de=le.format(ge),ke=le.format(ue);return de===ke?de:`${de}${ke}`}function G(L){return L===0?"0":L>0?`+${L}`:`${L}`}function M(L,U){const q=L?fe(L):null,Q=U?fe(U):null;if(!q||!Q)return"";const ge=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),ue=ge.format(q),le=ge.format(Q);return ue===le?ue:`${ue}${le}`}function B(L){if(!(L!=null&&L.date))return"";const U=Number((L==null?void 0:L.hours)??0);return`${L.date}  ${ne(U)} h`}function K(L){if(!L)return"";const U=L.targetHours>0?` (${Math.round(L.percent)}% of ${ne(L.targetHours)} h)`:"";return`${L.label}  ${ne(L.actualHours)} h${U}`}function oe(L,U){const q=Y(L||null),Q=Y(U||null);return q&&Q?`${q}${Q}`:q?`${q}`:Q?`${Q}`:""}function ve(L,U){const q=Y(L||null),Q=Y(U||null);return!q&&!Q?"":`${q||""} / ${Q||""}`}function S(L){return L==null?"":`${Number(L).toFixed(1)} h`}function R(L,U){if(U==null||L==null)return"";const q=L-U;return` vs. offset ${$.value}  ${se(q)}`}return(L,U)=>(k(),_("div",{class:"card time-summary compact",style:Ee(c.value)},[u.value?(k(),_("div",q_,[g("span",null,W(s.value),1)])):ae("",!0),l.value!==null?(k(),_("div",G_,[U[0]||(U[0]=g("div",{class:"today-label"},"Total today",-1)),g("div",J_,W(ne(l.value))+" h",1)])):ae("",!0),n.value.length?(k(),_("div",Y_,[(k(!0),_(pe,null,xe(n.value,q=>(k(),_("div",{class:"today-cat",key:q.id},[g("span",{class:"dot",style:Ee({background:q.color||"var(--brand)"})},null,4),g("span",Z_,W(q.label),1),g("span",X_,W(ne(q.todayHours))+" h",1)]))),128))])):ae("",!0),o.value.showTotal?(k(),_("div",Q_,[g("strong",null,W(ne(L.summary.totalHours))+" h",1),U[1]||(U[1]=Pe(" total ",-1))])):ae("",!0),A.value?(k(),_("div",ex,W(A.value),1)):ae("",!0),o.value.showBusiest&&w.value?(k(),_("div",tx,W(w.value),1)):ae("",!0),o.value.showWorkday?(k(),_("div",ax,[U[2]||(U[2]=g("span",{class:"label"},"Workdays",-1)),Pe(" "+W(ne(L.summary.workdayAvg))+" h avg  "+W(ne(L.summary.workdayMedian))+" h median ",1)])):ae("",!0),o.value.showWeekend?(k(),_("div",ox,[U[3]||(U[3]=g("span",{class:"label"},"Weekend",-1)),Pe(" "+W(ne(L.summary.weekendAvg))+" h avg  "+W(ne(L.summary.weekendMedian))+" h median ",1),o.value.showWeekendShare&&P.value?(k(),_("span",rx,"("+W(P.value)+")",1)):ae("",!0)])):ae("",!0),o.value.showCalendarSummary?(k(),_("div",nx,[g("span",sx,W(L.summary.activeCalendars)+" calendars",1),L.summary.calendarSummary?(k(),_(pe,{key:0},[U[4]||(U[4]=g("span",{class:"sep"},"",-1)),g("span",lx,W(L.summary.calendarSummary),1)],64)):ae("",!0)])):ae("",!0),o.value.showTopCategory&&I.value?(k(),_("div",ix,[U[5]||(U[5]=g("span",{class:"label"},"Top category",-1)),g("span",cx,W(I.value.text),1),I.value.badge?(k(),_("span",{key:0,class:Be(["summary-badge",I.value.badgeClass])},W(I.value.badge),3)):ae("",!0)])):ae("",!0),O.value?(k(),_("div",dx,[U[6]||(U[6]=g("div",{class:"time-summary-activity__title"},"Activity & Schedule",-1)),g("div",ux," Events "+W(O.value.events)+"  Active Days "+W(O.value.activeDays??0)+"  Typical "+W(J.value)+W(T.value),1),d.value?(k(),_("div",fx,[Pe(" Weekend "+W(se(O.value.weekendShare))+" ",1),v.value?(k(),_("span",gx,"("+W(v.value)+")",1)):ae("",!0),Pe("  Evening "+W(se(O.value.eveningShare))+" ",1),b.value?(k(),_("span",px,"("+W(b.value)+")",1)):ae("",!0)])):ae("",!0),d.value?(k(),_("div",hx," Earliest/Late "+W(H.value),1)):ae("",!0),d.value?(k(),_("div",mx," Overlaps "+W(O.value.overlapEvents??0)+"  Longest "+W(x.value),1)):ae("",!0),d.value?(k(),_("div",vx," Last day off "+W(z.value),1)):ae("",!0)])):ae("",!0),h.value&&j.value.length?(k(),_("div",bx,[g("div",yx,[U[7]||(U[7]=g("div",{class:"time-summary-history__title"},"Lookback",-1)),g("div",wx,W(p.value),1)]),m.value==="pills"?(k(),_("div",kx,[(k(!0),_(pe,null,xe(j.value,q=>(k(),_("div",{class:"history-pill",key:q.offset},[g("div",_x,W(q.label),1),g("div",xx,[(k(!0),_(pe,null,xe(q.metrics,Q=>(k(),_("span",{class:"history-pill__metric",key:Q.key},[g("span",Cx,W(Q.label),1),g("span",Sx,W(Q.value),1)]))),128))])]))),128))])):(k(),_("div",$x,[(k(!0),_(pe,null,xe(j.value,q=>(k(),_("div",{class:"history-entry",key:q.offset},[g("div",Tx,[g("span",Mx,W(q.label),1),q.range?(k(),_("span",Ax,W(q.range),1)):ae("",!0)]),g("div",Dx,[(k(!0),_(pe,null,xe(q.metrics,Q=>(k(),_("div",{class:"history-entry__metric",key:Q.key},[g("span",Ex,W(Q.label),1),g("span",Lx,W(Q.value),1)]))),128))])]))),128))]))])):ae("",!0),F.value?(k(),_("div",Nx,W(F.value),1)):ae("",!0)],4))}}),[["__scopeId","data-v-2f547f8a"]])},Symbol.toStringTag,{value:"Module"}))})();
